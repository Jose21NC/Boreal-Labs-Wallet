function g4(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function Zu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var u1={exports:{}},sc={},l1={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function v4(){if(D_)return Xe;D_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function v(q){return q===null||typeof q!="object"?null:(q=p&&q[p]||q["@@iterator"],typeof q=="function"?q:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,A={};function C(q,oe,_e){this.props=q,this.context=oe,this.refs=A,this.updater=_e||y}C.prototype.isReactComponent={},C.prototype.setState=function(q,oe){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,oe,"setState")},C.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function N(){}N.prototype=C.prototype;function P(q,oe,_e){this.props=q,this.context=oe,this.refs=A,this.updater=_e||y}var M=P.prototype=new N;M.constructor=P,E(M,C.prototype),M.isPureReactComponent=!0;var j=Array.isArray,H=Object.prototype.hasOwnProperty,$={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(q,oe,_e){var Ie,$e={},We=null,ke=null;if(oe!=null)for(Ie in oe.ref!==void 0&&(ke=oe.ref),oe.key!==void 0&&(We=""+oe.key),oe)H.call(oe,Ie)&&!R.hasOwnProperty(Ie)&&($e[Ie]=oe[Ie]);var Ke=arguments.length-2;if(Ke===1)$e.children=_e;else if(1<Ke){for(var ie=Array(Ke),Re=0;Re<Ke;Re++)ie[Re]=arguments[Re+2];$e.children=ie}if(q&&q.defaultProps)for(Ie in Ke=q.defaultProps,Ke)$e[Ie]===void 0&&($e[Ie]=Ke[Ie]);return{$$typeof:n,type:q,key:We,ref:ke,props:$e,_owner:$.current}}function D(q,oe){return{$$typeof:n,type:q.type,key:oe,ref:q.ref,props:q.props,_owner:q._owner}}function O(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function F(q){var oe={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(_e){return oe[_e]})}var B=/\/+/g;function L(q,oe){return typeof q=="object"&&q!==null&&q.key!=null?F(""+q.key):oe.toString(36)}function te(q,oe,_e,Ie,$e){var We=typeof q;(We==="undefined"||We==="boolean")&&(q=null);var ke=!1;if(q===null)ke=!0;else switch(We){case"string":case"number":ke=!0;break;case"object":switch(q.$$typeof){case n:case e:ke=!0}}if(ke)return ke=q,$e=$e(ke),q=Ie===""?"."+L(ke,0):Ie,j($e)?(_e="",q!=null&&(_e=q.replace(B,"$&/")+"/"),te($e,oe,_e,"",function(Re){return Re})):$e!=null&&(O($e)&&($e=D($e,_e+(!$e.key||ke&&ke.key===$e.key?"":(""+$e.key).replace(B,"$&/")+"/")+q)),oe.push($e)),1;if(ke=0,Ie=Ie===""?".":Ie+":",j(q))for(var Ke=0;Ke<q.length;Ke++){We=q[Ke];var ie=Ie+L(We,Ke);ke+=te(We,oe,_e,ie,$e)}else if(ie=v(q),typeof ie=="function")for(q=ie.call(q),Ke=0;!(We=q.next()).done;)We=We.value,ie=Ie+L(We,Ke++),ke+=te(We,oe,_e,ie,$e);else if(We==="object")throw oe=String(q),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.");return ke}function be(q,oe,_e){if(q==null)return q;var Ie=[],$e=0;return te(q,Ie,"","",function(We){return oe.call(_e,We,$e++)}),Ie}function Oe(q){if(q._status===-1){var oe=q._result;oe=oe(),oe.then(function(_e){(q._status===0||q._status===-1)&&(q._status=1,q._result=_e)},function(_e){(q._status===0||q._status===-1)&&(q._status=2,q._result=_e)}),q._status===-1&&(q._status=0,q._result=oe)}if(q._status===1)return q._result.default;throw q._result}var xe={current:null},Z={transition:null},me={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:Z,ReactCurrentOwner:$};function de(){throw Error("act(...) is not supported in production builds of React.")}return Xe.Children={map:be,forEach:function(q,oe,_e){be(q,function(){oe.apply(this,arguments)},_e)},count:function(q){var oe=0;return be(q,function(){oe++}),oe},toArray:function(q){return be(q,function(oe){return oe})||[]},only:function(q){if(!O(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Xe.Component=C,Xe.Fragment=t,Xe.Profiler=i,Xe.PureComponent=P,Xe.StrictMode=r,Xe.Suspense=c,Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Xe.act=de,Xe.cloneElement=function(q,oe,_e){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var Ie=E({},q.props),$e=q.key,We=q.ref,ke=q._owner;if(oe!=null){if(oe.ref!==void 0&&(We=oe.ref,ke=$.current),oe.key!==void 0&&($e=""+oe.key),q.type&&q.type.defaultProps)var Ke=q.type.defaultProps;for(ie in oe)H.call(oe,ie)&&!R.hasOwnProperty(ie)&&(Ie[ie]=oe[ie]===void 0&&Ke!==void 0?Ke[ie]:oe[ie])}var ie=arguments.length-2;if(ie===1)Ie.children=_e;else if(1<ie){Ke=Array(ie);for(var Re=0;Re<ie;Re++)Ke[Re]=arguments[Re+2];Ie.children=Ke}return{$$typeof:n,type:q.type,key:$e,ref:We,props:Ie,_owner:ke}},Xe.createContext=function(q){return q={$$typeof:s,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:o,_context:q},q.Consumer=q},Xe.createElement=I,Xe.createFactory=function(q){var oe=I.bind(null,q);return oe.type=q,oe},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(q){return{$$typeof:a,render:q}},Xe.isValidElement=O,Xe.lazy=function(q){return{$$typeof:h,_payload:{_status:-1,_result:q},_init:Oe}},Xe.memo=function(q,oe){return{$$typeof:f,type:q,compare:oe===void 0?null:oe}},Xe.startTransition=function(q){var oe=Z.transition;Z.transition={};try{q()}finally{Z.transition=oe}},Xe.unstable_act=de,Xe.useCallback=function(q,oe){return xe.current.useCallback(q,oe)},Xe.useContext=function(q){return xe.current.useContext(q)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(q){return xe.current.useDeferredValue(q)},Xe.useEffect=function(q,oe){return xe.current.useEffect(q,oe)},Xe.useId=function(){return xe.current.useId()},Xe.useImperativeHandle=function(q,oe,_e){return xe.current.useImperativeHandle(q,oe,_e)},Xe.useInsertionEffect=function(q,oe){return xe.current.useInsertionEffect(q,oe)},Xe.useLayoutEffect=function(q,oe){return xe.current.useLayoutEffect(q,oe)},Xe.useMemo=function(q,oe){return xe.current.useMemo(q,oe)},Xe.useReducer=function(q,oe,_e){return xe.current.useReducer(q,oe,_e)},Xe.useRef=function(q){return xe.current.useRef(q)},Xe.useState=function(q){return xe.current.useState(q)},Xe.useSyncExternalStore=function(q,oe,_e){return xe.current.useSyncExternalStore(q,oe,_e)},Xe.useTransition=function(){return xe.current.useTransition()},Xe.version="18.3.1",Xe}var O_;function Sg(){return O_||(O_=1,l1.exports=v4()),l1.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function y4(){if(k_)return sc;k_=1;var n=Sg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,c,f){var h,p={},v=null,y=null;f!==void 0&&(v=""+f),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(y=c.ref);for(h in c)r.call(c,h)&&!o.hasOwnProperty(h)&&(p[h]=c[h]);if(a&&a.defaultProps)for(h in c=a.defaultProps,c)p[h]===void 0&&(p[h]=c[h]);return{$$typeof:e,type:a,key:v,ref:y,props:p,_owner:i.current}}return sc.Fragment=t,sc.jsx=s,sc.jsxs=s,sc}var M_;function x4(){return M_||(M_=1,u1.exports=y4()),u1.exports}var S=x4(),U=Sg();const Rn=Zu(U),_4=g4({__proto__:null,default:Rn},[U]);var jh={},c1={exports:{}},or={},f1={exports:{}},h1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function w4(){return L_||(L_=1,(function(n){function e(Z,me){var de=Z.length;Z.push(me);e:for(;0<de;){var q=de-1>>>1,oe=Z[q];if(0<i(oe,me))Z[q]=me,Z[de]=oe,de=q;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var me=Z[0],de=Z.pop();if(de!==me){Z[0]=de;e:for(var q=0,oe=Z.length,_e=oe>>>1;q<_e;){var Ie=2*(q+1)-1,$e=Z[Ie],We=Ie+1,ke=Z[We];if(0>i($e,de))We<oe&&0>i(ke,$e)?(Z[q]=ke,Z[We]=de,q=We):(Z[q]=$e,Z[Ie]=de,q=Ie);else if(We<oe&&0>i(ke,de))Z[q]=ke,Z[We]=de,q=We;else break e}}return me}function i(Z,me){var de=Z.sortIndex-me.sortIndex;return de!==0?de:Z.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var c=[],f=[],h=1,p=null,v=3,y=!1,E=!1,A=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(Z){for(var me=t(f);me!==null;){if(me.callback===null)r(f);else if(me.startTime<=Z)r(f),me.sortIndex=me.expirationTime,e(c,me);else break;me=t(f)}}function j(Z){if(A=!1,M(Z),!E)if(t(c)!==null)E=!0,Oe(H);else{var me=t(f);me!==null&&xe(j,me.startTime-Z)}}function H(Z,me){E=!1,A&&(A=!1,N(I),I=-1),y=!0;var de=v;try{for(M(me),p=t(c);p!==null&&(!(p.expirationTime>me)||Z&&!F());){var q=p.callback;if(typeof q=="function"){p.callback=null,v=p.priorityLevel;var oe=q(p.expirationTime<=me);me=n.unstable_now(),typeof oe=="function"?p.callback=oe:p===t(c)&&r(c),M(me)}else r(c);p=t(c)}if(p!==null)var _e=!0;else{var Ie=t(f);Ie!==null&&xe(j,Ie.startTime-me),_e=!1}return _e}finally{p=null,v=de,y=!1}}var $=!1,R=null,I=-1,D=5,O=-1;function F(){return!(n.unstable_now()-O<D)}function B(){if(R!==null){var Z=n.unstable_now();O=Z;var me=!0;try{me=R(!0,Z)}finally{me?L():($=!1,R=null)}}else $=!1}var L;if(typeof P=="function")L=function(){P(B)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,be=te.port2;te.port1.onmessage=B,L=function(){be.postMessage(null)}}else L=function(){C(B,0)};function Oe(Z){R=Z,$||($=!0,L())}function xe(Z,me){I=C(function(){Z(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){E||y||(E=!0,Oe(H))},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(Z){switch(v){case 1:case 2:case 3:var me=3;break;default:me=v}var de=v;v=me;try{return Z()}finally{v=de}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,me){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var de=v;v=Z;try{return me()}finally{v=de}},n.unstable_scheduleCallback=function(Z,me,de){var q=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?q+de:q):de=q,Z){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=de+oe,Z={id:h++,callback:me,priorityLevel:Z,startTime:de,expirationTime:oe,sortIndex:-1},de>q?(Z.sortIndex=de,e(f,Z),t(c)===null&&Z===t(f)&&(A?(N(I),I=-1):A=!0,xe(j,de-q))):(Z.sortIndex=oe,e(c,Z),E||y||(E=!0,Oe(H))),Z},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(Z){var me=v;return function(){var de=v;v=me;try{return Z.apply(this,arguments)}finally{v=de}}}})(h1)),h1}var V_;function E4(){return V_||(V_=1,f1.exports=w4()),f1.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function A4(){if(F_)return or;F_=1;var n=Sg(),e=E4();function t(u){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+u,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+u+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(u,l){s(u,l),s(u+"Capture",l)}function s(u,l){for(i[u]=l,u=0;u<l.length;u++)r.add(l[u])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(u){return c.call(p,u)?!0:c.call(h,u)?!1:f.test(u)?p[u]=!0:(h[u]=!0,!1)}function y(u,l,d,g){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function E(u,l,d,g){if(l===null||typeof l>"u"||y(u,l,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function A(u,l,d,g,x,_,b){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=x,this.mustUseProperty=d,this.propertyName=u,this.type=l,this.sanitizeURL=_,this.removeEmptyString=b}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){C[u]=new A(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var l=u[0];C[l]=new A(l,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){C[u]=new A(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){C[u]=new A(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){C[u]=new A(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){C[u]=new A(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){C[u]=new A(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){C[u]=new A(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){C[u]=new A(u,5,!1,u.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function P(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var l=u.replace(N,P);C[l]=new A(l,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var l=u.replace(N,P);C[l]=new A(l,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var l=u.replace(N,P);C[l]=new A(l,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){C[u]=new A(u,1,!1,u.toLowerCase(),null,!1,!1)}),C.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){C[u]=new A(u,1,!1,u.toLowerCase(),null,!0,!0)});function M(u,l,d,g){var x=C.hasOwnProperty(l)?C[l]:null;(x!==null?x.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(E(l,d,x,g)&&(d=null),g||x===null?v(l)&&(d===null?u.removeAttribute(l):u.setAttribute(l,""+d)):x.mustUseProperty?u[x.propertyName]=d===null?x.type===3?!1:"":d:(l=x.attributeName,g=x.attributeNamespace,d===null?u.removeAttribute(l):(x=x.type,d=x===3||x===4&&d===!0?"":""+d,g?u.setAttributeNS(g,l,d):u.setAttribute(l,d))))}var j=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),$=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),F=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),Z=Symbol.iterator;function me(u){return u===null||typeof u!="object"?null:(u=Z&&u[Z]||u["@@iterator"],typeof u=="function"?u:null)}var de=Object.assign,q;function oe(u){if(q===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);q=l&&l[1]||""}return`
`+q+u}var _e=!1;function Ie(u,l){if(!u||_e)return"";_e=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(J){var g=J}Reflect.construct(u,[],l)}else{try{l.call()}catch(J){g=J}u.call(l.prototype)}else{try{throw Error()}catch(J){g=J}u()}}catch(J){if(J&&g&&typeof J.stack=="string"){for(var x=J.stack.split(`
`),_=g.stack.split(`
`),b=x.length-1,z=_.length-1;1<=b&&0<=z&&x[b]!==_[z];)z--;for(;1<=b&&0<=z;b--,z--)if(x[b]!==_[z]){if(b!==1||z!==1)do if(b--,z--,0>z||x[b]!==_[z]){var W=`
`+x[b].replace(" at new "," at ");return u.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",u.displayName)),W}while(1<=b&&0<=z);break}}}finally{_e=!1,Error.prepareStackTrace=d}return(u=u?u.displayName||u.name:"")?oe(u):""}function $e(u){switch(u.tag){case 5:return oe(u.type);case 16:return oe("Lazy");case 13:return oe("Suspense");case 19:return oe("SuspenseList");case 0:case 2:case 15:return u=Ie(u.type,!1),u;case 11:return u=Ie(u.type.render,!1),u;case 1:return u=Ie(u.type,!0),u;default:return""}}function We(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case R:return"Fragment";case $:return"Portal";case D:return"Profiler";case I:return"StrictMode";case L:return"Suspense";case te:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case F:return(u.displayName||"Context")+".Consumer";case O:return(u._context.displayName||"Context")+".Provider";case B:var l=u.render;return u=u.displayName,u||(u=l.displayName||l.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case be:return l=u.displayName||null,l!==null?l:We(u.type)||"Memo";case Oe:l=u._payload,u=u._init;try{return We(u(l))}catch{}}return null}function ke(u){var l=u.type;switch(u.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=l.render,u=u.displayName||u.name||"",l.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return We(l);case 8:return l===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ke(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function ie(u){var l=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Re(u){var l=ie(u)?"checked":"value",d=Object.getOwnPropertyDescriptor(u.constructor.prototype,l),g=""+u[l];if(!u.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,_=d.set;return Object.defineProperty(u,l,{configurable:!0,get:function(){return x.call(this)},set:function(b){g=""+b,_.call(this,b)}}),Object.defineProperty(u,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(b){g=""+b},stopTracking:function(){u._valueTracker=null,delete u[l]}}}}function et(u){u._valueTracker||(u._valueTracker=Re(u))}function bt(u){if(!u)return!1;var l=u._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return u&&(g=ie(u)?u.checked?"true":"false":u.value),u=g,u!==d?(l.setValue(u),!0):!1}function Lt(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function ci(u,l){var d=l.checked;return de({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??u._wrapperState.initialChecked})}function If(u,l){var d=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;d=Ke(l.value!=null?l.value:d),u._wrapperState={initialChecked:g,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Pa(u,l){l=l.checked,l!=null&&M(u,"checked",l,!1)}function Rs(u,l){Pa(u,l);var d=Ke(l.value),g=l.type;if(d!=null)g==="number"?(d===0&&u.value===""||u.value!=d)&&(u.value=""+d):u.value!==""+d&&(u.value=""+d);else if(g==="submit"||g==="reset"){u.removeAttribute("value");return}l.hasOwnProperty("value")?qt(u,l.type,d):l.hasOwnProperty("defaultValue")&&qt(u,l.type,Ke(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(u.defaultChecked=!!l.defaultChecked)}function dl(u,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+u._wrapperState.initialValue,d||l===u.value||(u.value=l),u.defaultValue=l}d=u.name,d!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,d!==""&&(u.name=d)}function qt(u,l,d){(l!=="number"||Lt(u.ownerDocument)!==u)&&(d==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+d&&(u.defaultValue=""+d))}var jt=Array.isArray;function Wr(u,l,d,g){if(u=u.options,l){l={};for(var x=0;x<d.length;x++)l["$"+d[x]]=!0;for(d=0;d<u.length;d++)x=l.hasOwnProperty("$"+u[d].value),u[d].selected!==x&&(u[d].selected=x),x&&g&&(u[d].defaultSelected=!0)}else{for(d=""+Ke(d),l=null,x=0;x<u.length;x++){if(u[x].value===d){u[x].selected=!0,g&&(u[x].defaultSelected=!0);return}l!==null||u[x].disabled||(l=u[x])}l!==null&&(l.selected=!0)}}function pl(u,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return de({},l,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function ml(u,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(t(92));if(jt(d)){if(1<d.length)throw Error(t(93));d=d[0]}l=d}l==null&&(l=""),d=l}u._wrapperState={initialValue:Ke(d)}}function Sf(u,l){var d=Ke(l.value),g=Ke(l.defaultValue);d!=null&&(d=""+d,d!==u.value&&(u.value=d),l.defaultValue==null&&u.defaultValue!==d&&(u.defaultValue=d)),g!=null&&(u.defaultValue=""+g)}function Eo(u){var l=u.textContent;l===u._wrapperState.initialValue&&l!==""&&l!==null&&(u.value=l)}function gl(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Na(u,l){return u==null||u==="http://www.w3.org/1999/xhtml"?gl(l):u==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var Ao,bf=(function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,g,x){MSApp.execUnsafeLocalFunction(function(){return u(l,d,g,x)})}:u})(function(u,l){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=l;else{for(Ao=Ao||document.createElement("div"),Ao.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Ao.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;l.firstChild;)u.appendChild(l.firstChild)}});function Ps(u,l){if(l){var d=u.firstChild;if(d&&d===u.lastChild&&d.nodeType===3){d.nodeValue=l;return}}u.textContent=l}var Co={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rf=["Webkit","ms","Moz","O"];Object.keys(Co).forEach(function(u){Rf.forEach(function(l){l=l+u.charAt(0).toUpperCase()+u.substring(1),Co[l]=Co[u]})});function To(u,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||Co.hasOwnProperty(u)&&Co[u]?(""+l).trim():l+"px"}function Da(u,l){u=u.style;for(var d in l)if(l.hasOwnProperty(d)){var g=d.indexOf("--")===0,x=To(d,l[d],g);d==="float"&&(d="cssFloat"),g?u.setProperty(d,x):u[d]=x}}var vl=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gr(u,l){if(l){if(vl[u]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,u));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Oa(u,l){if(u.indexOf("-")===-1)return typeof l.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Io=null;function ka(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var $i=null,Wi=null,Vt=null;function yl(u){if(u=Wl(u)){if(typeof $i!="function")throw Error(t(280));var l=u.stateNode;l&&(l=nh(l),$i(u.stateNode,u.type,l))}}function So(u){Wi?Vt?Vt.push(u):Vt=[u]:Wi=u}function bo(){if(Wi){var u=Wi,l=Vt;if(Vt=Wi=null,yl(u),l)for(u=0;u<l.length;u++)yl(l[u])}}function Pf(u,l){return u(l)}function Nf(){}var fi=!1;function Df(u,l,d){if(fi)return u(l,d);fi=!0;try{return Pf(u,l,d)}finally{fi=!1,(Wi!==null||Vt!==null)&&(Nf(),bo())}}function Ns(u,l){var d=u.stateNode;if(d===null)return null;var g=nh(d);if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(u=u.type,g=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!g;break e;default:u=!1}if(u)return null;if(d&&typeof d!="function")throw Error(t(231,l,typeof d));return d}var Ro=!1;if(a)try{var Po={};Object.defineProperty(Po,"passive",{get:function(){Ro=!0}}),window.addEventListener("test",Po,Po),window.removeEventListener("test",Po,Po)}catch{Ro=!1}function Of(u,l,d,g,x,_,b,z,W){var J=Array.prototype.slice.call(arguments,3);try{l.apply(d,J)}catch(ue){this.onError(ue)}}var Gi=!1,hi=null,Ma=!1,br=null,kf={onError:function(u){Gi=!0,hi=u}};function Mf(u,l,d,g,x,_,b,z,W){Gi=!1,hi=null,Of.apply(kf,arguments)}function xl(u,l,d,g,x,_,b,z,W){if(Mf.apply(this,arguments),Gi){if(Gi){var J=hi;Gi=!1,hi=null}else throw Error(t(198));Ma||(Ma=!0,br=J)}}function qr(u){var l=u,d=u;if(u.alternate)for(;l.return;)l=l.return;else{u=l;do l=u,(l.flags&4098)!==0&&(d=l.return),u=l.return;while(u)}return l.tag===3?d:null}function _l(u){if(u.tag===13){var l=u.memoizedState;if(l===null&&(u=u.alternate,u!==null&&(l=u.memoizedState)),l!==null)return l.dehydrated}return null}function Lf(u){if(qr(u)!==u)throw Error(t(188))}function Vf(u){var l=u.alternate;if(!l){if(l=qr(u),l===null)throw Error(t(188));return l!==u?null:u}for(var d=u,g=l;;){var x=d.return;if(x===null)break;var _=x.alternate;if(_===null){if(g=x.return,g!==null){d=g;continue}break}if(x.child===_.child){for(_=x.child;_;){if(_===d)return Lf(x),u;if(_===g)return Lf(x),l;_=_.sibling}throw Error(t(188))}if(d.return!==g.return)d=x,g=_;else{for(var b=!1,z=x.child;z;){if(z===d){b=!0,d=x,g=_;break}if(z===g){b=!0,g=x,d=_;break}z=z.sibling}if(!b){for(z=_.child;z;){if(z===d){b=!0,d=_,g=x;break}if(z===g){b=!0,g=_,d=x;break}z=z.sibling}if(!b)throw Error(t(189))}}if(d.alternate!==g)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?u:l}function Ff(u){return u=Vf(u),u!==null?Ds(u):null}function Ds(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var l=Ds(u);if(l!==null)return l;u=u.sibling}return null}var wl=e.unstable_scheduleCallback,La=e.unstable_cancelCallback,Os=e.unstable_shouldYield,qi=e.unstable_requestPaint,Et=e.unstable_now,Bp=e.unstable_getCurrentPriorityLevel,Va=e.unstable_ImmediatePriority,El=e.unstable_UserBlockingPriority,ks=e.unstable_NormalPriority,Al=e.unstable_LowPriority,Fa=e.unstable_IdlePriority,Ms=null,dr=null;function Bf(u){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(Ms,u,void 0,(u.current.flags&128)===128)}catch{}}var pr=Math.clz32?Math.clz32:Ls,di=Math.log,Rr=Math.LN2;function Ls(u){return u>>>=0,u===0?32:31-(di(u)/Rr|0)|0}var pi=64,No=4194304;function lt(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Ki(u,l){var d=u.pendingLanes;if(d===0)return 0;var g=0,x=u.suspendedLanes,_=u.pingedLanes,b=d&268435455;if(b!==0){var z=b&~x;z!==0?g=lt(z):(_&=b,_!==0&&(g=lt(_)))}else b=d&~x,b!==0?g=lt(b):_!==0&&(g=lt(_));if(g===0)return 0;if(l!==0&&l!==g&&(l&x)===0&&(x=g&-g,_=l&-l,x>=_||x===16&&(_&4194240)!==0))return l;if((g&4)!==0&&(g|=d&16),l=u.entangledLanes,l!==0)for(u=u.entanglements,l&=g;0<l;)d=31-pr(l),x=1<<d,g|=u[d],l&=~x;return g}function Vs(u,l){switch(u){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fs(u,l){for(var d=u.suspendedLanes,g=u.pingedLanes,x=u.expirationTimes,_=u.pendingLanes;0<_;){var b=31-pr(_),z=1<<b,W=x[b];W===-1?((z&d)===0||(z&g)!==0)&&(x[b]=Vs(z,l)):W<=l&&(u.expiredLanes|=z),_&=~z}}function Cl(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function Tl(){var u=pi;return pi<<=1,(pi&4194240)===0&&(pi=64),u}function Il(u){for(var l=[],d=0;31>d;d++)l.push(u);return l}function Bs(u,l,d){u.pendingLanes|=l,l!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,l=31-pr(l),u[l]=d}function Up(u,l){var d=u.pendingLanes&~l;u.pendingLanes=l,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=l,u.mutableReadLanes&=l,u.entangledLanes&=l,l=u.entanglements;var g=u.eventTimes;for(u=u.expirationTimes;0<d;){var x=31-pr(d),_=1<<x;l[x]=0,g[x]=-1,u[x]=-1,d&=~_}}function Sl(u,l){var d=u.entangledLanes|=l;for(u=u.entanglements;d;){var g=31-pr(d),x=1<<g;x&l|u[g]&l&&(u[g]|=l),d&=~x}}var tt=0;function mi(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var bl,Ba,Rl,Pl,Nl,gi=!1,Ua=[],vi=null,yi=null,wn=null,Us=new Map,Xi=new Map,mr=[],Uf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Do(u,l){switch(u){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":Us.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xi.delete(l.pointerId)}}function Kr(u,l,d,g,x,_){return u===null||u.nativeEvent!==_?(u={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:_,targetContainers:[x]},l!==null&&(l=Wl(l),l!==null&&Ba(l)),u):(u.eventSystemFlags|=g,l=u.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),u)}function jf(u,l,d,g,x){switch(l){case"focusin":return vi=Kr(vi,u,l,d,g,x),!0;case"dragenter":return yi=Kr(yi,u,l,d,g,x),!0;case"mouseover":return wn=Kr(wn,u,l,d,g,x),!0;case"pointerover":var _=x.pointerId;return Us.set(_,Kr(Us.get(_)||null,u,l,d,g,x)),!0;case"gotpointercapture":return _=x.pointerId,Xi.set(_,Kr(Xi.get(_)||null,u,l,d,g,x)),!0}return!1}function ja(u){var l=$s(u.target);if(l!==null){var d=qr(l);if(d!==null){if(l=d.tag,l===13){if(l=_l(d),l!==null){u.blockedOn=l,Nl(u.priority,function(){Rl(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){u.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}u.blockedOn=null}function xt(u){if(u.blockedOn!==null)return!1;for(var l=u.targetContainers;0<l.length;){var d=za(u.domEventName,u.eventSystemFlags,l[0],u.nativeEvent);if(d===null){d=u.nativeEvent;var g=new d.constructor(d.type,d);Io=g,d.target.dispatchEvent(g),Io=null}else return l=Wl(d),l!==null&&Ba(l),u.blockedOn=d,!1;l.shift()}return!0}function zf(u,l,d){xt(u)&&d.delete(l)}function jp(){gi=!1,vi!==null&&xt(vi)&&(vi=null),yi!==null&&xt(yi)&&(yi=null),wn!==null&&xt(wn)&&(wn=null),Us.forEach(zf),Xi.forEach(zf)}function Oo(u,l){u.blockedOn===l&&(u.blockedOn=null,gi||(gi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,jp)))}function ko(u){function l(x){return Oo(x,u)}if(0<Ua.length){Oo(Ua[0],u);for(var d=1;d<Ua.length;d++){var g=Ua[d];g.blockedOn===u&&(g.blockedOn=null)}}for(vi!==null&&Oo(vi,u),yi!==null&&Oo(yi,u),wn!==null&&Oo(wn,u),Us.forEach(l),Xi.forEach(l),d=0;d<mr.length;d++)g=mr[d],g.blockedOn===u&&(g.blockedOn=null);for(;0<mr.length&&(d=mr[0],d.blockedOn===null);)ja(d),d.blockedOn===null&&mr.shift()}var Yi=j.ReactCurrentBatchConfig,Qi=!0;function xi(u,l,d,g){var x=tt,_=Yi.transition;Yi.transition=null;try{tt=1,Dl(u,l,d,g)}finally{tt=x,Yi.transition=_}}function Hf(u,l,d,g){var x=tt,_=Yi.transition;Yi.transition=null;try{tt=4,Dl(u,l,d,g)}finally{tt=x,Yi.transition=_}}function Dl(u,l,d,g){if(Qi){var x=za(u,l,d,g);if(x===null)Zp(u,l,g,_i,d),Do(u,g);else if(jf(x,u,l,d,g))g.stopPropagation();else if(Do(u,g),l&4&&-1<Uf.indexOf(u)){for(;x!==null;){var _=Wl(x);if(_!==null&&bl(_),_=za(u,l,d,g),_===null&&Zp(u,l,g,_i,d),_===x)break;x=_}x!==null&&g.stopPropagation()}else Zp(u,l,g,null,d)}}var _i=null;function za(u,l,d,g){if(_i=null,u=ka(g),u=$s(u),u!==null)if(l=qr(u),l===null)u=null;else if(d=l.tag,d===13){if(u=_l(l),u!==null)return u;u=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;u=null}else l!==u&&(u=null);return _i=u,null}function Ha(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bp()){case Va:return 1;case El:return 4;case ks:case Al:return 16;case Fa:return 536870912;default:return 16}default:return 16}}var gr=null,$a=null,Zi=null;function $f(){if(Zi)return Zi;var u,l=$a,d=l.length,g,x="value"in gr?gr.value:gr.textContent,_=x.length;for(u=0;u<d&&l[u]===x[u];u++);var b=d-u;for(g=1;g<=b&&l[d-g]===x[_-g];g++);return Zi=x.slice(u,1<g?1-g:void 0)}function js(u){var l=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&l===13&&(u=13)):u=l,u===10&&(u=13),32<=u||u===13?u:0}function wi(){return!0}function Ol(){return!1}function kn(u){function l(d,g,x,_,b){this._reactName=d,this._targetInst=x,this.type=g,this.nativeEvent=_,this.target=b,this.currentTarget=null;for(var z in u)u.hasOwnProperty(z)&&(d=u[z],this[z]=d?d(_):_[z]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?wi:Ol,this.isPropagationStopped=Ol,this}return de(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),l}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zs=kn(Ei),Mo=de({},Ei,{view:0,detail:0}),Wa=kn(Mo),Ga,qa,vr,Hs=de({},Mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:He,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==vr&&(vr&&u.type==="mousemove"?(Ga=u.screenX-vr.screenX,qa=u.screenY-vr.screenY):qa=Ga=0,vr=u),Ga)},movementY:function(u){return"movementY"in u?u.movementY:qa}}),kl=kn(Hs),Wf=de({},Hs,{dataTransfer:0}),Gf=kn(Wf),Ka=de({},Mo,{relatedTarget:0}),En=kn(Ka),qf=de({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),Kf=kn(qf),Lo=de({},Ei,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),m=kn(Lo),w=de({},Ei,{data:0}),T=kn(w),k={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fe(u){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(u):(u=ee[u])?!!l[u]:!1}function He(){return fe}var zt=de({},Mo,{key:function(u){if(u.key){var l=k[u.key]||u.key;if(l!=="Unidentified")return l}return u.type==="keypress"?(u=js(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?X[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:He,charCode:function(u){return u.type==="keypress"?js(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?js(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),dt=kn(zt),Kt=de({},Hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yr=kn(Kt),Ji=de({},Mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:He}),Ai=kn(Ji),Ci=de({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xa=kn(Ci),Ml=de({},Hs,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),cb=kn(Ml),fb=[9,13,27,32],zp=a&&"CompositionEvent"in window,Ll=null;a&&"documentMode"in document&&(Ll=document.documentMode);var hb=a&&"TextEvent"in window&&!Ll,Cy=a&&(!zp||Ll&&8<Ll&&11>=Ll),Ty=" ",Iy=!1;function Sy(u,l){switch(u){case"keyup":return fb.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function by(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Ya=!1;function db(u,l){switch(u){case"compositionend":return by(l);case"keypress":return l.which!==32?null:(Iy=!0,Ty);case"textInput":return u=l.data,u===Ty&&Iy?null:u;default:return null}}function pb(u,l){if(Ya)return u==="compositionend"||!zp&&Sy(u,l)?(u=$f(),Zi=$a=gr=null,Ya=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Cy&&l.locale!=="ko"?null:l.data;default:return null}}var mb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ry(u){var l=u&&u.nodeName&&u.nodeName.toLowerCase();return l==="input"?!!mb[u.type]:l==="textarea"}function Py(u,l,d,g){So(g),l=Jf(l,"onChange"),0<l.length&&(d=new zs("onChange","change",null,d,g),u.push({event:d,listeners:l}))}var Vl=null,Fl=null;function gb(u){Ky(u,0)}function Xf(u){var l=tu(u);if(bt(l))return u}function vb(u,l){if(u==="change")return l}var Ny=!1;if(a){var Hp;if(a){var $p="oninput"in document;if(!$p){var Dy=document.createElement("div");Dy.setAttribute("oninput","return;"),$p=typeof Dy.oninput=="function"}Hp=$p}else Hp=!1;Ny=Hp&&(!document.documentMode||9<document.documentMode)}function Oy(){Vl&&(Vl.detachEvent("onpropertychange",ky),Fl=Vl=null)}function ky(u){if(u.propertyName==="value"&&Xf(Fl)){var l=[];Py(l,Fl,u,ka(u)),Df(gb,l)}}function yb(u,l,d){u==="focusin"?(Oy(),Vl=l,Fl=d,Vl.attachEvent("onpropertychange",ky)):u==="focusout"&&Oy()}function xb(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Xf(Fl)}function _b(u,l){if(u==="click")return Xf(l)}function wb(u,l){if(u==="input"||u==="change")return Xf(l)}function Eb(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var Xr=typeof Object.is=="function"?Object.is:Eb;function Bl(u,l){if(Xr(u,l))return!0;if(typeof u!="object"||u===null||typeof l!="object"||l===null)return!1;var d=Object.keys(u),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var x=d[g];if(!c.call(l,x)||!Xr(u[x],l[x]))return!1}return!0}function My(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function Ly(u,l){var d=My(u);u=0;for(var g;d;){if(d.nodeType===3){if(g=u+d.textContent.length,u<=l&&g>=l)return{node:d,offset:l-u};u=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=My(d)}}function Vy(u,l){return u&&l?u===l?!0:u&&u.nodeType===3?!1:l&&l.nodeType===3?Vy(u,l.parentNode):"contains"in u?u.contains(l):u.compareDocumentPosition?!!(u.compareDocumentPosition(l)&16):!1:!1}function Fy(){for(var u=window,l=Lt();l instanceof u.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)u=l.contentWindow;else break;l=Lt(u.document)}return l}function Wp(u){var l=u&&u.nodeName&&u.nodeName.toLowerCase();return l&&(l==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||l==="textarea"||u.contentEditable==="true")}function Ab(u){var l=Fy(),d=u.focusedElem,g=u.selectionRange;if(l!==d&&d&&d.ownerDocument&&Vy(d.ownerDocument.documentElement,d)){if(g!==null&&Wp(d)){if(l=g.start,u=g.end,u===void 0&&(u=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(u,d.value.length);else if(u=(l=d.ownerDocument||document)&&l.defaultView||window,u.getSelection){u=u.getSelection();var x=d.textContent.length,_=Math.min(g.start,x);g=g.end===void 0?_:Math.min(g.end,x),!u.extend&&_>g&&(x=g,g=_,_=x),x=Ly(d,_);var b=Ly(d,g);x&&b&&(u.rangeCount!==1||u.anchorNode!==x.node||u.anchorOffset!==x.offset||u.focusNode!==b.node||u.focusOffset!==b.offset)&&(l=l.createRange(),l.setStart(x.node,x.offset),u.removeAllRanges(),_>g?(u.addRange(l),u.extend(b.node,b.offset)):(l.setEnd(b.node,b.offset),u.addRange(l)))}}for(l=[],u=d;u=u.parentNode;)u.nodeType===1&&l.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)u=l[d],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var Cb=a&&"documentMode"in document&&11>=document.documentMode,Qa=null,Gp=null,Ul=null,qp=!1;function By(u,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;qp||Qa==null||Qa!==Lt(g)||(g=Qa,"selectionStart"in g&&Wp(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Ul&&Bl(Ul,g)||(Ul=g,g=Jf(Gp,"onSelect"),0<g.length&&(l=new zs("onSelect","select",null,l,d),u.push({event:l,listeners:g}),l.target=Qa)))}function Yf(u,l){var d={};return d[u.toLowerCase()]=l.toLowerCase(),d["Webkit"+u]="webkit"+l,d["Moz"+u]="moz"+l,d}var Za={animationend:Yf("Animation","AnimationEnd"),animationiteration:Yf("Animation","AnimationIteration"),animationstart:Yf("Animation","AnimationStart"),transitionend:Yf("Transition","TransitionEnd")},Kp={},Uy={};a&&(Uy=document.createElement("div").style,"AnimationEvent"in window||(delete Za.animationend.animation,delete Za.animationiteration.animation,delete Za.animationstart.animation),"TransitionEvent"in window||delete Za.transitionend.transition);function Qf(u){if(Kp[u])return Kp[u];if(!Za[u])return u;var l=Za[u],d;for(d in l)if(l.hasOwnProperty(d)&&d in Uy)return Kp[u]=l[d];return u}var jy=Qf("animationend"),zy=Qf("animationiteration"),Hy=Qf("animationstart"),$y=Qf("transitionend"),Wy=new Map,Gy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vo(u,l){Wy.set(u,l),o(l,[u])}for(var Xp=0;Xp<Gy.length;Xp++){var Yp=Gy[Xp],Tb=Yp.toLowerCase(),Ib=Yp[0].toUpperCase()+Yp.slice(1);Vo(Tb,"on"+Ib)}Vo(jy,"onAnimationEnd"),Vo(zy,"onAnimationIteration"),Vo(Hy,"onAnimationStart"),Vo("dblclick","onDoubleClick"),Vo("focusin","onFocus"),Vo("focusout","onBlur"),Vo($y,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sb=new Set("cancel close invalid load scroll toggle".split(" ").concat(jl));function qy(u,l,d){var g=u.type||"unknown-event";u.currentTarget=d,xl(g,l,void 0,u),u.currentTarget=null}function Ky(u,l){l=(l&4)!==0;for(var d=0;d<u.length;d++){var g=u[d],x=g.event;g=g.listeners;e:{var _=void 0;if(l)for(var b=g.length-1;0<=b;b--){var z=g[b],W=z.instance,J=z.currentTarget;if(z=z.listener,W!==_&&x.isPropagationStopped())break e;qy(x,z,J),_=W}else for(b=0;b<g.length;b++){if(z=g[b],W=z.instance,J=z.currentTarget,z=z.listener,W!==_&&x.isPropagationStopped())break e;qy(x,z,J),_=W}}}if(Ma)throw u=br,Ma=!1,br=null,u}function At(u,l){var d=l[i0];d===void 0&&(d=l[i0]=new Set);var g=u+"__bubble";d.has(g)||(Xy(l,u,2,!1),d.add(g))}function Qp(u,l,d){var g=0;l&&(g|=4),Xy(d,u,g,l)}var Zf="_reactListening"+Math.random().toString(36).slice(2);function zl(u){if(!u[Zf]){u[Zf]=!0,r.forEach(function(d){d!=="selectionchange"&&(Sb.has(d)||Qp(d,!1,u),Qp(d,!0,u))});var l=u.nodeType===9?u:u.ownerDocument;l===null||l[Zf]||(l[Zf]=!0,Qp("selectionchange",!1,l))}}function Xy(u,l,d,g){switch(Ha(l)){case 1:var x=xi;break;case 4:x=Hf;break;default:x=Dl}d=x.bind(null,l,d,u),x=void 0,!Ro||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),g?x!==void 0?u.addEventListener(l,d,{capture:!0,passive:x}):u.addEventListener(l,d,!0):x!==void 0?u.addEventListener(l,d,{passive:x}):u.addEventListener(l,d,!1)}function Zp(u,l,d,g,x){var _=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var b=g.tag;if(b===3||b===4){var z=g.stateNode.containerInfo;if(z===x||z.nodeType===8&&z.parentNode===x)break;if(b===4)for(b=g.return;b!==null;){var W=b.tag;if((W===3||W===4)&&(W=b.stateNode.containerInfo,W===x||W.nodeType===8&&W.parentNode===x))return;b=b.return}for(;z!==null;){if(b=$s(z),b===null)return;if(W=b.tag,W===5||W===6){g=_=b;continue e}z=z.parentNode}}g=g.return}Df(function(){var J=_,ue=ka(d),le=[];e:{var ae=Wy.get(u);if(ae!==void 0){var ge=zs,we=u;switch(u){case"keypress":if(js(d)===0)break e;case"keydown":case"keyup":ge=dt;break;case"focusin":we="focus",ge=En;break;case"focusout":we="blur",ge=En;break;case"beforeblur":case"afterblur":ge=En;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=kl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Gf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=Ai;break;case jy:case zy:case Hy:ge=Kf;break;case $y:ge=Xa;break;case"scroll":ge=Wa;break;case"wheel":ge=cb;break;case"copy":case"cut":case"paste":ge=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=yr}var Ce=(l&4)!==0,Ht=!Ce&&u==="scroll",K=Ce?ae!==null?ae+"Capture":null:ae;Ce=[];for(var G=J,Q;G!==null;){Q=G;var ce=Q.stateNode;if(Q.tag===5&&ce!==null&&(Q=ce,K!==null&&(ce=Ns(G,K),ce!=null&&Ce.push(Hl(G,ce,Q)))),Ht)break;G=G.return}0<Ce.length&&(ae=new ge(ae,we,null,d,ue),le.push({event:ae,listeners:Ce}))}}if((l&7)===0){e:{if(ae=u==="mouseover"||u==="pointerover",ge=u==="mouseout"||u==="pointerout",ae&&d!==Io&&(we=d.relatedTarget||d.fromElement)&&($s(we)||we[eo]))break e;if((ge||ae)&&(ae=ue.window===ue?ue:(ae=ue.ownerDocument)?ae.defaultView||ae.parentWindow:window,ge?(we=d.relatedTarget||d.toElement,ge=J,we=we?$s(we):null,we!==null&&(Ht=qr(we),we!==Ht||we.tag!==5&&we.tag!==6)&&(we=null)):(ge=null,we=J),ge!==we)){if(Ce=kl,ce="onMouseLeave",K="onMouseEnter",G="mouse",(u==="pointerout"||u==="pointerover")&&(Ce=yr,ce="onPointerLeave",K="onPointerEnter",G="pointer"),Ht=ge==null?ae:tu(ge),Q=we==null?ae:tu(we),ae=new Ce(ce,G+"leave",ge,d,ue),ae.target=Ht,ae.relatedTarget=Q,ce=null,$s(ue)===J&&(Ce=new Ce(K,G+"enter",we,d,ue),Ce.target=Q,Ce.relatedTarget=Ht,ce=Ce),Ht=ce,ge&&we)t:{for(Ce=ge,K=we,G=0,Q=Ce;Q;Q=Ja(Q))G++;for(Q=0,ce=K;ce;ce=Ja(ce))Q++;for(;0<G-Q;)Ce=Ja(Ce),G--;for(;0<Q-G;)K=Ja(K),Q--;for(;G--;){if(Ce===K||K!==null&&Ce===K.alternate)break t;Ce=Ja(Ce),K=Ja(K)}Ce=null}else Ce=null;ge!==null&&Yy(le,ae,ge,Ce,!1),we!==null&&Ht!==null&&Yy(le,Ht,we,Ce,!0)}}e:{if(ae=J?tu(J):window,ge=ae.nodeName&&ae.nodeName.toLowerCase(),ge==="select"||ge==="input"&&ae.type==="file")var Se=vb;else if(Ry(ae))if(Ny)Se=wb;else{Se=xb;var Me=yb}else(ge=ae.nodeName)&&ge.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Se=_b);if(Se&&(Se=Se(u,J))){Py(le,Se,d,ue);break e}Me&&Me(u,ae,J),u==="focusout"&&(Me=ae._wrapperState)&&Me.controlled&&ae.type==="number"&&qt(ae,"number",ae.value)}switch(Me=J?tu(J):window,u){case"focusin":(Ry(Me)||Me.contentEditable==="true")&&(Qa=Me,Gp=J,Ul=null);break;case"focusout":Ul=Gp=Qa=null;break;case"mousedown":qp=!0;break;case"contextmenu":case"mouseup":case"dragend":qp=!1,By(le,d,ue);break;case"selectionchange":if(Cb)break;case"keydown":case"keyup":By(le,d,ue)}var Le;if(zp)e:{switch(u){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Ya?Sy(u,d)&&(Ue="onCompositionEnd"):u==="keydown"&&d.keyCode===229&&(Ue="onCompositionStart");Ue&&(Cy&&d.locale!=="ko"&&(Ya||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Ya&&(Le=$f()):(gr=ue,$a="value"in gr?gr.value:gr.textContent,Ya=!0)),Me=Jf(J,Ue),0<Me.length&&(Ue=new T(Ue,u,null,d,ue),le.push({event:Ue,listeners:Me}),Le?Ue.data=Le:(Le=by(d),Le!==null&&(Ue.data=Le)))),(Le=hb?db(u,d):pb(u,d))&&(J=Jf(J,"onBeforeInput"),0<J.length&&(ue=new T("onBeforeInput","beforeinput",null,d,ue),le.push({event:ue,listeners:J}),ue.data=Le))}Ky(le,l)})}function Hl(u,l,d){return{instance:u,listener:l,currentTarget:d}}function Jf(u,l){for(var d=l+"Capture",g=[];u!==null;){var x=u,_=x.stateNode;x.tag===5&&_!==null&&(x=_,_=Ns(u,d),_!=null&&g.unshift(Hl(u,_,x)),_=Ns(u,l),_!=null&&g.push(Hl(u,_,x))),u=u.return}return g}function Ja(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function Yy(u,l,d,g,x){for(var _=l._reactName,b=[];d!==null&&d!==g;){var z=d,W=z.alternate,J=z.stateNode;if(W!==null&&W===g)break;z.tag===5&&J!==null&&(z=J,x?(W=Ns(d,_),W!=null&&b.unshift(Hl(d,W,z))):x||(W=Ns(d,_),W!=null&&b.push(Hl(d,W,z)))),d=d.return}b.length!==0&&u.push({event:l,listeners:b})}var bb=/\r\n?/g,Rb=/\u0000|\uFFFD/g;function Qy(u){return(typeof u=="string"?u:""+u).replace(bb,`
`).replace(Rb,"")}function eh(u,l,d){if(l=Qy(l),Qy(u)!==l&&d)throw Error(t(425))}function th(){}var Jp=null,e0=null;function t0(u,l){return u==="textarea"||u==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var n0=typeof setTimeout=="function"?setTimeout:void 0,Pb=typeof clearTimeout=="function"?clearTimeout:void 0,Zy=typeof Promise=="function"?Promise:void 0,Nb=typeof queueMicrotask=="function"?queueMicrotask:typeof Zy<"u"?function(u){return Zy.resolve(null).then(u).catch(Db)}:n0;function Db(u){setTimeout(function(){throw u})}function r0(u,l){var d=l,g=0;do{var x=d.nextSibling;if(u.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(g===0){u.removeChild(x),ko(l);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=x}while(d);ko(l)}function Fo(u){for(;u!=null;u=u.nextSibling){var l=u.nodeType;if(l===1||l===3)break;if(l===8){if(l=u.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return u}function Jy(u){u=u.previousSibling;for(var l=0;u;){if(u.nodeType===8){var d=u.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return u;l--}else d==="/$"&&l++}u=u.previousSibling}return null}var eu=Math.random().toString(36).slice(2),Ti="__reactFiber$"+eu,$l="__reactProps$"+eu,eo="__reactContainer$"+eu,i0="__reactEvents$"+eu,Ob="__reactListeners$"+eu,kb="__reactHandles$"+eu;function $s(u){var l=u[Ti];if(l)return l;for(var d=u.parentNode;d;){if(l=d[eo]||d[Ti]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(u=Jy(u);u!==null;){if(d=u[Ti])return d;u=Jy(u)}return l}u=d,d=u.parentNode}return null}function Wl(u){return u=u[Ti]||u[eo],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function tu(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(t(33))}function nh(u){return u[$l]||null}var o0=[],nu=-1;function Bo(u){return{current:u}}function Ct(u){0>nu||(u.current=o0[nu],o0[nu]=null,nu--)}function _t(u,l){nu++,o0[nu]=u.current,u.current=l}var Uo={},Mn=Bo(Uo),er=Bo(!1),Ws=Uo;function ru(u,l){var d=u.type.contextTypes;if(!d)return Uo;var g=u.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var x={},_;for(_ in d)x[_]=l[_];return g&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=l,u.__reactInternalMemoizedMaskedChildContext=x),x}function tr(u){return u=u.childContextTypes,u!=null}function rh(){Ct(er),Ct(Mn)}function ex(u,l,d){if(Mn.current!==Uo)throw Error(t(168));_t(Mn,l),_t(er,d)}function tx(u,l,d){var g=u.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var x in g)if(!(x in l))throw Error(t(108,ke(u)||"Unknown",x));return de({},d,g)}function ih(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Uo,Ws=Mn.current,_t(Mn,u),_t(er,er.current),!0}function nx(u,l,d){var g=u.stateNode;if(!g)throw Error(t(169));d?(u=tx(u,l,Ws),g.__reactInternalMemoizedMergedChildContext=u,Ct(er),Ct(Mn),_t(Mn,u)):Ct(er),_t(er,d)}var to=null,oh=!1,s0=!1;function rx(u){to===null?to=[u]:to.push(u)}function Mb(u){oh=!0,rx(u)}function jo(){if(!s0&&to!==null){s0=!0;var u=0,l=tt;try{var d=to;for(tt=1;u<d.length;u++){var g=d[u];do g=g(!0);while(g!==null)}to=null,oh=!1}catch(x){throw to!==null&&(to=to.slice(u+1)),wl(Va,jo),x}finally{tt=l,s0=!1}}return null}var iu=[],ou=0,sh=null,ah=0,Pr=[],Nr=0,Gs=null,no=1,ro="";function qs(u,l){iu[ou++]=ah,iu[ou++]=sh,sh=u,ah=l}function ix(u,l,d){Pr[Nr++]=no,Pr[Nr++]=ro,Pr[Nr++]=Gs,Gs=u;var g=no;u=ro;var x=32-pr(g)-1;g&=~(1<<x),d+=1;var _=32-pr(l)+x;if(30<_){var b=x-x%5;_=(g&(1<<b)-1).toString(32),g>>=b,x-=b,no=1<<32-pr(l)+x|d<<x|g,ro=_+u}else no=1<<_|d<<x|g,ro=u}function a0(u){u.return!==null&&(qs(u,1),ix(u,1,0))}function u0(u){for(;u===sh;)sh=iu[--ou],iu[ou]=null,ah=iu[--ou],iu[ou]=null;for(;u===Gs;)Gs=Pr[--Nr],Pr[Nr]=null,ro=Pr[--Nr],Pr[Nr]=null,no=Pr[--Nr],Pr[Nr]=null}var xr=null,_r=null,Rt=!1,Yr=null;function ox(u,l){var d=Mr(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=u,l=u.deletions,l===null?(u.deletions=[d],u.flags|=16):l.push(d)}function sx(u,l){switch(u.tag){case 5:var d=u.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(u.stateNode=l,xr=u,_r=Fo(l.firstChild),!0):!1;case 6:return l=u.pendingProps===""||l.nodeType!==3?null:l,l!==null?(u.stateNode=l,xr=u,_r=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Gs!==null?{id:no,overflow:ro}:null,u.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=Mr(18,null,null,0),d.stateNode=l,d.return=u,u.child=d,xr=u,_r=null,!0):!1;default:return!1}}function l0(u){return(u.mode&1)!==0&&(u.flags&128)===0}function c0(u){if(Rt){var l=_r;if(l){var d=l;if(!sx(u,l)){if(l0(u))throw Error(t(418));l=Fo(d.nextSibling);var g=xr;l&&sx(u,l)?ox(g,d):(u.flags=u.flags&-4097|2,Rt=!1,xr=u)}}else{if(l0(u))throw Error(t(418));u.flags=u.flags&-4097|2,Rt=!1,xr=u}}}function ax(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;xr=u}function uh(u){if(u!==xr)return!1;if(!Rt)return ax(u),Rt=!0,!1;var l;if((l=u.tag!==3)&&!(l=u.tag!==5)&&(l=u.type,l=l!=="head"&&l!=="body"&&!t0(u.type,u.memoizedProps)),l&&(l=_r)){if(l0(u))throw ux(),Error(t(418));for(;l;)ox(u,l),l=Fo(l.nextSibling)}if(ax(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(t(317));e:{for(u=u.nextSibling,l=0;u;){if(u.nodeType===8){var d=u.data;if(d==="/$"){if(l===0){_r=Fo(u.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}u=u.nextSibling}_r=null}}else _r=xr?Fo(u.stateNode.nextSibling):null;return!0}function ux(){for(var u=_r;u;)u=Fo(u.nextSibling)}function su(){_r=xr=null,Rt=!1}function f0(u){Yr===null?Yr=[u]:Yr.push(u)}var Lb=j.ReactCurrentBatchConfig;function Gl(u,l,d){if(u=d.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var g=d.stateNode}if(!g)throw Error(t(147,u));var x=g,_=""+u;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===_?l.ref:(l=function(b){var z=x.refs;b===null?delete z[_]:z[_]=b},l._stringRef=_,l)}if(typeof u!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,u))}return u}function lh(u,l){throw u=Object.prototype.toString.call(l),Error(t(31,u==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":u))}function lx(u){var l=u._init;return l(u._payload)}function cx(u){function l(K,G){if(u){var Q=K.deletions;Q===null?(K.deletions=[G],K.flags|=16):Q.push(G)}}function d(K,G){if(!u)return null;for(;G!==null;)l(K,G),G=G.sibling;return null}function g(K,G){for(K=new Map;G!==null;)G.key!==null?K.set(G.key,G):K.set(G.index,G),G=G.sibling;return K}function x(K,G){return K=Xo(K,G),K.index=0,K.sibling=null,K}function _(K,G,Q){return K.index=Q,u?(Q=K.alternate,Q!==null?(Q=Q.index,Q<G?(K.flags|=2,G):Q):(K.flags|=2,G)):(K.flags|=1048576,G)}function b(K){return u&&K.alternate===null&&(K.flags|=2),K}function z(K,G,Q,ce){return G===null||G.tag!==6?(G=n1(Q,K.mode,ce),G.return=K,G):(G=x(G,Q),G.return=K,G)}function W(K,G,Q,ce){var Se=Q.type;return Se===R?ue(K,G,Q.props.children,ce,Q.key):G!==null&&(G.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Oe&&lx(Se)===G.type)?(ce=x(G,Q.props),ce.ref=Gl(K,G,Q),ce.return=K,ce):(ce=Oh(Q.type,Q.key,Q.props,null,K.mode,ce),ce.ref=Gl(K,G,Q),ce.return=K,ce)}function J(K,G,Q,ce){return G===null||G.tag!==4||G.stateNode.containerInfo!==Q.containerInfo||G.stateNode.implementation!==Q.implementation?(G=r1(Q,K.mode,ce),G.return=K,G):(G=x(G,Q.children||[]),G.return=K,G)}function ue(K,G,Q,ce,Se){return G===null||G.tag!==7?(G=ta(Q,K.mode,ce,Se),G.return=K,G):(G=x(G,Q),G.return=K,G)}function le(K,G,Q){if(typeof G=="string"&&G!==""||typeof G=="number")return G=n1(""+G,K.mode,Q),G.return=K,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case H:return Q=Oh(G.type,G.key,G.props,null,K.mode,Q),Q.ref=Gl(K,null,G),Q.return=K,Q;case $:return G=r1(G,K.mode,Q),G.return=K,G;case Oe:var ce=G._init;return le(K,ce(G._payload),Q)}if(jt(G)||me(G))return G=ta(G,K.mode,Q,null),G.return=K,G;lh(K,G)}return null}function ae(K,G,Q,ce){var Se=G!==null?G.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Se!==null?null:z(K,G,""+Q,ce);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case H:return Q.key===Se?W(K,G,Q,ce):null;case $:return Q.key===Se?J(K,G,Q,ce):null;case Oe:return Se=Q._init,ae(K,G,Se(Q._payload),ce)}if(jt(Q)||me(Q))return Se!==null?null:ue(K,G,Q,ce,null);lh(K,Q)}return null}function ge(K,G,Q,ce,Se){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return K=K.get(Q)||null,z(G,K,""+ce,Se);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case H:return K=K.get(ce.key===null?Q:ce.key)||null,W(G,K,ce,Se);case $:return K=K.get(ce.key===null?Q:ce.key)||null,J(G,K,ce,Se);case Oe:var Me=ce._init;return ge(K,G,Q,Me(ce._payload),Se)}if(jt(ce)||me(ce))return K=K.get(Q)||null,ue(G,K,ce,Se,null);lh(G,ce)}return null}function we(K,G,Q,ce){for(var Se=null,Me=null,Le=G,Ue=G=0,pn=null;Le!==null&&Ue<Q.length;Ue++){Le.index>Ue?(pn=Le,Le=null):pn=Le.sibling;var at=ae(K,Le,Q[Ue],ce);if(at===null){Le===null&&(Le=pn);break}u&&Le&&at.alternate===null&&l(K,Le),G=_(at,G,Ue),Me===null?Se=at:Me.sibling=at,Me=at,Le=pn}if(Ue===Q.length)return d(K,Le),Rt&&qs(K,Ue),Se;if(Le===null){for(;Ue<Q.length;Ue++)Le=le(K,Q[Ue],ce),Le!==null&&(G=_(Le,G,Ue),Me===null?Se=Le:Me.sibling=Le,Me=Le);return Rt&&qs(K,Ue),Se}for(Le=g(K,Le);Ue<Q.length;Ue++)pn=ge(Le,K,Ue,Q[Ue],ce),pn!==null&&(u&&pn.alternate!==null&&Le.delete(pn.key===null?Ue:pn.key),G=_(pn,G,Ue),Me===null?Se=pn:Me.sibling=pn,Me=pn);return u&&Le.forEach(function(Yo){return l(K,Yo)}),Rt&&qs(K,Ue),Se}function Ce(K,G,Q,ce){var Se=me(Q);if(typeof Se!="function")throw Error(t(150));if(Q=Se.call(Q),Q==null)throw Error(t(151));for(var Me=Se=null,Le=G,Ue=G=0,pn=null,at=Q.next();Le!==null&&!at.done;Ue++,at=Q.next()){Le.index>Ue?(pn=Le,Le=null):pn=Le.sibling;var Yo=ae(K,Le,at.value,ce);if(Yo===null){Le===null&&(Le=pn);break}u&&Le&&Yo.alternate===null&&l(K,Le),G=_(Yo,G,Ue),Me===null?Se=Yo:Me.sibling=Yo,Me=Yo,Le=pn}if(at.done)return d(K,Le),Rt&&qs(K,Ue),Se;if(Le===null){for(;!at.done;Ue++,at=Q.next())at=le(K,at.value,ce),at!==null&&(G=_(at,G,Ue),Me===null?Se=at:Me.sibling=at,Me=at);return Rt&&qs(K,Ue),Se}for(Le=g(K,Le);!at.done;Ue++,at=Q.next())at=ge(Le,K,Ue,at.value,ce),at!==null&&(u&&at.alternate!==null&&Le.delete(at.key===null?Ue:at.key),G=_(at,G,Ue),Me===null?Se=at:Me.sibling=at,Me=at);return u&&Le.forEach(function(m4){return l(K,m4)}),Rt&&qs(K,Ue),Se}function Ht(K,G,Q,ce){if(typeof Q=="object"&&Q!==null&&Q.type===R&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case H:e:{for(var Se=Q.key,Me=G;Me!==null;){if(Me.key===Se){if(Se=Q.type,Se===R){if(Me.tag===7){d(K,Me.sibling),G=x(Me,Q.props.children),G.return=K,K=G;break e}}else if(Me.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Oe&&lx(Se)===Me.type){d(K,Me.sibling),G=x(Me,Q.props),G.ref=Gl(K,Me,Q),G.return=K,K=G;break e}d(K,Me);break}else l(K,Me);Me=Me.sibling}Q.type===R?(G=ta(Q.props.children,K.mode,ce,Q.key),G.return=K,K=G):(ce=Oh(Q.type,Q.key,Q.props,null,K.mode,ce),ce.ref=Gl(K,G,Q),ce.return=K,K=ce)}return b(K);case $:e:{for(Me=Q.key;G!==null;){if(G.key===Me)if(G.tag===4&&G.stateNode.containerInfo===Q.containerInfo&&G.stateNode.implementation===Q.implementation){d(K,G.sibling),G=x(G,Q.children||[]),G.return=K,K=G;break e}else{d(K,G);break}else l(K,G);G=G.sibling}G=r1(Q,K.mode,ce),G.return=K,K=G}return b(K);case Oe:return Me=Q._init,Ht(K,G,Me(Q._payload),ce)}if(jt(Q))return we(K,G,Q,ce);if(me(Q))return Ce(K,G,Q,ce);lh(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,G!==null&&G.tag===6?(d(K,G.sibling),G=x(G,Q),G.return=K,K=G):(d(K,G),G=n1(Q,K.mode,ce),G.return=K,K=G),b(K)):d(K,G)}return Ht}var au=cx(!0),fx=cx(!1),ch=Bo(null),fh=null,uu=null,h0=null;function d0(){h0=uu=fh=null}function p0(u){var l=ch.current;Ct(ch),u._currentValue=l}function m0(u,l,d){for(;u!==null;){var g=u.alternate;if((u.childLanes&l)!==l?(u.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),u===d)break;u=u.return}}function lu(u,l){fh=u,h0=uu=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&l)!==0&&(nr=!0),u.firstContext=null)}function Dr(u){var l=u._currentValue;if(h0!==u)if(u={context:u,memoizedValue:l,next:null},uu===null){if(fh===null)throw Error(t(308));uu=u,fh.dependencies={lanes:0,firstContext:u}}else uu=uu.next=u;return l}var Ks=null;function g0(u){Ks===null?Ks=[u]:Ks.push(u)}function hx(u,l,d,g){var x=l.interleaved;return x===null?(d.next=d,g0(l)):(d.next=x.next,x.next=d),l.interleaved=d,io(u,g)}function io(u,l){u.lanes|=l;var d=u.alternate;for(d!==null&&(d.lanes|=l),d=u,u=u.return;u!==null;)u.childLanes|=l,d=u.alternate,d!==null&&(d.childLanes|=l),d=u,u=u.return;return d.tag===3?d.stateNode:null}var zo=!1;function v0(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dx(u,l){u=u.updateQueue,l.updateQueue===u&&(l.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function oo(u,l){return{eventTime:u,lane:l,tag:0,payload:null,callback:null,next:null}}function Ho(u,l,d){var g=u.updateQueue;if(g===null)return null;if(g=g.shared,(ot&2)!==0){var x=g.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),g.pending=l,io(u,d)}return x=g.interleaved,x===null?(l.next=l,g0(g)):(l.next=x.next,x.next=l),g.interleaved=l,io(u,d)}function hh(u,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var g=l.lanes;g&=u.pendingLanes,d|=g,l.lanes=d,Sl(u,d)}}function px(u,l){var d=u.updateQueue,g=u.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var x=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var b={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};_===null?x=_=b:_=_.next=b,d=d.next}while(d!==null);_===null?x=_=l:_=_.next=l}else x=_=l;d={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:_,shared:g.shared,effects:g.effects},u.updateQueue=d;return}u=d.lastBaseUpdate,u===null?d.firstBaseUpdate=l:u.next=l,d.lastBaseUpdate=l}function dh(u,l,d,g){var x=u.updateQueue;zo=!1;var _=x.firstBaseUpdate,b=x.lastBaseUpdate,z=x.shared.pending;if(z!==null){x.shared.pending=null;var W=z,J=W.next;W.next=null,b===null?_=J:b.next=J,b=W;var ue=u.alternate;ue!==null&&(ue=ue.updateQueue,z=ue.lastBaseUpdate,z!==b&&(z===null?ue.firstBaseUpdate=J:z.next=J,ue.lastBaseUpdate=W))}if(_!==null){var le=x.baseState;b=0,ue=J=W=null,z=_;do{var ae=z.lane,ge=z.eventTime;if((g&ae)===ae){ue!==null&&(ue=ue.next={eventTime:ge,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var we=u,Ce=z;switch(ae=l,ge=d,Ce.tag){case 1:if(we=Ce.payload,typeof we=="function"){le=we.call(ge,le,ae);break e}le=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ce.payload,ae=typeof we=="function"?we.call(ge,le,ae):we,ae==null)break e;le=de({},le,ae);break e;case 2:zo=!0}}z.callback!==null&&z.lane!==0&&(u.flags|=64,ae=x.effects,ae===null?x.effects=[z]:ae.push(z))}else ge={eventTime:ge,lane:ae,tag:z.tag,payload:z.payload,callback:z.callback,next:null},ue===null?(J=ue=ge,W=le):ue=ue.next=ge,b|=ae;if(z=z.next,z===null){if(z=x.shared.pending,z===null)break;ae=z,z=ae.next,ae.next=null,x.lastBaseUpdate=ae,x.shared.pending=null}}while(!0);if(ue===null&&(W=le),x.baseState=W,x.firstBaseUpdate=J,x.lastBaseUpdate=ue,l=x.shared.interleaved,l!==null){x=l;do b|=x.lane,x=x.next;while(x!==l)}else _===null&&(x.shared.lanes=0);Qs|=b,u.lanes=b,u.memoizedState=le}}function mx(u,l,d){if(u=l.effects,l.effects=null,u!==null)for(l=0;l<u.length;l++){var g=u[l],x=g.callback;if(x!==null){if(g.callback=null,g=d,typeof x!="function")throw Error(t(191,x));x.call(g)}}}var ql={},Ii=Bo(ql),Kl=Bo(ql),Xl=Bo(ql);function Xs(u){if(u===ql)throw Error(t(174));return u}function y0(u,l){switch(_t(Xl,l),_t(Kl,u),_t(Ii,ql),u=l.nodeType,u){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Na(null,"");break;default:u=u===8?l.parentNode:l,l=u.namespaceURI||null,u=u.tagName,l=Na(l,u)}Ct(Ii),_t(Ii,l)}function cu(){Ct(Ii),Ct(Kl),Ct(Xl)}function gx(u){Xs(Xl.current);var l=Xs(Ii.current),d=Na(l,u.type);l!==d&&(_t(Kl,u),_t(Ii,d))}function x0(u){Kl.current===u&&(Ct(Ii),Ct(Kl))}var Nt=Bo(0);function ph(u){for(var l=u;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break;for(;l.sibling===null;){if(l.return===null||l.return===u)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var _0=[];function w0(){for(var u=0;u<_0.length;u++)_0[u]._workInProgressVersionPrimary=null;_0.length=0}var mh=j.ReactCurrentDispatcher,E0=j.ReactCurrentBatchConfig,Ys=0,Dt=null,tn=null,hn=null,gh=!1,Yl=!1,Ql=0,Vb=0;function Ln(){throw Error(t(321))}function A0(u,l){if(l===null)return!1;for(var d=0;d<l.length&&d<u.length;d++)if(!Xr(u[d],l[d]))return!1;return!0}function C0(u,l,d,g,x,_){if(Ys=_,Dt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,mh.current=u===null||u.memoizedState===null?jb:zb,u=d(g,x),Yl){_=0;do{if(Yl=!1,Ql=0,25<=_)throw Error(t(301));_+=1,hn=tn=null,l.updateQueue=null,mh.current=Hb,u=d(g,x)}while(Yl)}if(mh.current=xh,l=tn!==null&&tn.next!==null,Ys=0,hn=tn=Dt=null,gh=!1,l)throw Error(t(300));return u}function T0(){var u=Ql!==0;return Ql=0,u}function Si(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Dt.memoizedState=hn=u:hn=hn.next=u,hn}function Or(){if(tn===null){var u=Dt.alternate;u=u!==null?u.memoizedState:null}else u=tn.next;var l=hn===null?Dt.memoizedState:hn.next;if(l!==null)hn=l,tn=u;else{if(u===null)throw Error(t(310));tn=u,u={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},hn===null?Dt.memoizedState=hn=u:hn=hn.next=u}return hn}function Zl(u,l){return typeof l=="function"?l(u):l}function I0(u){var l=Or(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=u;var g=tn,x=g.baseQueue,_=d.pending;if(_!==null){if(x!==null){var b=x.next;x.next=_.next,_.next=b}g.baseQueue=x=_,d.pending=null}if(x!==null){_=x.next,g=g.baseState;var z=b=null,W=null,J=_;do{var ue=J.lane;if((Ys&ue)===ue)W!==null&&(W=W.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),g=J.hasEagerState?J.eagerState:u(g,J.action);else{var le={lane:ue,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};W===null?(z=W=le,b=g):W=W.next=le,Dt.lanes|=ue,Qs|=ue}J=J.next}while(J!==null&&J!==_);W===null?b=g:W.next=z,Xr(g,l.memoizedState)||(nr=!0),l.memoizedState=g,l.baseState=b,l.baseQueue=W,d.lastRenderedState=g}if(u=d.interleaved,u!==null){x=u;do _=x.lane,Dt.lanes|=_,Qs|=_,x=x.next;while(x!==u)}else x===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function S0(u){var l=Or(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=u;var g=d.dispatch,x=d.pending,_=l.memoizedState;if(x!==null){d.pending=null;var b=x=x.next;do _=u(_,b.action),b=b.next;while(b!==x);Xr(_,l.memoizedState)||(nr=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),d.lastRenderedState=_}return[_,g]}function vx(){}function yx(u,l){var d=Dt,g=Or(),x=l(),_=!Xr(g.memoizedState,x);if(_&&(g.memoizedState=x,nr=!0),g=g.queue,b0(wx.bind(null,d,g,u),[u]),g.getSnapshot!==l||_||hn!==null&&hn.memoizedState.tag&1){if(d.flags|=2048,Jl(9,_x.bind(null,d,g,x,l),void 0,null),dn===null)throw Error(t(349));(Ys&30)!==0||xx(d,l,x)}return x}function xx(u,l,d){u.flags|=16384,u={getSnapshot:l,value:d},l=Dt.updateQueue,l===null?(l={lastEffect:null,stores:null},Dt.updateQueue=l,l.stores=[u]):(d=l.stores,d===null?l.stores=[u]:d.push(u))}function _x(u,l,d,g){l.value=d,l.getSnapshot=g,Ex(l)&&Ax(u)}function wx(u,l,d){return d(function(){Ex(l)&&Ax(u)})}function Ex(u){var l=u.getSnapshot;u=u.value;try{var d=l();return!Xr(u,d)}catch{return!0}}function Ax(u){var l=io(u,1);l!==null&&ei(l,u,1,-1)}function Cx(u){var l=Si();return typeof u=="function"&&(u=u()),l.memoizedState=l.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zl,lastRenderedState:u},l.queue=u,u=u.dispatch=Ub.bind(null,Dt,u),[l.memoizedState,u]}function Jl(u,l,d,g){return u={tag:u,create:l,destroy:d,deps:g,next:null},l=Dt.updateQueue,l===null?(l={lastEffect:null,stores:null},Dt.updateQueue=l,l.lastEffect=u.next=u):(d=l.lastEffect,d===null?l.lastEffect=u.next=u:(g=d.next,d.next=u,u.next=g,l.lastEffect=u)),u}function Tx(){return Or().memoizedState}function vh(u,l,d,g){var x=Si();Dt.flags|=u,x.memoizedState=Jl(1|l,d,void 0,g===void 0?null:g)}function yh(u,l,d,g){var x=Or();g=g===void 0?null:g;var _=void 0;if(tn!==null){var b=tn.memoizedState;if(_=b.destroy,g!==null&&A0(g,b.deps)){x.memoizedState=Jl(l,d,_,g);return}}Dt.flags|=u,x.memoizedState=Jl(1|l,d,_,g)}function Ix(u,l){return vh(8390656,8,u,l)}function b0(u,l){return yh(2048,8,u,l)}function Sx(u,l){return yh(4,2,u,l)}function bx(u,l){return yh(4,4,u,l)}function Rx(u,l){if(typeof l=="function")return u=u(),l(u),function(){l(null)};if(l!=null)return u=u(),l.current=u,function(){l.current=null}}function Px(u,l,d){return d=d!=null?d.concat([u]):null,yh(4,4,Rx.bind(null,l,u),d)}function R0(){}function Nx(u,l){var d=Or();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&A0(l,g[1])?g[0]:(d.memoizedState=[u,l],u)}function Dx(u,l){var d=Or();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&A0(l,g[1])?g[0]:(u=u(),d.memoizedState=[u,l],u)}function Ox(u,l,d){return(Ys&21)===0?(u.baseState&&(u.baseState=!1,nr=!0),u.memoizedState=d):(Xr(d,l)||(d=Tl(),Dt.lanes|=d,Qs|=d,u.baseState=!0),l)}function Fb(u,l){var d=tt;tt=d!==0&&4>d?d:4,u(!0);var g=E0.transition;E0.transition={};try{u(!1),l()}finally{tt=d,E0.transition=g}}function kx(){return Or().memoizedState}function Bb(u,l,d){var g=qo(u);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},Mx(u))Lx(l,d);else if(d=hx(u,l,d,g),d!==null){var x=qn();ei(d,u,g,x),Vx(d,l,g)}}function Ub(u,l,d){var g=qo(u),x={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(Mx(u))Lx(l,x);else{var _=u.alternate;if(u.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var b=l.lastRenderedState,z=_(b,d);if(x.hasEagerState=!0,x.eagerState=z,Xr(z,b)){var W=l.interleaved;W===null?(x.next=x,g0(l)):(x.next=W.next,W.next=x),l.interleaved=x;return}}catch{}finally{}d=hx(u,l,x,g),d!==null&&(x=qn(),ei(d,u,g,x),Vx(d,l,g))}}function Mx(u){var l=u.alternate;return u===Dt||l!==null&&l===Dt}function Lx(u,l){Yl=gh=!0;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}function Vx(u,l,d){if((d&4194240)!==0){var g=l.lanes;g&=u.pendingLanes,d|=g,l.lanes=d,Sl(u,d)}}var xh={readContext:Dr,useCallback:Ln,useContext:Ln,useEffect:Ln,useImperativeHandle:Ln,useInsertionEffect:Ln,useLayoutEffect:Ln,useMemo:Ln,useReducer:Ln,useRef:Ln,useState:Ln,useDebugValue:Ln,useDeferredValue:Ln,useTransition:Ln,useMutableSource:Ln,useSyncExternalStore:Ln,useId:Ln,unstable_isNewReconciler:!1},jb={readContext:Dr,useCallback:function(u,l){return Si().memoizedState=[u,l===void 0?null:l],u},useContext:Dr,useEffect:Ix,useImperativeHandle:function(u,l,d){return d=d!=null?d.concat([u]):null,vh(4194308,4,Rx.bind(null,l,u),d)},useLayoutEffect:function(u,l){return vh(4194308,4,u,l)},useInsertionEffect:function(u,l){return vh(4,2,u,l)},useMemo:function(u,l){var d=Si();return l=l===void 0?null:l,u=u(),d.memoizedState=[u,l],u},useReducer:function(u,l,d){var g=Si();return l=d!==void 0?d(l):l,g.memoizedState=g.baseState=l,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:l},g.queue=u,u=u.dispatch=Bb.bind(null,Dt,u),[g.memoizedState,u]},useRef:function(u){var l=Si();return u={current:u},l.memoizedState=u},useState:Cx,useDebugValue:R0,useDeferredValue:function(u){return Si().memoizedState=u},useTransition:function(){var u=Cx(!1),l=u[0];return u=Fb.bind(null,u[1]),Si().memoizedState=u,[l,u]},useMutableSource:function(){},useSyncExternalStore:function(u,l,d){var g=Dt,x=Si();if(Rt){if(d===void 0)throw Error(t(407));d=d()}else{if(d=l(),dn===null)throw Error(t(349));(Ys&30)!==0||xx(g,l,d)}x.memoizedState=d;var _={value:d,getSnapshot:l};return x.queue=_,Ix(wx.bind(null,g,_,u),[u]),g.flags|=2048,Jl(9,_x.bind(null,g,_,d,l),void 0,null),d},useId:function(){var u=Si(),l=dn.identifierPrefix;if(Rt){var d=ro,g=no;d=(g&~(1<<32-pr(g)-1)).toString(32)+d,l=":"+l+"R"+d,d=Ql++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=Vb++,l=":"+l+"r"+d.toString(32)+":";return u.memoizedState=l},unstable_isNewReconciler:!1},zb={readContext:Dr,useCallback:Nx,useContext:Dr,useEffect:b0,useImperativeHandle:Px,useInsertionEffect:Sx,useLayoutEffect:bx,useMemo:Dx,useReducer:I0,useRef:Tx,useState:function(){return I0(Zl)},useDebugValue:R0,useDeferredValue:function(u){var l=Or();return Ox(l,tn.memoizedState,u)},useTransition:function(){var u=I0(Zl)[0],l=Or().memoizedState;return[u,l]},useMutableSource:vx,useSyncExternalStore:yx,useId:kx,unstable_isNewReconciler:!1},Hb={readContext:Dr,useCallback:Nx,useContext:Dr,useEffect:b0,useImperativeHandle:Px,useInsertionEffect:Sx,useLayoutEffect:bx,useMemo:Dx,useReducer:S0,useRef:Tx,useState:function(){return S0(Zl)},useDebugValue:R0,useDeferredValue:function(u){var l=Or();return tn===null?l.memoizedState=u:Ox(l,tn.memoizedState,u)},useTransition:function(){var u=S0(Zl)[0],l=Or().memoizedState;return[u,l]},useMutableSource:vx,useSyncExternalStore:yx,useId:kx,unstable_isNewReconciler:!1};function Qr(u,l){if(u&&u.defaultProps){l=de({},l),u=u.defaultProps;for(var d in u)l[d]===void 0&&(l[d]=u[d]);return l}return l}function P0(u,l,d,g){l=u.memoizedState,d=d(g,l),d=d==null?l:de({},l,d),u.memoizedState=d,u.lanes===0&&(u.updateQueue.baseState=d)}var _h={isMounted:function(u){return(u=u._reactInternals)?qr(u)===u:!1},enqueueSetState:function(u,l,d){u=u._reactInternals;var g=qn(),x=qo(u),_=oo(g,x);_.payload=l,d!=null&&(_.callback=d),l=Ho(u,_,x),l!==null&&(ei(l,u,x,g),hh(l,u,x))},enqueueReplaceState:function(u,l,d){u=u._reactInternals;var g=qn(),x=qo(u),_=oo(g,x);_.tag=1,_.payload=l,d!=null&&(_.callback=d),l=Ho(u,_,x),l!==null&&(ei(l,u,x,g),hh(l,u,x))},enqueueForceUpdate:function(u,l){u=u._reactInternals;var d=qn(),g=qo(u),x=oo(d,g);x.tag=2,l!=null&&(x.callback=l),l=Ho(u,x,g),l!==null&&(ei(l,u,g,d),hh(l,u,g))}};function Fx(u,l,d,g,x,_,b){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(g,_,b):l.prototype&&l.prototype.isPureReactComponent?!Bl(d,g)||!Bl(x,_):!0}function Bx(u,l,d){var g=!1,x=Uo,_=l.contextType;return typeof _=="object"&&_!==null?_=Dr(_):(x=tr(l)?Ws:Mn.current,g=l.contextTypes,_=(g=g!=null)?ru(u,x):Uo),l=new l(d,_),u.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=_h,u.stateNode=l,l._reactInternals=u,g&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=x,u.__reactInternalMemoizedMaskedChildContext=_),l}function Ux(u,l,d,g){u=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==u&&_h.enqueueReplaceState(l,l.state,null)}function N0(u,l,d,g){var x=u.stateNode;x.props=d,x.state=u.memoizedState,x.refs={},v0(u);var _=l.contextType;typeof _=="object"&&_!==null?x.context=Dr(_):(_=tr(l)?Ws:Mn.current,x.context=ru(u,_)),x.state=u.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(P0(u,l,_,d),x.state=u.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(l=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),l!==x.state&&_h.enqueueReplaceState(x,x.state,null),dh(u,d,x,g),x.state=u.memoizedState),typeof x.componentDidMount=="function"&&(u.flags|=4194308)}function fu(u,l){try{var d="",g=l;do d+=$e(g),g=g.return;while(g);var x=d}catch(_){x=`
Error generating stack: `+_.message+`
`+_.stack}return{value:u,source:l,stack:x,digest:null}}function D0(u,l,d){return{value:u,source:null,stack:d??null,digest:l??null}}function O0(u,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var $b=typeof WeakMap=="function"?WeakMap:Map;function jx(u,l,d){d=oo(-1,d),d.tag=3,d.payload={element:null};var g=l.value;return d.callback=function(){Sh||(Sh=!0,K0=g),O0(u,l)},d}function zx(u,l,d){d=oo(-1,d),d.tag=3;var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var x=l.value;d.payload=function(){return g(x)},d.callback=function(){O0(u,l)}}var _=u.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(d.callback=function(){O0(u,l),typeof g!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})}),d}function Hx(u,l,d){var g=u.pingCache;if(g===null){g=u.pingCache=new $b;var x=new Set;g.set(l,x)}else x=g.get(l),x===void 0&&(x=new Set,g.set(l,x));x.has(d)||(x.add(d),u=i4.bind(null,u,l,d),l.then(u,u))}function $x(u){do{var l;if((l=u.tag===13)&&(l=u.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return u;u=u.return}while(u!==null);return null}function Wx(u,l,d,g,x){return(u.mode&1)===0?(u===l?u.flags|=65536:(u.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=oo(-1,1),l.tag=2,Ho(d,l,1))),d.lanes|=1),u):(u.flags|=65536,u.lanes=x,u)}var Wb=j.ReactCurrentOwner,nr=!1;function Gn(u,l,d,g){l.child=u===null?fx(l,null,d,g):au(l,u.child,d,g)}function Gx(u,l,d,g,x){d=d.render;var _=l.ref;return lu(l,x),g=C0(u,l,d,g,_,x),d=T0(),u!==null&&!nr?(l.updateQueue=u.updateQueue,l.flags&=-2053,u.lanes&=~x,so(u,l,x)):(Rt&&d&&a0(l),l.flags|=1,Gn(u,l,g,x),l.child)}function qx(u,l,d,g,x){if(u===null){var _=d.type;return typeof _=="function"&&!t1(_)&&_.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=_,Kx(u,l,_,g,x)):(u=Oh(d.type,null,g,l,l.mode,x),u.ref=l.ref,u.return=l,l.child=u)}if(_=u.child,(u.lanes&x)===0){var b=_.memoizedProps;if(d=d.compare,d=d!==null?d:Bl,d(b,g)&&u.ref===l.ref)return so(u,l,x)}return l.flags|=1,u=Xo(_,g),u.ref=l.ref,u.return=l,l.child=u}function Kx(u,l,d,g,x){if(u!==null){var _=u.memoizedProps;if(Bl(_,g)&&u.ref===l.ref)if(nr=!1,l.pendingProps=g=_,(u.lanes&x)!==0)(u.flags&131072)!==0&&(nr=!0);else return l.lanes=u.lanes,so(u,l,x)}return k0(u,l,d,g,x)}function Xx(u,l,d){var g=l.pendingProps,x=g.children,_=u!==null?u.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(du,wr),wr|=d;else{if((d&1073741824)===0)return u=_!==null?_.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:u,cachePool:null,transitions:null},l.updateQueue=null,_t(du,wr),wr|=u,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=_!==null?_.baseLanes:d,_t(du,wr),wr|=g}else _!==null?(g=_.baseLanes|d,l.memoizedState=null):g=d,_t(du,wr),wr|=g;return Gn(u,l,x,d),l.child}function Yx(u,l){var d=l.ref;(u===null&&d!==null||u!==null&&u.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function k0(u,l,d,g,x){var _=tr(d)?Ws:Mn.current;return _=ru(l,_),lu(l,x),d=C0(u,l,d,g,_,x),g=T0(),u!==null&&!nr?(l.updateQueue=u.updateQueue,l.flags&=-2053,u.lanes&=~x,so(u,l,x)):(Rt&&g&&a0(l),l.flags|=1,Gn(u,l,d,x),l.child)}function Qx(u,l,d,g,x){if(tr(d)){var _=!0;ih(l)}else _=!1;if(lu(l,x),l.stateNode===null)Eh(u,l),Bx(l,d,g),N0(l,d,g,x),g=!0;else if(u===null){var b=l.stateNode,z=l.memoizedProps;b.props=z;var W=b.context,J=d.contextType;typeof J=="object"&&J!==null?J=Dr(J):(J=tr(d)?Ws:Mn.current,J=ru(l,J));var ue=d.getDerivedStateFromProps,le=typeof ue=="function"||typeof b.getSnapshotBeforeUpdate=="function";le||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(z!==g||W!==J)&&Ux(l,b,g,J),zo=!1;var ae=l.memoizedState;b.state=ae,dh(l,g,b,x),W=l.memoizedState,z!==g||ae!==W||er.current||zo?(typeof ue=="function"&&(P0(l,d,ue,g),W=l.memoizedState),(z=zo||Fx(l,d,z,g,ae,W,J))?(le||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(l.flags|=4194308)):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=W),b.props=g,b.state=W,b.context=J,g=z):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{b=l.stateNode,dx(u,l),z=l.memoizedProps,J=l.type===l.elementType?z:Qr(l.type,z),b.props=J,le=l.pendingProps,ae=b.context,W=d.contextType,typeof W=="object"&&W!==null?W=Dr(W):(W=tr(d)?Ws:Mn.current,W=ru(l,W));var ge=d.getDerivedStateFromProps;(ue=typeof ge=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(z!==le||ae!==W)&&Ux(l,b,g,W),zo=!1,ae=l.memoizedState,b.state=ae,dh(l,g,b,x);var we=l.memoizedState;z!==le||ae!==we||er.current||zo?(typeof ge=="function"&&(P0(l,d,ge,g),we=l.memoizedState),(J=zo||Fx(l,d,J,g,ae,we,W)||!1)?(ue||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(g,we,W),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(g,we,W)),typeof b.componentDidUpdate=="function"&&(l.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof b.componentDidUpdate!="function"||z===u.memoizedProps&&ae===u.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||z===u.memoizedProps&&ae===u.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=we),b.props=g,b.state=we,b.context=W,g=J):(typeof b.componentDidUpdate!="function"||z===u.memoizedProps&&ae===u.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||z===u.memoizedProps&&ae===u.memoizedState||(l.flags|=1024),g=!1)}return M0(u,l,d,g,_,x)}function M0(u,l,d,g,x,_){Yx(u,l);var b=(l.flags&128)!==0;if(!g&&!b)return x&&nx(l,d,!1),so(u,l,_);g=l.stateNode,Wb.current=l;var z=b&&typeof d.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,u!==null&&b?(l.child=au(l,u.child,null,_),l.child=au(l,null,z,_)):Gn(u,l,z,_),l.memoizedState=g.state,x&&nx(l,d,!0),l.child}function Zx(u){var l=u.stateNode;l.pendingContext?ex(u,l.pendingContext,l.pendingContext!==l.context):l.context&&ex(u,l.context,!1),y0(u,l.containerInfo)}function Jx(u,l,d,g,x){return su(),f0(x),l.flags|=256,Gn(u,l,d,g),l.child}var L0={dehydrated:null,treeContext:null,retryLane:0};function V0(u){return{baseLanes:u,cachePool:null,transitions:null}}function e_(u,l,d){var g=l.pendingProps,x=Nt.current,_=!1,b=(l.flags&128)!==0,z;if((z=b)||(z=u!==null&&u.memoizedState===null?!1:(x&2)!==0),z?(_=!0,l.flags&=-129):(u===null||u.memoizedState!==null)&&(x|=1),_t(Nt,x&1),u===null)return c0(l),u=l.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((l.mode&1)===0?l.lanes=1:u.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(b=g.children,u=g.fallback,_?(g=l.mode,_=l.child,b={mode:"hidden",children:b},(g&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=b):_=kh(b,g,0,null),u=ta(u,g,d,null),_.return=l,u.return=l,_.sibling=u,l.child=_,l.child.memoizedState=V0(d),l.memoizedState=L0,u):F0(l,b));if(x=u.memoizedState,x!==null&&(z=x.dehydrated,z!==null))return Gb(u,l,b,g,z,x,d);if(_){_=g.fallback,b=l.mode,x=u.child,z=x.sibling;var W={mode:"hidden",children:g.children};return(b&1)===0&&l.child!==x?(g=l.child,g.childLanes=0,g.pendingProps=W,l.deletions=null):(g=Xo(x,W),g.subtreeFlags=x.subtreeFlags&14680064),z!==null?_=Xo(z,_):(_=ta(_,b,d,null),_.flags|=2),_.return=l,g.return=l,g.sibling=_,l.child=g,g=_,_=l.child,b=u.child.memoizedState,b=b===null?V0(d):{baseLanes:b.baseLanes|d,cachePool:null,transitions:b.transitions},_.memoizedState=b,_.childLanes=u.childLanes&~d,l.memoizedState=L0,g}return _=u.child,u=_.sibling,g=Xo(_,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=d),g.return=l,g.sibling=null,u!==null&&(d=l.deletions,d===null?(l.deletions=[u],l.flags|=16):d.push(u)),l.child=g,l.memoizedState=null,g}function F0(u,l){return l=kh({mode:"visible",children:l},u.mode,0,null),l.return=u,u.child=l}function wh(u,l,d,g){return g!==null&&f0(g),au(l,u.child,null,d),u=F0(l,l.pendingProps.children),u.flags|=2,l.memoizedState=null,u}function Gb(u,l,d,g,x,_,b){if(d)return l.flags&256?(l.flags&=-257,g=D0(Error(t(422))),wh(u,l,b,g)):l.memoizedState!==null?(l.child=u.child,l.flags|=128,null):(_=g.fallback,x=l.mode,g=kh({mode:"visible",children:g.children},x,0,null),_=ta(_,x,b,null),_.flags|=2,g.return=l,_.return=l,g.sibling=_,l.child=g,(l.mode&1)!==0&&au(l,u.child,null,b),l.child.memoizedState=V0(b),l.memoizedState=L0,_);if((l.mode&1)===0)return wh(u,l,b,null);if(x.data==="$!"){if(g=x.nextSibling&&x.nextSibling.dataset,g)var z=g.dgst;return g=z,_=Error(t(419)),g=D0(_,g,void 0),wh(u,l,b,g)}if(z=(b&u.childLanes)!==0,nr||z){if(g=dn,g!==null){switch(b&-b){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(g.suspendedLanes|b))!==0?0:x,x!==0&&x!==_.retryLane&&(_.retryLane=x,io(u,x),ei(g,u,x,-1))}return e1(),g=D0(Error(t(421))),wh(u,l,b,g)}return x.data==="$?"?(l.flags|=128,l.child=u.child,l=o4.bind(null,u),x._reactRetry=l,null):(u=_.treeContext,_r=Fo(x.nextSibling),xr=l,Rt=!0,Yr=null,u!==null&&(Pr[Nr++]=no,Pr[Nr++]=ro,Pr[Nr++]=Gs,no=u.id,ro=u.overflow,Gs=l),l=F0(l,g.children),l.flags|=4096,l)}function t_(u,l,d){u.lanes|=l;var g=u.alternate;g!==null&&(g.lanes|=l),m0(u.return,l,d)}function B0(u,l,d,g,x){var _=u.memoizedState;_===null?u.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:x}:(_.isBackwards=l,_.rendering=null,_.renderingStartTime=0,_.last=g,_.tail=d,_.tailMode=x)}function n_(u,l,d){var g=l.pendingProps,x=g.revealOrder,_=g.tail;if(Gn(u,l,g.children,d),g=Nt.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=l.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&t_(u,d,l);else if(u.tag===19)t_(u,d,l);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}g&=1}if(_t(Nt,g),(l.mode&1)===0)l.memoizedState=null;else switch(x){case"forwards":for(d=l.child,x=null;d!==null;)u=d.alternate,u!==null&&ph(u)===null&&(x=d),d=d.sibling;d=x,d===null?(x=l.child,l.child=null):(x=d.sibling,d.sibling=null),B0(l,!1,x,d,_);break;case"backwards":for(d=null,x=l.child,l.child=null;x!==null;){if(u=x.alternate,u!==null&&ph(u)===null){l.child=x;break}u=x.sibling,x.sibling=d,d=x,x=u}B0(l,!0,d,null,_);break;case"together":B0(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Eh(u,l){(l.mode&1)===0&&u!==null&&(u.alternate=null,l.alternate=null,l.flags|=2)}function so(u,l,d){if(u!==null&&(l.dependencies=u.dependencies),Qs|=l.lanes,(d&l.childLanes)===0)return null;if(u!==null&&l.child!==u.child)throw Error(t(153));if(l.child!==null){for(u=l.child,d=Xo(u,u.pendingProps),l.child=d,d.return=l;u.sibling!==null;)u=u.sibling,d=d.sibling=Xo(u,u.pendingProps),d.return=l;d.sibling=null}return l.child}function qb(u,l,d){switch(l.tag){case 3:Zx(l),su();break;case 5:gx(l);break;case 1:tr(l.type)&&ih(l);break;case 4:y0(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,x=l.memoizedProps.value;_t(ch,g._currentValue),g._currentValue=x;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(_t(Nt,Nt.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?e_(u,l,d):(_t(Nt,Nt.current&1),u=so(u,l,d),u!==null?u.sibling:null);_t(Nt,Nt.current&1);break;case 19:if(g=(d&l.childLanes)!==0,(u.flags&128)!==0){if(g)return n_(u,l,d);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),_t(Nt,Nt.current),g)break;return null;case 22:case 23:return l.lanes=0,Xx(u,l,d)}return so(u,l,d)}var r_,U0,i_,o_;r_=function(u,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)u.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},U0=function(){},i_=function(u,l,d,g){var x=u.memoizedProps;if(x!==g){u=l.stateNode,Xs(Ii.current);var _=null;switch(d){case"input":x=ci(u,x),g=ci(u,g),_=[];break;case"select":x=de({},x,{value:void 0}),g=de({},g,{value:void 0}),_=[];break;case"textarea":x=pl(u,x),g=pl(u,g),_=[];break;default:typeof x.onClick!="function"&&typeof g.onClick=="function"&&(u.onclick=th)}Gr(d,g);var b;d=null;for(J in x)if(!g.hasOwnProperty(J)&&x.hasOwnProperty(J)&&x[J]!=null)if(J==="style"){var z=x[J];for(b in z)z.hasOwnProperty(b)&&(d||(d={}),d[b]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(i.hasOwnProperty(J)?_||(_=[]):(_=_||[]).push(J,null));for(J in g){var W=g[J];if(z=x?.[J],g.hasOwnProperty(J)&&W!==z&&(W!=null||z!=null))if(J==="style")if(z){for(b in z)!z.hasOwnProperty(b)||W&&W.hasOwnProperty(b)||(d||(d={}),d[b]="");for(b in W)W.hasOwnProperty(b)&&z[b]!==W[b]&&(d||(d={}),d[b]=W[b])}else d||(_||(_=[]),_.push(J,d)),d=W;else J==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,z=z?z.__html:void 0,W!=null&&z!==W&&(_=_||[]).push(J,W)):J==="children"?typeof W!="string"&&typeof W!="number"||(_=_||[]).push(J,""+W):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(i.hasOwnProperty(J)?(W!=null&&J==="onScroll"&&At("scroll",u),_||z===W||(_=[])):(_=_||[]).push(J,W))}d&&(_=_||[]).push("style",d);var J=_;(l.updateQueue=J)&&(l.flags|=4)}},o_=function(u,l,d,g){d!==g&&(l.flags|=4)};function ec(u,l){if(!Rt)switch(u.tailMode){case"hidden":l=u.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?u.tail=null:d.sibling=null;break;case"collapsed":d=u.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||u.tail===null?u.tail=null:u.tail.sibling=null:g.sibling=null}}function Vn(u){var l=u.alternate!==null&&u.alternate.child===u.child,d=0,g=0;if(l)for(var x=u.child;x!==null;)d|=x.lanes|x.childLanes,g|=x.subtreeFlags&14680064,g|=x.flags&14680064,x.return=u,x=x.sibling;else for(x=u.child;x!==null;)d|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=u,x=x.sibling;return u.subtreeFlags|=g,u.childLanes=d,l}function Kb(u,l,d){var g=l.pendingProps;switch(u0(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(l),null;case 1:return tr(l.type)&&rh(),Vn(l),null;case 3:return g=l.stateNode,cu(),Ct(er),Ct(Mn),w0(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(u===null||u.child===null)&&(uh(l)?l.flags|=4:u===null||u.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Yr!==null&&(Q0(Yr),Yr=null))),U0(u,l),Vn(l),null;case 5:x0(l);var x=Xs(Xl.current);if(d=l.type,u!==null&&l.stateNode!=null)i_(u,l,d,g,x),u.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(t(166));return Vn(l),null}if(u=Xs(Ii.current),uh(l)){g=l.stateNode,d=l.type;var _=l.memoizedProps;switch(g[Ti]=l,g[$l]=_,u=(l.mode&1)!==0,d){case"dialog":At("cancel",g),At("close",g);break;case"iframe":case"object":case"embed":At("load",g);break;case"video":case"audio":for(x=0;x<jl.length;x++)At(jl[x],g);break;case"source":At("error",g);break;case"img":case"image":case"link":At("error",g),At("load",g);break;case"details":At("toggle",g);break;case"input":If(g,_),At("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!_.multiple},At("invalid",g);break;case"textarea":ml(g,_),At("invalid",g)}Gr(d,_),x=null;for(var b in _)if(_.hasOwnProperty(b)){var z=_[b];b==="children"?typeof z=="string"?g.textContent!==z&&(_.suppressHydrationWarning!==!0&&eh(g.textContent,z,u),x=["children",z]):typeof z=="number"&&g.textContent!==""+z&&(_.suppressHydrationWarning!==!0&&eh(g.textContent,z,u),x=["children",""+z]):i.hasOwnProperty(b)&&z!=null&&b==="onScroll"&&At("scroll",g)}switch(d){case"input":et(g),dl(g,_,!0);break;case"textarea":et(g),Eo(g);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(g.onclick=th)}g=x,l.updateQueue=g,g!==null&&(l.flags|=4)}else{b=x.nodeType===9?x:x.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=gl(d)),u==="http://www.w3.org/1999/xhtml"?d==="script"?(u=b.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof g.is=="string"?u=b.createElement(d,{is:g.is}):(u=b.createElement(d),d==="select"&&(b=u,g.multiple?b.multiple=!0:g.size&&(b.size=g.size))):u=b.createElementNS(u,d),u[Ti]=l,u[$l]=g,r_(u,l,!1,!1),l.stateNode=u;e:{switch(b=Oa(d,g),d){case"dialog":At("cancel",u),At("close",u),x=g;break;case"iframe":case"object":case"embed":At("load",u),x=g;break;case"video":case"audio":for(x=0;x<jl.length;x++)At(jl[x],u);x=g;break;case"source":At("error",u),x=g;break;case"img":case"image":case"link":At("error",u),At("load",u),x=g;break;case"details":At("toggle",u),x=g;break;case"input":If(u,g),x=ci(u,g),At("invalid",u);break;case"option":x=g;break;case"select":u._wrapperState={wasMultiple:!!g.multiple},x=de({},g,{value:void 0}),At("invalid",u);break;case"textarea":ml(u,g),x=pl(u,g),At("invalid",u);break;default:x=g}Gr(d,x),z=x;for(_ in z)if(z.hasOwnProperty(_)){var W=z[_];_==="style"?Da(u,W):_==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,W!=null&&bf(u,W)):_==="children"?typeof W=="string"?(d!=="textarea"||W!=="")&&Ps(u,W):typeof W=="number"&&Ps(u,""+W):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(i.hasOwnProperty(_)?W!=null&&_==="onScroll"&&At("scroll",u):W!=null&&M(u,_,W,b))}switch(d){case"input":et(u),dl(u,g,!1);break;case"textarea":et(u),Eo(u);break;case"option":g.value!=null&&u.setAttribute("value",""+Ke(g.value));break;case"select":u.multiple=!!g.multiple,_=g.value,_!=null?Wr(u,!!g.multiple,_,!1):g.defaultValue!=null&&Wr(u,!!g.multiple,g.defaultValue,!0);break;default:typeof x.onClick=="function"&&(u.onclick=th)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Vn(l),null;case 6:if(u&&l.stateNode!=null)o_(u,l,u.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(t(166));if(d=Xs(Xl.current),Xs(Ii.current),uh(l)){if(g=l.stateNode,d=l.memoizedProps,g[Ti]=l,(_=g.nodeValue!==d)&&(u=xr,u!==null))switch(u.tag){case 3:eh(g.nodeValue,d,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&eh(g.nodeValue,d,(u.mode&1)!==0)}_&&(l.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[Ti]=l,l.stateNode=g}return Vn(l),null;case 13:if(Ct(Nt),g=l.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(Rt&&_r!==null&&(l.mode&1)!==0&&(l.flags&128)===0)ux(),su(),l.flags|=98560,_=!1;else if(_=uh(l),g!==null&&g.dehydrated!==null){if(u===null){if(!_)throw Error(t(318));if(_=l.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Ti]=l}else su(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Vn(l),_=!1}else Yr!==null&&(Q0(Yr),Yr=null),_=!0;if(!_)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(g=g!==null,g!==(u!==null&&u.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(u===null||(Nt.current&1)!==0?nn===0&&(nn=3):e1())),l.updateQueue!==null&&(l.flags|=4),Vn(l),null);case 4:return cu(),U0(u,l),u===null&&zl(l.stateNode.containerInfo),Vn(l),null;case 10:return p0(l.type._context),Vn(l),null;case 17:return tr(l.type)&&rh(),Vn(l),null;case 19:if(Ct(Nt),_=l.memoizedState,_===null)return Vn(l),null;if(g=(l.flags&128)!==0,b=_.rendering,b===null)if(g)ec(_,!1);else{if(nn!==0||u!==null&&(u.flags&128)!==0)for(u=l.child;u!==null;){if(b=ph(u),b!==null){for(l.flags|=128,ec(_,!1),g=b.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=d,d=l.child;d!==null;)_=d,u=g,_.flags&=14680066,b=_.alternate,b===null?(_.childLanes=0,_.lanes=u,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=b.childLanes,_.lanes=b.lanes,_.child=b.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=b.memoizedProps,_.memoizedState=b.memoizedState,_.updateQueue=b.updateQueue,_.type=b.type,u=b.dependencies,_.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),d=d.sibling;return _t(Nt,Nt.current&1|2),l.child}u=u.sibling}_.tail!==null&&Et()>pu&&(l.flags|=128,g=!0,ec(_,!1),l.lanes=4194304)}else{if(!g)if(u=ph(b),u!==null){if(l.flags|=128,g=!0,d=u.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),ec(_,!0),_.tail===null&&_.tailMode==="hidden"&&!b.alternate&&!Rt)return Vn(l),null}else 2*Et()-_.renderingStartTime>pu&&d!==1073741824&&(l.flags|=128,g=!0,ec(_,!1),l.lanes=4194304);_.isBackwards?(b.sibling=l.child,l.child=b):(d=_.last,d!==null?d.sibling=b:l.child=b,_.last=b)}return _.tail!==null?(l=_.tail,_.rendering=l,_.tail=l.sibling,_.renderingStartTime=Et(),l.sibling=null,d=Nt.current,_t(Nt,g?d&1|2:d&1),l):(Vn(l),null);case 22:case 23:return J0(),g=l.memoizedState!==null,u!==null&&u.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(wr&1073741824)!==0&&(Vn(l),l.subtreeFlags&6&&(l.flags|=8192)):Vn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function Xb(u,l){switch(u0(l),l.tag){case 1:return tr(l.type)&&rh(),u=l.flags,u&65536?(l.flags=u&-65537|128,l):null;case 3:return cu(),Ct(er),Ct(Mn),w0(),u=l.flags,(u&65536)!==0&&(u&128)===0?(l.flags=u&-65537|128,l):null;case 5:return x0(l),null;case 13:if(Ct(Nt),u=l.memoizedState,u!==null&&u.dehydrated!==null){if(l.alternate===null)throw Error(t(340));su()}return u=l.flags,u&65536?(l.flags=u&-65537|128,l):null;case 19:return Ct(Nt),null;case 4:return cu(),null;case 10:return p0(l.type._context),null;case 22:case 23:return J0(),null;case 24:return null;default:return null}}var Ah=!1,Fn=!1,Yb=typeof WeakSet=="function"?WeakSet:Set,ye=null;function hu(u,l){var d=u.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){Ft(u,l,g)}else d.current=null}function j0(u,l,d){try{d()}catch(g){Ft(u,l,g)}}var s_=!1;function Qb(u,l){if(Jp=Qi,u=Fy(),Wp(u)){if("selectionStart"in u)var d={start:u.selectionStart,end:u.selectionEnd};else e:{d=(d=u.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var x=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var b=0,z=-1,W=-1,J=0,ue=0,le=u,ae=null;t:for(;;){for(var ge;le!==d||x!==0&&le.nodeType!==3||(z=b+x),le!==_||g!==0&&le.nodeType!==3||(W=b+g),le.nodeType===3&&(b+=le.nodeValue.length),(ge=le.firstChild)!==null;)ae=le,le=ge;for(;;){if(le===u)break t;if(ae===d&&++J===x&&(z=b),ae===_&&++ue===g&&(W=b),(ge=le.nextSibling)!==null)break;le=ae,ae=le.parentNode}le=ge}d=z===-1||W===-1?null:{start:z,end:W}}else d=null}d=d||{start:0,end:0}}else d=null;for(e0={focusedElem:u,selectionRange:d},Qi=!1,ye=l;ye!==null;)if(l=ye,u=l.child,(l.subtreeFlags&1028)!==0&&u!==null)u.return=l,ye=u;else for(;ye!==null;){l=ye;try{var we=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var Ce=we.memoizedProps,Ht=we.memoizedState,K=l.stateNode,G=K.getSnapshotBeforeUpdate(l.elementType===l.type?Ce:Qr(l.type,Ce),Ht);K.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var Q=l.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){Ft(l,l.return,ce)}if(u=l.sibling,u!==null){u.return=l.return,ye=u;break}ye=l.return}return we=s_,s_=!1,we}function tc(u,l,d){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var x=g=g.next;do{if((x.tag&u)===u){var _=x.destroy;x.destroy=void 0,_!==void 0&&j0(l,d,_)}x=x.next}while(x!==g)}}function Ch(u,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&u)===u){var g=d.create;d.destroy=g()}d=d.next}while(d!==l)}}function z0(u){var l=u.ref;if(l!==null){var d=u.stateNode;switch(u.tag){case 5:u=d;break;default:u=d}typeof l=="function"?l(u):l.current=u}}function a_(u){var l=u.alternate;l!==null&&(u.alternate=null,a_(l)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(l=u.stateNode,l!==null&&(delete l[Ti],delete l[$l],delete l[i0],delete l[Ob],delete l[kb])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function u_(u){return u.tag===5||u.tag===3||u.tag===4}function l_(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||u_(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function H0(u,l,d){var g=u.tag;if(g===5||g===6)u=u.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(u,l):d.insertBefore(u,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(u,d)):(l=d,l.appendChild(u)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=th));else if(g!==4&&(u=u.child,u!==null))for(H0(u,l,d),u=u.sibling;u!==null;)H0(u,l,d),u=u.sibling}function $0(u,l,d){var g=u.tag;if(g===5||g===6)u=u.stateNode,l?d.insertBefore(u,l):d.appendChild(u);else if(g!==4&&(u=u.child,u!==null))for($0(u,l,d),u=u.sibling;u!==null;)$0(u,l,d),u=u.sibling}var An=null,Zr=!1;function $o(u,l,d){for(d=d.child;d!==null;)c_(u,l,d),d=d.sibling}function c_(u,l,d){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(Ms,d)}catch{}switch(d.tag){case 5:Fn||hu(d,l);case 6:var g=An,x=Zr;An=null,$o(u,l,d),An=g,Zr=x,An!==null&&(Zr?(u=An,d=d.stateNode,u.nodeType===8?u.parentNode.removeChild(d):u.removeChild(d)):An.removeChild(d.stateNode));break;case 18:An!==null&&(Zr?(u=An,d=d.stateNode,u.nodeType===8?r0(u.parentNode,d):u.nodeType===1&&r0(u,d),ko(u)):r0(An,d.stateNode));break;case 4:g=An,x=Zr,An=d.stateNode.containerInfo,Zr=!0,$o(u,l,d),An=g,Zr=x;break;case 0:case 11:case 14:case 15:if(!Fn&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){x=g=g.next;do{var _=x,b=_.destroy;_=_.tag,b!==void 0&&((_&2)!==0||(_&4)!==0)&&j0(d,l,b),x=x.next}while(x!==g)}$o(u,l,d);break;case 1:if(!Fn&&(hu(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(z){Ft(d,l,z)}$o(u,l,d);break;case 21:$o(u,l,d);break;case 22:d.mode&1?(Fn=(g=Fn)||d.memoizedState!==null,$o(u,l,d),Fn=g):$o(u,l,d);break;default:$o(u,l,d)}}function f_(u){var l=u.updateQueue;if(l!==null){u.updateQueue=null;var d=u.stateNode;d===null&&(d=u.stateNode=new Yb),l.forEach(function(g){var x=s4.bind(null,u,g);d.has(g)||(d.add(g),g.then(x,x))})}}function Jr(u,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var x=d[g];try{var _=u,b=l,z=b;e:for(;z!==null;){switch(z.tag){case 5:An=z.stateNode,Zr=!1;break e;case 3:An=z.stateNode.containerInfo,Zr=!0;break e;case 4:An=z.stateNode.containerInfo,Zr=!0;break e}z=z.return}if(An===null)throw Error(t(160));c_(_,b,x),An=null,Zr=!1;var W=x.alternate;W!==null&&(W.return=null),x.return=null}catch(J){Ft(x,l,J)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)h_(l,u),l=l.sibling}function h_(u,l){var d=u.alternate,g=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(Jr(l,u),bi(u),g&4){try{tc(3,u,u.return),Ch(3,u)}catch(Ce){Ft(u,u.return,Ce)}try{tc(5,u,u.return)}catch(Ce){Ft(u,u.return,Ce)}}break;case 1:Jr(l,u),bi(u),g&512&&d!==null&&hu(d,d.return);break;case 5:if(Jr(l,u),bi(u),g&512&&d!==null&&hu(d,d.return),u.flags&32){var x=u.stateNode;try{Ps(x,"")}catch(Ce){Ft(u,u.return,Ce)}}if(g&4&&(x=u.stateNode,x!=null)){var _=u.memoizedProps,b=d!==null?d.memoizedProps:_,z=u.type,W=u.updateQueue;if(u.updateQueue=null,W!==null)try{z==="input"&&_.type==="radio"&&_.name!=null&&Pa(x,_),Oa(z,b);var J=Oa(z,_);for(b=0;b<W.length;b+=2){var ue=W[b],le=W[b+1];ue==="style"?Da(x,le):ue==="dangerouslySetInnerHTML"?bf(x,le):ue==="children"?Ps(x,le):M(x,ue,le,J)}switch(z){case"input":Rs(x,_);break;case"textarea":Sf(x,_);break;case"select":var ae=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!_.multiple;var ge=_.value;ge!=null?Wr(x,!!_.multiple,ge,!1):ae!==!!_.multiple&&(_.defaultValue!=null?Wr(x,!!_.multiple,_.defaultValue,!0):Wr(x,!!_.multiple,_.multiple?[]:"",!1))}x[$l]=_}catch(Ce){Ft(u,u.return,Ce)}}break;case 6:if(Jr(l,u),bi(u),g&4){if(u.stateNode===null)throw Error(t(162));x=u.stateNode,_=u.memoizedProps;try{x.nodeValue=_}catch(Ce){Ft(u,u.return,Ce)}}break;case 3:if(Jr(l,u),bi(u),g&4&&d!==null&&d.memoizedState.isDehydrated)try{ko(l.containerInfo)}catch(Ce){Ft(u,u.return,Ce)}break;case 4:Jr(l,u),bi(u);break;case 13:Jr(l,u),bi(u),x=u.child,x.flags&8192&&(_=x.memoizedState!==null,x.stateNode.isHidden=_,!_||x.alternate!==null&&x.alternate.memoizedState!==null||(q0=Et())),g&4&&f_(u);break;case 22:if(ue=d!==null&&d.memoizedState!==null,u.mode&1?(Fn=(J=Fn)||ue,Jr(l,u),Fn=J):Jr(l,u),bi(u),g&8192){if(J=u.memoizedState!==null,(u.stateNode.isHidden=J)&&!ue&&(u.mode&1)!==0)for(ye=u,ue=u.child;ue!==null;){for(le=ye=ue;ye!==null;){switch(ae=ye,ge=ae.child,ae.tag){case 0:case 11:case 14:case 15:tc(4,ae,ae.return);break;case 1:hu(ae,ae.return);var we=ae.stateNode;if(typeof we.componentWillUnmount=="function"){g=ae,d=ae.return;try{l=g,we.props=l.memoizedProps,we.state=l.memoizedState,we.componentWillUnmount()}catch(Ce){Ft(g,d,Ce)}}break;case 5:hu(ae,ae.return);break;case 22:if(ae.memoizedState!==null){m_(le);continue}}ge!==null?(ge.return=ae,ye=ge):m_(le)}ue=ue.sibling}e:for(ue=null,le=u;;){if(le.tag===5){if(ue===null){ue=le;try{x=le.stateNode,J?(_=x.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(z=le.stateNode,W=le.memoizedProps.style,b=W!=null&&W.hasOwnProperty("display")?W.display:null,z.style.display=To("display",b))}catch(Ce){Ft(u,u.return,Ce)}}}else if(le.tag===6){if(ue===null)try{le.stateNode.nodeValue=J?"":le.memoizedProps}catch(Ce){Ft(u,u.return,Ce)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===u)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===u)break e;for(;le.sibling===null;){if(le.return===null||le.return===u)break e;ue===le&&(ue=null),le=le.return}ue===le&&(ue=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Jr(l,u),bi(u),g&4&&f_(u);break;case 21:break;default:Jr(l,u),bi(u)}}function bi(u){var l=u.flags;if(l&2){try{e:{for(var d=u.return;d!==null;){if(u_(d)){var g=d;break e}d=d.return}throw Error(t(160))}switch(g.tag){case 5:var x=g.stateNode;g.flags&32&&(Ps(x,""),g.flags&=-33);var _=l_(u);$0(u,_,x);break;case 3:case 4:var b=g.stateNode.containerInfo,z=l_(u);H0(u,z,b);break;default:throw Error(t(161))}}catch(W){Ft(u,u.return,W)}u.flags&=-3}l&4096&&(u.flags&=-4097)}function Zb(u,l,d){ye=u,d_(u)}function d_(u,l,d){for(var g=(u.mode&1)!==0;ye!==null;){var x=ye,_=x.child;if(x.tag===22&&g){var b=x.memoizedState!==null||Ah;if(!b){var z=x.alternate,W=z!==null&&z.memoizedState!==null||Fn;z=Ah;var J=Fn;if(Ah=b,(Fn=W)&&!J)for(ye=x;ye!==null;)b=ye,W=b.child,b.tag===22&&b.memoizedState!==null?g_(x):W!==null?(W.return=b,ye=W):g_(x);for(;_!==null;)ye=_,d_(_),_=_.sibling;ye=x,Ah=z,Fn=J}p_(u)}else(x.subtreeFlags&8772)!==0&&_!==null?(_.return=x,ye=_):p_(u)}}function p_(u){for(;ye!==null;){var l=ye;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Fn||Ch(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!Fn)if(d===null)g.componentDidMount();else{var x=l.elementType===l.type?d.memoizedProps:Qr(l.type,d.memoizedProps);g.componentDidUpdate(x,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var _=l.updateQueue;_!==null&&mx(l,_,g);break;case 3:var b=l.updateQueue;if(b!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}mx(l,b,d)}break;case 5:var z=l.stateNode;if(d===null&&l.flags&4){d=z;var W=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":W.autoFocus&&d.focus();break;case"img":W.src&&(d.src=W.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var J=l.alternate;if(J!==null){var ue=J.memoizedState;if(ue!==null){var le=ue.dehydrated;le!==null&&ko(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Fn||l.flags&512&&z0(l)}catch(ae){Ft(l,l.return,ae)}}if(l===u){ye=null;break}if(d=l.sibling,d!==null){d.return=l.return,ye=d;break}ye=l.return}}function m_(u){for(;ye!==null;){var l=ye;if(l===u){ye=null;break}var d=l.sibling;if(d!==null){d.return=l.return,ye=d;break}ye=l.return}}function g_(u){for(;ye!==null;){var l=ye;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{Ch(4,l)}catch(W){Ft(l,d,W)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var x=l.return;try{g.componentDidMount()}catch(W){Ft(l,x,W)}}var _=l.return;try{z0(l)}catch(W){Ft(l,_,W)}break;case 5:var b=l.return;try{z0(l)}catch(W){Ft(l,b,W)}}}catch(W){Ft(l,l.return,W)}if(l===u){ye=null;break}var z=l.sibling;if(z!==null){z.return=l.return,ye=z;break}ye=l.return}}var Jb=Math.ceil,Th=j.ReactCurrentDispatcher,W0=j.ReactCurrentOwner,kr=j.ReactCurrentBatchConfig,ot=0,dn=null,Xt=null,Cn=0,wr=0,du=Bo(0),nn=0,nc=null,Qs=0,Ih=0,G0=0,rc=null,rr=null,q0=0,pu=1/0,ao=null,Sh=!1,K0=null,Wo=null,bh=!1,Go=null,Rh=0,ic=0,X0=null,Ph=-1,Nh=0;function qn(){return(ot&6)!==0?Et():Ph!==-1?Ph:Ph=Et()}function qo(u){return(u.mode&1)===0?1:(ot&2)!==0&&Cn!==0?Cn&-Cn:Lb.transition!==null?(Nh===0&&(Nh=Tl()),Nh):(u=tt,u!==0||(u=window.event,u=u===void 0?16:Ha(u.type)),u)}function ei(u,l,d,g){if(50<ic)throw ic=0,X0=null,Error(t(185));Bs(u,d,g),((ot&2)===0||u!==dn)&&(u===dn&&((ot&2)===0&&(Ih|=d),nn===4&&Ko(u,Cn)),ir(u,g),d===1&&ot===0&&(l.mode&1)===0&&(pu=Et()+500,oh&&jo()))}function ir(u,l){var d=u.callbackNode;Fs(u,l);var g=Ki(u,u===dn?Cn:0);if(g===0)d!==null&&La(d),u.callbackNode=null,u.callbackPriority=0;else if(l=g&-g,u.callbackPriority!==l){if(d!=null&&La(d),l===1)u.tag===0?Mb(y_.bind(null,u)):rx(y_.bind(null,u)),Nb(function(){(ot&6)===0&&jo()}),d=null;else{switch(mi(g)){case 1:d=Va;break;case 4:d=El;break;case 16:d=ks;break;case 536870912:d=Fa;break;default:d=ks}d=I_(d,v_.bind(null,u))}u.callbackPriority=l,u.callbackNode=d}}function v_(u,l){if(Ph=-1,Nh=0,(ot&6)!==0)throw Error(t(327));var d=u.callbackNode;if(mu()&&u.callbackNode!==d)return null;var g=Ki(u,u===dn?Cn:0);if(g===0)return null;if((g&30)!==0||(g&u.expiredLanes)!==0||l)l=Dh(u,g);else{l=g;var x=ot;ot|=2;var _=__();(dn!==u||Cn!==l)&&(ao=null,pu=Et()+500,Js(u,l));do try{n4();break}catch(z){x_(u,z)}while(!0);d0(),Th.current=_,ot=x,Xt!==null?l=0:(dn=null,Cn=0,l=nn)}if(l!==0){if(l===2&&(x=Cl(u),x!==0&&(g=x,l=Y0(u,x))),l===1)throw d=nc,Js(u,0),Ko(u,g),ir(u,Et()),d;if(l===6)Ko(u,g);else{if(x=u.current.alternate,(g&30)===0&&!e4(x)&&(l=Dh(u,g),l===2&&(_=Cl(u),_!==0&&(g=_,l=Y0(u,_))),l===1))throw d=nc,Js(u,0),Ko(u,g),ir(u,Et()),d;switch(u.finishedWork=x,u.finishedLanes=g,l){case 0:case 1:throw Error(t(345));case 2:ea(u,rr,ao);break;case 3:if(Ko(u,g),(g&130023424)===g&&(l=q0+500-Et(),10<l)){if(Ki(u,0)!==0)break;if(x=u.suspendedLanes,(x&g)!==g){qn(),u.pingedLanes|=u.suspendedLanes&x;break}u.timeoutHandle=n0(ea.bind(null,u,rr,ao),l);break}ea(u,rr,ao);break;case 4:if(Ko(u,g),(g&4194240)===g)break;for(l=u.eventTimes,x=-1;0<g;){var b=31-pr(g);_=1<<b,b=l[b],b>x&&(x=b),g&=~_}if(g=x,g=Et()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Jb(g/1960))-g,10<g){u.timeoutHandle=n0(ea.bind(null,u,rr,ao),g);break}ea(u,rr,ao);break;case 5:ea(u,rr,ao);break;default:throw Error(t(329))}}}return ir(u,Et()),u.callbackNode===d?v_.bind(null,u):null}function Y0(u,l){var d=rc;return u.current.memoizedState.isDehydrated&&(Js(u,l).flags|=256),u=Dh(u,l),u!==2&&(l=rr,rr=d,l!==null&&Q0(l)),u}function Q0(u){rr===null?rr=u:rr.push.apply(rr,u)}function e4(u){for(var l=u;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var x=d[g],_=x.getSnapshot;x=x.value;try{if(!Xr(_(),x))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===u)break;for(;l.sibling===null;){if(l.return===null||l.return===u)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ko(u,l){for(l&=~G0,l&=~Ih,u.suspendedLanes|=l,u.pingedLanes&=~l,u=u.expirationTimes;0<l;){var d=31-pr(l),g=1<<d;u[d]=-1,l&=~g}}function y_(u){if((ot&6)!==0)throw Error(t(327));mu();var l=Ki(u,0);if((l&1)===0)return ir(u,Et()),null;var d=Dh(u,l);if(u.tag!==0&&d===2){var g=Cl(u);g!==0&&(l=g,d=Y0(u,g))}if(d===1)throw d=nc,Js(u,0),Ko(u,l),ir(u,Et()),d;if(d===6)throw Error(t(345));return u.finishedWork=u.current.alternate,u.finishedLanes=l,ea(u,rr,ao),ir(u,Et()),null}function Z0(u,l){var d=ot;ot|=1;try{return u(l)}finally{ot=d,ot===0&&(pu=Et()+500,oh&&jo())}}function Zs(u){Go!==null&&Go.tag===0&&(ot&6)===0&&mu();var l=ot;ot|=1;var d=kr.transition,g=tt;try{if(kr.transition=null,tt=1,u)return u()}finally{tt=g,kr.transition=d,ot=l,(ot&6)===0&&jo()}}function J0(){wr=du.current,Ct(du)}function Js(u,l){u.finishedWork=null,u.finishedLanes=0;var d=u.timeoutHandle;if(d!==-1&&(u.timeoutHandle=-1,Pb(d)),Xt!==null)for(d=Xt.return;d!==null;){var g=d;switch(u0(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&rh();break;case 3:cu(),Ct(er),Ct(Mn),w0();break;case 5:x0(g);break;case 4:cu();break;case 13:Ct(Nt);break;case 19:Ct(Nt);break;case 10:p0(g.type._context);break;case 22:case 23:J0()}d=d.return}if(dn=u,Xt=u=Xo(u.current,null),Cn=wr=l,nn=0,nc=null,G0=Ih=Qs=0,rr=rc=null,Ks!==null){for(l=0;l<Ks.length;l++)if(d=Ks[l],g=d.interleaved,g!==null){d.interleaved=null;var x=g.next,_=d.pending;if(_!==null){var b=_.next;_.next=x,g.next=b}d.pending=g}Ks=null}return u}function x_(u,l){do{var d=Xt;try{if(d0(),mh.current=xh,gh){for(var g=Dt.memoizedState;g!==null;){var x=g.queue;x!==null&&(x.pending=null),g=g.next}gh=!1}if(Ys=0,hn=tn=Dt=null,Yl=!1,Ql=0,W0.current=null,d===null||d.return===null){nn=1,nc=l,Xt=null;break}e:{var _=u,b=d.return,z=d,W=l;if(l=Cn,z.flags|=32768,W!==null&&typeof W=="object"&&typeof W.then=="function"){var J=W,ue=z,le=ue.tag;if((ue.mode&1)===0&&(le===0||le===11||le===15)){var ae=ue.alternate;ae?(ue.updateQueue=ae.updateQueue,ue.memoizedState=ae.memoizedState,ue.lanes=ae.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var ge=$x(b);if(ge!==null){ge.flags&=-257,Wx(ge,b,z,_,l),ge.mode&1&&Hx(_,J,l),l=ge,W=J;var we=l.updateQueue;if(we===null){var Ce=new Set;Ce.add(W),l.updateQueue=Ce}else we.add(W);break e}else{if((l&1)===0){Hx(_,J,l),e1();break e}W=Error(t(426))}}else if(Rt&&z.mode&1){var Ht=$x(b);if(Ht!==null){(Ht.flags&65536)===0&&(Ht.flags|=256),Wx(Ht,b,z,_,l),f0(fu(W,z));break e}}_=W=fu(W,z),nn!==4&&(nn=2),rc===null?rc=[_]:rc.push(_),_=b;do{switch(_.tag){case 3:_.flags|=65536,l&=-l,_.lanes|=l;var K=jx(_,W,l);px(_,K);break e;case 1:z=W;var G=_.type,Q=_.stateNode;if((_.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Wo===null||!Wo.has(Q)))){_.flags|=65536,l&=-l,_.lanes|=l;var ce=zx(_,z,l);px(_,ce);break e}}_=_.return}while(_!==null)}E_(d)}catch(Se){l=Se,Xt===d&&d!==null&&(Xt=d=d.return);continue}break}while(!0)}function __(){var u=Th.current;return Th.current=xh,u===null?xh:u}function e1(){(nn===0||nn===3||nn===2)&&(nn=4),dn===null||(Qs&268435455)===0&&(Ih&268435455)===0||Ko(dn,Cn)}function Dh(u,l){var d=ot;ot|=2;var g=__();(dn!==u||Cn!==l)&&(ao=null,Js(u,l));do try{t4();break}catch(x){x_(u,x)}while(!0);if(d0(),ot=d,Th.current=g,Xt!==null)throw Error(t(261));return dn=null,Cn=0,nn}function t4(){for(;Xt!==null;)w_(Xt)}function n4(){for(;Xt!==null&&!Os();)w_(Xt)}function w_(u){var l=T_(u.alternate,u,wr);u.memoizedProps=u.pendingProps,l===null?E_(u):Xt=l,W0.current=null}function E_(u){var l=u;do{var d=l.alternate;if(u=l.return,(l.flags&32768)===0){if(d=Kb(d,l,wr),d!==null){Xt=d;return}}else{if(d=Xb(d,l),d!==null){d.flags&=32767,Xt=d;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{nn=6,Xt=null;return}}if(l=l.sibling,l!==null){Xt=l;return}Xt=l=u}while(l!==null);nn===0&&(nn=5)}function ea(u,l,d){var g=tt,x=kr.transition;try{kr.transition=null,tt=1,r4(u,l,d,g)}finally{kr.transition=x,tt=g}return null}function r4(u,l,d,g){do mu();while(Go!==null);if((ot&6)!==0)throw Error(t(327));d=u.finishedWork;var x=u.finishedLanes;if(d===null)return null;if(u.finishedWork=null,u.finishedLanes=0,d===u.current)throw Error(t(177));u.callbackNode=null,u.callbackPriority=0;var _=d.lanes|d.childLanes;if(Up(u,_),u===dn&&(Xt=dn=null,Cn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||bh||(bh=!0,I_(ks,function(){return mu(),null})),_=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||_){_=kr.transition,kr.transition=null;var b=tt;tt=1;var z=ot;ot|=4,W0.current=null,Qb(u,d),h_(d,u),Ab(e0),Qi=!!Jp,e0=Jp=null,u.current=d,Zb(d),qi(),ot=z,tt=b,kr.transition=_}else u.current=d;if(bh&&(bh=!1,Go=u,Rh=x),_=u.pendingLanes,_===0&&(Wo=null),Bf(d.stateNode),ir(u,Et()),l!==null)for(g=u.onRecoverableError,d=0;d<l.length;d++)x=l[d],g(x.value,{componentStack:x.stack,digest:x.digest});if(Sh)throw Sh=!1,u=K0,K0=null,u;return(Rh&1)!==0&&u.tag!==0&&mu(),_=u.pendingLanes,(_&1)!==0?u===X0?ic++:(ic=0,X0=u):ic=0,jo(),null}function mu(){if(Go!==null){var u=mi(Rh),l=kr.transition,d=tt;try{if(kr.transition=null,tt=16>u?16:u,Go===null)var g=!1;else{if(u=Go,Go=null,Rh=0,(ot&6)!==0)throw Error(t(331));var x=ot;for(ot|=4,ye=u.current;ye!==null;){var _=ye,b=_.child;if((ye.flags&16)!==0){var z=_.deletions;if(z!==null){for(var W=0;W<z.length;W++){var J=z[W];for(ye=J;ye!==null;){var ue=ye;switch(ue.tag){case 0:case 11:case 15:tc(8,ue,_)}var le=ue.child;if(le!==null)le.return=ue,ye=le;else for(;ye!==null;){ue=ye;var ae=ue.sibling,ge=ue.return;if(a_(ue),ue===J){ye=null;break}if(ae!==null){ae.return=ge,ye=ae;break}ye=ge}}}var we=_.alternate;if(we!==null){var Ce=we.child;if(Ce!==null){we.child=null;do{var Ht=Ce.sibling;Ce.sibling=null,Ce=Ht}while(Ce!==null)}}ye=_}}if((_.subtreeFlags&2064)!==0&&b!==null)b.return=_,ye=b;else e:for(;ye!==null;){if(_=ye,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:tc(9,_,_.return)}var K=_.sibling;if(K!==null){K.return=_.return,ye=K;break e}ye=_.return}}var G=u.current;for(ye=G;ye!==null;){b=ye;var Q=b.child;if((b.subtreeFlags&2064)!==0&&Q!==null)Q.return=b,ye=Q;else e:for(b=G;ye!==null;){if(z=ye,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:Ch(9,z)}}catch(Se){Ft(z,z.return,Se)}if(z===b){ye=null;break e}var ce=z.sibling;if(ce!==null){ce.return=z.return,ye=ce;break e}ye=z.return}}if(ot=x,jo(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(Ms,u)}catch{}g=!0}return g}finally{tt=d,kr.transition=l}}return!1}function A_(u,l,d){l=fu(d,l),l=jx(u,l,1),u=Ho(u,l,1),l=qn(),u!==null&&(Bs(u,1,l),ir(u,l))}function Ft(u,l,d){if(u.tag===3)A_(u,u,d);else for(;l!==null;){if(l.tag===3){A_(l,u,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Wo===null||!Wo.has(g))){u=fu(d,u),u=zx(l,u,1),l=Ho(l,u,1),u=qn(),l!==null&&(Bs(l,1,u),ir(l,u));break}}l=l.return}}function i4(u,l,d){var g=u.pingCache;g!==null&&g.delete(l),l=qn(),u.pingedLanes|=u.suspendedLanes&d,dn===u&&(Cn&d)===d&&(nn===4||nn===3&&(Cn&130023424)===Cn&&500>Et()-q0?Js(u,0):G0|=d),ir(u,l)}function C_(u,l){l===0&&((u.mode&1)===0?l=1:(l=No,No<<=1,(No&130023424)===0&&(No=4194304)));var d=qn();u=io(u,l),u!==null&&(Bs(u,l,d),ir(u,d))}function o4(u){var l=u.memoizedState,d=0;l!==null&&(d=l.retryLane),C_(u,d)}function s4(u,l){var d=0;switch(u.tag){case 13:var g=u.stateNode,x=u.memoizedState;x!==null&&(d=x.retryLane);break;case 19:g=u.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(l),C_(u,d)}var T_;T_=function(u,l,d){if(u!==null)if(u.memoizedProps!==l.pendingProps||er.current)nr=!0;else{if((u.lanes&d)===0&&(l.flags&128)===0)return nr=!1,qb(u,l,d);nr=(u.flags&131072)!==0}else nr=!1,Rt&&(l.flags&1048576)!==0&&ix(l,ah,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;Eh(u,l),u=l.pendingProps;var x=ru(l,Mn.current);lu(l,d),x=C0(null,l,g,u,x,d);var _=T0();return l.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,tr(g)?(_=!0,ih(l)):_=!1,l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,v0(l),x.updater=_h,l.stateNode=x,x._reactInternals=l,N0(l,g,u,d),l=M0(null,l,g,!0,_,d)):(l.tag=0,Rt&&_&&a0(l),Gn(null,l,x,d),l=l.child),l;case 16:g=l.elementType;e:{switch(Eh(u,l),u=l.pendingProps,x=g._init,g=x(g._payload),l.type=g,x=l.tag=u4(g),u=Qr(g,u),x){case 0:l=k0(null,l,g,u,d);break e;case 1:l=Qx(null,l,g,u,d);break e;case 11:l=Gx(null,l,g,u,d);break e;case 14:l=qx(null,l,g,Qr(g.type,u),d);break e}throw Error(t(306,g,""))}return l;case 0:return g=l.type,x=l.pendingProps,x=l.elementType===g?x:Qr(g,x),k0(u,l,g,x,d);case 1:return g=l.type,x=l.pendingProps,x=l.elementType===g?x:Qr(g,x),Qx(u,l,g,x,d);case 3:e:{if(Zx(l),u===null)throw Error(t(387));g=l.pendingProps,_=l.memoizedState,x=_.element,dx(u,l),dh(l,g,null,d);var b=l.memoizedState;if(g=b.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){x=fu(Error(t(423)),l),l=Jx(u,l,g,d,x);break e}else if(g!==x){x=fu(Error(t(424)),l),l=Jx(u,l,g,d,x);break e}else for(_r=Fo(l.stateNode.containerInfo.firstChild),xr=l,Rt=!0,Yr=null,d=fx(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(su(),g===x){l=so(u,l,d);break e}Gn(u,l,g,d)}l=l.child}return l;case 5:return gx(l),u===null&&c0(l),g=l.type,x=l.pendingProps,_=u!==null?u.memoizedProps:null,b=x.children,t0(g,x)?b=null:_!==null&&t0(g,_)&&(l.flags|=32),Yx(u,l),Gn(u,l,b,d),l.child;case 6:return u===null&&c0(l),null;case 13:return e_(u,l,d);case 4:return y0(l,l.stateNode.containerInfo),g=l.pendingProps,u===null?l.child=au(l,null,g,d):Gn(u,l,g,d),l.child;case 11:return g=l.type,x=l.pendingProps,x=l.elementType===g?x:Qr(g,x),Gx(u,l,g,x,d);case 7:return Gn(u,l,l.pendingProps,d),l.child;case 8:return Gn(u,l,l.pendingProps.children,d),l.child;case 12:return Gn(u,l,l.pendingProps.children,d),l.child;case 10:e:{if(g=l.type._context,x=l.pendingProps,_=l.memoizedProps,b=x.value,_t(ch,g._currentValue),g._currentValue=b,_!==null)if(Xr(_.value,b)){if(_.children===x.children&&!er.current){l=so(u,l,d);break e}}else for(_=l.child,_!==null&&(_.return=l);_!==null;){var z=_.dependencies;if(z!==null){b=_.child;for(var W=z.firstContext;W!==null;){if(W.context===g){if(_.tag===1){W=oo(-1,d&-d),W.tag=2;var J=_.updateQueue;if(J!==null){J=J.shared;var ue=J.pending;ue===null?W.next=W:(W.next=ue.next,ue.next=W),J.pending=W}}_.lanes|=d,W=_.alternate,W!==null&&(W.lanes|=d),m0(_.return,d,l),z.lanes|=d;break}W=W.next}}else if(_.tag===10)b=_.type===l.type?null:_.child;else if(_.tag===18){if(b=_.return,b===null)throw Error(t(341));b.lanes|=d,z=b.alternate,z!==null&&(z.lanes|=d),m0(b,d,l),b=_.sibling}else b=_.child;if(b!==null)b.return=_;else for(b=_;b!==null;){if(b===l){b=null;break}if(_=b.sibling,_!==null){_.return=b.return,b=_;break}b=b.return}_=b}Gn(u,l,x.children,d),l=l.child}return l;case 9:return x=l.type,g=l.pendingProps.children,lu(l,d),x=Dr(x),g=g(x),l.flags|=1,Gn(u,l,g,d),l.child;case 14:return g=l.type,x=Qr(g,l.pendingProps),x=Qr(g.type,x),qx(u,l,g,x,d);case 15:return Kx(u,l,l.type,l.pendingProps,d);case 17:return g=l.type,x=l.pendingProps,x=l.elementType===g?x:Qr(g,x),Eh(u,l),l.tag=1,tr(g)?(u=!0,ih(l)):u=!1,lu(l,d),Bx(l,g,x),N0(l,g,x,d),M0(null,l,g,!0,u,d);case 19:return n_(u,l,d);case 22:return Xx(u,l,d)}throw Error(t(156,l.tag))};function I_(u,l){return wl(u,l)}function a4(u,l,d,g){this.tag=u,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(u,l,d,g){return new a4(u,l,d,g)}function t1(u){return u=u.prototype,!(!u||!u.isReactComponent)}function u4(u){if(typeof u=="function")return t1(u)?1:0;if(u!=null){if(u=u.$$typeof,u===B)return 11;if(u===be)return 14}return 2}function Xo(u,l){var d=u.alternate;return d===null?(d=Mr(u.tag,l,u.key,u.mode),d.elementType=u.elementType,d.type=u.type,d.stateNode=u.stateNode,d.alternate=u,u.alternate=d):(d.pendingProps=l,d.type=u.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=u.flags&14680064,d.childLanes=u.childLanes,d.lanes=u.lanes,d.child=u.child,d.memoizedProps=u.memoizedProps,d.memoizedState=u.memoizedState,d.updateQueue=u.updateQueue,l=u.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=u.sibling,d.index=u.index,d.ref=u.ref,d}function Oh(u,l,d,g,x,_){var b=2;if(g=u,typeof u=="function")t1(u)&&(b=1);else if(typeof u=="string")b=5;else e:switch(u){case R:return ta(d.children,x,_,l);case I:b=8,x|=8;break;case D:return u=Mr(12,d,l,x|2),u.elementType=D,u.lanes=_,u;case L:return u=Mr(13,d,l,x),u.elementType=L,u.lanes=_,u;case te:return u=Mr(19,d,l,x),u.elementType=te,u.lanes=_,u;case xe:return kh(d,x,_,l);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case O:b=10;break e;case F:b=9;break e;case B:b=11;break e;case be:b=14;break e;case Oe:b=16,g=null;break e}throw Error(t(130,u==null?u:typeof u,""))}return l=Mr(b,d,l,x),l.elementType=u,l.type=g,l.lanes=_,l}function ta(u,l,d,g){return u=Mr(7,u,g,l),u.lanes=d,u}function kh(u,l,d,g){return u=Mr(22,u,g,l),u.elementType=xe,u.lanes=d,u.stateNode={isHidden:!1},u}function n1(u,l,d){return u=Mr(6,u,null,l),u.lanes=d,u}function r1(u,l,d){return l=Mr(4,u.children!==null?u.children:[],u.key,l),l.lanes=d,l.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},l}function l4(u,l,d,g,x){this.tag=l,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Il(0),this.expirationTimes=Il(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Il(0),this.identifierPrefix=g,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function i1(u,l,d,g,x,_,b,z,W){return u=new l4(u,l,d,z,W),l===1?(l=1,_===!0&&(l|=8)):l=0,_=Mr(3,null,null,l),u.current=_,_.stateNode=u,_.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},v0(_),u}function c4(u,l,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:g==null?null:""+g,children:u,containerInfo:l,implementation:d}}function S_(u){if(!u)return Uo;u=u._reactInternals;e:{if(qr(u)!==u||u.tag!==1)throw Error(t(170));var l=u;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(tr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(u.tag===1){var d=u.type;if(tr(d))return tx(u,d,l)}return l}function b_(u,l,d,g,x,_,b,z,W){return u=i1(d,g,!0,u,x,_,b,z,W),u.context=S_(null),d=u.current,g=qn(),x=qo(d),_=oo(g,x),_.callback=l??null,Ho(d,_,x),u.current.lanes=x,Bs(u,x,g),ir(u,g),u}function Mh(u,l,d,g){var x=l.current,_=qn(),b=qo(x);return d=S_(d),l.context===null?l.context=d:l.pendingContext=d,l=oo(_,b),l.payload={element:u},g=g===void 0?null:g,g!==null&&(l.callback=g),u=Ho(x,l,b),u!==null&&(ei(u,x,b,_),hh(u,x,b)),b}function Lh(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function R_(u,l){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var d=u.retryLane;u.retryLane=d!==0&&d<l?d:l}}function o1(u,l){R_(u,l),(u=u.alternate)&&R_(u,l)}function f4(){return null}var P_=typeof reportError=="function"?reportError:function(u){console.error(u)};function s1(u){this._internalRoot=u}Vh.prototype.render=s1.prototype.render=function(u){var l=this._internalRoot;if(l===null)throw Error(t(409));Mh(u,l,null,null)},Vh.prototype.unmount=s1.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var l=u.containerInfo;Zs(function(){Mh(null,u,null,null)}),l[eo]=null}};function Vh(u){this._internalRoot=u}Vh.prototype.unstable_scheduleHydration=function(u){if(u){var l=Pl();u={blockedOn:null,target:u,priority:l};for(var d=0;d<mr.length&&l!==0&&l<mr[d].priority;d++);mr.splice(d,0,u),d===0&&ja(u)}};function a1(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function Fh(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function N_(){}function h4(u,l,d,g,x){if(x){if(typeof g=="function"){var _=g;g=function(){var J=Lh(b);_.call(J)}}var b=b_(l,g,u,0,null,!1,!1,"",N_);return u._reactRootContainer=b,u[eo]=b.current,zl(u.nodeType===8?u.parentNode:u),Zs(),b}for(;x=u.lastChild;)u.removeChild(x);if(typeof g=="function"){var z=g;g=function(){var J=Lh(W);z.call(J)}}var W=i1(u,0,!1,null,null,!1,!1,"",N_);return u._reactRootContainer=W,u[eo]=W.current,zl(u.nodeType===8?u.parentNode:u),Zs(function(){Mh(l,W,d,g)}),W}function Bh(u,l,d,g,x){var _=d._reactRootContainer;if(_){var b=_;if(typeof x=="function"){var z=x;x=function(){var W=Lh(b);z.call(W)}}Mh(l,b,u,x)}else b=h4(d,l,u,x,g);return Lh(b)}bl=function(u){switch(u.tag){case 3:var l=u.stateNode;if(l.current.memoizedState.isDehydrated){var d=lt(l.pendingLanes);d!==0&&(Sl(l,d|1),ir(l,Et()),(ot&6)===0&&(pu=Et()+500,jo()))}break;case 13:Zs(function(){var g=io(u,1);if(g!==null){var x=qn();ei(g,u,1,x)}}),o1(u,1)}},Ba=function(u){if(u.tag===13){var l=io(u,134217728);if(l!==null){var d=qn();ei(l,u,134217728,d)}o1(u,134217728)}},Rl=function(u){if(u.tag===13){var l=qo(u),d=io(u,l);if(d!==null){var g=qn();ei(d,u,l,g)}o1(u,l)}},Pl=function(){return tt},Nl=function(u,l){var d=tt;try{return tt=u,l()}finally{tt=d}},$i=function(u,l,d){switch(l){case"input":if(Rs(u,d),l=d.name,d.type==="radio"&&l!=null){for(d=u;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==u&&g.form===u.form){var x=nh(g);if(!x)throw Error(t(90));bt(g),Rs(g,x)}}}break;case"textarea":Sf(u,d);break;case"select":l=d.value,l!=null&&Wr(u,!!d.multiple,l,!1)}},Pf=Z0,Nf=Zs;var d4={usingClientEntryPoint:!1,Events:[Wl,tu,nh,So,bo,Z0]},oc={findFiberByHostInstance:$s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p4={bundleType:oc.bundleType,version:oc.version,rendererPackageName:oc.rendererPackageName,rendererConfig:oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=Ff(u),u===null?null:u.stateNode},findFiberByHostInstance:oc.findFiberByHostInstance||f4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uh.isDisabled&&Uh.supportsFiber)try{Ms=Uh.inject(p4),dr=Uh}catch{}}return or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d4,or.createPortal=function(u,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a1(l))throw Error(t(200));return c4(u,l,null,d)},or.createRoot=function(u,l){if(!a1(u))throw Error(t(299));var d=!1,g="",x=P_;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(x=l.onRecoverableError)),l=i1(u,1,!1,null,null,d,!1,g,x),u[eo]=l.current,zl(u.nodeType===8?u.parentNode:u),new s1(l)},or.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var l=u._reactInternals;if(l===void 0)throw typeof u.render=="function"?Error(t(188)):(u=Object.keys(u).join(","),Error(t(268,u)));return u=Ff(l),u=u===null?null:u.stateNode,u},or.flushSync=function(u){return Zs(u)},or.hydrate=function(u,l,d){if(!Fh(l))throw Error(t(200));return Bh(null,u,l,!0,d)},or.hydrateRoot=function(u,l,d){if(!a1(u))throw Error(t(405));var g=d!=null&&d.hydratedSources||null,x=!1,_="",b=P_;if(d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onRecoverableError!==void 0&&(b=d.onRecoverableError)),l=b_(l,null,u,1,d??null,x,!1,_,b),u[eo]=l.current,zl(u),g)for(u=0;u<g.length;u++)d=g[u],x=d._getVersion,x=x(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,x]:l.mutableSourceEagerHydrationData.push(d,x);return new Vh(l)},or.render=function(u,l,d){if(!Fh(l))throw Error(t(200));return Bh(null,u,l,!1,d)},or.unmountComponentAtNode=function(u){if(!Fh(u))throw Error(t(40));return u._reactRootContainer?(Zs(function(){Bh(null,null,u,!1,function(){u._reactRootContainer=null,u[eo]=null})}),!0):!1},or.unstable_batchedUpdates=Z0,or.unstable_renderSubtreeIntoContainer=function(u,l,d,g){if(!Fh(d))throw Error(t(200));if(u==null||u._reactInternals===void 0)throw Error(t(38));return Bh(u,l,d,!1,g)},or.version="18.3.1-next-f1338f8080-20240426",or}var B_;function FA(){if(B_)return c1.exports;B_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),c1.exports=A4(),c1.exports}var U_;function C4(){if(U_)return jh;U_=1;var n=FA();return jh.createRoot=n.createRoot,jh.hydrateRoot=n.hydrateRoot,jh}var T4=C4();const I4=Zu(T4),S4="modulepreload",b4=function(n){return"/"+n},j_={},R4=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let c=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");i=c(t.map(f=>{if(f=b4(f),f in j_)return;j_[f]=!0;const h=f.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":S4,h||(v.as="script"),v.crossOrigin="",v.href=f,a&&v.setAttribute("nonce",a),document.head.appendChild(v),h)return new Promise((y,E)=>{v.addEventListener("load",y),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Bu;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(Bu||(Bu={}));class d1 extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const P4=n=>{var e,t;return n?.androidBridge?"android":!((t=(e=n?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},N4=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},r=t.Plugins=t.Plugins||{},i=()=>e!==null?e.name:P4(n),o=()=>i()!=="web",s=p=>{const v=f.get(p);return!!(v?.platforms.has(i())||a(p))},a=p=>{var v;return(v=t.PluginHeaders)===null||v===void 0?void 0:v.find(y=>y.name===p)},c=p=>n.console.error(p),f=new Map,h=(p,v={})=>{const y=f.get(p);if(y)return console.warn(`Capacitor plugin "${p}" already registered. Cannot register plugins twice.`),y.proxy;const E=i(),A=a(p);let C;const N=async()=>(!C&&E in v?C=typeof v[E]=="function"?C=await v[E]():C=v[E]:e!==null&&!C&&"web"in v&&(C=typeof v.web=="function"?C=await v.web():C=v.web),C),P=(I,D)=>{var O,F;if(A){const B=A?.methods.find(L=>D===L.name);if(B)return B.rtype==="promise"?L=>t.nativePromise(p,D.toString(),L):(L,te)=>t.nativeCallback(p,D.toString(),L,te);if(I)return(O=I[D])===null||O===void 0?void 0:O.bind(I)}else{if(I)return(F=I[D])===null||F===void 0?void 0:F.bind(I);throw new d1(`"${p}" plugin is not implemented on ${E}`,Bu.Unimplemented)}},M=I=>{let D;const O=(...F)=>{const B=N().then(L=>{const te=P(L,I);if(te){const be=te(...F);return D=be?.remove,be}else throw new d1(`"${p}.${I}()" is not implemented on ${E}`,Bu.Unimplemented)});return I==="addListener"&&(B.remove=async()=>D()),B};return O.toString=()=>`${I.toString()}() { [capacitor code] }`,Object.defineProperty(O,"name",{value:I,writable:!1,configurable:!1}),O},j=M("addListener"),H=M("removeListener"),$=(I,D)=>{const O=j({eventName:I},D),F=async()=>{const L=await O;H({eventName:I,callbackId:L},D)},B=new Promise(L=>O.then(()=>L({remove:F})));return B.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await F()},B},R=new Proxy({},{get(I,D){switch(D){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return A?$:j;case"removeListener":return H;default:return M(D)}}});return r[p]=R,f.set(p,{name:p,proxy:R,platforms:new Set([...Object.keys(v),...A?[E]:[]])}),R};return t.convertFileSrc||(t.convertFileSrc=p=>p),t.getPlatform=i,t.handleError=c,t.isNativePlatform=o,t.isPluginAvailable=s,t.registerPlugin=h,t.Exception=d1,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},D4=n=>n.Capacitor=N4(n),am=D4(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),op=am.registerPlugin;class BA{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e);const s=async()=>this.removeListener(e,t);return Promise.resolve({remove:s})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const i=this.listeners[e];if(!i){if(r){let o=this.retainedEventArguments[e];o||(o=[]),o.push(t),this.retainedEventArguments[e]=o}return}i.forEach(o=>o(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new am.Exception(e,Bu.Unimplemented)}unavailable(e="not available"){return new am.Exception(e,Bu.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const i=r.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const z_=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),H_=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class O4 extends BA{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=H_(i).trim(),o=H_(o).trim(),t[i]=o}),t}async setCookie(e){try{const t=z_(e.key),r=z_(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),s=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${i}; path=${o}; ${s};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}op("CapacitorCookies",{web:()=>new O4});const k4=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>t(i),r.readAsDataURL(n)}),M4=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,o,s)=>(i[o]=n[e[s]],i),{})},L4=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[o,s]=i;let a,c;return Array.isArray(s)?(c="",s.forEach(f=>{a=e?encodeURIComponent(f):f,c+=`${o}=${a}&`}),c.slice(0,-1)):(a=e?encodeURIComponent(s):s,c=`${o}=${a}`),`${r}&${c}`},"").substr(1):null,V4=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),i=M4(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[s,a]of Object.entries(n.data||{}))o.set(s,a);t.body=o.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const o=new FormData;if(n.data instanceof FormData)n.data.forEach((a,c)=>{o.append(c,a)});else for(const a of Object.keys(n.data))o.append(a,n.data[a]);t.body=o;const s=new Headers(t.headers);s.delete("content-type"),t.headers=s}else(i.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class F4 extends BA{async request(e){const t=V4(e,e.webFetchExtra),r=L4(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,o=await fetch(i,t),s=o.headers.get("content-type")||"";let{responseType:a="text"}=o.ok?e:{};s.includes("application/json")&&(a="json");let c,f;switch(a){case"arraybuffer":case"blob":f=await o.blob(),c=await k4(f);break;case"json":c=await o.json();break;case"document":case"text":default:c=await o.text()}const h={};return o.headers.forEach((p,v)=>{h[v]=p}),{data:c,headers:h,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}op("CapacitorHttp",{web:()=>new F4});const B4=op("SplashScreen",{web:()=>R4(()=>import("./web-BVcp0Ji2.js"),[]).then(n=>new n.SplashScreenWeb)});var um;(function(n){n.Dark="DARK",n.Light="LIGHT",n.Default="DEFAULT"})(um||(um={}));var $_;(function(n){n.None="NONE",n.Slide="SLIDE",n.Fade="FADE"})($_||($_={}));const U4=op("StatusBar");var p1,W_;function j4(){if(W_)return p1;W_=1;var n=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(o,s){if(o===s)return!0;if(o&&s&&typeof o=="object"&&typeof s=="object"){if(o.constructor!==s.constructor)return!1;var a,c,f;if(Array.isArray(o)){if(a=o.length,a!=s.length)return!1;for(c=a;c--!==0;)if(!i(o[c],s[c]))return!1;return!0}var h;if(e&&o instanceof Map&&s instanceof Map){if(o.size!==s.size)return!1;for(h=o.entries();!(c=h.next()).done;)if(!s.has(c.value[0]))return!1;for(h=o.entries();!(c=h.next()).done;)if(!i(c.value[1],s.get(c.value[0])))return!1;return!0}if(t&&o instanceof Set&&s instanceof Set){if(o.size!==s.size)return!1;for(h=o.entries();!(c=h.next()).done;)if(!s.has(c.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(s)){if(a=o.length,a!=s.length)return!1;for(c=a;c--!==0;)if(o[c]!==s[c])return!1;return!0}if(o.constructor===RegExp)return o.source===s.source&&o.flags===s.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof s.valueOf=="function")return o.valueOf()===s.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof s.toString=="function")return o.toString()===s.toString();if(f=Object.keys(o),a=f.length,a!==Object.keys(s).length)return!1;for(c=a;c--!==0;)if(!Object.prototype.hasOwnProperty.call(s,f[c]))return!1;if(n&&o instanceof Element)return!1;for(c=a;c--!==0;)if(!((f[c]==="_owner"||f[c]==="__v"||f[c]==="__o")&&o.$$typeof)&&!i(o[f[c]],s[f[c]]))return!1;return!0}return o!==o&&s!==s}return p1=function(s,a){try{return i(s,a)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},p1}var z4=j4();const H4=Zu(z4);var m1,G_;function $4(){if(G_)return m1;G_=1;var n=function(e,t,r,i,o,s,a,c){if(!e){var f;if(t===void 0)f=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[r,i,o,s,a,c],p=0;f=new Error(t.replace(/%s/g,function(){return h[p++]})),f.name="Invariant Violation"}throw f.framesToPop=1,f}};return m1=n,m1}var W4=$4();const q_=Zu(W4);var g1,K_;function G4(){return K_||(K_=1,g1=function(e,t,r,i){var o=r?r.call(i,e,t):void 0;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(t),f=0;f<s.length;f++){var h=s[f];if(!c(h))return!1;var p=e[h],v=t[h];if(o=r?r.call(i,p,v,h):void 0,o===!1||o===void 0&&p!==v)return!1}return!0}),g1}var q4=G4();const K4=Zu(q4);var UA=(n=>(n.BASE="base",n.BODY="body",n.HEAD="head",n.HTML="html",n.LINK="link",n.META="meta",n.NOSCRIPT="noscript",n.SCRIPT="script",n.STYLE="style",n.TITLE="title",n.FRAGMENT="Symbol(react.fragment)",n))(UA||{}),v1={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},X_=Object.values(UA),bg={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},X4=Object.entries(bg).reduce((n,[e,t])=>(n[t]=e,n),{}),si="data-rh",Du={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Ou=(n,e)=>{for(let t=n.length-1;t>=0;t-=1){const r=n[t];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},Y4=n=>{let e=Ou(n,"title");const t=Ou(n,Du.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),t&&e)return t.replace(/%s/g,()=>e);const r=Ou(n,Du.DEFAULT_TITLE);return e||r||void 0},Q4=n=>Ou(n,Du.ON_CHANGE_CLIENT_STATE)||(()=>{}),y1=(n,e)=>e.filter(t=>typeof t[n]<"u").map(t=>t[n]).reduce((t,r)=>({...t,...r}),{}),Z4=(n,e)=>e.filter(t=>typeof t.base<"u").map(t=>t.base).reverse().reduce((t,r)=>{if(!t.length){const i=Object.keys(r);for(let o=0;o<i.length;o+=1){const a=i[o].toLowerCase();if(n.indexOf(a)!==-1&&r[a])return t.concat(r)}}return t},[]),J4=n=>console&&typeof console.warn=="function"&&console.warn(n),ac=(n,e,t)=>{const r={};return t.filter(i=>Array.isArray(i[n])?!0:(typeof i[n]<"u"&&J4(`Helmet: ${n} should be of type "Array". Instead found type "${typeof i[n]}"`),!1)).map(i=>i[n]).reverse().reduce((i,o)=>{const s={};o.filter(c=>{let f;const h=Object.keys(c);for(let v=0;v<h.length;v+=1){const y=h[v],E=y.toLowerCase();e.indexOf(E)!==-1&&!(f==="rel"&&c[f].toLowerCase()==="canonical")&&!(E==="rel"&&c[E].toLowerCase()==="stylesheet")&&(f=E),e.indexOf(y)!==-1&&(y==="innerHTML"||y==="cssText"||y==="itemprop")&&(f=y)}if(!f||!c[f])return!1;const p=c[f].toLowerCase();return r[f]||(r[f]={}),s[f]||(s[f]={}),r[f][p]?!1:(s[f][p]=!0,!0)}).reverse().forEach(c=>i.push(c));const a=Object.keys(s);for(let c=0;c<a.length;c+=1){const f=a[c],h={...r[f],...s[f]};r[f]=h}return i},[]).reverse()},eR=(n,e)=>{if(Array.isArray(n)&&n.length){for(let t=0;t<n.length;t+=1)if(n[t][e])return!0}return!1},tR=n=>({baseTag:Z4(["href"],n),bodyAttributes:y1("bodyAttributes",n),defer:Ou(n,Du.DEFER),encode:Ou(n,Du.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:y1("htmlAttributes",n),linkTags:ac("link",["rel","href"],n),metaTags:ac("meta",["name","charset","http-equiv","property","itemprop"],n),noscriptTags:ac("noscript",["innerHTML"],n),onChangeClientState:Q4(n),scriptTags:ac("script",["src","innerHTML"],n),styleTags:ac("style",["cssText"],n),title:Y4(n),titleAttributes:y1("titleAttributes",n),prioritizeSeoTags:eR(n,Du.PRIORITIZE_SEO_TAGS)}),jA=n=>Array.isArray(n)?n.join(""):n,nR=(n,e)=>{const t=Object.keys(n);for(let r=0;r<t.length;r+=1)if(e[t[r]]&&e[t[r]].includes(n[t[r]]))return!0;return!1},x1=(n,e)=>Array.isArray(n)?n.reduce((t,r)=>(nR(r,e)?t.priority.push(r):t.default.push(r),t),{priority:[],default:[]}):{default:n,priority:[]},Y_=(n,e)=>({...n,[e]:void 0}),rR=["noscript","script","style"],lm=(n,e=!0)=>e===!1?String(n):String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),zA=n=>Object.keys(n).reduce((e,t)=>{const r=typeof n[t]<"u"?`${t}="${n[t]}"`:`${t}`;return e?`${e} ${r}`:r},""),iR=(n,e,t,r)=>{const i=zA(t),o=jA(e);return i?`<${n} ${si}="true" ${i}>${lm(o,r)}</${n}>`:`<${n} ${si}="true">${lm(o,r)}</${n}>`},oR=(n,e,t=!0)=>e.reduce((r,i)=>{const o=i,s=Object.keys(o).filter(f=>!(f==="innerHTML"||f==="cssText")).reduce((f,h)=>{const p=typeof o[h]>"u"?h:`${h}="${lm(o[h],t)}"`;return f?`${f} ${p}`:p},""),a=o.innerHTML||o.cssText||"",c=rR.indexOf(n)===-1;return`${r}<${n} ${si}="true" ${s}${c?"/>":`>${a}</${n}>`}`},""),HA=(n,e={})=>Object.keys(n).reduce((t,r)=>{const i=bg[r];return t[i||r]=n[r],t},e),sR=(n,e,t)=>{const r={key:e,[si]:!0},i=HA(t,r);return[Rn.createElement("title",i,e)]},ud=(n,e)=>e.map((t,r)=>{const i={key:r,[si]:!0};return Object.keys(t).forEach(o=>{const a=bg[o]||o;if(a==="innerHTML"||a==="cssText"){const c=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:c}}else i[a]=t[o]}),Rn.createElement(n,i)}),Br=(n,e,t=!0)=>{switch(n){case"title":return{toComponent:()=>sR(n,e.title,e.titleAttributes),toString:()=>iR(n,e.title,e.titleAttributes,t)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>HA(e),toString:()=>zA(e)};default:return{toComponent:()=>ud(n,e),toString:()=>oR(n,e,t)}}},aR=({metaTags:n,linkTags:e,scriptTags:t,encode:r})=>{const i=x1(n,v1.meta),o=x1(e,v1.link),s=x1(t,v1.script);return{priorityMethods:{toComponent:()=>[...ud("meta",i.priority),...ud("link",o.priority),...ud("script",s.priority)],toString:()=>`${Br("meta",i.priority,r)} ${Br("link",o.priority,r)} ${Br("script",s.priority,r)}`},metaTags:i.default,linkTags:o.default,scriptTags:s.default}},uR=n=>{const{baseTag:e,bodyAttributes:t,encode:r=!0,htmlAttributes:i,noscriptTags:o,styleTags:s,title:a="",titleAttributes:c,prioritizeSeoTags:f}=n;let{linkTags:h,metaTags:p,scriptTags:v}=n,y={toComponent:()=>{},toString:()=>""};return f&&({priorityMethods:y,linkTags:h,metaTags:p,scriptTags:v}=aR(n)),{priority:y,base:Br("base",e,r),bodyAttributes:Br("bodyAttributes",t,r),htmlAttributes:Br("htmlAttributes",i,r),link:Br("link",h,r),meta:Br("meta",p,r),noscript:Br("noscript",o,r),script:Br("script",v,r),style:Br("style",s,r),title:Br("title",{title:a,titleAttributes:c},r)}},cm=uR,zh=[],$A=!!(typeof window<"u"&&window.document&&window.document.createElement),fm=class{instances=[];canUseDOM=$A;context;value={setHelmet:n=>{this.context.helmet=n},helmetInstances:{get:()=>this.canUseDOM?zh:this.instances,add:n=>{(this.canUseDOM?zh:this.instances).push(n)},remove:n=>{const e=(this.canUseDOM?zh:this.instances).indexOf(n);(this.canUseDOM?zh:this.instances).splice(e,1)}}};constructor(n,e){this.context=n,this.canUseDOM=e||!1,e||(n.helmet=cm({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},lR={},WA=Rn.createContext(lR),GA=class qA extends U.Component{static canUseDOM=$A;helmetData;constructor(e){super(e),this.helmetData=new fm(this.props.context||{},qA.canUseDOM)}render(){return Rn.createElement(WA.Provider,{value:this.helmetData.value},this.props.children)}},gu=(n,e)=>{const t=document.head||document.querySelector("head"),r=t.querySelectorAll(`${n}[${si}]`),i=[].slice.call(r),o=[];let s;return e&&e.length&&e.forEach(a=>{const c=document.createElement(n);for(const f in a)if(Object.prototype.hasOwnProperty.call(a,f))if(f==="innerHTML")c.innerHTML=a.innerHTML;else if(f==="cssText")c.styleSheet?c.styleSheet.cssText=a.cssText:c.appendChild(document.createTextNode(a.cssText));else{const h=f,p=typeof a[h]>"u"?"":a[h];c.setAttribute(f,p)}c.setAttribute(si,"true"),i.some((f,h)=>(s=h,c.isEqualNode(f)))?i.splice(s,1):o.push(c)}),i.forEach(a=>a.parentNode?.removeChild(a)),o.forEach(a=>t.appendChild(a)),{oldTags:i,newTags:o}},hm=(n,e)=>{const t=document.getElementsByTagName(n)[0];if(!t)return;const r=t.getAttribute(si),i=r?r.split(","):[],o=[...i],s=Object.keys(e);for(const a of s){const c=e[a]||"";t.getAttribute(a)!==c&&t.setAttribute(a,c),i.indexOf(a)===-1&&i.push(a);const f=o.indexOf(a);f!==-1&&o.splice(f,1)}for(let a=o.length-1;a>=0;a-=1)t.removeAttribute(o[a]);i.length===o.length?t.removeAttribute(si):t.getAttribute(si)!==s.join(",")&&t.setAttribute(si,s.join(","))},cR=(n,e)=>{typeof n<"u"&&document.title!==n&&(document.title=jA(n)),hm("title",e)},Q_=(n,e)=>{const{baseTag:t,bodyAttributes:r,htmlAttributes:i,linkTags:o,metaTags:s,noscriptTags:a,onChangeClientState:c,scriptTags:f,styleTags:h,title:p,titleAttributes:v}=n;hm("body",r),hm("html",i),cR(p,v);const y={baseTag:gu("base",t),linkTags:gu("link",o),metaTags:gu("meta",s),noscriptTags:gu("noscript",a),scriptTags:gu("script",f),styleTags:gu("style",h)},E={},A={};Object.keys(y).forEach(C=>{const{newTags:N,oldTags:P}=y[C];N.length&&(E[C]=N),P.length&&(A[C]=y[C].oldTags)}),e&&e(),c(n,E,A)},uc=null,fR=n=>{uc&&cancelAnimationFrame(uc),n.defer?uc=requestAnimationFrame(()=>{Q_(n,()=>{uc=null})}):(Q_(n),uc=null)},hR=fR,Z_=class extends U.Component{rendered=!1;shouldComponentUpdate(n){return!K4(n,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:n}=this.props.context;n.remove(this),this.emitChange()}emitChange(){const{helmetInstances:n,setHelmet:e}=this.props.context;let t=null;const r=tR(n.get().map(i=>{const o={...i.props};return delete o.context,o}));GA.canUseDOM?hR(r):cm&&(t=cm(r)),e(t)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:n}=this.props.context;n.add(this),this.emitChange()}render(){return this.init(),null}},Rg=class extends U.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(n){return!H4(Y_(this.props,"helmetData"),Y_(n,"helmetData"))}mapNestedChildrenToProps(n,e){if(!e)return null;switch(n.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${n.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(n,e,t,r){return{...e,[n.type]:[...e[n.type]||[],{...t,...this.mapNestedChildrenToProps(n,r)}]}}mapObjectTypeChildren(n,e,t,r){switch(n.type){case"title":return{...e,[n.type]:r,titleAttributes:{...t}};case"body":return{...e,bodyAttributes:{...t}};case"html":return{...e,htmlAttributes:{...t}};default:return{...e,[n.type]:{...t}}}}mapArrayTypeChildrenToProps(n,e){let t={...e};return Object.keys(n).forEach(r=>{t={...t,[r]:n[r]}}),t}warnOnInvalidChildren(n,e){return q_(X_.some(t=>n.type===t),typeof n.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${X_.join(", ")} are allowed. Helmet does not support rendering <${n.type}> elements. Refer to our API for more information.`),q_(!e||typeof e=="string"||Array.isArray(e)&&!e.some(t=>typeof t!="string"),`Helmet expects a string as a child of <${n.type}>. Did you forget to wrap your children in braces? ( <${n.type}>{\`\`}</${n.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(n,e){let t={};return Rn.Children.forEach(n,r=>{if(!r||!r.props)return;const{children:i,...o}=r.props,s=Object.keys(o).reduce((c,f)=>(c[X4[f]||f]=o[f],c),{});let{type:a}=r;switch(typeof a=="symbol"?a=a.toString():this.warnOnInvalidChildren(r,i),a){case"Symbol(react.fragment)":e=this.mapChildrenToProps(i,e);break;case"link":case"meta":case"noscript":case"script":case"style":t=this.flattenArrayTypeChildren(r,t,s,i);break;default:e=this.mapObjectTypeChildren(r,e,s,i);break}}),this.mapArrayTypeChildrenToProps(t,e)}render(){const{children:n,...e}=this.props;let t={...e},{helmetData:r}=e;if(n&&(t=this.mapChildrenToProps(n,t)),r&&!(r instanceof fm)){const i=r;r=new fm(i.context,!0),delete t.helmetData}return r?Rn.createElement(Z_,{...t,context:r.value}):Rn.createElement(WA.Consumer,null,i=>Rn.createElement(Z_,{...t,context:i}))}};const Pg=U.createContext({});function Ng(n){const e=U.useRef(null);return e.current===null&&(e.current=n()),e.current}const Dg=typeof window<"u",KA=Dg?U.useLayoutEffect:U.useEffect,sp=U.createContext(null);function Og(n,e){n.indexOf(e)===-1&&n.push(e)}function kg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ho=(n,e,t)=>t>e?e:t<n?n:t;let Mg=()=>{};const po={},XA=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function YA(n){return typeof n=="object"&&n!==null}const QA=n=>/^0[^.\s]+$/u.test(n);function Lg(n){let e;return()=>(e===void 0&&(e=n()),e)}const Hr=n=>n,dR=(n,e)=>t=>e(n(t)),rf=(...n)=>n.reduce(dR),Vc=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class Vg{constructor(){this.subscriptions=[]}add(e){return Og(this.subscriptions,e),()=>kg(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ni=n=>n*1e3,jr=n=>n/1e3;function ZA(n,e){return e?n*(1e3/e):0}const JA=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,pR=1e-7,mR=12;function gR(n,e,t,r,i){let o,s,a=0;do s=e+(t-e)/2,o=JA(s,r,i)-n,o>0?t=s:e=s;while(Math.abs(o)>pR&&++a<mR);return s}function of(n,e,t,r){if(n===e&&t===r)return Hr;const i=o=>gR(o,0,1,n,t);return o=>o===0||o===1?o:JA(i(o),e,r)}const eC=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,tC=n=>e=>1-n(1-e),nC=of(.33,1.53,.69,.99),Fg=tC(nC),rC=eC(Fg),iC=n=>(n*=2)<1?.5*Fg(n):.5*(2-Math.pow(2,-10*(n-1))),Bg=n=>1-Math.sin(Math.acos(n)),oC=tC(Bg),sC=eC(Bg),vR=of(.42,0,1,1),yR=of(0,0,.58,1),aC=of(.42,0,.58,1),xR=n=>Array.isArray(n)&&typeof n[0]!="number",uC=n=>Array.isArray(n)&&typeof n[0]=="number",_R={linear:Hr,easeIn:vR,easeInOut:aC,easeOut:yR,circIn:Bg,circInOut:sC,circOut:oC,backIn:Fg,backInOut:rC,backOut:nC,anticipate:iC},wR=n=>typeof n=="string",J_=n=>{if(uC(n)){Mg(n.length===4);const[e,t,r,i]=n;return of(e,t,r,i)}else if(wR(n))return _R[n];return n},Hh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ER(n,e){let t=new Set,r=new Set,i=!1,o=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function c(h){s.has(h)&&(f.schedule(h),n()),h(a)}const f={schedule:(h,p=!1,v=!1)=>{const E=v&&i?t:r;return p&&s.add(h),E.has(h)||E.add(h),h},cancel:h=>{r.delete(h),s.delete(h)},process:h=>{if(a=h,i){o=!0;return}i=!0,[t,r]=[r,t],t.forEach(c),t.clear(),i=!1,o&&(o=!1,f.process(h))}};return f}const AR=40;function lC(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,s=Hh.reduce((M,j)=>(M[j]=ER(o),M),{}),{setup:a,read:c,resolveKeyframes:f,preUpdate:h,update:p,preRender:v,render:y,postRender:E}=s,A=()=>{const M=po.useManualTiming?i.timestamp:performance.now();t=!1,po.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(M-i.timestamp,AR),1)),i.timestamp=M,i.isProcessing=!0,a.process(i),c.process(i),f.process(i),h.process(i),p.process(i),v.process(i),y.process(i),E.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(A))},C=()=>{t=!0,r=!0,i.isProcessing||n(A)};return{schedule:Hh.reduce((M,j)=>{const H=s[j];return M[j]=($,R=!1,I=!1)=>(t||C(),H.schedule($,R,I)),M},{}),cancel:M=>{for(let j=0;j<Hh.length;j++)s[Hh[j]].cancel(M)},state:i,steps:s}}const{schedule:Pt,cancel:gs,state:Sn,steps:_1}=lC(typeof requestAnimationFrame<"u"?requestAnimationFrame:Hr,!0);let ld;function CR(){ld=void 0}const cr={now:()=>(ld===void 0&&cr.set(Sn.isProcessing||po.useManualTiming?Sn.timestamp:performance.now()),ld),set:n=>{ld=n,queueMicrotask(CR)}},cC=n=>e=>typeof e=="string"&&e.startsWith(n),Ug=cC("--"),TR=cC("var(--"),jg=n=>TR(n)?IR.test(n.split("/*")[0].trim()):!1,IR=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ju={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Fc={...Ju,transform:n=>ho(0,1,n)},$h={...Ju,default:1},Ac=n=>Math.round(n*1e5)/1e5,zg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function SR(n){return n==null}const bR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Hg=(n,e)=>t=>!!(typeof t=="string"&&bR.test(t)&&t.startsWith(n)||e&&!SR(t)&&Object.prototype.hasOwnProperty.call(t,e)),fC=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,o,s,a]=r.match(zg);return{[n]:parseFloat(i),[e]:parseFloat(o),[t]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},RR=n=>ho(0,255,n),w1={...Ju,transform:n=>Math.round(RR(n))},la={test:Hg("rgb","red"),parse:fC("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+w1.transform(n)+", "+w1.transform(e)+", "+w1.transform(t)+", "+Ac(Fc.transform(r))+")"};function PR(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const dm={test:Hg("#"),parse:PR,transform:la.transform},sf=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ts=sf("deg"),Di=sf("%"),Be=sf("px"),NR=sf("vh"),DR=sf("vw"),ew={...Di,parse:n=>Di.parse(n)/100,transform:n=>Di.transform(n*100)},Au={test:Hg("hsl","hue"),parse:fC("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Di.transform(Ac(e))+", "+Di.transform(Ac(t))+", "+Ac(Fc.transform(r))+")"},Qt={test:n=>la.test(n)||dm.test(n)||Au.test(n),parse:n=>la.test(n)?la.parse(n):Au.test(n)?Au.parse(n):dm.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?la.transform(n):Au.transform(n),getAnimatableNone:n=>{const e=Qt.parse(n);return e.alpha=0,Qt.transform(e)}},OR=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function kR(n){return isNaN(n)&&typeof n=="string"&&(n.match(zg)?.length||0)+(n.match(OR)?.length||0)>0}const hC="number",dC="color",MR="var",LR="var(",tw="${}",VR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Bc(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let o=0;const a=e.replace(VR,c=>(Qt.test(c)?(r.color.push(o),i.push(dC),t.push(Qt.parse(c))):c.startsWith(LR)?(r.var.push(o),i.push(MR),t.push(c)):(r.number.push(o),i.push(hC),t.push(parseFloat(c))),++o,tw)).split(tw);return{values:t,split:a,indexes:r,types:i}}function pC(n){return Bc(n).values}function mC(n){const{split:e,types:t}=Bc(n),r=e.length;return i=>{let o="";for(let s=0;s<r;s++)if(o+=e[s],i[s]!==void 0){const a=t[s];a===hC?o+=Ac(i[s]):a===dC?o+=Qt.transform(i[s]):o+=i[s]}return o}}const FR=n=>typeof n=="number"?0:Qt.test(n)?Qt.getAnimatableNone(n):n;function BR(n){const e=pC(n);return mC(n)(e.map(FR))}const vs={test:kR,parse:pC,createTransformer:mC,getAnimatableNone:BR};function E1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function UR({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,o=0,s=0;if(!e)i=o=s=t;else{const a=t<.5?t*(1+e):t+e-t*e,c=2*t-a;i=E1(c,a,n+1/3),o=E1(c,a,n),s=E1(c,a,n-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}function Rd(n,e){return t=>t>0?e:n}const Ot=(n,e,t)=>n+(e-n)*t,A1=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},jR=[dm,la,Au],zR=n=>jR.find(e=>e.test(n));function nw(n){const e=zR(n);if(!e)return!1;let t=e.parse(n);return e===Au&&(t=UR(t)),t}const rw=(n,e)=>{const t=nw(n),r=nw(e);if(!t||!r)return Rd(n,e);const i={...t};return o=>(i.red=A1(t.red,r.red,o),i.green=A1(t.green,r.green,o),i.blue=A1(t.blue,r.blue,o),i.alpha=Ot(t.alpha,r.alpha,o),la.transform(i))},pm=new Set(["none","hidden"]);function HR(n,e){return pm.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function $R(n,e){return t=>Ot(n,e,t)}function $g(n){return typeof n=="number"?$R:typeof n=="string"?jg(n)?Rd:Qt.test(n)?rw:qR:Array.isArray(n)?gC:typeof n=="object"?Qt.test(n)?rw:WR:Rd}function gC(n,e){const t=[...n],r=t.length,i=n.map((o,s)=>$g(o)(o,e[s]));return o=>{for(let s=0;s<r;s++)t[s]=i[s](o);return t}}function WR(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=$g(n[i])(n[i],e[i]));return i=>{for(const o in r)t[o]=r[o](i);return t}}function GR(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],s=n.indexes[o][r[o]],a=n.values[s]??0;t[i]=a,r[o]++}return t}const qR=(n,e)=>{const t=vs.createTransformer(e),r=Bc(n),i=Bc(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?pm.has(n)&&!i.values.length||pm.has(e)&&!r.values.length?HR(n,e):rf(gC(GR(r,i),i.values),t):Rd(n,e)};function vC(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Ot(n,e,t):$g(n)(n,e)}const KR=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Pt.update(e,t),stop:()=>gs(e),now:()=>Sn.isProcessing?Sn.timestamp:cr.now()}},yC=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let o=0;o<i;o++)r+=Math.round(n(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Pd=2e4;function Wg(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Pd;)e+=t,r=n.next(e);return e>=Pd?1/0:e}function XR(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(Wg(r),Pd);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:jr(i)}}const YR=5;function xC(n,e,t){const r=Math.max(e-YR,0);return ZA(t-n(r),e-r)}const Bt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},C1=.001;function QR({duration:n=Bt.duration,bounce:e=Bt.bounce,velocity:t=Bt.velocity,mass:r=Bt.mass}){let i,o,s=1-e;s=ho(Bt.minDamping,Bt.maxDamping,s),n=ho(Bt.minDuration,Bt.maxDuration,jr(n)),s<1?(i=f=>{const h=f*s,p=h*n,v=h-t,y=mm(f,s),E=Math.exp(-p);return C1-v/y*E},o=f=>{const p=f*s*n,v=p*t+t,y=Math.pow(s,2)*Math.pow(f,2)*n,E=Math.exp(-p),A=mm(Math.pow(f,2),s);return(-i(f)+C1>0?-1:1)*((v-y)*E)/A}):(i=f=>{const h=Math.exp(-f*n),p=(f-t)*n+1;return-C1+h*p},o=f=>{const h=Math.exp(-f*n),p=(t-f)*(n*n);return h*p});const a=5/n,c=JR(i,o,a);if(n=Ni(n),isNaN(c))return{stiffness:Bt.stiffness,damping:Bt.damping,duration:n};{const f=Math.pow(c,2)*r;return{stiffness:f,damping:s*2*Math.sqrt(r*f),duration:n}}}const ZR=12;function JR(n,e,t){let r=t;for(let i=1;i<ZR;i++)r=r-n(r)/e(r);return r}function mm(n,e){return n*Math.sqrt(1-e*e)}const eP=["duration","bounce"],tP=["stiffness","damping","mass"];function iw(n,e){return e.some(t=>n[t]!==void 0)}function nP(n){let e={velocity:Bt.velocity,stiffness:Bt.stiffness,damping:Bt.damping,mass:Bt.mass,isResolvedFromDuration:!1,...n};if(!iw(n,tP)&&iw(n,eP))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,o=2*ho(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Bt.mass,stiffness:i,damping:o}}else{const t=QR(n);e={...e,...t,mass:Bt.mass},e.isResolvedFromDuration=!0}return e}function Nd(n=Bt.visualDuration,e=Bt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const o=t.keyframes[0],s=t.keyframes[t.keyframes.length-1],a={done:!1,value:o},{stiffness:c,damping:f,mass:h,duration:p,velocity:v,isResolvedFromDuration:y}=nP({...t,velocity:-jr(t.velocity||0)}),E=v||0,A=f/(2*Math.sqrt(c*h)),C=s-o,N=jr(Math.sqrt(c/h)),P=Math.abs(C)<5;r||(r=P?Bt.restSpeed.granular:Bt.restSpeed.default),i||(i=P?Bt.restDelta.granular:Bt.restDelta.default);let M;if(A<1){const H=mm(N,A);M=$=>{const R=Math.exp(-A*N*$);return s-R*((E+A*N*C)/H*Math.sin(H*$)+C*Math.cos(H*$))}}else if(A===1)M=H=>s-Math.exp(-N*H)*(C+(E+N*C)*H);else{const H=N*Math.sqrt(A*A-1);M=$=>{const R=Math.exp(-A*N*$),I=Math.min(H*$,300);return s-R*((E+A*N*C)*Math.sinh(I)+H*C*Math.cosh(I))/H}}const j={calculatedDuration:y&&p||null,next:H=>{const $=M(H);if(y)a.done=H>=p;else{let R=H===0?E:0;A<1&&(R=H===0?Ni(E):xC(M,H,$));const I=Math.abs(R)<=r,D=Math.abs(s-$)<=i;a.done=I&&D}return a.value=a.done?s:$,a},toString:()=>{const H=Math.min(Wg(j),Pd),$=yC(R=>j.next(H*R).value,H,30);return H+"ms "+$},toTransition:()=>{}};return j}Nd.applyToOptions=n=>{const e=XR(n,100,Nd);return n.ease=e.ease,n.duration=Ni(e.duration),n.type="keyframes",n};function gm({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:a,max:c,restDelta:f=.5,restSpeed:h}){const p=n[0],v={done:!1,value:p},y=I=>a!==void 0&&I<a||c!==void 0&&I>c,E=I=>a===void 0?c:c===void 0||Math.abs(a-I)<Math.abs(c-I)?a:c;let A=t*e;const C=p+A,N=s===void 0?C:s(C);N!==C&&(A=N-p);const P=I=>-A*Math.exp(-I/r),M=I=>N+P(I),j=I=>{const D=P(I),O=M(I);v.done=Math.abs(D)<=f,v.value=v.done?N:O};let H,$;const R=I=>{y(v.value)&&(H=I,$=Nd({keyframes:[v.value,E(v.value)],velocity:xC(M,I,v.value),damping:i,stiffness:o,restDelta:f,restSpeed:h}))};return R(0),{calculatedDuration:null,next:I=>{let D=!1;return!$&&H===void 0&&(D=!0,j(I),R(I)),H!==void 0&&I>=H?$.next(I-H):(!D&&j(I),v)}}}function rP(n,e,t){const r=[],i=t||po.mix||vC,o=n.length-1;for(let s=0;s<o;s++){let a=i(n[s],n[s+1]);if(e){const c=Array.isArray(e)?e[s]||Hr:e;a=rf(c,a)}r.push(a)}return r}function iP(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const o=n.length;if(Mg(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const s=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=rP(e,r,i),c=a.length,f=h=>{if(s&&h<n[0])return e[0];let p=0;if(c>1)for(;p<n.length-2&&!(h<n[p+1]);p++);const v=Vc(n[p],n[p+1],h);return a[p](v)};return t?h=>f(ho(n[0],n[o-1],h)):f}function oP(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Vc(0,e,r);n.push(Ot(t,1,i))}}function sP(n){const e=[0];return oP(e,n.length-1),e}function aP(n,e){return n.map(t=>t*e)}function uP(n,e){return n.map(()=>e||aC).splice(0,n.length-1)}function Cc({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=xR(r)?r.map(J_):J_(r),o={done:!1,value:e[0]},s=aP(t&&t.length===e.length?t:sP(e),n),a=iP(s,e,{ease:Array.isArray(i)?i:uP(e,i)});return{calculatedDuration:n,next:c=>(o.value=a(c),o.done=c>=n,o)}}const lP=n=>n!==null;function Gg(n,{repeat:e,repeatType:t="loop"},r,i=1){const o=n.filter(lP),a=i<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!a||r===void 0?o[a]:r}const cP={decay:gm,inertia:gm,tween:Cc,keyframes:Cc,spring:Nd};function _C(n){typeof n.type=="string"&&(n.type=cP[n.type])}class qg{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const fP=n=>n/100;class Kg extends qg{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==cr.now()&&this.tick(cr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;_C(e);const{type:t=Cc,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:s=0}=e;let{keyframes:a}=e;const c=t||Cc;c!==Cc&&typeof a[0]!="number"&&(this.mixKeyframes=rf(fP,vC(a[0],a[1])),a=[0,100]);const f=c({...e,keyframes:a});o==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...a].reverse(),velocity:-s})),f.calculatedDuration===null&&(f.calculatedDuration=Wg(f));const{calculatedDuration:h}=f;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:s,resolvedDuration:a,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:h,repeat:p,repeatType:v,repeatDelay:y,type:E,onUpdate:A,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const N=this.currentTime-f*(this.playbackSpeed>=0?1:-1),P=this.playbackSpeed>=0?N<0:N>i;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let M=this.currentTime,j=r;if(p){const I=Math.min(this.currentTime,i)/a;let D=Math.floor(I),O=I%1;!O&&I>=1&&(O=1),O===1&&D--,D=Math.min(D,p+1),!!(D%2)&&(v==="reverse"?(O=1-O,y&&(O-=y/a)):v==="mirror"&&(j=s)),M=ho(0,1,O)*a}const H=P?{done:!1,value:h[0]}:j.next(M);o&&(H.value=o(H.value));let{done:$}=H;!P&&c!==null&&($=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$);return R&&E!==gm&&(H.value=Gg(h,this.options,C,this.speed)),A&&A(H.value),R&&this.finish(),H}then(e,t){return this.finished.then(e,t)}get duration(){return jr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+jr(e)}get time(){return jr(this.currentTime)}set time(e){e=Ni(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(cr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=jr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=KR,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(cr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function hP(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const ca=n=>n*180/Math.PI,vm=n=>{const e=ca(Math.atan2(n[1],n[0]));return ym(e)},dP={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:vm,rotateZ:vm,skewX:n=>ca(Math.atan(n[1])),skewY:n=>ca(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},ym=n=>(n=n%360,n<0&&(n+=360),n),ow=vm,sw=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),aw=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),pP={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:sw,scaleY:aw,scale:n=>(sw(n)+aw(n))/2,rotateX:n=>ym(ca(Math.atan2(n[6],n[5]))),rotateY:n=>ym(ca(Math.atan2(-n[2],n[0]))),rotateZ:ow,rotate:ow,skewX:n=>ca(Math.atan(n[4])),skewY:n=>ca(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function xm(n){return n.includes("scale")?1:0}function _m(n,e){if(!n||n==="none")return xm(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=pP,i=t;else{const a=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=dP,i=a}if(!i)return xm(e);const o=r[e],s=i[1].split(",").map(gP);return typeof o=="function"?o(s):s[o]}const mP=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return _m(t,e)};function gP(n){return parseFloat(n.trim())}const el=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],tl=new Set(el),uw=n=>n===Ju||n===Be,vP=new Set(["x","y","z"]),yP=el.filter(n=>!vP.has(n));function xP(n){const e=[];return yP.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const pa={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>_m(e,"x"),y:(n,{transform:e})=>_m(e,"y")};pa.translateX=pa.x;pa.translateY=pa.y;const ma=new Set;let wm=!1,Em=!1,Am=!1;function wC(){if(Em){const n=Array.from(ma).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=xP(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([o,s])=>{r.getValue(o)?.set(s)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Em=!1,wm=!1,ma.forEach(n=>n.complete(Am)),ma.clear()}function EC(){ma.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Em=!0)})}function _P(){Am=!0,EC(),wC(),Am=!1}class Xg{constructor(e,t,r,i,o,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=o,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(ma.add(this),wm||(wm=!0,Pt.read(EC),Pt.resolveKeyframes(wC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const o=i?.get(),s=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const a=r.readValue(t,s);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=s),i&&o===void 0&&i.set(e[0])}hP(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ma.delete(this)}cancel(){this.state==="scheduled"&&(ma.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const wP=n=>n.startsWith("--");function EP(n,e,t){wP(e)?n.style.setProperty(e,t):n.style[e]=t}const AP=Lg(()=>window.ScrollTimeline!==void 0),CP={};function TP(n,e){const t=Lg(n);return()=>CP[e]??t()}const AC=TP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),pc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,lw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:pc([0,.65,.55,1]),circOut:pc([.55,0,1,.45]),backIn:pc([.31,.01,.66,-.59]),backOut:pc([.33,1.53,.69,.99])};function CC(n,e){if(n)return typeof n=="function"?AC()?yC(n,e):"ease-out":uC(n)?pc(n):Array.isArray(n)?n.map(t=>CC(t,e)||lw.easeOut):lw[n]}function IP(n,e,t,{delay:r=0,duration:i=300,repeat:o=0,repeatType:s="loop",ease:a="easeOut",times:c}={},f=void 0){const h={[e]:t};c&&(h.offset=c);const p=CC(a,i);Array.isArray(p)&&(h.easing=p);const v={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),n.animate(h,v)}function TC(n){return typeof n=="function"&&"applyToOptions"in n}function SP({type:n,...e}){return TC(n)&&AC()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class bP extends qg{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:o,allowFlatten:s=!1,finalKeyframe:a,onComplete:c}=e;this.isPseudoElement=!!o,this.allowFlatten=s,this.options=e,Mg(typeof e.type!="string");const f=SP(e);this.animation=IP(t,r,i,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const h=Gg(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):EP(t,r,h),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return jr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+jr(e)}get time(){return jr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ni(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&AP()?(this.animation.timeline=e,Hr):t(this)}}const IC={anticipate:iC,backInOut:rC,circInOut:sC};function RP(n){return n in IC}function PP(n){typeof n.ease=="string"&&RP(n.ease)&&(n.ease=IC[n.ease])}const cw=10;class NP extends bP{constructor(e){PP(e),_C(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:o,...s}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const a=new Kg({...s,autoplay:!1}),c=Ni(this.finishedTime??this.time);t.setWithVelocity(a.sample(c-cw).value,a.sample(c).value,cw),a.stop()}}const fw=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(vs.test(n)||n==="0")&&!n.startsWith("url("));function DP(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function OP(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],s=fw(i,e),a=fw(o,e);return!s||!a?!1:DP(n)||(t==="spring"||TC(t))&&r}function Cm(n){n.duration=0,n.type="keyframes"}const kP=new Set(["opacity","clipPath","filter","transform"]),MP=Lg(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function LP(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:o,type:s}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:f}=e.owner.getProps();return MP()&&t&&kP.has(t)&&(t!=="transform"||!f)&&!c&&!r&&i!=="mirror"&&o!==0&&s!=="inertia"}const VP=40;class FP extends qg{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:s="loop",keyframes:a,name:c,motionValue:f,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=cr.now();const v={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:o,repeatType:s,name:c,motionValue:f,element:h,...p},y=h?.KeyframeResolver||Xg;this.keyframeResolver=new y(a,(E,A,C)=>this.onKeyframesResolved(E,A,v,!C),c,f,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:o,type:s,velocity:a,delay:c,isHandoff:f,onUpdate:h}=r;this.resolvedAt=cr.now(),OP(e,o,s,a)||((po.instantAnimations||!c)&&h?.(Gg(e,r,t)),e[0]=e[e.length-1],Cm(r),r.repeat=0);const v={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>VP?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},y=!f&&LP(v)?new NP({...v,element:v.motionValue.owner.current}):new Kg(v);y.finished.then(()=>this.notifyFinished()).catch(Hr),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),_P()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const BP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function UP(n){const e=BP.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function SC(n,e,t=1){const[r,i]=UP(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const s=o.trim();return XA(s)?parseFloat(s):s}return jg(i)?SC(i,e,t+1):i}function Yg(n,e){return n?.[e]??n?.default??n}const bC=new Set(["width","height","top","left","right","bottom",...el]),jP={test:n=>n==="auto",parse:n=>n},RC=n=>e=>e.test(n),PC=[Ju,Be,Di,ts,DR,NR,jP],hw=n=>PC.find(RC(n));function zP(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||QA(n):!0}const HP=new Set(["brightness","contrast","saturate","opacity"]);function $P(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(zg)||[];if(!r)return n;const i=t.replace(r,"");let o=HP.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+i+")"}const WP=/\b([a-z-]*)\(.*?\)/gu,Tm={...vs,getAnimatableNone:n=>{const e=n.match(WP);return e?e.map($P).join(" "):n}},dw={...Ju,transform:Math.round},GP={rotate:ts,rotateX:ts,rotateY:ts,rotateZ:ts,scale:$h,scaleX:$h,scaleY:$h,scaleZ:$h,skew:ts,skewX:ts,skewY:ts,distance:Be,translateX:Be,translateY:Be,translateZ:Be,x:Be,y:Be,z:Be,perspective:Be,transformPerspective:Be,opacity:Fc,originX:ew,originY:ew,originZ:Be},Qg={borderWidth:Be,borderTopWidth:Be,borderRightWidth:Be,borderBottomWidth:Be,borderLeftWidth:Be,borderRadius:Be,radius:Be,borderTopLeftRadius:Be,borderTopRightRadius:Be,borderBottomRightRadius:Be,borderBottomLeftRadius:Be,width:Be,maxWidth:Be,height:Be,maxHeight:Be,top:Be,right:Be,bottom:Be,left:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,backgroundPositionX:Be,backgroundPositionY:Be,...GP,zIndex:dw,fillOpacity:Fc,strokeOpacity:Fc,numOctaves:dw},qP={...Qg,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:Tm,WebkitFilter:Tm},NC=n=>qP[n];function DC(n,e){let t=NC(n);return t!==Tm&&(t=vs),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const KP=new Set(["auto","none","0"]);function XP(n,e,t){let r=0,i;for(;r<n.length&&!i;){const o=n[r];typeof o=="string"&&!KP.has(o)&&Bc(o).values.length&&(i=n[r]),r++}if(i&&t)for(const o of e)n[o]=DC(t,i)}class YP extends Xg{constructor(e,t,r,i,o){super(e,t,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let f=e[c];if(typeof f=="string"&&(f=f.trim(),jg(f))){const h=SC(f,t.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!bC.has(r)||e.length!==2)return;const[i,o]=e,s=hw(i),a=hw(o);if(s!==a)if(uw(s)&&uw(a))for(let c=0;c<e.length;c++){const f=e[c];typeof f=="string"&&(e[c]=parseFloat(f))}else pa[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||zP(e[i]))&&r.push(i);r.length&&XP(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=pa[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,s=r[o];r[o]=pa[t](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,c])=>{e.getValue(a).set(c)}),this.resolveNoneKeyframes()}}function QP(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=t?.[n]??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const OC=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function kC(n){return YA(n)&&"offsetHeight"in n}const pw=30,ZP=n=>!isNaN(parseFloat(n));class JP{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=cr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=cr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ZP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Vg);const r=this.events[e].add(t);return e==="change"?()=>{r(),Pt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=cr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>pw)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,pw);return ZA(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Uu(n,e){return new JP(n,e)}const{schedule:Zg}=lC(queueMicrotask,!1),ri={x:!1,y:!1};function MC(){return ri.x||ri.y}function e8(n){return n==="x"||n==="y"?ri[n]?null:(ri[n]=!0,()=>{ri[n]=!1}):ri.x||ri.y?null:(ri.x=ri.y=!0,()=>{ri.x=ri.y=!1})}function LC(n,e){const t=QP(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function mw(n){return!(n.pointerType==="touch"||MC())}function t8(n,e,t={}){const[r,i,o]=LC(n,t),s=a=>{if(!mw(a))return;const{target:c}=a,f=e(c,a);if(typeof f!="function"||!c)return;const h=p=>{mw(p)&&(f(p),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,i)};return r.forEach(a=>{a.addEventListener("pointerenter",s,i)}),o}const VC=(n,e)=>e?n===e?!0:VC(n,e.parentElement):!1,Jg=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,n8=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function r8(n){return n8.has(n.tagName)||n.tabIndex!==-1}const cd=new WeakSet;function gw(n){return e=>{e.key==="Enter"&&n(e)}}function T1(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const i8=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=gw(()=>{if(cd.has(t))return;T1(t,"down");const i=gw(()=>{T1(t,"up")}),o=()=>T1(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function vw(n){return Jg(n)&&!MC()}function o8(n,e,t={}){const[r,i,o]=LC(n,t),s=a=>{const c=a.currentTarget;if(!vw(a))return;cd.add(c);const f=e(c,a),h=(y,E)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",v),cd.has(c)&&cd.delete(c),vw(y)&&typeof f=="function"&&f(y,{success:E})},p=y=>{h(y,c===window||c===document||t.useGlobalTarget||VC(c,y.target))},v=y=>{h(y,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",v,i)};return r.forEach(a=>{(t.useGlobalTarget?window:a).addEventListener("pointerdown",s,i),kC(a)&&(a.addEventListener("focus",f=>i8(f,i)),!r8(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),o}function FC(n){return YA(n)&&"ownerSVGElement"in n}function s8(n){return FC(n)&&n.tagName==="svg"}const Hn=n=>!!(n&&n.getVelocity),a8=[...PC,Qt,vs],u8=n=>a8.find(RC(n)),ev=U.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function yw(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function l8(...n){return e=>{let t=!1;const r=n.map(i=>{const o=yw(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():yw(n[i],null)}}}}function c8(...n){return U.useCallback(l8(...n),n)}class f8 extends U.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=kC(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h8({children:n,isPresent:e,anchorX:t,root:r}){const i=U.useId(),o=U.useRef(null),s=U.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=U.useContext(ev),c=c8(o,n?.ref);return U.useInsertionEffect(()=>{const{width:f,height:h,top:p,left:v,right:y}=s.current;if(e||!o.current||!f||!h)return;const E=t==="left"?`left: ${v}`:`right: ${y}`;o.current.dataset.motionPopId=i;const A=document.createElement("style");a&&(A.nonce=a);const C=r??document.head;return C.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${h}px !important;
            ${E}px !important;
            top: ${p}px !important;
          }
        `),()=>{C.contains(A)&&C.removeChild(A)}},[e]),S.jsx(f8,{isPresent:e,childRef:o,sizeRef:s,children:U.cloneElement(n,{ref:c})})}const d8=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:s,anchorX:a,root:c})=>{const f=Ng(p8),h=U.useId();let p=!0,v=U.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:t,custom:i,onExitComplete:y=>{f.set(y,!0);for(const E of f.values())if(!E)return;r&&r()},register:y=>(f.set(y,!1),()=>f.delete(y))}),[t,f,r]);return o&&p&&(v={...v}),U.useMemo(()=>{f.forEach((y,E)=>f.set(E,!1))},[t]),U.useEffect(()=>{!t&&!f.size&&r&&r()},[t]),s==="popLayout"&&(n=S.jsx(h8,{isPresent:t,anchorX:a,root:c,children:n})),S.jsx(sp.Provider,{value:v,children:n})};function p8(){return new Map}function BC(n=!0){const e=U.useContext(sp);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,o=U.useId();U.useEffect(()=>{if(n)return i(o)},[n]);const s=U.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,s]:[!0]}const Wh=n=>n.key||"";function xw(n){const e=[];return U.Children.forEach(n,t=>{U.isValidElement(t)&&e.push(t)}),e}const Uc=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:s=!1,anchorX:a="left",root:c})=>{const[f,h]=BC(s),p=U.useMemo(()=>xw(n),[n]),v=s&&!f?[]:p.map(Wh),y=U.useRef(!0),E=U.useRef(p),A=Ng(()=>new Map),[C,N]=U.useState(p),[P,M]=U.useState(p);KA(()=>{y.current=!1,E.current=p;for(let $=0;$<P.length;$++){const R=Wh(P[$]);v.includes(R)?A.delete(R):A.get(R)!==!0&&A.set(R,!1)}},[P,v.length,v.join("-")]);const j=[];if(p!==C){let $=[...p];for(let R=0;R<P.length;R++){const I=P[R],D=Wh(I);v.includes(D)||($.splice(R,0,I),j.push(I))}return o==="wait"&&j.length&&($=j),M(xw($)),N(p),null}const{forceRender:H}=U.useContext(Pg);return S.jsx(S.Fragment,{children:P.map($=>{const R=Wh($),I=s&&!f?!1:p===P||v.includes(R),D=()=>{if(A.has(R))A.set(R,!0);else return;let O=!0;A.forEach(F=>{F||(O=!1)}),O&&(H?.(),M(E.current),s&&h?.(),r&&r())};return S.jsx(d8,{isPresent:I,initial:!y.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:c,onExitComplete:I?void 0:D,anchorX:a,children:$},R)})})},UC=U.createContext({strict:!1}),_w={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ju={};for(const n in _w)ju[n]={isEnabled:e=>_w[n].some(t=>!!e[t])};function m8(n){for(const e in n)ju[e]={...ju[e],...n[e]}}const g8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dd(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||g8.has(n)}let jC=n=>!Dd(n);function v8(n){typeof n=="function"&&(jC=e=>e.startsWith("on")?!Dd(e):n(e))}try{v8(require("@emotion/is-prop-valid").default)}catch{}function y8(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(jC(i)||t===!0&&Dd(i)||!e&&!Dd(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const ap=U.createContext({});function up(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function jc(n){return typeof n=="string"||Array.isArray(n)}const tv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nv=["initial",...tv];function lp(n){return up(n.animate)||nv.some(e=>jc(n[e]))}function zC(n){return!!(lp(n)||n.variants)}function x8(n,e){if(lp(n)){const{initial:t,animate:r}=n;return{initial:t===!1||jc(t)?t:void 0,animate:jc(r)?r:void 0}}return n.inherit!==!1?e:{}}function _8(n){const{initial:e,animate:t}=x8(n,U.useContext(ap));return U.useMemo(()=>({initial:e,animate:t}),[ww(e),ww(t)])}function ww(n){return Array.isArray(n)?n.join(" "):n}const zc={};function w8(n){for(const e in n)zc[e]=n[e],Ug(e)&&(zc[e].isCSSVariable=!0)}function HC(n,{layout:e,layoutId:t}){return tl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!zc[n]||n==="opacity")}const E8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},A8=el.length;function C8(n,e,t){let r="",i=!0;for(let o=0;o<A8;o++){const s=el[o],a=n[s];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(s.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||t){const f=OC(a,Qg[s]);if(!c){i=!1;const h=E8[s]||s;r+=`${h}(${f}) `}t&&(e[s]=f)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function rv(n,e,t){const{style:r,vars:i,transformOrigin:o}=n;let s=!1,a=!1;for(const c in e){const f=e[c];if(tl.has(c)){s=!0;continue}else if(Ug(c)){i[c]=f;continue}else{const h=OC(f,Qg[c]);c.startsWith("origin")?(a=!0,o[c]=h):r[c]=h}}if(e.transform||(s||t?r.transform=C8(e,n.transform,t):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:f="50%",originZ:h=0}=o;r.transformOrigin=`${c} ${f} ${h}`}}const iv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $C(n,e,t){for(const r in e)!Hn(e[r])&&!HC(r,t)&&(n[r]=e[r])}function T8({transformTemplate:n},e){return U.useMemo(()=>{const t=iv();return rv(t,e,n),Object.assign({},t.vars,t.style)},[e])}function I8(n,e){const t=n.style||{},r={};return $C(r,t,n),Object.assign(r,T8(n,e)),r}function S8(n,e){const t={},r=I8(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const b8={offset:"stroke-dashoffset",array:"stroke-dasharray"},R8={offset:"strokeDashoffset",array:"strokeDasharray"};function P8(n,e,t=1,r=0,i=!0){n.pathLength=1;const o=i?b8:R8;n[o.offset]=Be.transform(-r);const s=Be.transform(e),a=Be.transform(t);n[o.array]=`${s} ${a}`}function WC(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:s=0,...a},c,f,h){if(rv(n,a,f),c){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:v}=n;p.transform&&(v.transform=p.transform,delete p.transform),(v.transform||p.transformOrigin)&&(v.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),v.transform&&(v.transformBox=h?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),r!==void 0&&(p.scale=r),i!==void 0&&P8(p,i,o,s,!1)}const GC=()=>({...iv(),attrs:{}}),qC=n=>typeof n=="string"&&n.toLowerCase()==="svg";function N8(n,e,t,r){const i=U.useMemo(()=>{const o=GC();return WC(o,e,qC(r),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};$C(o,n.style,n),i.style={...o,...i.style}}return i}const D8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ov(n){return typeof n!="string"||n.includes("-")?!1:!!(D8.indexOf(n)>-1||/[A-Z]/u.test(n))}function O8(n,e,t,{latestValues:r},i,o=!1){const a=(ov(n)?N8:S8)(e,r,i,n),c=y8(e,typeof n=="string",o),f=n!==U.Fragment?{...c,...a,ref:t}:{},{children:h}=e,p=U.useMemo(()=>Hn(h)?h.get():h,[h]);return U.createElement(n,{...f,children:p})}function Ew(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function sv(n,e,t,r){if(typeof e=="function"){const[i,o]=Ew(r);e=e(t!==void 0?t:n.custom,i,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,o]=Ew(r);e=e(t!==void 0?t:n.custom,i,o)}return e}function fd(n){return Hn(n)?n.get():n}function k8({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:M8(t,r,i,n),renderState:e()}}function M8(n,e,t,r){const i={},o=r(n,{});for(const v in o)i[v]=fd(o[v]);let{initial:s,animate:a}=n;const c=lp(n),f=zC(n);e&&f&&!c&&n.inherit!==!1&&(s===void 0&&(s=e.initial),a===void 0&&(a=e.animate));let h=t?t.initial===!1:!1;h=h||s===!1;const p=h?a:s;if(p&&typeof p!="boolean"&&!up(p)){const v=Array.isArray(p)?p:[p];for(let y=0;y<v.length;y++){const E=sv(n,v[y]);if(E){const{transitionEnd:A,transition:C,...N}=E;for(const P in N){let M=N[P];if(Array.isArray(M)){const j=h?M.length-1:0;M=M[j]}M!==null&&(i[P]=M)}for(const P in A)i[P]=A[P]}}}return i}const KC=n=>(e,t)=>{const r=U.useContext(ap),i=U.useContext(sp),o=()=>k8(n,e,r,i);return t?o():Ng(o)};function av(n,e,t){const{style:r}=n,i={};for(const o in r)(Hn(r[o])||e.style&&Hn(e.style[o])||HC(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(i[o]=r[o]);return i}const L8=KC({scrapeMotionValuesFromProps:av,createRenderState:iv});function XC(n,e,t){const r=av(n,e,t);for(const i in n)if(Hn(n[i])||Hn(e[i])){const o=el.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=n[i]}return r}const V8=KC({scrapeMotionValuesFromProps:XC,createRenderState:GC}),F8=Symbol.for("motionComponentSymbol");function Cu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function B8(n,e,t){return U.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Cu(t)&&(t.current=r))},[e])}const uv=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),U8="framerAppearId",YC="data-"+uv(U8),QC=U.createContext({});function j8(n,e,t,r,i){const{visualElement:o}=U.useContext(ap),s=U.useContext(UC),a=U.useContext(sp),c=U.useContext(ev).reducedMotion,f=U.useRef(null);r=r||s.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:o,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:c}));const h=f.current,p=U.useContext(QC);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&z8(f.current,t,i,p);const v=U.useRef(!1);U.useInsertionEffect(()=>{h&&v.current&&h.update(t,a)});const y=t[YC],E=U.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return KA(()=>{h&&(v.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),E.current&&h.animationState&&h.animationState.animateChanges())}),U.useEffect(()=>{h&&(!E.current&&h.animationState&&h.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),E.current=!1),h.enteringChildren=void 0)}),h}function z8(n,e,t,r){const{layoutId:i,layout:o,drag:s,dragConstraints:a,layoutScroll:c,layoutRoot:f,layoutCrossfade:h}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:ZC(n.parent)),n.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!s||a&&Cu(a),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:c,layoutRoot:f})}function ZC(n){if(n)return n.options.allowProjection!==!1?n.projection:ZC(n.parent)}function I1(n,{forwardMotionProps:e=!1}={},t,r){t&&m8(t);const i=ov(n)?V8:L8;function o(a,c){let f;const h={...U.useContext(ev),...a,layoutId:H8(a)},{isStatic:p}=h,v=_8(a),y=i(a,p);if(!p&&Dg){$8();const E=W8(h);f=E.MeasureLayout,v.visualElement=j8(n,y,h,r,E.ProjectionNode)}return S.jsxs(ap.Provider,{value:v,children:[f&&v.visualElement?S.jsx(f,{visualElement:v.visualElement,...h}):null,O8(n,a,B8(y,v.visualElement,c),y,p,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const s=U.forwardRef(o);return s[F8]=n,s}function H8({layoutId:n}){const e=U.useContext(Pg).id;return e&&n!==void 0?e+"-"+n:n}function $8(n,e){U.useContext(UC).strict}function W8(n){const{drag:e,layout:t}=ju;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function G8(n,e){if(typeof Proxy>"u")return I1;const t=new Map,r=(o,s)=>I1(o,s,n,e),i=(o,s)=>r(o,s);return new Proxy(i,{get:(o,s)=>s==="create"?r:(t.has(s)||t.set(s,I1(s,void 0,n,e)),t.get(s))})}function JC({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function q8({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function K8(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function S1(n){return n===void 0||n===1}function Im({scale:n,scaleX:e,scaleY:t}){return!S1(n)||!S1(e)||!S1(t)}function sa(n){return Im(n)||eT(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function eT(n){return Aw(n.x)||Aw(n.y)}function Aw(n){return n&&n!=="0%"}function Od(n,e,t){const r=n-t,i=e*r;return t+i}function Cw(n,e,t,r,i){return i!==void 0&&(n=Od(n,i,r)),Od(n,t,r)+e}function Sm(n,e=0,t=1,r,i){n.min=Cw(n.min,e,t,r,i),n.max=Cw(n.max,e,t,r,i)}function tT(n,{x:e,y:t}){Sm(n.x,e.translate,e.scale,e.originPoint),Sm(n.y,t.translate,t.scale,t.originPoint)}const Tw=.999999999999,Iw=1.0000000000001;function X8(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let o,s;for(let a=0;a<i;a++){o=t[a],s=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Iu(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,tT(n,s)),r&&sa(o.latestValues)&&Iu(n,o.latestValues))}e.x<Iw&&e.x>Tw&&(e.x=1),e.y<Iw&&e.y>Tw&&(e.y=1)}function Tu(n,e){n.min=n.min+e,n.max=n.max+e}function Sw(n,e,t,r,i=.5){const o=Ot(n.min,n.max,i);Sm(n,e,t,o,r)}function Iu(n,e){Sw(n.x,e.x,e.scaleX,e.scale,e.originX),Sw(n.y,e.y,e.scaleY,e.scale,e.originY)}function nT(n,e){return JC(K8(n.getBoundingClientRect(),e))}function Y8(n,e,t){const r=nT(n,t),{scroll:i}=e;return i&&(Tu(r.x,i.offset.x),Tu(r.y,i.offset.y)),r}const bw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Su=()=>({x:bw(),y:bw()}),Rw=()=>({min:0,max:0}),$t=()=>({x:Rw(),y:Rw()}),bm={current:null},rT={current:!1};function Q8(){if(rT.current=!0,!!Dg)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>bm.current=n.matches;n.addEventListener("change",e),e()}else bm.current=!1}const Z8=new WeakMap;function J8(n,e,t){for(const r in e){const i=e[r],o=t[r];if(Hn(i))n.addValue(r,i);else if(Hn(o))n.addValue(r,Uu(i,{owner:n}));else if(o!==i)if(n.hasValue(r)){const s=n.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=n.getStaticValue(r);n.addValue(r,Uu(s!==void 0?s:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const Pw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class eN{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=cr.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Pt.render(this.render,!1,!0))};const{latestValues:c,renderState:f}=s;this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!o,this.isControllingVariants=lp(t),this.isVariantNode=zC(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in p){const y=p[v];c[v]!==void 0&&Hn(y)&&y.set(c[v])}}mount(e){this.current=e,Z8.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),rT.current||Q8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:bm.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),gs(this.notifyUpdate),gs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=tl.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&Pt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ju){const t=ju[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$t()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Pw.length;r++){const i=Pw[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,s=e[o];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=J8(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Uu(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(XA(r)||QA(r))?r=parseFloat(r):!u8(r)&&vs.test(t)&&(r=DC(e,t)),this.setBaseTarget(e,Hn(r)?r.get():r)),Hn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const o=sv(this.props,t,this.presenceContext?.custom);o&&(r=o[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Hn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Vg),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Zg.render(this.render)}}class iT extends eN{constructor(){super(...arguments),this.KeyframeResolver=YP}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Hn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function oT(n,{style:e,vars:t},r,i){const o=n.style;let s;for(s in e)o[s]=e[s];i?.applyProjectionStyles(o,r);for(s in t)o.setProperty(s,t[s])}function tN(n){return window.getComputedStyle(n)}class nN extends iT{constructor(){super(...arguments),this.type="html",this.renderInstance=oT}readValueFromInstance(e,t){if(tl.has(t))return this.projection?.isProjecting?xm(t):mP(e,t);{const r=tN(e),i=(Ug(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return nT(e,t)}build(e,t,r){rv(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return av(e,t,r)}}const sT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function rN(n,e,t,r){oT(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(sT.has(i)?i:uv(i),e.attrs[i])}class iN extends iT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$t}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(tl.has(t)){const r=NC(t);return r&&r.default||0}return t=sT.has(t)?t:uv(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return XC(e,t,r)}build(e,t,r){WC(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){rN(e,t,r,i)}mount(e){this.isSVGTag=qC(e.tagName),super.mount(e)}}const oN=(n,e)=>ov(n)?new iN(e):new nN(e,{allowProjection:n!==U.Fragment});function ku(n,e,t){const r=n.getProps();return sv(r,e,t!==void 0?t:r.custom,n)}const Rm=n=>Array.isArray(n);function sN(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Uu(t))}function aN(n){return Rm(n)?n[n.length-1]||0:n}function uN(n,e){const t=ku(n,e);let{transitionEnd:r={},transition:i={},...o}=t||{};o={...o,...r};for(const s in o){const a=aN(o[s]);sN(n,s,a)}}function lN(n){return!!(Hn(n)&&n.add)}function Pm(n,e){const t=n.getValue("willChange");if(lN(t))return t.add(e);if(!t&&po.WillChange){const r=new po.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function aT(n){return n.props[YC]}const cN=n=>n!==null;function fN(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(cN),o=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[o]}const hN={type:"spring",stiffness:500,damping:25,restSpeed:10},dN=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),pN={type:"keyframes",duration:.8},mN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},gN=(n,{keyframes:e})=>e.length>2?pN:tl.has(n)?n.startsWith("scale")?dN(e[1]):hN:mN;function vN({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:a,from:c,elapsed:f,...h}){return!!Object.keys(h).length}const lv=(n,e,t,r={},i,o)=>s=>{const a=Yg(r,n)||{},c=a.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Ni(c);const h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-f,onUpdate:v=>{e.set(v),a.onUpdate&&a.onUpdate(v)},onComplete:()=>{s(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:o?void 0:i};vN(a)||Object.assign(h,gN(n,h)),h.duration&&(h.duration=Ni(h.duration)),h.repeatDelay&&(h.repeatDelay=Ni(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Cm(h),h.delay===0&&(p=!0)),(po.instantAnimations||po.skipAnimations)&&(p=!0,Cm(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,p&&!o&&e.get()!==void 0){const v=fN(h.keyframes,a);if(v!==void 0){Pt.update(()=>{h.onUpdate(v),h.onComplete()});return}}return a.isSync?new Kg(h):new FP(h)};function yN({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function uT(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:s,...a}=e;r&&(o=r);const c=[],f=i&&n.animationState&&n.animationState.getState()[i];for(const h in a){const p=n.getValue(h,n.latestValues[h]??null),v=a[h];if(v===void 0||f&&yN(f,h))continue;const y={delay:t,...Yg(o||{},h)},E=p.get();if(E!==void 0&&!p.isAnimating&&!Array.isArray(v)&&v===E&&!y.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const N=aT(n);if(N){const P=window.MotionHandoffAnimation(N,h,Pt);P!==null&&(y.startTime=P,A=!0)}}Pm(n,h),p.start(lv(h,p,v,n.shouldReduceMotion&&bC.has(h)?{type:!1}:y,n,A));const C=p.animation;C&&c.push(C)}return s&&Promise.all(c).then(()=>{Pt.update(()=>{s&&uN(n,s)})}),c}function lT(n,e,t,r=0,i=1){const o=Array.from(n).sort((f,h)=>f.sortNodePosition(h)).indexOf(e),s=n.size,a=(s-1)*r;return typeof t=="function"?t(o,s):i===1?o*r:a-o*r}function Nm(n,e,t={}){const r=ku(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const o=r?()=>Promise.all(uT(n,r,t)):()=>Promise.resolve(),s=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:h,staggerDirection:p}=i;return xN(n,e,c,f,h,p,t)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,f]=a==="beforeChildren"?[o,s]:[s,o];return c().then(()=>f())}else return Promise.all([o(),s(t.delay)])}function xN(n,e,t=0,r=0,i=0,o=1,s){const a=[];for(const c of n.variantChildren)c.notify("AnimationStart",e),a.push(Nm(c,e,{...s,delay:t+(typeof r=="function"?0:r)+lT(n.variantChildren,c,r,i,o)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(a)}function _N(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>Nm(n,o,t));r=Promise.all(i)}else if(typeof e=="string")r=Nm(n,e,t);else{const i=typeof e=="function"?ku(n,e,t.custom):e;r=Promise.all(uT(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function cT(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const wN=nv.length;function fT(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?fT(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<wN;t++){const r=nv[t],i=n.props[r];(jc(i)||i===!1)&&(e[r]=i)}return e}const EN=[...tv].reverse(),AN=tv.length;function CN(n){return e=>Promise.all(e.map(({animation:t,options:r})=>_N(n,t,r)))}function TN(n){let e=CN(n),t=Nw(),r=!0;const i=c=>(f,h)=>{const p=ku(n,h,c==="exit"?n.presenceContext?.custom:void 0);if(p){const{transition:v,transitionEnd:y,...E}=p;f={...f,...E,...y}}return f};function o(c){e=c(n)}function s(c){const{props:f}=n,h=fT(n.parent)||{},p=[],v=new Set;let y={},E=1/0;for(let C=0;C<AN;C++){const N=EN[C],P=t[N],M=f[N]!==void 0?f[N]:h[N],j=jc(M),H=N===c?P.isActive:null;H===!1&&(E=C);let $=M===h[N]&&M!==f[N]&&j;if($&&r&&n.manuallyAnimateOnMount&&($=!1),P.protectedKeys={...y},!P.isActive&&H===null||!M&&!P.prevProp||up(M)||typeof M=="boolean")continue;const R=IN(P.prevProp,M);let I=R||N===c&&P.isActive&&!$&&j||C>E&&j,D=!1;const O=Array.isArray(M)?M:[M];let F=O.reduce(i(N),{});H===!1&&(F={});const{prevResolvedValues:B={}}=P,L={...B,...F},te=xe=>{I=!0,v.has(xe)&&(D=!0,v.delete(xe)),P.needsAnimating[xe]=!0;const Z=n.getValue(xe);Z&&(Z.liveStyle=!1)};for(const xe in L){const Z=F[xe],me=B[xe];if(y.hasOwnProperty(xe))continue;let de=!1;Rm(Z)&&Rm(me)?de=!cT(Z,me):de=Z!==me,de?Z!=null?te(xe):v.add(xe):Z!==void 0&&v.has(xe)?te(xe):P.protectedKeys[xe]=!0}P.prevProp=M,P.prevResolvedValues=F,P.isActive&&(y={...y,...F}),r&&n.blockInitialAnimation&&(I=!1);const be=$&&R;I&&(!be||D)&&p.push(...O.map(xe=>{const Z={type:N};if(typeof xe=="string"&&r&&!be&&n.manuallyAnimateOnMount&&n.parent){const{parent:me}=n,de=ku(me,xe);if(me.enteringChildren&&de){const{delayChildren:q}=de.transition||{};Z.delay=lT(me.enteringChildren,n,q)}}return{animation:xe,options:Z}}))}if(v.size){const C={};if(typeof f.initial!="boolean"){const N=ku(n,Array.isArray(f.initial)?f.initial[0]:f.initial);N&&N.transition&&(C.transition=N.transition)}v.forEach(N=>{const P=n.getBaseTarget(N),M=n.getValue(N);M&&(M.liveStyle=!0),C[N]=P??null}),p.push({animation:C})}let A=!!p.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(A=!1),r=!1,A?e(p):Promise.resolve()}function a(c,f){if(t[c].isActive===f)return Promise.resolve();n.variantChildren?.forEach(p=>p.animationState?.setActive(c,f)),t[c].isActive=f;const h=s(c);for(const p in t)t[p].protectedKeys={};return h}return{animateChanges:s,setActive:a,setAnimateFunction:o,getState:()=>t,reset:()=>{t=Nw()}}}function IN(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!cT(e,n):!1}function na(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Nw(){return{animate:na(!0),whileInView:na(),whileHover:na(),whileTap:na(),whileDrag:na(),whileFocus:na(),exit:na()}}class Ts{constructor(e){this.isMounted=!1,this.node=e}update(){}}class SN extends Ts{constructor(e){super(e),e.animationState||(e.animationState=TN(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();up(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let bN=0;class RN extends Ts{constructor(){super(...arguments),this.id=bN++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const PN={animation:{Feature:SN},exit:{Feature:RN}};function Hc(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function af(n){return{point:{x:n.pageX,y:n.pageY}}}const NN=n=>e=>Jg(e)&&n(e,af(e));function Tc(n,e,t,r){return Hc(n,e,NN(t),r)}const hT=1e-4,DN=1-hT,ON=1+hT,dT=.01,kN=0-dT,MN=0+dT;function Zn(n){return n.max-n.min}function LN(n,e,t){return Math.abs(n-e)<=t}function Dw(n,e,t,r=.5){n.origin=r,n.originPoint=Ot(e.min,e.max,n.origin),n.scale=Zn(t)/Zn(e),n.translate=Ot(t.min,t.max,n.origin)-n.originPoint,(n.scale>=DN&&n.scale<=ON||isNaN(n.scale))&&(n.scale=1),(n.translate>=kN&&n.translate<=MN||isNaN(n.translate))&&(n.translate=0)}function Ic(n,e,t,r){Dw(n.x,e.x,t.x,r?r.originX:void 0),Dw(n.y,e.y,t.y,r?r.originY:void 0)}function Ow(n,e,t){n.min=t.min+e.min,n.max=n.min+Zn(e)}function VN(n,e,t){Ow(n.x,e.x,t.x),Ow(n.y,e.y,t.y)}function kw(n,e,t){n.min=e.min-t.min,n.max=n.min+Zn(e)}function Sc(n,e,t){kw(n.x,e.x,t.x),kw(n.y,e.y,t.y)}function Vr(n){return[n("x"),n("y")]}const pT=({current:n})=>n?n.ownerDocument.defaultView:null,Mw=(n,e)=>Math.abs(n-e);function FN(n,e){const t=Mw(n.x,e.x),r=Mw(n.y,e.y);return Math.sqrt(t**2+r**2)}class mT{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=R1(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,E=FN(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!E)return;const{point:A}=v,{timestamp:C}=Sn;this.history.push({...A,timestamp:C});const{onStart:N,onMove:P}=this.handlers;y||(N&&N(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,v)},this.handlePointerMove=(v,y)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=b1(y,this.transformPagePoint),Pt.update(this.updatePoint,!0)},this.handlePointerUp=(v,y)=>{this.end();const{onEnd:E,onSessionEnd:A,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=R1(v.type==="pointercancel"?this.lastMoveEventInfo:b1(y,this.transformPagePoint),this.history);this.startEvent&&E&&E(v,N),A&&A(v,N)},!Jg(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const a=af(e),c=b1(a,this.transformPagePoint),{point:f}=c,{timestamp:h}=Sn;this.history=[{...f,timestamp:h}];const{onSessionStart:p}=t;p&&p(e,R1(c,this.history)),this.removeListeners=rf(Tc(this.contextWindow,"pointermove",this.handlePointerMove),Tc(this.contextWindow,"pointerup",this.handlePointerUp),Tc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),gs(this.updatePoint)}}function b1(n,e){return e?{point:e(n.point)}:n}function Lw(n,e){return{x:n.x-e.x,y:n.y-e.y}}function R1({point:n},e){return{point:n,delta:Lw(n,gT(e)),offset:Lw(n,BN(e)),velocity:UN(e,.1)}}function BN(n){return n[0]}function gT(n){return n[n.length-1]}function UN(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=gT(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Ni(e)));)t--;if(!r)return{x:0,y:0};const o=jr(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function jN(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Ot(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Ot(t,n,r.max):Math.min(n,t)),n}function Vw(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function zN(n,{top:e,left:t,bottom:r,right:i}){return{x:Vw(n.x,t,i),y:Vw(n.y,e,r)}}function Fw(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function HN(n,e){return{x:Fw(n.x,e.x),y:Fw(n.y,e.y)}}function $N(n,e){let t=.5;const r=Zn(n),i=Zn(e);return i>r?t=Vc(e.min,e.max-r,n.min):r>i&&(t=Vc(n.min,n.max-i,e.min)),ho(0,1,t)}function WN(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Dm=.35;function GN(n=Dm){return n===!1?n=0:n===!0&&(n=Dm),{x:Bw(n,"left","right"),y:Bw(n,"top","bottom")}}function Bw(n,e,t){return{min:Uw(n,e),max:Uw(n,t)}}function Uw(n,e){return typeof n=="number"?n:n[e]||0}const qN=new WeakMap;class KN{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$t(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=p=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(af(p).point)},s=(p,v)=>{const{drag:y,dragPropagation:E,onDragStart:A}=this.getProps();if(y&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=e8(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vr(N=>{let P=this.getAxisMotionValue(N).get()||0;if(Di.test(P)){const{projection:M}=this.visualElement;if(M&&M.layout){const j=M.layout.layoutBox[N];j&&(P=Zn(j)*(parseFloat(P)/100))}}this.originPoint[N]=P}),A&&Pt.postRender(()=>A(p,v)),Pm(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},a=(p,v)=>{this.latestPointerEvent=p,this.latestPanInfo=v;const{dragPropagation:y,dragDirectionLock:E,onDirectionLock:A,onDrag:C}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:N}=v;if(E&&this.currentDirection===null){this.currentDirection=XN(N),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",v.point,N),this.updateAxis("y",v.point,N),this.visualElement.render(),C&&C(p,v)},c=(p,v)=>{this.latestPointerEvent=p,this.latestPanInfo=v,this.stop(p,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Vr(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new mT(e,{onSessionStart:o,onStart:s,onMove:a,onSessionEnd:c,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:pT(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&Pt.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Gh(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=jN(s,this.constraints[e],this.elastic[e])),o.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Cu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=zN(r.layoutBox,e):this.constraints=!1,this.elastic=GN(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Vr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=WN(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Cu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=Y8(r,i.root,this.visualElement.getTransformPagePoint());let s=HN(i.layout.layoutBox,o);if(t){const a=t(q8(s));this.hasMutatedConstraints=!!a,a&&(s=JC(a))}return s}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},f=Vr(h=>{if(!Gh(h,t,this.currentDirection))return;let p=c&&c[h]||{};s&&(p={min:0,max:0});const v=i?200:1e6,y=i?40:1e7,E={type:"inertia",velocity:r?e[h]:0,bounceStiffness:v,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...o,...p};return this.startAxisValueAnimation(h,E)});return Promise.all(f).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Pm(this.visualElement,e),r.start(lv(e,r,0,t,this.visualElement,!1))}stopAnimation(){Vr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Vr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Vr(t=>{const{drag:r}=this.getProps();if(!Gh(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(t);if(i&&i.layout){const{min:s,max:a}=i.layout.layoutBox[t];o.set(e[t]-Ot(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Cu(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Vr(s=>{const a=this.getAxisMotionValue(s);if(a&&this.constraints!==!1){const c=a.get();i[s]=$N({min:c,max:c},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Vr(s=>{if(!Gh(s,e,null))return;const a=this.getAxisMotionValue(s),{min:c,max:f}=this.constraints[s];a.set(Ot(c,f,i[s]))})}addListeners(){if(!this.visualElement.current)return;qN.set(this.visualElement,this);const e=this.visualElement.current,t=Tc(e,"pointerdown",c=>{const{drag:f,dragListener:h=!0}=this.getProps();f&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Cu(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Pt.read(r);const s=Hc(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(Vr(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=c[h].translate,p.set(p.get()+c[h].translate))}),this.visualElement.render())}));return()=>{s(),t(),o(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=Dm,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:a}}}function Gh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function XN(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class YN extends Ts{constructor(e){super(e),this.removeGroupControls=Hr,this.removeListeners=Hr,this.controls=new KN(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Hr}unmount(){this.removeGroupControls(),this.removeListeners()}}const jw=n=>(e,t)=>{n&&Pt.postRender(()=>n(e,t))};class QN extends Ts{constructor(){super(...arguments),this.removePointerDownListener=Hr}onPointerDown(e){this.session=new mT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:pT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:jw(e),onStart:jw(t),onMove:r,onEnd:(o,s)=>{delete this.session,i&&Pt.postRender(()=>i(o,s))}}}mount(){this.removePointerDownListener=Tc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zw(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const lc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Be.test(n))n=parseFloat(n);else return n;const t=zw(n,e.target.x),r=zw(n,e.target.y);return`${t}% ${r}%`}},ZN={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=vs.parse(n);if(i.length>5)return r;const o=vs.createTransformer(n),s=typeof i[0]!="number"?1:0,a=t.x.scale*e.x,c=t.y.scale*e.y;i[0+s]/=a,i[1+s]/=c;const f=Ot(a,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=f),typeof i[3+s]=="number"&&(i[3+s]/=f),o(i)}};let P1=!1;class JN extends U.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;w8(e6),o&&(t.group&&t.group.add(o),r&&r.register&&i&&r.register(o),P1&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),hd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:o}=this.props,{projection:s}=r;return s&&(s.isPresent=o,P1=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==o?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||Pt.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Zg.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;P1=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function vT(n){const[e,t]=BC(),r=U.useContext(Pg);return S.jsx(JN,{...n,layoutGroup:r,switchLayoutGroup:U.useContext(QC),isPresent:e,safeToRemove:t})}const e6={borderRadius:{...lc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:lc,borderTopRightRadius:lc,borderBottomLeftRadius:lc,borderBottomRightRadius:lc,boxShadow:ZN};function t6(n,e,t){const r=Hn(n)?n:Uu(n);return r.start(lv("",r,e,t)),r.animation}const n6=(n,e)=>n.depth-e.depth;class r6{constructor(){this.children=[],this.isDirty=!1}add(e){Og(this.children,e),this.isDirty=!0}remove(e){kg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(n6),this.isDirty=!1,this.children.forEach(e)}}function i6(n,e){const t=cr.now(),r=({timestamp:i})=>{const o=i-t;o>=e&&(gs(r),n(o-e))};return Pt.setup(r,!0),()=>gs(r)}const yT=["TopLeft","TopRight","BottomLeft","BottomRight"],o6=yT.length,Hw=n=>typeof n=="string"?parseFloat(n):n,$w=n=>typeof n=="number"||Be.test(n);function s6(n,e,t,r,i,o){i?(n.opacity=Ot(0,t.opacity??1,a6(r)),n.opacityExit=Ot(e.opacity??1,0,u6(r))):o&&(n.opacity=Ot(e.opacity??1,t.opacity??1,r));for(let s=0;s<o6;s++){const a=`border${yT[s]}Radius`;let c=Ww(e,a),f=Ww(t,a);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||$w(c)===$w(f)?(n[a]=Math.max(Ot(Hw(c),Hw(f),r),0),(Di.test(f)||Di.test(c))&&(n[a]+="%")):n[a]=f}(e.rotate||t.rotate)&&(n.rotate=Ot(e.rotate||0,t.rotate||0,r))}function Ww(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const a6=xT(0,.5,oC),u6=xT(.5,.95,Hr);function xT(n,e,t){return r=>r<n?0:r>e?1:t(Vc(n,e,r))}function Gw(n,e){n.min=e.min,n.max=e.max}function Lr(n,e){Gw(n.x,e.x),Gw(n.y,e.y)}function qw(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function Kw(n,e,t,r,i){return n-=e,n=Od(n,1/t,r),i!==void 0&&(n=Od(n,1/i,r)),n}function l6(n,e=0,t=1,r=.5,i,o=n,s=n){if(Di.test(e)&&(e=parseFloat(e),e=Ot(s.min,s.max,e/100)-s.min),typeof e!="number")return;let a=Ot(o.min,o.max,r);n===o&&(a-=e),n.min=Kw(n.min,e,t,a,i),n.max=Kw(n.max,e,t,a,i)}function Xw(n,e,[t,r,i],o,s){l6(n,e[t],e[r],e[i],e.scale,o,s)}const c6=["x","scaleX","originX"],f6=["y","scaleY","originY"];function Yw(n,e,t,r){Xw(n.x,e,c6,t?t.x:void 0,r?r.x:void 0),Xw(n.y,e,f6,t?t.y:void 0,r?r.y:void 0)}function Qw(n){return n.translate===0&&n.scale===1}function _T(n){return Qw(n.x)&&Qw(n.y)}function Zw(n,e){return n.min===e.min&&n.max===e.max}function h6(n,e){return Zw(n.x,e.x)&&Zw(n.y,e.y)}function Jw(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function wT(n,e){return Jw(n.x,e.x)&&Jw(n.y,e.y)}function e2(n){return Zn(n.x)/Zn(n.y)}function t2(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class d6{constructor(){this.members=[]}add(e){Og(this.members,e),e.scheduleRender()}remove(e){if(kg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function p6(n,e,t){let r="";const i=n.x.translate/e.x,o=n.y.translate/e.y,s=t?.z||0;if((i||o||s)&&(r=`translate3d(${i}px, ${o}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:h,rotateX:p,rotateY:v,skewX:y,skewY:E}=t;f&&(r=`perspective(${f}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),v&&(r+=`rotateY(${v}deg) `),y&&(r+=`skewX(${y}deg) `),E&&(r+=`skewY(${E}deg) `)}const a=n.x.scale*e.x,c=n.y.scale*e.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const N1=["","X","Y","Z"],m6=1e3;let g6=0;function D1(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function ET(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=aT(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Pt,!(i||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&ET(r)}function AT({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},a=e?.()){this.id=g6++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(x6),this.nodes.forEach(A6),this.nodes.forEach(C6),this.nodes.forEach(_6)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new r6)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new Vg),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const c=this.eventHandlers.get(s);c&&c.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=FC(s)&&!s8(s),this.instance=s;const{layoutId:a,layout:c,visualElement:f}=this.options;if(f&&!f.current&&f.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||a)&&(this.isLayoutDirty=!0),n){let h,p=0;const v=()=>this.root.updateBlockedByResize=!1;Pt.read(()=>{p=window.innerWidth}),n(s,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,h&&h(),h=i6(v,250),hd.hasAnimatedSinceResize&&(hd.hasAnimatedSinceResize=!1,this.nodes.forEach(i2)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&f&&(a||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:v,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||f.getDefaultTransition()||R6,{onLayoutAnimationStart:A,onLayoutAnimationComplete:C}=f.getProps(),N=!this.targetLayout||!wT(this.targetLayout,y),P=!p&&v;if(this.options.layoutRoot||this.resumeFrom||P||p&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...Yg(E,"layout"),onPlay:A,onComplete:C};(f.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(h,P)}else p||i2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),gs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(T6),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ET(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(n2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(r2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(E6),this.nodes.forEach(v6),this.nodes.forEach(y6)):this.nodes.forEach(r2),this.clearAllSnapshots();const a=cr.now();Sn.delta=ho(0,1e3/60,a-Sn.timestamp),Sn.timestamp=a,Sn.isProcessing=!0,_1.update.process(Sn),_1.preRender.process(Sn),_1.render.process(Sn),Sn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Zg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(w6),this.sharedNodes.forEach(I6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Zn(this.snapshot.measuredBox.x)&&!Zn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$t(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!_T(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,h=f!==this.prevTransformTemplateValue;s&&this.instance&&(a||sa(this.latestValues)||h)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return s&&(c=this.removeTransform(c)),P6(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return $t();const a=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(N6))){const{scroll:f}=this.root;f&&(Tu(a.x,f.offset.x),Tu(a.y,f.offset.y))}return a}removeElementScroll(s){const a=$t();if(Lr(a,s),this.scroll?.wasRoot)return a;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:h,options:p}=f;f!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Lr(a,s),Tu(a.x,h.offset.x),Tu(a.y,h.offset.y))}return a}applyTransform(s,a=!1){const c=$t();Lr(c,s);for(let f=0;f<this.path.length;f++){const h=this.path[f];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Iu(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),sa(h.latestValues)&&Iu(c,h.latestValues)}return sa(this.latestValues)&&Iu(c,this.latestValues),c}removeTransform(s){const a=$t();Lr(a,s);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!sa(f.latestValues))continue;Im(f.latestValues)&&f.updateSnapshot();const h=$t(),p=f.measurePageBox();Lr(h,p),Yw(a,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,h)}return sa(this.latestValues)&&Yw(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Sn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=Sn.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$t(),this.relativeTargetOrigin=$t(),Sc(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$t(),this.targetWithTransforms=$t()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),VN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Lr(this.target,this.layout.layoutBox),tT(this.target,this.targetDelta)):Lr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$t(),this.relativeTargetOrigin=$t(),Sc(this.relativeTargetOrigin,this.target,v.target),Lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Im(this.parent.latestValues)||eT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const s=this.getLead(),a=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Sn.timestamp&&(c=!1),c)return;const{layout:f,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||h))return;Lr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,v=this.treeScale.y;X8(this.layoutCorrected,this.treeScale,this.path,a),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=$t());const{target:y}=s;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(qw(this.prevProjectionDelta.x,this.projectionDelta.x),qw(this.prevProjectionDelta.y,this.projectionDelta.y)),Ic(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==v||!t2(this.projectionDelta.x,this.prevProjectionDelta.x)||!t2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Su(),this.projectionDelta=Su(),this.projectionDeltaWithTransform=Su()}setAnimationOrigin(s,a=!1){const c=this.snapshot,f=c?c.latestValues:{},h={...this.latestValues},p=Su();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const v=$t(),y=c?c.source:void 0,E=this.layout?this.layout.source:void 0,A=y!==E,C=this.getStack(),N=!C||C.members.length<=1,P=!!(A&&!N&&this.options.crossfade===!0&&!this.path.some(b6));this.animationProgress=0;let M;this.mixTargetDelta=j=>{const H=j/1e3;o2(p.x,s.x,H),o2(p.y,s.y,H),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Sc(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),S6(this.relativeTarget,this.relativeTargetOrigin,v,H),M&&h6(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=$t()),Lr(M,this.relativeTarget)),A&&(this.animationValues=h,s6(h,f,this.latestValues,H,P,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(gs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pt.update(()=>{hd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Uu(0)),this.currentAnimation=t6(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(m6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:c,layout:f,latestValues:h}=s;if(!(!a||!c||!f)){if(this!==s&&this.layout&&f&&CT(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||$t();const p=Zn(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+p;const v=Zn(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+v}Lr(a,c),Iu(a,h),Ic(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new d6),this.sharedNodes.get(s).add(a);const f=a.options.initialPromotionConfig;a.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const f={};c.z&&D1("z",s,f,this.animationValues);for(let h=0;h<N1.length;h++)D1(`rotate${N1[h]}`,s,f,this.animationValues),D1(`skew${N1[h]}`,s,f,this.animationValues);s.render();for(const h in f)s.setStaticValue(h,f[h]),this.animationValues&&(this.animationValues[h]=f[h]);s.scheduleRender()}applyProjectionStyles(s,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=fd(a?.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=fd(a?.pointerEvents)||""),this.hasProjected&&!sa(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const h=f.animationValues||f.latestValues;this.applyTransformsToTarget();let p=p6(this.projectionDeltaWithTransform,this.treeScale,h);c&&(p=c(h,p)),s.transform=p;const{x:v,y}=this.projectionDelta;s.transformOrigin=`${v.origin*100}% ${y.origin*100}% 0`,f.animationValues?s.opacity=f===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:s.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const E in zc){if(h[E]===void 0)continue;const{correct:A,applyTo:C,isCSSVariable:N}=zc[E],P=p==="none"?h[E]:A(h[E],f);if(C){const M=C.length;for(let j=0;j<M;j++)s[C[j]]=P}else N?this.options.visualElement.renderState.vars[E]=P:s[E]=P}this.options.layoutId&&(s.pointerEvents=f===this?fd(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(n2),this.root.sharedNodes.clear()}}}function v6(n){n.updateLayout()}function y6(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:i}=n.options,o=e.source!==n.layout.source;i==="size"?Vr(h=>{const p=o?e.measuredBox[h]:e.layoutBox[h],v=Zn(p);p.min=t[h].min,p.max=p.min+v}):CT(i,e.layoutBox,t)&&Vr(h=>{const p=o?e.measuredBox[h]:e.layoutBox[h],v=Zn(t[h]);p.max=p.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+v)});const s=Su();Ic(s,t,e.layoutBox);const a=Su();o?Ic(a,n.applyTransform(r,!0),e.measuredBox):Ic(a,t,e.layoutBox);const c=!_T(s);let f=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:v}=h;if(p&&v){const y=$t();Sc(y,e.layoutBox,p.layoutBox);const E=$t();Sc(E,t,v.layoutBox),wT(y,E)||(f=!0),h.options.layoutRoot&&(n.relativeTarget=E,n.relativeTargetOrigin=y,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:a,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function x6(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function _6(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function w6(n){n.clearSnapshot()}function n2(n){n.clearMeasurements()}function r2(n){n.isLayoutDirty=!1}function E6(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function i2(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function A6(n){n.resolveTargetDelta()}function C6(n){n.calcProjection()}function T6(n){n.resetSkewAndRotation()}function I6(n){n.removeLeadSnapshot()}function o2(n,e,t){n.translate=Ot(e.translate,0,t),n.scale=Ot(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function s2(n,e,t,r){n.min=Ot(e.min,t.min,r),n.max=Ot(e.max,t.max,r)}function S6(n,e,t,r){s2(n.x,e.x,t.x,r),s2(n.y,e.y,t.y,r)}function b6(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const R6={duration:.45,ease:[.4,0,.1,1]},a2=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),u2=a2("applewebkit/")&&!a2("chrome/")?Math.round:Hr;function l2(n){n.min=u2(n.min),n.max=u2(n.max)}function P6(n){l2(n.x),l2(n.y)}function CT(n,e,t){return n==="position"||n==="preserve-aspect"&&!LN(e2(e),e2(t),.2)}function N6(n){return n!==n.root&&n.scroll?.wasRoot}const D6=AT({attachResizeListener:(n,e)=>Hc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),O1={current:void 0},TT=AT({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!O1.current){const n=new D6({});n.mount(window),n.setOptions({layoutScroll:!0}),O1.current=n}return O1.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),O6={pan:{Feature:QN},drag:{Feature:YN,ProjectionNode:TT,MeasureLayout:vT}};function c2(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,o=r[i];o&&Pt.postRender(()=>o(e,af(e)))}class k6 extends Ts{mount(){const{current:e}=this.node;e&&(this.unmount=t8(e,(t,r)=>(c2(this.node,r,"Start"),i=>c2(this.node,i,"End"))))}unmount(){}}class M6 extends Ts{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rf(Hc(this.node.current,"focus",()=>this.onFocus()),Hc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function f2(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),o=r[i];o&&Pt.postRender(()=>o(e,af(e)))}class L6 extends Ts{mount(){const{current:e}=this.node;e&&(this.unmount=o8(e,(t,r)=>(f2(this.node,r,"Start"),(i,{success:o})=>f2(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Om=new WeakMap,k1=new WeakMap,V6=n=>{const e=Om.get(n.target);e&&e(n)},F6=n=>{n.forEach(V6)};function B6({root:n,...e}){const t=n||document;k1.has(t)||k1.set(t,{});const r=k1.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(F6,{root:n,...e})),r[i]}function U6(n,e,t){const r=B6(e);return Om.set(n,t),r.observe(n),()=>{Om.delete(n),r.unobserve(n)}}const j6={some:0,all:1};class z6 extends Ts{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:o}=e,s={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:j6[i]},a=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),v=f?h:p;v&&v(c)};return U6(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(H6(e,t))&&this.startObserver()}unmount(){}}function H6({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const $6={inView:{Feature:z6},tap:{Feature:L6},focus:{Feature:M6},hover:{Feature:k6}},W6={layout:{ProjectionNode:TT,MeasureLayout:vT}},G6={...PN,...$6,...O6,...W6},Pn=G8(G6,oN),q6=()=>{};var h2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},K6=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ST={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,f=c?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4;let v=(a&15)<<2|f>>6,y=f&63;c||(y=64,s||(v=64)),r.push(t[h],t[p],t[v],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(IT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):K6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||f==null||p==null)throw new X6;const v=o<<2|a>>4;if(r.push(v),f!==64){const y=a<<4&240|f>>2;if(r.push(y),p!==64){const E=f<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class X6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Y6=function(n){const e=IT(n);return ST.encodeByteArray(e,!0)},kd=function(n){return Y6(n).replace(/\./g,"")},bT=function(n){try{return ST.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=()=>Q6().__FIREBASE_DEFAULTS__,J6=()=>{if(typeof process>"u"||typeof h2>"u")return;const n=h2.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},eD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&bT(n[1]);return e&&JSON.parse(e)},cp=()=>{try{return q6()||Z6()||J6()||eD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},RT=n=>cp()?.emulatorHosts?.[n],tD=n=>{const e=RT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},PT=()=>cp()?.config,NT=n=>cp()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function DT(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[kd(JSON.stringify(t)),kd(JSON.stringify(s)),""].join(".")}const bc={};function iD(){const n={prod:[],emulator:[]};for(const e of Object.keys(bc))bc[e]?n.emulator.push(e):n.prod.push(e);return n}function oD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let d2=!1;function OT(n,e){if(typeof window>"u"||typeof document>"u"||!nl(window.location.host)||bc[n]===e||bc[n]||d2)return;bc[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=iD().prod.length>0;function s(){const v=document.getElementById(r);v&&v.remove()}function a(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,y){v.setAttribute("width","24"),v.setAttribute("id",y),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{d2=!0,s()},v}function h(v,y){v.setAttribute("id",y),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function p(){const v=oD(r),y=t("text"),E=document.getElementById(y)||document.createElement("span"),A=t("learnmore"),C=document.getElementById(A)||document.createElement("a"),N=t("preprendIcon"),P=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const M=v.element;a(M),h(C,A);const j=f();c(P,N),M.append(P,E,C,j),document.body.appendChild(M)}o?(E.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($n())}function aD(){const n=cp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function cD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fD(){const n=$n();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function hD(){return!aD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dD(){try{return typeof indexedDB=="object"}catch{return!1}}function pD(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD="FirebaseError";class _o extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=mD,Object.setPrototypeOf(this,_o.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uf.prototype.create)}}class uf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?gD(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new _o(i,a,r)}}function gD(n,e){return n.replace(vD,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const vD=/\{\$([^}]+)}/g;function yD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function xa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],s=e[i];if(p2(o)&&p2(s)){if(!xa(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function p2(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xD(n,e){const t=new _D(n,e);return t.subscribe.bind(t)}class _D{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");wD(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=M1),i.error===void 0&&(i.error=M1),i.complete===void 0&&(i.complete=M1);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function M1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(n){return n&&n._delegate?n._delegate:n}class _a{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ED=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new nD;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CD(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function AD(n){return n===aa?void 0:n}function CD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ED(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Qe||(Qe={}));const ID={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},SD=Qe.INFO,bD={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},RD=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=bD[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cv{constructor(e){this.name=e,this._logLevel=SD,this._logHandler=RD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ID[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const PD=(n,e)=>e.some(t=>n instanceof t);let m2,g2;function ND(){return m2||(m2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DD(){return g2||(g2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kT=new WeakMap,km=new WeakMap,MT=new WeakMap,L1=new WeakMap,fv=new WeakMap;function OD(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(as(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&kT.set(t,n)}).catch(()=>{}),fv.set(e,n),e}function kD(n){if(km.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});km.set(n,e)}let Mm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return km.get(n);if(e==="objectStoreNames")return n.objectStoreNames||MT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return as(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function MD(n){Mm=n(Mm)}function LD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(V1(this),e,...t);return MT.set(r,e.sort?e.sort():[e]),as(r)}:DD().includes(n)?function(...e){return n.apply(V1(this),e),as(kT.get(this))}:function(...e){return as(n.apply(V1(this),e))}}function VD(n){return typeof n=="function"?LD(n):(n instanceof IDBTransaction&&kD(n),PD(n,ND())?new Proxy(n,Mm):n)}function as(n){if(n instanceof IDBRequest)return OD(n);if(L1.has(n))return L1.get(n);const e=VD(n);return e!==n&&(L1.set(n,e),fv.set(e,n)),e}const V1=n=>fv.get(n);function FD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,e),a=as(s);return r&&s.addEventListener("upgradeneeded",c=>{r(as(s.result),c.oldVersion,c.newVersion,as(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),a}const BD=["get","getKey","getAll","getAllKeys","count"],UD=["put","add","delete","clear"],F1=new Map;function v2(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(F1.get(e))return F1.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=UD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||BD.includes(t)))return;const o=async function(s,...a){const c=this.transaction(s,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(a.shift())),(await Promise.all([f[t](...a),i&&c.done]))[0]};return F1.set(e,o),o}MD(n=>({...n,get:(e,t,r)=>v2(e,t)||n.get(e,t,r),has:(e,t)=>!!v2(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function zD(n){return n.getComponent()?.type==="VERSION"}const Lm="@firebase/app",y2="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new cv("@firebase/app"),HD="@firebase/app-compat",$D="@firebase/analytics-compat",WD="@firebase/analytics",GD="@firebase/app-check-compat",qD="@firebase/app-check",KD="@firebase/auth",XD="@firebase/auth-compat",YD="@firebase/database",QD="@firebase/data-connect",ZD="@firebase/database-compat",JD="@firebase/functions",eO="@firebase/functions-compat",tO="@firebase/installations",nO="@firebase/installations-compat",rO="@firebase/messaging",iO="@firebase/messaging-compat",oO="@firebase/performance",sO="@firebase/performance-compat",aO="@firebase/remote-config",uO="@firebase/remote-config-compat",lO="@firebase/storage",cO="@firebase/storage-compat",fO="@firebase/firestore",hO="@firebase/ai",dO="@firebase/firestore-compat",pO="firebase",mO="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="[DEFAULT]",gO={[Lm]:"fire-core",[HD]:"fire-core-compat",[WD]:"fire-analytics",[$D]:"fire-analytics-compat",[qD]:"fire-app-check",[GD]:"fire-app-check-compat",[KD]:"fire-auth",[XD]:"fire-auth-compat",[YD]:"fire-rtdb",[QD]:"fire-data-connect",[ZD]:"fire-rtdb-compat",[JD]:"fire-fn",[eO]:"fire-fn-compat",[tO]:"fire-iid",[nO]:"fire-iid-compat",[rO]:"fire-fcm",[iO]:"fire-fcm-compat",[oO]:"fire-perf",[sO]:"fire-perf-compat",[aO]:"fire-rc",[uO]:"fire-rc-compat",[lO]:"fire-gcs",[cO]:"fire-gcs-compat",[fO]:"fire-fst",[dO]:"fire-fst-compat",[hO]:"fire-vertex","fire-js":"fire-js",[pO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=new Map,vO=new Map,Fm=new Map;function x2(n,e){try{n.container.addComponent(e)}catch(t){mo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function zu(n){const e=n.name;if(Fm.has(e))return mo.debug(`There were multiple attempts to register component ${e}.`),!1;Fm.set(e,n);for(const t of Md.values())x2(t,n);for(const t of vO.values())x2(t,n);return!0}function hv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ur(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new uf("app","Firebase",yO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=mO;function LT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Vm,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw us.create("bad-app-name",{appName:String(i)});if(t||(t=PT()),!t)throw us.create("no-options");const o=Md.get(i);if(o){if(xa(t,o.options)&&xa(r,o.config))return o;throw us.create("duplicate-app",{appName:i})}const s=new TD(i);for(const c of Fm.values())s.addComponent(c);const a=new xO(t,r,s);return Md.set(i,a),a}function VT(n=Vm){const e=Md.get(n);if(!e&&n===Vm&&PT())return LT();if(!e)throw us.create("no-app",{appName:n});return e}function ls(n,e,t){let r=gO[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mo.warn(s.join(" "));return}zu(new _a(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O="firebase-heartbeat-database",wO=1,$c="firebase-heartbeat-store";let B1=null;function FT(){return B1||(B1=FD(_O,wO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($c)}catch(t){console.warn(t)}}}}).catch(n=>{throw us.create("idb-open",{originalErrorMessage:n.message})})),B1}async function EO(n){try{const t=(await FT()).transaction($c),r=await t.objectStore($c).get(BT(n));return await t.done,r}catch(e){if(e instanceof _o)mo.warn(e.message);else{const t=us.create("idb-get",{originalErrorMessage:e?.message});mo.warn(t.message)}}}async function _2(n,e){try{const r=(await FT()).transaction($c,"readwrite");await r.objectStore($c).put(e,BT(n)),await r.done}catch(t){if(t instanceof _o)mo.warn(t.message);else{const r=us.create("idb-set",{originalErrorMessage:t?.message});mo.warn(r.message)}}}function BT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=1024,CO=30;class TO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new SO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=w2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>CO){const i=bO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){mo.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=w2(),{heartbeatsToSend:t,unsentEntries:r}=IO(this._heartbeatsCache.heartbeats),i=kd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return mo.warn(e),""}}}function w2(){return new Date().toISOString().substring(0,10)}function IO(n,e=AO){const t=[];let r=n.slice();for(const i of n){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),E2(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),E2(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class SO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dD()?pD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await EO(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return _2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return _2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function E2(n){return kd(JSON.stringify({version:2,heartbeats:n})).length}function bO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(n){zu(new _a("platform-logger",e=>new jD(e),"PRIVATE")),zu(new _a("heartbeat",e=>new TO(e),"PRIVATE")),ls(Lm,y2,n),ls(Lm,y2,"esm2020"),ls("fire-js","")}RO("");function UT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PO=UT,jT=new uf("auth","Firebase",UT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld=new cv("@firebase/auth");function NO(n,...e){Ld.logLevel<=Qe.WARN&&Ld.warn(`Auth (${rl}): ${n}`,...e)}function dd(n,...e){Ld.logLevel<=Qe.ERROR&&Ld.error(`Auth (${rl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(n,...e){throw pv(n,...e)}function ui(n,...e){return pv(n,...e)}function dv(n,e,t){const r={...PO(),[e]:t};return new uf("auth","Firebase",r).create(e,{appName:n.name})}function cs(n){return dv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zT(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fi(n,"argument-error"),dv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return jT.create(n,...e)}function je(n,e,...t){if(!n)throw pv(e,...t)}function co(n){const e="INTERNAL ASSERTION FAILED: "+n;throw dd(e),new Error(e)}function go(n,e){n||co(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(){return typeof self<"u"&&self.location?.href||""}function DO(){return A2()==="http:"||A2()==="https:"}function A2(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DO()||lD()||"connection"in navigator)?navigator.onLine:!0}function kO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t){this.shortDelay=e,this.longDelay=t,go(t>e,"Short delay should be less than long delay!"),this.isMobile=sD()||cD()}get(){return OO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(n,e){go(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;co("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;co("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;co("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VO=new cf(3e4,6e4);function gv(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function il(n,e,t,r,i={}){return $T(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=lf({key:n.config.apiKey,...s}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:c,...o};return uD()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&nl(n.emulatorConfig.host)&&(f.credentials="include"),HT.fetch()(await WT(n,n.config.apiHost,t,a),f)})}async function $T(n,e,t){n._canInitEmulator=!1;const r={...MO,...e};try{const i=new BO(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw qh(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,f]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw qh(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw qh(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw qh(n,"user-disabled",s);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw dv(n,h,f);Fi(n,h)}}catch(i){if(i instanceof _o)throw i;Fi(n,"network-request-failed",{message:String(i)})}}async function FO(n,e,t,r,i={}){const o=await il(n,e,t,r,i);return"mfaPendingCredential"in o&&Fi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function WT(n,e,t,r){const i=`${e}${t}?${r}`,o=n,s=o.config.emulator?mv(n.config,i):`${n.config.apiScheme}://${i}`;return LO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}class BO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ui(this.auth,"network-request-failed")),VO.get())})}}function qh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ui(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UO(n,e){return il(n,"POST","/v1/accounts:delete",e)}async function Vd(n,e){return il(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jO(n,e=!1){const t=en(n),r=await t.getIdToken(e),i=vv(r);je(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Rc(U1(i.auth_time)),issuedAtTime:Rc(U1(i.iat)),expirationTime:Rc(U1(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function U1(n){return Number(n)*1e3}function vv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return dd("JWT malformed, contained fewer than 3 sections"),null;try{const i=bT(t);return i?JSON.parse(i):(dd("Failed to decode base64 JWT payload"),null)}catch(i){return dd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function C2(n){const e=vv(n);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof _o&&zO(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function zO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rc(this.lastLoginAt),this.creationTime=Rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fd(n){const e=n.auth,t=await n.getIdToken(),r=await Wc(n,Vd(e,{idToken:t}));je(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=i.providerUserInfo?.length?GT(i.providerUserInfo):[],s=WO(n.providerData,o),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!s?.length,f=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Um(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(n,h)}async function $O(n){const e=en(n);await Fd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WO(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function GT(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GO(n,e){const t=await $T(n,{},async()=>{const r=lf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await WT(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return n.emulatorConfig&&nl(n.emulatorConfig.host)&&(c.credentials="include"),HT.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qO(n,e){return il(n,"POST","/v2/accounts:revokeToken",gv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):C2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=C2(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await GO(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new Mu;return r&&(je(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(je(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(je(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mu,this.toJSON())}_performRefresh(){return co("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(n,e){je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ai{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new HO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Um(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Wc(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jO(this,e)}reload(){return $O(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ai({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Fd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ur(this.auth.app))return Promise.reject(cs(this.auth));const e=await this.getIdToken();return await Wc(this,UO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,f=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:v,isAnonymous:y,providerData:E,stsTokenManager:A}=t;je(p&&A,e,"internal-error");const C=Mu.fromJSON(this.name,A);je(typeof p=="string",e,"internal-error"),Qo(r,e.name),Qo(i,e.name),je(typeof v=="boolean",e,"internal-error"),je(typeof y=="boolean",e,"internal-error"),Qo(o,e.name),Qo(s,e.name),Qo(a,e.name),Qo(c,e.name),Qo(f,e.name),Qo(h,e.name);const N=new ai({uid:p,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:C,createdAt:f,lastLoginAt:h});return E&&Array.isArray(E)&&(N.providerData=E.map(P=>({...P}))),c&&(N._redirectEventId=c),N}static async _fromIdTokenResponse(e,t,r=!1){const i=new Mu;i.updateFromServerResponse(t);const o=new ai({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Fd(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];je(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?GT(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Mu;a.updateFromIdToken(r);const c=new ai({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Um(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new Map;function fo(n){go(n instanceof Function,"Expected a class definition");let e=T2.get(n);return e?(go(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,T2.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qT.type="NONE";const I2=qT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(n,e,t){return`firebase:${n}:${e}:${t}`}class Lu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=pd(this.userKey,i.apiKey,o),this.fullPersistenceKey=pd("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Vd(this.auth,{idToken:e}).catch(()=>{});return t?ai._fromGetAccountInfoResponse(this.auth,t,e):null}return ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Lu(fo(I2),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||fo(I2);const s=pd(r,e.config.apiKey,e.name);let a=null;for(const f of t)try{const h=await f._get(s);if(h){let p;if(typeof h=="string"){const v=await Vd(e,{idToken:h}).catch(()=>{});if(!v)break;p=await ai._fromGetAccountInfoResponse(e,v,h)}else p=ai._fromJSON(e,h);f!==o&&(a=p),o=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Lu(o,e,r):(o=c[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(s)}catch{}})),new Lu(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(JT(e))return"Blackberry";if(eI(e))return"Webos";if(XT(e))return"Safari";if((e.includes("chrome/")||YT(e))&&!e.includes("edge/"))return"Chrome";if(ZT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function KT(n=$n()){return/firefox\//i.test(n)}function XT(n=$n()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YT(n=$n()){return/crios\//i.test(n)}function QT(n=$n()){return/iemobile/i.test(n)}function ZT(n=$n()){return/android/i.test(n)}function JT(n=$n()){return/blackberry/i.test(n)}function eI(n=$n()){return/webos/i.test(n)}function yv(n=$n()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KO(n=$n()){return yv(n)&&!!window.navigator?.standalone}function XO(){return fD()&&document.documentMode===10}function tI(n=$n()){return yv(n)||ZT(n)||eI(n)||JT(n)||/windows phone/i.test(n)||QT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(n,e=[]){let t;switch(n){case"Browser":t=S2($n());break;case"Worker":t=`${S2($n())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${rl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((s,a)=>{try{const c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO(n,e={}){return il(n,"GET","/v2/passwordPolicy",gv(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=6;class JO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ZO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b2(this),this.idTokenSubscription=new b2(this),this.beforeStateQueue=new YO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fo(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Lu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vd(this,{idToken:e}),r=await ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ur(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ur(this.app))return Promise.reject(cs(this));const t=e?en(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ur(this.app)?Promise.reject(cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ur(this.app)?Promise.reject(cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QO(this),t=new JO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await qO(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fo(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await Lu.create(this,[fo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&NO(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ff(n){return en(n)}class b2{constructor(e){this.auth=e,this.observer=null,this.addObserver=xD(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tk(n){xv=n}function nk(n){return xv.loadJS(n)}function rk(){return xv.gapiScript}function ik(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(n,e){const t=hv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(xa(o,e??{}))return i;Fi(i,"already-initialized")}return t.initialize({options:e})}function sk(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(fo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function ak(n,e,t){const r=ff(n);je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=rI(e),{host:s,port:a}=uk(e),c=a===null?"":`:${a}`,f={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){je(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),je(xa(f,r.config.emulator)&&xa(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,nl(s)?(DT(`${o}//${s}${c}`),OT("Auth",!0)):lk()}function rI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function uk(n){const e=rI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:R2(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:R2(s)}}}function R2(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function lk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return co("not implemented")}_getIdTokenResponse(e){return co("not implemented")}_linkToIdToken(e,t){return co("not implemented")}_getReauthenticationResolver(e){return co("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vu(n,e){return FO(n,"POST","/v1/accounts:signInWithIdp",gv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck="http://localhost";class wa extends iI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const s=new wa(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return Vu(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Vu(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vu(e,t)}buildRequest(){const e={requestUri:ck,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=lf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf extends fp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends hf{constructor(){super("facebook.com")}static credential(e){return wa._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends hf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wa._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return lo.credential(t,r)}catch{return null}}}lo.GOOGLE_SIGN_IN_METHOD="google.com";lo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends hf{constructor(){super("github.com")}static credential(e){return wa._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.GITHUB_SIGN_IN_METHOD="github.com";is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends hf{constructor(){super("twitter.com")}static credential(e,t){return wa._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return os.credential(t,r)}catch{return null}}}os.TWITTER_SIGN_IN_METHOD="twitter.com";os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await ai._fromIdTokenResponse(e,r,i),s=P2(r);return new Hu({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=P2(r);return new Hu({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function P2(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends _o{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Bd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Bd(e,t,r,i)}}function oI(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Bd._fromErrorAndOperation(n,o,e,r):o})}async function fk(n,e,t=!1){const r=await Wc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Hu._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(n,e,t=!1){const{auth:r}=n;if(Ur(r.app))return Promise.reject(cs(r));const i="reauthenticate";try{const o=await Wc(n,oI(r,i,e,n),t);je(o.idToken,r,"internal-error");const s=vv(o.idToken);je(s,r,"internal-error");const{sub:a}=s;return je(n.uid===a,r,"user-mismatch"),Hu._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Fi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(n,e,t=!1){if(Ur(n.app))return Promise.reject(cs(n));const r="signIn",i=await oI(n,r,e),o=await Hu._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}function pk(n,e,t,r){return en(n).onIdTokenChanged(e,t,r)}function mk(n,e,t){return en(n).beforeAuthStateChanged(e,t)}function gk(n,e,t,r){return en(n).onAuthStateChanged(e,t,r)}function vk(n){return en(n).signOut()}const Ud="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ud,"1"),this.storage.removeItem(Ud),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=1e3,xk=10;class aI extends sI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,a,c)=>{this.notifyListeners(s,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!t&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);XO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,xk):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},yk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aI.type="LOCAL";const _k=aI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI extends sI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}uI.type="SESSION";const lI=uI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new hp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,s=this.handlersMap[i];if(!s?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async f=>f(t.origin,o)),c=await wk(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{const f=_v("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const v=p;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(v.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function Ak(n){Oi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function Ck(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Tk(){return navigator?.serviceWorker?.controller||null}function Ik(){return cI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="firebaseLocalStorageDb",Sk=1,jd="firebaseLocalStorage",hI="fbase_key";class df{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function dp(n,e){return n.transaction([jd],e?"readwrite":"readonly").objectStore(jd)}function bk(){const n=indexedDB.deleteDatabase(fI);return new df(n).toPromise()}function jm(){const n=indexedDB.open(fI,Sk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(jd,{keyPath:hI})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(jd)?e(r):(r.close(),await bk(),e(await jm()))})})}async function N2(n,e,t){const r=dp(n,!0).put({[hI]:e,value:t});return new df(r).toPromise()}async function Rk(n,e){const t=dp(n,!1).get(e),r=await new df(t).toPromise();return r===void 0?null:r.value}function D2(n,e){const t=dp(n,!0).delete(e);return new df(t).toPromise()}const Pk=800,Nk=3;class dI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Nk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hp._getInstance(Ik()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Ck(),!this.activeServiceWorker)return;this.sender=new Ek(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Tk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jm();return await N2(e,Ud,"1"),await D2(e,Ud),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>N2(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Rk(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>D2(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=dp(i,!1).getAll();return new df(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Pk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dI.type="LOCAL";const Dk=dI;new cf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(n,e){return e?fo(e):(je(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev extends iI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ok(n){return dk(n.auth,new Ev(n),n.bypassAuthState)}function kk(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),hk(t,new Ev(n),n.bypassAuthState)}async function Mk(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),fk(t,new Ev(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ok;case"linkViaPopup":case"linkViaRedirect":return Mk;case"reauthViaPopup":case"reauthViaRedirect":return kk;default:Fi(this.auth,"internal-error")}}resolve(e){go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=new cf(2e3,1e4);async function Vk(n,e,t){if(Ur(n.app))return Promise.reject(ui(n,"operation-not-supported-in-this-environment"));const r=ff(n);zT(n,e,fp);const i=wv(r,t);return new fa(r,"signInViaPopup",e,i).executeNotNull()}class fa extends pI{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,fa.currentPopupAction&&fa.currentPopupAction.cancel(),fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){go(this.filter.length===1,"Popup operations only handle one event");const e=_v();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Lk.get())};e()}}fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk="pendingRedirect",md=new Map;class Bk extends pI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=md.get(this.auth._key());if(!e){try{const r=await Uk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}md.set(this.auth._key(),e)}return this.bypassAuthState||md.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Uk(n,e){const t=gI(e),r=mI(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function jk(n,e){return mI(n)._set(gI(e),"true")}function zk(n,e){md.set(n._key(),e)}function mI(n){return fo(n._redirectPersistence)}function gI(n){return pd(Fk,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(n,e,t){return $k(n,e,t)}async function $k(n,e,t){if(Ur(n.app))return Promise.reject(cs(n));const r=ff(n);zT(n,e,fp),await r._initializationPromise;const i=wv(r,t);return await jk(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function Wk(n,e,t=!1){if(Ur(n.app))return Promise.reject(cs(n));const r=ff(n),i=wv(r,e),s=await new Bk(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=600*1e3;class qk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Kk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!vI(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ui(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Gk&&this.cachedEventUids.clear(),this.cachedEventUids.has(O2(e))}saveEventToCache(e){this.cachedEventUids.add(O2(e)),this.lastProcessedEventTime=Date.now()}}function O2(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function vI({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Kk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xk(n,e={}){return il(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qk=/^https?/;async function Zk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Xk(n);for(const t of e)try{if(Jk(t))return}catch{}Fi(n,"unauthorized-domain")}function Jk(n){const e=Bm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!Qk.test(t))return!1;if(Yk.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=new cf(3e4,6e4);function k2(){const n=Oi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function t5(n){return new Promise((e,t)=>{function r(){k2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{k2(),t(ui(n,"network-request-failed"))},timeout:e5.get()})}if(Oi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Oi().gapi?.load)r();else{const i=ik("iframefcb");return Oi()[i]=()=>{gapi.load?r():t(ui(n,"network-request-failed"))},nk(`${rk()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw gd=null,e})}let gd=null;function n5(n){return gd=gd||t5(n),gd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5=new cf(5e3,15e3),i5="__/auth/iframe",o5="emulator/auth/iframe",s5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},a5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function u5(n){const e=n.config;je(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?mv(e,o5):`https://${n.config.authDomain}/${i5}`,r={apiKey:e.apiKey,appName:n.name,v:rl},i=a5.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${lf(r).slice(1)}`}async function l5(n){const e=await n5(n),t=Oi().gapi;return je(t,n,"internal-error"),e.open({where:document.body,url:u5(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:s5,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=ui(n,"network-request-failed"),a=Oi().setTimeout(()=>{o(s)},r5.get());function c(){Oi().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f5=500,h5=600,d5="_blank",p5="http://localhost";class M2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function m5(n,e,t,r=f5,i=h5){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...c5,width:r.toString(),height:i.toString(),top:o,left:s},f=$n().toLowerCase();t&&(a=YT(f)?d5:t),KT(f)&&(e=e||p5,c.scrollbars="yes");const h=Object.entries(c).reduce((v,[y,E])=>`${v}${y}=${E},`,"");if(KO(f)&&a!=="_self")return g5(e||"",a),new M2(null);const p=window.open(e||"",a,h);je(p,n,"popup-blocked");try{p.focus()}catch{}return new M2(p)}function g5(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5="__/auth/handler",y5="emulator/auth/handler",x5=encodeURIComponent("fac");async function L2(n,e,t,r,i,o){je(n.config.authDomain,n,"auth-domain-config-required"),je(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:rl,eventId:i};if(e instanceof fp){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",yD(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))s[h]=p}if(e instanceof hf){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);const a=s;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await n._getAppCheckToken(),f=c?`#${x5}=${encodeURIComponent(c)}`:"";return`${_5(n)}?${lf(a).slice(1)}${f}`}function _5({config:n}){return n.emulator?mv(n,y5):`https://${n.authDomain}/${v5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="webStorageSupport";class w5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lI,this._completeRedirectFn=Wk,this._overrideRedirectResult=zk}async _openPopup(e,t,r,i){go(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await L2(e,t,r,Bm(),i);return m5(e,o,_v())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await L2(e,t,r,Bm(),i);return Ak(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(go(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await l5(e),r=new qk(e);return t.register("authEvent",i=>(je(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(j1,{type:j1},i=>{const o=i?.[0]?.[j1];o!==void 0&&t(!!o),Fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Zk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tI()||XT()||yv()}}const E5=w5;var V2="@firebase/auth",F2="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T5(n){zu(new _a("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;je(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nI(n)},f=new ek(r,i,o,c);return sk(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),zu(new _a("auth-internal",e=>{const t=ff(e.getProvider("auth").getImmediate());return(r=>new A5(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ls(V2,F2,C5(n)),ls(V2,F2,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5=300,S5=NT("authIdTokenMaxAge")||I5;let B2=null;const b5=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>S5)return;const i=t?.token;B2!==i&&(B2=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function R5(n=VT()){const e=hv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=ok(n,{popupRedirectResolver:E5,persistence:[Dk,_k,lI]}),r=NT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=b5(o.toString());mk(t,s,()=>s(t.currentUser)),pk(t,a=>s(a))}}const i=RT("auth");return i&&ak(t,`http://${i}`),t}function P5(){return document.getElementsByTagName("head")?.[0]??document}tk({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=ui("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",P5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T5("Browser");var N5="firebase",D5="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ls(N5,D5,"app");var U2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fs,yI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function D(){}D.prototype=I.prototype,R.F=I.prototype,R.prototype=new D,R.prototype.constructor=R,R.D=function(O,F,B){for(var L=Array(arguments.length-2),te=2;te<arguments.length;te++)L[te-2]=arguments[te];return I.prototype[F].apply(O,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,I,D){D||(D=0);const O=Array(16);if(typeof I=="string")for(var F=0;F<16;++F)O[F]=I.charCodeAt(D++)|I.charCodeAt(D++)<<8|I.charCodeAt(D++)<<16|I.charCodeAt(D++)<<24;else for(F=0;F<16;++F)O[F]=I[D++]|I[D++]<<8|I[D++]<<16|I[D++]<<24;I=R.g[0],D=R.g[1],F=R.g[2];let B=R.g[3],L;L=I+(B^D&(F^B))+O[0]+3614090360&4294967295,I=D+(L<<7&4294967295|L>>>25),L=B+(F^I&(D^F))+O[1]+3905402710&4294967295,B=I+(L<<12&4294967295|L>>>20),L=F+(D^B&(I^D))+O[2]+606105819&4294967295,F=B+(L<<17&4294967295|L>>>15),L=D+(I^F&(B^I))+O[3]+3250441966&4294967295,D=F+(L<<22&4294967295|L>>>10),L=I+(B^D&(F^B))+O[4]+4118548399&4294967295,I=D+(L<<7&4294967295|L>>>25),L=B+(F^I&(D^F))+O[5]+1200080426&4294967295,B=I+(L<<12&4294967295|L>>>20),L=F+(D^B&(I^D))+O[6]+2821735955&4294967295,F=B+(L<<17&4294967295|L>>>15),L=D+(I^F&(B^I))+O[7]+4249261313&4294967295,D=F+(L<<22&4294967295|L>>>10),L=I+(B^D&(F^B))+O[8]+1770035416&4294967295,I=D+(L<<7&4294967295|L>>>25),L=B+(F^I&(D^F))+O[9]+2336552879&4294967295,B=I+(L<<12&4294967295|L>>>20),L=F+(D^B&(I^D))+O[10]+4294925233&4294967295,F=B+(L<<17&4294967295|L>>>15),L=D+(I^F&(B^I))+O[11]+2304563134&4294967295,D=F+(L<<22&4294967295|L>>>10),L=I+(B^D&(F^B))+O[12]+1804603682&4294967295,I=D+(L<<7&4294967295|L>>>25),L=B+(F^I&(D^F))+O[13]+4254626195&4294967295,B=I+(L<<12&4294967295|L>>>20),L=F+(D^B&(I^D))+O[14]+2792965006&4294967295,F=B+(L<<17&4294967295|L>>>15),L=D+(I^F&(B^I))+O[15]+1236535329&4294967295,D=F+(L<<22&4294967295|L>>>10),L=I+(F^B&(D^F))+O[1]+4129170786&4294967295,I=D+(L<<5&4294967295|L>>>27),L=B+(D^F&(I^D))+O[6]+3225465664&4294967295,B=I+(L<<9&4294967295|L>>>23),L=F+(I^D&(B^I))+O[11]+643717713&4294967295,F=B+(L<<14&4294967295|L>>>18),L=D+(B^I&(F^B))+O[0]+3921069994&4294967295,D=F+(L<<20&4294967295|L>>>12),L=I+(F^B&(D^F))+O[5]+3593408605&4294967295,I=D+(L<<5&4294967295|L>>>27),L=B+(D^F&(I^D))+O[10]+38016083&4294967295,B=I+(L<<9&4294967295|L>>>23),L=F+(I^D&(B^I))+O[15]+3634488961&4294967295,F=B+(L<<14&4294967295|L>>>18),L=D+(B^I&(F^B))+O[4]+3889429448&4294967295,D=F+(L<<20&4294967295|L>>>12),L=I+(F^B&(D^F))+O[9]+568446438&4294967295,I=D+(L<<5&4294967295|L>>>27),L=B+(D^F&(I^D))+O[14]+3275163606&4294967295,B=I+(L<<9&4294967295|L>>>23),L=F+(I^D&(B^I))+O[3]+4107603335&4294967295,F=B+(L<<14&4294967295|L>>>18),L=D+(B^I&(F^B))+O[8]+1163531501&4294967295,D=F+(L<<20&4294967295|L>>>12),L=I+(F^B&(D^F))+O[13]+2850285829&4294967295,I=D+(L<<5&4294967295|L>>>27),L=B+(D^F&(I^D))+O[2]+4243563512&4294967295,B=I+(L<<9&4294967295|L>>>23),L=F+(I^D&(B^I))+O[7]+1735328473&4294967295,F=B+(L<<14&4294967295|L>>>18),L=D+(B^I&(F^B))+O[12]+2368359562&4294967295,D=F+(L<<20&4294967295|L>>>12),L=I+(D^F^B)+O[5]+4294588738&4294967295,I=D+(L<<4&4294967295|L>>>28),L=B+(I^D^F)+O[8]+2272392833&4294967295,B=I+(L<<11&4294967295|L>>>21),L=F+(B^I^D)+O[11]+1839030562&4294967295,F=B+(L<<16&4294967295|L>>>16),L=D+(F^B^I)+O[14]+4259657740&4294967295,D=F+(L<<23&4294967295|L>>>9),L=I+(D^F^B)+O[1]+2763975236&4294967295,I=D+(L<<4&4294967295|L>>>28),L=B+(I^D^F)+O[4]+1272893353&4294967295,B=I+(L<<11&4294967295|L>>>21),L=F+(B^I^D)+O[7]+4139469664&4294967295,F=B+(L<<16&4294967295|L>>>16),L=D+(F^B^I)+O[10]+3200236656&4294967295,D=F+(L<<23&4294967295|L>>>9),L=I+(D^F^B)+O[13]+681279174&4294967295,I=D+(L<<4&4294967295|L>>>28),L=B+(I^D^F)+O[0]+3936430074&4294967295,B=I+(L<<11&4294967295|L>>>21),L=F+(B^I^D)+O[3]+3572445317&4294967295,F=B+(L<<16&4294967295|L>>>16),L=D+(F^B^I)+O[6]+76029189&4294967295,D=F+(L<<23&4294967295|L>>>9),L=I+(D^F^B)+O[9]+3654602809&4294967295,I=D+(L<<4&4294967295|L>>>28),L=B+(I^D^F)+O[12]+3873151461&4294967295,B=I+(L<<11&4294967295|L>>>21),L=F+(B^I^D)+O[15]+530742520&4294967295,F=B+(L<<16&4294967295|L>>>16),L=D+(F^B^I)+O[2]+3299628645&4294967295,D=F+(L<<23&4294967295|L>>>9),L=I+(F^(D|~B))+O[0]+4096336452&4294967295,I=D+(L<<6&4294967295|L>>>26),L=B+(D^(I|~F))+O[7]+1126891415&4294967295,B=I+(L<<10&4294967295|L>>>22),L=F+(I^(B|~D))+O[14]+2878612391&4294967295,F=B+(L<<15&4294967295|L>>>17),L=D+(B^(F|~I))+O[5]+4237533241&4294967295,D=F+(L<<21&4294967295|L>>>11),L=I+(F^(D|~B))+O[12]+1700485571&4294967295,I=D+(L<<6&4294967295|L>>>26),L=B+(D^(I|~F))+O[3]+2399980690&4294967295,B=I+(L<<10&4294967295|L>>>22),L=F+(I^(B|~D))+O[10]+4293915773&4294967295,F=B+(L<<15&4294967295|L>>>17),L=D+(B^(F|~I))+O[1]+2240044497&4294967295,D=F+(L<<21&4294967295|L>>>11),L=I+(F^(D|~B))+O[8]+1873313359&4294967295,I=D+(L<<6&4294967295|L>>>26),L=B+(D^(I|~F))+O[15]+4264355552&4294967295,B=I+(L<<10&4294967295|L>>>22),L=F+(I^(B|~D))+O[6]+2734768916&4294967295,F=B+(L<<15&4294967295|L>>>17),L=D+(B^(F|~I))+O[13]+1309151649&4294967295,D=F+(L<<21&4294967295|L>>>11),L=I+(F^(D|~B))+O[4]+4149444226&4294967295,I=D+(L<<6&4294967295|L>>>26),L=B+(D^(I|~F))+O[11]+3174756917&4294967295,B=I+(L<<10&4294967295|L>>>22),L=F+(I^(B|~D))+O[2]+718787259&4294967295,F=B+(L<<15&4294967295|L>>>17),L=D+(B^(F|~I))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(F+(L<<21&4294967295|L>>>11))&4294967295,R.g[2]=R.g[2]+F&4294967295,R.g[3]=R.g[3]+B&4294967295}r.prototype.v=function(R,I){I===void 0&&(I=R.length);const D=I-this.blockSize,O=this.C;let F=this.h,B=0;for(;B<I;){if(F==0)for(;B<=D;)i(this,R,B),B+=this.blockSize;if(typeof R=="string"){for(;B<I;)if(O[F++]=R.charCodeAt(B++),F==this.blockSize){i(this,O),F=0;break}}else for(;B<I;)if(O[F++]=R[B++],F==this.blockSize){i(this,O),F=0;break}}this.h=F,this.o+=I},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;I=this.o*8;for(var D=R.length-8;D<R.length;++D)R[D]=I&255,I/=256;for(this.v(R),R=Array(16),I=0,D=0;D<4;++D)for(let O=0;O<32;O+=8)R[I++]=this.g[D]>>>O&255;return R};function o(R,I){var D=a;return Object.prototype.hasOwnProperty.call(D,R)?D[R]:D[R]=I(R)}function s(R,I){this.h=I;const D=[];let O=!0;for(let F=R.length-1;F>=0;F--){const B=R[F]|0;O&&B==I||(D[F]=B,O=!1)}this.g=D}var a={};function c(R){return-128<=R&&R<128?o(R,function(I){return new s([I|0],I<0?-1:0)}):new s([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return p;if(R<0)return C(f(-R));const I=[];let D=1;for(let O=0;R>=D;O++)I[O]=R/D|0,D*=4294967296;return new s(I,0)}function h(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return C(h(R.substring(1),I));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=f(Math.pow(I,8));let O=p;for(let B=0;B<R.length;B+=8){var F=Math.min(8,R.length-B);const L=parseInt(R.substring(B,B+F),I);F<8?(F=f(Math.pow(I,F)),O=O.j(F).add(f(L))):(O=O.j(D),O=O.add(f(L)))}return O}var p=c(0),v=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(A(this))return-C(this).m();let R=0,I=1;for(let D=0;D<this.g.length;D++){const O=this.i(D);R+=(O>=0?O:4294967296+O)*I,I*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(E(this))return"0";if(A(this))return"-"+C(this).toString(R);const I=f(Math.pow(R,6));var D=this;let O="";for(;;){const F=j(D,I).g;D=N(D,F.j(I));let B=((D.g.length>0?D.g[0]:D.h)>>>0).toString(R);if(D=F,E(D))return B+O;for(;B.length<6;)B="0"+B;O=B+O}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function E(R){if(R.h!=0)return!1;for(let I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function A(R){return R.h==-1}n.l=function(R){return R=N(this,R),A(R)?-1:E(R)?0:1};function C(R){const I=R.g.length,D=[];for(let O=0;O<I;O++)D[O]=~R.g[O];return new s(D,~R.h).add(v)}n.abs=function(){return A(this)?C(this):this},n.add=function(R){const I=Math.max(this.g.length,R.g.length),D=[];let O=0;for(let F=0;F<=I;F++){let B=O+(this.i(F)&65535)+(R.i(F)&65535),L=(B>>>16)+(this.i(F)>>>16)+(R.i(F)>>>16);O=L>>>16,B&=65535,L&=65535,D[F]=L<<16|B}return new s(D,D[D.length-1]&-2147483648?-1:0)};function N(R,I){return R.add(C(I))}n.j=function(R){if(E(this)||E(R))return p;if(A(this))return A(R)?C(this).j(C(R)):C(C(this).j(R));if(A(R))return C(this.j(C(R)));if(this.l(y)<0&&R.l(y)<0)return f(this.m()*R.m());const I=this.g.length+R.g.length,D=[];for(var O=0;O<2*I;O++)D[O]=0;for(O=0;O<this.g.length;O++)for(let F=0;F<R.g.length;F++){const B=this.i(O)>>>16,L=this.i(O)&65535,te=R.i(F)>>>16,be=R.i(F)&65535;D[2*O+2*F]+=L*be,P(D,2*O+2*F),D[2*O+2*F+1]+=B*be,P(D,2*O+2*F+1),D[2*O+2*F+1]+=L*te,P(D,2*O+2*F+1),D[2*O+2*F+2]+=B*te,P(D,2*O+2*F+2)}for(R=0;R<I;R++)D[R]=D[2*R+1]<<16|D[2*R];for(R=I;R<2*I;R++)D[R]=0;return new s(D,0)};function P(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function M(R,I){this.g=R,this.h=I}function j(R,I){if(E(I))throw Error("division by zero");if(E(R))return new M(p,p);if(A(R))return I=j(C(R),I),new M(C(I.g),C(I.h));if(A(I))return I=j(R,C(I)),new M(C(I.g),I.h);if(R.g.length>30){if(A(R)||A(I))throw Error("slowDivide_ only works with positive integers.");for(var D=v,O=I;O.l(R)<=0;)D=H(D),O=H(O);var F=$(D,1),B=$(O,1);for(O=$(O,2),D=$(D,2);!E(O);){var L=B.add(O);L.l(R)<=0&&(F=F.add(D),B=L),O=$(O,1),D=$(D,1)}return I=N(R,F.j(I)),new M(F,I)}for(F=p;R.l(I)>=0;){for(D=Math.max(1,Math.floor(R.m()/I.m())),O=Math.ceil(Math.log(D)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),B=f(D),L=B.j(I);A(L)||L.l(R)>0;)D-=O,B=f(D),L=B.j(I);E(B)&&(B=v),F=F.add(B),R=N(R,L)}return new M(F,R)}n.B=function(R){return j(this,R).h},n.and=function(R){const I=Math.max(this.g.length,R.g.length),D=[];for(let O=0;O<I;O++)D[O]=this.i(O)&R.i(O);return new s(D,this.h&R.h)},n.or=function(R){const I=Math.max(this.g.length,R.g.length),D=[];for(let O=0;O<I;O++)D[O]=this.i(O)|R.i(O);return new s(D,this.h|R.h)},n.xor=function(R){const I=Math.max(this.g.length,R.g.length),D=[];for(let O=0;O<I;O++)D[O]=this.i(O)^R.i(O);return new s(D,this.h^R.h)};function H(R){const I=R.g.length+1,D=[];for(let O=0;O<I;O++)D[O]=R.i(O)<<1|R.i(O-1)>>>31;return new s(D,R.h)}function $(R,I){const D=I>>5;I%=32;const O=R.g.length-D,F=[];for(let B=0;B<O;B++)F[B]=I>0?R.i(B+D)>>>I|R.i(B+D+1)<<32-I:R.i(B+D);return new s(F,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,yI=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=h,fs=s}).apply(typeof U2<"u"?U2:typeof self<"u"?self:typeof window<"u"?window:{});var Kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xI,mc,_I,vd,zm,wI,EI,AI;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kh=="object"&&Kh];for(var w=0;w<m.length;++w){var T=m[w];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function i(m,w){if(w)e:{var T=r;m=m.split(".");for(var k=0;k<m.length-1;k++){var X=m[k];if(!(X in T))break e;T=T[X]}m=m[m.length-1],k=T[m],w=w(k),w!=k&&w!=null&&e(T,m,{configurable:!0,writable:!0,value:w})}}i("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(m){return m||function(w){var T=[],k;for(k in w)Object.prototype.hasOwnProperty.call(w,k)&&T.push([k,w[k]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function a(m){var w=typeof m;return w=="object"&&m!=null||w=="function"}function c(m,w,T){return m.call.apply(m.bind,arguments)}function f(m,w,T){return f=c,f.apply(null,arguments)}function h(m,w){var T=Array.prototype.slice.call(arguments,1);return function(){var k=T.slice();return k.push.apply(k,arguments),m.apply(this,k)}}function p(m,w){function T(){}T.prototype=w.prototype,m.Z=w.prototype,m.prototype=new T,m.prototype.constructor=m,m.Ob=function(k,X,ee){for(var fe=Array(arguments.length-2),He=2;He<arguments.length;He++)fe[He-2]=arguments[He];return w.prototype[X].apply(k,fe)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function y(m){const w=m.length;if(w>0){const T=Array(w);for(let k=0;k<w;k++)T[k]=m[k];return T}return[]}function E(m,w){for(let k=1;k<arguments.length;k++){const X=arguments[k];var T=typeof X;if(T=T!="object"?T:X?Array.isArray(X)?"array":T:"null",T=="array"||T=="object"&&typeof X.length=="number"){T=m.length||0;const ee=X.length||0;m.length=T+ee;for(let fe=0;fe<ee;fe++)m[T+fe]=X[fe]}else m.push(X)}}class A{constructor(w,T){this.i=w,this.j=T,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function C(m){s.setTimeout(()=>{throw m},0)}function N(){var m=R;let w=null;return m.g&&(w=m.g,m.g=m.g.next,m.g||(m.h=null),w.next=null),w}class P{constructor(){this.h=this.g=null}add(w,T){const k=M.get();k.set(w,T),this.h?this.h.next=k:this.g=k,this.h=k}}var M=new A(()=>new j,m=>m.reset());class j{constructor(){this.next=this.g=this.h=null}set(w,T){this.h=w,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let H,$=!1,R=new P,I=()=>{const m=Promise.resolve(void 0);H=()=>{m.then(D)}};function D(){for(var m;m=N();){try{m.h.call(m.g)}catch(T){C(T)}var w=M;w.j(m),w.h<100&&(w.h++,m.next=w.g,w.g=m)}$=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(m,w){this.type=m,this.g=this.target=w,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var m=!1,w=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const T=()=>{};s.addEventListener("test",T,w),s.removeEventListener("test",T,w)}catch{}return m})();function L(m){return/^[\s\xa0]*$/.test(m)}function te(m,w){F.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,w)}p(te,F),te.prototype.init=function(m,w){const T=this.type=m.type,k=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=w,w=m.relatedTarget,w||(T=="mouseover"?w=m.fromElement:T=="mouseout"&&(w=m.toElement)),this.relatedTarget=w,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&te.Z.h.call(this)},te.prototype.h=function(){te.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),Oe=0;function xe(m,w,T,k,X){this.listener=m,this.proxy=null,this.src=w,this.type=T,this.capture=!!k,this.ha=X,this.key=++Oe,this.da=this.fa=!1}function Z(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function me(m,w,T){for(const k in m)w.call(T,m[k],k,m)}function de(m,w){for(const T in m)w.call(void 0,m[T],T,m)}function q(m){const w={};for(const T in m)w[T]=m[T];return w}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _e(m,w){let T,k;for(let X=1;X<arguments.length;X++){k=arguments[X];for(T in k)m[T]=k[T];for(let ee=0;ee<oe.length;ee++)T=oe[ee],Object.prototype.hasOwnProperty.call(k,T)&&(m[T]=k[T])}}function Ie(m){this.src=m,this.g={},this.h=0}Ie.prototype.add=function(m,w,T,k,X){const ee=m.toString();m=this.g[ee],m||(m=this.g[ee]=[],this.h++);const fe=We(m,w,k,X);return fe>-1?(w=m[fe],T||(w.fa=!1)):(w=new xe(w,this.src,ee,!!k,X),w.fa=T,m.push(w)),w};function $e(m,w){const T=w.type;if(T in m.g){var k=m.g[T],X=Array.prototype.indexOf.call(k,w,void 0),ee;(ee=X>=0)&&Array.prototype.splice.call(k,X,1),ee&&(Z(w),m.g[T].length==0&&(delete m.g[T],m.h--))}}function We(m,w,T,k){for(let X=0;X<m.length;++X){const ee=m[X];if(!ee.da&&ee.listener==w&&ee.capture==!!T&&ee.ha==k)return X}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),Ke={};function ie(m,w,T,k,X){if(Array.isArray(w)){for(let ee=0;ee<w.length;ee++)ie(m,w[ee],T,k,X);return null}return T=dl(T),m&&m[be]?m.J(w,T,a(k)?!!k.capture:!1,X):Re(m,w,T,!1,k,X)}function Re(m,w,T,k,X,ee){if(!w)throw Error("Invalid event type");const fe=a(X)?!!X.capture:!!X;let He=Pa(m);if(He||(m[ke]=He=new Ie(m)),T=He.add(w,T,k,fe,ee),T.proxy)return T;if(k=et(),T.proxy=k,k.src=m,k.listener=T,m.addEventListener)B||(X=fe),X===void 0&&(X=!1),m.addEventListener(w.toString(),k,X);else if(m.attachEvent)m.attachEvent(ci(w.toString()),k);else if(m.addListener&&m.removeListener)m.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return T}function et(){function m(T){return w.call(m.src,m.listener,T)}const w=If;return m}function bt(m,w,T,k,X){if(Array.isArray(w))for(var ee=0;ee<w.length;ee++)bt(m,w[ee],T,k,X);else k=a(k)?!!k.capture:!!k,T=dl(T),m&&m[be]?(m=m.i,ee=String(w).toString(),ee in m.g&&(w=m.g[ee],T=We(w,T,k,X),T>-1&&(Z(w[T]),Array.prototype.splice.call(w,T,1),w.length==0&&(delete m.g[ee],m.h--)))):m&&(m=Pa(m))&&(w=m.g[w.toString()],m=-1,w&&(m=We(w,T,k,X)),(T=m>-1?w[m]:null)&&Lt(T))}function Lt(m){if(typeof m!="number"&&m&&!m.da){var w=m.src;if(w&&w[be])$e(w.i,m);else{var T=m.type,k=m.proxy;w.removeEventListener?w.removeEventListener(T,k,m.capture):w.detachEvent?w.detachEvent(ci(T),k):w.addListener&&w.removeListener&&w.removeListener(k),(T=Pa(w))?($e(T,m),T.h==0&&(T.src=null,w[ke]=null)):Z(m)}}}function ci(m){return m in Ke?Ke[m]:Ke[m]="on"+m}function If(m,w){if(m.da)m=!0;else{w=new te(w,this);const T=m.listener,k=m.ha||m.src;m.fa&&Lt(m),m=T.call(k,w)}return m}function Pa(m){return m=m[ke],m instanceof Ie?m:null}var Rs="__closure_events_fn_"+(Math.random()*1e9>>>0);function dl(m){return typeof m=="function"?m:(m[Rs]||(m[Rs]=function(w){return m.handleEvent(w)}),m[Rs])}function qt(){O.call(this),this.i=new Ie(this),this.M=this,this.G=null}p(qt,O),qt.prototype[be]=!0,qt.prototype.removeEventListener=function(m,w,T,k){bt(this,m,w,T,k)};function jt(m,w){var T,k=m.G;if(k)for(T=[];k;k=k.G)T.push(k);if(m=m.M,k=w.type||w,typeof w=="string")w=new F(w,m);else if(w instanceof F)w.target=w.target||m;else{var X=w;w=new F(k,m),_e(w,X)}X=!0;let ee,fe;if(T)for(fe=T.length-1;fe>=0;fe--)ee=w.g=T[fe],X=Wr(ee,k,!0,w)&&X;if(ee=w.g=m,X=Wr(ee,k,!0,w)&&X,X=Wr(ee,k,!1,w)&&X,T)for(fe=0;fe<T.length;fe++)ee=w.g=T[fe],X=Wr(ee,k,!1,w)&&X}qt.prototype.N=function(){if(qt.Z.N.call(this),this.i){var m=this.i;for(const w in m.g){const T=m.g[w];for(let k=0;k<T.length;k++)Z(T[k]);delete m.g[w],m.h--}}this.G=null},qt.prototype.J=function(m,w,T,k){return this.i.add(String(m),w,!1,T,k)},qt.prototype.K=function(m,w,T,k){return this.i.add(String(m),w,!0,T,k)};function Wr(m,w,T,k){if(w=m.i.g[String(w)],!w)return!0;w=w.concat();let X=!0;for(let ee=0;ee<w.length;++ee){const fe=w[ee];if(fe&&!fe.da&&fe.capture==T){const He=fe.listener,zt=fe.ha||fe.src;fe.fa&&$e(m.i,fe),X=He.call(zt,k)!==!1&&X}}return X&&!k.defaultPrevented}function pl(m,w){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:s.setTimeout(m,w||0)}function ml(m){m.g=pl(()=>{m.g=null,m.i&&(m.i=!1,ml(m))},m.l);const w=m.h;m.h=null,m.m.apply(null,w)}class Sf extends O{constructor(w,T){super(),this.m=w,this.l=T,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:ml(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Eo(m){O.call(this),this.h=m,this.g={}}p(Eo,O);var gl=[];function Na(m){me(m.g,function(w,T){this.g.hasOwnProperty(T)&&Lt(w)},m),m.g={}}Eo.prototype.N=function(){Eo.Z.N.call(this),Na(this)},Eo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ao=s.JSON.stringify,bf=s.JSON.parse,Ps=class{stringify(m){return s.JSON.stringify(m,void 0)}parse(m){return s.JSON.parse(m,void 0)}};function Co(){}function Rf(){}var To={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Da(){F.call(this,"d")}p(Da,F);function vl(){F.call(this,"c")}p(vl,F);var Gr={},Oa=null;function Io(){return Oa=Oa||new qt}Gr.Ia="serverreachability";function ka(m){F.call(this,Gr.Ia,m)}p(ka,F);function $i(m){const w=Io();jt(w,new ka(w))}Gr.STAT_EVENT="statevent";function Wi(m,w){F.call(this,Gr.STAT_EVENT,m),this.stat=w}p(Wi,F);function Vt(m){const w=Io();jt(w,new Wi(w,m))}Gr.Ja="timingevent";function yl(m,w){F.call(this,Gr.Ja,m),this.size=w}p(yl,F);function So(m,w){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){m()},w)}function bo(){this.g=!0}bo.prototype.ua=function(){this.g=!1};function Pf(m,w,T,k,X,ee){m.info(function(){if(m.g)if(ee){var fe="",He=ee.split("&");for(let dt=0;dt<He.length;dt++){var zt=He[dt].split("=");if(zt.length>1){const Kt=zt[0];zt=zt[1];const yr=Kt.split("_");fe=yr.length>=2&&yr[1]=="type"?fe+(Kt+"="+zt+"&"):fe+(Kt+"=redacted&")}}}else fe=null;else fe=ee;return"XMLHTTP REQ ("+k+") [attempt "+X+"]: "+w+`
`+T+`
`+fe})}function Nf(m,w,T,k,X,ee,fe){m.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+X+"]: "+w+`
`+T+`
`+ee+" "+fe})}function fi(m,w,T,k){m.info(function(){return"XMLHTTP TEXT ("+w+"): "+Ns(m,T)+(k?" "+k:"")})}function Df(m,w){m.info(function(){return"TIMEOUT: "+w})}bo.prototype.info=function(){};function Ns(m,w){if(!m.g)return w;if(!w)return null;try{const ee=JSON.parse(w);if(ee){for(m=0;m<ee.length;m++)if(Array.isArray(ee[m])){var T=ee[m];if(!(T.length<2)){var k=T[1];if(Array.isArray(k)&&!(k.length<1)){var X=k[0];if(X!="noop"&&X!="stop"&&X!="close")for(let fe=1;fe<k.length;fe++)k[fe]=""}}}}return Ao(ee)}catch{return w}}var Ro={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Po={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Of;function Gi(){}p(Gi,Co),Gi.prototype.g=function(){return new XMLHttpRequest},Of=new Gi;function hi(m){return encodeURIComponent(String(m))}function Ma(m){var w=1;m=m.split(":");const T=[];for(;w>0&&m.length;)T.push(m.shift()),w--;return m.length&&T.push(m.join(":")),T}function br(m,w,T,k){this.j=m,this.i=w,this.l=T,this.S=k||1,this.V=new Eo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new kf}function kf(){this.i=null,this.g="",this.h=!1}var Mf={},xl={};function qr(m,w,T){m.M=1,m.A=Ki(Rr(w)),m.u=T,m.R=!0,_l(m,null)}function _l(m,w){m.F=Date.now(),Ds(m),m.B=Rr(m.A);var T=m.B,k=m.S;Array.isArray(k)||(k=[String(k)]),Pl(T.i,"t",k),m.C=0,T=m.j.L,m.h=new kf,m.g=Wf(m.j,T?w:null,!m.u),m.P>0&&(m.O=new Sf(f(m.Y,m,m.g),m.P)),w=m.V,T=m.g,k=m.ba;var X="readystatechange";Array.isArray(X)||(X&&(gl[0]=X.toString()),X=gl);for(let ee=0;ee<X.length;ee++){const fe=ie(T,X[ee],k||w.handleEvent,!1,w.h||w);if(!fe)break;w.g[fe.key]=fe}w=m.J?q(m.J):{},m.u?(m.v||(m.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,w)):(m.v="GET",m.g.ea(m.B,m.v,null,w)),$i(),Pf(m.i,m.v,m.B,m.l,m.S,m.u)}br.prototype.ba=function(m){m=m.target;const w=this.O;w&&xi(m)==3?w.j():this.Y(m)},br.prototype.Y=function(m){try{if(m==this.g)e:{const He=xi(this.g),zt=this.g.ya(),dt=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||Hf(this.g)))){this.K||He!=4||zt==7||(zt==8||dt<=0?$i(3):$i(2)),La(this);var w=this.g.ca();this.X=w;var T=Lf(this);if(this.o=w==200,Nf(this.i,this.v,this.B,this.l,this.S,He,w),this.o){if(this.U&&!this.L){t:{if(this.g){var k,X=this.g;if((k=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(k)){var ee=k;break t}}ee=null}if(m=ee)fi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Et(this,m);else{this.o=!1,this.m=3,Vt(12),qi(this),Os(this);break e}}if(this.R){m=!0;let Kt;for(;!this.K&&this.C<T.length;)if(Kt=Ff(this,T),Kt==xl){He==4&&(this.m=4,Vt(14),m=!1),fi(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==Mf){this.m=4,Vt(15),fi(this.i,this.l,T,"[Invalid Chunk]"),m=!1;break}else fi(this.i,this.l,Kt,null),Et(this,Kt);if(Vf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||T.length!=0||this.h.h||(this.m=1,Vt(16),m=!1),this.o=this.o&&m,!m)fi(this.i,this.l,T,"[Invalid Chunked Response]"),qi(this),Os(this);else if(T.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),zs(fe),fe.P=!0,Vt(11))}}else fi(this.i,this.l,T,null),Et(this,T);He==4&&qi(this),this.o&&!this.K&&(He==4?Ga(this.j,this):(this.o=!1,Ds(this)))}else Dl(this.g),w==400&&T.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),qi(this),Os(this)}}}catch{}finally{}};function Lf(m){if(!Vf(m))return m.g.la();const w=Hf(m.g);if(w==="")return"";let T="";const k=w.length,X=xi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return qi(m),Os(m),"";m.h.i=new s.TextDecoder}for(let ee=0;ee<k;ee++)m.h.h=!0,T+=m.h.i.decode(w[ee],{stream:!(X&&ee==k-1)});return w.length=0,m.h.g+=T,m.C=0,m.h.g}function Vf(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Ff(m,w){var T=m.C,k=w.indexOf(`
`,T);return k==-1?xl:(T=Number(w.substring(T,k)),isNaN(T)?Mf:(k+=1,k+T>w.length?xl:(w=w.slice(k,k+T),m.C=k+T,w)))}br.prototype.cancel=function(){this.K=!0,qi(this)};function Ds(m){m.T=Date.now()+m.H,wl(m,m.H)}function wl(m,w){if(m.D!=null)throw Error("WatchDog timer not null");m.D=So(f(m.aa,m),w)}function La(m){m.D&&(s.clearTimeout(m.D),m.D=null)}br.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Df(this.i,this.B),this.M!=2&&($i(),Vt(17)),qi(this),this.m=2,Os(this)):wl(this,this.T-m)};function Os(m){m.j.I==0||m.K||Ga(m.j,m)}function qi(m){La(m);var w=m.O;w&&typeof w.dispose=="function"&&w.dispose(),m.O=null,Na(m.V),m.g&&(w=m.g,m.g=null,w.abort(),w.dispose())}function Et(m,w){try{var T=m.j;if(T.I!=0&&(T.g==m||Al(T.h,m))){if(!m.L&&Al(T.h,m)&&T.I==3){try{var k=T.Ba.g.parse(w)}catch{k=null}if(Array.isArray(k)&&k.length==3){var X=k;if(X[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<m.F)Wa(T),gr(T);else break e;Ei(T),Vt(18)}}else T.xa=X[1],0<T.xa-T.K&&X[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=So(f(T.Va,T),6e3));ks(T.h)<=1&&T.ta&&(T.ta=void 0)}else vr(T,11)}else if((m.L||T.g==m)&&Wa(T),!L(w))for(X=T.Ba.g.parse(w),w=0;w<X.length;w++){let dt=X[w];const Kt=dt[0];if(!(Kt<=T.K))if(T.K=Kt,dt=dt[1],T.I==2)if(dt[0]=="c"){T.M=dt[1],T.ba=dt[2];const yr=dt[3];yr!=null&&(T.ka=yr,T.j.info("VER="+T.ka));const Ji=dt[4];Ji!=null&&(T.za=Ji,T.j.info("SVER="+T.za));const Ai=dt[5];Ai!=null&&typeof Ai=="number"&&Ai>0&&(k=1.5*Ai,T.O=k,T.j.info("backChannelRequestTimeoutMs_="+k)),k=T;const Ci=m.g;if(Ci){const Xa=Ci.g?Ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var ee=k.h;ee.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Fa(ee,ee.h),ee.h=null))}if(k.G){const Ml=Ci.g?Ci.g.getResponseHeader("X-HTTP-Session-Id"):null;Ml&&(k.wa=Ml,lt(k.J,k.G,Ml))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-m.F,T.j.info("Handshake RTT: "+T.T+"ms")),k=T;var fe=m;if(k.na=kl(k,k.L?k.ba:null,k.W),fe.L){Ms(k.h,fe);var He=fe,zt=k.O;zt&&(He.H=zt),He.D&&(La(He),Ds(He)),k.g=fe}else kn(k);T.i.length>0&&Zi(T)}else dt[0]!="stop"&&dt[0]!="close"||vr(T,7);else T.I==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?vr(T,7):Ha(T):dt[0]!="noop"&&T.l&&T.l.qa(dt),T.A=0)}}$i(4)}catch{}}var Bp=class{constructor(m,w){this.g=m,this.map=w}};function Va(m){this.l=m||10,s.PerformanceNavigationTiming?(m=s.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function El(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ks(m){return m.h?1:m.g?m.g.size:0}function Al(m,w){return m.h?m.h==w:m.g?m.g.has(w):!1}function Fa(m,w){m.g?m.g.add(w):m.h=w}function Ms(m,w){m.h&&m.h==w?m.h=null:m.g&&m.g.has(w)&&m.g.delete(w)}Va.prototype.cancel=function(){if(this.i=dr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function dr(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let w=m.i;for(const T of m.g.values())w=w.concat(T.G);return w}return y(m.i)}var Bf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pr(m,w){if(m){m=m.split("&");for(let T=0;T<m.length;T++){const k=m[T].indexOf("=");let X,ee=null;k>=0?(X=m[T].substring(0,k),ee=m[T].substring(k+1)):X=m[T],w(X,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function di(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;m instanceof di?(this.l=m.l,Ls(this,m.j),this.o=m.o,this.g=m.g,pi(this,m.u),this.h=m.h,No(this,Nl(m.i)),this.m=m.m):m&&(w=String(m).match(Bf))?(this.l=!1,Ls(this,w[1]||"",!0),this.o=Vs(w[2]||""),this.g=Vs(w[3]||"",!0),pi(this,w[4]),this.h=Vs(w[5]||"",!0),No(this,w[6]||"",!0),this.m=Vs(w[7]||"")):(this.l=!1,this.i=new tt(null,this.l))}di.prototype.toString=function(){const m=[];var w=this.j;w&&m.push(Fs(w,Tl,!0),":");var T=this.g;return(T||w=="file")&&(m.push("//"),(w=this.o)&&m.push(Fs(w,Tl,!0),"@"),m.push(hi(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&m.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&m.push("/"),m.push(Fs(T,T.charAt(0)=="/"?Bs:Il,!0))),(T=this.i.toString())&&m.push("?",T),(T=this.m)&&m.push("#",Fs(T,Sl)),m.join("")},di.prototype.resolve=function(m){const w=Rr(this);let T=!!m.j;T?Ls(w,m.j):T=!!m.o,T?w.o=m.o:T=!!m.g,T?w.g=m.g:T=m.u!=null;var k=m.h;if(T)pi(w,m.u);else if(T=!!m.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var X=w.h.lastIndexOf("/");X!=-1&&(k=w.h.slice(0,X+1)+k)}if(X=k,X==".."||X==".")k="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){k=X.lastIndexOf("/",0)==0,X=X.split("/");const ee=[];for(let fe=0;fe<X.length;){const He=X[fe++];He=="."?k&&fe==X.length&&ee.push(""):He==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),k&&fe==X.length&&ee.push("")):(ee.push(He),k=!0)}k=ee.join("/")}else k=X}return T?w.h=k:T=m.i.toString()!=="",T?No(w,Nl(m.i)):T=!!m.m,T&&(w.m=m.m),w};function Rr(m){return new di(m)}function Ls(m,w,T){m.j=T?Vs(w,!0):w,m.j&&(m.j=m.j.replace(/:$/,""))}function pi(m,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);m.u=w}else m.u=null}function No(m,w,T){w instanceof tt?(m.i=w,Ua(m.i,m.l)):(T||(w=Fs(w,Up)),m.i=new tt(w,m.l))}function lt(m,w,T){m.i.set(w,T)}function Ki(m){return lt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Vs(m,w){return m?w?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Fs(m,w,T){return typeof m=="string"?(m=encodeURI(m).replace(w,Cl),T&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Cl(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Tl=/[#\/\?@]/g,Il=/[#\?:]/g,Bs=/[#\?]/g,Up=/[#\?@]/g,Sl=/#/g;function tt(m,w){this.h=this.g=null,this.i=m||null,this.j=!!w}function mi(m){m.g||(m.g=new Map,m.h=0,m.i&&pr(m.i,function(w,T){m.add(decodeURIComponent(w.replace(/\+/g," ")),T)}))}n=tt.prototype,n.add=function(m,w){mi(this),this.i=null,m=gi(this,m);let T=this.g.get(m);return T||this.g.set(m,T=[]),T.push(w),this.h+=1,this};function bl(m,w){mi(m),w=gi(m,w),m.g.has(w)&&(m.i=null,m.h-=m.g.get(w).length,m.g.delete(w))}function Ba(m,w){return mi(m),w=gi(m,w),m.g.has(w)}n.forEach=function(m,w){mi(this),this.g.forEach(function(T,k){T.forEach(function(X){m.call(w,X,k,this)},this)},this)};function Rl(m,w){mi(m);let T=[];if(typeof w=="string")Ba(m,w)&&(T=T.concat(m.g.get(gi(m,w))));else for(m=Array.from(m.g.values()),w=0;w<m.length;w++)T=T.concat(m[w]);return T}n.set=function(m,w){return mi(this),this.i=null,m=gi(this,m),Ba(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[w]),this.h+=1,this},n.get=function(m,w){return m?(m=Rl(this,m),m.length>0?String(m[0]):w):w};function Pl(m,w,T){bl(m,w),T.length>0&&(m.i=null,m.g.set(gi(m,w),y(T)),m.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],w=Array.from(this.g.keys());for(let k=0;k<w.length;k++){var T=w[k];const X=hi(T);T=Rl(this,T);for(let ee=0;ee<T.length;ee++){let fe=X;T[ee]!==""&&(fe+="="+hi(T[ee])),m.push(fe)}}return this.i=m.join("&")};function Nl(m){const w=new tt;return w.i=m.i,m.g&&(w.g=new Map(m.g),w.h=m.h),w}function gi(m,w){return w=String(w),m.j&&(w=w.toLowerCase()),w}function Ua(m,w){w&&!m.j&&(mi(m),m.i=null,m.g.forEach(function(T,k){const X=k.toLowerCase();k!=X&&(bl(this,k),Pl(this,X,T))},m)),m.j=w}function vi(m,w){const T=new bo;if(s.Image){const k=new Image;k.onload=h(wn,T,"TestLoadImage: loaded",!0,w,k),k.onerror=h(wn,T,"TestLoadImage: error",!1,w,k),k.onabort=h(wn,T,"TestLoadImage: abort",!1,w,k),k.ontimeout=h(wn,T,"TestLoadImage: timeout",!1,w,k),s.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=m}else w(!1)}function yi(m,w){const T=new bo,k=new AbortController,X=setTimeout(()=>{k.abort(),wn(T,"TestPingServer: timeout",!1,w)},1e4);fetch(m,{signal:k.signal}).then(ee=>{clearTimeout(X),ee.ok?wn(T,"TestPingServer: ok",!0,w):wn(T,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(X),wn(T,"TestPingServer: error",!1,w)})}function wn(m,w,T,k,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),k(T)}catch{}}function Us(){this.g=new Ps}function Xi(m){this.i=m.Sb||null,this.h=m.ab||!1}p(Xi,Co),Xi.prototype.g=function(){return new mr(this.i,this.h)};function mr(m,w){qt.call(this),this.H=m,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(mr,qt),n=mr.prototype,n.open=function(m,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=w,this.readyState=1,Kr(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(w.body=m),(this.H||s).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Do(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Kr(this)),this.g&&(this.readyState=3,Kr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Uf(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Uf(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var w=m.value?m.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!m.done}))&&(this.response=this.responseText+=w)}m.done?Do(this):Kr(this),this.readyState==3&&Uf(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Do(this))},n.Na=function(m){this.g&&(this.response=m,Do(this))},n.ga=function(){this.g&&Do(this)};function Do(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Kr(m)}n.setRequestHeader=function(m,w){this.A.append(m,w)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],w=this.h.entries();for(var T=w.next();!T.done;)T=T.value,m.push(T[0]+": "+T[1]),T=w.next();return m.join(`\r
`)};function Kr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(mr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function jf(m){let w="";return me(m,function(T,k){w+=k,w+=":",w+=T,w+=`\r
`}),w}function ja(m,w,T){e:{for(k in T){var k=!1;break e}k=!0}k||(T=jf(T),typeof m=="string"?T!=null&&hi(T):lt(m,w,T))}function xt(m){qt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(xt,qt);var zf=/^https?$/i,jp=["POST","PUT"];n=xt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,w,T,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);w=w?w.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Of.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(w,String(m),!0),this.B=!1}catch(ee){Oo(this,ee);return}if(m=T||"",T=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var X in k)T.set(X,k[X]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const ee of k.keys())T.set(ee,k.get(ee));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(T.keys()).find(ee=>ee.toLowerCase()=="content-type"),X=s.FormData&&m instanceof s.FormData,!(Array.prototype.indexOf.call(jp,w,void 0)>=0)||k||X||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,fe]of T)this.g.setRequestHeader(ee,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ee){Oo(this,ee)}};function Oo(m,w){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=w,m.o=5,ko(m),Qi(m)}function ko(m){m.A||(m.A=!0,jt(m,"complete"),jt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,jt(this,"complete"),jt(this,"abort"),Qi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qi(this,!0)),xt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Yi(this):this.Xa())},n.Xa=function(){Yi(this)};function Yi(m){if(m.h&&typeof o<"u"){if(m.v&&xi(m)==4)setTimeout(m.Ca.bind(m),0);else if(jt(m,"readystatechange"),xi(m)==4){m.h=!1;try{const ee=m.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var T;if(!(T=w)){var k;if(k=ee===0){let fe=String(m.D).match(Bf)[1]||null;!fe&&s.self&&s.self.location&&(fe=s.self.location.protocol.slice(0,-1)),k=!zf.test(fe?fe.toLowerCase():"")}T=k}if(T)jt(m,"complete"),jt(m,"success");else{m.o=6;try{var X=xi(m)>2?m.g.statusText:""}catch{X=""}m.l=X+" ["+m.ca()+"]",ko(m)}}finally{Qi(m)}}}}function Qi(m,w){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const T=m.g;m.g=null,w||jt(m,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function xi(m){return m.g?m.g.readyState:0}n.ca=function(){try{return xi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var w=this.g.responseText;return m&&w.indexOf(m)==0&&(w=w.substring(m.length)),bf(w)}};function Hf(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Dl(m){const w={};m=(m.g&&xi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<m.length;k++){if(L(m[k]))continue;var T=Ma(m[k]);const X=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ee=w[X]||[];w[X]=ee,ee.push(T)}de(w,function(k){return k.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _i(m,w,T){return T&&T.internalChannelParams&&T.internalChannelParams[m]||w}function za(m){this.za=0,this.i=[],this.j=new bo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_i("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_i("baseRetryDelayMs",5e3,m),this.Za=_i("retryDelaySeedMs",1e4,m),this.Ta=_i("forwardChannelMaxRetries",2,m),this.va=_i("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Va(m&&m.concurrentRequestLimit),this.Ba=new Us,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=za.prototype,n.ka=8,n.I=1,n.connect=function(m,w,T,k){Vt(0),this.W=m,this.H=w||{},T&&k!==void 0&&(this.H.OSID=T,this.H.OAID=k),this.F=this.X,this.J=kl(this,null,this.W),Zi(this)};function Ha(m){if($a(m),m.I==3){var w=m.V++,T=Rr(m.J);if(lt(T,"SID",m.M),lt(T,"RID",w),lt(T,"TYPE","terminate"),wi(m,T),w=new br(m,m.j,w),w.M=2,w.A=Ki(Rr(T)),T=!1,s.navigator&&s.navigator.sendBeacon)try{T=s.navigator.sendBeacon(w.A.toString(),"")}catch{}!T&&s.Image&&(new Image().src=w.A,T=!0),T||(w.g=Wf(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Ds(w)}Hs(m)}function gr(m){m.g&&(zs(m),m.g.cancel(),m.g=null)}function $a(m){gr(m),m.v&&(s.clearTimeout(m.v),m.v=null),Wa(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&s.clearTimeout(m.m),m.m=null)}function Zi(m){if(!El(m.h)&&!m.m){m.m=!0;var w=m.Ea;H||I(),$||(H(),$=!0),R.add(w,m),m.D=0}}function $f(m,w){return ks(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=w.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=So(f(m.Ea,m,w),qa(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const X=new br(this,this.j,m);let ee=this.o;if(this.U&&(ee?(ee=q(ee),_e(ee,this.U)):ee=this.U),this.u!==null||this.R||(X.J=ee,ee=null),this.S)e:{for(var w=0,T=0;T<this.i.length;T++){t:{var k=this.i[T];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(w+=k,w>4096){w=T;break e}if(w===4096||T===this.i.length-1){w=T+1;break e}}w=1e3}else w=1e3;w=Ol(this,X,w),T=Rr(this.J),lt(T,"RID",m),lt(T,"CVER",22),this.G&&lt(T,"X-HTTP-Session-Id",this.G),wi(this,T),ee&&(this.R?w="headers="+hi(jf(ee))+"&"+w:this.u&&ja(T,this.u,ee)),Fa(this.h,X),this.Ra&&lt(T,"TYPE","init"),this.S?(lt(T,"$req",w),lt(T,"SID","null"),X.U=!0,qr(X,T,null)):qr(X,T,w),this.I=2}}else this.I==3&&(m?js(this,m):this.i.length==0||El(this.h)||js(this))};function js(m,w){var T;w?T=w.l:T=m.V++;const k=Rr(m.J);lt(k,"SID",m.M),lt(k,"RID",T),lt(k,"AID",m.K),wi(m,k),m.u&&m.o&&ja(k,m.u,m.o),T=new br(m,m.j,T,m.D+1),m.u===null&&(T.J=m.o),w&&(m.i=w.G.concat(m.i)),w=Ol(m,T,1e3),T.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Fa(m.h,T),qr(T,k,w)}function wi(m,w){m.H&&me(m.H,function(T,k){lt(w,k,T)}),m.l&&me({},function(T,k){lt(w,k,T)})}function Ol(m,w,T){T=Math.min(m.i.length,T);const k=m.l?f(m.l.Ka,m.l,m):null;e:{var X=m.i;let He=-1;for(;;){const zt=["count="+T];He==-1?T>0?(He=X[0].g,zt.push("ofs="+He)):He=0:zt.push("ofs="+He);let dt=!0;for(let Kt=0;Kt<T;Kt++){var ee=X[Kt].g;const yr=X[Kt].map;if(ee-=He,ee<0)He=Math.max(0,X[Kt].g-100),dt=!1;else try{ee="req"+ee+"_"||"";try{var fe=yr instanceof Map?yr:Object.entries(yr);for(const[Ji,Ai]of fe){let Ci=Ai;a(Ai)&&(Ci=Ao(Ai)),zt.push(ee+Ji+"="+encodeURIComponent(Ci))}}catch(Ji){throw zt.push(ee+"type="+encodeURIComponent("_badmap")),Ji}}catch{k&&k(yr)}}if(dt){fe=zt.join("&");break e}}fe=void 0}return m=m.i.splice(0,T),w.G=m,fe}function kn(m){if(!m.g&&!m.v){m.Y=1;var w=m.Da;H||I(),$||(H(),$=!0),R.add(w,m),m.A=0}}function Ei(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=So(f(m.Da,m),qa(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Mo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=So(f(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),gr(this),Mo(this))};function zs(m){m.B!=null&&(s.clearTimeout(m.B),m.B=null)}function Mo(m){m.g=new br(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var w=Rr(m.na);lt(w,"RID","rpc"),lt(w,"SID",m.M),lt(w,"AID",m.K),lt(w,"CI",m.F?"0":"1"),!m.F&&m.ia&&lt(w,"TO",m.ia),lt(w,"TYPE","xmlhttp"),wi(m,w),m.u&&m.o&&ja(w,m.u,m.o),m.O&&(m.g.H=m.O);var T=m.g;m=m.ba,T.M=1,T.A=Ki(Rr(w)),T.u=null,T.R=!0,_l(T,m)}n.Va=function(){this.C!=null&&(this.C=null,gr(this),Ei(this),Vt(19))};function Wa(m){m.C!=null&&(s.clearTimeout(m.C),m.C=null)}function Ga(m,w){var T=null;if(m.g==w){Wa(m),zs(m),m.g=null;var k=2}else if(Al(m.h,w))T=w.G,Ms(m.h,w),k=1;else return;if(m.I!=0){if(w.o)if(k==1){T=w.u?w.u.length:0,w=Date.now()-w.F;var X=m.D;k=Io(),jt(k,new yl(k,T)),Zi(m)}else kn(m);else if(X=w.m,X==3||X==0&&w.X>0||!(k==1&&$f(m,w)||k==2&&Ei(m)))switch(T&&T.length>0&&(w=m.h,w.i=w.i.concat(T)),X){case 1:vr(m,5);break;case 4:vr(m,10);break;case 3:vr(m,6);break;default:vr(m,2)}}}function qa(m,w){let T=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(T*=2),T*w}function vr(m,w){if(m.j.info("Error code "+w),w==2){var T=f(m.bb,m),k=m.Ua;const X=!k;k=new di(k||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Ls(k,"https"),Ki(k),X?vi(k.toString(),T):yi(k.toString(),T)}else Vt(2);m.I=0,m.l&&m.l.pa(w),Hs(m),$a(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Hs(m){if(m.I=0,m.ja=[],m.l){const w=dr(m.h);(w.length!=0||m.i.length!=0)&&(E(m.ja,w),E(m.ja,m.i),m.h.i.length=0,y(m.i),m.i.length=0),m.l.oa()}}function kl(m,w,T){var k=T instanceof di?Rr(T):new di(T);if(k.g!="")w&&(k.g=w+"."+k.g),pi(k,k.u);else{var X=s.location;k=X.protocol,w=w?w+"."+X.hostname:X.hostname,X=+X.port;const ee=new di(null);k&&Ls(ee,k),w&&(ee.g=w),X&&pi(ee,X),T&&(ee.h=T),k=ee}return T=m.G,w=m.wa,T&&w&&lt(k,T,w),lt(k,"VER",m.ka),wi(m,k),k}function Wf(m,w,T){if(w&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=m.Aa&&!m.ma?new xt(new Xi({ab:T})):new xt(m.ma),w.Fa(m.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gf(){}n=Gf.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ka(){}Ka.prototype.g=function(m,w){return new En(m,w)};function En(m,w){qt.call(this),this.g=new za(w),this.l=m,this.h=w&&w.messageUrlParams||null,m=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(m?m["X-WebChannel-Content-Type"]=w.messageContentType:m={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(m?m["X-WebChannel-Client-Profile"]=w.sa:m={"X-WebChannel-Client-Profile":w.sa}),this.g.U=m,(m=w&&w.Qb)&&!L(m)&&(this.g.u=m),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!L(w)&&(this.g.G=w,m=this.h,m!==null&&w in m&&(m=this.h,w in m&&delete m[w])),this.j=new Lo(this)}p(En,qt),En.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Ha(this.g)},En.prototype.o=function(m){var w=this.g;if(typeof m=="string"){var T={};T.__data__=m,m=T}else this.v&&(T={},T.__data__=Ao(m),m=T);w.i.push(new Bp(w.Ya++,m)),w.I==3&&Zi(w)},En.prototype.N=function(){this.g.l=null,delete this.j,Ha(this.g),delete this.g,En.Z.N.call(this)};function qf(m){Da.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var w=m.__sm__;if(w){e:{for(const T in w){m=T;break e}m=void 0}(this.i=m)&&(m=this.i,w=w!==null&&m in w?w[m]:void 0),this.data=w}else this.data=m}p(qf,Da);function Kf(){vl.call(this),this.status=1}p(Kf,vl);function Lo(m){this.g=m}p(Lo,Gf),Lo.prototype.ra=function(){jt(this.g,"a")},Lo.prototype.qa=function(m){jt(this.g,new qf(m))},Lo.prototype.pa=function(m){jt(this.g,new Kf)},Lo.prototype.oa=function(){jt(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,AI=function(){return new Ka},EI=function(){return Io()},wI=Gr,zm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,vd=Ro,Po.COMPLETE="complete",_I=Po,Rf.EventType=To,To.OPEN="a",To.CLOSE="b",To.ERROR="c",To.MESSAGE="d",qt.prototype.listen=qt.prototype.J,mc=Rf,xt.prototype.listenOnce=xt.prototype.K,xt.prototype.getLastError=xt.prototype.Ha,xt.prototype.getLastErrorCode=xt.prototype.ya,xt.prototype.getStatus=xt.prototype.ca,xt.prototype.getResponseJson=xt.prototype.La,xt.prototype.getResponseText=xt.prototype.la,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Fa,xI=xt}).apply(typeof Kh<"u"?Kh:typeof self<"u"?self:typeof window<"u"?window:{});const j2="@firebase/firestore",z2="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jn.UNAUTHENTICATED=new jn(null),jn.GOOGLE_CREDENTIALS=new jn("google-credentials-uid"),jn.FIRST_PARTY=new jn("first-party-uid"),jn.MOCK_USER=new jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new cv("@firebase/firestore");function xu(){return Ea.logLevel}function ve(n,...e){if(Ea.logLevel<=Qe.DEBUG){const t=e.map(Av);Ea.debug(`Firestore (${ol}): ${n}`,...t)}}function vo(n,...e){if(Ea.logLevel<=Qe.ERROR){const t=e.map(Av);Ea.error(`Firestore (${ol}): ${n}`,...t)}}function $u(n,...e){if(Ea.logLevel<=Qe.WARN){const t=e.map(Av);Ea.warn(`Firestore (${ol}): ${n}`,...t)}}function Av(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,CI(n,r,t)}function CI(n,e,t){let r=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw vo(r),new Error(r)}function it(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||CI(e,i,r)}function ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends _o{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(jn.UNAUTHENTICATED)))}shutdown(){}}class k5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class M5{constructor(e){this.t=e,this.currentUser=jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let o=new ki;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ki,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=o;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},a=c=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>a(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ki)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string",31837,{l:r}),new TI(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new jn(e)}}class L5{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class V5{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new L5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(jn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class H2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ur(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const r=o=>{o.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,ve("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new H2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new H2(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=B5(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Ze(n,e){return n<e?-1:n>e?1:0}function Hm(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return z1(i)===z1(o)?Ze(i,o):z1(i)?1:-1}return Ze(n.length,e.length)}const U5=55296,j5=57343;function z1(n){const e=n.charCodeAt(0);return e>=U5&&e<=j5}function Wu(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="__name__";class Ri{constructor(e,t,r){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&De(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ri.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ri?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Ri.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Ze(e.length,t.length)}static compareSegments(e,t){const r=Ri.isNumericId(e),i=Ri.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Ri.extractNumericId(e).compare(Ri.extractNumericId(t)):Hm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fs.fromString(e.substring(4,e.length-2))}}class vt extends Ri{construct(e,t,r){return new vt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new vt(t)}static emptyPath(){return new vt([])}}const z5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nn extends Ri{construct(e,t,r){return new Nn(e,t,r)}static isValidIdentifier(e){return z5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$2}static keyField(){return new Nn([$2])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new pe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new pe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new pe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nn(t)}static emptyPath(){return new Nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(vt.fromString(e))}static fromName(e){return new Pe(vt.fromString(e).popFirst(5))}static empty(){return new Pe(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(n,e,t){if(!t)throw new pe(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function H5(n,e,t,r){if(e===!0&&r===!0)throw new pe(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function W2(n){if(!Pe.isDocumentKey(n))throw new pe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function G2(n){if(Pe.isDocumentKey(n))throw new pe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function pp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De(12329,{type:typeof n})}function Ir(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pp(n);throw new pe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $5(n,e){if(e<=0)throw new pe(re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(n,e){const t={typeString:n};return e&&(t.value=e),t}function pf(n,e){if(!SI(n))throw new pe(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new pe(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=-62135596800,K2=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*K2);return new St(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<q2)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/K2}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:St._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pf(e,St._jsonSchema))return new St(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:Jt("string",St._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new St(0,0))}static max(){return new Fe(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=-1;function W5(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Fe.fromTimestamp(r===1e9?new St(t+1,0):new St(t,r));return new ys(i,Pe.empty(),e)}function G5(n){return new ys(n.readTime,n.key,Gc)}class ys{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ys(Fe.min(),Pe.empty(),Gc)}static max(){return new ys(Fe.max(),Pe.empty(),Gc)}}function q5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Pe.comparator(n.documentKey,e.documentKey),t!==0?t:Ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==K5)throw n;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,r)=>{t(e)}))}static reject(e){return new se(((t,r)=>{r(e)}))}static waitFor(e){return new se(((t,r)=>{let i=0,o=0,s=!1;e.forEach((a=>{++i,a.next((()=>{++o,s&&o===i&&t()}),(c=>r(c)))})),s=!0,o===i&&t()}))}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next((i=>i?se.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,o)=>{r.push(t.call(this,i,o))})),this.waitFor(r)}static mapArray(e,t){return new se(((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const f=c;t(e[f]).next((h=>{s[f]=h,++a,a===o&&r(s)}),(h=>i(h)))}}))}static doWhile(e,t){return new se(((r,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):r()};o()}))}}function Y5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function al(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=-1;function mf(n){return n==null}function zd(n){return n===0&&1/n==-1/0}function Q5(n){return typeof n=="number"&&Number.isInteger(n)&&!zd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="";function Z5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=X2(e)),e=J5(n.get(t),e);return X2(e)}function J5(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case bI:t+="";break;default:t+=o}}return t}function X2(n){return n+bI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Is(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function RI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t){this.comparator=e,this.root=t||bn.EMPTY}insert(e,t){return new Mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xh(this.root,e,this.comparator,!0)}}class Xh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??bn.RED,this.left=i??bn.EMPTY,this.right=o??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new bn(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return bn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Q2(this.data.getIterator())}getIteratorFrom(e){return new Q2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof fn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new fn(this.comparator);return t.data=e,t}}class Q2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.fields=e,e.sort(Nn.comparator)}static empty(){return new Tr([])}unionWith(e){let t=new fn(Nn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Tr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wu(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new PI("Invalid base64 string: "+o):o}})(e);return new On(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new On(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}On.EMPTY_BYTE_STRING=new On("");const eM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xs(n){if(it(!!n,39018),typeof n=="string"){let e=0;const t=eM.exec(n);if(it(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wt(n.seconds),nanos:Wt(n.nanos)}}function Wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function _s(n){return typeof n=="string"?On.fromBase64String(n):On.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="server_timestamp",DI="__type__",OI="__previous_value__",kI="__local_write_time__";function Iv(n){return(n?.mapValue?.fields||{})[DI]?.stringValue===NI}function gp(n){const e=n.mapValue.fields[OI];return Iv(e)?gp(e):e}function qc(n){const e=xs(n.mapValue.fields[kI].timestampValue);return new St(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,t,r,i,o,s,a,c,f,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=h}}const Hd="(default)";class Kc{constructor(e,t){this.projectId=e,this.database=t||Hd}static empty(){return new Kc("","")}get isDefaultDatabase(){return this.database===Hd}isEqual(e){return e instanceof Kc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="__type__",nM="__max__",Yh={mapValue:{}},LI="__vector__",$d="value";function ws(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Iv(n)?4:iM(n)?9007199254740991:rM(n)?10:11:De(28295,{value:n})}function Bi(n,e){if(n===e)return!0;const t=ws(n);if(t!==ws(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qc(n).isEqual(qc(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=xs(i.timestampValue),a=xs(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return _s(i.bytesValue).isEqual(_s(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Wt(i.geoPointValue.latitude)===Wt(o.geoPointValue.latitude)&&Wt(i.geoPointValue.longitude)===Wt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Wt(i.integerValue)===Wt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Wt(i.doubleValue),a=Wt(o.doubleValue);return s===a?zd(s)===zd(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Wu(n.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return(function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Y2(s)!==Y2(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Bi(s[c],a[c])))return!1;return!0})(n,e);default:return De(52216,{left:n})}}function Xc(n,e){return(n.values||[]).find((t=>Bi(t,e)))!==void 0}function Gu(n,e){if(n===e)return 0;const t=ws(n),r=ws(e);if(t!==r)return Ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ze(n.booleanValue,e.booleanValue);case 2:return(function(o,s){const a=Wt(o.integerValue||o.doubleValue),c=Wt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return Z2(n.timestampValue,e.timestampValue);case 4:return Z2(qc(n),qc(e));case 5:return Hm(n.stringValue,e.stringValue);case 6:return(function(o,s){const a=_s(o),c=_s(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){const a=o.split("/"),c=s.split("/");for(let f=0;f<a.length&&f<c.length;f++){const h=Ze(a[f],c[f]);if(h!==0)return h}return Ze(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){const a=Ze(Wt(o.latitude),Wt(s.latitude));return a!==0?a:Ze(Wt(o.longitude),Wt(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return J2(n.arrayValue,e.arrayValue);case 10:return(function(o,s){const a=o.fields||{},c=s.fields||{},f=a[$d]?.arrayValue,h=c[$d]?.arrayValue,p=Ze(f?.values?.length||0,h?.values?.length||0);return p!==0?p:J2(f,h)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Yh.mapValue&&s===Yh.mapValue)return 0;if(o===Yh.mapValue)return 1;if(s===Yh.mapValue)return-1;const a=o.fields||{},c=Object.keys(a),f=s.fields||{},h=Object.keys(f);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const v=Hm(c[p],h[p]);if(v!==0)return v;const y=Gu(a[c[p]],f[h[p]]);if(y!==0)return y}return Ze(c.length,h.length)})(n.mapValue,e.mapValue);default:throw De(23264,{he:t})}}function Z2(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ze(n,e);const t=xs(n),r=xs(e),i=Ze(t.seconds,r.seconds);return i!==0?i:Ze(t.nanos,r.nanos)}function J2(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Gu(t[i],r[i]);if(o)return o}return Ze(t.length,r.length)}function qu(n){return $m(n)}function $m(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=xs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return _s(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Pe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=$m(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${$m(t.fields[s])}`;return i+"}"})(n.mapValue):De(61005,{value:n})}function yd(n){switch(ws(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gp(n);return e?16+yd(e):16;case 5:return 2*n.stringValue.length;case 6:return _s(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+yd(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Is(r.fields,((o,s)=>{i+=o.length+yd(s)})),i})(n.mapValue);default:throw De(13486,{value:n})}}function eE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Wm(n){return!!n&&"integerValue"in n}function Sv(n){return!!n&&"arrayValue"in n}function tE(n){return!!n&&"nullValue"in n}function nE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xd(n){return!!n&&"mapValue"in n}function rM(n){return(n?.mapValue?.fields||{})[MI]?.stringValue===LI}function Pc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Is(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Pc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pc(n.arrayValue.values[t]);return e}return{...n}}function iM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===nM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pc(t)}setAll(e){let t=Nn.emptyPath(),r={},i=[];e.forEach(((s,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Pc(s):i.push(a.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());xd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];xd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Is(t,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new Qn(Pc(this.value))}}function VI(n){const e=[];return Is(n.fields,((t,r)=>{const i=new Nn([t]);if(xd(r)){const o=VI(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)})),new Tr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new yn(e,0,Fe.min(),Fe.min(),Fe.min(),Qn.empty(),0)}static newFoundDocument(e,t,r,i){return new yn(e,1,t,Fe.min(),r,i,0)}static newNoDocument(e,t){return new yn(e,2,t,Fe.min(),Fe.min(),Qn.empty(),0)}static newUnknownDocument(e,t){return new yn(e,3,t,Fe.min(),Fe.min(),Qn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t){this.position=e,this.inclusive=t}}function rE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Pe.comparator(Pe.fromName(s.referenceValue),t.key):r=Gu(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function iE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t="asc"){this.field=e,this.dir=t}}function oM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{}class Zt extends FI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new aM(e,t,r):t==="array-contains"?new cM(e,r):t==="in"?new fM(e,r):t==="not-in"?new hM(e,r):t==="array-contains-any"?new dM(e,r):new Zt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new uM(e,r):new lM(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Gu(t,this.value)):t!==null&&ws(this.value)===ws(t)&&this.matchesComparison(Gu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class li extends FI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new li(e,t)}matches(e){return BI(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function BI(n){return n.op==="and"}function UI(n){return sM(n)&&BI(n)}function sM(n){for(const e of n.filters)if(e instanceof li)return!1;return!0}function Gm(n){if(n instanceof Zt)return n.field.canonicalString()+n.op.toString()+qu(n.value);if(UI(n))return n.filters.map((e=>Gm(e))).join(",");{const e=n.filters.map((t=>Gm(t))).join(",");return`${n.op}(${e})`}}function jI(n,e){return n instanceof Zt?(function(r,i){return i instanceof Zt&&r.op===i.op&&r.field.isEqual(i.field)&&Bi(r.value,i.value)})(n,e):n instanceof li?(function(r,i){return i instanceof li&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,s,a)=>o&&jI(s,i.filters[a])),!0):!1})(n,e):void De(19439)}function zI(n){return n instanceof Zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${qu(t.value)}`})(n):n instanceof li?(function(t){return t.op.toString()+" {"+t.getFilters().map(zI).join(" ,")+"}"})(n):"Filter"}class aM extends Zt{constructor(e,t,r){super(e,t,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class uM extends Zt{constructor(e,t){super(e,"in",t),this.keys=HI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lM extends Zt{constructor(e,t){super(e,"not-in",t),this.keys=HI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function HI(n,e){return(e.arrayValue?.values||[]).map((t=>Pe.fromName(t.referenceValue)))}class cM extends Zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sv(t)&&Xc(t.arrayValue,this.value)}}class fM extends Zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Xc(this.value.arrayValue,t)}}class hM extends Zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xc(this.value.arrayValue,t)}}class dM extends Zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Xc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}}function oE(n,e=null,t=[],r=[],i=null,o=null,s=null){return new pM(n,e,t,r,i,o,s)}function bv(n){const e=ze(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Gm(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),mf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>qu(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>qu(r))).join(",")),e.Te=t}return e.Te}function Rv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iE(n.startAt,e.startAt)&&iE(n.endAt,e.endAt)}function qm(n){return Pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mM(n,e,t,r,i,o,s,a){return new ul(n,e,t,r,i,o,s,a)}function vp(n){return new ul(n)}function sE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $I(n){return n.collectionGroup!==null}function Nc(n){const e=ze(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new fn(Nn.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(a=a.add(f.field))}))})),a})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Yc(o,r))})),t.has(Nn.keyField().canonicalString())||e.Ie.push(new Yc(Nn.keyField(),r))}return e.Ie}function Mi(n){const e=ze(n);return e.Ee||(e.Ee=gM(e,Nc(n))),e.Ee}function gM(n,e){if(n.limitType==="F")return oE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Yc(i.field,o)}));const t=n.endAt?new Wd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Wd(n.startAt.position,n.startAt.inclusive):null;return oE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Km(n,e){const t=n.filters.concat([e]);return new ul(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Gd(n,e,t){return new ul(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yp(n,e){return Rv(Mi(n),Mi(e))&&n.limitType===e.limitType}function WI(n){return`${bv(Mi(n))}|lt:${n.limitType}`}function _u(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>zI(i))).join(", ")}]`),mf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>qu(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>qu(i))).join(",")),`Target(${r})`})(Mi(n))}; limitType=${n.limitType})`}function xp(n,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Pe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(const o of Nc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){const f=rE(s,a,c);return s.inclusive?f<=0:f<0})(r.startAt,Nc(r),i)||r.endAt&&!(function(s,a,c){const f=rE(s,a,c);return s.inclusive?f>=0:f>0})(r.endAt,Nc(r),i))})(n,e)}function vM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GI(n){return(e,t)=>{let r=!1;for(const i of Nc(n)){const o=yM(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function yM(n,e,t){const r=n.field.isKeyField()?Pe.comparator(e.key,t.key):(function(o,s,a){const c=s.data.field(o),f=a.data.field(o);return c!==null&&f!==null?Gu(c,f):De(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return De(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Is(this.inner,((t,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return RI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=new Mt(Pe.comparator);function yo(){return xM}const qI=new Mt(Pe.comparator);function gc(...n){let e=qI;for(const t of n)e=e.insert(t.key,t);return e}function KI(n){let e=qI;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ha(){return Dc()}function XI(){return Dc()}function Dc(){return new ba((n=>n.toString()),((n,e)=>n.isEqual(e)))}const _M=new Mt(Pe.comparator),wM=new fn(Pe.comparator);function Je(...n){let e=wM;for(const t of n)e=e.add(t);return e}const EM=new fn(Ze);function AM(){return EM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zd(e)?"-0":e}}function YI(n){return{integerValue:""+n}}function QI(n,e){return Q5(e)?YI(e):Pv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(){this._=void 0}}function CM(n,e,t){return n instanceof Qc?(function(i,o){const s={fields:{[DI]:{stringValue:NI},[kI]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Iv(o)&&(o=gp(o)),o&&(s.fields[OI]=o),{mapValue:s}})(t,e):n instanceof Zc?JI(n,e):n instanceof Jc?eS(n,e):(function(i,o){const s=ZI(i,o),a=aE(s)+aE(i.Ae);return Wm(s)&&Wm(i.Ae)?YI(a):Pv(i.serializer,a)})(n,e)}function TM(n,e,t){return n instanceof Zc?JI(n,e):n instanceof Jc?eS(n,e):t}function ZI(n,e){return n instanceof ef?(function(r){return Wm(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Qc extends _p{}class Zc extends _p{constructor(e){super(),this.elements=e}}function JI(n,e){const t=tS(e);for(const r of n.elements)t.some((i=>Bi(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Jc extends _p{constructor(e){super(),this.elements=e}}function eS(n,e){let t=tS(e);for(const r of n.elements)t=t.filter((i=>!Bi(i,r)));return{arrayValue:{values:t}}}class ef extends _p{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function aE(n){return Wt(n.integerValue||n.doubleValue)}function tS(n){return Sv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,t){this.field=e,this.transform=t}}function IM(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Zc&&i instanceof Zc||r instanceof Jc&&i instanceof Jc?Wu(r.elements,i.elements,Bi):r instanceof ef&&i instanceof ef?Bi(r.Ae,i.Ae):r instanceof Qc&&i instanceof Qc})(n.transform,e.transform)}class SM{constructor(e,t){this.version=e,this.transformResults=t}}class zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _d(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class wp{}function rS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ep(n.key,zn.none()):new gf(n.key,n.data,zn.none());{const t=n.data,r=Qn.empty();let i=new fn(Nn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ss(n.key,r,new Tr(i.toArray()),zn.none())}}function bM(n,e,t){n instanceof gf?(function(i,o,s){const a=i.value.clone(),c=lE(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Ss?(function(i,o,s){if(!_d(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=lE(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(iS(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Oc(n,e,t,r){return n instanceof gf?(function(o,s,a,c){if(!_d(o.precondition,s))return a;const f=o.value.clone(),h=cE(o.fieldTransforms,c,s);return f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ss?(function(o,s,a,c){if(!_d(o.precondition,s))return a;const f=cE(o.fieldTransforms,c,s),h=s.data;return h.setAll(iS(o)),h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((p=>p.field)))})(n,e,t,r):(function(o,s,a){return _d(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function RM(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=ZI(r.transform,i||null);o!=null&&(t===null&&(t=Qn.empty()),t.set(r.field,o))}return t||null}function uE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wu(r,i,((o,s)=>IM(o,s)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class gf extends wp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ss extends wp{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function iS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function lE(n,e,t){const r=new Map;it(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,TM(s,a,t[i]))}return r}function cE(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,CM(o,s,e))}return r}class Ep extends wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oS extends wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&bM(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Oc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Oc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=XI();return this.mutations.forEach((i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const c=rS(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Fe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Je())}isEqual(e){return this.batchId===e.batchId&&Wu(this.mutations,e.mutations,((t,r)=>uE(t,r)))&&Wu(this.baseMutations,e.baseMutations,((t,r)=>uE(t,r)))}}class Nv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){it(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return _M})();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new Nv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,nt;function sS(n){switch(n){case re.OK:return De(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return De(15467,{code:n})}}function aS(n){if(n===void 0)return vo("GRPC error has no .code"),re.UNKNOWN;switch(n){case Yt.OK:return re.OK;case Yt.CANCELLED:return re.CANCELLED;case Yt.UNKNOWN:return re.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return re.INTERNAL;case Yt.UNAVAILABLE:return re.UNAVAILABLE;case Yt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Yt.NOT_FOUND:return re.NOT_FOUND;case Yt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Yt.ABORTED:return re.ABORTED;case Yt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Yt.DATA_LOSS:return re.DATA_LOSS;default:return De(39323,{code:n})}}(nt=Yt||(Yt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=new fs([4294967295,4294967295],0);function fE(n){const e=OM().encode(n),t=new yI;return t.update(e),new Uint8Array(t.digest())}function hE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new fs([t,r],0),new fs([i,o],0)]}class Dv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new vc(`Invalid padding: ${t}`);if(r<0)throw new vc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new vc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=fs.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(fs.fromNumber(r)));return i.compare(kM)===1&&(i=new fs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=fE(e),[r,i]=hE(t);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new Dv(o,i,t);return r.forEach((a=>s.insert(a))),s}insert(e){if(this.ge===0)return;const t=fE(e),[r,i]=hE(t);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);this.Se(s)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,vf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ap(Fe.min(),i,new Mt(Ze),yo(),Je())}}class vf{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new vf(r,t,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class uS{constructor(e,t){this.targetId=e,this.Ce=t}}class lS{constructor(e,t,r=On.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class dE{constructor(){this.ve=0,this.Fe=pE(),this.Me=On.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),t=Je(),r=Je();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:De(38017,{changeType:o})}})),new vf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=pE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class MM{constructor(e){this.Ge=e,this.ze=new Map,this.je=yo(),this.Je=Qh(),this.He=Qh(),this.Ye=new Mt(Ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(qm(o))if(r===0){const s=new Pe(o.path);this.et(t,s,yn.newNoDocument(s,Fe.min()))}else it(r===1,20013,{expectedCount:r});else{const s=this._t(t);if(s!==r){const a=this.ut(e),c=a?this.ct(a,e,s):1;if(c!==0){this.it(t);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=_s(r).toUint8Array()}catch(c){if(c instanceof PI)return $u("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Dv(s,i,o)}catch(c){return $u(c instanceof vc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((o=>{const s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,s)=>{const a=this.ot(s);if(a){if(o.current&&qm(a.target)){const c=new Pe(a.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,yn.newNoDocument(c,e))}o.Be&&(t.set(s,o.ke()),o.qe())}}));let r=Je();this.He.forEach(((o,s)=>{let a=!0;s.forEachWhile((c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(o))})),this.je.forEach(((o,s)=>s.setReadTime(e)));const i=new Ap(e,t,this.Ye,this.je,r);return this.je=yo(),this.Je=Qh(),this.He=Qh(),this.Ye=new Mt(Ze),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new dE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new fn(Ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new fn(Ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Qh(){return new Mt(Pe.comparator)}function pE(){return new Mt(Pe.comparator)}const LM={asc:"ASCENDING",desc:"DESCENDING"},VM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FM={and:"AND",or:"OR"};class BM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xm(n,e){return n.useProto3Json||mf(e)?e:{value:e}}function qd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function UM(n,e){return qd(n,e.toTimestamp())}function Sr(n){return it(!!n,49232),Fe.fromTimestamp((function(t){const r=xs(t);return new St(r.seconds,r.nanos)})(n))}function Ov(n,e){return Ym(n,e).canonicalString()}function Ym(n,e){const t=(function(i){return new vt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function fS(n){const e=vt.fromString(n);return it(vS(e),10190,{key:e.toString()}),e}function Kd(n,e){return Ov(n.databaseId,e.path)}function kc(n,e){const t=fS(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(dS(t))}function hS(n,e){return Ov(n.databaseId,e)}function jM(n){const e=fS(n);return e.length===4?vt.emptyPath():dS(e)}function Qm(n){return new vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dS(n){return it(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function mE(n,e,t){return{name:Kd(n,e),fields:t.value.mapValue.fields}}function zM(n,e){return"found"in e?(function(r,i){it(!!i.found,43571),i.found.name,i.found.updateTime;const o=kc(r,i.found.name),s=Sr(i.found.updateTime),a=i.found.createTime?Sr(i.found.createTime):Fe.min(),c=new Qn({mapValue:{fields:i.found.fields}});return yn.newFoundDocument(o,s,a,c)})(n,e):"missing"in e?(function(r,i){it(!!i.missing,3894),it(!!i.readTime,22933);const o=kc(r,i.missing),s=Sr(i.readTime);return yn.newNoDocument(o,s)})(n,e):De(7234,{result:e})}function HM(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:De(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,h){return f.useProto3Json?(it(h===void 0||typeof h=="string",58123),On.fromBase64String(h||"")):(it(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),On.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(f){const h=f.code===void 0?re.UNKNOWN:aS(f.code);return new pe(h,f.message||"")})(s);t=new lS(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=kc(n,r.document.name),o=Sr(r.document.updateTime),s=r.document.createTime?Sr(r.document.createTime):Fe.min(),a=new Qn({mapValue:{fields:r.document.fields}}),c=yn.newFoundDocument(i,o,s,a),f=r.targetIds||[],h=r.removedTargetIds||[];t=new wd(f,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=kc(n,r.document),o=r.readTime?Sr(r.readTime):Fe.min(),s=yn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new wd([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=kc(n,r.document),o=r.removedTargetIds||[];t=new wd([],o,i,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new DM(i,o),a=r.targetId;t=new uS(a,s)}}return t}function pS(n,e){let t;if(e instanceof gf)t={update:mE(n,e.key,e.value)};else if(e instanceof Ep)t={delete:Kd(n,e.key)};else if(e instanceof Ss)t={update:mE(n,e.key,e.data),updateMask:ZM(e.fieldMask)};else{if(!(e instanceof oS))return De(16599,{Vt:e.type});t={verify:Kd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,s){const a=s.transform;if(a instanceof Qc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Zc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Jc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ef)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw De(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:UM(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:De(27497)})(n,e.precondition)),t}function $M(n,e){return n&&n.length>0?(it(e!==void 0,14353),n.map((t=>(function(i,o){let s=i.updateTime?Sr(i.updateTime):Sr(o);return s.isEqual(Fe.min())&&(s=Sr(o)),new SM(s,i.transformResults||[])})(t,e)))):[]}function WM(n,e){return{documents:[hS(n,e.path)]}}function GM(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=hS(n,i);const o=(function(f){if(f.length!==0)return gS(li.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const s=(function(f){if(f.length!==0)return f.map((h=>(function(v){return{field:wu(v.field),direction:XM(v.dir)}})(h)))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=Xm(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:i}}function qM(n){let e=jM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){it(r===1,65062);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){const v=mS(p);return v instanceof li&&UI(v)?v.getFilters():[v]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map((v=>(function(E){return new Yc(Eu(E.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(v)))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let v;return v=typeof p=="object"?p.value:p,mf(v)?null:v})(t.limit));let c=null;t.startAt&&(c=(function(p){const v=!!p.before,y=p.values||[];return new Wd(y,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(p){const v=!p.before,y=p.values||[];return new Wd(y,v)})(t.endAt)),mM(e,i,s,o,a,"F",c,f)}function KM(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Eu(t.unaryFilter.field);return Zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Eu(t.unaryFilter.field);return Zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Eu(t.unaryFilter.field);return Zt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Eu(t.unaryFilter.field);return Zt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Zt.create(Eu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return li.create(t.compositeFilter.filters.map((r=>mS(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(t.compositeFilter.op))})(n):De(30097,{filter:n})}function XM(n){return LM[n]}function YM(n){return VM[n]}function QM(n){return FM[n]}function wu(n){return{fieldPath:n.canonicalString()}}function Eu(n){return Nn.fromServerFormat(n.fieldPath)}function gS(n){return n instanceof Zt?(function(t){if(t.op==="=="){if(nE(t.value))return{unaryFilter:{field:wu(t.field),op:"IS_NAN"}};if(tE(t.value))return{unaryFilter:{field:wu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(nE(t.value))return{unaryFilter:{field:wu(t.field),op:"IS_NOT_NAN"}};if(tE(t.value))return{unaryFilter:{field:wu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wu(t.field),op:YM(t.op),value:t.value}}})(n):n instanceof li?(function(t){const r=t.getFilters().map((i=>gS(i)));return r.length===1?r[0]:{compositeFilter:{op:QM(t.op),filters:r}}})(n):De(54877,{filter:n})}function ZM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function vS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,t,r,i,o=Fe.min(),s=Fe.min(),a=On.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e){this.yt=e}}function e9(n){const e=qM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Gd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(){this.Cn=new n9}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(ys.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(ys.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class n9{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new fn(vt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new fn(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yS=41943040;class ar{static withCacheSize(e){return new ar(e,ar.DEFAULT_COLLECTION_PERCENTILE,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar.DEFAULT_COLLECTION_PERCENTILE=10,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ar.DEFAULT=new ar(yS,ar.DEFAULT_COLLECTION_PERCENTILE,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ar.DISABLED=new ar(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ku(0)}static cr(){return new Ku(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="LruGarbageCollector",r9=1048576;function yE([n,e],[t,r]){const i=Ze(n,t);return i===0?Ze(e,r):i}class i9{constructor(e){this.Ir=e,this.buffer=new fn(yE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();yE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class o9{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(vE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){al(t)?ve(vE,"Ignoring IndexedDB error during garbage collection: ",t):await sl(t)}await this.Vr(3e5)}))}}class s9{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(mp.ce);const r=new i9(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(gE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,c,f;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(r=p,a=Date.now(),this.removeTargets(e,r,t)))).next((p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(f=Date.now(),xu()<=Qe.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(f-c)+`ms
Total Duration: ${f-h}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p}))))}}function a9(n,e){return new s9(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(){this.changes=new ba((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Oc(r.mutation,i,Tr.empty(),St.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Je()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Je()){const i=ha();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((o=>{let s=gc();return o.forEach(((a,c)=>{s=s.insert(a,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,t){const r=ha();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Je())))}populateOverlays(e,t,r){const i=[];return r.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((s,a)=>{t.set(s,a)}))}))}computeViews(e,t,r,i){let o=yo();const s=Dc(),a=(function(){return Dc()})();return t.forEach(((c,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof Ss)?o=o.insert(f.key,f):h!==void 0?(s.set(f.key,h.mutation.getFieldMask()),Oc(h.mutation,f,h.mutation.getFieldMask(),St.now())):s.set(f.key,Tr.empty())})),this.recalculateAndSaveOverlays(e,o).next((c=>(c.forEach(((f,h)=>s.set(f,h))),t.forEach(((f,h)=>a.set(f,new l9(h,s.get(f)??null)))),a)))}recalculateAndSaveOverlays(e,t){const r=Dc();let i=new Mt(((s,a)=>s-a)),o=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((s=>{for(const a of s)a.keys().forEach((c=>{const f=t.get(c);if(f===null)return;let h=r.get(c)||Tr.empty();h=a.applyToLocalView(f,h),r.set(c,h);const p=(i.get(a.batchId)||Je()).add(c);i=i.insert(a.batchId,p)}))})).next((()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),f=c.key,h=c.value,p=XI();h.forEach((v=>{if(!o.has(v)){const y=rS(t.get(v),r.get(v));y!==null&&p.set(v,y),o=o.add(v)}})),s.push(this.documentOverlayCache.saveOverlays(e,f,p))}return se.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return Pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$I(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):se.resolve(ha());let a=Gc,c=o;return s.next((f=>se.forEach(f,((h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?se.resolve():this.remoteDocumentCache.getEntry(e,h).next((v=>{c=c.insert(h,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,c,f,Je()))).next((h=>({batchId:a,changes:KI(h)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next((r=>{let i=gc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=gc();return this.indexManager.getCollectionParents(e,o).next((a=>se.forEach(a,(c=>{const f=(function(p,v){return new ul(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((h=>{h.forEach(((p,v)=>{s=s.insert(p,v)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i)))).next((s=>{o.forEach(((c,f)=>{const h=f.getKey();s.get(h)===null&&(s=s.insert(h,yn.newInvalidDocument(h)))}));let a=gc();return s.forEach(((c,f)=>{const h=o.get(c);h!==void 0&&Oc(h.mutation,f,Tr.empty(),St.now()),xp(t,f)&&(a=a.insert(c,f))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Sr(i.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:e9(i.bundledQuery),readTime:Sr(i.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(){this.overlays=new Mt(Pe.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ha();return se.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,o)=>{this.St(e,t,o)})),se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const i=ha(),o=t.length+1,s=new Pe(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,f=c.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Mt(((f,h)=>f-h));const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let h=o.get(f.largestBatchId);h===null&&(h=ha(),o=o.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const a=ha(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,h)=>a.set(f,h))),!(a.size()>=i)););return se.resolve(a)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new NM(t,r));let o=this.qr.get(t);o===void 0&&(o=Je(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(){this.sessionToken=On.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(){this.Qr=new fn(vn.$r),this.Ur=new fn(vn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new vn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new vn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Pe(new vt([])),r=new vn(t,e),i=new vn(t,e+1),o=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),o.push(s.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Pe(new vt([])),r=new vn(t,e),i=new vn(t,e+1);let o=Je();return this.Ur.forEachInRange([r,i],(s=>{o=o.add(s.key)})),o}containsKey(e){const t=new vn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class vn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Pe.comparator(e.key,t.key)||Ze(e.Yr,t.Yr)}static Kr(e,t){return Ze(e.Yr,t.Yr)||Pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new fn(vn.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new PM(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.Zr=this.Zr.add(new vn(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return se.resolve(s)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Tv:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vn(t,0),i=new vn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(s=>{const a=this.Xr(s.Yr);o.push(a)})),se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fn(Ze);return t.forEach((i=>{const o=new vn(i,0),s=new vn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],(a=>{r=r.add(a.Yr)}))})),se.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Pe.isDocumentKey(o)||(o=o.child(""));const s=new vn(new Pe(o),0);let a=new fn(Ze);return this.Zr.forEachWhile((c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(a=a.add(c.Yr)),!0)}),s),se.resolve(this.ti(a))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){it(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return se.forEach(t.mutations,(i=>{const o=new vn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new vn(t,0),i=this.Zr.firstAfterOrEqual(r);return se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e){this.ri=e,this.docs=(function(){return new Mt(Pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():yn.newInvalidDocument(t))}getEntries(e,t){let r=yo();return t.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():yn.newInvalidDocument(i))})),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=yo();const s=t.path,a=new Pe(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:f,value:{document:h}}=c.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||q5(G5(h),r)<=0||(i.has(h.key)||xp(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,r,i){De(9500)}ii(e,t){return se.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new g9(this)}getSize(e){return se.resolve(this.size)}}class g9 extends u9{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e){this.persistence=e,this.si=new ba((t=>bv(t)),Rv),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.oi=0,this._i=new kv,this.targetCount=0,this.ai=Ku.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ku(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach(((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),se.waitFor(o).next((()=>i))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),se.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((s=>{o.push(i.markPotentiallyOrphaned(e,s))})),se.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,t){this.ui={},this.overlays={},this.ci=new mp(0),this.li=!1,this.li=!0,this.hi=new d9,this.referenceDelegate=e(this),this.Pi=new v9(this),this.indexManager=new t9,this.remoteDocumentCache=(function(i){return new m9(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new JM(t),this.Ii=new f9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new h9,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new p9(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ve("MemoryPersistence","Starting transaction:",e);const i=new y9(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,t){return se.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class y9 extends X5{constructor(e){super(),this.currentSequenceNumber=e}}class Mv{constructor(e){this.persistence=e,this.Ri=new kv,this.Vi=null}static mi(e){return new Mv(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(r=>{const i=Pe.fromPath(r);return this.gi(e,i).next((o=>{o||t.removeEntry(i,Fe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Xd{constructor(e,t){this.persistence=e,this.pi=new ba((r=>Z5(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=a9(this,t)}static mi(e,t){return new Xd(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?se.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,t).next((a=>{a||(r++,o.removeEntry(s,Fe.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),se.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yd(e.data.value)),t}br(e,t,r){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return se.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Je(),i=Je();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Lv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return hD()?8:Y5($n())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next((s=>{o.result=s})).next((()=>{if(!o.result)return this.ws(e,t,i,r).next((s=>{o.result=s}))})).next((()=>{if(o.result)return;const s=new x9;return this.Ss(e,t,s).next((a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)}))})).next((()=>o.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(xu()<=Qe.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",_u(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(xu()<=Qe.DEBUG&&ve("QueryEngine","Query:",_u(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(xu()<=Qe.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",_u(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(t))):se.resolve())}ys(e,t){if(sE(t))return se.resolve(null);let r=Mi(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Gd(t,null,"F"),r=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const s=Je(...o);return this.ps.getDocuments(e,s).next((a=>this.indexManager.getMinOffset(e,r).next((c=>{const f=this.Ds(t,a);return this.Cs(t,f,s,c.readTime)?this.ys(e,Gd(t,null,"F")):this.vs(e,f,t,c)}))))})))))}ws(e,t,r,i){return sE(t)||i.isEqual(Fe.min())?se.resolve(null):this.ps.getDocuments(e,r).next((o=>{const s=this.Ds(t,o);return this.Cs(t,s,r,i)?se.resolve(null):(xu()<=Qe.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_u(t)),this.vs(e,s,t,W5(i,Gc)).next((a=>a)))}))}Ds(e,t){let r=new fn(GI(e));return t.forEach(((i,o)=>{xp(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return xu()<=Qe.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",_u(t)),this.ps.getDocumentsMatchingQuery(e,t,ys.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(t.forEach((s=>{o=o.insert(s.key,s)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="LocalStore",w9=3e8;class E9{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Mt(Ze),this.xs=new ba((o=>bv(o)),Rv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c9(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function A9(n,e,t,r){return new E9(n,e,t,r)}async function _S(n,e){const t=ze(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const s=[],a=[];let c=Je();for(const f of i){s.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}for(const f of o){a.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next((f=>({Ls:f,removedBatchIds:s,addedBatchIds:a})))}))}))}function C9(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,c,f,h){const p=f.batch,v=p.keys();let y=se.resolve();return v.forEach((E=>{y=y.next((()=>h.getEntry(c,E))).next((A=>{const C=f.docVersions.get(E);it(C!==null,48541),A.version.compareTo(C)<0&&(p.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),h.addEntry(A)))}))})),y.next((()=>a.mutationQueue.removeMutationBatch(c,p)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Je();for(let f=0;f<a.mutationResults.length;++f)a.mutationResults[f].transformResults.length>0&&(c=c.add(a.batch.mutations[f].key));return c})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function wS(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function T9(n,e){const t=ze(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const a=[];e.targetChanges.forEach(((h,p)=>{const v=i.get(p);if(!v)return;a.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,p).next((()=>t.Pi.addMatchingKeys(o,h.addedDocuments,p))));let y=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(On.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(A,C,N){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=w9?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(v,y,h)&&a.push(t.Pi.updateTargetData(o,y))}));let c=yo(),f=Je();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))})),a.push(I9(o,s,e.documentUpdates).next((h=>{c=h.ks,f=h.qs}))),!r.isEqual(Fe.min())){const h=t.Pi.getLastRemoteSnapshotVersion(o).next((p=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));a.push(h)}return se.waitFor(a).next((()=>s.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,c,f))).next((()=>c))})).then((o=>(t.Ms=i,o)))}function I9(n,e,t){let r=Je(),i=Je();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let s=yo();return t.forEach(((a,c)=>{const f=o.get(a);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Fe.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):ve(Vv,"Ignoring outdated watch update for ",a,". Current version:",f.version," Watch version:",c.version)})),{ks:s,qs:i}}))}function S9(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Tv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function b9(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((o=>o?(i=o,se.resolve(i)):t.Pi.allocateTargetId(r).next((s=>(i=new ss(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Zm(n,e,t){const r=ze(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!al(s))throw s;ve(Vv,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function xE(n,e,t){const r=ze(n);let i=Fe.min(),o=Je();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,f,h){const p=ze(c),v=p.xs.get(h);return v!==void 0?se.resolve(p.Ms.get(v)):p.Pi.getTargetData(f,h)})(r,s,Mi(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next((c=>{o=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:Fe.min(),t?o:Je()))).next((a=>(R9(r,vM(e),a),{documents:a,Qs:o})))))}function R9(n,e,t){let r=n.Os.get(e)||Fe.min();t.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class _E{constructor(){this.activeTargetIds=AM()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class P9{constructor(){this.Mo=new _E,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _E,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="ConnectivityMonitor";class EE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(wE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(wE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh=null;function Jm(){return Zh===null?Zh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zh++,"0x"+Zh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="RestConnection",D9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class O9{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Hd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const s=Jm(),a=this.zo(e,t.toUriEncodedString());ve(H1,`Sending RPC '${e}' ${s}:`,a,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);const{host:f}=new URL(a),h=nl(f);return this.Jo(e,a,c,r,h).then((p=>(ve(H1,`Received RPC '${e}' ${s}: `,p),p)),(p=>{throw $u(H1,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p}))}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,t){const r=D9[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="WebChannelConnection";class M9 extends O9{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const s=Jm();return new Promise(((a,c)=>{const f=new xI;f.setWithCredentials(!0),f.listenOnce(_I.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case vd.NO_ERROR:const p=f.getResponseJson();ve(Bn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case vd.TIMEOUT:ve(Bn,`RPC '${e}' ${s} timed out`),c(new pe(re.DEADLINE_EXCEEDED,"Request time out"));break;case vd.HTTP_ERROR:const v=f.getStatus();if(ve(Bn,`RPC '${e}' ${s} failed with status:`,v,"response text:",f.getResponseText()),v>0){let y=f.getResponseJson();Array.isArray(y)&&(y=y[0]);const E=y?.error;if(E&&E.status&&E.message){const A=(function(N){const P=N.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(P)>=0?P:re.UNKNOWN})(E.status);c(new pe(A,E.message))}else c(new pe(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new pe(re.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:s,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ve(Bn,`RPC '${e}' ${s} completed.`)}}));const h=JSON.stringify(i);ve(Bn,`RPC '${e}' ${s} sending request:`,i),f.send(t,"POST",h,r,15)}))}T_(e,t,r){const i=Jm(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=AI(),a=EI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const h=o.join("");ve(Bn,`Creating RPC '${e}' stream ${i}: ${h}`,c);const p=s.createWebChannel(h,c);this.I_(p);let v=!1,y=!1;const E=new k9({Yo:C=>{y?ve(Bn,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(v||(ve(Bn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),ve(Bn,`RPC '${e}' stream ${i} sending:`,C),p.send(C))},Zo:()=>p.close()}),A=(C,N,P)=>{C.listen(N,(M=>{try{P(M)}catch(j){setTimeout((()=>{throw j}),0)}}))};return A(p,mc.EventType.OPEN,(()=>{y||(ve(Bn,`RPC '${e}' stream ${i} transport opened.`),E.o_())})),A(p,mc.EventType.CLOSE,(()=>{y||(y=!0,ve(Bn,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(p))})),A(p,mc.EventType.ERROR,(C=>{y||(y=!0,$u(Bn,`RPC '${e}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),E.a_(new pe(re.UNAVAILABLE,"The operation could not be completed")))})),A(p,mc.EventType.MESSAGE,(C=>{if(!y){const N=C.data[0];it(!!N,16349);const P=N,M=P?.error||P[0]?.error;if(M){ve(Bn,`RPC '${e}' stream ${i} received error:`,M);const j=M.status;let H=(function(I){const D=Yt[I];if(D!==void 0)return aS(D)})(j),$=M.message;H===void 0&&(H=re.INTERNAL,$="Unknown error status: "+j+" with message "+M.message),y=!0,E.a_(new pe(H,$)),p.close()}else ve(Bn,`RPC '${e}' stream ${i} received:`,N),E.u_(N)}})),A(a,wI.STAT_EVENT,(C=>{C.stat===zm.PROXY?ve(Bn,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===zm.NOPROXY&&ve(Bn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function $1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(n){return new BM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="PersistentStream";class ES{constructor(e,t,r,i,o,s,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Fv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(vo(t.toString()),vo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new pe(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(AE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ve(AE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class L9 extends ES{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=HM(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Fe.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Fe.min():s.readTime?Sr(s.readTime):Fe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Qm(this.serializer),t.addTarget=(function(o,s){let a;const c=s.target;if(a=qm(c)?{documents:WM(o,c)}:{query:GM(o,c).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=cS(o,s.resumeToken);const f=Xm(o,s.expectedCount);f!==null&&(a.expectedCount=f)}else if(s.snapshotVersion.compareTo(Fe.min())>0){a.readTime=qd(o,s.snapshotVersion.toTimestamp());const f=Xm(o,s.expectedCount);f!==null&&(a.expectedCount=f)}return a})(this.serializer,e);const r=KM(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Qm(this.serializer),t.removeTarget=e,this.q_(t)}}class V9 extends ES{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=$M(e.writeResults,e.commitTime),r=Sr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Qm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>pS(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{}class B9 extends F9{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,s])=>this.connection.Go(e,Ym(t,r),i,o,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(re.UNKNOWN,o.toString())}))}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Ho(e,Ym(t,r),i,s,a,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new pe(re.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class U9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vo(t),this.aa=!1):ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="RemoteStore";class j9{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{Ra(this)&&(ve(Aa,"Restarting streams for network reachability change."),await(async function(c){const f=ze(c);f.Ea.add(4),await yf(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Tp(f)})(this))}))})),this.Ra=new U9(r,i)}}async function Tp(n){if(Ra(n))for(const e of n.da)await e(!0)}async function yf(n){for(const e of n.da)await e(!1)}function AS(n,e){const t=ze(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),zv(t)?jv(t):ll(t).O_()&&Uv(t,e))}function Bv(n,e){const t=ze(n),r=ll(t);t.Ia.delete(e),r.O_()&&CS(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ra(t)&&t.Ra.set("Unknown"))}function Uv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ll(n).Y_(e)}function CS(n,e){n.Va.Ue(e),ll(n).Z_(e)}function jv(n){n.Va=new MM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ll(n).start(),n.Ra.ua()}function zv(n){return Ra(n)&&!ll(n).x_()&&n.Ia.size>0}function Ra(n){return ze(n).Ea.size===0}function TS(n){n.Va=void 0}async function z9(n){n.Ra.set("Online")}async function H9(n){n.Ia.forEach(((e,t)=>{Uv(n,e)}))}async function $9(n,e){TS(n),zv(n)?(n.Ra.ha(e),jv(n)):n.Ra.set("Unknown")}async function W9(n,e,t){if(n.Ra.set("Online"),e instanceof lS&&e.state===2&&e.cause)try{await(async function(i,o){const s=o.cause;for(const a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){ve(Aa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yd(n,r)}else if(e instanceof wd?n.Va.Ze(e):e instanceof uS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Fe.min()))try{const r=await wS(n.localStore);t.compareTo(r)>=0&&await(function(o,s){const a=o.Va.Tt(s);return a.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.Ia.get(f);h&&o.Ia.set(f,h.withResumeToken(c.resumeToken,s))}})),a.targetMismatches.forEach(((c,f)=>{const h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(On.EMPTY_BYTE_STRING,h.snapshotVersion)),CS(o,c);const p=new ss(h.target,c,f,h.sequenceNumber);Uv(o,p)})),o.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){ve(Aa,"Failed to raise snapshot:",r),await Yd(n,r)}}async function Yd(n,e,t){if(!al(e))throw e;n.Ea.add(1),await yf(n),n.Ra.set("Offline"),t||(t=()=>wS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ve(Aa,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Tp(n)}))}function IS(n,e){return e().catch((t=>Yd(n,t,e)))}async function Ip(n){const e=ze(n),t=Es(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Tv;for(;G9(e);)try{const i=await S9(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,q9(e,i)}catch(i){await Yd(e,i)}SS(e)&&bS(e)}function G9(n){return Ra(n)&&n.Ta.length<10}function q9(n,e){n.Ta.push(e);const t=Es(n);t.O_()&&t.X_&&t.ea(e.mutations)}function SS(n){return Ra(n)&&!Es(n).x_()&&n.Ta.length>0}function bS(n){Es(n).start()}async function K9(n){Es(n).ra()}async function X9(n){const e=Es(n);for(const t of n.Ta)e.ea(t.mutations)}async function Y9(n,e,t){const r=n.Ta.shift(),i=Nv.from(r,e,t);await IS(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Ip(n)}async function Q9(n,e){e&&Es(n).X_&&await(async function(r,i){if((function(s){return sS(s)&&s!==re.ABORTED})(i.code)){const o=r.Ta.shift();Es(r).B_(),await IS(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await Ip(r)}})(n,e),SS(n)&&bS(n)}async function CE(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),ve(Aa,"RemoteStore received new credentials");const r=Ra(t);t.Ea.add(3),await yf(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Tp(t)}async function Z9(n,e){const t=ze(n);e?(t.Ea.delete(2),await Tp(t)):e||(t.Ea.add(2),await yf(t),t.Ra.set("Unknown"))}function ll(n){return n.ma||(n.ma=(function(t,r,i){const o=ze(t);return o.sa(),new L9(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:z9.bind(null,n),t_:H9.bind(null,n),r_:$9.bind(null,n),H_:W9.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),zv(n)?jv(n):n.Ra.set("Unknown")):(await n.ma.stop(),TS(n))}))),n.ma}function Es(n){return n.fa||(n.fa=(function(t,r,i){const o=ze(t);return o.sa(),new V9(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:K9.bind(null,n),r_:Q9.bind(null,n),ta:X9.bind(null,n),na:Y9.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Ip(n)):(await n.fa.stop(),n.Ta.length>0&&(ve(Aa,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new Hv(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $v(n,e){if(vo("AsyncQueue",`${e}: ${n}`),al(n))return new pe(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{static emptySet(e){return new Fu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pe.comparator(t.key,r.key):(t,r)=>Pe.comparator(t.key,r.key),this.keyedMap=gc(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Fu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.ga=new Mt(Pe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Xu{constructor(e,t,r,i,o,s,a,c,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach((a=>{s.push({type:0,doc:a})})),new Xu(e,t,Fu.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class e7{constructor(){this.queries=IE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=ze(t),o=i.queries;i.queries=IE(),o.forEach(((s,a)=>{for(const c of a.Sa)c.onError(r)}))})(this,new pe(re.ABORTED,"Firestore shutting down"))}}function IE(){return new ba((n=>WI(n)),yp)}async function Wv(n,e){const t=ze(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new J9,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const a=$v(s,`Initialization of query '${_u(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&qv(t)}async function Gv(n,e){const t=ze(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function t7(n,e){const t=ze(n);let r=!1;for(const i of e){const o=i.query,s=t.queries.get(o);if(s){for(const a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&qv(t)}function n7(n,e,t){const r=ze(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function qv(n){n.Ca.forEach((e=>{e.next()}))}var eg,SE;(SE=eg||(eg={})).Ma="default",SE.Cache="cache";class Kv{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Xu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Xu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==eg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.key=e}}class PS{constructor(e){this.key=e}}class r7{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=GI(e),this.tu=new Fu(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new TE,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,p)=>{const v=i.get(h),y=xp(this.query,p)?p:null,E=!!v&&this.mutatedKeys.has(v.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let C=!1;v&&y?v.data.isEqual(y.data)?E!==A&&(r.track({type:3,doc:y}),C=!0):this.su(v,y)||(r.track({type:2,doc:y}),C=!0,(c&&this.eu(y,c)>0||f&&this.eu(y,f)<0)&&(a=!0)):!v&&y?(r.track({type:0,doc:y}),C=!0):v&&!y&&(r.track({type:1,doc:v}),C=!0,(c||f)&&(a=!0)),C&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((h,p)=>(function(y,E){const A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:C})}};return A(y)-A(E)})(h.type,p.type)||this.eu(h.doc,p.doc))),this.ou(r),i=i??!1;const a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,f=c!==this.Za;return this.Za=c,s.length!==0||f?{snapshot:new Xu(this.query,e.tu,o,s,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new TE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new PS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new RS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Xu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xv="SyncEngine";class i7{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class o7{constructor(e){this.key=e,this.hu=!1}}class s7{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ba((a=>WI(a)),yp),this.Iu=new Map,this.Eu=new Set,this.du=new Mt(Pe.comparator),this.Au=new Map,this.Ru=new kv,this.Vu={},this.mu=new Map,this.fu=Ku.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function a7(n,e,t=!0){const r=LS(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await NS(r,e,t,!0),i}async function u7(n,e){const t=LS(n);await NS(t,e,!0,!1)}async function NS(n,e,t,r){const i=await b9(n.localStore,Mi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t);let a;return r&&(a=await l7(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&AS(n.remoteStore,i),a}async function l7(n,e,t,r,i){n.pu=(p,v,y)=>(async function(A,C,N,P){let M=C.view.ru(N);M.Cs&&(M=await xE(A.localStore,C.query,!1).then((({documents:R})=>C.view.ru(R,M))));const j=P&&P.targetChanges.get(C.targetId),H=P&&P.targetMismatches.get(C.targetId)!=null,$=C.view.applyChanges(M,A.isPrimaryClient,j,H);return RE(A,C.targetId,$.au),$.snapshot})(n,p,v,y);const o=await xE(n.localStore,e,!0),s=new r7(e,o.Qs),a=s.ru(o.documents),c=vf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=s.applyChanges(a,n.isPrimaryClient,c);RE(n,t,f.au);const h=new i7(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function c7(n,e,t){const r=ze(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((s=>!yp(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Zm(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Bv(r.remoteStore,i.targetId),tg(r,i.targetId)})).catch(sl)):(tg(r,i.targetId),await Zm(r.localStore,i.targetId,!0))}async function f7(n,e){const t=ze(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Bv(t.remoteStore,r.targetId))}async function h7(n,e,t){const r=x7(n);try{const i=await(function(s,a){const c=ze(s),f=St.now(),h=a.reduce(((y,E)=>y.add(E.key)),Je());let p,v;return c.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let E=yo(),A=Je();return c.Ns.getEntries(y,h).next((C=>{E=C,E.forEach(((N,P)=>{P.isValidDocument()||(A=A.add(N))}))})).next((()=>c.localDocuments.getOverlayedDocuments(y,E))).next((C=>{p=C;const N=[];for(const P of a){const M=RM(P,p.get(P.key).overlayedDocument);M!=null&&N.push(new Ss(P.key,M,VI(M.value.mapValue),zn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,f,N,a)})).next((C=>{v=C;const N=C.applyToLocalDocumentSet(p,A);return c.documentOverlayCache.saveOverlays(y,C.batchId,N)}))})).then((()=>({batchId:v.batchId,changes:KI(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let f=s.Vu[s.currentUser.toKey()];f||(f=new Mt(Ze)),f=f.insert(a,c),s.Vu[s.currentUser.toKey()]=f})(r,i.batchId,t),await xf(r,i.changes),await Ip(r.remoteStore)}catch(i){const o=$v(i,"Failed to persist write");t.reject(o)}}async function DS(n,e){const t=ze(n);try{const r=await T9(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const s=t.Au.get(o);s&&(it(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?it(s.hu,14607):i.removedDocuments.size>0&&(it(s.hu,42227),s.hu=!1))})),await xf(t,r,e)}catch(r){await sl(r)}}function bE(n,e,t){const r=ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((o,s)=>{const a=s.view.va(e);a.snapshot&&i.push(a.snapshot)})),(function(s,a){const c=ze(s);c.onlineState=a;let f=!1;c.queries.forEach(((h,p)=>{for(const v of p.Sa)v.va(a)&&(f=!0)})),f&&qv(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function d7(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let s=new Mt(Pe.comparator);s=s.insert(o,yn.newNoDocument(o,Fe.min()));const a=Je().add(o),c=new Ap(Fe.min(),new Map,new Mt(Ze),s,a);await DS(r,c),r.du=r.du.remove(o),r.Au.delete(e),Yv(r)}else await Zm(r.localStore,e,!1).then((()=>tg(r,e,t))).catch(sl)}async function p7(n,e){const t=ze(n),r=e.batch.batchId;try{const i=await C9(t.localStore,e);kS(t,r,null),OS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await xf(t,i)}catch(i){await sl(i)}}async function m7(n,e,t){const r=ze(n);try{const i=await(function(s,a){const c=ze(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let h;return c.mutationQueue.lookupMutationBatch(f,a).next((p=>(it(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(f,p)))).next((()=>c.mutationQueue.performConsistencyCheck(f))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(f,h,a))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h))).next((()=>c.localDocuments.getDocuments(f,h)))}))})(r.localStore,e);kS(r,e,t),OS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await xf(r,i)}catch(i){await sl(i)}}function OS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function kS(n,e,t){const r=ze(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function tg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||MS(n,r)}))}function MS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Bv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Yv(n))}function RE(n,e,t){for(const r of t)r instanceof RS?(n.Ru.addReference(r.key,e),g7(n,r)):r instanceof PS?(ve(Xv,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||MS(n,r.key)):De(19791,{wu:r})}function g7(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ve(Xv,"New document in limbo: "+t),n.Eu.add(r),Yv(n))}function Yv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Pe(vt.fromString(e)),r=n.fu.next();n.Au.set(r,new o7(t)),n.du=n.du.insert(t,r),AS(n.remoteStore,new ss(Mi(vp(t.path)),r,"TargetPurposeLimboResolution",mp.ce))}}async function xf(n,e,t){const r=ze(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,c)=>{s.push(r.pu(c,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const h=f?!f.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(f){i.push(f);const h=Lv.As(c.targetId,f);o.push(h)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(c,f){const h=ze(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>se.forEach(f,(v=>se.forEach(v.Es,(y=>h.persistence.referenceDelegate.addReference(p,v.targetId,y))).next((()=>se.forEach(v.ds,(y=>h.persistence.referenceDelegate.removeReference(p,v.targetId,y)))))))))}catch(p){if(!al(p))throw p;ve(Vv,"Failed to update sequence numbers: "+p)}for(const p of f){const v=p.targetId;if(!p.fromCache){const y=h.Ms.get(v),E=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(E);h.Ms=h.Ms.insert(v,A)}}})(r.localStore,o))}async function v7(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){ve(Xv,"User change. New user:",e.toKey());const r=await _S(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach((a=>{a.forEach((c=>{c.reject(new pe(re.CANCELLED,s))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xf(t,r.Ls)}}function y7(n,e){const t=ze(n),r=t.Au.get(e);if(r&&r.hu)return Je().add(r.key);{let i=Je();const o=t.Iu.get(e);if(!o)return i;for(const s of o){const a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function LS(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=y7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=d7.bind(null,e),e.Pu.H_=t7.bind(null,e.eventManager),e.Pu.yu=n7.bind(null,e.eventManager),e}function x7(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=p7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=m7.bind(null,e),e}class Qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return A9(this.persistence,new _9,e.initialUser,this.serializer)}Cu(e){return new xS(Mv.mi,this.serializer)}Du(e){return new P9}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qd.provider={build:()=>new Qd};class _7 extends Qd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){it(this.persistence.referenceDelegate instanceof Xd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new o9(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ar.withCacheSize(this.cacheSizeBytes):ar.DEFAULT;return new xS((r=>Xd.mi(r,t)),this.serializer)}}class ng{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=v7.bind(null,this.syncEngine),await Z9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new e7})()}createDatastore(e){const t=Cp(e.databaseInfo.databaseId),r=(function(o){return new M9(o)})(e.databaseInfo);return(function(o,s,a,c){return new B9(o,s,a,c)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,o,s,a){return new j9(r,i,o,s,a)})(this.localStore,this.datastore,e.asyncQueue,(t=>bE(this.syncEngine,t,0)),(function(){return EE.v()?new EE:new N9})())}createSyncEngine(e,t){return(function(i,o,s,a,c,f,h){const p=new s7(i,o,s,a,c,f);return h&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ze(t);ve(Aa,"RemoteStore shutting down."),r.Ea.add(5),await yf(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ng.provider={build:()=>new ng};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new pe(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,o){const s=ze(i),a={documents:o.map((p=>Kd(s.serializer,p)))},c=await s.Ho("BatchGetDocuments",s.serializer.databaseId,vt.emptyPath(),a,o.length),f=new Map;c.forEach((p=>{const v=zM(s.serializer,p);f.set(v.key.toString(),v)}));const h=[];return o.forEach((p=>{const v=f.get(p.toString());it(!!v,55234,{key:p}),h.push(v)})),h})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ep(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=Pe.fromPath(r);this.mutations.push(new oS(i,this.precondition(i)))})),await(async function(r,i){const o=ze(r),s={writes:i.map((a=>pS(o.serializer,a)))};await o.Go("Commit",o.serializer.databaseId,vt.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw De(50498,{Gu:e.constructor.name});t=Fe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new pe(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Fe.min())?zn.exists(!1):zn.updateTime(t):zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Fe.min()))throw new pe(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zn.updateTime(t)}return zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new Fv(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new w7(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!mf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!sS(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="FirestoreClient";class A7{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=jn.UNAUTHENTICATED,this.clientId=Cv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async s=>{ve(As,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(ve(As,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=$v(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function W1(n,e){n.asyncQueue.verifyOperationInProgress(),ve(As,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await _S(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function PE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await C7(n);ve(As,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>CE(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>CE(e.remoteStore,i))),n._onlineComponents=e}async function C7(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve(As,"Using user provided OfflineComponentProvider");try{await W1(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;$u("Error using user provided cache. Falling back to memory cache: "+t),await W1(n,new Qd)}}else ve(As,"Using default OfflineComponentProvider"),await W1(n,new _7(void 0));return n._offlineComponents}async function Zv(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve(As,"Using user provided OnlineComponentProvider"),await PE(n,n._uninitializedComponentsProvider._online)):(ve(As,"Using default OnlineComponentProvider"),await PE(n,new ng))),n._onlineComponents}function T7(n){return Zv(n).then((e=>e.syncEngine))}function I7(n){return Zv(n).then((e=>e.datastore))}async function Zd(n){const e=await Zv(n),t=e.eventManager;return t.onListen=a7.bind(null,e.syncEngine),t.onUnlisten=c7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=u7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=f7.bind(null,e.syncEngine),t}function S7(n,e,t={}){const r=new ki;return n.asyncQueue.enqueueAndForget((async()=>(function(o,s,a,c,f){const h=new Qv({next:v=>{h.Nu(),s.enqueueAndForget((()=>Gv(o,p)));const y=v.docs.has(a);!y&&v.fromCache?f.reject(new pe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&v.fromCache&&c&&c.source==="server"?f.reject(new pe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),p=new Kv(vp(a.path),h,{includeMetadataChanges:!0,qa:!0});return Wv(o,p)})(await Zd(n),n.asyncQueue,e,t,r))),r.promise}function b7(n,e,t={}){const r=new ki;return n.asyncQueue.enqueueAndForget((async()=>(function(o,s,a,c,f){const h=new Qv({next:v=>{h.Nu(),s.enqueueAndForget((()=>Gv(o,p))),v.fromCache&&c.source==="server"?f.reject(new pe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),p=new Kv(a,h,{includeMetadataChanges:!0,qa:!0});return Wv(o,p)})(await Zd(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firestore.googleapis.com",DE=!0;class OE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FS,this.ssl=DE}else this.host=e.host,this.ssl=e.ssl??DE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<r9)throw new pe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}H5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new O5;switch(r.type){case"firstParty":return new V5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=NE.get(t);r&&(ve("ComponentProvider","Removing Datastore"),NE.delete(t),r.terminate())})(this),Promise.resolve()}}function R7(n,e,t,r={}){n=Ir(n,Sp);const i=nl(e),o=n._getSettings(),s={...o,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;i&&(DT(`https://${a}`),OT("Firestore",!0)),o.host!==FS&&o.host!==a&&$u("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:a,ssl:i,emulatorOptions:r};if(!xa(c,s)&&(n._setSettings(c),r.mockUserToken)){let f,h;if(typeof r.mockUserToken=="string")f=r.mockUserToken,h=jn.MOCK_USER;else{f=rD(r.mockUserToken,n._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new pe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new jn(p)}n._authCredentials=new k5(new TI(f,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wo(this.firestore,e,this._query)}}class Ut{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}toJSON(){return{type:Ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(pf(t,Ut._jsonSchema))return new Ut(e,r||null,new Pe(vt.fromString(t.referencePath)))}}Ut._jsonSchemaVersion="firestore/documentReference/1.0",Ut._jsonSchema={type:Jt("string",Ut._jsonSchemaVersion),referencePath:Jt("string")};class hs extends wo{constructor(e,t,r){super(e,t,vp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new Pe(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function fr(n,e,...t){if(n=en(n),II("collection","path",e),n instanceof Sp){const r=vt.fromString(e,...t);return G2(r),new hs(n,null,r)}{if(!(n instanceof Ut||n instanceof hs))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vt.fromString(e,...t));return G2(r),new hs(n.firestore,null,r)}}function Jn(n,e,...t){if(n=en(n),arguments.length===1&&(e=Cv.newId()),II("doc","path",e),n instanceof Sp){const r=vt.fromString(e,...t);return W2(r),new Ut(n,null,new Pe(r))}{if(!(n instanceof Ut||n instanceof hs))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vt.fromString(e,...t));return W2(r),new Ut(n.firestore,n instanceof hs?n.converter:null,new Pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="AsyncQueue";class ME{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Fv(this,"async_queue_retry"),this._c=()=>{const r=$1();r&&ve(kE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=$1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=$1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ki;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!al(e))throw e;ve(kE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,vo("INTERNAL UNHANDLED ERROR: ",LE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Hv.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&De(47125,{Pc:LE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function LE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}class xo extends Sp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ME,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ME(e),this._firestoreClient=void 0,await e}}}function P7(n,e){const t=typeof n=="object"?n:VT(),r=typeof n=="string"?n:Hd,i=hv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=tD("firestore");o&&R7(i,...o)}return i}function _f(n){if(n._terminated)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||N7(n),n._firestoreClient}function N7(n){const e=n._freezeSettings(),t=(function(i,o,s,a){return new tM(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,VS(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new A7(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ar(On.fromBase64String(e))}catch(t){throw new pe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ar(On.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ar._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pf(e,Ar._jsonSchema))return Ar.fromBase64String(e.bytes)}}Ar._jsonSchemaVersion="firestore/bytes/1.0",Ar._jsonSchema={type:Jt("string",Ar._jsonSchemaVersion),bytes:Jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Li._jsonSchemaVersion}}static fromJSON(e){if(pf(e,Li._jsonSchema))return new Li(e.latitude,e.longitude)}}Li._jsonSchemaVersion="firestore/geoPoint/1.0",Li._jsonSchema={type:Jt("string",Li._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pf(e,Vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vi(e.vectorValues);throw new pe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vi._jsonSchemaVersion="firestore/vectorValue/1.0",Vi._jsonSchema={type:Jt("string",Vi._jsonSchemaVersion),vectorValues:Jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7=/^__.*__$/;class O7{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms):new gf(e,this.data,t,this.fieldTransforms)}}class BS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function US(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:n})}}class Jv{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Jv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Jd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(US(this.Ac)&&D7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class k7{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Cp(e)}Cc(e,t,r,i=!1){return new Jv({Ac:e,methodName:t,Dc:r,path:Nn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bp(n){const e=n._freezeSettings(),t=Cp(n._databaseId);return new k7(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jS(n,e,t,r,i,o={}){const s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);ny("Data must be an object, but it was:",s,r);const a=$S(r,s);let c,f;if(o.merge)c=new Tr(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const v=rg(e,p,t);if(!s.contains(v))throw new pe(re.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);GS(h,v)||h.push(v)}c=new Tr(h),f=s.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,f=s.fieldTransforms;return new O7(new Qn(a),c,f)}class Rp extends Ef{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rp}}class ey extends Ef{_toFieldTransform(e){return new nS(e.path,new Qc)}isEqual(e){return e instanceof ey}}class ty extends Ef{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new ef(e.serializer,QI(e.serializer,this.Fc));return new nS(e.path,t)}isEqual(e){return e instanceof ty&&this.Fc===e.Fc}}function zS(n,e,t,r){const i=n.Cc(1,e,t);ny("Data must be an object, but it was:",i,r);const o=[],s=Qn.empty();Is(r,((c,f)=>{const h=ry(e,c,t);f=en(f);const p=i.yc(h);if(f instanceof Rp)o.push(h);else{const v=Af(f,p);v!=null&&(o.push(h),s.set(h,v))}}));const a=new Tr(o);return new BS(s,a,i.fieldTransforms)}function HS(n,e,t,r,i,o){const s=n.Cc(1,e,t),a=[rg(e,r,t)],c=[i];if(o.length%2!=0)throw new pe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)a.push(rg(e,o[v])),c.push(o[v+1]);const f=[],h=Qn.empty();for(let v=a.length-1;v>=0;--v)if(!GS(f,a[v])){const y=a[v];let E=c[v];E=en(E);const A=s.yc(y);if(E instanceof Rp)f.push(y);else{const C=Af(E,A);C!=null&&(f.push(y),h.set(y,C))}}const p=new Tr(f);return new BS(h,p,s.fieldTransforms)}function M7(n,e,t,r=!1){return Af(t,n.Cc(r?4:3,e))}function Af(n,e){if(WS(n=en(n)))return ny("Unsupported field value:",e,n),$S(n,e);if(n instanceof Ef)return(function(r,i){if(!US(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let s=0;for(const a of r){let c=Af(a,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=en(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=St.fromDate(r);return{timestampValue:qd(i.serializer,o)}}if(r instanceof St){const o=new St(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qd(i.serializer,o)}}if(r instanceof Li)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ar)return{bytesValue:cS(i.serializer,r._byteString)};if(r instanceof Ut){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ov(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vi)return(function(s,a){return{mapValue:{fields:{[MI]:{stringValue:LI},[$d]:{arrayValue:{values:s.toArray().map((f=>{if(typeof f!="number")throw a.Sc("VectorValues must only contain numeric values.");return Pv(a.serializer,f)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${pp(r)}`)})(n,e)}function $S(n,e){const t={};return RI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Is(n,((r,i)=>{const o=Af(i,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function WS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof St||n instanceof Li||n instanceof Ar||n instanceof Ut||n instanceof Ef||n instanceof Vi)}function ny(n,e,t){if(!WS(t)||!SI(t)){const r=pp(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function rg(n,e,t){if((e=en(e))instanceof wf)return e._internalPath;if(typeof e=="string")return ry(n,e);throw Jd("Field path arguments must be of type string or ",n,!1,void 0,t)}const L7=new RegExp("[~\\*/\\[\\]]");function ry(n,e,t){if(e.search(L7)>=0)throw Jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wf(...e.split("."))._internalPath}catch{throw Jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jd(n,e,t,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new pe(re.INVALID_ARGUMENT,a+n+c)}function GS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new V7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Pp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class V7 extends ep{data(){return super.data()}}function Pp(n,e){return typeof e=="string"?ry(n,e):e instanceof wf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iy{}class oy extends iy{}function Ui(n,e,...t){let r=[];e instanceof iy&&r.push(e),r=r.concat(t),(function(o){const s=o.filter((c=>c instanceof sy)).length,a=o.filter((c=>c instanceof Np)).length;if(s>1||s>0&&a>0)throw new pe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class Np extends oy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Np(e,t,r)}_apply(e){const t=this._parse(e);return KS(e._query,t),new wo(e.firestore,e.converter,Km(e._query,t))}_parse(e){const t=bp(e.firestore);return(function(o,s,a,c,f,h,p){let v;if(f.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new pe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){BE(p,h);const E=[];for(const A of p)E.push(FE(c,o,A));v={arrayValue:{values:E}}}else v=FE(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||BE(p,h),v=M7(a,s,p,h==="in"||h==="not-in");return Zt.create(f,h,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Yu(n,e,t){const r=e,i=Pp("where",n);return Np._create(i,r,t)}class sy extends iy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sy(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:li.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i;const a=o.getFlattenedFilters();for(const c of a)KS(s,c),s=Km(s,c)})(e._query,t),new wo(e.firestore,e.converter,Km(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ay extends oy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ay(e,t)}_apply(e){const t=(function(i,o,s){if(i.startAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yc(o,s)})(e._query,this._field,this._direction);return new wo(e.firestore,e.converter,(function(i,o){const s=i.explicitOrderBy.concat([o]);return new ul(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function Dp(n,e="asc"){const t=e,r=Pp("orderBy",n);return ay._create(r,t)}class uy extends oy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new uy(e,t,r)}_apply(e){return new wo(e.firestore,e.converter,Gd(e._query,this._limit,this._limitType))}}function Ca(n){return $5("limit",n),uy._create("limit",n,"F")}function FE(n,e,t){if(typeof(t=en(t))=="string"){if(t==="")throw new pe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$I(e)&&t.indexOf("/")!==-1)throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(vt.fromString(t));if(!Pe.isDocumentKey(r))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eE(n,new Pe(r))}if(t instanceof Ut)return eE(n,t._key);throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pp(t)}.`)}function BE(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KS(n,e){const t=(function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class XS{convertValue(e,t="none"){switch(ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_s(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Is(e,((i,o)=>{r[i]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[$d].arrayValue?.values?.map((r=>Wt(r.doubleValue)));return new Vi(t)}convertGeoPoint(e){return new Li(Wt(e.latitude),Wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(qc(e));default:return null}}convertTimestamp(e){const t=xs(e);return new St(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=vt.fromString(e);it(vS(r),9688,{name:e});const i=new Kc(r.get(1),r.get(3)),o=new Pe(r.popFirst(5));return i.isEqual(t)||vo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class F7 extends XS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ar(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}}class bu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ds extends ep{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Pp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ds._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ds._jsonSchemaVersion="firestore/documentSnapshot/1.0",ds._jsonSchema={type:Jt("string",ds._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class Ed extends ds{data(e={}){return super.data(e)}}class ga{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Ed(this._firestore,this._userDataWriter,r.key,r,new bu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((a=>{const c=new Ed(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>o||a.type!==3)).map((a=>{const c=new Ed(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return a.type!==0&&(f=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:B7(a.type),doc:c,oldIndex:f,newIndex:h}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ga._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function B7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U7(n){n=Ir(n,Ut);const e=Ir(n.firestore,xo);return S7(_f(e),n._key).then((t=>QS(e,n,t)))}ga._jsonSchemaVersion="firestore/querySnapshot/1.0",ga._jsonSchema={type:Jt("string",ga._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class Op extends XS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ar(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}}function ig(n){n=Ir(n,wo);const e=Ir(n.firestore,xo),t=_f(e),r=new Op(e);return qS(n._query),b7(t,n._query).then((i=>new ga(e,r,n,i)))}function j7(n,e,t,...r){n=Ir(n,Ut);const i=Ir(n.firestore,xo),o=bp(i);let s;return s=typeof(e=en(e))=="string"||e instanceof wf?HS(o,"updateDoc",n._key,e,t,r):zS(o,"updateDoc",n._key,e),ly(i,[s.toMutation(n._key,zn.exists(!0))])}function z7(n){return ly(Ir(n.firestore,xo),[new Ep(n._key,zn.none())])}function H7(n,e){const t=Ir(n.firestore,xo),r=Jn(n),i=YS(n.converter,e);return ly(t,[jS(bp(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,zn.exists(!1))]).then((()=>r))}function Cs(n,...e){n=en(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||VE(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(VE(e[r])){const c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let o,s,a;if(n instanceof Ut)s=Ir(n.firestore,xo),a=vp(n._key.path),o={next:c=>{e[r]&&e[r](QS(s,n,c))},error:e[r+1],complete:e[r+2]};else{const c=Ir(n,wo);s=Ir(c.firestore,xo),a=c._query;const f=new Op(s);o={next:h=>{e[r]&&e[r](new ga(s,f,c,h))},error:e[r+1],complete:e[r+2]},qS(n._query)}return(function(f,h,p,v){const y=new Qv(v),E=new Kv(h,y,p);return f.asyncQueue.enqueueAndForget((async()=>Wv(await Zd(f),E))),()=>{y.Nu(),f.asyncQueue.enqueueAndForget((async()=>Gv(await Zd(f),E)))}})(_f(s),a,i,o)}function ly(n,e){return(function(r,i){const o=new ki;return r.asyncQueue.enqueueAndForget((async()=>h7(await T7(r),i,o))),o.promise})(_f(n),e)}function QS(n,e,t){const r=t.docs.get(e._key),i=new Op(n);return new ds(n,i,e._key,r,new bu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7={maxAttempts:5};function yc(n,e){if((n=en(n)).firestore!==e)throw new pe(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=bp(e)}get(e){const t=yc(e,this._firestore),r=new F7(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return De(24041);const o=i[0];if(o.isFoundDocument())return new ep(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new ep(this._firestore,r,t._key,null,t.converter);throw De(18433,{doc:o})}))}set(e,t,r){const i=yc(e,this._firestore),o=YS(i.converter,t,r),s=jS(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){const o=yc(e,this._firestore);let s;return s=typeof(t=en(t))=="string"||t instanceof wf?HS(this._dataReader,"Transaction.update",o._key,t,r,i):zS(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){const t=yc(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7 extends W7{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yc(e,this._firestore),r=new Op(this._firestore);return super.get(e).then((i=>new ds(this._firestore,r,t._key,i._document,new bu(!1,!1),t.converter)))}}function cy(n,e,t){n=Ir(n,xo);const r={...$7,...t};return(function(o){if(o.maxAttempts<1)throw new pe(re.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){const c=new ki;return o.asyncQueue.enqueueAndForget((async()=>{const f=await I7(o);new E7(o.asyncQueue,f,a,s,c).ju()})),c.promise})(_f(n),(i=>e(new G7(n,i))),r)}function ur(){return new ey("serverTimestamp")}function tp(n){return new ty("increment",n)}(function(e,t=!0){(function(i){ol=i})(rl),zu(new _a("firestore",((r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new xo(new M5(r.getProvider("auth-internal")),new F5(s,r.getProvider("app-check-internal")),(function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new pe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kc(f.options.projectId,h)})(s,i),s);return o={useFetchStreams:t,...o},a._setSettings(o),a}),"PUBLIC").setMultipleInstances(!0)),ls(j2,z2,e),ls(j2,z2,"esm2020")})();const og={apiKey:"AIzaSyCEP8h9z4pW9NIV3qEd2XrrAOGkkgZGAiQ",authDomain:"borealabsweb.firebaseapp.com",projectId:"borealabsweb",storageBucket:"borealabsweb.appspot.com",messagingSenderId:"338356857449",appId:"1:338356857449:web:6e6515fa93bb8d4c1390f8"},q7=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"];let Ru=q7.every(n=>typeof og[n]=="string"&&og[n].length>0),G1=null,va=null,yt=null,Mc=null;try{if(Ru){G1=LT(og),va=R5(G1),yt=P7(G1),Mc=new lo;try{Mc.setCustomParameters({prompt:"select_account"})}catch{}}else console.warn("Firebase no configurado: faltan variables en .env (VITE_FIREBASE_*)")}catch(n){console.error("Error inicializando Firebase:",n),Ru=!1}const ZS="/assets/logo-DQzvxpvb.png";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),X7=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),UE=n=>{const e=X7(n);return e.charAt(0).toUpperCase()+e.slice(1)},JS=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),Y7=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=U.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},c)=>U.createElement("svg",{ref:c,...Q7,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:JS("lucide",i),...!o&&!Y7(a)&&{"aria-hidden":"true"},...a},[...s.map(([f,h])=>U.createElement(f,h)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=(n,e)=>{const t=U.forwardRef(({className:r,...i},o)=>U.createElement(Z7,{ref:o,iconNode:e,className:JS(`lucide-${K7(UE(n))}`,`lucide-${n}`,r),...i}));return t.displayName=UE(n),t};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ad=zi("circle-check",J7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],tL=zi("download",eL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],jE=zi("file-text",nL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],tf=zi("loader-circle",rL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],oL=zi("menu",iL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["path",{d:"M5 12h14",key:"1ays0h"}]],aL=zi("minus",sL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],lL=zi("plus",uL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],fL=zi("qr-code",cL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],e3=zi("triangle-alert",hL);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],t3=zi("x",dL),pL=({user:n,activeTab:e,onNavigate:t})=>{const[r,i]=U.useState(!1),[o,s]=U.useState(!1),a=async()=>{try{await vk(va)}catch(c){console.error("No se pudo cerrar sesin:",c)}};return S.jsxs("header",{className:"sticky top-0 z-40 w-full glass-effect",children:[S.jsxs("nav",{className:"max-w-7xl mx-auto flex items-center justify-between px-4 py-4 md:py-5",children:[S.jsxs("a",{href:"#",className:"flex items-center gap-3",children:[S.jsx("img",{src:ZS,alt:"Boreal Labs",className:"h-9 md:h-11 w-auto"}),S.jsx("span",{className:"sr-only",children:"Boreal Labs"})]}),S.jsxs("div",{className:"hidden md:flex items-center gap-7",children:[S.jsxs("button",{className:`relative pb-2 text-base transition-colors ${e==="certs"?"text-white":"text-gray-300 hover:text-white"}`,onClick:()=>{t&&t("certs")},children:["Certificados",e==="certs"&&S.jsx(Pn.span,{layoutId:"nav-underline",className:"absolute left-0 right-0 -bottom-1.5 h-[3px] rounded-full bg-gradient-to-r from-boreal-blue to-boreal-purple",transition:{type:"spring",stiffness:500,damping:35}})]}),S.jsxs("button",{className:`relative pb-2 text-base transition-colors ${e==="points"?"text-white":"text-gray-300 hover:text-white"}`,onClick:()=>{t&&t("points")},children:["Mis puntos",e==="points"&&S.jsx(Pn.span,{layoutId:"nav-underline",className:"absolute left-0 right-0 -bottom-1.5 h-[3px] rounded-full bg-gradient-to-r from-boreal-blue to-boreal-purple",transition:{type:"spring",stiffness:500,damping:35}})]}),S.jsxs("button",{className:`relative pb-2 text-base transition-colors ${e==="market"?"text-white":"text-gray-300 hover:text-white"}`,onClick:()=>{t&&t("market")},children:["Marketplace",e==="market"&&S.jsx(Pn.span,{layoutId:"nav-underline",className:"absolute left-0 right-0 -bottom-1.5 h-[3px] rounded-full bg-gradient-to-r from-boreal-blue to-boreal-purple",transition:{type:"spring",stiffness:500,damping:35}})]}),S.jsx("a",{href:"https://borealabs.org",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-lg text-base bg-gradient-to-r from-boreal-purple to-boreal-blue text-white shadow font-bold",children:"Pgina principal"}),n&&S.jsx("button",{onClick:()=>{s(!0)},className:"ml-1 px-3 py-2 rounded-md text-sm border border-white/15 text-white/90 hover:text-white hover:bg-white/10",children:"Cerrar sesin"})]}),S.jsx("button",{className:`md:hidden p-2 rounded-md hover:bg-white/10 ${o?"opacity-60 pointer-events-none":""}`,"aria-label":"Abrir men",onClick:()=>{i(c=>!c)},disabled:o,children:r?S.jsx(t3,{className:"w-7 h-7 text-white"}):S.jsx(oL,{className:"w-7 h-7 text-white"})})]}),S.jsx(Uc,{initial:!1,children:r&&S.jsx(Pn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2,ease:"easeOut"},className:"md:hidden border-t border-white/10 bg-white/5 overflow-hidden",children:S.jsxs("div",{className:"max-w-7xl mx-auto p-4 flex flex-col gap-3 items-center",children:[S.jsx("button",{className:"px-3 py-2 rounded-md text-sm hover:bg-white/10 text-center",onClick:()=>{t&&t("certs"),i(!1)},children:"Certificados"}),S.jsx("button",{className:"px-3 py-2 rounded-md text-sm hover:bg-white/10 text-center",onClick:()=>{t&&t("points"),i(!1)},children:"Mis puntos"}),S.jsx("button",{className:"px-3 py-2 rounded-md text-sm hover:bg-white/10 text-center",onClick:()=>{t&&t("market"),i(!1)},children:"Marketplace"}),S.jsx("a",{href:"https://borealabs.org",target:"_blank",rel:"noopener noreferrer",className:"w-full px-3 py-2 rounded-md text-sm bg-gradient-to-r from-boreal-purple to-boreal-blue text-white text-center font-bold",onClick:()=>i(!1),children:"Pgina principal"}),n&&S.jsx("button",{className:"mt-1 px-3 py-2 rounded-md text-sm hover:bg-white/10 text-red-300 hover:text-red-200 text-center",onClick:()=>{i(!1),s(!0)},children:"Cerrar sesin"})]})})}),S.jsx(Uc,{children:o&&S.jsxs(Pn.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4 min-h-dvh pt-[env(safe-area-inset-top)] pb-[env(safe-area-inset-bottom)]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[S.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>s(!1)}),S.jsxs(Pn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},className:"relative z-10 w-[min(92vw,420px)] rounded-2xl glass-effect bg-white/10 p-5 text-center mt-10 md:mt-0",children:[S.jsx("h3",{className:"text-xl font-semibold mb-1",children:"Cerrar sesin"}),S.jsx("p",{className:"text-gray-300 mb-4",children:"Seguro que deseas cerrar tu sesin?"}),S.jsxs("div",{className:"flex items-center justify-center gap-3",children:[S.jsx("button",{className:"px-4 py-2 rounded-md border border-white/20 text-white hover:bg-white/10",onClick:()=>{s(!1)},children:"Cancelar"}),S.jsx("button",{className:"px-4 py-2 rounded-md bg-gradient-to-r from-boreal-purple to-boreal-blue text-white font-bold",onClick:async()=>{i(!1),await a(),s(!1)},children:"Confirmar"})]})]})]})})]})},mL=()=>S.jsx("footer",{className:"w-full mt-12 py-6 glass-effect",children:S.jsxs("div",{className:"max-w-7xl mx-auto text-center text-gray-400 text-sm",children:[" ",new Date().getFullYear()," Borea Labs. Todos los derechos reservados."]})});function zE(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function n3(...n){return e=>{let t=!1;const r=n.map(i=>{const o=zE(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():zE(n[i],null)}}}}function Ta(...n){return U.useCallback(n3(...n),n)}function np(n){const e=vL(n),t=U.forwardRef((r,i)=>{const{children:o,...s}=r,a=U.Children.toArray(o),c=a.find(xL);if(c){const f=c.props.children,h=a.map(p=>p===c?U.Children.count(f)>1?U.Children.only(null):U.isValidElement(f)?f.props.children:null:p);return S.jsx(e,{...s,ref:i,children:U.isValidElement(f)?U.cloneElement(f,void 0,h):null})}return S.jsx(e,{...s,ref:i,children:o})});return t.displayName=`${n}.Slot`,t}var gL=np("Slot");function vL(n){const e=U.forwardRef((t,r)=>{const{children:i,...o}=t;if(U.isValidElement(i)){const s=wL(i),a=_L(o,i.props);return i.type!==U.Fragment&&(a.ref=r?n3(r,s):s),U.cloneElement(i,a)}return U.Children.count(i)>1?U.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var yL=Symbol("radix.slottable");function xL(n){return U.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===yL}function _L(n,e){const t={...e};for(const r in e){const i=n[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?t[r]=(...a)=>{const c=o(...a);return i(...a),c}:i&&(t[r]=i):r==="style"?t[r]={...i,...o}:r==="className"&&(t[r]=[i,o].filter(Boolean).join(" "))}return{...n,...t}}function wL(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function r3(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=r3(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function i3(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=r3(n))&&(r&&(r+=" "),r+=e);return r}const HE=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,$E=i3,o3=(n,e)=>t=>{var r;if(e?.variants==null)return $E(n,t?.class,t?.className);const{variants:i,defaultVariants:o}=e,s=Object.keys(i).map(f=>{const h=t?.[f],p=o?.[f];if(h===null)return null;const v=HE(h)||HE(p);return i[f][v]}),a=t&&Object.entries(t).reduce((f,h)=>{let[p,v]=h;return v===void 0||(f[p]=v),f},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,h)=>{let{class:p,className:v,...y}=h;return Object.entries(y).every(E=>{let[A,C]=E;return Array.isArray(C)?C.includes({...o,...a}[A]):{...o,...a}[A]===C})?[...f,p,v]:f},[]);return $E(n,s,c,t?.class,t?.className)},fy="-",EL=n=>{const e=CL(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:s=>{const a=s.split(fy);return a[0]===""&&a.length!==1&&a.shift(),s3(a,e)||AL(s)},getConflictingClassGroupIds:(s,a)=>{const c=t[s]||[];return a&&r[s]?[...c,...r[s]]:c}}},s3=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?s3(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=n.join(fy);return e.validators.find(({validator:s})=>s(o))?.classGroupId},WE=/^\[(.+)\]$/,AL=n=>{if(WE.test(n)){const e=WE.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},CL=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)sg(t[i],r,i,e);return r},sg=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const o=i===""?e:GE(e,i);o.classGroupId=t;return}if(typeof i=="function"){if(TL(i)){sg(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([o,s])=>{sg(s,GE(e,o),t,r)})})},GE=(n,e)=>{let t=n;return e.split(fy).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},TL=n=>n.isThemeGetter,IL=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(o,s)=>{t.set(o,s),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let s=t.get(o);if(s!==void 0)return s;if((s=r.get(o))!==void 0)return i(o,s),s},set(o,s){t.has(o)?t.set(o,s):i(o,s)}}},ag="!",ug=":",SL=ug.length,bL=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const o=[];let s=0,a=0,c=0,f;for(let E=0;E<i.length;E++){let A=i[E];if(s===0&&a===0){if(A===ug){o.push(i.slice(c,E)),c=E+SL;continue}if(A==="/"){f=E;continue}}A==="["?s++:A==="]"?s--:A==="("?a++:A===")"&&a--}const h=o.length===0?i:i.substring(c),p=RL(h),v=p!==h,y=f&&f>c?f-c:void 0;return{modifiers:o,hasImportantModifier:v,baseClassName:p,maybePostfixModifierPosition:y}};if(e){const i=e+ug,o=r;r=s=>s.startsWith(i)?o(s.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=o=>t({className:o,parseClassName:i})}return r},RL=n=>n.endsWith(ag)?n.substring(0,n.length-1):n.startsWith(ag)?n.substring(1):n,PL=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(s=>{s[0]==="["||e[s]?(i.push(...o.sort(),s),o=[]):o.push(s)}),i.push(...o.sort()),i}},NL=n=>({cache:IL(n.cacheSize),parseClassName:bL(n),sortModifiers:PL(n),...EL(n)}),DL=/\s+/,OL=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,s=[],a=n.trim().split(DL);let c="";for(let f=a.length-1;f>=0;f-=1){const h=a[f],{isExternal:p,modifiers:v,hasImportantModifier:y,baseClassName:E,maybePostfixModifierPosition:A}=t(h);if(p){c=h+(c.length>0?" "+c:c);continue}let C=!!A,N=r(C?E.substring(0,A):E);if(!N){if(!C){c=h+(c.length>0?" "+c:c);continue}if(N=r(E),!N){c=h+(c.length>0?" "+c:c);continue}C=!1}const P=o(v).join(":"),M=y?P+ag:P,j=M+N;if(s.includes(j))continue;s.push(j);const H=i(N,C);for(let $=0;$<H.length;++$){const R=H[$];s.push(M+R)}c=h+(c.length>0?" "+c:c)}return c};function kL(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=a3(e))&&(r&&(r+=" "),r+=t);return r}const a3=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=a3(n[r]))&&(t&&(t+=" "),t+=e);return t};function ML(n,...e){let t,r,i,o=s;function s(c){const f=e.reduce((h,p)=>p(h),n());return t=NL(f),r=t.cache.get,i=t.cache.set,o=a,a(c)}function a(c){const f=r(c);if(f)return f;const h=OL(c,t);return i(c,h),h}return function(){return o(kL.apply(null,arguments))}}const rn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},u3=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,l3=/^\((?:(\w[\w-]*):)?(.+)\)$/i,LL=/^\d+\/\d+$/,VL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,FL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,BL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,UL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,jL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vu=n=>LL.test(n),Ge=n=>!!n&&!Number.isNaN(Number(n)),Zo=n=>!!n&&Number.isInteger(Number(n)),q1=n=>n.endsWith("%")&&Ge(n.slice(0,-1)),uo=n=>VL.test(n),zL=()=>!0,HL=n=>FL.test(n)&&!BL.test(n),c3=()=>!1,$L=n=>UL.test(n),WL=n=>jL.test(n),GL=n=>!Ee(n)&&!Ae(n),qL=n=>cl(n,d3,c3),Ee=n=>u3.test(n),ra=n=>cl(n,p3,HL),K1=n=>cl(n,ZL,Ge),qE=n=>cl(n,f3,c3),KL=n=>cl(n,h3,WL),Jh=n=>cl(n,m3,$L),Ae=n=>l3.test(n),cc=n=>fl(n,p3),XL=n=>fl(n,JL),KE=n=>fl(n,f3),YL=n=>fl(n,d3),QL=n=>fl(n,h3),ed=n=>fl(n,m3,!0),cl=(n,e,t)=>{const r=u3.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},fl=(n,e,t=!1)=>{const r=l3.exec(n);return r?r[1]?e(r[1]):t:!1},f3=n=>n==="position"||n==="percentage",h3=n=>n==="image"||n==="url",d3=n=>n==="length"||n==="size"||n==="bg-size",p3=n=>n==="length",ZL=n=>n==="number",JL=n=>n==="family-name",m3=n=>n==="shadow",eV=()=>{const n=rn("color"),e=rn("font"),t=rn("text"),r=rn("font-weight"),i=rn("tracking"),o=rn("leading"),s=rn("breakpoint"),a=rn("container"),c=rn("spacing"),f=rn("radius"),h=rn("shadow"),p=rn("inset-shadow"),v=rn("text-shadow"),y=rn("drop-shadow"),E=rn("blur"),A=rn("perspective"),C=rn("aspect"),N=rn("ease"),P=rn("animate"),M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],H=()=>[...j(),Ae,Ee],$=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],I=()=>[Ae,Ee,c],D=()=>[vu,"full","auto",...I()],O=()=>[Zo,"none","subgrid",Ae,Ee],F=()=>["auto",{span:["full",Zo,Ae,Ee]},Zo,Ae,Ee],B=()=>[Zo,"auto",Ae,Ee],L=()=>["auto","min","max","fr",Ae,Ee],te=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],be=()=>["start","end","center","stretch","center-safe","end-safe"],Oe=()=>["auto",...I()],xe=()=>[vu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],Z=()=>[n,Ae,Ee],me=()=>[...j(),KE,qE,{position:[Ae,Ee]}],de=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",YL,qL,{size:[Ae,Ee]}],oe=()=>[q1,cc,ra],_e=()=>["","none","full",f,Ae,Ee],Ie=()=>["",Ge,cc,ra],$e=()=>["solid","dashed","dotted","double"],We=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ke=()=>[Ge,q1,KE,qE],Ke=()=>["","none",E,Ae,Ee],ie=()=>["none",Ge,Ae,Ee],Re=()=>["none",Ge,Ae,Ee],et=()=>[Ge,Ae,Ee],bt=()=>[vu,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[uo],breakpoint:[uo],color:[zL],container:[uo],"drop-shadow":[uo],ease:["in","out","in-out"],font:[GL],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[uo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[uo],shadow:[uo],spacing:["px",Ge],text:[uo],"text-shadow":[uo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",vu,Ee,Ae,C]}],container:["container"],columns:[{columns:[Ge,Ee,Ae,a]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:H()}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:D()}],"inset-x":[{"inset-x":D()}],"inset-y":[{"inset-y":D()}],start:[{start:D()}],end:[{end:D()}],top:[{top:D()}],right:[{right:D()}],bottom:[{bottom:D()}],left:[{left:D()}],visibility:["visible","invisible","collapse"],z:[{z:[Zo,"auto",Ae,Ee]}],basis:[{basis:[vu,"full","auto",a,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ge,vu,"auto","initial","none",Ee]}],grow:[{grow:["",Ge,Ae,Ee]}],shrink:[{shrink:["",Ge,Ae,Ee]}],order:[{order:[Zo,"first","last","none",Ae,Ee]}],"grid-cols":[{"grid-cols":O()}],"col-start-end":[{col:F()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":O()}],"row-start-end":[{row:F()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":L()}],"auto-rows":[{"auto-rows":L()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...te(),"normal"]}],"justify-items":[{"justify-items":[...be(),"normal"]}],"justify-self":[{"justify-self":["auto",...be()]}],"align-content":[{content:["normal",...te()]}],"align-items":[{items:[...be(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...be(),{baseline:["","last"]}]}],"place-content":[{"place-content":te()}],"place-items":[{"place-items":[...be(),"baseline"]}],"place-self":[{"place-self":["auto",...be()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:Oe()}],mx:[{mx:Oe()}],my:[{my:Oe()}],ms:[{ms:Oe()}],me:[{me:Oe()}],mt:[{mt:Oe()}],mr:[{mr:Oe()}],mb:[{mb:Oe()}],ml:[{ml:Oe()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:xe()}],w:[{w:[a,"screen",...xe()]}],"min-w":[{"min-w":[a,"screen","none",...xe()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...xe()]}],h:[{h:["screen","lh",...xe()]}],"min-h":[{"min-h":["screen","lh","none",...xe()]}],"max-h":[{"max-h":["screen","lh",...xe()]}],"font-size":[{text:["base",t,cc,ra]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ae,K1]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",q1,Ee]}],"font-family":[{font:[XL,Ee,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ae,Ee]}],"line-clamp":[{"line-clamp":[Ge,"none",Ae,K1]}],leading:[{leading:[o,...I()]}],"list-image":[{"list-image":["none",Ae,Ee]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ae,Ee]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Z()}],"text-color":[{text:Z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$e(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ge,"from-font","auto",Ae,ra]}],"text-decoration-color":[{decoration:Z()}],"underline-offset":[{"underline-offset":[Ge,"auto",Ae,Ee]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ae,Ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ae,Ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:me()}],"bg-repeat":[{bg:de()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Zo,Ae,Ee],radial:["",Ae,Ee],conic:[Zo,Ae,Ee]},QL,KL]}],"bg-color":[{bg:Z()}],"gradient-from-pos":[{from:oe()}],"gradient-via-pos":[{via:oe()}],"gradient-to-pos":[{to:oe()}],"gradient-from":[{from:Z()}],"gradient-via":[{via:Z()}],"gradient-to":[{to:Z()}],rounded:[{rounded:_e()}],"rounded-s":[{"rounded-s":_e()}],"rounded-e":[{"rounded-e":_e()}],"rounded-t":[{"rounded-t":_e()}],"rounded-r":[{"rounded-r":_e()}],"rounded-b":[{"rounded-b":_e()}],"rounded-l":[{"rounded-l":_e()}],"rounded-ss":[{"rounded-ss":_e()}],"rounded-se":[{"rounded-se":_e()}],"rounded-ee":[{"rounded-ee":_e()}],"rounded-es":[{"rounded-es":_e()}],"rounded-tl":[{"rounded-tl":_e()}],"rounded-tr":[{"rounded-tr":_e()}],"rounded-br":[{"rounded-br":_e()}],"rounded-bl":[{"rounded-bl":_e()}],"border-w":[{border:Ie()}],"border-w-x":[{"border-x":Ie()}],"border-w-y":[{"border-y":Ie()}],"border-w-s":[{"border-s":Ie()}],"border-w-e":[{"border-e":Ie()}],"border-w-t":[{"border-t":Ie()}],"border-w-r":[{"border-r":Ie()}],"border-w-b":[{"border-b":Ie()}],"border-w-l":[{"border-l":Ie()}],"divide-x":[{"divide-x":Ie()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ie()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...$e(),"hidden","none"]}],"divide-style":[{divide:[...$e(),"hidden","none"]}],"border-color":[{border:Z()}],"border-color-x":[{"border-x":Z()}],"border-color-y":[{"border-y":Z()}],"border-color-s":[{"border-s":Z()}],"border-color-e":[{"border-e":Z()}],"border-color-t":[{"border-t":Z()}],"border-color-r":[{"border-r":Z()}],"border-color-b":[{"border-b":Z()}],"border-color-l":[{"border-l":Z()}],"divide-color":[{divide:Z()}],"outline-style":[{outline:[...$e(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ge,Ae,Ee]}],"outline-w":[{outline:["",Ge,cc,ra]}],"outline-color":[{outline:Z()}],shadow:[{shadow:["","none",h,ed,Jh]}],"shadow-color":[{shadow:Z()}],"inset-shadow":[{"inset-shadow":["none",p,ed,Jh]}],"inset-shadow-color":[{"inset-shadow":Z()}],"ring-w":[{ring:Ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Z()}],"ring-offset-w":[{"ring-offset":[Ge,ra]}],"ring-offset-color":[{"ring-offset":Z()}],"inset-ring-w":[{"inset-ring":Ie()}],"inset-ring-color":[{"inset-ring":Z()}],"text-shadow":[{"text-shadow":["none",v,ed,Jh]}],"text-shadow-color":[{"text-shadow":Z()}],opacity:[{opacity:[Ge,Ae,Ee]}],"mix-blend":[{"mix-blend":[...We(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":We()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ge]}],"mask-image-linear-from-pos":[{"mask-linear-from":ke()}],"mask-image-linear-to-pos":[{"mask-linear-to":ke()}],"mask-image-linear-from-color":[{"mask-linear-from":Z()}],"mask-image-linear-to-color":[{"mask-linear-to":Z()}],"mask-image-t-from-pos":[{"mask-t-from":ke()}],"mask-image-t-to-pos":[{"mask-t-to":ke()}],"mask-image-t-from-color":[{"mask-t-from":Z()}],"mask-image-t-to-color":[{"mask-t-to":Z()}],"mask-image-r-from-pos":[{"mask-r-from":ke()}],"mask-image-r-to-pos":[{"mask-r-to":ke()}],"mask-image-r-from-color":[{"mask-r-from":Z()}],"mask-image-r-to-color":[{"mask-r-to":Z()}],"mask-image-b-from-pos":[{"mask-b-from":ke()}],"mask-image-b-to-pos":[{"mask-b-to":ke()}],"mask-image-b-from-color":[{"mask-b-from":Z()}],"mask-image-b-to-color":[{"mask-b-to":Z()}],"mask-image-l-from-pos":[{"mask-l-from":ke()}],"mask-image-l-to-pos":[{"mask-l-to":ke()}],"mask-image-l-from-color":[{"mask-l-from":Z()}],"mask-image-l-to-color":[{"mask-l-to":Z()}],"mask-image-x-from-pos":[{"mask-x-from":ke()}],"mask-image-x-to-pos":[{"mask-x-to":ke()}],"mask-image-x-from-color":[{"mask-x-from":Z()}],"mask-image-x-to-color":[{"mask-x-to":Z()}],"mask-image-y-from-pos":[{"mask-y-from":ke()}],"mask-image-y-to-pos":[{"mask-y-to":ke()}],"mask-image-y-from-color":[{"mask-y-from":Z()}],"mask-image-y-to-color":[{"mask-y-to":Z()}],"mask-image-radial":[{"mask-radial":[Ae,Ee]}],"mask-image-radial-from-pos":[{"mask-radial-from":ke()}],"mask-image-radial-to-pos":[{"mask-radial-to":ke()}],"mask-image-radial-from-color":[{"mask-radial-from":Z()}],"mask-image-radial-to-color":[{"mask-radial-to":Z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[Ge]}],"mask-image-conic-from-pos":[{"mask-conic-from":ke()}],"mask-image-conic-to-pos":[{"mask-conic-to":ke()}],"mask-image-conic-from-color":[{"mask-conic-from":Z()}],"mask-image-conic-to-color":[{"mask-conic-to":Z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:me()}],"mask-repeat":[{mask:de()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ae,Ee]}],filter:[{filter:["","none",Ae,Ee]}],blur:[{blur:Ke()}],brightness:[{brightness:[Ge,Ae,Ee]}],contrast:[{contrast:[Ge,Ae,Ee]}],"drop-shadow":[{"drop-shadow":["","none",y,ed,Jh]}],"drop-shadow-color":[{"drop-shadow":Z()}],grayscale:[{grayscale:["",Ge,Ae,Ee]}],"hue-rotate":[{"hue-rotate":[Ge,Ae,Ee]}],invert:[{invert:["",Ge,Ae,Ee]}],saturate:[{saturate:[Ge,Ae,Ee]}],sepia:[{sepia:["",Ge,Ae,Ee]}],"backdrop-filter":[{"backdrop-filter":["","none",Ae,Ee]}],"backdrop-blur":[{"backdrop-blur":Ke()}],"backdrop-brightness":[{"backdrop-brightness":[Ge,Ae,Ee]}],"backdrop-contrast":[{"backdrop-contrast":[Ge,Ae,Ee]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ge,Ae,Ee]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ge,Ae,Ee]}],"backdrop-invert":[{"backdrop-invert":["",Ge,Ae,Ee]}],"backdrop-opacity":[{"backdrop-opacity":[Ge,Ae,Ee]}],"backdrop-saturate":[{"backdrop-saturate":[Ge,Ae,Ee]}],"backdrop-sepia":[{"backdrop-sepia":["",Ge,Ae,Ee]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ae,Ee]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ge,"initial",Ae,Ee]}],ease:[{ease:["linear","initial",N,Ae,Ee]}],delay:[{delay:[Ge,Ae,Ee]}],animate:[{animate:["none",P,Ae,Ee]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[A,Ae,Ee]}],"perspective-origin":[{"perspective-origin":H()}],rotate:[{rotate:ie()}],"rotate-x":[{"rotate-x":ie()}],"rotate-y":[{"rotate-y":ie()}],"rotate-z":[{"rotate-z":ie()}],scale:[{scale:Re()}],"scale-x":[{"scale-x":Re()}],"scale-y":[{"scale-y":Re()}],"scale-z":[{"scale-z":Re()}],"scale-3d":["scale-3d"],skew:[{skew:et()}],"skew-x":[{"skew-x":et()}],"skew-y":[{"skew-y":et()}],transform:[{transform:[Ae,Ee,"","none","gpu","cpu"]}],"transform-origin":[{origin:H()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:bt()}],"translate-x":[{"translate-x":bt()}],"translate-y":[{"translate-y":bt()}],"translate-z":[{"translate-z":bt()}],"translate-none":["translate-none"],accent:[{accent:Z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ae,Ee]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ae,Ee]}],fill:[{fill:["none",...Z()]}],"stroke-w":[{stroke:[Ge,cc,ra,K1]}],stroke:[{stroke:["none",...Z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},tV=ML(eV);function bs(...n){return tV(i3(n))}const nV=o3("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Gt=U.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},o)=>{const s=r?gL:"button";return S.jsx(s,{className:bs(nV({variant:e,size:t,className:n})),ref:o,...i})});Gt.displayName="Button";const rV=1,iV=1e6;let X1=0;function oV(){return X1=(X1+1)%Number.MAX_SAFE_INTEGER,X1.toString()}const Y1=new Map,XE=n=>{if(Y1.has(n))return;const e=setTimeout(()=>{Y1.delete(n),Lc({type:"REMOVE_TOAST",toastId:n})},iV);Y1.set(n,e)},sV=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,rV)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?XE(t):n.toasts.forEach(r=>{XE(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Cd=[];let Td={toasts:[]};function Lc(n){Td=sV(Td,n),Cd.forEach(e=>{e(Td)})}function aV({...n}){const e=oV(),t=i=>Lc({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Lc({type:"DISMISS_TOAST",toastId:e});return Lc({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function kp(){const[n,e]=U.useState(Td);return U.useEffect(()=>(Cd.push(e),()=>{const t=Cd.indexOf(e);t>-1&&Cd.splice(t,1)}),[n]),{...n,toast:aV,dismiss:t=>Lc({type:"DISMISS_TOAST",toastId:t})}}const uV=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...n,children:S.jsx("path",{d:"M20.283 10.356h-8.327v3.451h4.792c-.446 2.193-2.313 3.453-4.792 3.453a5.27 5.27 0 0 1-5.279-5.28 5.27 5.27 0 0 1 5.279-5.279c1.259 0 2.397.447 3.29 1.178l2.6-2.599c-1.584-1.381-3.615-2.233-5.89-2.233a8.908 8.908 0 0 0-8.934 8.934 8.908 8.908 0 0 0 8.934 8.934c4.956 0 8.641-3.52 8.641-8.781 0-.593-.053-1.165-.154-1.722z"})}),lV=()=>{const[n,e]=U.useState(null),{toast:t}=kp(),r=async()=>{e("google");try{if(!va||!Mc)throw new Error("Firebase no est configurado o el proveedor de Google no est disponible.");await Vk(va,Mc)}catch(i){console.error(i);const o=i&&i.code?String(i.code):"";if(o==="auth/popup-blocked")try{await Hk(va,Mc);return}catch(a){console.error("Fallback a redirect fall:",a)}let s=i&&(i.message||i.code)?String(i.message||i.code):"No se pudo iniciar sesin con Google.";o==="auth/operation-not-allowed"?s="El proveedor de Google no est habilitado. Ve a Firebase Console > Authentication > Sign-in method y habilita Google (elige un Support email) y guarda.":o==="auth/unauthorized-domain"&&(s="Dominio no autorizado. En Firebase Console > Authentication > Settings > Authorized domains, agrega localhost y 127.0.0.1 (los puertos no importan)."),t({title:"Error con Google",description:s,variant:"destructive"})}e(!1)};return S.jsxs("div",{className:"min-h-screen min-h-dvh w-full bg-boreal-dark relative overflow-hidden",children:[S.jsxs("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[S.jsx("div",{className:"absolute top-0 left-0 w-full h-full animate-move-bg",style:{background:"radial-gradient(ellipse 120% 90% at 20% 30%, rgba(105,230,175,0.45) 0%, rgba(49,98,237,0.35) 60%, rgba(190,88,240,0.32) 100%)"}}),S.jsx("div",{className:"absolute bottom-0 right-0 w-full h-full animate-move-bg-reverse",style:{background:"radial-gradient(ellipse 110% 80% at 80% 70%, rgba(49,98,237,0.38) 0%, rgba(190,88,240,0.32) 60%, rgba(105,230,175,0.28) 100%)"}})]}),S.jsx("div",{className:"relative z-10 min-h-screen min-h-dvh w-full flex items-center justify-center px-4 pt-[env(safe-area-inset-top)] pb-[env(safe-area-inset-bottom)]",children:S.jsxs(Pn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative z-10 w-full max-w-md sm:w-[420px] mx-auto p-6 sm:p-8 rounded-3xl shadow-2xl bg-[#0a1836] bg-opacity-95 backdrop-blur-lg border border-white/20",children:[S.jsx(Rg,{children:S.jsx("title",{children:"Iniciar Sesin - Borea Wallet"})}),S.jsxs("div",{className:"flex flex-col items-center mb-3",children:[S.jsx("img",{src:ZS,alt:"Logo Boreal",className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 object-contain mb-2 drop-shadow-lg"}),S.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-center tracking-tight",children:S.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-boreal-aqua to-boreal-blue drop-shadow-lg",children:"Accede a tu Wallet"})})]}),S.jsx("p",{className:"text-center text-gray-200 mb-8 text-base font-medium",children:"Inicia sesin con tu cuenta de Google para ver tus certificados."}),S.jsxs(Gt,{variant:"outline",className:"w-full border-white/30 text-white bg-boreal-blue/30 hover:bg-boreal-blue/50 hover:scale-[1.03] transition-all duration-200 shadow-lg flex items-center justify-center gap-2 py-2 text-lg font-semibold",onClick:r,disabled:n==="google",children:[n==="google"?S.jsx(tf,{className:"w-5 h-5 animate-spin"}):S.jsx(uV,{className:"w-5 h-5 mr-2"}),"Ingresar con Google"]})]})})]})};var Ia=FA();const cV=Zu(Ia);function g3(n,e){const t=Jn(yt,"userPoints",n);return Cs(t,r=>{r.exists()?e(r.data()):e({balance:0})})}function fV(n,e,t=20){const r=fr(yt,"userPoints",n,"redemptions"),i=Ui(r,Dp("redeemedAt","desc"),Ca(t));return Cs(i,o=>{const s=[];o.forEach(a=>s.push({id:a.id,...a.data()})),e(s)})}function hV(n,e,t=20){const r=fr(yt,"userPoints",n,"purchases"),i=Ui(r,Dp("purchasedAt","desc"),Ca(t));return Cs(i,o=>{const s=[];o.forEach(a=>s.push({id:a.id,...a.data()})),e(s)})}function dV(n,e,t=20){const r=fr(yt,"userPoints",n,"adminGrants"),i=Ui(r,Dp("grantedAt","desc"),Ca(t));return Cs(i,o=>{const s=[];o.forEach(a=>s.push({id:a.id,...a.data()})),e(s)})}async function pV(n,e,t,r=""){const i=String(n||"").trim().toLowerCase(),o=Number(e);if(!i)throw new Error("Correo requerido");if(!o||o<=0)throw new Error("Monto de puntos invlido");const s=fr(yt,"userPoints"),a=Ui(s,Yu("email","==",i),Ca(1)),c=await ig(a);if(c.empty)throw new Error("No se encontr un usuario con ese correo. Pdele que inicie sesin primero.");const h=c.docs[0].id,p=Jn(yt,"userPoints",h),v=fr(yt,"userPoints",h,"adminGrants");return await cy(yt,async y=>{(await y.get(p)).exists()?y.update(p,{balance:tp(o),updatedAt:ur(),email:i}):y.set(p,{balance:o,updatedAt:ur(),email:i});const A=Jn(v);y.set(A,{amount:o,email:i,note:r||"",grantedAt:ur(),grantedBy:t||null,type:"manual-award"})}),{email:i,amount:o,uid:h}}async function v3(n){const e=String(n).trim();if(!e)throw new Error("Cdigo vaco");const t=Jn(yt,"pointCodes",e),r=await U7(t);if(r.exists())return{ref:t,snap:r};const i=Ui(fr(yt,"pointCodes"),Yu("code","==",e),Ca(1));let o=await ig(i);if(!o.empty){const a=o.docs[0];return{ref:a.ref,snap:a}}const s=Ui(fr(yt,"pointCodes"),Yu("id","==",e),Ca(1));if(o=await ig(s),!o.empty){const a=o.docs[0];return{ref:a.ref,snap:a}}throw new Error("Cdigo no vlido")}async function mV(n){const{snap:e}=await v3(n),t=e.data();let r=null;try{t.expiresAt?.toDate&&(r=t.expiresAt.toDate())}catch{}return{id:String(n).trim(),...t,expiresAt:r}}async function gV(n,e,t){if(!n)throw new Error("Usuario no autenticado");const r=String(e).trim();if(!r)throw new Error("Cdigo vaco");const{ref:i}=await v3(r),o=Jn(yt,"userPoints",n),s=Jn(fr(yt,"userPoints",n,"redemptions"),r);return cy(yt,async a=>{const[c,f]=await Promise.all([a.get(i),a.get(o)]);if(!c.exists())throw new Error("Cdigo no vlido");const h=c.data(),p=!!h.multiUse;if(!p&&(h.used||h.active===!1))throw new Error("Cdigo ya utilizado");if(p&&h.active===!1)throw new Error("Cdigo inactivo");const v=Number(h.amount||0);if(!v||Number.isNaN(v))throw new Error("Cdigo invlido (monto)");if(h.expiresAt?.toDate&&h.expiresAt.toDate()<new Date)throw new Error("El cdigo expir");let y,E;if(p){const C=fr(i,"uses");if(y=Jn(C,n),E=await a.get(y),E.exists())throw new Error("Ya usaste este cdigo")}p?(a.set(y,{uid:n,usedAt:ur(),userEmail:t||null}),a.update(i,{redeemedCount:tp(1),lastUsedAt:ur()})):a.update(i,{used:!0,active:!1,usedBy:n,usedAt:ur(),userEmail:t||null});const A=(t||"").toLowerCase()||null;return f.exists()?a.update(o,{balance:tp(v),updatedAt:ur(),email:A}):a.set(o,{balance:v,updatedAt:ur(),email:A}),a.set(s,{code:r,amount:v,redeemedAt:ur(),userEmail:A}),{amount:v}})}const Er=U.forwardRef(({className:n,type:e,...t},r)=>S.jsx("input",{type:e,className:bs("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));Er.displayName="Input";function vV(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function yV(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var xV=(function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_V=(function(n){xV(e,n);function e(t,r){var i=this.constructor,o=n.call(this,t,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),vV(o,i.prototype),yV(o),o}return e})(Error),wV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),hr=(function(n){wV(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(_V),EV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ni=(function(n){EV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e})(hr),AV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ve=(function(n){AV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(hr),CV=(function(){function n(e){if(this.binarizer=e,e===null)throw new Ve("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var o=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(o))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n})(),TV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xn=(function(n){TV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(hr),IV=(function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n})(),wt=(function(){function n(){}return n.arraycopy=function(e,t,r,i,o){for(;o--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n})(),SV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),hy=(function(n){SV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(hr),bV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),YE=(function(n){bV(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(hy),RV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ln=(function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var o=t;o<r;o++)e[o]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Ve("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new YE(t);if(r>e)throw new YE(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var o=RV(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=31*i+a}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,o=new Int32Array(i);return wt.arraycopy(e,t,o,0,i),o},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,a=r(t,e[s]);if(a>0)i=s+1;else if(a<0)o=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n})(),Ye=(function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),_n=(function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);wt.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=r[i]}var a=i*32+Ye.numberOfTrailingZeros(o);return a>t?t:a},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=~r[i]}var a=i*32+Ye.numberOfTrailingZeros(o);return a>t?t:a},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Ve;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,s=r;s<=i;s++){var a=s>r?0:e&31,c=s<i?31:t&31,f=(2<<c)-(1<<a);o[s]|=f}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Ve;if(t===e)return!0;t--;for(var i=Math.floor(e/32),o=Math.floor(t/32),s=this.bits,a=i;a<=o;a++){var c=a>i?0:e&31,f=a<o?31:t&31,h=(2<<f)-(1<<c)&4294967295;if((s[a]&h)!==(r?h:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Ve("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Ve("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var o=0;o<i;o++){for(var s=0,a=0;a<8;a++)this.get(e)&&(s|=1<<7-a),e++;t[r+o]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,o=0;o<r;o++){var s=i[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-o]=s}if(this.size!==r*32){for(var a=r*32-this.size,c=e[0]>>>a,o=1;o<r;o++){var f=e[o];c|=f<<32-a,e[o-1]=c,c=f>>>a}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&ln.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+ln.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n})(),lg;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ASSUME_GS1=7]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(lg||(lg={}));const kt=lg;var PV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),he=(function(n){PV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(hr),NV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pt;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(pt||(pt={}));var un=(function(){function n(e,t,r){for(var i,o,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,f=0,h=c.length;f!==h;f++){var p=c[f];n.VALUES_TO_ECI.set(p,this)}try{for(var v=NV(s),y=v.next();!y.done;y=v.next()){var E=y.value;n.NAME_TO_ECI.set(E,this)}}catch(A){i={error:A}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new he("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new he("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new he("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(pt.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(pt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(pt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(pt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(pt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(pt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(pt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(pt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(pt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(pt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(pt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(pt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(pt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(pt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(pt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(pt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(pt.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(pt.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(pt.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(pt.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(pt.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(pt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(pt.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(pt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(pt.Big5,28,"Big5"),n.GB18030=new n(pt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(pt.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),DV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Id=(function(n){DV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(hr),$r=(function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof un?e:un.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",o=0,s=e.length;o<s;o++){var a=e[o].toString(16);a.length<2&&(a="0"+a),i+="%"+a}return decodeURIComponent(i)}if(r.equals(un.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Id("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(un.UTF8)||e.equals(un.ISO8859_1)||e.equals(un.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],o=0;o<r.length;o++)i.push(r[o].charCodeAt(0));return new Uint8Array(i)},n})(),rt=(function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return $r.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(kt.CHARACTER_SET)!==void 0)return t.get(kt.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,s=!0,a=0,c=0,f=0,h=0,p=0,v=0,y=0,E=0,A=0,C=0,N=0,P=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,M=0;M<r&&(i||o||s);M++){var j=e[M]&255;s&&(a>0?(j&128)===0?s=!1:a--:(j&128)!==0&&((j&64)===0?s=!1:(a++,(j&32)===0?c++:(a++,(j&16)===0?f++:(a++,(j&8)===0?h++:s=!1))))),i&&(j>127&&j<160?i=!1:j>159&&(j<192||j===215||j===247)&&N++),o&&(p>0?j<64||j===127||j>252?o=!1:p--:j===128||j===160||j>239?o=!1:j>160&&j<224?(v++,E=0,y++,y>A&&(A=y)):j>127?(p++,y=0,E++,E>C&&(C=E)):(y=0,E=0))}return s&&a>0&&(s=!1),o&&p>0&&(o=!1),s&&(P||c+f+h>0)?n.UTF8:o&&(n.ASSUME_SHIFT_JIS||A>=3||C>=3)?n.SHIFT_JIS:i&&o?A===2&&v===2||N*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:o?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function o(a,c,f,h,p,v){if(a==="%%")return"%";if(t[++i]!==void 0){a=h?parseInt(h.substr(1)):void 0;var y=p?parseInt(p.substr(1)):void 0,E;switch(v){case"s":E=t[i];break;case"c":E=t[i][0];break;case"f":E=parseFloat(t[i]).toFixed(a);break;case"p":E=parseFloat(t[i]).toPrecision(a);break;case"e":E=parseFloat(t[i]).toExponential(a);break;case"x":E=parseInt(t[i]).toString(y||16);break;case"d":E=parseFloat(parseInt(t[i],y||10).toPrecision(a)).toFixed(0);break}E=typeof E=="object"?JSON.stringify(E):(+E).toString(y);for(var A=parseInt(f),C=f&&f[0]+""=="0"?"0":" ";E.length<A;)E=c!==void 0?E+C:C+E;return E}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)},n.getBytes=function(e,t){return $r.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=un.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=un.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=un.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),qe=(function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=rt.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n})(),ji=(function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Ve("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),o=0;o<t;o++)for(var s=e[o],a=0;a<r;a++)s[a]&&i.set(a,o);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Ve("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,a=-1,c=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new Ve("row lengths do not match");s=o,c++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,i[o]=!0,o++;else if(e.substring(f,f+r.length)===r)f+=r.length,i[o]=!1,o++;else throw new Ve("illegal character encountered: "+e.substring(f));if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new Ve("row lengths do not match");c++}for(var h=new n(a,c),p=0;p<o;p++)i[p]&&h.set(Math.floor(p%a),Math.floor(p/a));return h},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Ve("input matrix dimensions do not match");for(var t=new _n(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var a=o*r,c=e.getRow(o,t).getBitArray(),f=0;f<r;f++)i[a+f]^=c[f]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Ve("Left and top must be nonnegative");if(i<1||r<1)throw new Ve("Height and width must be at least 1");var o=e+r,s=t+i;if(s>this.height||o>this.width)throw new Ve("The region must fit inside the matrix");for(var a=this.rowSize,c=this.bits,f=t;f<s;f++)for(var h=f*a,p=e;p<o;p++)c[h+Math.floor(p/32)]|=1<<(p&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new _n(this.width):t.clear();for(var r=this.rowSize,i=this.bits,o=e*r,s=0;s<r;s++)t.setBulk(s*32,i[o+s]);return t},n.prototype.setRow=function(e,t){wt.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new _n(e),i=new _n(e),o=0,s=Math.floor((t+1)/2);o<s;o++)r=this.getRow(o,r),i=this.getRow(t-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(t-1-o,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,o=e,s=t,a=-1,c=-1,f=0;f<t;f++)for(var h=0;h<r;h++){var p=i[f*r+h];if(p!==0){if(f<s&&(s=f),f>c&&(c=f),h*32<o){for(var v=0;(p<<31-v&4294967295)===0;)v++;h*32+v<o&&(o=h*32+v)}if(h*32+31>a){for(var v=31;!(p>>>v);)v--;h*32+v>a&&(a=h*32+v)}}}return a<o||c<s?null:Int32Array.from([o,s,a-o+1,c-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,o=r%e*32,s=t[r],a=0;(s<<31-a&4294967295)===0;)a++;return o+=a,Int32Array.from([o,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=Math.floor(r%e)*32,s=t[r],a=31;!(s>>>a);)a--;return o+=a,Int32Array.from([o,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&ln.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ln.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new qe,o=0,s=this.height;o<s;o++){for(var a=0,c=this.width;a<c;a++)i.append(this.get(a,o)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),OV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ne=(function(n){OV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(hr),kV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),MV=(function(n){kV(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new _n(o):r.clear(),this.initArrays(o);for(var s=i.getRow(t,this.luminances),a=this.buckets,c=0;c<o;c++)a[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(a);if(o<3)for(var c=0;c<o;c++)(s[c]&255)<f&&r.set(c);else for(var h=s[0]&255,p=s[1]&255,c=1;c<o-1;c++){var v=s[c+1]&255;(p*4-h-v)/2<f&&r.set(c),h=p,p=v}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),o=new ji(r,i);this.initArrays(r);for(var s=this.buckets,a=1;a<5;a++)for(var c=Math.floor(i*a/5),f=t.getRow(c,this.luminances),h=Math.floor(r*4/5),p=Math.floor(r/5);p<h;p++){var v=f[p]&255;s[v>>e.LUMINANCE_SHIFT]++}for(var y=e.estimateBlackPoint(s),E=t.getMatrix(),a=0;a<i;a++)for(var A=a*r,p=0;p<r;p++){var v=E[A+p]&255;v<y&&o.set(p,a)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,o=0,s=0,a=0;a<r;a++)t[a]>s&&(o=a,s=t[a]),t[a]>i&&(i=t[a]);for(var c=0,f=0,a=0;a<r;a++){var h=a-o,p=t[a]*h*h;p>f&&(c=a,f=p)}if(o>c){var v=o;o=c,c=v}if(c-o<=r/16)throw new ne;for(var y=c-1,E=-1,a=c-1;a>o;a--){var A=a-o,p=A*A*(c-a)*(i-t[a]);p>E&&(y=a,E=p)}return y<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(IV),LV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),VV=(function(n){LV(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var a=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&a++;var c=e.calculateBlackPoints(o,s,a,r,i),f=new ji(r,i);e.calculateThresholdForBlock(o,s,a,r,i,c,f),this.matrix=f}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,o,s,a,c){for(var f=s-e.BLOCK_SIZE,h=o-e.BLOCK_SIZE,p=0;p<i;p++){var v=p<<e.BLOCK_SIZE_POWER;v>f&&(v=f);for(var y=e.cap(p,2,i-3),E=0;E<r;E++){var A=E<<e.BLOCK_SIZE_POWER;A>h&&(A=h);for(var C=e.cap(E,2,r-3),N=0,P=-2;P<=2;P++){var M=a[y+P];N+=M[C-2]+M[C-1]+M[C]+M[C+1]+M[C+2]}var j=N/25;e.thresholdBlock(t,A,v,j,o,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,o,s,a){for(var c=0,f=i*s+r;c<e.BLOCK_SIZE;c++,f+=s)for(var h=0;h<e.BLOCK_SIZE;h++)(t[f+h]&255)<=o&&a.set(r+h,i+c)},e.calculateBlackPoints=function(t,r,i,o,s){for(var a=s-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,f=new Array(i),h=0;h<i;h++){f[h]=new Int32Array(r);var p=h<<e.BLOCK_SIZE_POWER;p>a&&(p=a);for(var v=0;v<r;v++){var y=v<<e.BLOCK_SIZE_POWER;y>c&&(y=c);for(var E=0,A=255,C=0,N=0,P=p*o+y;N<e.BLOCK_SIZE;N++,P+=o){for(var M=0;M<e.BLOCK_SIZE;M++){var j=t[P+M]&255;E+=j,j<A&&(A=j),j>C&&(C=j)}if(C-A>e.MIN_DYNAMIC_RANGE)for(N++,P+=o;N<e.BLOCK_SIZE;N++,P+=o)for(var M=0;M<e.BLOCK_SIZE;M++)E+=t[P+M]&255}var H=E>>e.BLOCK_SIZE_POWER*2;if(C-A<=e.MIN_DYNAMIC_RANGE&&(H=A/2,h>0&&v>0)){var $=(f[h-1][v]+2*f[h][v-1]+f[h-1][v-1])/4;A<$&&(H=$)}f[h][v]=H}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(MV),Mp=(function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new Id("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new Id("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new Id("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new qe,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var s=i[o]&255,a=void 0;s<64?a="#":s<128?a="+":s<192?a=".":a=" ",t.append(a)}t.append(`
`)}return t.toString()},n})(),FV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),dy=(function(n){FV(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(t[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,o){return new e(this.delegate.crop(t,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(Mp),BV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),UV=(function(n){BV(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(r.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX)for(var s=0,a=0,c=t.length;s<c;s+=4,a++){var f=void 0,h=t[s+3];if(h===0)f=255;else{var p=t[s],v=t[s+1],y=t[s+2];f=306*p+601*v+117*y+512>>10}o[a]=f}else for(var s=0,a=0,E=t.length;s<E;s+=4,a++){var f=void 0,h=t[s+3];if(h===0)f=255;else{var p=t[s],v=t[s+1],y=t[s+2];f=306*p+601*v+117*y+512>>10}o[a]=255-f}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ve("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return n.prototype.crop.call(this,t,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,a=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*a),f=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*a);return r.width=c,r.height=f,i.translate(c/2,f/2),i.rotate(o),i.drawImage(this.canvas,s/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new dy(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(Mp),jV=(function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n})(),Kn=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{f(r.next(h))}catch(p){s(p)}}function c(h){try{f(r.throw(h))}catch(p){s(p)}}function f(h){h.done?o(h.value):i(h.value).then(a,c)}f((r=r.apply(n,e||[])).next())})},Xn=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(h){return c([f,h])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(h){f=[6,h],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},zV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hl=(function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Kn(this,void 0,void 0,function(){var e,t,r,i,o,s,a,c,f,h,p,v;return Xn(this,function(y){switch(y.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=y.sent(),t=[];try{for(r=zV(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,c=o.label||"Video device "+(t.length+1),f=o.groupId,h={deviceId:a,label:c,kind:s,groupId:f},t.push(h))}catch(E){p={error:E}}finally{try{i&&!i.done&&(v=r.return)&&v.call(r)}finally{if(p)throw p.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Kn(this,void 0,void 0,function(){var e;return Xn(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new jV(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Kn(this,void 0,void 0,function(){var t;return Xn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Kn(this,void 0,void 0,function(){return Xn(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Kn(this,void 0,void 0,function(){var r,i;return Xn(this,function(o){switch(o.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Kn(this,void 0,void 0,function(){var r;return Xn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Kn(this,void 0,void 0,function(){var r,i;return Xn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=o.sent(),[4,this.decodeOnce(r)];case 2:return i=o.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Kn(this,void 0,void 0,function(){return Xn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Kn(this,void 0,void 0,function(){var i,o;return Xn(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Kn(this,void 0,void 0,function(){var i;return Xn(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,o.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Kn(this,void 0,void 0,function(){var i;return Xn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Kn(this,void 0,void 0,function(){var r;return Xn(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Kn(this,void 0,void 0,function(){return Xn(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new ni("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new ni("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new ni("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new ni("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new ni("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new ni("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new ni("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new ni("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new ni("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new ni("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Kn(this,void 0,void 0,function(){return Xn(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Kn(this,void 0,void 0,function(){return Xn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var o=function(s,a){if(i._stopAsyncDecode){a(new ne("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(v){var f=t&&v instanceof ne,h=v instanceof xn||v instanceof he,p=h&&r;if(f||p)return setTimeout(o,i._timeBetweenDecodingAttempts,s,a);a(v)}};return new Promise(function(s,a){return o(s,a)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var o=r.decode(e);t(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var s=c instanceof xn||c instanceof he,a=c instanceof ne;(s||a)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e),e instanceof HTMLVideoElement?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var t=this.getCaptureCanvas(e),r=new UV(t),i=new VV(r);return new CV(i)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n})(),Wn=(function(){function n(e,t,r,i,o,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=wt.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=o,this.resultMetadata=null,s==null?this.timestamp=wt.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);wt.arraycopy(t,0,r,0,t.length),wt.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n})(),cg;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(cg||(cg={}));const Ne=cg;var fg;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(fg||(fg={}));const Dn=fg;var Lp=(function(){function n(e,t,r,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n})(),xc=(function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Ve;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n})(),ps=(function(){function n(e,t){if(t.length===0)throw new Ve;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),wt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,o=t.length;i!==o;i++){var s=t[i];r=xc.addOrSubtract(r,s)}return r}r=t[0];for(var a=t.length,c=this.field,i=1;i<a;i++)r=xc.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Ve("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;wt.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=xc.addOrSubtract(t[a-s],r[a]);return new n(this.field,o)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Ve("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=this.field,c=0;c<r;c++)for(var f=t[c],h=0;h<o;h++)s[c+h]=xc.addOrSubtract(s[c+h],a.multiply(f,i[h]));return new n(a,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),o=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(o[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ve;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),s=this.field,a=0;a<i;a++)o[a]=s.multiply(r[a],t);return new n(s,o)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Ve("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Ve("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=t.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var a=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),s),f=e.multiplyByMonomial(a,c),h=t.buildMonomial(a,c);r=r.addOrSubtract(h),i=i.addOrSubtract(f)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n})(),HV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),y3=(function(n){HV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(hr),$V=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),lr=(function(n){$V(e,n);function e(t,r,i){var o=n.call(this)||this;o.primitive=t,o.size=r,o.generatorBase=i;for(var s=new Int32Array(r),a=1,c=0;c<r;c++)s[c]=a,a*=2,a>=r&&(a^=t,a&=r-1);o.expTable=s;for(var f=new Int32Array(r),c=0;c<r-1;c++)f[s[c]]=c;return o.logTable=f,o.zero=new ps(o,Int32Array.from([0])),o.one=new ps(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Ve;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new ps(this,i)},e.prototype.inverse=function(t){if(t===0)throw new y3;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Ye.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(xc),WV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),td=(function(n){WV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(hr),GV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Cf=(function(n){GV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(hr),Vp=(function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new ps(r,e),o=new Int32Array(t),s=!0,a=0;a<t;a++){var c=i.evaluateAt(r.exp(a+r.getGeneratorBase()));o[o.length-1-a]=c,c!==0&&(s=!1)}if(!s)for(var f=new ps(r,o),h=this.runEuclideanAlgorithm(r.buildMonomial(t,1),f,t),p=h[0],v=h[1],y=this.findErrorLocations(p),E=this.findErrorMagnitudes(v,y),a=0;a<y.length;a++){var A=e.length-1-r.log(y[a]);if(A<0)throw new td("Bad error location");e[A]=lr.addOrSubtract(e[A],E[a])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=this.field,s=e,a=t,c=o.getZero(),f=o.getOne();a.getDegree()>=(r/2|0);){var h=s,p=c;if(s=a,c=f,s.isZero())throw new td("r_{i-1} was zero");a=h;for(var v=o.getZero(),y=s.getCoefficient(s.getDegree()),E=o.inverse(y);a.getDegree()>=s.getDegree()&&!a.isZero();){var A=a.getDegree()-s.getDegree(),C=o.multiply(a.getCoefficient(a.getDegree()),E);v=v.addOrSubtract(o.buildMonomial(A,C)),a=a.addOrSubtract(s.multiplyByMonomial(A,C))}if(f=v.multiply(c).addOrSubtract(p),a.getDegree()>=s.getDegree())throw new Cf("Division algorithm failed to reduce polynomial?")}var N=f.getCoefficient(0);if(N===0)throw new td("sigmaTilde(0) was zero");var P=o.inverse(N),M=f.multiplyScalar(P),j=a.multiplyScalar(P);return[M,j]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,o=this.field,s=1;s<o.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=o.inverse(s),i++);if(i!==t)throw new td("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),o=this.field,s=0;s<r;s++){for(var a=o.inverse(t[s]),c=1,f=0;f<r;f++)if(s!==f){var h=o.multiply(t[f],a),p=(h&1)===0?h|1:h&-2;c=o.multiply(c,p)}i[s]=o.multiply(e.evaluateAt(a),o.inverse(c)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],a))}return i},n})(),Tn;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Tn||(Tn={}));var QE=(function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),o=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),a=new Lp(o,s,null,null);return a.setNumBits(i.length),a},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=Tn.UPPER,i=Tn.UPPER,o="",s=0;s<t;)if(i===Tn.BINARY){if(t-s<5)break;var a=n.readCode(e,s,5);if(s+=5,a===0){if(t-s<11)break;a=n.readCode(e,s,11)+31,s+=11}for(var c=0;c<a;c++){if(t-s<8){s=t;break}var f=n.readCode(e,s,8);o+=rt.castAsNonUtf8Char(f),s+=8}i=r}else{var h=i===Tn.DIGIT?4:5;if(t-s<h)break;var f=n.readCode(e,s,h);s+=h;var p=n.getCharacter(i,f);p.startsWith("CTRL_")?(r=i,i=n.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(o+=p,i=r)}return o},n.getTable=function(e){switch(e){case"L":return Tn.LOWER;case"P":return Tn.PUNCT;case"M":return Tn.MIXED;case"D":return Tn.DIGIT;case"B":return Tn.BINARY;case"U":default:return Tn.UPPER}},n.getCharacter=function(e,t){switch(e){case Tn.UPPER:return n.UPPER_TABLE[t];case Tn.LOWER:return n.LOWER_TABLE[t];case Tn.MIXED:return n.MIXED_TABLE[t];case Tn.PUNCT:return n.PUNCT_TABLE[t];case Tn.DIGIT:return n.DIGIT_TABLE[t];default:throw new Cf("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=lr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=lr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=lr.AZTEC_DATA_10):(r=12,t=lr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new he;for(var s=e.length%r,a=new Int32Array(o),c=0;c<o;c++,s+=r)a[c]=n.readCode(e,s,r);try{var f=new Vp(t);f.decode(a,o-i)}catch(C){throw new he(C)}for(var h=(1<<r)-1,p=0,c=0;c<i;c++){var v=a[c];if(v===0||v===h)throw new he;(v===1||v===h-1)&&p++}for(var y=new Array(i*r-p),E=0,c=0;c<i;c++){var v=a[c];if(v===1||v===h-1)y.fill(v>1,E,E+r-1),E+=r-1;else for(var A=r-1;A>=0;--A)y[E++]=(v&1<<A)!==0}return y},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var a=0;a<o.length;a++)o[a]=a;else for(var c=i+1+2*Ye.truncDivision(Ye.truncDivision(i,2)-1,15),f=i/2,h=Ye.truncDivision(c,2),a=0;a<f;a++){var p=a+Ye.truncDivision(a,15);o[f-a-1]=h-p-1,o[f+a]=h+p+1}for(var a=0,v=0;a<r;a++){for(var y=(r-a)*4+(t?9:12),E=a*2,A=i-1-E,C=0;C<y;C++)for(var N=C*2,P=0;P<2;P++)s[v+N+P]=e.get(o[E+P],o[E+C]),s[v+2*y+N+P]=e.get(o[E+C],o[A-P]),s[v+4*y+N+P]=e.get(o[A-P],o[A-C]),s[v+6*y+N+P]=e.get(o[A-C],o[E+P]);v+=y*8}return s},n.readCode=function(e,t,r){for(var i=0,o=t;o<t+r;o++)i<<=1,e[o]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n})(),ut=(function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var o=e-r,s=t-i;return Math.sqrt(o*o+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var o=e[r];t+=o}return t},n})(),hg=(function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),Te=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*hg.floatToIntBits(this.x)+hg.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,s,a;if(r>=t&&r>=i?(s=e[0],o=e[1],a=e[2]):i>=r&&i>=t?(s=e[1],o=e[0],a=e[2]):(s=e[2],o=e[0],a=e[1]),this.crossProductZ(o,s,a)<0){var c=o;o=a,a=c}e[0]=o,e[1]=s,e[2]=a},n.distance=function(e,t){return ut.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,o=t.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},n})(),py=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),qV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),KV=(function(n){qV(e,n);function e(t,r,i,o,s){var a=n.call(this,t,r)||this;return a.compact=i,a.nbDatablocks=o,a.nbLayers=s,a}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(py),dg=(function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=t/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ne}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,o=!1,s=!0,a=!1,c=!1,f=!1,h=!1,p=!1,v=this.width,y=this.height;s;){s=!1;for(var E=!0;(E||!c)&&t<v;)E=this.containsBlackPoint(r,i,t,!1),E?(t++,s=!0,c=!0):c||t++;if(t>=v){o=!0;break}for(var A=!0;(A||!f)&&i<y;)A=this.containsBlackPoint(e,t,i,!0),A?(i++,s=!0,f=!0):f||i++;if(i>=y){o=!0;break}for(var C=!0;(C||!h)&&e>=0;)C=this.containsBlackPoint(r,i,e,!1),C?(e--,s=!0,h=!0):h||e--;if(e<0){o=!0;break}for(var N=!0;(N||!p)&&r>=0;)N=this.containsBlackPoint(e,t,r,!0),N?(r--,s=!0,p=!0):p||r--;if(r<0){o=!0;break}s&&(a=!0)}if(!o&&a){for(var P=t-e,M=null,j=1;M===null&&j<P;j++)M=this.getBlackPointOnSegment(e,i-j,e+j,i);if(M==null)throw new ne;for(var H=null,j=1;H===null&&j<P;j++)H=this.getBlackPointOnSegment(e,r+j,e+j,r);if(H==null)throw new ne;for(var $=null,j=1;$===null&&j<P;j++)$=this.getBlackPointOnSegment(t,r+j,t-j,r);if($==null)throw new ne;for(var R=null,j=1;R===null&&j<P;j++)R=this.getBlackPointOnSegment(t,i-j,t-j,i);if(R==null)throw new ne;return this.centerEdges(R,M,$,H)}else throw new ne},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var o=ut.round(ut.distance(e,t,r,i)),s=(r-e)/o,a=(i-t)/o,c=this.image,f=0;f<o;f++){var h=ut.round(e+f*s),p=ut.round(t+f*a);if(c.get(h,p))return new Te(h,p)}return null},n.prototype.centerEdges=function(e,t,r,i){var o=e.getX(),s=e.getY(),a=t.getX(),c=t.getY(),f=r.getX(),h=r.getY(),p=i.getX(),v=i.getY(),y=n.CORR;return o<this.width/2?[new Te(p-y,v+y),new Te(a+y,c+y),new Te(f-y,h-y),new Te(o+y,s-y)]:[new Te(p+y,v+y),new Te(a+y,c-y),new Te(f-y,h+y),new Te(o-y,s-y)]},n.prototype.containsBlackPoint=function(e,t,r,i){var o=this.image;if(i){for(var s=e;s<=t;s++)if(o.get(s,r))return!0}else for(var a=e;a<=t;a++)if(o.get(r,a))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n})(),ZE=(function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<t.length&&o;s+=2){var a=Math.floor(t[s]),c=Math.floor(t[s+1]);if(a<-1||a>r||c<-1||c>i)throw new ne;o=!1,a===-1?(t[s]=0,o=!0):a===r&&(t[s]=r-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}o=!0;for(var s=t.length-2;s>=0&&o;s-=2){var a=Math.floor(t[s]),c=Math.floor(t[s+1]);if(a<-1||a>r||c<-1||c>i)throw new ne;o=!1,a===-1?(t[s]=0,o=!0):a===r&&(t[s]=r-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}},n})(),x3=(function(){function n(e,t,r,i,o,s,a,c,f){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=o,this.a32=s,this.a13=a,this.a23=c,this.a33=f}return n.quadrilateralToQuadrilateral=function(e,t,r,i,o,s,a,c,f,h,p,v,y,E,A,C){var N=n.quadrilateralToSquare(e,t,r,i,o,s,a,c),P=n.squareToQuadrilateral(f,h,p,v,y,E,A,C);return P.times(N)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,c=this.a23,f=this.a31,h=this.a32,p=this.a33,v=0;v<t;v+=2){var y=e[v],E=e[v+1],A=o*y+c*E+p;e[v]=(r*y+s*E+f)/A,e[v+1]=(i*y+a*E+h)/A}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,c=this.a23,f=this.a31,h=this.a32,p=this.a33,v=e.length,y=0;y<v;y++){var E=e[y],A=t[y],C=o*E+c*A+p;e[y]=(r*E+s*A+f)/C,t[y]=(i*E+a*A+h)/C}},n.squareToQuadrilateral=function(e,t,r,i,o,s,a,c){var f=e-r+o-a,h=t-i+s-c;if(f===0&&h===0)return new n(r-e,o-r,e,i-t,s-i,t,0,0,1);var p=r-o,v=a-o,y=i-s,E=c-s,A=p*E-v*y,C=(f*E-v*h)/A,N=(p*h-f*y)/A;return new n(r-e+C*r,a-e+N*a,e,i-t+C*i,c-t+N*c,t,C,N,1)},n.quadrilateralToSquare=function(e,t,r,i,o,s,a,c){return n.squareToQuadrilateral(e,t,r,i,o,s,a,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n})(),XV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),YV=(function(n){XV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,o,s,a,c,f,h,p,v,y,E,A,C,N,P,M,j){var H=x3.quadrilateralToQuadrilateral(o,s,a,c,f,h,p,v,y,E,A,C,N,P,M,j);return this.sampleGridWithTransform(t,r,i,H)},e.prototype.sampleGridWithTransform=function(t,r,i,o){if(r<=0||i<=0)throw new ne;for(var s=new ji(r,i),a=new Float32Array(2*r),c=0;c<i;c++){for(var f=a.length,h=c+.5,p=0;p<f;p+=2)a[p]=p/2+.5,a[p+1]=h;o.transformPoints(a),ZE.checkAndNudgePoints(t,a);try{for(var p=0;p<f;p+=2)t.get(Math.floor(a[p]),Math.floor(a[p+1]))&&s.set(p/2,c)}catch{throw new ne}}return s},e})(ZE),my=(function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new YV,n})(),sr=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Te(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n})(),QV=(function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new KV(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ne;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,o=0;o<4;o++){var s=r[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(o,s,a){var c=(o>>t-2<<1)+(o&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Ye.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ne},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var o=r-i,s=new Int32Array(r),a=r-1;a>=0;--a)s[a]=e&15,e>>=4;try{var c=new Vp(lr.AZTEC_PARAM);c.decode(s,o)}catch{throw new ne}for(var f=0,a=0;a<i;a++)f=(f<<4)+s[a];return f},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(t,s,1,-1),c=this.getFirstDifferent(r,s,1,1),f=this.getFirstDifferent(i,s,-1,1),h=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(h,a)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(a,c,f,h))break}t=a,r=c,i=f,o=h,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ne;this.compact=this.nbCenterLayers===5;var v=new Te(t.getX()+.5,t.getY()-.5),y=new Te(r.getX()+.5,r.getY()+.5),E=new Te(i.getX()-.5,i.getY()+.5),A=new Te(o.getX()-.5,o.getY()-.5);return this.expandSquare([v,y,E,A],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var o=new dg(this.image).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{var s=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new sr(s+7,a-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new sr(s+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new sr(s-7,a+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new sr(s-7,a-7),!1,-1,-1).toResultPoint()}var c=ut.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=ut.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var o=new dg(this.image,15,c,f).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{e=this.getFirstDifferent(new sr(c+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new sr(c+7,f+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new sr(c-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new sr(c-7,f-7),!1,-1,-1).toResultPoint()}return c=ut.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=ut.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new sr(c,f)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,o){var s=my.getInstance(),a=this.getDimension(),c=a/2-this.nbCenterLayers,f=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,c,c,f,c,f,f,c,f,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,o=this.distanceResultPoint(e,t),s=o/r,a=e.getX(),c=e.getY(),f=s*(t.getX()-e.getX())/o,h=s*(t.getY()-e.getY())/o,p=0;p<r;p++)this.image.get(ut.round(a+p*f),ut.round(c+p*h))&&(i|=1<<r-p-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var o=3;e=new sr(e.getX()-o,e.getY()+o),t=new sr(t.getX()-o,t.getY()-o),r=new sr(r.getX()+o,r.getY()-o),i=new sr(i.getX()+o,i.getY()+o);var s=this.getColor(i,e);if(s===0)return!1;var a=this.getColor(e,t);return a!==s||(a=this.getColor(t,r),a!==s)?!1:(a=this.getColor(r,i),a===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,o=(t.getY()-e.getY())/r,s=0,a=e.getX(),c=e.getY(),f=this.image.get(e.getX(),e.getY()),h=Math.ceil(r),p=0;p<h;p++)a+=i,c+=o,this.image.get(ut.round(a),ut.round(c))!==f&&s++;var v=s/r;return v>.1&&v<.9?0:v<=.1===f?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var o=e.getX()+r,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r,s+=i;for(o-=r,s-=i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r;for(o-=r;this.isValid(o,s)&&this.image.get(o,s)===t;)s+=i;return s-=i,new sr(o,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,f=new Te(a+i*o,c+i*s),h=new Te(a-i*o,c-i*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new Te(a+i*o,c+i*s),v=new Te(a-i*o,c-i*s),y=[f,p,h,v];return y},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=ut.round(e.getX()),r=ut.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return ut.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return ut.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ye.truncDivision(this.nbLayers-4,8)+1)+15},n})(),pg=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new QV(e.getBlackMatrix()),o=null,s=null;try{var a=i.detectMirror(!1);o=a.getPoints(),this.reportFoundResultPoints(t,o),s=new QE().decode(a)}catch(p){r=p}if(s==null)try{var a=i.detectMirror(!0);o=a.getPoints(),this.reportFoundResultPoints(t,o),s=new QE().decode(a)}catch(p){throw r??p}var c=new Wn(s.getText(),s.getRawBytes(),s.getNumBits(),o,Ne.AZTEC,wt.currentTimeMillis()),f=s.getByteSegments();f!=null&&c.putMetadata(Dn.BYTE_SEGMENTS,f);var h=s.getECLevel();return h!=null&&c.putMetadata(Dn.ERROR_CORRECTION_LEVEL,h),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(kt.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,o,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n})(),ZV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){ZV(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new pg,t)||this}return e})(hl);var cn=(function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(kt.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,t),s=o.getResultMetadata(),a=270;s!==null&&s.get(Dn.ORIENTATION)===!0&&(a=a+s.get(Dn.ORIENTATION)%360),o.putMetadata(Dn.ORIENTATION,a);var c=o.getResultPoints();if(c!==null)for(var f=i.getHeight(),h=0;h<c.length;h++)c[h]=new Te(f-c[h].getY()-1,c[h].getX());return o}else throw new ne}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),o=new _n(r),s=t&&t.get(kt.TRY_HARDER)===!0,a=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var f=Math.trunc(i/2),h=0;h<c;h++){var p=Math.trunc((h+1)/2),v=(h&1)===0,y=f+a*(v?p:-p);if(y<0||y>=i)break;try{o=e.getBlackRow(y,o)}catch{continue}for(var E=function(P){if(P===1&&(o.reverse(),t&&t.get(kt.NEED_RESULT_POINT_CALLBACK)===!0)){var M=new Map;t.forEach(function($,R){return M.set(R,$)}),M.delete(kt.NEED_RESULT_POINT_CALLBACK),t=M}try{var j=A.decodeRow(y,o,t);if(P===1){j.putMetadata(Dn.ORIENTATION,180);var H=j.getResultPoints();H!==null&&(H[0]=new Te(r-H[0].getX()-1,H[0].getY()),H[1]=new Te(r-H[1].getX()-1,H[1].getY()))}return{value:j}}catch{}},A=this,C=0;C<2;C++){var N=E(C);if(typeof N=="object")return N.value}}throw new ne},n.recordPattern=function(e,t,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var s=e.getSize();if(t>=s)throw new ne;for(var a=!e.get(t),c=0,f=t;f<s;){if(e.get(f)!==a)r[c]++;else{if(++c===i)break;r[c]=1,a=!a}f++}if(!(c===i||c===i-1&&f===s))throw new ne},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,o=e.get(t);t>0&&i>=0;)e.get(--t)!==o&&(i--,o=!o);if(i>=0)throw new ne;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=t[a];if(o<s)return Number.POSITIVE_INFINITY;var c=o/s;r*=c;for(var f=0,h=0;h<i;h++){var p=e[h],v=t[h]*c,y=p>v?p-v:v-p;if(y>r)return Number.POSITIVE_INFINITY;f+=y}return f/o},n})(),JV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),JE=(function(n){JV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),a=i,c=!1,f=6,h=i;h<r;h++)if(t.get(h)!==c)s[o]++;else{if(o===f-1){for(var p=e.MAX_AVG_VARIANCE,v=-1,y=e.CODE_START_A;y<=e.CODE_START_C;y++){var E=cn.patternMatchVariance(s,e.CODE_PATTERNS[y],e.MAX_INDIVIDUAL_VARIANCE);E<p&&(p=E,v=y)}if(v>=0&&t.isRange(Math.max(0,a-(h-a)/2),a,!1))return Int32Array.from([a,h,v]);a+=s[0]+s[1],s=s.slice(2,s.length-1),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,c=!c}throw new ne},e.decodeCode=function(t,r,i){cn.recordPattern(t,i,r);for(var o=e.MAX_AVG_VARIANCE,s=-1,a=0;a<e.CODE_PATTERNS.length;a++){var c=e.CODE_PATTERNS[a],f=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);f<o&&(o=f,s=a)}if(s>=0)return s;throw new ne},e.prototype.decodeRow=function(t,r,i){var o=i&&i.get(kt.ASSUME_GS1)===!0,s=e.findStartPattern(r),a=s[2],c=0,f=new Uint8Array(20);f[c++]=a;var h;switch(a){case e.CODE_START_A:h=e.CODE_CODE_A;break;case e.CODE_START_B:h=e.CODE_CODE_B;break;case e.CODE_START_C:h=e.CODE_CODE_C;break;default:throw new he}for(var p=!1,v=!1,y="",E=s[0],A=s[1],C=Int32Array.from([0,0,0,0,0,0]),N=0,P=0,M=a,j=0,H=!0,$=!1,R=!1;!p;){var I=v;switch(v=!1,N=P,P=e.decodeCode(r,C,A),f[c++]=P,P!==e.CODE_STOP&&(H=!0),P!==e.CODE_STOP&&(j++,M+=j*P),E=A,A+=C.reduce(function(xe,Z){return xe+Z},0),P){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new he}switch(h){case e.CODE_CODE_A:if(P<64)R===$?y+=String.fromCharCode(32+P):y+=String.fromCharCode(32+P+128),R=!1;else if(P<96)R===$?y+=String.fromCharCode(P-64):y+=String.fromCharCode(P+64),R=!1;else switch(P!==e.CODE_STOP&&(H=!1),P){case e.CODE_FNC_1:o&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!$&&R?($=!0,R=!1):$&&R?($=!1,R=!1):R=!0;break;case e.CODE_SHIFT:v=!0,h=e.CODE_CODE_B;break;case e.CODE_CODE_B:h=e.CODE_CODE_B;break;case e.CODE_CODE_C:h=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(P<96)R===$?y+=String.fromCharCode(32+P):y+=String.fromCharCode(32+P+128),R=!1;else switch(P!==e.CODE_STOP&&(H=!1),P){case e.CODE_FNC_1:o&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!$&&R?($=!0,R=!1):$&&R?($=!1,R=!1):R=!0;break;case e.CODE_SHIFT:v=!0,h=e.CODE_CODE_A;break;case e.CODE_CODE_A:h=e.CODE_CODE_A;break;case e.CODE_CODE_C:h=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(P<100)P<10&&(y+="0"),y+=P;else switch(P!==e.CODE_STOP&&(H=!1),P){case e.CODE_FNC_1:o&&(y.length===0?y+="]C1":y+="");break;case e.CODE_CODE_A:h=e.CODE_CODE_A;break;case e.CODE_CODE_B:h=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}I&&(h=h===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var D=A-E;if(A=r.getNextUnset(A),!r.isRange(A,Math.min(r.getSize(),A+(A-E)/2),!1))throw new ne;if(M-=j*N,M%103!==N)throw new xn;var O=y.length;if(O===0)throw new ne;O>0&&H&&(h===e.CODE_CODE_C?y=y.substring(0,O-2):y=y.substring(0,O-1));for(var F=(s[1]+s[0])/2,B=E+D/2,L=f.length,te=new Uint8Array(L),be=0;be<L;be++)te[be]=f[be];var Oe=[new Te(F,t),new Te(B,t)];return new Wn(y,te,0,Oe,Ne.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(cn),eF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Q1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eA=(function(n){eF(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var o,s,a,c,f=this.counters;f.fill(0),this.decodeRowResult="";var h=e.findAsteriskPattern(r,f),p=r.getNextSet(h[1]),v=r.getSize(),y,E;do{e.recordPattern(r,p,f);var A=e.toNarrowWidePattern(f);if(A<0)throw new ne;y=e.patternToChar(A),this.decodeRowResult+=y,E=p;try{for(var C=(o=void 0,Q1(f)),N=C.next();!N.done;N=C.next()){var P=N.value;p+=P}}catch(L){o={error:L}}finally{try{N&&!N.done&&(s=C.return)&&s.call(C)}finally{if(o)throw o.error}}p=r.getNextSet(p)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var M=0;try{for(var j=Q1(f),H=j.next();!H.done;H=j.next()){var P=H.value;M+=P}}catch(L){a={error:L}}finally{try{H&&!H.done&&(c=j.return)&&c.call(j)}finally{if(a)throw a.error}}var $=p-E-M;if(p!==v&&$*2<M)throw new ne;if(this.usingCheckDigit){for(var R=this.decodeRowResult.length-1,I=0,D=0;D<R;D++)I+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(D));if(this.decodeRowResult.charAt(R)!==e.ALPHABET_STRING.charAt(I%43))throw new xn;this.decodeRowResult=this.decodeRowResult.substring(0,R)}if(this.decodeRowResult.length===0)throw new ne;var O;this.extendedMode?O=e.decodeExtended(this.decodeRowResult):O=this.decodeRowResult;var F=(h[1]+h[0])/2,B=E+M/2;return new Wn(O,null,0,[new Te(F,t),new Te(B,t)],Ne.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),o=t.getNextSet(0),s=0,a=o,c=!1,f=r.length,h=o;h<i;h++)if(t.get(h)!==c)r[s]++;else{if(s===f-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,a-Math.floor((h-a)/2)),a,!1))return[a,h];a+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new ne},e.toNarrowWidePattern=function(t){var r,i,o=t.length,s=0,a;do{var c=2147483647;try{for(var f=(r=void 0,Q1(t)),h=f.next();!h.done;h=f.next()){var p=h.value;p<c&&p>s&&(c=p)}}catch(A){r={error:A}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}s=c,a=0;for(var v=0,y=0,E=0;E<o;E++){var p=t[E];p>s&&(y|=1<<o-1-E,a++,v+=p)}if(a===3){for(var E=0;E<o&&a>0;E++){var p=t[E];if(p>s&&(a--,p*2>=v))return-1}return y}}while(a>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new ne},e.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var a=t.charAt(o+1),c="\0";switch(s){case"+":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)+32);else throw new he;break;case"$":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)-64);else throw new he;break;case"%":if(a>="A"&&a<="E")c=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")c=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")c=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")c="\0";else if(a==="V")c="@";else if(a==="W")c="`";else if(a==="X"||a==="Y"||a==="Z")c="";else throw new he;break;case"/":if(a>="A"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")c=":";else throw new he;break}i+=c,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(cn),tF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Z1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tA=(function(n){tF(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var o,s,a,c,f=this.findAsteriskPattern(r),h=r.getNextSet(f[1]),p=r.getSize(),v=this.counters;v.fill(0),this.decodeRowResult="";var y,E;do{e.recordPattern(r,h,v);var A=this.toPattern(v);if(A<0)throw new ne;y=this.patternToChar(A),this.decodeRowResult+=y,E=h;try{for(var C=(o=void 0,Z1(v)),N=C.next();!N.done;N=C.next()){var P=N.value;h+=P}}catch(D){o={error:D}}finally{try{N&&!N.done&&(s=C.return)&&s.call(C)}finally{if(o)throw o.error}}h=r.getNextSet(h)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var M=0;try{for(var j=Z1(v),H=j.next();!H.done;H=j.next()){var P=H.value;M+=P}}catch(D){a={error:D}}finally{try{H&&!H.done&&(c=j.return)&&c.call(j)}finally{if(a)throw a.error}}if(h===p||!r.get(h))throw new ne;if(this.decodeRowResult.length<2)throw new ne;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var $=this.decodeExtended(this.decodeRowResult),R=(f[1]+f[0])/2,I=E+M/2;return new Wn($,null,0,[new Te(R,t),new Te(I,t)],Ne.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,a=!1,c=o.length,f=0,h=i;h<r;h++)if(t.get(h)!==a)o[f]++;else{if(f===c-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,h]);s+=o[0]+o[1],o.copyWithin(0,2,2+f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,a=!a}throw new ne},e.prototype.toPattern=function(t){var r,i,o=0;try{for(var s=Z1(t),a=s.next();!a.done;a=s.next()){var c=a.value;o+=c}}catch(E){r={error:E}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var f=0,h=t.length,p=0;p<h;p++){var v=Math.round(t[p]*9/o);if(v<1||v>4)return-1;if((p&1)===0)for(var y=0;y<v;y++)f=f<<1|1;else f<<=v}return f},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new ne},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s>="a"&&s<="d"){if(o>=r-1)throw new he;var a=t.charAt(o+1),c="\0";switch(s){case"d":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)+32);else throw new he;break;case"a":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)-64);else throw new he;break;case"b":if(a>="A"&&a<="E")c=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")c=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")c=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")c="\0";else if(a==="V")c="@";else if(a==="W")c="`";else if(a>="X"&&a<="Z")c="";else throw new he;break;case"c":if(a>="A"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")c=":";else throw new he;break}i+=c,o++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var o=1,s=0,a=r-1;a>=0;a--)s+=o*e.ALPHABET_STRING.indexOf(t.charAt(a)),++o>i&&(o=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new xn},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(cn),nF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),rF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nA=(function(n){nF(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var o,s,a=this.decodeStart(r),c=this.decodeEnd(r),f=new qe;e.decodeMiddle(r,a[1],c[0],f);var h=f.toString(),p=null;i!=null&&(p=i.get(kt.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var v=h.length,y=!1,E=0;try{for(var A=rF(p),C=A.next();!C.done;C=A.next()){var N=C.value;if(v===N){y=!0;break}N>E&&(E=N)}}catch(j){o={error:j}}finally{try{C&&!C.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}if(!y&&v>E&&(y=!0),!y)throw new he;var P=[new Te(a[1],t),new Te(c[0],t)],M=new Wn(h,null,0,P,Ne.ITF,new Date().getTime());return M},e.decodeMiddle=function(t,r,i,o){var s=new Int32Array(10),a=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),a.fill(0),c.fill(0);r<i;){cn.recordPattern(t,r,s);for(var f=0;f<5;f++){var h=2*f;a[f]=s[h],c[f]=s[h+1]}var p=e.decodeDigit(a);o.append(p.toString()),p=this.decodeDigit(c),o.append(p.toString()),s.forEach(function(v){r+=v})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!t.get(o);o--)i--;if(i!==0)throw new ne},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new ne;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof ne&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var o=i.length,s=new Int32Array(o),a=t.getSize(),c=!1,f=0,h=r;s.fill(0);for(var p=r;p<a;p++)if(t.get(p)!==c)s[f]++;else{if(f===o-1){if(cn.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[h,p];h+=s[0]+s[1],wt.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,c=!c}throw new ne},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var a=e.PATTERNS[s],c=cn.patternMatchVariance(t,a,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new ne},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(cn),iF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Qu=(function(n){iF(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,o=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,s);var a=i[0];o=i[1];var c=a-(o-a);c>=0&&(r=t.isRange(c,a,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new he;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new he;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,o){return this.findGuardPattern(t,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(t,r,i,o,s){var a=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,f=r,h=o.length,p=i,v=r;v<a;v++)if(t.get(v)!==p)s[c]++;else{if(c===h-1){if(cn.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,v]);f+=s[0]+s[1];for(var y=s.slice(2,s.length),E=0;E<c-1;E++)s[E]=y[E];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,p=!p}throw new ne},e.decodeDigit=function(t,r,i,o){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,a=-1,c=o.length,f=0;f<c;f++){var h=o[f],p=cn.patternMatchVariance(r,h,e.MAX_INDIVIDUAL_VARIANCE);p<s&&(s=p,a=f)}if(a>=0)return a;throw new ne},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(cn),oF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sF=(function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),a=n.parseExtensionString(s),c=[new Te((r[0]+r[1])/2,e),new Te(o,e)],f=new Wn(s,null,0,c,Ne.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&f.putAllMetadata(a),f},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),c=t[1],f=0,h=0;h<5&&c<a;h++){var p=Qu.decodeDigit(e,s,c,Qu.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var v=(i=void 0,oF(s)),y=v.next();!y.done;y=v.next()){var E=y.value;c+=E}}catch(C){i={error:C}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}p>=10&&(f|=1<<4-h),h!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new ne;var A=this.determineCheckDigit(f);if(n.extensionChecksum(r.toString())!==A)throw new ne;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new ne},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[Dn.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),o=r%100,s=o<10?"0"+o:o.toString();return t+i+"."+s},n})(),aF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uF=(function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),a=n.parseExtensionString(s),c=[new Te((r[0]+r[1])/2,e),new Te(o,e)],f=new Wn(s,null,0,c,Ne.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&f.putAllMetadata(a),f},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),c=t[1],f=0,h=0;h<2&&c<a;h++){var p=Qu.decodeDigit(e,s,c,Qu.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var v=(i=void 0,aF(s)),y=v.next();!y.done;y=v.next()){var E=y.value;c+=E}}catch(A){i={error:A}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}p>=10&&(f|=1<<1-h),h!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new ne;if(parseInt(r.toString())%4!==f)throw new ne;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[Dn.ISSUE_NUMBER,parseInt(e)]])},n})(),lF=(function(){function n(){}return n.decodeRow=function(e,t,r){var i=Qu.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new sF;return o.decodeRow(e,t,i)}catch{var s=new uF;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n})(),cF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),an=(function(n){cF(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=o}return t}return e.prototype.decodeRow=function(t,r,i){var o=e.findStartGuardPattern(r),s=i==null?null:i.get(kt.NEED_RESULT_POINT_CALLBACK);if(s!=null){var a=new Te((o[0]+o[1])/2,t);s.foundPossibleResultPoint(a)}var c=this.decodeMiddle(r,o,this.decodeRowStringBuffer),f=c.rowOffset,h=c.resultString;if(s!=null){var p=new Te(f,t);s.foundPossibleResultPoint(p)}var v=e.decodeEnd(r,f);if(s!=null){var y=new Te((v[0]+v[1])/2,t);s.foundPossibleResultPoint(y)}var E=v[1],A=E+(E-v[0]);if(A>=r.getSize()||!r.isRange(E,A,!1))throw new ne;var C=h.toString();if(C.length<8)throw new he;if(!e.checkChecksum(C))throw new xn;var N=(o[1]+o[0])/2,P=(v[1]+v[0])/2,M=this.getBarcodeFormat(),j=[new Te(N,t),new Te(P,t)],H=new Wn(C,null,0,j,M,new Date().getTime()),$=0;try{var R=lF.decodeRow(t,r,v[1]);H.putMetadata(Dn.UPC_EAN_EXTENSION,R.getText()),H.putAllMetadata(R.getResultMetadata()),H.addResultPoints(R.getResultPoints()),$=R.getText().length}catch{}var I=i==null?null:i.get(kt.ALLOWED_EAN_EXTENSIONS);if(I!=null){var D=!1;for(var O in I)if($.toString()===O){D=!0;break}if(!D)throw new ne}return M===Ne.EAN_13||Ne.UPC_A,H},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new he;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new he;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Qu),fF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),rA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mg=(function(n){fF(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var h=t.getSize(),p=r[1],v=0,y=0;y<6&&p<h;y++){var E=an.decodeDigit(t,f,p,an.L_AND_G_PATTERNS);i+=String.fromCharCode(48+E%10);try{for(var A=(o=void 0,rA(f)),C=A.next();!C.done;C=A.next()){var N=C.value;p+=N}}catch(H){o={error:H}}finally{try{C&&!C.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}E>=10&&(v|=1<<5-y)}i=e.determineFirstDigit(i,v);var P=an.findGuardPattern(t,p,!0,an.MIDDLE_PATTERN,new Int32Array(an.MIDDLE_PATTERN.length).fill(0));p=P[1];for(var y=0;y<6&&p<h;y++){var E=an.decodeDigit(t,f,p,an.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var M=(a=void 0,rA(f)),j=M.next();!j.done;j=M.next()){var N=j.value;p+=N}}catch(R){a={error:R}}finally{try{j&&!j.done&&(c=M.return)&&c.call(M)}finally{if(a)throw a.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Ne.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new ne},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(an),hF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),iA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oA=(function(n){hF(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var h=t.getSize(),p=r[1],v=0;v<4&&p<h;v++){var y=an.decodeDigit(t,f,p,an.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var E=(o=void 0,iA(f)),A=E.next();!A.done;A=E.next()){var C=A.value;p+=C}}catch(j){o={error:j}}finally{try{A&&!A.done&&(s=E.return)&&s.call(E)}finally{if(o)throw o.error}}}var N=an.findGuardPattern(t,p,!0,an.MIDDLE_PATTERN,new Int32Array(an.MIDDLE_PATTERN.length).fill(0));p=N[1];for(var v=0;v<4&&p<h;v++){var y=an.decodeDigit(t,f,p,an.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var P=(a=void 0,iA(f)),M=P.next();!M.done;M=P.next()){var C=M.value;p+=C}}catch($){a={error:$}}finally{try{M&&!M.done&&(c=P.return)&&c.call(P)}finally{if(a)throw a.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Ne.EAN_8},e})(an),dF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),sA=(function(n){dF(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new mg,t}return e.prototype.getBarcodeFormat=function(){return Ne.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new Wn(r.substring(1),null,null,t.getResultPoints(),Ne.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new ne},e.prototype.reset=function(){this.ean13Reader.reset()},e})(an),pF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aA=(function(n){pF(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a=this.decodeMiddleCounters.map(function(C){return C});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var c=t.getSize(),f=r[1],h=0,p=0;p<6&&f<c;p++){var v=e.decodeDigit(t,a,f,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);try{for(var y=(o=void 0,mF(a)),E=y.next();!E.done;E=y.next()){var A=E.value;f+=A}}catch(C){o={error:C}}finally{try{E&&!E.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}v>=10&&(h|=1<<5-p)}return e.determineNumSysAndCheckDigit(new qe(i),h),f},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return an.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){t.insert(0,"0"+i),t.append("0"+o);return}throw ne.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Ne.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new qe;i.append(t.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(an),gF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),uA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J1=(function(n){gF(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(kt.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(Ne.EAN_13)>-1&&o.push(new mg),i.indexOf(Ne.UPC_A)>-1&&o.push(new sA),i.indexOf(Ne.EAN_8)>-1&&o.push(new oA),i.indexOf(Ne.UPC_E)>-1&&o.push(new aA)),o.length===0&&(o.push(new mg),o.push(new sA),o.push(new oA),o.push(new aA)),r.readers=o,r}return e.prototype.decodeRow=function(t,r,i){var o,s;try{for(var a=uA(this.readers),c=a.next();!c.done;c=a.next()){var f=c.value;try{var h=f.decodeRow(t,r,i),p=h.getBarcodeFormat()===Ne.EAN_13&&h.getText().charAt(0)==="0",v=i==null?null:i.get(kt.POSSIBLE_FORMATS),y=v==null||v.includes(Ne.UPC_A);if(p&&y){var E=h.getRawBytes(),A=new Wn(h.getText().substring(1),E,E?E.length:null,h.getResultPoints(),Ne.UPC_A);return A.putAllMetadata(h.getResultMetadata()),A}return h}catch{}}}catch(C){o={error:C}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}throw new ne},e.prototype.reset=function(){var t,r;try{for(var i=uA(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;s.reset()}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e})(cn),vF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),yF=(function(n){vF(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var o=this.getValidRowData(r);if(!o)throw new ne;var s=this.codaBarDecodeRow(o.row);if(!s)throw new ne;return new Wn(s,null,0,[new Te(o.left,t),new Te(o.right,t)],Ne.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var o=r.lastIndexOf(!0);if(o<=i)return null;r=r.slice(i,o+1);for(var s=[],a=r[0],c=1,f=1;f<r.length;f++)r[f]===a?c++:(a=r[f],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,f){return(c+f)/2},0));t.length>0;){var o=t.splice(0,8).splice(0,7),s=o.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var a=r.join("");return this.validCodaBarString(a)?a:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e})(cn),xF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_F=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ua=(function(n){xF(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(cn.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new ne},e.count=function(t){return ut.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]>o&&(o=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]<o&&(o=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,o=t[0]+t[1],s=o+t[2]+t[3],a=o/s;if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var h=_F(t),p=h.next();!p.done;p=h.next()){var v=p.value;v>f&&(f=v),v<c&&(c=v)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return f<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(cn),rp=(function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n})(),_3=(function(){function n(e,t,r,i,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Te(r,o)),this.resultPoints.push(new Te(i,o))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n})(),wF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pu=(function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,o,s=0;try{for(var a=wF(e),c=a.next();!c.done;c=a.next()){var f=c.value;s+=f}}catch(P){i={error:P}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}for(var h=0,p=0,v=e.length,y=0;y<v-1;y++){var E=void 0;for(E=1,p|=1<<y;E<e[y];E++,p&=~(1<<y)){var A=n.combins(s-E-1,v-y-2);if(r&&p===0&&s-E-(v-y-1)>=v-y-1&&(A-=n.combins(s-E-(v-y),v-y-2)),v-y-1>1){for(var C=0,N=s-E-(v-y-2);N>t;N--)C+=n.combins(s-E-N-1,v-y-3);A-=C*(v-1-y)}else s-E>t&&A--;h+=A}s-=E}return h},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var o=1,s=1,a=e;a>r;a--)o*=a,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},n})(),EF=(function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new _n(r),o=0,s=e[0],a=s.getRightChar().getValue(),c=11;c>=0;--c)(a&1<<c)!==0&&i.set(o),o++;for(var c=1;c<e.length;++c){for(var f=e[c],h=f.getLeftChar().getValue(),p=11;p>=0;--p)(h&1<<p)!==0&&i.set(o),o++;if(f.getRightChar()!==null)for(var v=f.getRightChar().getValue(),p=11;p>=0;--p)(v&1<<p)!==0&&i.set(o),o++}return i},n})(),ia=(function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n})(),gy=(function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n})(),AF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ti=(function(n){AF(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(gy),CF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),oa=(function(n){CF(e,n);function e(t,r,i){var o=n.call(this,t)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(gy),TF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),yu=(function(n){TF(e,n);function e(t,r,i){var o=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new he;return o.firstDigit=r,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(gy),nd=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IF=(function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,o,s,a,c,f;if(!e)return null;if(e.length<2)throw new ne;var h=e.substring(0,2);try{for(var p=nd(n.TWO_DIGIT_DATA_LENGTH),v=p.next();!v.done;v=p.next()){var y=v.value;if(y[0]===h)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,y[2],e):n.processFixedAI(2,y[1],e)}}catch($){t={error:$}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}if(e.length<3)throw new ne;var E=e.substring(0,3);try{for(var A=nd(n.THREE_DIGIT_DATA_LENGTH),C=A.next();!C.done;C=A.next()){var y=C.value;if(y[0]===E)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,y[2],e):n.processFixedAI(3,y[1],e)}}catch($){i={error:$}}finally{try{C&&!C.done&&(o=A.return)&&o.call(A)}finally{if(i)throw i.error}}try{for(var N=nd(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),P=N.next();!P.done;P=N.next()){var y=P.value;if(y[0]===E)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],e):n.processFixedAI(4,y[1],e)}}catch($){s={error:$}}finally{try{P&&!P.done&&(a=N.return)&&a.call(N)}finally{if(s)throw s.error}}if(e.length<4)throw new ne;var M=e.substring(0,4);try{for(var j=nd(n.FOUR_DIGIT_DATA_LENGTH),H=j.next();!H.done;H=j.next()){var y=H.value;if(y[0]===M)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],e):n.processFixedAI(4,y[1],e)}}catch($){c={error:$}}finally{try{H&&!H.done&&(f=j.return)&&f.call(j)}finally{if(c)throw c.error}}throw new ne},n.processFixedAI=function(e,t,r){if(r.length<e)throw new ne;var i=r.substring(0,e);if(r.length<e+t)throw new ne;var o=r.substring(e,e+t),s=r.substring(e+t),a="("+i+")"+o,c=n.parseFieldsInGeneralPurpose(s);return c==null?a:a+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),o;r.length<e+t?o=r.length:o=e+t;var s=r.substring(e,o),a=r.substring(o),c="("+i+")"+s,f=n.parseFieldsInGeneralPurpose(a);return f==null?c:c+f},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n})(),Sd=(function(){function n(e){this.buffer=new qe,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var o=this.decodeGeneralPurposeField(r,i),s=IF.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?i=""+o.getRemainingValue():i=null,r===o.getNewPosition())break;r=o.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new yu(this.information.getSize(),yu.FNC1,yu.FNC1):new yu(this.information.getSize(),t-1,yu.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,o=(r-8)%11;return new yu(e+7,i,o)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,o=0;o<r;++o)e.get(t+o)&&(i|=1<<r-o-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new oa(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new oa(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new oa(this.current.getPosition(),this.buffer.toString()):t=new oa(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new ia(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new oa(this.current.getPosition(),this.buffer.toString());return new ia(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ia(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new oa(this.current.getPosition(),this.buffer.toString());return new ia(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ia(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new oa(this.current.getPosition(),this.buffer.toString());return new ia(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ia(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ti(e+5,ti.FNC1);if(t>=5&&t<15)return new ti(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new ti(e+7,""+(r+1));if(r>=90&&r<116)return new ti(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new he}return new ti(e+8,o)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ti(e+5,ti.FNC1);if(t>=5&&t<15)return new ti(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new ti(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Cf("Decoding invalid alphanumeric value: "+r)}return new ti(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n})(),w3=(function(){function n(e){this.information=e,this.generalDecoder=new Sd(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n})(),SF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ii=(function(n){SF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,o=0;o<13;o++){var s=t.charAt(o+r).charCodeAt(0)-48;i+=(o&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(w3),bF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),RF=(function(n){bF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new qe;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(ii),PF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),NF=(function(n){PF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new qe;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(w3),DF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bd=(function(n){DF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,o);for(var s=this.checkWeight(o),a=1e5,c=0;c<5;++c)s/a===0&&t.append("0"),a/=10;t.append(s)},e})(ii),OF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),E3=(function(n){OF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+bd.GTIN_SIZE+e.WEIGHT_SIZE)throw new ne;var t=new qe;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+bd.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(bd),kF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),MF=(function(n){kF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(E3),LF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),VF=(function(n){LF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(E3),FF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),BF=(function(n){FF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ii.GTIN_SIZE)throw new ne;var t=new qe;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ii.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ii.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(ii),UF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jF=(function(n){UF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ii.GTIN_SIZE)throw new ne;var t=new qe;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ii.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ii.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ii.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(ii),zF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Jo=(function(n){zF(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.dateCode=i,o.firstAIdigits=r,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new ne;var t=new qe;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var o=i%32;i/=32;var s=i%12+1;i/=12;var a=i;a/10===0&&t.append("0"),t.append(a),s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(bd);function HF(n){try{if(n.get(1))return new RF(n);if(!n.get(2))return new NF(n);var e=Sd.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new MF(n);case 5:return new VF(n)}var t=Sd.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new BF(n);case 13:return new jF(n)}var r=Sd.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Jo(n,"310","11");case 57:return new Jo(n,"320","11");case 58:return new Jo(n,"310","13");case 59:return new Jo(n,"320","13");case 60:return new Jo(n,"310","15");case 61:return new Jo(n,"320","15");case 62:return new Jo(n,"310","17");case 63:return new Jo(n,"320","17")}}catch(i){throw console.log(i),new Cf("unknown decoder: "+n)}}var lA=(function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n})(),$F=(function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,o){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n})(),WF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),es=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GF=(function(n){WF(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(a){if(a instanceof ne){if(!this.pairs.length)throw new ne;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new ne},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,o,s=r;s<this.rows.length;s++){var a=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,es(t)),f=c.next();!f.done;f=c.next()){var h=f.value;this.pairs.push(h.getPairs())}}catch(v){i={error:v}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(a.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(t);p.push(a);try{return this.checkRows(p,s+1)}catch(v){console.log(v)}}}throw new ne},e.isValidSequence=function(t){var r,i;try{for(var o=es(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var a=s.value;if(!(t.length>a.length)){for(var c=!0,f=0;f<t.length;f++)if(t[f].getFinderPattern().getValue()!==a[f]){c=!1;break}if(c)return!0}}}catch(h){r={error:h}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,o=!1,s=!1;i<this.rows.length;){var a=this.rows[i];if(a.getRowNumber()>t){s=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new $F(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,o,s,a,c,f;try{for(var h=es(r),p=h.next();!p.done;p=h.next()){var v=p.value;if(v.getPairs().length!==t.length){var y=!0;try{for(var E=(s=void 0,es(v.getPairs())),A=E.next();!A.done;A=E.next()){var C=A.value,N=!1;try{for(var P=(c=void 0,es(t)),M=P.next();!M.done;M=P.next()){var j=M.value;if(lA.equals(C,j)){N=!0;break}}}catch(H){c={error:H}}finally{try{M&&!M.done&&(f=P.return)&&f.call(P)}finally{if(c)throw c.error}}N||(y=!1)}}catch(H){s={error:H}}finally{try{A&&!A.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}}}}catch(H){i={error:H}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,o,s,a,c,f;try{for(var h=es(r),p=h.next();!p.done;p=h.next()){var v=p.value,y=!0;try{for(var E=(s=void 0,es(t)),A=E.next();!A.done;A=E.next()){var C=A.value,N=!1;try{for(var P=(c=void 0,es(v.getPairs())),M=P.next();!M.done;M=P.next()){var j=M.value;if(C.equals(j)){N=!0;break}}}catch(H){c={error:H}}finally{try{M&&!M.done&&(f=P.return)&&f.call(P)}finally{if(c)throw c.error}}if(!N){y=!1;break}}}catch(H){s={error:H}}finally{try{A&&!A.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}if(y)return!0}}catch(H){i={error:H}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=EF.buildBitArray(t),i=HF(r),o=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),a=t[t.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],a[0],a[1]];return new Wn(o,null,null,c,Ne.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,a=1;a<this.pairs.size();++a){var c=this.pairs.get(a);o+=c.getLeftChar().getChecksumPortion(),s++;var f=c.getRightChar();f!=null&&(o+=f.getChecksumPortion(),s++)}o%=211;var h=211*(s-4)+o;return h===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var o=r.length%2===0;this.startFromEven&&(o=!o);var s,a=!0,c=-1;do this.findNextPair(t,r,c),s=this.parseFoundFinderPattern(t,i,o),s===null?c=e.getNextSecondBar(t,this.startEnd[0]):a=!1;while(a);var f=this.decodeDataCharacter(t,s,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ne;var h;try{h=this.decodeDataCharacter(t,s,o,!1)}catch(p){h=null,console.log(p)}return new lA(f,h,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s=t.getSize(),a;if(i>=0)a=i;else if(this.isEmptyPair(r))a=0;else{var c=r[r.length-1];a=c.getFinderPattern().getStartEnd()[1]}var f=r.length%2!==0;this.startFromEven&&(f=!f);for(var h=!1;a<s&&(h=!t.get(a),!!h);)a++;for(var p=0,v=a,y=a;y<s;y++)if(t.get(y)!==h)o[p]++;else{if(p===3){if(f&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=v,this.startEnd[1]=y;return}f&&e.reverseCounters(o),v+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,p--}else p++;o[p]=1,h=!h}throw new ne},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var o=t[i];t[i]=t[r-i-1],t[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(t,r,i){var o,s,a;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,o=this.startEnd[0]-c,s=c,a=this.startEnd[1]}else s=this.startEnd[0],a=t.getNextUnset(this.startEnd[1]+1),o=a-this.startEnd[1];var f=this.getDecodeFinderCounters();wt.arraycopy(f,0,f,1,f.length-1),f[0]=o;var h;try{h=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new _3(h,[s,a],s,a,r)},e.prototype.decodeDataCharacter=function(t,r,i,o){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(o)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var c=0,f=s.length-1;c<f;c++,f--){var h=s[c];s[c]=s[f],s[f]=h}}var p=17,v=ut.sum(new Int32Array(s))/p,y=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(v-y)/y>.3)throw new ne;for(var E=this.getOddCounts(),A=this.getEvenCounts(),C=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var P=1*s[c]/v,M=P+.5;if(M<1){if(P<.3)throw new ne;M=1}else if(M>8){if(P>8.7)throw new ne;M=8}var j=c/2;(c&1)===0?(E[j]=M,C[j]=P-M):(A[j]=M,N[j]=P-M)}this.adjustOddEvenCounts(p);for(var H=4*r.getValue()+(i?0:2)+(o?0:1)-1,$=0,R=0,c=E.length-1;c>=0;c--){if(e.isNotA1left(r,i,o)){var I=e.WEIGHTS[H][2*c];R+=E[c]*I}$+=E[c]}for(var D=0,c=A.length-1;c>=0;c--)if(e.isNotA1left(r,i,o)){var I=e.WEIGHTS[H][2*c+1];D+=A[c]*I}var O=R+D;if(($&1)!==0||$>13||$<4)throw new ne;var F=(13-$)/2,B=e.SYMBOL_WIDEST[F],L=9-B,te=Pu.getRSSvalue(E,B,!0),be=Pu.getRSSvalue(A,L,!1),Oe=e.EVEN_TOTAL_SUBSET[F],xe=e.GSUM[F],Z=te*Oe+be+xe;return new rp(Z,O)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=ut.sum(new Int32Array(this.getOddCounts())),i=ut.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);var a=!1,c=!1;i>13?c=!0:i<4&&(a=!0);var f=r+i-t,h=(r&1)===1,p=(i&1)===0;if(f===1)if(h){if(p)throw new ne;s=!0}else{if(!p)throw new ne;c=!0}else if(f===-1)if(h){if(p)throw new ne;o=!0}else{if(!p)throw new ne;a=!0}else if(f===0){if(h){if(!p)throw new ne;r<i?(o=!0,c=!0):(s=!0,a=!0)}else if(p)throw new ne}else throw new ne;if(o){if(s)throw new ne;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(c)throw new ne;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(ua),qF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),KF=(function(n){qF(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(rp),XF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),em=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cA=(function(n){XF(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var o,s,a,c,f=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,f),r.reverse();var h=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,h),r.reverse();try{for(var p=em(this.possibleLeftPairs),v=p.next();!v.done;v=p.next()){var y=v.value;if(y.getCount()>1)try{for(var E=(a=void 0,em(this.possibleRightPairs)),A=E.next();!A.done;A=E.next()){var C=A.value;if(C.getCount()>1&&e.checkChecksum(y,C))return e.constructResult(y,C)}}catch(N){a={error:N}}finally{try{A&&!A.done&&(c=E.return)&&c.call(E)}finally{if(a)throw a.error}}}}catch(N){o={error:N}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}throw new ne},e.addOrTally=function(t,r){var i,o;if(r!=null){var s=!1;try{for(var a=em(t),c=a.next();!c.done;c=a.next()){var f=c.value;if(f.getValue()===r.getValue()){f.incrementCount(),s=!0;break}}}catch(h){i={error:h}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),o=new String(i).toString(),s=new qe,a=13-o.length;a>0;a--)s.append("0");s.append(o);for(var c=0,a=0;a<13;a++){var f=s.charAt(a).charCodeAt(0)-48;c+=(a&1)===0?3*f:f}c=10-c%10,c===10&&(c=0),s.append(c.toString());var h=t.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new Wn(s.toString(),null,0,[h[0],h[1],p[0],p[1]],Ne.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(t,r,i,o){try{var s=this.findFinderPattern(t,r),a=this.parseFoundFinderPattern(t,i,r,s),c=o==null?null:o.get(kt.NEED_RESULT_POINT_CALLBACK);if(c!=null){var f=(s[0]+s[1])/2;r&&(f=t.getSize()-1-f),c.foundPossibleResultPoint(new Te(f,i))}var h=this.decodeDataCharacter(t,a,!0),p=this.decodeDataCharacter(t,a,!1);return new KF(1597*h.getValue()+p.getValue(),h.getChecksumPortion()+4*p.getChecksumPortion(),a)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)cn.recordPatternInReverse(t,r.getStartEnd()[0],o);else{cn.recordPattern(t,r.getStartEnd()[1]+1,o);for(var a=0,c=o.length-1;a<c;a++,c--){var f=o[a];o[a]=o[c],o[c]=f}}for(var h=i?16:15,p=ut.sum(new Int32Array(o))/h,v=this.getOddCounts(),y=this.getEvenCounts(),E=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors(),a=0;a<o.length;a++){var C=o[a]/p,N=Math.floor(C+.5);N<1?N=1:N>8&&(N=8);var P=Math.floor(a/2);(a&1)===0?(v[P]=N,E[P]=C-N):(y[P]=N,A[P]=C-N)}this.adjustOddEvenCounts(i,h);for(var M=0,j=0,a=v.length-1;a>=0;a--)j*=9,j+=v[a],M+=v[a];for(var H=0,$=0,a=y.length-1;a>=0;a--)H*=9,H+=y[a],$+=y[a];var R=j+3*H;if(i){if((M&1)!==0||M>12||M<4)throw new ne;var I=(12-M)/2,D=e.OUTSIDE_ODD_WIDEST[I],O=9-D,F=Pu.getRSSvalue(v,D,!1),B=Pu.getRSSvalue(y,O,!0),L=e.OUTSIDE_EVEN_TOTAL_SUBSET[I],te=e.OUTSIDE_GSUM[I];return new rp(F*L+B+te,R)}else{if(($&1)!==0||$>10||$<4)throw new ne;var I=(10-$)/2,D=e.INSIDE_ODD_WIDEST[I],O=9-D,F=Pu.getRSSvalue(v,D,!0),B=Pu.getRSSvalue(y,O,!1),be=e.INSIDE_ODD_TOTAL_SUBSET[I],te=e.INSIDE_GSUM[I];return new rp(B*be+F+te,R)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=t.getSize(),s=!1,a=0;a<o&&(s=!t.get(a),r!==s);)a++;for(var c=0,f=a,h=a;h<o;h++)if(t.get(h)!==s)i[c]++;else{if(c===3){if(ua.isFinderPattern(i))return[f,h];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new ne},e.prototype.parseFoundFinderPattern=function(t,r,i,o){for(var s=t.get(o[0]),a=o[0]-1;a>=0&&s!==t.get(a);)a--;a++;var c=o[0]-a,f=this.getDecodeFinderCounters(),h=new Int32Array(f.length);wt.arraycopy(f,0,h,1,f.length-1),h[0]=c;var p=this.parseFinderValue(h,e.FINDER_PATTERNS),v=a,y=o[1];return i&&(v=t.getSize()-1-v,y=t.getSize()-1-y),new _3(p,[a,o[1]],v,y,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=ut.sum(new Int32Array(this.getOddCounts())),o=ut.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1,c=!1,f=!1;t?(i>12?a=!0:i<4&&(s=!0),o>12?f=!0:o<4&&(c=!0)):(i>11?a=!0:i<5&&(s=!0),o>10?f=!0:o<4&&(c=!0));var h=i+o-r,p=(i&1)===(t?1:0),v=(o&1)===1;if(h===1)if(p){if(v)throw new ne;a=!0}else{if(!v)throw new ne;f=!0}else if(h===-1)if(p){if(v)throw new ne;s=!0}else{if(!v)throw new ne;c=!0}else if(h===0){if(p){if(!v)throw new ne;i<o?(s=!0,f=!0):(a=!0,c=!0)}else if(v)throw new ne}else throw new ne;if(s){if(a)throw new ne;ua.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&ua.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new ne;ua.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&ua.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(ua),YF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_c=(function(n){YF(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(kt.POSSIBLE_FORMATS):null,o=t&&t.get(kt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;return i&&((i.includes(Ne.EAN_13)||i.includes(Ne.UPC_A)||i.includes(Ne.EAN_8)||i.includes(Ne.UPC_E))&&r.readers.push(new J1(t)),i.includes(Ne.CODE_39)&&r.readers.push(new eA(o)),i.includes(Ne.CODE_93)&&r.readers.push(new tA),i.includes(Ne.CODE_128)&&r.readers.push(new JE),i.includes(Ne.ITF)&&r.readers.push(new nA),i.includes(Ne.CODABAR)&&r.readers.push(new yF),i.includes(Ne.RSS_14)&&r.readers.push(new cA),i.includes(Ne.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new GF))),r.readers.length===0&&(r.readers.push(new J1(t)),r.readers.push(new eA),r.readers.push(new tA),r.readers.push(new J1(t)),r.readers.push(new JE),r.readers.push(new nA),r.readers.push(new cA)),r}return e.prototype.decodeRow=function(t,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,r,i)}catch{}throw new ne},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(cn),QF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){QF(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new _c(r),t,r)||this}return e})(hl);var fA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ht=(function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),ct=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),ZF=(function(){function n(e,t,r,i,o,s){var a,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var f=0,h=s.getECCodewords(),p=s.getECBlocks();try{for(var v=fA(p),y=v.next();!y.done;y=v.next()){var E=y.value;f+=E.getCount()*(E.getDataCodewords()+h)}}catch(A){a={error:A}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(a)throw a.error}}this.totalCodewords=f}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new he;try{for(var o=fA(n.VERSIONS),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===t)return a}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new he},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new ht(5,new ct(1,3))),new n(2,12,12,10,10,new ht(7,new ct(1,5))),new n(3,14,14,12,12,new ht(10,new ct(1,8))),new n(4,16,16,14,14,new ht(12,new ct(1,12))),new n(5,18,18,16,16,new ht(14,new ct(1,18))),new n(6,20,20,18,18,new ht(18,new ct(1,22))),new n(7,22,22,20,20,new ht(20,new ct(1,30))),new n(8,24,24,22,22,new ht(24,new ct(1,36))),new n(9,26,26,24,24,new ht(28,new ct(1,44))),new n(10,32,32,14,14,new ht(36,new ct(1,62))),new n(11,36,36,16,16,new ht(42,new ct(1,86))),new n(12,40,40,18,18,new ht(48,new ct(1,114))),new n(13,44,44,20,20,new ht(56,new ct(1,144))),new n(14,48,48,22,22,new ht(68,new ct(1,174))),new n(15,52,52,24,24,new ht(42,new ct(2,102))),new n(16,64,64,14,14,new ht(56,new ct(2,140))),new n(17,72,72,16,16,new ht(36,new ct(4,92))),new n(18,80,80,18,18,new ht(48,new ct(4,114))),new n(19,88,88,20,20,new ht(56,new ct(4,144))),new n(20,96,96,22,22,new ht(68,new ct(4,174))),new n(21,104,104,24,24,new ht(56,new ct(6,136))),new n(22,120,120,18,18,new ht(68,new ct(6,175))),new n(23,132,132,20,20,new ht(62,new ct(8,163))),new n(24,144,144,22,22,new ht(62,new ct(8,156),new ct(2,155))),new n(25,8,18,6,16,new ht(7,new ct(1,5))),new n(26,8,32,6,14,new ht(11,new ct(1,10))),new n(27,12,26,10,24,new ht(14,new ct(1,16))),new n(28,12,36,10,16,new ht(18,new ct(1,22))),new n(29,16,36,14,16,new ht(24,new ct(1,32))),new n(30,16,48,14,22,new ht(28,new ct(1,49)))]},n.VERSIONS=n.buildVersions(),n})(),JF=(function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new he;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ji(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return ZF.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),a=!1,c=!1,f=!1,h=!1;do if(r===o&&i===0&&!a)e[t++]=this.readCorner1(o,s)&255,r-=2,i+=2,a=!0;else if(r===o-2&&i===0&&(s&3)!==0&&!c)e[t++]=this.readCorner2(o,s)&255,r-=2,i+=2,c=!0;else if(r===o+4&&i===2&&(s&7)===0&&!f)e[t++]=this.readCorner3(o,s)&255,r-=2,i+=2,f=!0;else if(r===o-2&&i===0&&(s&7)===4&&!h)e[t++]=this.readCorner4(o,s)&255,r-=2,i+=2,h=!0;else{do r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r+=2,i-=2;while(r<o&&i>=0);r+=3,i+=1}while(r<o||i<s);if(t!==this.version.getTotalCodewords())throw new he;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var o=0;return this.readModule(e-2,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t,r,i)&&(o|=1),o<<=1,this.readModule(e,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e,t,r,i)&&(o|=1),o},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Ve("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=t/i|0,a=r/o|0,c=s*i,f=a*o,h=new ji(f,c),p=0;p<s;++p)for(var v=p*i,y=0;y<a;++y)for(var E=y*o,A=0;A<i;++A)for(var C=p*(i+2)+1+A,N=v+A,P=0;P<o;++P){var M=y*(o+2)+1+P;if(e.get(M,C)){var j=E+P;h.set(j,N)}}return h},n})(),hA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eB=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,o,s,a=t.getECBlocks(),c=0,f=a.getECBlocks();try{for(var h=hA(f),p=h.next();!p.done;p=h.next()){var v=p.value;c+=v.getCount()}}catch(te){r={error:te}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}var y=new Array(c),E=0;try{for(var A=hA(f),C=A.next();!C.done;C=A.next())for(var v=C.value,N=0;N<v.getCount();N++){var P=v.getDataCodewords(),M=a.getECCodewords()+P;y[E++]=new n(P,new Uint8Array(M))}}catch(te){o={error:te}}finally{try{C&&!C.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}for(var j=y[0].codewords.length,H=j-a.getECCodewords(),$=H-1,R=0,N=0;N<$;N++)for(var I=0;I<E;I++)y[I].codewords[N]=e[R++];for(var D=t.getVersionNumber()===24,O=D?8:E,I=0;I<O;I++)y[I].codewords[H-1]=e[R++];for(var F=y[0].codewords.length,N=H;N<F;N++)for(var I=0;I<E;I++){var B=D?(I+8)%E:I,L=D&&B>7?N-1:N;y[B].codewords[L]=e[R++]}if(R!==e.length)throw new Ve;return y},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),A3=(function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Ve(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var s=8-r,a=e<s?e:s,c=s-a,f=255>>8-a<<c;t=(o[i]&f)>>c,e-=a,r+=a,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|o[i]&255,i++,e-=8;if(e>0){var c=8-e,f=255>>c<<c;t=t<<e|(o[i]&f)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n})(),on;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(on||(on={}));var tB=(function(){function n(){}return n.decode=function(e){var t=new A3(e),r=new qe,i=new qe,o=new Array,s=on.ASCII_ENCODE;do if(s===on.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case on.C40_ENCODE:this.decodeC40Segment(t,r);break;case on.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case on.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case on.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case on.BASE256_ENCODE:this.decodeBase256Segment(t,r,o);break;default:throw new he}s=on.ASCII_ENCODE}while(s!==on.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Lp(e,r.toString(),o.length===0?null:o,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var o=e.readBits(8);if(o===0)throw new he;if(o<=128)return i&&(o+=128),t.append(String.fromCharCode(o-1)),on.ASCII_ENCODE;if(o===129)return on.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&t.append("0"),t.append(""+s)}else switch(o){case 230:return on.C40_ENCODE;case 231:return on.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return on.ANSIX12_ENCODE;case 239:return on.TEXT_ENCODE;case 240:return on.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new he;break}}while(e.available()>0);return on.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var c=i[a];switch(o){case 0:if(c<3)o=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new he;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new he}o=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),o=0;break;default:throw new he}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var c=i[a];switch(o){case 0:if(c<3)o=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new he;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new he}o=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f),o=0}else throw new he;break;default:throw new he}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var s=r[o];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new he;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,o=Math.floor(i/1600);r[0]=o,i-=o*1600,o=Math.floor(i/40),r[1]=o,r[2]=i-o*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new he;for(var a=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new he;a[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(a);try{t.append($r.decode(a,rt.ISO88591))}catch(f){throw new Cf("Platform does not support required encoding: "+f.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n})(),nB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rB=(function(){function n(){this.rsDecoder=new Vp(lr.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new JF(e),o=i.getVersion(),s=i.readCodewords(),a=eB.getDataBlocks(s,o),c=0;try{for(var f=nB(a),h=f.next();!h.done;h=f.next()){var p=h.value;c+=p.getNumDataCodewords()}}catch(M){t={error:M}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}for(var v=new Uint8Array(c),y=a.length,E=0;E<y;E++){var A=a[E],C=A.getCodewords(),N=A.getNumDataCodewords();this.correctErrors(C,N);for(var P=0;P<N;P++)v[P*y+E]=C[P]}return tB.decode(v)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new xn}for(var i=0;i<t;i++)e[i]=r[i]},n})(),iB=(function(){function n(e){this.image=e,this.rectangleDetector=new dg(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new ne;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],o=t[2],s=t[3],a=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(o,s)+1;(a&1)===1&&(a+=1),(c&1)===1&&(c+=1),4*a<7*c&&4*c<7*a&&(a=c=Math.max(a,c));var f=n.sampleGrid(this.image,r,i,o,s,a,c);return new py(f,[r,i,o,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),o=(t.getY()-e.getY())/(r+1);return new Te(e.getX()+i,e.getY()+o)},n.moveAway=function(e,t,r){var i=e.getX(),o=e.getY();return i<t?i-=1:i+=1,o<r?o-=1:o+=1,new Te(i,o)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],o=e[2],s=this.transitionsBetween(t,r),a=this.transitionsBetween(r,i),c=this.transitionsBetween(i,o),f=this.transitionsBetween(o,t),h=s,p=[o,t,r,i];return h>a&&(h=a,p[0]=t,p[1]=r,p[2]=i,p[3]=o),h>c&&(h=c,p[0]=r,p[1]=i,p[2]=o,p[3]=t),h>f&&(p[0]=i,p[1]=o,p[2]=t,p[3]=r),p},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),a=n.shiftPoint(r,i,(s+1)*4),c=n.shiftPoint(i,r,(s+1)*4),f=this.transitionsBetween(a,t),h=this.transitionsBetween(c,o);return f<h?(e[0]=t,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),a=this.transitionsBetween(r,o),c=n.shiftPoint(t,r,(a+1)*4),f=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,o),a=this.transitionsBetween(f,o);var h=new Te(o.getX()+(i.getX()-r.getX())/(s+1),o.getY()+(i.getY()-r.getY())/(s+1)),p=new Te(o.getX()+(t.getX()-r.getX())/(a+1),o.getY()+(t.getY()-r.getY())/(a+1));if(!this.isValid(h))return this.isValid(p)?p:null;if(!this.isValid(p))return h;var v=this.transitionsBetween(c,h)+this.transitionsBetween(f,h),y=this.transitionsBetween(c,p)+this.transitionsBetween(f,p);return v>y?h:p},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o)+1,a=this.transitionsBetween(i,o)+1,c=n.shiftPoint(t,r,a*4),f=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,o)+1,a=this.transitionsBetween(f,o)+1,(s&1)===1&&(s+=1),(a&1)===1&&(a+=1);var h=(t.getX()+r.getX()+i.getX()+o.getX())/4,p=(t.getY()+r.getY()+i.getY()+o.getY())/4;t=n.moveAway(t,h,p),r=n.moveAway(r,h,p),i=n.moveAway(i,h,p),o=n.moveAway(o,h,p);var v,y;return c=n.shiftPoint(t,r,a*4),c=n.shiftPoint(c,o,s*4),v=n.shiftPoint(r,t,a*4),v=n.shiftPoint(v,i,s*4),f=n.shiftPoint(i,o,a*4),f=n.shiftPoint(f,r,s*4),y=n.shiftPoint(o,i,a*4),y=n.shiftPoint(y,t,s*4),[c,v,f,y]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,o,s,a){var c=my.getInstance();return c.sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,t.getX(),t.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(t.getX()),s=Math.trunc(t.getY()),a=Math.abs(s-i)>Math.abs(o-r);if(a){var c=r;r=i,i=c,c=o,o=s,s=c}for(var f=Math.abs(o-r),h=Math.abs(s-i),p=-f/2,v=i<s?1:-1,y=r<o?1:-1,E=0,A=this.image.get(a?i:r,a?r:i),C=r,N=i;C!==o;C+=y){var P=this.image.get(a?N:C,a?C:N);if(P!==A&&(E++,A=P),p+=h,p>0){if(N===s)break;N+=v,p-=f}}return E},n})(),gg=(function(){function n(){this.decoder=new rB}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(kt.PURE_BARCODE)){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=n.NO_POINTS}else{var s=new iB(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var a=r.getRawBytes(),c=new Wn(r.getText(),a,8*a.length,i,Ne.DATA_MATRIX,wt.currentTimeMillis()),f=r.getByteSegments();f!=null&&c.putMetadata(Dn.BYTE_SEGMENTS,f);var h=r.getECLevel();return h!=null&&c.putMetadata(Dn.ERROR_CORRECTION_LEVEL,h),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new ne;var i=this.moduleSize(t,e),o=t[1],s=r[1],a=t[0],c=r[0],f=(c-a+1)/i,h=(s-o+1)/i;if(f<=0||h<=0)throw new ne;var p=i/2;o+=p,a+=p;for(var v=new ji(f,h),y=0;y<h;y++)for(var E=o+y*i,A=0;A<f;A++)e.get(a+A*i,E)&&v.set(A,y);return v},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],o=e[1];i<r&&t.get(i,o);)i++;if(i===r)throw new ne;var s=i-e[0];if(s===0)throw new ne;return s},n.NO_POINTS=[],n})(),oB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){oB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new gg,t)||this}return e})(hl);var Nu;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(Nu||(Nu={}));var sB=(function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new ni(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Ve;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(Nu.L,"L",1),n.M=new n(Nu.M,"M",0),n.Q=new n(Nu.Q,"Q",3),n.H=new n(Nu.H,"H",2),n})(),aB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C3=(function(){function n(e){this.errorCorrectionLevel=sB.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return Ye.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var a=aB(n.FORMAT_INFO_DECODE_LOOKUP),c=a.next();!c.done;c=a.next()){var f=c.value,h=f[0];if(h===e||h===t)return new n(f[1]);var p=n.numBitsDiffering(e,h);p<o&&(s=f[1],o=p),e!==t&&(p=n.numBitsDiffering(t,h),p<o&&(s=f[1],o=p))}}catch(v){r={error:v}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),uB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=(function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var o=uB(i),s=o.next();!s.done;s=o.next()){var a=s.value;r+=a.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),V=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),lB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ya=(function(){function n(e,t){for(var r,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var a=0,c=o[0].getECCodewordsPerBlock(),f=o[0].getECBlocks();try{for(var h=lB(f),p=h.next();!p.done;p=h.next()){var v=p.value;a+=v.getCount()*(v.getDataCodewords()+c)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}this.totalCodewords=a}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new he;try{return this.getVersionForNumber((e-17)/4)}catch{throw new he}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Ve;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var o=n.VERSION_DECODE_INFO[i];if(o===e)return n.getVersionForNumber(i+7);var s=C3.numBitsDiffering(e,o);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new ji(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Y(7,new V(1,19)),new Y(10,new V(1,16)),new Y(13,new V(1,13)),new Y(17,new V(1,9))),new n(2,Int32Array.from([6,18]),new Y(10,new V(1,34)),new Y(16,new V(1,28)),new Y(22,new V(1,22)),new Y(28,new V(1,16))),new n(3,Int32Array.from([6,22]),new Y(15,new V(1,55)),new Y(26,new V(1,44)),new Y(18,new V(2,17)),new Y(22,new V(2,13))),new n(4,Int32Array.from([6,26]),new Y(20,new V(1,80)),new Y(18,new V(2,32)),new Y(26,new V(2,24)),new Y(16,new V(4,9))),new n(5,Int32Array.from([6,30]),new Y(26,new V(1,108)),new Y(24,new V(2,43)),new Y(18,new V(2,15),new V(2,16)),new Y(22,new V(2,11),new V(2,12))),new n(6,Int32Array.from([6,34]),new Y(18,new V(2,68)),new Y(16,new V(4,27)),new Y(24,new V(4,19)),new Y(28,new V(4,15))),new n(7,Int32Array.from([6,22,38]),new Y(20,new V(2,78)),new Y(18,new V(4,31)),new Y(18,new V(2,14),new V(4,15)),new Y(26,new V(4,13),new V(1,14))),new n(8,Int32Array.from([6,24,42]),new Y(24,new V(2,97)),new Y(22,new V(2,38),new V(2,39)),new Y(22,new V(4,18),new V(2,19)),new Y(26,new V(4,14),new V(2,15))),new n(9,Int32Array.from([6,26,46]),new Y(30,new V(2,116)),new Y(22,new V(3,36),new V(2,37)),new Y(20,new V(4,16),new V(4,17)),new Y(24,new V(4,12),new V(4,13))),new n(10,Int32Array.from([6,28,50]),new Y(18,new V(2,68),new V(2,69)),new Y(26,new V(4,43),new V(1,44)),new Y(24,new V(6,19),new V(2,20)),new Y(28,new V(6,15),new V(2,16))),new n(11,Int32Array.from([6,30,54]),new Y(20,new V(4,81)),new Y(30,new V(1,50),new V(4,51)),new Y(28,new V(4,22),new V(4,23)),new Y(24,new V(3,12),new V(8,13))),new n(12,Int32Array.from([6,32,58]),new Y(24,new V(2,92),new V(2,93)),new Y(22,new V(6,36),new V(2,37)),new Y(26,new V(4,20),new V(6,21)),new Y(28,new V(7,14),new V(4,15))),new n(13,Int32Array.from([6,34,62]),new Y(26,new V(4,107)),new Y(22,new V(8,37),new V(1,38)),new Y(24,new V(8,20),new V(4,21)),new Y(22,new V(12,11),new V(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Y(30,new V(3,115),new V(1,116)),new Y(24,new V(4,40),new V(5,41)),new Y(20,new V(11,16),new V(5,17)),new Y(24,new V(11,12),new V(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Y(22,new V(5,87),new V(1,88)),new Y(24,new V(5,41),new V(5,42)),new Y(30,new V(5,24),new V(7,25)),new Y(24,new V(11,12),new V(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Y(24,new V(5,98),new V(1,99)),new Y(28,new V(7,45),new V(3,46)),new Y(24,new V(15,19),new V(2,20)),new Y(30,new V(3,15),new V(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Y(28,new V(1,107),new V(5,108)),new Y(28,new V(10,46),new V(1,47)),new Y(28,new V(1,22),new V(15,23)),new Y(28,new V(2,14),new V(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Y(30,new V(5,120),new V(1,121)),new Y(26,new V(9,43),new V(4,44)),new Y(28,new V(17,22),new V(1,23)),new Y(28,new V(2,14),new V(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Y(28,new V(3,113),new V(4,114)),new Y(26,new V(3,44),new V(11,45)),new Y(26,new V(17,21),new V(4,22)),new Y(26,new V(9,13),new V(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Y(28,new V(3,107),new V(5,108)),new Y(26,new V(3,41),new V(13,42)),new Y(30,new V(15,24),new V(5,25)),new Y(28,new V(15,15),new V(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Y(28,new V(4,116),new V(4,117)),new Y(26,new V(17,42)),new Y(28,new V(17,22),new V(6,23)),new Y(30,new V(19,16),new V(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Y(28,new V(2,111),new V(7,112)),new Y(28,new V(17,46)),new Y(30,new V(7,24),new V(16,25)),new Y(24,new V(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Y(30,new V(4,121),new V(5,122)),new Y(28,new V(4,47),new V(14,48)),new Y(30,new V(11,24),new V(14,25)),new Y(30,new V(16,15),new V(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Y(30,new V(6,117),new V(4,118)),new Y(28,new V(6,45),new V(14,46)),new Y(30,new V(11,24),new V(16,25)),new Y(30,new V(30,16),new V(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Y(26,new V(8,106),new V(4,107)),new Y(28,new V(8,47),new V(13,48)),new Y(30,new V(7,24),new V(22,25)),new Y(30,new V(22,15),new V(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Y(28,new V(10,114),new V(2,115)),new Y(28,new V(19,46),new V(4,47)),new Y(28,new V(28,22),new V(6,23)),new Y(30,new V(33,16),new V(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Y(30,new V(8,122),new V(4,123)),new Y(28,new V(22,45),new V(3,46)),new Y(30,new V(8,23),new V(26,24)),new Y(30,new V(12,15),new V(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Y(30,new V(3,117),new V(10,118)),new Y(28,new V(3,45),new V(23,46)),new Y(30,new V(4,24),new V(31,25)),new Y(30,new V(11,15),new V(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Y(30,new V(7,116),new V(7,117)),new Y(28,new V(21,45),new V(7,46)),new Y(30,new V(1,23),new V(37,24)),new Y(30,new V(19,15),new V(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Y(30,new V(5,115),new V(10,116)),new Y(28,new V(19,47),new V(10,48)),new Y(30,new V(15,24),new V(25,25)),new Y(30,new V(23,15),new V(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Y(30,new V(13,115),new V(3,116)),new Y(28,new V(2,46),new V(29,47)),new Y(30,new V(42,24),new V(1,25)),new Y(30,new V(23,15),new V(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Y(30,new V(17,115)),new Y(28,new V(10,46),new V(23,47)),new Y(30,new V(10,24),new V(35,25)),new Y(30,new V(19,15),new V(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Y(30,new V(17,115),new V(1,116)),new Y(28,new V(14,46),new V(21,47)),new Y(30,new V(29,24),new V(19,25)),new Y(30,new V(11,15),new V(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Y(30,new V(13,115),new V(6,116)),new Y(28,new V(14,46),new V(23,47)),new Y(30,new V(44,24),new V(7,25)),new Y(30,new V(59,16),new V(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Y(30,new V(12,121),new V(7,122)),new Y(28,new V(12,47),new V(26,48)),new Y(30,new V(39,24),new V(14,25)),new Y(30,new V(22,15),new V(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Y(30,new V(6,121),new V(14,122)),new Y(28,new V(6,47),new V(34,48)),new Y(30,new V(46,24),new V(10,25)),new Y(30,new V(2,15),new V(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Y(30,new V(17,122),new V(4,123)),new Y(28,new V(29,46),new V(14,47)),new Y(30,new V(49,24),new V(10,25)),new Y(30,new V(24,15),new V(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Y(30,new V(4,122),new V(18,123)),new Y(28,new V(13,46),new V(32,47)),new Y(30,new V(48,24),new V(14,25)),new Y(30,new V(42,15),new V(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Y(30,new V(20,117),new V(4,118)),new Y(28,new V(40,47),new V(7,48)),new Y(30,new V(43,24),new V(22,25)),new Y(30,new V(10,15),new V(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Y(30,new V(19,118),new V(6,119)),new Y(28,new V(18,47),new V(31,48)),new Y(30,new V(34,24),new V(34,25)),new Y(30,new V(20,15),new V(61,16)))],n})(),mn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(mn||(mn={}));var dA=(function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[mn.DATA_MASK_000,new n(mn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[mn.DATA_MASK_001,new n(mn.DATA_MASK_001,function(e,t){return(e&1)===0})],[mn.DATA_MASK_010,new n(mn.DATA_MASK_010,function(e,t){return t%3===0})],[mn.DATA_MASK_011,new n(mn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[mn.DATA_MASK_100,new n(mn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[mn.DATA_MASK_101,new n(mn.DATA_MASK_101,function(e,t){return e*t%6===0})],[mn.DATA_MASK_110,new n(mn.DATA_MASK_110,function(e,t){return e*t%6<3})],[mn.DATA_MASK_111,new n(mn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n})(),cB=(function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new he;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),o=0,s=i-7,r=i-1;r>=s;r--)o=this.copyBit(8,r,o);for(var t=i-8;t<i;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=C3.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new he},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return ya.getVersionForNumber(t);for(var r=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,o,r);var a=ya.decodeVersionInformation(r);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;r=0;for(var s=5;s>=0;s--)for(var o=e-9;o>=i;o--)r=this.copyBit(s,o,r);if(a=ya.decodeVersionInformation(r),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new he},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=dA.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=t.buildFunctionPattern(),s=!0,a=new Uint8Array(t.getTotalCodewords()),c=0,f=0,h=0,p=i-1;p>0;p-=2){p===6&&p--;for(var v=0;v<i;v++)for(var y=s?i-1-v:v,E=0;E<2;E++)o.get(p-E,y)||(h++,f<<=1,this.bitMatrix.get(p-E,y)&&(f|=1),h===8&&(a[c++]=f,h=0,f=0));s=!s}if(c!==t.getTotalCodewords())throw new he;return a},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=dA.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,o=e.getHeight();i<o;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n})(),pA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fB=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,o,s,a;if(e.length!==t.getTotalCodewords())throw new Ve;var c=t.getECBlocksForLevel(r),f=0,h=c.getECBlocks();try{for(var p=pA(h),v=p.next();!v.done;v=p.next()){var y=v.value;f+=y.getCount()}}catch(L){i={error:L}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}var E=new Array(f),A=0;try{for(var C=pA(h),N=C.next();!N.done;N=C.next())for(var y=N.value,P=0;P<y.getCount();P++){var M=y.getDataCodewords(),j=c.getECCodewordsPerBlock()+M;E[A++]=new n(M,new Uint8Array(j))}}catch(L){s={error:L}}finally{try{N&&!N.done&&(a=C.return)&&a.call(C)}finally{if(s)throw s.error}}for(var H=E[0].codewords.length,$=E.length-1;$>=0;){var R=E[$].codewords.length;if(R===H)break;$--}$++;for(var I=H-c.getECCodewordsPerBlock(),D=0,P=0;P<I;P++)for(var O=0;O<A;O++)E[O].codewords[P]=e[D++];for(var O=$;O<A;O++)E[O].codewords[I]=e[D++];for(var F=E[0].codewords.length,P=I;P<F;P++)for(var O=0;O<A;O++){var B=O<$?P:P+1;E[O].codewords[B]=e[D++]}return E},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),Fr;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(Fr||(Fr={}));var It=(function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Ve;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(Fr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(Fr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(Fr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(Fr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(Fr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(Fr.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(Fr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(Fr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(Fr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(Fr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n})(),hB=(function(){function n(){}return n.decode=function(e,t,r,i){var o=new A3(e),s=new qe,a=new Array,c=-1,f=-1;try{var h=null,p=!1,v=void 0;do{if(o.available()<4)v=It.TERMINATOR;else{var y=o.readBits(4);v=It.forBits(y)}switch(v){case It.TERMINATOR:break;case It.FNC1_FIRST_POSITION:case It.FNC1_SECOND_POSITION:p=!0;break;case It.STRUCTURED_APPEND:if(o.available()<16)throw new he;c=o.readBits(8),f=o.readBits(8);break;case It.ECI:var E=n.parseECIValue(o);if(h=un.getCharacterSetECIByValue(E),h===null)throw new he;break;case It.HANZI:var A=o.readBits(4),C=o.readBits(v.getCharacterCountBits(t));A===n.GB2312_SUBSET&&n.decodeHanziSegment(o,s,C);break;default:var N=o.readBits(v.getCharacterCountBits(t));switch(v){case It.NUMERIC:n.decodeNumericSegment(o,s,N);break;case It.ALPHANUMERIC:n.decodeAlphanumericSegment(o,s,N,p);break;case It.BYTE:n.decodeByteSegment(o,s,N,h,a,i);break;case It.KANJI:n.decodeKanjiSegment(o,s,N);break;default:throw new he}break}}while(v!==It.TERMINATOR)}catch{throw new he}return new Lp(e,s.toString(),a.length===0?null:a,r===null?null:r.toString(),c,f)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new he;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/96<<8&4294967295|s%96;a<959?a+=41377:a+=42657,i[o]=a>>8&255,i[o+1]=a&255,o+=2,r--}try{t.append($r.decode(i,rt.GB2312))}catch(c){throw new he(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new he;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/192<<8&4294967295|s%192;a<7936?a+=33088:a+=49472,i[o]=a>>8,i[o+1]=a,o+=2,r--}try{t.append($r.decode(i,rt.SHIFT_JIS))}catch(c){throw new he(c)}},n.decodeByteSegment=function(e,t,r,i,o,s){if(8*r>e.available())throw new he;for(var a=new Uint8Array(r),c=0;c<r;c++)a[c]=e.readBits(8);var f;i===null?f=rt.guessEncoding(a,s):f=i.getName();try{t.append($r.decode(a,f))}catch(h){throw new he(h)}o.push(a)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new he;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var o=t.length();r>1;){if(e.available()<11)throw new he;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new he;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var a=o;a<t.length();a++)t.charAt(a)==="%"&&(a<t.length()-1&&t.charAt(a+1)==="%"?t.deleteCharAt(a+1):t.setCharAt(a,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new he;var i=e.readBits(10);if(i>=1e3)throw new he;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new he;var o=e.readBits(7);if(o>=100)throw new he;t.append(n.toAlphaNumericChar(Math.floor(o/10))),t.append(n.toAlphaNumericChar(o%10))}else if(r===1){if(e.available()<4)throw new he;var s=e.readBits(4);if(s>=10)throw new he;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new he},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n})(),T3=(function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n})(),mA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dB=(function(){function n(){this.rsDecoder=new Vp(lr.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(ji.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new cB(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,t);return o.setOther(new T3(!0)),o}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,o,s,a=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),h=fB.getDataBlocks(f,a,c),p=0;try{for(var v=mA(h),y=v.next();!y.done;y=v.next()){var E=y.value;p+=E.getNumDataCodewords()}}catch($){r={error:$}}finally{try{y&&!y.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}var A=new Uint8Array(p),C=0;try{for(var N=mA(h),P=N.next();!P.done;P=N.next()){var E=P.value,M=E.getCodewords(),j=E.getNumDataCodewords();this.correctErrors(M,j);for(var H=0;H<j;H++)A[C++]=M[H]}}catch($){o={error:$}}finally{try{P&&!P.done&&(s=N.return)&&s.call(N)}finally{if(o)throw o.error}}return hB.decode(A,a,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new xn}for(var i=0;i<t;i++)e[i]=r[i]},n})(),pB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mB=(function(n){pB(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=(this.getX()+r)/2,s=(this.getY()+t)/2,a=(this.estimatedModuleSize+i)/2;return new e(o,s,a)},e})(Te),gB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vB=(function(){function n(e,t,r,i,o,s,a){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,o=this.startY+t/2,s=new Int32Array(3),a=this.image,c=0;c<t;c++){var f=o+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var h=e;h<i&&!a.get(h,f);)h++;for(var p=0;h<i;){if(a.get(h,f))if(p===1)s[1]++;else if(p===2){if(this.foundPatternCross(s)){var v=this.handlePossibleCenter(s,f,h);if(v!==null)return v}s[0]=s[2],s[1]=1,s[2]=0,p=1}else s[++p]++;else p===1&&p++,s[p]++;h++}if(this.foundPatternCross(s)){var v=this.handlePossibleCenter(s,f,i);if(v!==null)return v}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ne},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var o=this.image,s=o.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var c=e;c>=0&&o.get(t,c)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&!o.get(t,c)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(t,c)&&a[1]<=r;)a[1]++,c++;if(c===s||a[1]>r)return NaN;for(;c<s&&!o.get(t,c)&&a[2]<=r;)a[2]++,c++;if(a[2]>r)return NaN;var f=a[0]+a[1]+a[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(a)?n.centerFromEnd(a,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,o,s=e[0]+e[1]+e[2],a=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,a,2*e[1],s);if(!isNaN(c)){var f=(e[0]+e[1]+e[2])/3;try{for(var h=gB(this.possibleCenters),p=h.next();!p.done;p=h.next()){var v=p.value;if(v.aboutEquals(f,c,a))return v.combineEstimate(c,a,f)}}catch(E){i={error:E}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}var y=new mB(a,c,f);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null},n})(),yB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xB=(function(n){yB(e,n);function e(t,r,i,o){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=this.count+1,s=(this.count*this.getX()+r)/o,a=(this.count*this.getY()+t)/o,c=(this.count*this.estimatedModuleSize+i)/o;return new e(s,a,c,o)},e})(Te),_B=(function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),fc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wB=(function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(kt.TRY_HARDER)!==void 0,r=e!=null&&e.get(kt.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),a=Math.floor(3*o/(4*n.MAX_MODULES));(a<n.MIN_SKIP||t)&&(a=n.MIN_SKIP);for(var c=!1,f=new Int32Array(5),h=a-1;h<o&&!c;h+=a){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var p=0,v=0;v<s;v++)if(i.get(v,h))(p&1)===1&&p++,f[p]++;else if((p&1)===0)if(p===4)if(n.foundPatternCross(f)){var y=this.handlePossibleCenter(f,h,v,r);if(y===!0)if(a=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var E=this.findRowSkip();E>f[2]&&(h+=E-f[2]-a,v=s-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;continue}p=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;else f[++p]++;else f[p]++;if(n.foundPatternCross(f)){var y=this.handlePossibleCenter(f,h,s,r);y===!0&&(a=f[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var A=this.selectBestPatterns();return Te.orderBestPatterns(A),new _B(A)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var o=t/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var o=this.getCrossCheckStateCount(),s=0,a=this.image;e>=s&&t>=s&&a.get(t-s,e-s);)o[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!a.get(t-s,e-s)&&o[1]<=r;)o[1]++,s++;if(e<s||t<s||o[1]>r)return!1;for(;e>=s&&t>=s&&a.get(t-s,e-s)&&o[0]<=r;)o[0]++,s++;if(o[0]>r)return!1;var c=a.getHeight(),f=a.getWidth();for(s=1;e+s<c&&t+s<f&&a.get(t+s,e+s);)o[2]++,s++;if(e+s>=c||t+s>=f)return!1;for(;e+s<c&&t+s<f&&!a.get(t+s,e+s)&&o[3]<r;)o[3]++,s++;if(e+s>=c||t+s>=f||o[3]>=r)return!1;for(;e+s<c&&t+s<f&&a.get(t+s,e+s)&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return!1;var h=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(h-i)<2*i&&n.foundPatternCross(o)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var o=this.image,s=o.getHeight(),a=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(t,c);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(t,c)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&o.get(t,c)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(t,c);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(t,c)&&a[3]<r;)a[3]++,c++;if(c===s||a[3]>=r)return NaN;for(;c<s&&o.get(t,c)&&a[4]<r;)a[4]++,c++;if(a[4]>=r)return NaN;var f=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(f-i)>=2*i?NaN:n.foundPatternCross(a)?n.centerFromEnd(a,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var o=this.image,s=o.getWidth(),a=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(c,t);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(c,t)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&o.get(c,t)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(c,t);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(c,t)&&a[3]<r;)a[3]++,c++;if(c===s||a[3]>=r)return NaN;for(;c<s&&o.get(c,t)&&a[4]<r;)a[4]++,c++;if(a[4]>=r)return NaN;var f=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(f-i)>=i?NaN:n.foundPatternCross(a)?n.centerFromEnd(a,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),a=this.crossCheckVertical(t,Math.floor(s),e[2],o);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],o)))){for(var c=o/7,f=!1,h=this.possibleCenters,p=0,v=h.length;p<v;p++){var y=h[p];if(y.aboutEquals(c,a,s)){h[p]=y.combineEstimate(a,s,c),f=!0;break}}if(!f){var E=new xB(s,a,c);h.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var o=fc(this.possibleCenters),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.getCount()>=n.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,o=0,s=0,a=this.possibleCenters.length;try{for(var c=fc(this.possibleCenters),f=c.next();!f.done;f=c.next()){var h=f.value;h.getCount()>=n.CENTER_QUORUM&&(o++,s+=h.getEstimatedModuleSize())}}catch(A){e={error:A}}finally{try{f&&!f.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(o<3)return!1;var p=s/a,v=0;try{for(var y=fc(this.possibleCenters),E=y.next();!E.done;E=y.next()){var h=E.value;v+=Math.abs(h.getEstimatedModuleSize()-p)}}catch(A){r={error:A}}finally{try{E&&!E.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}return v<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,o=this.possibleCenters.length;if(o<3)throw new ne;var s=this.possibleCenters,a;if(o>3){var c=0,f=0;try{for(var h=fc(this.possibleCenters),p=h.next();!p.done;p=h.next()){var v=p.value,y=v.getEstimatedModuleSize();c+=y,f+=y*y}}catch(H){e={error:H}}finally{try{p&&!p.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}a=c/o;var E=Math.sqrt(f/o-a*a);s.sort(function(H,$){var R=Math.abs($.getEstimatedModuleSize()-a),I=Math.abs(H.getEstimatedModuleSize()-a);return R<I?-1:R>I?1:0});for(var A=Math.max(.2*a,E),C=0;C<s.length&&s.length>3;C++){var N=s[C];Math.abs(N.getEstimatedModuleSize()-a)>A&&(s.splice(C,1),C--)}}if(s.length>3){var c=0;try{for(var P=fc(s),M=P.next();!M.done;M=P.next()){var j=M.value;c+=j.getEstimatedModuleSize()}}catch($){r={error:$}}finally{try{M&&!M.done&&(i=P.return)&&i.call(P)}finally{if(r)throw r.error}}a=c/s.length,s.sort(function($,R){if(R.getCount()===$.getCount()){var I=Math.abs(R.getEstimatedModuleSize()-a),D=Math.abs($.getEstimatedModuleSize()-a);return I<D?1:I>D?-1:0}else return R.getCount()-$.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),EB=(function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(kt.NEED_RESULT_POINT_CALLBACK);var t=new wB(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(t,r,i);if(o<1)throw new ne("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,o),a=ya.getProvisionalVersionForDimension(s),c=a.getDimensionForVersion()-7,f=null;if(a.getAlignmentPatternCenters().length>0)for(var h=r.getX()-t.getX()+i.getX(),p=r.getY()-t.getY()+i.getY(),v=1-3/c,y=Math.floor(t.getX()+v*(h-t.getX())),E=Math.floor(t.getY()+v*(p-t.getY())),A=4;A<=16;A<<=1)try{f=this.findAlignmentInRegion(o,y,E,A);break}catch(M){if(!(M instanceof ne))throw M}var C=n.createTransform(t,r,i,f,s),N=n.sampleGrid(this.image,C,s),P;return f===null?P=[i,t,r]:P=[i,t,r,f],new py(N,P)},n.createTransform=function(e,t,r,i,o){var s=o-3.5,a,c,f,h;return i!==null?(a=i.getX(),c=i.getY(),f=s-3,h=f):(a=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),f=s,h=s),x3.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,f,h,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),a,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=my.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var o=ut.round(Te.distance(e,t)/i),s=ut.round(Te.distance(e,r)/i),a=Math.floor((o+s)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new ne("Dimensions could be not found.")}return a},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,a=e-(r-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*s);return s=1,c<0?(s=t/(t-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,t,a,c),o-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var o=Math.abs(i-t)>Math.abs(r-e);if(o){var s=e;e=t,t=s,s=r,r=i,i=s}for(var a=Math.abs(r-e),c=Math.abs(i-t),f=-a/2,h=e<r?1:-1,p=t<i?1:-1,v=0,y=r+h,E=e,A=t;E!==y;E+=h){var C=o?A:E,N=o?E:A;if(v===1===this.image.get(C,N)){if(v===2)return ut.distance(E,A,e,t);v++}if(f+=c,f>0){if(A===i)break;A+=p,f-=a}}return v===2?ut.distance(r+h,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var o=Math.floor(i*e),s=Math.max(0,t-o),a=Math.min(this.image.getWidth()-1,t+o);if(a-s<e*3)throw new ne("Alignment top exceeds estimated module size.");var c=Math.max(0,r-o),f=Math.min(this.image.getHeight()-1,r+o);if(f-c<e*3)throw new ne("Alignment bottom exceeds estimated module size.");var h=new vB(this.image,s,c,a-s,f-c,e,this.resultPointCallback);return h.find()},n})(),vg=(function(){function n(){this.decoder=new dB}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(kt.PURE_BARCODE)!==void 0){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,t),i=n.NO_POINTS}else{var s=new EB(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof T3&&r.getOther().applyMirroredCorrection(i);var a=new Wn(r.getText(),r.getRawBytes(),void 0,i,Ne.QR_CODE,void 0),c=r.getByteSegments();c!==null&&a.putMetadata(Dn.BYTE_SEGMENTS,c);var f=r.getECLevel();return f!==null&&a.putMetadata(Dn.ERROR_CORRECTION_LEVEL,f),r.hasStructuredAppend()&&(a.putMetadata(Dn.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),a.putMetadata(Dn.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),a},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new ne;var i=this.moduleSize(t,e),o=t[1],s=r[1],a=t[0],c=r[0];if(a>=c||o>=s)throw new ne;if(s-o!==c-a&&(c=a+(s-o),c>=e.getWidth()))throw new ne;var f=Math.round((c-a+1)/i),h=Math.round((s-o+1)/i);if(f<=0||h<=0)throw new ne;if(h!==f)throw new ne;var p=Math.floor(i/2);o+=p,a+=p;var v=a+Math.floor((f-1)*i)-c;if(v>0){if(v>p)throw new ne;a-=v}var y=o+Math.floor((h-1)*i)-s;if(y>0){if(y>p)throw new ne;o-=y}for(var E=new ji(f,h),A=0;A<h;A++)for(var C=o+Math.floor(A*i),N=0;N<f;N++)e.get(a+Math.floor(N*i),C)&&E.set(N,A);return E},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),o=e[0],s=e[1],a=!0,c=0;o<i&&s<r;){if(a!==t.get(o,s)){if(++c===5)break;a=!a}o++,s++}if(o===i||s===r)throw new ne;return(o-e[0])/7},n.NO_POINTS=new Array,n})(),AB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},st=(function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return ut.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=AB(e),a=s.next();!a.done;a=s.next()){var c=a.value;i[o++]=c}}catch(f){t={error:f}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=ln.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n})(),CB=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),TB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IB=(function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),o=n.detect(r,i);return o.length||(i=i.clone(),i.rotate180(),o=n.detect(r,i)),new CB(i,o)},n.detect=function(e,t){for(var r,i,o=new Array,s=0,a=0,c=!1;s<t.getHeight();){var f=n.findVertices(t,s,a);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,a=0;try{for(var h=(r=void 0,TB(o)),p=h.next();!p.done;p=h.next()){var v=p.value;v[1]!=null&&(s=Math.trunc(Math.max(s,v[1].getY()))),v[3]!=null&&(s=Math.max(s,Math.trunc(v[3].getY())))}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(c=!0,o.push(f),!e)break;f[2]!=null?(a=Math.trunc(f[2].getX()),s=Math.trunc(f[2].getY())):(a=Math.trunc(f[4].getX()),s=Math.trunc(f[4].getY()))}return o},n.findVertices=function(e,t,r){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,o,s){for(var a=new Array(4),c=!1,f=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var h=n.findGuardPattern(e,o,i,r,!1,s,f);if(h!=null){for(;i>0;){var p=n.findGuardPattern(e,o,--i,r,!1,s,f);if(p!=null)h=p;else{i++;break}}a[0]=new Te(h[0],i),a[1]=new Te(h[1],i),c=!0;break}}var v=i+1;if(c){for(var y=0,p=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);v<t;v++){var h=n.findGuardPattern(e,p[0],v,r,!1,s,f);if(h!=null&&Math.abs(p[0]-h[0])<n.MAX_PATTERN_DRIFT&&Math.abs(p[1]-h[1])<n.MAX_PATTERN_DRIFT)p=h,y=0;else{if(y>n.SKIPPED_ROW_COUNT_MAX)break;y++}}v-=y+1,a[2]=new Te(p[0],v),a[3]=new Te(p[1],v)}return v-i<n.BARCODE_MIN_HEIGHT&&ln.fill(a,null),a},n.findGuardPattern=function(e,t,r,i,o,s,a){ln.fillWithin(a,0,a.length,0);for(var c=t,f=0;e.get(c,r)&&c>0&&f++<n.MAX_PIXEL_DRIFT;)c--;for(var h=c,p=0,v=s.length,y=o;h<i;h++){var E=e.get(h,r);if(E!==y)a[p]++;else{if(p===v-1){if(n.patternMatchVariance(a,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,h]);c+=a[0]+a[1],wt.arraycopy(a,2,a,0,p-1),a[p-1]=0,a[p]=0,p--}else p++;a[p]=1,y=!y}}return p===v-1&&n.patternMatchVariance(a,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,h-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=t[a];if(o<s)return 1/0;var c=o/s;r*=c;for(var f=0,h=0;h<i;h++){var p=e[h],v=t[h]*c,y=p>v?p-v:v-p;if(y>r)return 1/0;f+=y}return f/o},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n})(),SB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},da=(function(){function n(e,t){if(t.length===0)throw new Ve;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),wt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=SB(this.coefficients),s=o.next();!s.done;s=o.next()){var a=s.value;i=this.field.add(i,a)}}catch(p){t={error:p}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],f=this.coefficients.length,h=1;h<f;h++)c=this.field.add(this.field.multiply(e,c),this.coefficients[h]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Ve("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;wt.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=this.field.add(t[a-s],r[a]);return new n(this.field,o)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Ve("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Ve("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=0;a<r;a++)for(var c=t[a],f=0;f<o;f++)s[a+f]=this.field.add(s[a+f],this.field.multiply(c,i[f]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ve;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new qe,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n})(),bB=(function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Ve;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new y3;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n})(),RB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),PB=(function(n){RB(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var o=1,s=0;s<t;s++)i.expTable[s]=o,o=o*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new da(i,new Int32Array([0])),i.one=new da(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Ve;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new da(this,i)},e.PDF417_GF=new e(st.NUMBER_OF_CODEWORDS,3),e})(bB),NB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DB=(function(){function n(){this.field=PB.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,o,s=new da(this.field,e),a=new Int32Array(t),c=!1,f=t;f>0;f--){var h=s.evaluateAt(this.field.exp(f));a[t-f]=h,h!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(r!=null)try{for(var v=NB(r),y=v.next();!y.done;y=v.next()){var E=y.value,A=this.field.exp(e.length-1-E),C=new da(this.field,new Int32Array([this.field.subtract(0,A),1]));p=p.multiply(C)}}catch(I){i={error:I}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}for(var N=new da(this.field,a),P=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),N,t),M=P[0],j=P[1],H=this.findErrorLocations(M),$=this.findErrorMagnitudes(j,M,H),f=0;f<H.length;f++){var R=e.length-1-this.field.log(H[f]);if(R<0)throw xn.getChecksumInstance();e[R]=this.field.subtract(e[R],$[f])}return H.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=e,s=t,a=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var f=o,h=a;if(o=s,a=c,o.isZero())throw xn.getChecksumInstance();s=f;for(var p=this.field.getZero(),v=o.getCoefficient(o.getDegree()),y=this.field.inverse(v);s.getDegree()>=o.getDegree()&&!s.isZero();){var E=s.getDegree()-o.getDegree(),A=this.field.multiply(s.getCoefficient(s.getDegree()),y);p=p.add(this.field.buildMonomial(E,A)),s=s.subtract(o.multiplyByMonomial(E,A))}c=p.multiply(a).subtract(h).negative()}var C=c.getCoefficient(0);if(C===0)throw xn.getChecksumInstance();var N=this.field.inverse(C),P=c.multiply(N),M=s.multiply(N);return[P,M]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,o=1;o<this.field.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=this.field.inverse(o),i++);if(i!==t)throw xn.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var a=new da(this.field,o),c=r.length,f=new Int32Array(c),s=0;s<c;s++){var h=this.field.inverse(r[s]),p=this.field.subtract(0,e.evaluateAt(h)),v=this.field.inverse(a.evaluateAt(h));f[s]=this.field.multiply(p,v)}return f},n})(),yg=(function(){function n(e,t,r,i,o){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,o)}return n.prototype.constructor_1=function(e,t,r,i,o){var s=t==null||r==null,a=i==null||o==null;if(s&&a)throw new ne;s?(t=new Te(0,i.getY()),r=new Te(0,o.getY())):a&&(i=new Te(e.getWidth()-1,t.getY()),o=new Te(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,f=Math.trunc(c.getY()-e);f<0&&(f=0);var h=new Te(c.getX(),f);r?i=h:s=h}if(t>0){var p=r?this.bottomLeft:this.bottomRight,v=Math.trunc(p.getY()+t);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);var y=new Te(p.getX(),v);r?o=y:a=y}return new n(this.image,i,o,s,a)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n})(),OB=(function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n})(),vy=(function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,a,c,f,h,p){if(s==="%%")return"%";if(t[++r]!==void 0){s=f?parseInt(f.substr(1)):void 0;var v=h?parseInt(h.substr(1)):void 0,y;switch(p){case"s":y=t[r];break;case"c":y=t[r][0];break;case"f":y=parseFloat(t[r]).toFixed(s);break;case"p":y=parseFloat(t[r]).toPrecision(s);break;case"e":y=parseFloat(t[r]).toExponential(s);break;case"x":y=parseInt(t[r]).toString(v||16);break;case"d":y=parseFloat(parseInt(t[r],v||10).toPrecision(s)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(v);for(var E=parseInt(c),A=c&&c[0]+""=="0"?"0":" ";y.length<E;)y=a!==void 0?y+A:A+y;return y}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n})(),kB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I3=(function(){function n(e){this.boundingBox=new yg(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new vy,i=0;try{for(var o=kB(this.codewords),s=o.next();!s.done;s=o.next()){var a=s.value;if(a==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n})(),MB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LB=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},wc=(function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,o=function(p,v){var y={getKey:function(){return p},getValue:function(){return v}};y.getValue()>r?(r=y.getValue(),i=[],i.push(y.getKey())):y.getValue()===r&&i.push(y.getKey())};try{for(var s=MB(this.values.entries()),a=s.next();!a.done;a=s.next()){var c=LB(a.value,2),f=c[0],h=c[1];o(f,h)}}catch(p){e={error:p}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return st.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n})(),VB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),tm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gA=(function(n){VB(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=tm(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),f=-1,h=1,p=0,v=a;v<c;v++)if(r[v]!=null){var y=r[v],E=y.getRowNumber()-f;if(E===0)p++;else if(E===1)h=Math.max(h,p),p=1,f=y.getRowNumber();else if(E<0||y.getRowNumber()>=t.getRowCount()||E>v)r[v]=null;else{var A=void 0;h>2?A=(h-2)*E:A=E;for(var C=A>=v,N=1;N<=A&&!C;N++)C=r[v-N]!=null;C?r[v]=null:(f=y.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=tm(this.getCodewords()),a=s.next();!a.done;a=s.next()){var c=a.value;if(c!=null){var f=c.getRowNumber();if(f>=o.length)continue;o[f]++}}}catch(h){t={error:h}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.getCodewords(),f=-1,h=s;h<a;h++)if(c[h]!=null){var p=c[h];p.setRowNumberAsRowIndicatorColumn();var v=p.getRowNumber()-f;v===0||(v===1?f=p.getRowNumber():p.getRowNumber()>=t.getRowCount()?c[h]=null:f=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),o=new wc,s=new wc,a=new wc,c=new wc;try{for(var f=tm(i),h=f.next();!h.done;h=f.next()){var p=h.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var v=p.getValue()%30,y=p.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:s.setValue(v*3+1);break;case 1:c.setValue(v/3),a.setValue(v%3);break;case 2:o.setValue(v+1);break}}}}catch(A){t={error:A}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}if(o.getValue().length===0||s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<st.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>st.MAX_ROWS_IN_BARCODE)return null;var E=new OB(o.getValue()[0],s.getValue()[0],a.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,E),E},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var o=t[i];if(t[i]!=null){var s=o.getValue()%30,a=o.getRowNumber();if(a>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(a+=2),a%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e})(I3),FB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BB=(function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=st.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=n.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=n.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=r[t],a=this.detectionResultColumns[e-1].getCodewords(),c=a;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=a[t],f[3]=c[t],t>0&&(f[0]=r[t-1],f[4]=a[t-1],f[5]=c[t-1]),t>1&&(f[8]=r[t-2],f[10]=a[t-2],f[11]=c[t-2]),t<r.length-1&&(f[1]=r[t+1],f[6]=a[t+1],f[7]=c[t+1]),t<r.length-2&&(f[9]=r[t+2],f[12]=a[t+2],f[13]=c[t+2]);try{for(var h=FB(f),p=h.next();!p.done;p=h.next()){var v=p.value;if(n.adjustRowNumber(s,v))return}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new vy,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[r];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()},n})(),UB=(function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n})(),jB=(function(){function n(){}return n.initialize=function(){for(var e=0;e<st.SYMBOL_TABLE.length;e++)for(var t=st.SYMBOL_TABLE[e],r=t&1,i=0;i<st.BARS_IN_MODULE;i++){for(var o=0;(t&1)===r;)o+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(st.BARS_IN_MODULE)),n.RATIOS_TABLE[e][st.BARS_IN_MODULE-i-1]=Math.fround(o/st.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=ut.sum(e),r=new Int32Array(st.BARS_IN_MODULE),i=0,o=0,s=0;s<st.MODULES_IN_CODEWORD;s++){var a=t/(2*st.MODULES_IN_CODEWORD)+s*t/st.MODULES_IN_CODEWORD;o+e[i]<=a&&(o+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return st.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=ut.sum(e),r=new Array(st.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var o=hg.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var a=0;a<n.RATIOS_TABLE.length;a++){for(var c=0,f=n.RATIOS_TABLE[a],h=0;h<st.BARS_IN_MODULE;h++){var p=Math.fround(f[h]-r[h]);if(c+=Math.fround(p*p),c>=o)break}c<o&&(o=c,s=st.SYMBOL_TABLE[a])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(st.SYMBOL_TABLE.length).map(function(e){return new Array(st.BARS_IN_MODULE)}),n})(),zB=(function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n})(),vA=(function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n})(),HB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),$B=(function(n){HB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e})(hr),WB=(function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new $B;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new hy;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n})(),GB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),qB=(function(n){GB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(hr),KB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),XB=(function(n){KB(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Ve("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new qB;i=Ye.MAX_VALUE}this.buf=ln.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new hy;this.ensureCapacity(this.count+i),wt.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ln.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(WB),gt;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(gt||(gt={}));function S3(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var rd;function ns(n){if(typeof rd>"u"&&(rd=S3()),rd===null)throw new Error("BigInt is not supported!");return rd(n)}function YB(){var n=[];n[0]=ns(1);var e=ns(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var QB=(function(){function n(){}return n.decode=function(e,t){var r=new qe(""),i=un.ISO8859_1;r.enableDecoding(i);for(var o=1,s=e[o++],a=new zB;o<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:o=n.textCompaction(e,o,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:o=n.byteCompaction(s,e,i,o,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:o=n.numericCompaction(e,o,r);break;case n.ECI_CHARSET:un.getCharacterSetECIByValue(e[o++]);break;case n.ECI_GENERAL_PURPOSE:o+=2;break;case n.ECI_USER_DEFINED:o++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=n.decodeMacroBlock(e,o,a);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new he;default:o--,o=n.textCompaction(e,o,r);break}if(o<e.length)s=e[o++];else throw he.getFormatInstance()}if(r.length()===0)throw he.getFormatInstance();var c=new Lp(null,r.toString(),null,t);return c.setOther(a),c},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw he.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<n.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)i[o]=e[t];r.setSegmentIndex(Ye.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new qe;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var a=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new qe;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new qe;t=n.textCompaction(e,t+1,f),r.setSender(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var h=new qe;t=n.textCompaction(e,t+1,h),r.setAddressee(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new qe;t=n.numericCompaction(e,t+1,p),r.setSegmentCount(Ye.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var v=new qe;t=n.numericCompaction(e,t+1,v),r.setTimestamp(vA.parseLong(v.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var y=new qe;t=n.numericCompaction(e,t+1,y),r.setChecksum(Ye.parseInt(y.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var E=new qe;t=n.numericCompaction(e,t+1,E),r.setFileSize(vA.parseLong(E.toString()));break;default:throw he.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw he.getFormatInstance()}if(a!==-1){var A=t-a;r.isLastSegment()&&A--,r.setOptionalData(ln.copyOfRange(e,a,a+A))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),s=0,a=!1;t<e[0]&&!a;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],o[s]=c,s++;break}}return n.decodeTextCompaction(i,o,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var o=gt.ALPHA,s=gt.ALPHA,a=0;a<r;){var c=e[a],f="";switch(o){case gt.ALPHA:if(c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.LL:o=gt.LOWER;break;case n.ML:o=gt.MIXED;break;case n.PS:s=o,o=gt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break;case gt.LOWER:if(c<26)f=String.fromCharCode(97+c);else switch(c){case 26:f=" ";break;case n.AS:s=o,o=gt.ALPHA_SHIFT;break;case n.ML:o=gt.MIXED;break;case n.PS:s=o,o=gt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break;case gt.MIXED:if(c<n.PL)f=n.MIXED_CHARS[c];else switch(c){case n.PL:o=gt.PUNCT;break;case 26:f=" ";break;case n.LL:o=gt.LOWER;break;case n.AL:o=gt.ALPHA;break;case n.PS:s=o,o=gt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break;case gt.PUNCT:if(c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:o=gt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break;case gt.ALPHA_SHIFT:if(o=s,c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break;case gt.PUNCT_SHIFT:if(o=s,c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:o=gt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break}f!==""&&i.append(f),a++}},n.byteCompaction=function(e,t,r,i,o){var s=new XB,a=0,c=0,f=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var h=new Int32Array(6),p=t[i++];i<t[0]&&!f;)switch(h[a++]=p,c=900*c+p,p=t[i++],p){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(a%5===0&&a>0){for(var v=0;v<6;++v)s.write(Number(ns(c)>>ns(8*(5-v))));c=0,a=0}break}i===t[0]&&p<n.TEXT_COMPACTION_MODE_LATCH&&(h[a++]=p);for(var y=0;y<a;y++)s.write(h[y]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!f;){var E=t[i++];if(E<n.TEXT_COMPACTION_MODE_LATCH)a++,c=900*c+E;else switch(E){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(a%5===0&&a>0){for(var v=0;v<6;++v)s.write(Number(ns(c)>>ns(8*(5-v))));c=0,a=0}}break}return o.append($r.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,o=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!o;){var a=e[t++];if(t===e[0]&&(o=!0),a<n.TEXT_COMPACTION_MODE_LATCH)s[i]=a,i++;else switch(a){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||a===n.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=ns(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*ns(e[i]);var o=r.toString();if(o.charAt(0)!=="1")throw new he;return o.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=S3()?YB():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n})(),hc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZB=(function(){function n(){}return n.decode=function(e,t,r,i,o,s,a){for(var c=new yg(e,t,r,i,o),f=null,h=null,p,v=!0;;v=!1){if(t!=null&&(f=n.getRowIndicatorColumn(e,c,t,!0,s,a)),i!=null&&(h=n.getRowIndicatorColumn(e,c,i,!1,s,a)),p=n.merge(f,h),p==null)throw ne.getNotFoundInstance();var y=p.getBoundingBox();if(v&&y!=null&&(y.getMinY()<c.getMinY()||y.getMaxY()>c.getMaxY()))c=y;else break}p.setBoundingBox(c);var E=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,f),p.setDetectionResultColumn(E,h);for(var A=f!=null,C=1;C<=E;C++){var N=A?C:E-C;if(p.getDetectionResultColumn(N)===void 0){var P=void 0;N===0||N===E?P=new gA(c,N===0):P=new I3(c),p.setDetectionResultColumn(N,P);for(var M=-1,j=M,H=c.getMinY();H<=c.getMaxY();H++){if(M=n.getStartColumn(p,N,H,A),M<0||M>c.getMaxX()){if(j===-1)continue;M=j}var $=n.detectCodeword(e,c.getMinX(),c.getMaxX(),A,M,H,s,a);$!=null&&(P.setCodeword(H,$),j=M,s=Math.min(s,$.getWidth()),a=Math.max(a,$.getWidth()))}}}return n.createDecoderResult(p)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=yg.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new BB(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=n.getMax(i),s=0;try{for(var a=hc(i),c=a.next();!c.done;c=a.next()){var f=c.value;if(s+=o-f,f>0)break}}catch(y){t={error:y}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}for(var h=e.getCodewords(),p=0;s>0&&h[p]==null;p++)s--;for(var v=0,p=i.length-1;p>=0&&(v+=o-i[p],!(i[p]>0));p--);for(var p=h.length-1;v>0&&h[p]==null;p--)v--;return e.getBoundingBox().addMissingRows(s,v,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var o=hc(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=Math.max(i,a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,o,s){for(var a=new gA(t,i),c=0;c<2;c++)for(var f=c===0?1:-1,h=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=f){var v=n.detectCodeword(e,0,e.getWidth(),i,h,p,o,s);v!=null&&(a.setCodeword(p,v),i?h=v.getStartX():h=v.getEndX())}return a},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>st.MAX_CODEWORDS_IN_BARCODE)throw ne.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var c=0;c<e.getBarcodeColumnCount();c++){var f=t[a][c+1].getValue(),h=a*e.getBarcodeColumnCount()+c;f.length===0?r.push(h):f.length===1?i[h]=f[0]:(s.push(h),o.push(f))}for(var p=new Array(o.length),v=0;v<p.length;v++)p[v]=o[v];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,st.toIntArray(r),st.toIntArray(s),p)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,o){for(var s=new Int32Array(i.length),a=100;a-- >0;){for(var c=0;c<s.length;c++)t[i[c]]=o[c][s[c]];try{return n.decodeCodewords(t,e,r)}catch(h){var f=h instanceof xn;if(!f)throw h}if(s.length===0)throw xn.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<o[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw xn.getChecksumInstance()}throw xn.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<s.length;a++)for(var c=0;c<s[a].length;c++)s[a][c]=new wc;var f=0;try{for(var h=hc(e.getDetectionResultColumns()),p=h.next();!p.done;p=h.next()){var v=p.value;if(v!=null)try{for(var y=(i=void 0,hc(v.getCodewords())),E=y.next();!E.done;E=y.next()){var A=E.value;if(A!=null){var C=A.getRowNumber();if(C>=0){if(C>=s.length)continue;s[C][f].setValue(A.getValue())}}}}catch(N){i={error:N}}finally{try{E&&!E.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}f++}}catch(N){t={error:N}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var o,s,a=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-a)&&(c=e.getDetectionResultColumn(t-a).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-a)&&(c=e.getDetectionResultColumn(t-a).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var f=0;n.isValidBarcodeColumn(e,t-a);){t-=a;try{for(var h=(o=void 0,hc(e.getDetectionResultColumn(t).getCodewords())),p=h.next();!p.done;p=h.next()){var v=p.value;if(v!=null)return(i?v.getEndX():v.getStartX())+a*f*(v.getEndX()-v.getStartX())}}catch(y){o={error:y}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}f++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,o,s,a,c){o=n.adjustCodewordStartColumn(e,t,r,i,o,s);var f=n.getModuleBitCount(e,t,r,i,o,s);if(f==null)return null;var h,p=ut.sum(f);if(i)h=o+p;else{for(var v=0;v<f.length/2;v++){var y=f[v];f[v]=f[f.length-1-v],f[f.length-1-v]=y}h=o,o=h-p}if(!n.checkCodewordSkew(p,a,c))return null;var E=jB.getDecodedValue(f),A=st.getCodeword(E);return A===-1?null:new UB(o,h,n.getCodewordBucketNumber(E),A)},n.getModuleBitCount=function(e,t,r,i,o,s){for(var a=o,c=new Int32Array(8),f=0,h=i?1:-1,p=i;(i?a<r:a>=t)&&f<c.length;)e.get(a,s)===p?(c[f]++,a+=h):(f++,p=!p);return f===c.length||a===(i?r:t)&&f===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,o,s){for(var a=o,c=i?-1:1,f=0;f<2;f++){for(;(i?a>=t:a<r)&&i===e.get(a,s);){if(Math.abs(o-a)>n.CODEWORD_SKEW_SIZE)return o;a+=c}c=-c,i=!i}return a},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw he.getFormatInstance();var i=1<<t+1,o=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=QB.decode(e,""+t);return s.setErrorsCorrected(o),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw xn.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw he.getFormatInstance();var r=e[0];if(r>e.length)throw he.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw he.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new vy,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new DB,n})(),JB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xg=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw ne.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof he||r instanceof xn?ne.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,o,s=new Array,a=IB.detectMultiple(e,t,r);try{for(var c=JB(a.getPoints()),f=c.next();!f.done;f=c.next()){var h=f.value,p=ZB.decode(a.getBits(),h[4],h[5],h[6],h[7],n.getMinCodewordWidth(h),n.getMaxCodewordWidth(h)),v=new Wn(p.getText(),p.getRawBytes(),void 0,h,Ne.PDF_417);v.putMetadata(Dn.ERROR_CORRECTION_LEVEL,p.getECLevel());var y=p.getOther();y!=null&&v.putMetadata(Dn.PDF417_EXTRA_METADATA,y),s.push(v)}}catch(E){i={error:E}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return s.map(function(E){return E})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?Ye.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n})(),eU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),yA=(function(n){eU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e})(hr),xA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tU=(function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(kt.TRY_HARDER)!==void 0,r=e==null?null:e.get(kt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var o=r.some(function(s){return s===Ne.UPC_A||s===Ne.UPC_E||s===Ne.EAN_13||s===Ne.EAN_8||s===Ne.CODABAR||s===Ne.CODE_39||s===Ne.CODE_93||s===Ne.CODE_128||s===Ne.ITF||s===Ne.RSS_14||s===Ne.RSS_EXPANDED});o&&!t&&i.push(new _c(e)),r.includes(Ne.QR_CODE)&&i.push(new vg),r.includes(Ne.DATA_MATRIX)&&i.push(new gg),r.includes(Ne.AZTEC)&&i.push(new pg),r.includes(Ne.PDF_417)&&i.push(new xg),o&&t&&i.push(new _c(e))}i.length===0&&(t||i.push(new _c(e)),i.push(new vg),i.push(new gg),i.push(new pg),i.push(new xg),t&&i.push(new _c(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=xA(this.readers),i=r.next();!i.done;i=r.next()){var o=i.value;o.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new yA("No readers where selected, nothing can be read.");try{for(var i=xA(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(a){if(a instanceof yA)continue}}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new ne("No MultiFormat Readers were able to detect the code.")},n})(),nU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),rU=(function(n){nU(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,o=new tU;return o.setHints(t),i=n.call(this,o,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(hl),iU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){iU(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new xg,t)||this}return e})(hl);var oU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){oU(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new vg,t)||this}return e})(hl);var _g;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(_g||(_g={}));const id=_g;var b3=(function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ps(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,o=t.length;o<=e;o++){var s=r.multiply(new ps(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Ve("No error correction bytes");var r=e.length-t;if(r<=0)throw new Ve("No data bytes provided");var i=this.buildGenerator(t),o=new Int32Array(r);wt.arraycopy(e,0,o,0,r);var s=new ps(this.field,o);s=s.multiplyByMonomial(t,1);for(var a=s.divide(i)[1],c=a.getCoefficients(),f=t-c.length,h=0;h<f;h++)e[r+h]=0;wt.arraycopy(c,0,e,r+f,c.length)},n})(),Ec=(function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var a=r[s],c=0;c<i-1;c++){var f=a[c];f===a[c+1]&&f===r[s+1][c]&&f===r[s+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=0;a<i;a++){var c=r[s];a+6<i&&c[a]===1&&c[a+1]===0&&c[a+2]===1&&c[a+3]===1&&c[a+4]===1&&c[a+5]===0&&c[a+6]===1&&(n.isWhiteHorizontal(c,a-4,a)||n.isWhiteHorizontal(c,a+7,a+11))&&t++,s+6<o&&r[s][a]===1&&r[s+1][a]===0&&r[s+2][a]===1&&r[s+3][a]===1&&r[s+4][a]===1&&r[s+5][a]===0&&r[s+6][a]===1&&(n.isWhiteVertical(r,a,s-4,s)||n.isWhiteVertical(r,a,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(e[o][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=r[s],c=0;c<i;c++)a[c]===1&&t++;var f=e.getHeight()*e.getWidth(),h=Math.floor(Math.abs(t*2-f)*10/f);return h*n.N4},n.getDataMaskBit=function(e,t,r){var i,o;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:o=r*t,i=(o&1)+o%3;break;case 6:o=r*t,i=(o&1)+o%3&1;break;case 7:o=r*t,i=o%3+(r+t&1)&1;break;default:throw new Ve("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),s=e.getArray(),a=0;a<i;a++){for(var c=0,f=-1,h=0;h<o;h++){var p=t?s[a][h]:s[h][a];p===f?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,f=p)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n})(),sU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aU=(function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=sU(this.bytes),o=i.next();!o.done;o=i.next()){var s=o.value;ln.fill(s,e)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],s=t.bytes[r],a=0,c=this.width;a<c;++a)if(o[a]!==s[a])return!1;return!0},n.prototype.toString=function(){for(var e=new qe,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],o=0,s=this.width;o<s;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n})(),wg=(function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new qe;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n})(),uU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Tt=(function(n){uU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e})(hr),_A=(function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,o){n.clearMatrix(o),n.embedBasicPatterns(r,o),n.embedTypeInfo(t,i,o),n.maybeEmbedVersionInfo(r,o),n.embedDataBits(e,i,o)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new _n;n.makeTypeInfoBits(e,t,i);for(var o=0,s=i.getSize();o<s;++o){var a=i.get(i.getSize()-1-o),c=n.TYPE_INFO_COORDINATES[o],f=c[0],h=c[1];if(r.setBoolean(f,h,a),o<8){var p=r.getWidth()-o-1,v=8;r.setBoolean(p,v,a)}else{var p=8,v=r.getHeight()-7+(o-8);r.setBoolean(p,v,a)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new _n;n.makeVersionInfoBits(e,r);for(var i=17,o=0;o<6;++o)for(var s=0;s<3;++s){var a=r.get(i);i--,t.setBoolean(o,t.getHeight()-11+s,a),t.setBoolean(t.getHeight()-11+s,o,a)}}},n.embedDataBits=function(e,t,r){for(var i=0,o=-1,s=r.getWidth()-1,a=r.getHeight()-1;s>0;){for(s===6&&(s-=1);a>=0&&a<r.getHeight();){for(var c=0;c<2;++c){var f=s-c;if(n.isEmpty(r.get(f,a))){var h=void 0;i<e.getSize()?(h=e.get(i),++i):h=!1,t!==255&&Ec.getDataMaskBit(t,f,a)&&(h=!h),r.setBoolean(f,a,h)}}a+=o}o=-o,a+=o,s-=2}if(i!==e.getSize())throw new Tt("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-Ye.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Ve("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!wg.isValidMaskPattern(t))throw new Tt("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var o=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(o,10);var s=new _n;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new Tt("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Tt("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Tt;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Tt;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Tt;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var o=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var o=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,s=i.length;o!==s;o++){var a=i[o];if(a>=0)for(var c=0;c!==s;c++){var f=i[c];f>=0&&n.isEmpty(t.get(f,a))&&n.embedPositionAdjustmentPattern(f-2,a-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})(),lU=(function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n})(),wA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return Ec.applyMaskPenaltyRule1(e)+Ec.applyMaskPenaltyRule2(e)+Ec.applyMaskPenaltyRule3(e)+Ec.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,o=r!==null&&r.get(id.CHARACTER_SET)!==void 0;o&&(i=r.get(id.CHARACTER_SET).toString());var s=this.chooseMode(e,i),a=new _n;if(s===It.BYTE&&(o||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=un.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,a)}this.appendModeInfo(s,a);var f=new _n;this.appendBytes(e,s,f,i);var h;if(r!==null&&r.get(id.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(id.QR_VERSION).toString(),10);h=ya.getVersionForNumber(p);var v=this.calculateBitsNeeded(s,a,f,h);if(!this.willFit(v,h,t))throw new Tt("Data too big for requested version")}else h=this.recommendVersion(t,s,a,f);var y=new _n;y.appendBitArray(a);var E=s===It.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(E,h,s,y),y.appendBitArray(f);var A=h.getECBlocksForLevel(t),C=h.getTotalCodewords()-A.getTotalECCodewords();this.terminateBits(C,y);var N=this.interleaveWithECBytes(y,h.getTotalCodewords(),C,A.getNumBlocks()),P=new wg;P.setECLevel(t),P.setMode(s),P.setVersion(h);var M=h.getDimensionForVersion(),j=new aU(M,M),H=this.chooseMaskPattern(N,t,h,j);return P.setMaskPattern(H),_A.buildMatrix(N,t,h,H,j),P.setMatrix(j),P},n.recommendVersion=function(e,t,r,i){var o=this.calculateBitsNeeded(t,r,i,ya.getVersionForNumber(1)),s=this.chooseVersion(o,e),a=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(a,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),un.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return It.KANJI;for(var r=!1,i=!1,o=0,s=e.length;o<s;++o){var a=e.charAt(o);if(n.isDigit(a))r=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)i=!0;else return It.BYTE}return i?It.ALPHANUMERIC:r?It.NUMERIC:It.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=$r.encode(e,un.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var o=t[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var o=Number.MAX_SAFE_INTEGER,s=-1,a=0;a<wg.NUM_MASK_PATTERNS;a++){_A.buildMatrix(e,t,r,a,i);var c=this.calculateMaskPenalty(i);c<o&&(o=c,s=a)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=ya.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Tt("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),o=t.getECBlocksForLevel(r),s=o.getTotalECCodewords(),a=i-s,c=(e+7)/8;return a>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Tt("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var o=t.getSize()&7;if(o>0)for(var i=o;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Tt("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,o,s){if(i>=r)throw new Tt("Block ID too large");var a=e%r,c=r-a,f=Math.floor(e/r),h=f+1,p=Math.floor(t/r),v=p+1,y=f-p,E=h-v;if(y!==E)throw new Tt("EC bytes mismatch");if(r!==c+a)throw new Tt("RS blocks mismatch");if(e!==(p+y)*c+(v+E)*a)throw new Tt("Total bytes mismatch");i<c?(o[0]=p,s[0]=y):(o[0]=v,s[0]=E)},n.interleaveWithECBytes=function(e,t,r,i){var o,s,a,c;if(e.getSizeInBytes()!==r)throw new Tt("Number of bits and data bytes does not match");for(var f=0,h=0,p=0,v=new Array,y=0;y<i;++y){var E=new Int32Array(1),A=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,y,E,A);var C=E[0],N=new Uint8Array(C);e.toBytes(8*f,N,0,C);var P=n.generateECBytes(N,A[0]);v.push(new lU(N,P)),h=Math.max(h,C),p=Math.max(p,P.length),f+=E[0]}if(r!==f)throw new Tt("Data bytes does not match offset");for(var M=new _n,y=0;y<h;++y)try{for(var j=(o=void 0,wA(v)),H=j.next();!H.done;H=j.next()){var $=H.value,N=$.getDataBytes();y<N.length&&M.appendBits(N[y],8)}}catch(O){o={error:O}}finally{try{H&&!H.done&&(s=j.return)&&s.call(j)}finally{if(o)throw o.error}}for(var y=0;y<p;++y)try{for(var R=(a=void 0,wA(v)),I=R.next();!I.done;I=R.next()){var $=I.value,P=$.getErrorCorrectionBytes();y<P.length&&M.appendBits(P[y],8)}}catch(O){a={error:O}}finally{try{I&&!I.done&&(c=R.return)&&c.call(R)}finally{if(a)throw a.error}}if(t!==M.getSizeInBytes())throw new Tt("Interleaving error: "+t+" and "+M.getSizeInBytes()+" differ.");return M},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),o=0;o<r;o++)i[o]=e[o]&255;new b3(lr.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),o=0;o<t;o++)s[o]=i[r+o];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var o=r.getCharacterCountBits(t);if(e>=1<<o)throw new Tt(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},n.appendBytes=function(e,t,r,i){switch(t){case It.NUMERIC:n.appendNumericBytes(e,r);break;case It.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case It.BYTE:n.append8BitBytes(e,r,i);break;case It.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Tt("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),a=n.getDigit(e.charAt(i+2));t.appendBits(o*100+s*10+a,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(o*10+s,7),i+=2}else t.appendBits(o,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new Tt;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new Tt;t.appendBits(o*45+s,11),i+=2}else t.appendBits(o,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=$r.encode(e,r)}catch(c){throw new Tt(c)}for(var o=0,s=i.length;o!==s;o++){var a=i[o];t.appendBits(a,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=$r.encode(e,un.SJIS)}catch(p){throw new Tt(p)}for(var i=r.length,o=0;o<i;o+=2){var s=r[o]&255,a=r[o+1]&255,c=s<<8&4294967295|a,f=-1;if(c>=33088&&c<=40956?f=c-33088:c>=57408&&c<=60351&&(f=c-49472),f===-1)throw new Tt("Invalid byte sequence");var h=(f>>8)*192+(f&255);t.appendBits(h,13)}},n.appendECI=function(e,t){t.appendBits(It.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=un.UTF8.getName(),n})();var cU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){cU(e,n);function e(t,r,i,o,s,a,c,f){var h=n.call(this,a,c)||this;if(h.yuvData=t,h.dataWidth=r,h.dataHeight=i,h.left=o,h.top=s,o+a>r||s+c>i)throw new Ve("Crop rectangle does not fit within image data.");return f&&h.reverseHorizontal(a,c),h}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ve("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return wt.arraycopy(this.yuvData,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return wt.arraycopy(this.yuvData,s,o,0,i),o;for(var a=0;a<r;a++){var c=a*t;wt.arraycopy(this.yuvData,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),o=this.yuvData,s=this.top*this.dataWidth+this.left,a=0;a<r;a++){for(var c=a*t,f=0;f<t;f++){var h=o[s+f*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+f]=4278190080|h*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<r;o++,s+=this.dataWidth)for(var a=s+t/2,c=s,f=s+t-1;c<a;c++,f--){var h=i[c];i[c]=i[f],i[f]=h}},e.prototype.invert=function(){return new dy(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Mp);var fU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){fU(e,n);function e(t,r,i,o,s,a,c){var f=n.call(this,r,i)||this;if(f.dataWidth=o,f.dataHeight=s,f.left=a,f.top=c,t.BYTES_PER_ELEMENT===4){for(var h=r*i,p=new Uint8ClampedArray(h),v=0;v<h;v++){var y=t[v],E=y>>16&255,A=y>>7&510,C=y&255;p[v]=(E+A+C)/4&255}f.luminances=p}else f.luminances=t;if(o===void 0&&(f.dataWidth=r),s===void 0&&(f.dataHeight=i),a===void 0&&(f.left=0),c===void 0&&(f.top=0),f.left+r>f.dataWidth||f.top+i>f.dataHeight)throw new Ve("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ve("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return wt.arraycopy(this.luminances,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return wt.arraycopy(this.luminances,s,o,0,i),o;for(var a=0;a<r;a++){var c=a*t;wt.arraycopy(this.luminances,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new dy(this)},e})(Mp);var hU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),dU=(function(n){hU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(un),pU=(function(){function n(){}return n.ISO_8859_1=un.ISO8859_1,n})(),Eg,mU=301,gU=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=mU);return{LOG:n,ALOG:e}};Eg=gU([],[]),Eg.LOG;Eg.ALOG;var EA;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(EA||(EA={}));var AA=129,R3=230,vU=231,yU=235,xU=236,_U=237,wU=238,EU=239,AU=240,nm=254,CU=254,CA="[)>05",TA="[)>06",IA="",mt=0,In=1,Yn=2,sn=3,gn=4,Un=5,TU=(function(){function n(){}return n.prototype.getEncodingMode=function(){return mt},n.prototype.encode=function(e){var t=oi.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=oi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Un:e.writeCodeword(vU),e.signalEncoderChange(Un);return;case In:e.writeCodeword(R3),e.signalEncoderChange(In);return;case sn:e.writeCodeword(wU),e.signalEncoderChange(sn);break;case Yn:e.writeCodeword(EU),e.signalEncoderChange(Yn);break;case gn:e.writeCodeword(AU),e.signalEncoderChange(gn);break;default:throw new Error("Illegal mode: "+i)}else oi.isExtendedASCII(r)?(e.writeCodeword(yU),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(oi.isDigit(e)&&oi.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n})(),IU=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Un},n.prototype.encode=function(e){var t=new qe;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=oi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(mt);break}}var o=t.length()-1,s=1,a=e.getCodewordCount()+o+s;e.updateSymbolInfo(a);var c=e.getSymbolInfo().getDataCapacity()-a>0;if(e.hasMoreCharacters()||c)if(o<=249)t.setCharAt(0,rt.getCharAt(o));else if(o<=1555)t.setCharAt(0,rt.getCharAt(Math.floor(o/250)+249)),t.insert(1,rt.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var f=0,r=t.length();f<r;f++)e.writeCodeword(this.randomize255State(t.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n})(),yy=(function(){function n(){}return n.prototype.getEncodingMode=function(){return In},n.prototype.encodeMaximal=function(e){for(var t=new qe,r=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,o=t.length())}if(o!==t.length()){var a=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(c);var f=e.getSymbolInfo().getDataCapacity()-c,h=Math.floor(t.length()%3);(h===2&&f!==2||h===1&&(r>3||f!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(R3),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new qe;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),o=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var a=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new qe;for(t.length()%3===2&&a!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||a!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var f=t.length();if(f%3===0){var h=oi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(h!==this.getEncodingMode()){e.signalEncoderChange(mt);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var o=t.length(),s=t.toString().substring(0,o-i);t.setLengthToZero(),t.append(s),e.pos--;var a=e.getCurrentChar();return i=this.encodeChar(a,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,o=e.getCodewordCount()+r;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(nm)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(nm),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(nm)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(mt)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,o=new qe;return o.append(r),o.append(i),o.toString()},n})(),SU=(function(){function n(){}return n.prototype.getEncodingMode=function(){return gn},n.prototype.encode=function(e){for(var t=new qe;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var o=t.toString().substring(4);t.setLengthToZero(),t.append(o);var s=oi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(mt);break}}}t.append(rt.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,a=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),f=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length))}f?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(a)}finally{e.signalEncoderChange(mt)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(rt.getCharAt(e-64)):oi.illegalCharacter(rt.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,o=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,a=(r<<18)+(i<<12)+(o<<6)+s,c=a>>16&255,f=a>>8&255,h=a&255,p=new qe;return p.append(c),t>=2&&p.append(f),t>=3&&p.append(h),p.toString()},n})(),bU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),RU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ft=(function(){function n(e,t,r,i,o,s,a,c){a===void 0&&(a=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=a,this.rsBlockError=c}return n.lookup=function(e,t,r,i,o){var s,a;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var c=RU(NU),f=c.next();!f.done;f=c.next()){var h=f.value;if(!(t===1&&h.rectangular)&&!(t===2&&!h.rectangular)&&!(r!=null&&(h.getSymbolWidth()<r.getWidth()||h.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(h.getSymbolWidth()>i.getWidth()||h.getSymbolHeight()>i.getHeight()))&&e<=h.dataCapacity)return h}}catch(p){s={error:p}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n})(),PU=(function(n){bU(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(ft),NU=[new ft(!1,3,5,8,8,1),new ft(!1,5,7,10,10,1),new ft(!0,5,7,16,6,1),new ft(!1,8,10,12,12,1),new ft(!0,10,11,14,6,2),new ft(!1,12,12,14,14,1),new ft(!0,16,14,24,10,1),new ft(!1,18,14,16,16,1),new ft(!1,22,18,18,18,1),new ft(!0,22,18,16,10,2),new ft(!1,30,20,20,20,1),new ft(!0,32,24,16,14,2),new ft(!1,36,24,22,22,1),new ft(!1,44,28,24,24,1),new ft(!0,49,28,22,14,2),new ft(!1,62,36,14,14,4),new ft(!1,86,42,16,16,4),new ft(!1,114,48,18,18,4),new ft(!1,144,56,20,20,4),new ft(!1,174,68,22,22,4),new ft(!1,204,84,24,24,4,102,42),new ft(!1,280,112,14,14,16,140,56),new ft(!1,368,144,16,16,16,92,36),new ft(!1,456,192,18,18,16,114,48),new ft(!1,576,224,20,20,16,144,56),new ft(!1,696,272,22,22,16,174,68),new ft(!1,816,336,24,24,16,136,56),new ft(!1,1050,408,18,18,36,175,68),new ft(!1,1304,496,20,20,36,163,62),new PU],DU=(function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(a){return a.charCodeAt(0)}),r=new qe,i=0,o=t.length;i<o;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new qe,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ft.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n})(),OU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),kU=(function(n){OU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return sn},e.prototype.encode=function(t){for(var r=new qe;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var o=r.length();if(o%3===0){this.writeNextTriplet(t,r);var s=oi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(mt);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):oi.illegalCharacter(rt.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),o=r.length();t.pos-=o,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(CU),t.getNewEncoding()<0&&t.signalEncoderChange(mt)},e})(yy),MU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),LU=(function(n){MU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Yn},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e})(yy),oi=(function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=AA+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,o){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new yy,a=[new TU,s,new LU,new kU,new SU,new IU],c=new DU(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(CA)&&e.endsWith(IA)?(c.writeCodeword(xU),c.setSkipAtEnd(2),c.pos+=CA.length):e.startsWith(TA)&&e.endsWith(IA)&&(c.writeCodeword(_U),c.setSkipAtEnd(2),c.pos+=TA.length);var f=mt;for(o&&(s.encodeMaximal(c),f=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)a[f].encode(c),c.getNewEncoding()>=0&&(f=c.getNewEncoding(),c.resetEncoderSignal());var h=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();h<p&&f!==mt&&f!==Un&&f!==gn&&c.writeCodeword("");var v=c.getCodewords();for(v.length()<p&&v.append(AA);v.length()<p;)v.append(this.randomize253State(v.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===sn&&i===sn){for(var o=Math.min(t+3,e.length),s=t;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return mt}else if(r===gn&&i===gn){for(var o=Math.min(t+4,e.length),s=t;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return mt}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===mt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var o=0,s=new Uint8Array(6),a=[];;){if(t+o===e.length){ln.fill(s,0),ln.fill(a,0);var c=this.findMinimums(i,a,Ye.MAX_VALUE,s),f=this.getMinimumCount(s);if(a[mt]===c)return mt;if(f===1){if(s[Un]>0)return Un;if(s[gn]>0)return gn;if(s[Yn]>0)return Yn;if(s[sn]>0)return sn}return In}var h=e.charCodeAt(t+o);if(o++,this.isDigit(h)?i[mt]+=.5:this.isExtendedASCII(h)?(i[mt]=Math.ceil(i[mt]),i[mt]+=2):(i[mt]=Math.ceil(i[mt]),i[mt]++),this.isNativeC40(h)?i[In]+=2/3:this.isExtendedASCII(h)?i[In]+=8/3:i[In]+=4/3,this.isNativeText(h)?i[Yn]+=2/3:this.isExtendedASCII(h)?i[Yn]+=8/3:i[Yn]+=4/3,this.isNativeX12(h)?i[sn]+=2/3:this.isExtendedASCII(h)?i[sn]+=13/3:i[sn]+=10/3,this.isNativeEDIFACT(h)?i[gn]+=3/4:this.isExtendedASCII(h)?i[gn]+=17/4:i[gn]+=13/4,this.isSpecialB256(h)?i[Un]+=4:i[Un]++,o>=4){if(ln.fill(s,0),ln.fill(a,0),this.findMinimums(i,a,Ye.MAX_VALUE,s),a[mt]<this.min(a[Un],a[In],a[Yn],a[sn],a[gn]))return mt;if(a[Un]<a[mt]||a[Un]+1<this.min(a[In],a[Yn],a[sn],a[gn]))return Un;if(a[gn]+1<this.min(a[Un],a[In],a[Yn],a[sn],a[mt]))return gn;if(a[Yn]+1<this.min(a[Un],a[In],a[gn],a[sn],a[mt]))return Yn;if(a[sn]+1<this.min(a[Un],a[In],a[gn],a[Yn],a[mt]))return sn;if(a[In]+1<this.min(a[mt],a[Un],a[gn],a[Yn])){if(a[In]<a[sn])return In;if(a[In]===a[sn]){for(var p=t+o+1;p<e.length;){var v=e.charCodeAt(p);if(this.isX12TermSep(v))return sn;if(!this.isNativeX12(v))break;p++}return In}}}}},n.min=function(e,t,r,i,o){var s=Math.min(e,Math.min(t,Math.min(r,i)));return o===void 0?s:Math.min(s,o)},n.findMinimums=function(e,t,r,i){for(var o=0;o<6;o++){var s=t[o]=Math.ceil(e[o]);r>s&&(r=s,ln.fill(i,0)),r===s&&(i[o]=i[o]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=Ye.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n})(),rm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SA=(function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return $r.encode(e,this.charset)!=null}catch{return!1}},n})(),VU=(function(){function n(e,t,r){var i,o,s,a,c,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(D){return new SA(dU.forName(D))}),this.encoders=[];var h=[];h.push(new SA(pU.ISO_8859_1));for(var p=t!=null&&t.name.startsWith("UTF"),v=0;v<e.length;v++){var y=!1;try{for(var E=(i=void 0,rm(h)),A=E.next();!A.done;A=E.next()){var C=A.value,N=e.charAt(v),P=N.charCodeAt(0);if(P===r||C.canEncode(N)){y=!0;break}}}catch(D){i={error:D}}finally{try{A&&!A.done&&(o=E.return)&&o.call(E)}finally{if(i)throw i.error}}if(!y)try{for(var M=(s=void 0,rm(this.ENCODERS)),j=M.next();!j.done;j=M.next()){var C=j.value;if(C.canEncode(e.charAt(v))){h.push(C),y=!0;break}}}catch(D){s={error:D}}finally{try{j&&!j.done&&(a=M.return)&&a.call(M)}finally{if(s)throw s.error}}y||(p=!0)}if(h.length===1&&!p)this.encoders=[h[0]];else{this.encoders=[];var H=0;try{for(var $=rm(h),R=$.next();!R.done;R=$.next()){var C=R.value;this.encoders[H++]=C}}catch(D){c={error:D}}finally{try{R&&!R.done&&(f=$.return)&&f.call($)}finally{if(c)throw c.error}}}var I=-1;if(t!=null){for(var v=0;v<this.encoders.length;v++)if(this.encoders[v]!=null&&t.name===this.encoders[v].name){I=v;break}}this.priorityEncoderIndex=I}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return $r.encode(rt.getCharAt(e),this.encoders[t].name)},n})(),FU=3,BU=(function(){function n(e,t,r){this.fnc1=r;var i=new VU(e,t,r);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new qe,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,o,s){var a=e.charAt(i).charCodeAt(0),c=0,f=t.length();t.getPriorityEncoderIndex()>=0&&(a===s||t.canEncode(a,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),f=c+1);for(var h=c;h<f;h++)(a===s||t.canEncode(a,h))&&this.addEdge(r,i+1,new bA(a,t,h,o,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,o=new bA[i+1][t.length()];this.addEdges(e,t,o,0,null,r);for(var s=1;s<=i;s++){for(var a=0;a<t.length();a++)o[s][a]!=null&&s<i&&this.addEdges(e,t,o,s,o[s][a],r);for(var a=0;a<t.length();a++)o[s-1][a]=null}for(var c=-1,f=Ye.MAX_VALUE,a=0;a<t.length();a++)if(o[i][a]!=null){var h=o[i][a];h.cachedTotalSize<f&&(f=h.cachedTotalSize,c=a)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],v=o[i][c];v!=null;){if(v.isFNC1())p.unshift(1e3);else for(var y=t.encode(v.c,v.encoderIndex),s=y.length-1;s>=0;s--)p.unshift(y[s]&255);var E=v.previous===null?0:v.previous.encoderIndex;E!==v.encoderIndex&&p.unshift(256+t.getECIValue(v.encoderIndex)),v=v.previous}for(var A=[],s=0;s<A.length;s++)A[s]=p[s];return A},n})(),bA=(function(){function n(e,t,r,i,o){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,a=i===null?0:i.encoderIndex;a!==r&&(s+=FU),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n})(),UU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();var RA;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(RA||(RA={}));(function(n){UU(e,n);function e(t,r,i,o,s){var a=n.call(this,t,r,i)||this;return a.shape=o,a.macroId=s,a}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(BU);var jU=(function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n})(),PA=(function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n})(),zU=(function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n})(),HU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xy=(function(n){HU(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.value=r,o.bitCount=i,o}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Ye.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(zU),$U=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),WU=(function(n){$U(e,n);function e(t,r,i){var o=n.call(this,t,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(xy);function GU(n,e,t){return new WU(n,e,t)}function dc(n,e,t){return new xy(n,e,t)}var qU=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ms=0,ip=1,zr=2,P3=3,Pi=4,KU=new xy(null,0,0),im=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],XU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function YU(n){var e,t;try{for(var r=XU(n),i=r.next();!i.done;i=r.next()){var o=i.value;ln.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[ms][Pi]=0,n[ip][Pi]=0,n[ip][ms]=28,n[P3][Pi]=0,n[zr][Pi]=0,n[zr][ms]=15,n}var N3=YU(ln.createInt32Array(6,6)),QU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZU=(function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var o=im[this.mode][e];i=dc(i,o&65535,o>>16),r+=o>>16}var s=e===zr?4:5;return i=dc(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===zr?4:5;return r=dc(r,N3[this.mode][e],i),r=dc(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Pi||this.mode===zr){var o=im[r][ms];t=dc(t,o&65535,o>>16),i+=o>>16,r=ms}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,a=new n(t,r,this.binaryShiftByteCount+1,i+s);return a.binaryShiftByteCount===2078&&(a=a.endBinaryShift(e+1)),a},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=GU(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(im[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var s=new _n;try{for(var a=QU(i),c=a.next();!c.done;c=a.next()){var f=c.value;f.appendTo(s,e)}}catch(h){t={error:h}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return rt.format("%s bits=%d bytes=%d",qU[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(KU,ms,0,0),n})();function JU(n){var e=rt.getCharCode(" "),t=rt.getCharCode("."),r=rt.getCharCode(",");n[ms][e]=1;for(var i=rt.getCharCode("Z"),o=rt.getCharCode("A"),s=o;s<=i;s++)n[ms][s]=s-o+2;n[ip][e]=1;for(var a=rt.getCharCode("z"),c=rt.getCharCode("a"),s=c;s<=a;s++)n[ip][s]=s-c+2;n[zr][e]=1;for(var f=rt.getCharCode("9"),h=rt.getCharCode("0"),s=h;s<=f;s++)n[zr][s]=s-h+2;n[zr][r]=12,n[zr][t]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],v=0;v<p.length;v++)n[P3][rt.getCharCode(p[v])]=v;for(var y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],v=0;v<y.length;v++)rt.getCharCode(y[v])>0&&(n[Pi][rt.getCharCode(y[v])]=v);return n}var om=JU(ln.createInt32Array(5,256)),od=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ej=(function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=rt.getCharCode(" "),t=rt.getCharCode(`
`),r=PA.singletonList(ZU.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case rt.getCharCode("\r"):o=s===t?2:0;break;case rt.getCharCode("."):o=s===e?3:0;break;case rt.getCharCode(","):o=s===e?4:0;break;case rt.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(r=n.updateStateListForPair(r,i,o),i++):r=this.updateStateListForChar(r,i)}var a=PA.min(r,function(c,f){return c.getBitCount()-f.getBitCount()});return a.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,o=[];try{for(var s=od(e),a=s.next();!a.done;a=s.next()){var c=a.value;this.updateStateForChar(c,t,o)}}catch(f){r={error:f}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(o)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,o=om[e.getMode()][i]>0,s=null,a=0;a<=Pi;a++){var c=om[a][i];if(c>0){if(s==null&&(s=e.endBinaryShift(t)),!o||a===e.getMode()||a===zr){var f=s.latchAndAppend(a,c);r.push(f)}if(!o&&N3[e.getMode()][a]>=0){var h=s.shiftAndAppend(a,c);r.push(h)}}}if(e.getBinaryShiftByteCount()>0||om[e.getMode()][i]===0){var p=e.addBinaryShiftChar(t);r.push(p)}},n.updateStateListForPair=function(e,t,r){var i,o,s=[];try{for(var a=od(e),c=a.next();!c.done;c=a.next()){var f=c.value;this.updateStateForPair(f,t,r,s)}}catch(h){i={error:h}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var o=e.endBinaryShift(t);if(i.push(o.latchAndAppend(Pi,r)),e.getMode()!==Pi&&i.push(o.shiftAndAppend(Pi,r)),r===3||r===4){var s=o.latchAndAppend(zr,16-r).latchAndAppend(zr,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(a)}},n.simplifyStates=function(e){var t,r,i,o,s=[];try{for(var a=od(e),c=a.next();!c.done;c=a.next()){var f=c.value,h=!0,p=function(C){if(C.isBetterThanOrEqualTo(f))return h=!1,"break";f.isBetterThanOrEqualTo(C)&&(s=s.filter(function(N){return N!==C}))};try{for(var v=(i=void 0,od(s)),y=v.next();!y.done;y=v.next()){var E=y.value,A=p(E);if(A==="break")break}}catch(C){i={error:C}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}h&&s.push(f)}}catch(C){t={error:C}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s},n})(),tj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new ej(e).encode(),o=Ye.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+o,a,c,f,h,p;if(r!==n.DEFAULT_AZTEC_LAYERS){if(a=r<0,c=Math.abs(r),c>(a?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Ve(rt.format("Illegal value %s for layers",r));f=n.totalBitsInLayer(c,a),h=n.WORD_SIZE[c];var v=f-f%h;if(p=n.stuffBits(i,h),p.getSize()+o>v)throw new Ve("Data to large for user specified layer");if(a&&p.getSize()>h*64)throw new Ve("Data to large for user specified layer")}else{h=0,p=null;for(var y=0;;y++){if(y>n.MAX_NB_BITS)throw new Ve("Data too large for an Aztec code");if(a=y<=3,c=a?y+1:y,f=n.totalBitsInLayer(c,a),!(s>f)){(p==null||h!==n.WORD_SIZE[c])&&(h=n.WORD_SIZE[c],p=n.stuffBits(i,h));var v=f-f%h;if(!(a&&p.getSize()>h*64)&&p.getSize()+o<=v)break}}}var E=n.generateCheckWords(p,f,h),A=p.getSize()/h,C=n.generateModeMessage(a,c,A),N=(a?11:14)+c*4,P=new Int32Array(N),M;if(a){M=N;for(var y=0;y<P.length;y++)P[y]=y}else{M=N+1+2*Ye.truncDivision(Ye.truncDivision(N,2)-1,15);for(var j=Ye.truncDivision(N,2),H=Ye.truncDivision(M,2),y=0;y<j;y++){var $=y+Ye.truncDivision(y,15);P[j-y-1]=H-$-1,P[j+y]=H+$+1}}for(var R=new ji(M),y=0,I=0;y<c;y++){for(var D=(c-y)*4+(a?9:12),O=0;O<D;O++)for(var F=O*2,B=0;B<2;B++)E.get(I+F+B)&&R.set(P[y*2+B],P[y*2+O]),E.get(I+D*2+F+B)&&R.set(P[y*2+O],P[N-1-y*2-B]),E.get(I+D*4+F+B)&&R.set(P[N-1-y*2-B],P[N-1-y*2-O]),E.get(I+D*6+F+B)&&R.set(P[N-1-y*2-O],P[y*2+B]);I+=D*8}if(n.drawModeMessage(R,a,M,C),a)n.drawBullsEye(R,Ye.truncDivision(M,2),5);else{n.drawBullsEye(R,Ye.truncDivision(M,2),7);for(var y=0,O=0;y<Ye.truncDivision(N,2)-1;y+=15,O+=16)for(var B=Ye.truncDivision(M,2)&1;B<M;B+=2)R.set(Ye.truncDivision(M,2)-O,B),R.set(Ye.truncDivision(M,2)+O,B),R.set(B,Ye.truncDivision(M,2)-O),R.set(B,Ye.truncDivision(M,2)+O)}var L=new jU;return L.setCompact(a),L.setSize(M),L.setLayers(c),L.setCodeWords(A),L.setMatrix(R),L},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var o=t-i;o<=t+i;o++)e.set(o,t-i),e.set(o,t+i),e.set(t-i,o),e.set(t+i,o);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new _n;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var o=Ye.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var a=o-3+s;i.get(s)&&e.set(a,o-5),i.get(s+7)&&e.set(o+5,a),i.get(20-s)&&e.set(a,o+5),i.get(27-s)&&e.set(o-5,a)}else for(var s=0;s<10;s++){var a=o-5+s+Ye.truncDivision(s,5);i.get(s)&&e.set(a,o-7),i.get(s+10)&&e.set(o+7,a),i.get(29-s)&&e.set(a,o+7),i.get(39-s)&&e.set(o-7,a)}},n.generateCheckWords=function(e,t,r){var i,o,s=e.getSize()/r,a=new b3(n.getGF(r)),c=Ye.truncDivision(t,r),f=n.bitsToWords(e,r,c);a.encode(f,c-s);var h=t%r,p=new _n;p.appendBits(0,h);try{for(var v=tj(Array.from(f)),y=v.next();!y.done;y=v.next()){var E=y.value;p.appendBits(E,r)}}catch(A){i={error:A}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}return p},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),o,s;for(o=0,s=e.getSize()/t;o<s;o++){for(var a=0,c=0;c<t;c++)a|=e.get(o*t+c)?1<<t-c-1:0;i[o]=a}return i},n.getGF=function(e){switch(e){case 4:return lr.AZTEC_PARAM;case 6:return lr.AZTEC_DATA_6;case 8:return lr.AZTEC_DATA_8;case 10:return lr.AZTEC_DATA_10;case 12:return lr.AZTEC_DATA_12;default:throw new Ve("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new _n,i=e.getSize(),o=(1<<t)-2,s=0;s<i;s+=t){for(var a=0,c=0;c<t;c++)(s+c>=i||e.get(s+c))&&(a|=1<<t-1-c);(a&o)===o?(r.appendBits(a&o,t),s--):(a&o)===0?(r.appendBits(a|1,t),s--):r.appendBits(a,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var nj={audio:!1,video:{facingMode:"environment"}},rj=300,ij=function(n){var e=n===void 0?{}:n,t=e.timeBetweenDecodingAttempts,r=t===void 0?rj:t,i=e.hints;return U.useMemo(function(){var o=new rU(i);return o.timeBetweenDecodingAttempts=r,o},[i,r])},NA=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{f(r.next(h))}catch(p){s(p)}}function c(h){try{f(r.throw(h))}catch(p){s(p)}}function f(h){h.done?o(h.value):i(h.value).then(a,c)}f((r=r.apply(n,e||[])).next())})},DA=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(h){return c([f,h])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(h){f=[6,h],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},oj=function(n){var e=n.resetStream,t=U.useState(!1),r=t[0],i=t[1],o=U.useState(null),s=o[0],a=o[1],c=U.useRef(null),f=U.useRef(e),h=U.useCallback(function(y){c.current=y,a(typeof y.getCapabilities=="function"?y.getCapabilities().torch!==void 0:!1)},[]),p=U.useCallback(function(){return NA(void 0,void 0,void 0,function(){return DA(this,function(y){switch(y.label){case 0:return!c.current||!s?[2]:[4,c.current.applyConstraints({advanced:[{torch:!0}]})];case 1:return y.sent(),i(!0),[2]}})})},[s]),v=U.useCallback(function(){return NA(void 0,void 0,void 0,function(){return DA(this,function(y){switch(y.label){case 0:return!c.current||!s?[2]:(c.current=null,a(null),i(!1),[4,f.current()]);case 1:return y.sent(),[2]}})})},[s]);return U.useEffect(function(){f.current=e},[e]),{init:h,isOn:r,isAvailable:s,on:p,off:v}},sj=function(n,e){return JSON.stringify(n)===JSON.stringify(e)},OA=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{f(r.next(h))}catch(p){s(p)}}function c(h){try{f(r.throw(h))}catch(p){s(p)}}function f(h){h.done?o(h.value):i(h.value).then(a,c)}f((r=r.apply(n,e||[])).next())})},kA=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(h){return c([f,h])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(h){f=[6,h],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},aj=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},uj=function(n){n===void 0&&(n={});var e=n.paused,t=e===void 0?!1:e,r=n.hints,i=n.timeBetweenDecodingAttempts,o=n.onDecodeResult,s=o===void 0?function(){}:o,a=n.onDecodeError,c=a===void 0?function(){}:a,f=n.onError,h=f===void 0?function(){}:f,p="deviceId"in n?n.deviceId:void 0,v=U.useState("constraints"in n?n.constraints:void 0),y=v[0],E=v[1],A=U.useRef(s),C=U.useRef(c),N=U.useRef(h),P=U.useRef(null),M=ij({hints:r,timeBetweenDecodingAttempts:i}),j=oj({resetStream:function(){return OA(void 0,void 0,void 0,function(){return kA(this,function(O){switch(O.label){case 0:return D(),[4,I()];case 1:return O.sent(),[2]}})})}}),H=j.init,$=aj(j,["init"]),R=U.useCallback(function(O,F){O&&A.current(O),F&&C.current(F)},[]),I=U.useCallback(function(){return OA(void 0,void 0,void 0,function(){var O,F,B;return kA(this,function(L){switch(L.label){case 0:if(!P.current)return[2];if(t)return[2];L.label=1;case 1:return L.trys.push([1,6,,7]),p?[4,M.decodeFromVideoDevice(p,P.current,R)]:[3,3];case 2:return L.sent(),[3,5];case 3:return[4,M.decodeFromConstraints(y??nj,P.current,R)];case 4:L.sent(),L.label=5;case 5:return[3,7];case 6:return O=L.sent(),N.current(O),[2];case 7:return P.current?(F=P.current.srcObject,B=F.getVideoTracks()[0],B&&H(B),[2]):[2]}})})},[M,p,y,t,R,H]),D=U.useCallback(function(){M.reset()},[M]);return U.useEffect(function(){A.current=s},[s]),U.useEffect(function(){C.current=c},[c]),U.useEffect(function(){N.current=h},[h]),U.useEffect(function(){var O=sj(y,n.constraints);O||E(n.constraints)},[y,n]),U.useEffect(function(){return I(),function(){D()}},[I,D]),{ref:P,torch:$}};const lj=({user:n})=>{const e=n?.uid,{toast:t}=kp(),[r,i]=U.useState(0),[o,s]=U.useState(!1),[a,c]=U.useState(""),[f,h]=U.useState(!1),[p,v]=U.useState([]),[y,E]=U.useState(null),[A,C]=U.useState(!1),[N,P]=U.useState([]),[M,j]=U.useState([]),[H,$]=U.useState(null);U.useEffect(()=>{if(!e)return;const O=g3(e,F=>i(Number(F?.balance||0)));return()=>O&&O()},[e]),U.useEffect(()=>{if(!e)return;const O=fV(e,F=>v(F));return()=>O&&O()},[e]),U.useEffect(()=>{if(!e)return;const O=hV(e,F=>P(F));return()=>O&&O()},[e]),U.useEffect(()=>{if(!e)return;const O=dV(e,F=>j(F));return()=>O&&O()},[e]),U.useEffect(()=>{if(!!y||!!H){const F=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=F||""}}},[y,H]);const R=U.useMemo(()=>{const O=(p||[]).map(te=>({id:`in_${te.id}`,type:"in",amount:Number(te.amount||0),label:`Canje de cdigo ${te.code}`,at:te.redeemedAt?.toDate?te.redeemedAt.toDate():te.redeemedAt instanceof Date?te.redeemedAt:null,kind:"redemption"})),F=(N||[]).map(te=>({id:`out_${te.id}`,type:"out",amount:Number(te.total||(te.price||0)*(te.quantity||1)),label:`Compra: ${te.name||te.productId}`,at:te.purchasedAt?.toDate?te.purchasedAt.toDate():te.purchasedAt instanceof Date?te.purchasedAt:null,kind:"purchase",purchase:te})),B=(M||[]).map(te=>({id:`grant_${te.id}`,type:"in",amount:Number(te.amount||0),label:te.note?`Asignacin admin: ${te.note}`:"Asignacin de puntos (admin)",at:te.grantedAt?.toDate?te.grantedAt.toDate():te.grantedAt instanceof Date?te.grantedAt:null,kind:"grant"})),L=[...O,...B,...F];return L.sort((te,be)=>(be.at?.getTime?.()||0)-(te.at?.getTime?.()||0)),L},[p,N]),I=async O=>{const F=(O??a).trim();if(F){C(!0);try{const B=await mV(F),L=new Date,te=B.expiresAt?B.expiresAt<L:!1;E({...B,expired:te})}catch(B){t({title:"Cdigo invlido",description:B?.message||"No se pudo validar el cdigo",variant:"destructive"})}finally{C(!1)}}},{ref:D}=uj({onDecodeResult(O){h(!1);const F=O.getText();I(F)},paused:!f});return S.jsxs("div",{className:"rounded-2xl glass-effect p-6 w-full",children:[S.jsxs("div",{className:"flex items-end justify-between flex-wrap gap-3",children:[S.jsx("h2",{className:"font-black text-[60px] leading-[60px]",children:S.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-boreal-aqua to-boreal-blue",children:"Mis puntos"})}),S.jsx("div",{className:"text-6xl font-black text-boreal-aqua leading-none",children:r})]}),S.jsx("p",{className:"text-gray-300 mt-2",children:"Puedes ganar puntos asistiendo a eventos o participando en dinmicas de la comunidad."}),S.jsx("h3",{className:"mt-8 text-xl font-semibold",children:"Canjear puntos"}),S.jsxs("div",{className:"mt-3 grid gap-4 md:grid-cols-2",children:[S.jsxs("div",{className:"space-y-3",children:[S.jsx("label",{className:"text-sm text-gray-300",children:"Canjear con cdigo"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx(Er,{placeholder:"Ingresa tu cdigo",value:a,onChange:O=>c(O.target.value),className:"bg-white/5 border-white/20 text-white"}),S.jsxs(Gt,{onClick:()=>I(),disabled:A||!a.trim(),children:[A?S.jsx(tf,{className:"w-4 h-4 animate-spin"}):S.jsx(Ad,{className:"w-4 h-4"}),S.jsx("span",{className:"ml-2",children:"Verificar"})]})]})]}),S.jsxs("div",{className:"space-y-3",children:[S.jsx("label",{className:"text-sm text-gray-300",children:"Canjear escaneando QR"}),S.jsx("div",{className:"relative rounded-xl overflow-hidden border border-white/10 min-h-[220px] flex items-center justify-center",children:f?S.jsx("video",{ref:D,className:"w-full h-full object-cover"}):S.jsxs("div",{className:"p-8 text-center text-gray-300",children:[S.jsx(fL,{className:"w-10 h-10 mx-auto mb-3 text-boreal-aqua"}),S.jsx("p",{children:"Activa la cmara para escanear un cdigo QR"}),S.jsx(Gt,{variant:"outline",className:"mt-3 border-white/30 text-white hover:bg-white/10",onClick:()=>h(!0),children:"Usar cmara"})]})}),f&&S.jsx(Gt,{variant:"ghost",className:"text-gray-300",onClick:()=>h(!1),children:"Detener cmara"})]})]}),S.jsx("div",{className:"my-8 h-px bg-white/10"}),S.jsxs("div",{className:"mt-8",children:[S.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Movimientos"}),R?.length?S.jsx("ul",{className:"divide-y divide-white/10 rounded-xl border border-white/10 overflow-hidden",children:R.map(O=>{const F=O.kind==="purchase"&&O.purchase;return S.jsxs("li",{className:"flex items-center justify-between px-4 py-3 bg-white/5",children:[S.jsxs("div",{children:[S.jsx("div",{className:"text-sm text-gray-300",children:O.label}),S.jsx("div",{className:"text-xs text-gray-400",children:O.at?O.at.toLocaleString():""}),F&&S.jsx("button",{className:"mt-1 text-xs text-boreal-aqua hover:underline",onClick:()=>{const B=O.purchase||{},L=cj({id:B.receiptId||B.id,name:B.name||B.productId||"Artculo",quantity:Number(B.quantity||1),total:Number(B.total||(B.price||0)*(B.quantity||1)),price:Number(B.price||0)}),te=fj(L);$({id:B.receiptId||B.id,name:B.name||B.productId||"Artculo",quantity:Number(B.quantity||1),total:Number(B.total||(B.price||0)*(B.quantity||1)),price:Number(B.price||0),imageUrl:B.imageUrl||"",qrUrl:te})},children:"Ver comprobante"})]}),S.jsxs("div",{className:O.type==="in"?"text-boreal-aqua font-bold":"text-red-400 font-bold",children:[O.type==="in"?"+":"-",O.amount]})]},O.id)})}):S.jsx("p",{className:"text-sm text-gray-400",children:"An no tienes movimientos."})]}),y&&Ia.createPortal(S.jsxs("div",{className:"fixed inset-0 z-50",children:[S.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>E(null)}),S.jsx("div",{className:"relative z-10 overflow-y-auto overscroll-y-contain",children:S.jsx("div",{className:"min-h-screen flex items-center justify-center p-3 md:p-6",children:S.jsxs("div",{className:"glass-effect rounded-2xl p-6 w-[min(92vw,420px)] max-h-[85vh] overflow-y-auto",children:[S.jsx("h4",{className:"text-xl font-semibold mb-1",children:"Confirmar canje"}),S.jsxs("p",{className:"text-sm text-gray-300 mb-4",children:["Vas a canjear el cdigo ",S.jsx("span",{className:"font-mono",children:y.id}),"."]}),S.jsxs("div",{className:"space-y-2 text-sm",children:[S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-gray-400",children:"Monto"}),S.jsxs("span",{className:"font-medium",children:[y.amount," puntos"]})]}),S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-gray-400",children:"Estado"}),S.jsx("span",{className:"font-medium",children:y.used?"Usado":y.active===!1?"Inactivo":"Disponible"})]}),"multiUse"in y&&S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-gray-400",children:"Tipo"}),S.jsx("span",{className:"font-medium",children:y.multiUse?"Multi-uso (un uso por persona)":"Uso nico"})]}),y.expiresAt&&S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-gray-400",children:"Expira"}),S.jsx("span",{className:"font-medium",children:y.expiresAt.toLocaleString()})]}),y.expired&&S.jsx("div",{className:"text-red-400",children:"Este cdigo ya expir."})]}),S.jsxs("div",{className:"mt-5 flex gap-2 justify-end",children:[S.jsx(Gt,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:()=>E(null),children:"Cancelar"}),S.jsxs(Gt,{onClick:async()=>{s(!0);try{const O=await gV(e,y.id,n?.email||null);t({title:"Canje exitoso",description:`Se aadieron ${O.amount} puntos a tu saldo.`}),c(""),E(null)}catch(O){t({title:"No se pudo canjear",description:O?.message||"Error desconocido",variant:"destructive"})}finally{s(!1)}},disabled:o||y.used||y.active===!1||y.expired,children:[o?S.jsx(tf,{className:"w-4 h-4 animate-spin"}):S.jsx(Ad,{className:"w-4 h-4"}),S.jsx("span",{className:"ml-2",children:"Confirmar canje"})]})]})]})})})]}),document.body),H&&Ia.createPortal(S.jsxs("div",{className:"fixed inset-0 z-50",children:[S.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>$(null)}),S.jsx("div",{className:"relative z-10 overflow-y-auto overscroll-y-contain",children:S.jsx("div",{className:"min-h-screen flex items-center justify-center p-3 md:p-6",children:S.jsxs("div",{className:"glass-effect rounded-2xl w-full max-w-[560px] max-h-[85vh] overflow-y-auto p-6 md:p-8 text-center",children:[S.jsx(Ad,{className:"w-14 h-14 text-boreal-aqua mx-auto mb-3"}),S.jsx("h4",{className:"text-2xl font-semibold mb-1",children:"Comprobante de compra"}),S.jsxs("p",{className:"text-gray-300",children:["Compra de ",S.jsx("span",{className:"font-medium",children:H.quantity})," x ",S.jsx("span",{className:"font-medium",children:H.name}),"."]}),S.jsxs("p",{className:"text-gray-300 mt-1",children:["Total: ",S.jsxs("span",{className:"font-semibold",children:[H.total," pts"]})]}),S.jsx("p",{className:"text-gray-300 mt-3 text-sm",children:"Para retirar tu artculo, presntate en horario de oficina y muestra el cdigo QR o el ID de compra."}),S.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 items-center",children:[H.imageUrl?S.jsx("div",{className:"w-full aspect-square rounded-xl overflow-hidden bg-white/5",children:S.jsx("img",{src:H.imageUrl,alt:H.name,className:"w-full h-full object-cover"})}):null,S.jsxs("div",{className:"flex flex-col items-center justify-center",children:[S.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"ID de compra"}),S.jsx("div",{className:"font-mono text-lg tracking-widest",children:H.id}),H.qrUrl&&S.jsx("img",{src:H.qrUrl,alt:"QR de compra",className:"mt-3 w-40 h-40 mx-auto"})]})]}),S.jsxs("div",{className:"mt-5 flex flex-col md:flex-row flex-wrap gap-2 justify-center",children:[S.jsx(Gt,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:()=>$(null),children:"Cerrar"}),S.jsx(Gt,{variant:"outline",className:"border-green-400 text-green-300 hover:bg-green-500/10",onClick:()=>window.open("https://wa.me/50576796164","_blank","noopener,noreferrer"),children:"Contactar por WhatsApp"})]})]})})})]}),document.body)]})};function cj({id:n,name:e,quantity:t,total:r,price:i}){return`ID:${n}
NAME:${e}
QTY:${t}
PRICE:${i}
TOTAL:${r}`}function fj(n){return`https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=${encodeURIComponent(n)}`}function hj(n,{includeInactive:e=!1}={}){const t=fr(yt,"productos"),r=Ui(t,Dp("name"));return Cs(r,i=>{let o=[];i.forEach(s=>o.push({id:s.id,...s.data()})),e||(o=o.filter(s=>s.active!==!1)),n(o)})}async function dj({name:n,price:e,stock:t=0,imageUrl:r="",active:i=!0,description:o="",tags:s=[]}){if(!n||!e)throw new Error("Nombre y precio son obligatorios");const a=fr(yt,"productos"),c={name:n,price:Number(e),stock:Number(t||0),imageUrl:r||"",active:i!==!1,description:o||"",tags:Array.isArray(s)?s:[],createdAt:ur()};return{id:(await H7(a,c)).id,...c}}async function pj(n,e){if(!n)throw new Error("Producto invlido");const t=Jn(yt,"productos",n),r={},i=["name","price","stock","imageUrl","description","tags","active"];for(const o of i)o in e&&e[o]!==void 0&&(o==="price"||o==="stock"?r[o]=Number(e[o]):o==="tags"?r[o]=Array.isArray(e[o])?e[o]:[]:r[o]=e[o]);await j7(t,r)}async function mj(n){if(!n)throw new Error("Producto invlido");const e=Jn(yt,"productos",n);await z7(e)}async function gj(n,e,t=1,r,i){if(!n)throw new Error("Usuario no autenticado");if(!e)throw new Error("Producto invlido");const o=Math.max(1,Number(t||1)),s=Jn(yt,"productos",e),a=Jn(yt,"userPoints",n),c=fr(yt,"userPoints",n,"purchases");return cy(yt,async f=>{const[h,p]=await Promise.all([f.get(s),f.get(a)]);if(!h.exists())throw new Error("Producto no encontrado");const v=h.data();if(v.active===!1)throw new Error("Producto inactivo");const y=Number(v.stock||0),E=Number(v.price||0);if(!E||E<0)throw new Error("Precio invlido");if(y<o)throw new Error("Stock insuficiente");const A=E*o,C=Number((p.exists()?p.data().balance:0)||0);if(C<A)throw new Error("No tienes puntos suficientes");f.update(s,{stock:y-o,lastPurchasedAt:ur()});const N=(r||"").toLowerCase()||null;p.exists()?f.update(a,{balance:tp(-A),updatedAt:ur(),email:N}):f.set(a,{balance:C-A,updatedAt:ur(),email:N});const P=i?Jn(c,String(i)):Jn(c);return f.set(P,{receiptId:i||P.id,productId:e,name:v.name,price:E,quantity:o,total:A,imageUrl:v.imageUrl||"",purchasedAt:ur(),userEmail:r||null}),{total:A,receiptId:i||P.id}})}function vj(n,e){if(!n)return e(!1),()=>{};const t=String(n).toLowerCase(),r=fr(yt,"isAdmin"),i=Ui(r,Yu("email","==",t),Ca(1));return Cs(i,s=>{if(!s.empty){const h=(s.docs[0].data()||{}).active!==!1;e(h);return}const a=Jn(yt,"isAdmin",t),c=Cs(a,f=>{if(!f.exists())e(!1);else{const p=(f.data()||{}).active!==!1;e(p)}},()=>e(!1));return()=>c()},()=>e(!1))}const yj=({product:n,onBuy:e,disabled:t,adminMode:r=!1,onEdit:i,onDelete:o})=>{const{name:s,price:a,stock:c,imageUrl:f,description:h}=n;return S.jsxs("div",{className:"rounded-2xl glass-effect p-4 flex flex-col",children:[S.jsx("div",{className:"w-full rounded-xl overflow-hidden mb-3 aspect-square bg-white/5",children:f?S.jsx("img",{src:f,alt:s,className:"w-full h-full object-cover"}):null}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h4",{className:"text-lg font-semibold",children:s}),S.jsx("p",{className:"text-sm text-gray-300 line-clamp-4",children:h||""})]}),Array.isArray(n.tags)&&n.tags.length>0&&S.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:n.tags.map(p=>S.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-white/10 border border-white/10 text-gray-200",children:p},p))}),S.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[S.jsxs("div",{className:"text-boreal-aqua font-bold",children:[a," pts"]}),S.jsxs("div",{className:"text-xs text-gray-400",children:["Stock: ",Number(c??0)]})]}),S.jsx(Gt,{className:"mt-3",onClick:e,disabled:t||Number(c??0)<=0,children:"Canjear"}),r&&S.jsxs("div",{className:"mt-2 flex gap-2",children:[S.jsx(Gt,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:i,children:"Editar"}),S.jsx(Gt,{variant:"destructive",onClick:o,children:"Eliminar"})]})]})},xj=({user:n,onViewMovements:e})=>{const t=n?.uid,{toast:r}=kp(),[i,o]=U.useState([]),[s,a]=U.useState(0),[c,f]=U.useState(null),[h,p]=U.useState(!1),[v,y]=U.useState(!1),[E,A]=U.useState("products"),[C,N]=U.useState({name:"",price:"",stock:"",imageUrl:"",description:"",tags:"",active:!0}),[P,M]=U.useState(null),[j,H]=U.useState(""),[$,R]=U.useState([]),[I,D]=U.useState(null),[O,F]=U.useState(1),[B,L]=U.useState(!1),[te,be]=U.useState(null),[Oe,xe]=U.useState({email:"",points:"",note:""}),[Z,me]=U.useState(!1);U.useEffect(()=>{const ie=hj(o);return()=>ie&&ie()},[]),U.useEffect(()=>{if(!!I||!!te){const Re=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=Re||""}}},[I,te]),U.useEffect(()=>{if(!t)return;const ie=g3(t,Re=>a(Number(Re?.balance||0)));return()=>ie&&ie()},[t]),U.useEffect(()=>{if(!n?.email)return;const ie=vj(n.email,p);return()=>ie&&ie()},[n?.email]),U.useEffect(()=>{h?(y(!0),A("points")):y(!1)},[h]);const de=ie=>{D(ie),F(1)},q=async()=>{if(!I)return;const ie=Math.max(1,Number(O||1));L(!0);try{const Re=oe(),et=await gj(t,I.id,ie,n?.email||null,Re);r({title:"Compra realizada",description:`Se descontaron ${et.total} puntos.`});const bt=_e({id:et.receiptId,name:I.name,quantity:ie,total:et.total,price:Number(I.price||0)}),Lt=Ie(bt);be({id:et.receiptId,name:I.name,quantity:ie,total:et.total,imageUrl:I.imageUrl||"",qrUrl:Lt}),D(null)}catch(Re){r({title:"No se pudo comprar",description:Re?.message||"Error desconocido",variant:"destructive"})}finally{L(!1)}};function oe(){return Math.random().toString(36).slice(2,10).toUpperCase()}function _e({id:ie,name:Re,quantity:et,total:bt,price:Lt}){return`ID:${ie}
NAME:${Re}
QTY:${et}
PRICE:${Lt}
TOTAL:${bt}`}function Ie(ie){return`https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=${encodeURIComponent(ie)}`}const $e=async ie=>{ie.preventDefault();try{const Re=C.tags.split(",").map(et=>et.trim()).filter(Boolean);P?(await pj(P,{name:C.name.trim(),price:Number(C.price),stock:Number(C.stock||0),imageUrl:C.imageUrl.trim(),description:C.description.trim(),tags:Re,active:!!C.active}),r({title:"Producto actualizado"})):(await dj({name:C.name.trim(),price:Number(C.price),stock:Number(C.stock||0),imageUrl:C.imageUrl.trim(),description:C.description.trim(),tags:Re,active:!!C.active}),r({title:"Producto agregado"})),N({name:"",price:"",stock:"",imageUrl:"",description:"",tags:"",active:!0}),M(null)}catch(Re){r({title:"No se pudo agregar",description:Re?.message||"Error desconocido",variant:"destructive"})}},We=U.useMemo(()=>{const ie=new Set;return i.forEach(Re=>(Array.isArray(Re.tags)?Re.tags:[]).forEach(et=>ie.add(et))),Array.from(ie).sort((Re,et)=>Re.localeCompare(et))},[i]),ke=U.useMemo(()=>{const ie=j.trim().toLowerCase();return i.filter(Re=>{const et=!ie||Re.name?.toLowerCase().includes(ie)||Re.description?.toLowerCase().includes(ie)||Array.isArray(Re.tags)&&Re.tags.some(Lt=>Lt.toLowerCase().includes(ie)),bt=!$.length||Array.isArray(Re.tags)&&Re.tags.some(Lt=>$.includes(Lt));return et&&bt})},[i,j,$]),Ke=(i?.length||0)>20;return S.jsxs("div",{className:"w-full",children:[S.jsxs("div",{className:"mb-2 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5",children:[S.jsx("h2",{className:"font-black tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-boreal-aqua to-boreal-purple text-[40px] leading-[44px] sm:text-[60px] sm:leading-[60px] break-words",children:"Marketplace"}),S.jsxs("div",{className:"text-sm text-gray-300 sm:text-right",children:["Saldo: ",S.jsx("span",{className:"text-boreal-aqua font-bold",children:s})," pts"]})]}),S.jsx("p",{className:"text-gray-300 mb-8",children:"Canjea tus puntos por productos y beneficios de la comunidad."}),S.jsxs("div",{className:"mb-6 flex flex-col items-center gap-5",children:[Ke&&S.jsx("div",{className:"w-full flex justify-center",children:S.jsx(Er,{placeholder:"Buscar por nombre, descripcin o etiqueta",value:j,onChange:ie=>H(ie.target.value),className:"w-full max-w-2xl h-12 rounded-full bg-white/5 border border-boreal-aqua/40 focus-visible:ring-0 focus-visible:border-boreal-aqua text-white placeholder:text-gray-400 px-5 text-base"})}),!!We.length&&S.jsx("div",{className:"w-full",children:S.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[S.jsx("button",{onClick:()=>R([]),className:`px-5 py-2 text-sm rounded-full border transition ${$.length===0?"bg-gradient-to-r from-boreal-purple to-boreal-blue text-white border-transparent shadow":"bg-transparent text-gray-200 border-boreal-aqua/50 hover:border-boreal-aqua"}`,children:"Todos"}),We.map(ie=>{const Re=$.includes(ie);return S.jsxs("button",{onClick:()=>R(et=>Re?et.filter(bt=>bt!==ie):[...et,ie]),className:`px-5 py-2 text-sm rounded-full border transition ${Re?"bg-gradient-to-r from-boreal-purple to-boreal-blue text-white border-transparent shadow":"bg-transparent text-gray-200 border-boreal-aqua/50 hover:border-boreal-aqua"}`,children:["#",ie]},ie)}),$.length>0&&S.jsx("button",{onClick:()=>R([]),className:"ml-2 px-5 py-2 text-sm rounded-full border text-gray-200 border-boreal-aqua/40 hover:border-boreal-aqua",children:"Limpiar"})]})})]}),S.jsx("div",{className:"mt-8",children:ke.length?S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:S.jsx(Uc,{initial:!1,children:ke.map(ie=>S.jsx(Pn.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},children:S.jsx(yj,{product:ie,onBuy:()=>de(ie),disabled:c===ie.id,adminMode:v,onEdit:()=>{y(!0),M(ie.id),N({name:ie.name||"",price:String(ie.price??""),stock:String(ie.stock??""),imageUrl:ie.imageUrl||"",description:ie.description||"",tags:Array.isArray(ie.tags)?ie.tags.join(", "):"",active:ie.active!==!1})},onDelete:async()=>{if(window.confirm("Eliminar este producto?"))try{await mj(ie.id),r({title:"Producto eliminado"})}catch(Re){r({title:"No se pudo eliminar",description:Re?.message||"Error desconocido",variant:"destructive"})}}})},ie.id))})}):S.jsxs("div",{className:"rounded-2xl glass-effect p-8 text-center text-gray-300",children:[S.jsx("p",{className:"text-lg font-semibold text-white",children:"No hay artculos disponibles"}),S.jsx("p",{className:"mt-1",children:"Por el momento no hay productos publicados, pero pronto habr novedades. Vuelve ms tarde."})]})}),S.jsxs("div",{className:"mt-10",children:[h&&S.jsx("div",{className:"mb-3 flex items-center justify-between",children:S.jsxs("div",{className:"inline-flex rounded-lg border border-white/10 p-1 bg-white/5",children:[S.jsx("button",{className:`px-3 py-1.5 rounded-md text-sm ${v?"text-white hover:bg-white/10":"bg-boreal-aqua text-boreal-dark"}`,onClick:()=>y(!1),children:"Usuario"}),S.jsx("button",{className:`px-3 py-1.5 rounded-md text-sm ${v?"bg-boreal-aqua text-boreal-dark":"text-white hover:bg-white/10"}`,onClick:()=>y(!0),children:"Admin"})]})}),h&&v&&S.jsxs("div",{className:"rounded-2xl glass-effect p-4",children:[S.jsxs("div",{className:"mb-4 inline-flex rounded-lg border border-white/10 p-1 bg-white/5",children:[S.jsx("button",{className:`px-3 py-1.5 rounded-md text-sm ${E==="products"?"bg-boreal-aqua text-boreal-dark":"text-white hover:bg-white/10"}`,onClick:()=>A("products"),children:"Productos"}),S.jsx("button",{className:`px-3 py-1.5 rounded-md text-sm ${E==="points"?"bg-boreal-aqua text-boreal-dark":"text-white hover:bg-white/10"}`,onClick:()=>A("points"),children:"Puntos"})]}),E==="products"&&S.jsxs("form",{onSubmit:$e,className:"grid grid-cols-1 md:grid-cols-6 gap-3",children:[S.jsxs("div",{className:"md:col-span-3",children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Nombre"}),S.jsx(Er,{value:C.name,onChange:ie=>N({...C,name:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Precio (pts)"}),S.jsx(Er,{type:"number",min:"0",value:C.price,onChange:ie=>N({...C,price:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Stock"}),S.jsx(Er,{type:"number",min:"0",value:C.stock,onChange:ie=>N({...C,stock:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsxs("div",{className:"md:col-span-2",children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Imagen URL"}),S.jsx(Er,{value:C.imageUrl,onChange:ie=>N({...C,imageUrl:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsxs("div",{className:"md:col-span-2",children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Etiquetas (coma separadas)"}),S.jsx(Er,{value:C.tags,onChange:ie=>N({...C,tags:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsxs("div",{className:"md:col-span-4",children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Descripcin"}),S.jsx(Er,{value:C.description,onChange:ie=>N({...C,description:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("input",{id:"prod-active",type:"checkbox",checked:!!C.active,onChange:ie=>N({...C,active:ie.target.checked})}),S.jsx("label",{htmlFor:"prod-active",className:"text-sm text-gray-300",children:"Activo"})]}),S.jsx("div",{children:S.jsx(Gt,{type:"submit",className:"w-full",children:P?"Guardar":"Agregar"})})]}),E==="points"&&S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[S.jsxs("div",{className:"md:col-span-1",children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Correo del usuario"}),S.jsx(Er,{value:Oe.email,onChange:ie=>xe({...Oe,email:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Puntos a agregar"}),S.jsx(Er,{type:"number",min:"1",value:Oe.points,onChange:ie=>xe({...Oe,points:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsxs("div",{className:"md:col-span-1",children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Nota (opcional)"}),S.jsx(Er,{value:Oe.note,onChange:ie=>xe({...Oe,note:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsx("div",{className:"md:col-span-3 flex justify-end",children:S.jsx(Gt,{onClick:async()=>{me(!0);try{const ie=await pV(Oe.email,Number(Oe.points),n?.email||null,Oe.note);r({title:"Puntos agregados",description:`Se aadieron ${ie.amount} puntos a ${ie.email}.`}),xe({email:"",points:"",note:""})}catch(ie){r({title:"No se pudo agregar",description:ie?.message||"Error desconocido",variant:"destructive"})}finally{me(!1)}},disabled:Z||!Oe.email.trim()||!Number(Oe.points),children:Z?"Procesando...":"Agregar puntos"})})]})]})]}),I&&Ia.createPortal(S.jsxs("div",{className:"fixed inset-0 z-50",children:[S.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>D(null)}),S.jsx("div",{className:"relative z-10 overflow-y-auto overscroll-y-contain",children:S.jsx("div",{className:"min-h-screen flex items-center justify-center p-3 md:p-6",children:S.jsxs("div",{className:"glass-effect rounded-2xl w-full max-w-[420px] max-h-[80vh] overflow-y-auto",children:[S.jsxs("div",{className:"p-5 border-b border-white/10",children:[S.jsx("h4",{className:"text-2xl font-bold text-white",children:"Confirmar compra"}),S.jsxs("p",{className:"text-sm text-gray-200 mt-0.5",children:["Ests canjeando puntos por ",S.jsx("span",{className:"font-medium",children:I.name}),"."]})]}),S.jsxs("div",{className:"p-5",children:[S.jsxs("div",{className:"flex flex-col gap-4 items-start",children:[S.jsx("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-white/5 flex-shrink-0",children:I.imageUrl?S.jsx("img",{src:I.imageUrl,alt:I.name,className:"w-full h-full object-cover"}):null}),S.jsxs("div",{className:"w-full -mt-2",children:[S.jsx("div",{className:"text-base font-semibold text-white",children:I.name}),I.description?S.jsx("p",{className:"text-sm text-gray-300 mt-1",children:I.description}):null]}),S.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3 text-sm w-full",children:[S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-gray-400",children:"Precio"}),S.jsxs("span",{className:"font-medium",children:[Number(I.price||0)," pts"]})]}),S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-gray-400",children:"Saldo"}),S.jsxs("span",{className:"font-medium",children:[s," pts"]})]}),S.jsxs("div",{className:"col-span-2 flex items-center gap-3",children:[S.jsx("span",{className:"text-gray-400",children:"Cantidad"}),S.jsxs("div",{className:"inline-flex items-center rounded-full border border-boreal-aqua/40 overflow-hidden",children:[S.jsx("button",{type:"button",className:"px-2 py-1 text-white/80 hover:bg-white/10",onClick:()=>F(ie=>Math.max(1,Number(ie||1)-1)),children:S.jsx(aL,{className:"w-4 h-4"})}),S.jsx(Er,{type:"number",min:"1",max:Number(I.stock||0),value:O,onChange:ie=>F(ie.target.value),className:"bg-transparent border-0 w-16 text-center focus-visible:ring-0"}),S.jsx("button",{type:"button",className:"px-2 py-1 text-white/80 hover:bg-white/10",onClick:()=>F(ie=>{const Re=Number(I.stock||0);return Math.min(Re||9999,Math.max(1,Number(ie||1)+1))}),children:S.jsx(lL,{className:"w-4 h-4"})})]}),S.jsxs("span",{className:"text-gray-400",children:["Stock: ",Number(I.stock||0)]})]})]})]}),(()=>{const ie=Number(I.stock||0),Re=Number(I.price||0),et=Math.max(1,Number(O||1)),bt=Re*et,Lt=et>ie,ci=bt>s;return S.jsxs("div",{className:"mt-4",children:[S.jsxs("div",{className:"flex justify-between text-sm",children:[S.jsx("span",{className:"text-gray-400",children:"Total"}),S.jsxs("span",{className:"font-semibold",children:[bt," pts"]})]}),(Lt||ci)&&S.jsxs("div",{className:"mt-2 flex items-center gap-2 text-amber-300 text-xs",children:[S.jsx(e3,{className:"w-4 h-4"}),S.jsxs("span",{children:[Lt?"Cantidad supera el stock disponible.":"",Lt&&ci?" ":"",ci?"No tienes puntos suficientes.":""]})]})]})})(),S.jsxs("div",{className:"mt-5 flex flex-col-reverse md:flex-row gap-2 justify-end",children:[S.jsx(Gt,{variant:"outline",className:"rounded-full border-white/30 text-white hover:bg-white/10 w-full md:w-auto",onClick:()=>D(null),children:"Cancelar"}),(()=>{const ie=Number(I.stock||0),Re=Number(I.price||0),et=Math.max(1,Number(O||1)),bt=Re*et,Lt=B||et>ie||bt>s;return S.jsx(Gt,{onClick:q,disabled:Lt,className:"rounded-full w-full md:w-auto bg-gradient-to-r from-boreal-purple to-boreal-blue text-white font-bold",children:B?"Procesando...":`Confirmar (${bt} pts)`})})()]})]})]})})})]}),document.body),te&&Ia.createPortal(S.jsxs("div",{className:"fixed inset-0 z-50",children:[S.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>be(null)}),S.jsx("div",{className:"relative z-10 overflow-y-auto overscroll-y-contain",children:S.jsx("div",{className:"min-h-screen flex items-center justify-center p-3 md:p-6",children:S.jsxs("div",{className:"glass-effect rounded-2xl w-full max-w-[560px] max-h-[85vh] overflow-y-auto p-6 md:p-8 text-center",children:[S.jsx(Ad,{className:"w-14 h-14 text-boreal-aqua mx-auto mb-3"}),S.jsx("h4",{className:"text-2xl font-semibold mb-1",children:"Compra confirmada!"}),S.jsxs("p",{className:"text-gray-300",children:["Canjeaste ",S.jsx("span",{className:"font-medium",children:te.quantity})," x ",S.jsx("span",{className:"font-medium",children:te.name}),"."]}),S.jsxs("p",{className:"text-gray-300 mt-1",children:["Total: ",S.jsxs("span",{className:"font-semibold",children:[te.total," pts"]})]}),S.jsx("p",{className:"text-gray-300 mt-3 text-sm",children:"Para retirar tu artculo, presntate en horario de oficina y muestra el cdigo QR o el ID de compra."}),S.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 items-center",children:[te.imageUrl?S.jsx("div",{className:"rounded-xl overflow-hidden bg-white/5 mx-auto w-40 h-40 md:w-full md:aspect-square",children:S.jsx("img",{src:te.imageUrl,alt:te.name,className:"w-full h-full object-cover"})}):null,S.jsxs("div",{className:"flex flex-col items-center justify-center",children:[S.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"ID de compra"}),S.jsx("div",{className:"font-mono text-lg tracking-widest",children:te.id}),te.qrUrl&&S.jsx("img",{src:te.qrUrl,alt:"QR de compra",className:"mt-3 w-40 h-40 mx-auto"})]})]}),S.jsxs("div",{className:"mt-5 flex flex-col md:flex-row flex-wrap gap-2 justify-center",children:[S.jsx(Gt,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:()=>be(null),children:"Cerrar"}),S.jsx(Gt,{className:"w-full md:w-auto",onClick:()=>{be(null),typeof e=="function"&&e()},children:"Ver mis movimientos"}),S.jsx(Gt,{variant:"outline",className:"border-green-400 text-green-300 hover:bg-green-500/10",onClick:()=>window.open("https://wa.me/50576796164","_blank","noopener,noreferrer"),children:"Contactar por WhatsApp"})]})]})})})]}),document.body)]})},_j=({cert:n})=>{const e=o=>{if(!o)return"Fecha desconocida";try{return(o.toDate?o.toDate():new Date(o)).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}catch{return"Fecha invlida"}},t=()=>{n?.idValidacion&&window.open(`https://borealabs.org/validacion?id=${n.idValidacion}`,"_blank")},r=()=>Array.isArray(n?.urlPdf)&&n.urlPdf.length>0?n.urlPdf[0]?.downloadURL||n.urlPdf[0]?.url||null:n?.urlPdf?.downloadURL?n.urlPdf.downloadURL:n?.downloadURL?n.downloadURL:null,i=()=>{const o=r();o&&window.open(o,"_blank")};return S.jsxs(Pn.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"rounded-2xl p-6 glass-effect flex flex-col justify-between transition-all duration-300 hover:border-boreal-aqua/50",children:[S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[S.jsx(jE,{className:"w-8 h-8 text-boreal-aqua"}),S.jsx("h3",{className:"text-xl font-bold text-boreal-aqua truncate",children:n.nombreEvento||"Evento Desconocido"})]}),S.jsx("p",{className:"text-lg text-white mb-1",children:n.nombreUsuario||"Usuario Desconocido"}),S.jsxs("p",{className:"text-sm text-gray-300 mb-4",children:["Emitido: ",e(n.fechaEmision)]}),S.jsxs("p",{className:"text-xs text-gray-400 font-mono break-all",children:["ID: ",n.idValidacion||n.id]})]}),S.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[S.jsxs(Gt,{className:"w-full bg-gradient-to-r from-boreal-aqua to-boreal-blue text-boreal-dark font-bold hover:opacity-90",onClick:t,children:[S.jsx(jE,{className:"w-4 h-4 mr-2"}),"Validar"]}),S.jsxs(Gt,{variant:"outline",className:"w-full border-white/30 text-white hover:bg-white/10",onClick:i,disabled:!r(),children:[S.jsx(tL,{className:"w-4 h-4 mr-2"}),"Descargar PDF"]})]})]})},wj=({user:n,activeTab:e="certs",onNavigateTab:t})=>{const[r,i]=U.useState([]),[o,s]=U.useState(!0);U.useEffect(()=>{if(!n||!yt)return;s(!0);const c=fr(yt,"certificados"),f=[];n.email&&(f.push(Ui(c,Yu("userEmail","==",n.email))),f.push(Ui(c,Yu("correoUsuario","==",n.email))));const h=new Map;let p=0;const v=f.map(y=>Cs(y,E=>{E.forEach(A=>{h.set(A.id,{id:A.id,...A.data()})}),p+=1,i(Array.from(h.values())),p>=1&&s(!1)},E=>{console.error("Error al obtener certificados:",E),p+=1,p>=1&&s(!1)}));return()=>v.forEach(y=>y&&y())},[n,yt]);const a=n.displayName||n.email.split("@")[0];return S.jsxs(Pn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"max-w-7xl w-full mx-auto p-4 md:p-8",children:[S.jsx(Rg,{children:S.jsx("title",{children:"Boreal Wallet"})}),e==="certs"&&S.jsxs(S.Fragment,{children:[S.jsxs("h1",{className:"font-black mb-2 text-[60px] leading-[60px]",children:[S.jsx("span",{className:"text-white",children:"Hola, "}),S.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-boreal-aqua to-boreal-blue",children:a})]}),S.jsx("p",{className:"text-gray-300 mb-6",children:"Aqu estn tus certificados y puntos de Boreal Labs."})]}),S.jsxs(Uc,{mode:"wait",children:[e==="certs"&&o&&S.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400",children:[S.jsx(tf,{className:"w-12 h-12 mb-4 animate-spin"}),S.jsx("p",{children:"Buscando tus certificados..."})]}),e==="certs"&&!o&&r.length===0&&S.jsxs("div",{className:"flex flex-col items-center justify-center h-64 rounded-2xl glass-effect p-8",children:[S.jsx(e3,{className:"w-16 h-16 text-boreal-purple mb-4"}),S.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No se encontraron certificados"}),S.jsxs("p",{className:"text-gray-300 text-center max-w-md",children:["No pudimos encontrar certificados asociados a la cuenta ",S.jsx("span",{className:"font-medium text-white",children:n.email}),"."]})]}),e==="certs"&&!o&&r.length>0&&S.jsx(Pn.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(c=>S.jsx(_j,{cert:c},c.id))},"certs"),e==="points"&&S.jsx(Pn.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"mt-4",children:S.jsx(lj,{user:n})},"points"),e==="market"&&S.jsx(Pn.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"mt-4",children:S.jsx(xj,{user:n,onViewMovements:()=>t&&t("points")})},"market")]})]})},Ej="/assets/favicon-f169e2d8-C2gxQMFy.png";function Cr(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function D3(n,e=[]){let t=[];function r(o,s){const a=U.createContext(s),c=t.length;t=[...t,s];const f=p=>{const{scope:v,children:y,...E}=p,A=v?.[n]?.[c]||a,C=U.useMemo(()=>E,Object.values(E));return S.jsx(A.Provider,{value:C,children:y})};f.displayName=o+"Provider";function h(p,v){const y=v?.[n]?.[c]||a,E=U.useContext(y);if(E)return E;if(s!==void 0)return s;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[f,h]}const i=()=>{const o=t.map(s=>U.createContext(s));return function(a){const c=a?.[n]||o;return U.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return i.scopeName=n,[r,Aj(i,...e)]}function Aj(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:c,scopeName:f})=>{const p=c(o)[`__scope${f}`];return{...a,...p}},{});return U.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return t.scopeName=e.scopeName,t}function Cj(n){const e=n+"CollectionProvider",[t,r]=D3(e),[i,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),s=A=>{const{scope:C,children:N}=A,P=Rn.useRef(null),M=Rn.useRef(new Map).current;return S.jsx(i,{scope:C,itemMap:M,collectionRef:P,children:N})};s.displayName=e;const a=n+"CollectionSlot",c=np(a),f=Rn.forwardRef((A,C)=>{const{scope:N,children:P}=A,M=o(a,N),j=Ta(C,M.collectionRef);return S.jsx(c,{ref:j,children:P})});f.displayName=a;const h=n+"CollectionItemSlot",p="data-radix-collection-item",v=np(h),y=Rn.forwardRef((A,C)=>{const{scope:N,children:P,...M}=A,j=Rn.useRef(null),H=Ta(C,j),$=o(h,N);return Rn.useEffect(()=>($.itemMap.set(j,{ref:j,...M}),()=>void $.itemMap.delete(j))),S.jsx(v,{[p]:"",ref:H,children:P})});y.displayName=h;function E(A){const C=o(n+"CollectionConsumer",A);return Rn.useCallback(()=>{const P=C.collectionRef.current;if(!P)return[];const M=Array.from(P.querySelectorAll(`[${p}]`));return Array.from(C.itemMap.values()).sort(($,R)=>M.indexOf($.ref.current)-M.indexOf(R.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:s,Slot:f,ItemSlot:y},E,r]}var Tj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Hi=Tj.reduce((n,e)=>{const t=np(`Primitive.${e}`),r=U.forwardRef((i,o)=>{const{asChild:s,...a}=i,c=s?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(c,{...a,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function O3(n,e){n&&Ia.flushSync(()=>n.dispatchEvent(e))}function Sa(n){const e=U.useRef(n);return U.useEffect(()=>{e.current=n}),U.useMemo(()=>(...t)=>e.current?.(...t),[])}function Ij(n,e=globalThis?.document){const t=Sa(n);U.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var Sj="DismissableLayer",Ag="dismissableLayer.update",bj="dismissableLayer.pointerDownOutside",Rj="dismissableLayer.focusOutside",MA,k3=U.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),M3=U.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...c}=n,f=U.useContext(k3),[h,p]=U.useState(null),v=h?.ownerDocument??globalThis?.document,[,y]=U.useState({}),E=Ta(e,R=>p(R)),A=Array.from(f.layers),[C]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),N=A.indexOf(C),P=h?A.indexOf(h):-1,M=f.layersWithOutsidePointerEventsDisabled.size>0,j=P>=N,H=Nj(R=>{const I=R.target,D=[...f.branches].some(O=>O.contains(I));!j||D||(i?.(R),s?.(R),R.defaultPrevented||a?.())},v),$=Dj(R=>{const I=R.target;[...f.branches].some(O=>O.contains(I))||(o?.(R),s?.(R),R.defaultPrevented||a?.())},v);return Ij(R=>{P===f.layers.size-1&&(r?.(R),!R.defaultPrevented&&a&&(R.preventDefault(),a()))},v),U.useEffect(()=>{if(h)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(MA=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(h)),f.layers.add(h),LA(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=MA)}},[h,v,t,f]),U.useEffect(()=>()=>{h&&(f.layers.delete(h),f.layersWithOutsidePointerEventsDisabled.delete(h),LA())},[h,f]),U.useEffect(()=>{const R=()=>y({});return document.addEventListener(Ag,R),()=>document.removeEventListener(Ag,R)},[]),S.jsx(Hi.div,{...c,ref:E,style:{pointerEvents:M?j?"auto":"none":void 0,...n.style},onFocusCapture:Cr(n.onFocusCapture,$.onFocusCapture),onBlurCapture:Cr(n.onBlurCapture,$.onBlurCapture),onPointerDownCapture:Cr(n.onPointerDownCapture,H.onPointerDownCapture)})});M3.displayName=Sj;var Pj="DismissableLayerBranch",L3=U.forwardRef((n,e)=>{const t=U.useContext(k3),r=U.useRef(null),i=Ta(e,r);return U.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),S.jsx(Hi.div,{...n,ref:i})});L3.displayName=Pj;function Nj(n,e=globalThis?.document){const t=Sa(n),r=U.useRef(!1),i=U.useRef(()=>{});return U.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let c=function(){V3(bj,t,f,{discrete:!0})};const f={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function Dj(n,e=globalThis?.document){const t=Sa(n),r=U.useRef(!1);return U.useEffect(()=>{const i=o=>{o.target&&!r.current&&V3(Rj,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function LA(){const n=new CustomEvent(Ag);document.dispatchEvent(n)}function V3(n,e,t,{discrete:r}){const i=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?O3(i,o):i.dispatchEvent(o)}var Oj=M3,kj=L3,nf=globalThis?.document?U.useLayoutEffect:()=>{},Mj="Portal",F3=U.forwardRef((n,e)=>{const{container:t,...r}=n,[i,o]=U.useState(!1);nf(()=>o(!0),[]);const s=t||i&&globalThis?.document?.body;return s?cV.createPortal(S.jsx(Hi.div,{...r,ref:e}),s):null});F3.displayName=Mj;function Lj(n,e){return U.useReducer((t,r)=>e[t][r]??t,n)}var B3=n=>{const{present:e,children:t}=n,r=Vj(e),i=typeof t=="function"?t({present:r.isPresent}):U.Children.only(t),o=Ta(r.ref,Fj(i));return typeof t=="function"||r.isPresent?U.cloneElement(i,{ref:o}):null};B3.displayName="Presence";function Vj(n){const[e,t]=U.useState(),r=U.useRef(null),i=U.useRef(n),o=U.useRef("none"),s=n?"mounted":"unmounted",[a,c]=Lj(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return U.useEffect(()=>{const f=sd(r.current);o.current=a==="mounted"?f:"none"},[a]),nf(()=>{const f=r.current,h=i.current;if(h!==n){const v=o.current,y=sd(f);n?c("MOUNT"):y==="none"||f?.display==="none"?c("UNMOUNT"):c(h&&v!==y?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,c]),nf(()=>{if(e){let f;const h=e.ownerDocument.defaultView??window,p=y=>{const A=sd(r.current).includes(CSS.escape(y.animationName));if(y.target===e&&A&&(c("ANIMATION_END"),!i.current)){const C=e.style.animationFillMode;e.style.animationFillMode="forwards",f=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=C)})}},v=y=>{y.target===e&&(o.current=sd(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{h.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:U.useCallback(f=>{r.current=f?getComputedStyle(f):null,t(f)},[])}}function sd(n){return n?.animationName||"none"}function Fj(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Bj=_4[" useInsertionEffect ".trim().toString()]||nf;function Uj({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,o,s]=jj({defaultProp:e,onChange:t}),a=n!==void 0,c=a?n:i;{const h=U.useRef(n!==void 0);U.useEffect(()=>{const p=h.current;p!==a&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=a},[a,r])}const f=U.useCallback(h=>{if(a){const p=zj(h)?h(n):h;p!==n&&s.current?.(p)}else o(h)},[a,n,o,s]);return[c,f]}function jj({defaultProp:n,onChange:e}){const[t,r]=U.useState(n),i=U.useRef(t),o=U.useRef(e);return Bj(()=>{o.current=e},[e]),U.useEffect(()=>{i.current!==t&&(o.current?.(t),i.current=t)},[t,i]),[t,r,o]}function zj(n){return typeof n=="function"}var Hj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),$j="VisuallyHidden",_y=U.forwardRef((n,e)=>S.jsx(Hi.span,{...n,ref:e,style:{...Hj,...n.style}}));_y.displayName=$j;var wy="ToastProvider",[Ey,Wj,Gj]=Cj("Toast"),[U3]=D3("Toast",[Gj]),[qj,Fp]=U3(wy),j3=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:s}=n,[a,c]=U.useState(null),[f,h]=U.useState(0),p=U.useRef(!1),v=U.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${wy}\`. Expected non-empty \`string\`.`),S.jsx(Ey.Provider,{scope:e,children:S.jsx(qj,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:f,viewport:a,onViewportChange:c,onToastAdd:U.useCallback(()=>h(y=>y+1),[]),onToastRemove:U.useCallback(()=>h(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:v,children:s})})};j3.displayName=wy;var z3="ToastViewport",Kj=["F8"],Cg="toast.viewportPause",Tg="toast.viewportResume",H3=U.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=Kj,label:i="Notifications ({hotkey})",...o}=n,s=Fp(z3,t),a=Wj(t),c=U.useRef(null),f=U.useRef(null),h=U.useRef(null),p=U.useRef(null),v=Ta(e,p,s.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=s.toastCount>0;U.useEffect(()=>{const C=N=>{r.length!==0&&r.every(M=>N[M]||N.code===M)&&p.current?.focus()};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[r]),U.useEffect(()=>{const C=c.current,N=p.current;if(E&&C&&N){const P=()=>{if(!s.isClosePausedRef.current){const $=new CustomEvent(Cg);N.dispatchEvent($),s.isClosePausedRef.current=!0}},M=()=>{if(s.isClosePausedRef.current){const $=new CustomEvent(Tg);N.dispatchEvent($),s.isClosePausedRef.current=!1}},j=$=>{!C.contains($.relatedTarget)&&M()},H=()=>{C.contains(document.activeElement)||M()};return C.addEventListener("focusin",P),C.addEventListener("focusout",j),C.addEventListener("pointermove",P),C.addEventListener("pointerleave",H),window.addEventListener("blur",P),window.addEventListener("focus",M),()=>{C.removeEventListener("focusin",P),C.removeEventListener("focusout",j),C.removeEventListener("pointermove",P),C.removeEventListener("pointerleave",H),window.removeEventListener("blur",P),window.removeEventListener("focus",M)}}},[E,s.isClosePausedRef]);const A=U.useCallback(({tabbingDirection:C})=>{const P=a().map(M=>{const j=M.ref.current,H=[j,...az(j)];return C==="forwards"?H:H.reverse()});return(C==="forwards"?P.reverse():P).flat()},[a]);return U.useEffect(()=>{const C=p.current;if(C){const N=P=>{const M=P.altKey||P.ctrlKey||P.metaKey;if(P.key==="Tab"&&!M){const H=document.activeElement,$=P.shiftKey;if(P.target===C&&$){f.current?.focus();return}const D=A({tabbingDirection:$?"backwards":"forwards"}),O=D.findIndex(F=>F===H);sm(D.slice(O+1))?P.preventDefault():$?f.current?.focus():h.current?.focus()}};return C.addEventListener("keydown",N),()=>C.removeEventListener("keydown",N)}},[a,A]),S.jsxs(kj,{ref:c,role:"region","aria-label":i.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&S.jsx(Ig,{ref:f,onFocusFromOutsideViewport:()=>{const C=A({tabbingDirection:"forwards"});sm(C)}}),S.jsx(Ey.Slot,{scope:t,children:S.jsx(Hi.ol,{tabIndex:-1,...o,ref:v})}),E&&S.jsx(Ig,{ref:h,onFocusFromOutsideViewport:()=>{const C=A({tabbingDirection:"backwards"});sm(C)}})]})});H3.displayName=z3;var $3="ToastFocusProxy",Ig=U.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,o=Fp($3,t);return S.jsx(_y,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:s=>{const a=s.relatedTarget;!o.viewport?.contains(a)&&r()}})});Ig.displayName=$3;var Tf="Toast",Xj="toast.swipeStart",Yj="toast.swipeMove",Qj="toast.swipeCancel",Zj="toast.swipeEnd",W3=U.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:o,...s}=n,[a,c]=Uj({prop:r,defaultProp:i??!0,onChange:o,caller:Tf});return S.jsx(B3,{present:t||a,children:S.jsx(tz,{open:a,...s,ref:e,onClose:()=>c(!1),onPause:Sa(n.onPause),onResume:Sa(n.onResume),onSwipeStart:Cr(n.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Cr(n.onSwipeMove,f=>{const{x:h,y:p}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:Cr(n.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Cr(n.onSwipeEnd,f=>{const{x:h,y:p}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),c(!1)})})})});W3.displayName=Tf;var[Jj,ez]=U3(Tf,{onClose(){}}),tz=U.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:o,onClose:s,onEscapeKeyDown:a,onPause:c,onResume:f,onSwipeStart:h,onSwipeMove:p,onSwipeCancel:v,onSwipeEnd:y,...E}=n,A=Fp(Tf,t),[C,N]=U.useState(null),P=Ta(e,te=>N(te)),M=U.useRef(null),j=U.useRef(null),H=i||A.duration,$=U.useRef(0),R=U.useRef(H),I=U.useRef(0),{onToastAdd:D,onToastRemove:O}=A,F=Sa(()=>{C?.contains(document.activeElement)&&A.viewport?.focus(),s()}),B=U.useCallback(te=>{!te||te===1/0||(window.clearTimeout(I.current),$.current=new Date().getTime(),I.current=window.setTimeout(F,te))},[F]);U.useEffect(()=>{const te=A.viewport;if(te){const be=()=>{B(R.current),f?.()},Oe=()=>{const xe=new Date().getTime()-$.current;R.current=R.current-xe,window.clearTimeout(I.current),c?.()};return te.addEventListener(Cg,Oe),te.addEventListener(Tg,be),()=>{te.removeEventListener(Cg,Oe),te.removeEventListener(Tg,be)}}},[A.viewport,H,c,f,B]),U.useEffect(()=>{o&&!A.isClosePausedRef.current&&B(H)},[o,H,A.isClosePausedRef,B]),U.useEffect(()=>(D(),()=>O()),[D,O]);const L=U.useMemo(()=>C?Z3(C):null,[C]);return A.viewport?S.jsxs(S.Fragment,{children:[L&&S.jsx(nz,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:L}),S.jsx(Jj,{scope:t,onClose:F,children:Ia.createPortal(S.jsx(Ey.ItemSlot,{scope:t,children:S.jsx(Oj,{asChild:!0,onEscapeKeyDown:Cr(a,()=>{A.isFocusedToastEscapeKeyDownRef.current||F(),A.isFocusedToastEscapeKeyDownRef.current=!1}),children:S.jsx(Hi.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":A.swipeDirection,...E,ref:P,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Cr(n.onKeyDown,te=>{te.key==="Escape"&&(a?.(te.nativeEvent),te.nativeEvent.defaultPrevented||(A.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:Cr(n.onPointerDown,te=>{te.button===0&&(M.current={x:te.clientX,y:te.clientY})}),onPointerMove:Cr(n.onPointerMove,te=>{if(!M.current)return;const be=te.clientX-M.current.x,Oe=te.clientY-M.current.y,xe=!!j.current,Z=["left","right"].includes(A.swipeDirection),me=["left","up"].includes(A.swipeDirection)?Math.min:Math.max,de=Z?me(0,be):0,q=Z?0:me(0,Oe),oe=te.pointerType==="touch"?10:2,_e={x:de,y:q},Ie={originalEvent:te,delta:_e};xe?(j.current=_e,ad(Yj,p,Ie,{discrete:!1})):VA(_e,A.swipeDirection,oe)?(j.current=_e,ad(Xj,h,Ie,{discrete:!1}),te.target.setPointerCapture(te.pointerId)):(Math.abs(be)>oe||Math.abs(Oe)>oe)&&(M.current=null)}),onPointerUp:Cr(n.onPointerUp,te=>{const be=j.current,Oe=te.target;if(Oe.hasPointerCapture(te.pointerId)&&Oe.releasePointerCapture(te.pointerId),j.current=null,M.current=null,be){const xe=te.currentTarget,Z={originalEvent:te,delta:be};VA(be,A.swipeDirection,A.swipeThreshold)?ad(Zj,y,Z,{discrete:!0}):ad(Qj,v,Z,{discrete:!0}),xe.addEventListener("click",me=>me.preventDefault(),{once:!0})}})})})}),A.viewport)})]}):null}),nz=n=>{const{__scopeToast:e,children:t,...r}=n,i=Fp(Tf,e),[o,s]=U.useState(!1),[a,c]=U.useState(!1);return oz(()=>s(!0)),U.useEffect(()=>{const f=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(f)},[]),a?null:S.jsx(F3,{asChild:!0,children:S.jsx(_y,{...r,children:o&&S.jsxs(S.Fragment,{children:[i.label," ",t]})})})},rz="ToastTitle",G3=U.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return S.jsx(Hi.div,{...r,ref:e})});G3.displayName=rz;var iz="ToastDescription",q3=U.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return S.jsx(Hi.div,{...r,ref:e})});q3.displayName=iz;var K3="ToastAction",X3=U.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?S.jsx(Q3,{altText:t,asChild:!0,children:S.jsx(Ay,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${K3}\`. Expected non-empty \`string\`.`),null)});X3.displayName=K3;var Y3="ToastClose",Ay=U.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=ez(Y3,t);return S.jsx(Q3,{asChild:!0,children:S.jsx(Hi.button,{type:"button",...r,ref:e,onClick:Cr(n.onClick,i.onClose)})})});Ay.displayName=Y3;var Q3=U.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return S.jsx(Hi.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function Z3(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),sz(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const s=r.dataset.radixToastAnnounceAlt;s&&e.push(s)}else e.push(...Z3(r))}}),e}function ad(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,o=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?O3(i,o):i.dispatchEvent(o)}var VA=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),o=r>i;return e==="left"||e==="right"?o&&r>t:!o&&i>t};function oz(n=()=>{}){const e=Sa(n);nf(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function sz(n){return n.nodeType===n.ELEMENT_NODE}function az(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function sm(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var uz=j3,J3=H3,eb=W3,tb=G3,nb=q3,rb=X3,ib=Ay;const lz=uz,ob=U.forwardRef(({className:n,...e},t)=>S.jsx(J3,{ref:t,className:bs("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));ob.displayName=J3.displayName;const cz=o3("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),sb=U.forwardRef(({className:n,variant:e,...t},r)=>S.jsx(eb,{ref:r,className:bs(cz({variant:e}),n),...t}));sb.displayName=eb.displayName;const fz=U.forwardRef(({className:n,...e},t)=>S.jsx(rb,{ref:t,className:bs("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));fz.displayName=rb.displayName;const ab=U.forwardRef(({className:n,...e},t)=>S.jsx(ib,{ref:t,className:bs("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:S.jsx(t3,{className:"h-4 w-4"})}));ab.displayName=ib.displayName;const ub=U.forwardRef(({className:n,...e},t)=>S.jsx(tb,{ref:t,className:bs("text-sm font-semibold",n),...e}));ub.displayName=tb.displayName;const lb=U.forwardRef(({className:n,...e},t)=>S.jsx(nb,{ref:t,className:bs("text-sm opacity-90",n),...e}));lb.displayName=nb.displayName;function hz(){const{toasts:n}=kp();return S.jsxs(lz,{children:[n.map(function({id:e,title:t,description:r,action:i,...o}){return S.jsxs(sb,{...o,children:[S.jsxs("div",{className:"grid gap-1",children:[t&&S.jsx(ub,{children:t}),r&&S.jsx(lb,{children:r})]}),i,S.jsx(ab,{})]},e)}),S.jsx(ob,{})]})}function dz(){const[n,e]=U.useState(null),[t,r]=U.useState(!1),[i,o]=U.useState("certs");return U.useEffect(()=>{(async()=>{try{await U4.setStyle({style:um.Dark})}catch{}try{await B4.hide()}catch{}})()},[]),U.useEffect(()=>{if(!Ru||!va){r(!0);return}try{const s=gk(va,a=>{e(a),r(!0)});return()=>s()}catch(s){console.error("No se pudo suscribir a onAuthStateChanged:",s),r(!0)}},[]),S.jsx(GA,{children:S.jsxs("div",{className:"bg-boreal-dark text-white min-h-screen w-full flex flex-col overflow-x-hidden",style:{fontFamily:"'Montserrat', sans-serif"},children:[S.jsxs(Rg,{children:[S.jsx("title",{children:"Boreal Wallet"}),S.jsx("link",{rel:"icon",type:"image/png",href:Ej}),S.jsx("style",{children:`
            :root {
              --boreal-dark: #010b1d;
              --boreal-aqua: #69e6af;
              --boreal-purple: #be58f0;
              --boreal-blue: #3162ed;
            }
          `})]}),n&&S.jsx(pL,{user:n,activeTab:i,onNavigate:s=>o(s)}),S.jsx("main",{className:"flex-grow flex flex-col items-center w-full",children:S.jsxs(Uc,{mode:"wait",children:[!Ru&&S.jsx(Pn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-grow flex items-center justify-center p-6",children:S.jsxs("div",{className:"max-w-lg text-center space-y-3",children:[S.jsx("h2",{className:"text-xl font-bold",children:"Configura Firebase"}),S.jsxs("p",{className:"text-white/80",children:["Faltan variables de entorno. Crea un archivo ",S.jsx("code",{children:".env"})," en la raz con las claves",S.jsx("code",{children:" VITE_FIREBASE_API_KEY, VITE_FIREBASE_AUTH_DOMAIN, VITE_FIREBASE_PROJECT_ID, VITE_FIREBASE_STORAGE_BUCKET, VITE_FIREBASE_MESSAGING_SENDER_ID, VITE_FIREBASE_APP_ID"}),"."]}),S.jsx("p",{className:"text-white/60",children:"Tras guardarlo, reinicia el servidor de desarrollo."})]})},"config-warning"),!t&&S.jsx(Pn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-grow flex items-center justify-center",children:S.jsx(tf,{className:"w-12 h-12 text-boreal-aqua animate-spin"})},"loader"),t&&Ru&&!n&&S.jsx(Pn.div,{initial:{opacity:0,y:24,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-16,scale:.98},transition:{duration:.25,ease:"easeOut"},className:"w-full h-full flex",children:S.jsx(lV,{})},"login"),t&&Ru&&n&&S.jsx(Pn.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},exit:{opacity:0,y:16},transition:{duration:.2,ease:"easeOut"},className:"w-full h-full flex",children:S.jsx(wj,{user:n,activeTab:i})},"wallet")]})}),n&&S.jsx(mL,{}),S.jsx(hz,{})]})})}I4.createRoot(document.getElementById("root")).render(S.jsx(Rn.StrictMode,{children:S.jsx(dz,{})}));export{BA as W};
