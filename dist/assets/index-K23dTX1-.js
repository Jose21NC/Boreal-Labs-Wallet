function d4(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function uu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var F1={exports:{}},wc={},B1={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sx;function h4(){if(sx)return Ye;sx=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function g(q){return q===null||typeof q!="object"?null:(q=p&&q[p]||q["@@iterator"],typeof q=="function"?q:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,A={};function I(q,ie,Ee){this.props=q,this.context=ie,this.refs=A,this.updater=Ee||y}I.prototype.isReactComponent={},I.prototype.setState=function(q,ie){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ie,"setState")},I.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function N(){}N.prototype=I.prototype;function R(q,ie,Ee){this.props=q,this.context=ie,this.refs=A,this.updater=Ee||y}var k=R.prototype=new N;k.constructor=R,E(k,I.prototype),k.isPureReactComponent=!0;var j=Array.isArray,H=Object.prototype.hasOwnProperty,$={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function S(q,ie,Ee){var Pe,We={},Ge=null,Ve=null;if(ie!=null)for(Pe in ie.ref!==void 0&&(Ve=ie.ref),ie.key!==void 0&&(Ge=""+ie.key),ie)H.call(ie,Pe)&&!b.hasOwnProperty(Pe)&&(We[Pe]=ie[Pe]);var ne=arguments.length-2;if(ne===1)We.children=Ee;else if(1<ne){for(var ye=Array(ne),He=0;He<ne;He++)ye[He]=arguments[He+2];We.children=ye}if(q&&q.defaultProps)for(Pe in ne=q.defaultProps,ne)We[Pe]===void 0&&(We[Pe]=ne[Pe]);return{$$typeof:n,type:q,key:Ge,ref:Ve,props:We,_owner:$.current}}function O(q,ie){return{$$typeof:n,type:q.type,key:ie,ref:q.ref,props:q.props,_owner:q._owner}}function V(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function L(q){var ie={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(Ee){return ie[Ee]})}var U=/\/+/g;function D(q,ie){return typeof q=="object"&&q!==null&&q.key!=null?L(""+q.key):ie.toString(36)}function ue(q,ie,Ee,Pe,We){var Ge=typeof q;(Ge==="undefined"||Ge==="boolean")&&(q=null);var Ve=!1;if(q===null)Ve=!0;else switch(Ge){case"string":case"number":Ve=!0;break;case"object":switch(q.$$typeof){case n:case e:Ve=!0}}if(Ve)return Ve=q,We=We(Ve),q=Pe===""?"."+D(Ve,0):Pe,j(We)?(Ee="",q!=null&&(Ee=q.replace(U,"$&/")+"/"),ue(We,ie,Ee,"",function(He){return He})):We!=null&&(V(We)&&(We=O(We,Ee+(!We.key||Ve&&Ve.key===We.key?"":(""+We.key).replace(U,"$&/")+"/")+q)),ie.push(We)),1;if(Ve=0,Pe=Pe===""?".":Pe+":",j(q))for(var ne=0;ne<q.length;ne++){Ge=q[ne];var ye=Pe+D(Ge,ne);Ve+=ue(Ge,ie,Ee,ye,We)}else if(ye=g(q),typeof ye=="function")for(q=ye.call(q),ne=0;!(Ge=q.next()).done;)Ge=Ge.value,ye=Pe+D(Ge,ne++),Ve+=ue(Ge,ie,Ee,ye,We);else if(Ge==="object")throw ie=String(q),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return Ve}function le(q,ie,Ee){if(q==null)return q;var Pe=[],We=0;return ue(q,Pe,"","",function(Ge){return ie.call(Ee,Ge,We++)}),Pe}function Ue(q){if(q._status===-1){var ie=q._result;ie=ie(),ie.then(function(Ee){(q._status===0||q._status===-1)&&(q._status=1,q._result=Ee)},function(Ee){(q._status===0||q._status===-1)&&(q._status=2,q._result=Ee)}),q._status===-1&&(q._status=0,q._result=ie)}if(q._status===1)return q._result.default;throw q._result}var Ie={current:null},Z={transition:null},ve={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:Z,ReactCurrentOwner:$};function pe(){throw Error("act(...) is not supported in production builds of React.")}return Ye.Children={map:le,forEach:function(q,ie,Ee){le(q,function(){ie.apply(this,arguments)},Ee)},count:function(q){var ie=0;return le(q,function(){ie++}),ie},toArray:function(q){return le(q,function(ie){return ie})||[]},only:function(q){if(!V(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Ye.Component=I,Ye.Fragment=t,Ye.Profiler=i,Ye.PureComponent=R,Ye.StrictMode=r,Ye.Suspense=u,Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,Ye.act=pe,Ye.cloneElement=function(q,ie,Ee){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var Pe=E({},q.props),We=q.key,Ge=q.ref,Ve=q._owner;if(ie!=null){if(ie.ref!==void 0&&(Ge=ie.ref,Ve=$.current),ie.key!==void 0&&(We=""+ie.key),q.type&&q.type.defaultProps)var ne=q.type.defaultProps;for(ye in ie)H.call(ie,ye)&&!b.hasOwnProperty(ye)&&(Pe[ye]=ie[ye]===void 0&&ne!==void 0?ne[ye]:ie[ye])}var ye=arguments.length-2;if(ye===1)Pe.children=Ee;else if(1<ye){ne=Array(ye);for(var He=0;He<ye;He++)ne[He]=arguments[He+2];Pe.children=ne}return{$$typeof:n,type:q.type,key:We,ref:Ge,props:Pe,_owner:Ve}},Ye.createContext=function(q){return q={$$typeof:s,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:o,_context:q},q.Consumer=q},Ye.createElement=S,Ye.createFactory=function(q){var ie=S.bind(null,q);return ie.type=q,ie},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(q){return{$$typeof:a,render:q}},Ye.isValidElement=V,Ye.lazy=function(q){return{$$typeof:d,_payload:{_status:-1,_result:q},_init:Ue}},Ye.memo=function(q,ie){return{$$typeof:f,type:q,compare:ie===void 0?null:ie}},Ye.startTransition=function(q){var ie=Z.transition;Z.transition={};try{q()}finally{Z.transition=ie}},Ye.unstable_act=pe,Ye.useCallback=function(q,ie){return Ie.current.useCallback(q,ie)},Ye.useContext=function(q){return Ie.current.useContext(q)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(q){return Ie.current.useDeferredValue(q)},Ye.useEffect=function(q,ie){return Ie.current.useEffect(q,ie)},Ye.useId=function(){return Ie.current.useId()},Ye.useImperativeHandle=function(q,ie,Ee){return Ie.current.useImperativeHandle(q,ie,Ee)},Ye.useInsertionEffect=function(q,ie){return Ie.current.useInsertionEffect(q,ie)},Ye.useLayoutEffect=function(q,ie){return Ie.current.useLayoutEffect(q,ie)},Ye.useMemo=function(q,ie){return Ie.current.useMemo(q,ie)},Ye.useReducer=function(q,ie,Ee){return Ie.current.useReducer(q,ie,Ee)},Ye.useRef=function(q){return Ie.current.useRef(q)},Ye.useState=function(q){return Ie.current.useState(q)},Ye.useSyncExternalStore=function(q,ie,Ee){return Ie.current.useSyncExternalStore(q,ie,Ee)},Ye.useTransition=function(){return Ie.current.useTransition()},Ye.version="18.3.1",Ye}var ax;function rv(){return ax||(ax=1,B1.exports=h4()),B1.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lx;function p4(){if(lx)return wc;lx=1;var n=rv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,u,f){var d,p={},g=null,y=null;f!==void 0&&(g=""+f),u.key!==void 0&&(g=""+u.key),u.ref!==void 0&&(y=u.ref);for(d in u)r.call(u,d)&&!o.hasOwnProperty(d)&&(p[d]=u[d]);if(a&&a.defaultProps)for(d in u=a.defaultProps,u)p[d]===void 0&&(p[d]=u[d]);return{$$typeof:e,type:a,key:g,ref:y,props:p,_owner:i.current}}return wc.Fragment=t,wc.jsx=s,wc.jsxs=s,wc}var ux;function m4(){return ux||(ux=1,F1.exports=p4()),F1.exports}var T=m4(),B=rv();const xn=uu(B),g4=d4({__proto__:null,default:xn},[B]);var uh={},U1={exports:{}},cr={},j1={exports:{}},z1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function v4(){return cx||(cx=1,(function(n){function e(Z,ve){var pe=Z.length;Z.push(ve);e:for(;0<pe;){var q=pe-1>>>1,ie=Z[q];if(0<i(ie,ve))Z[q]=ve,Z[pe]=ie,pe=q;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ve=Z[0],pe=Z.pop();if(pe!==ve){Z[0]=pe;e:for(var q=0,ie=Z.length,Ee=ie>>>1;q<Ee;){var Pe=2*(q+1)-1,We=Z[Pe],Ge=Pe+1,Ve=Z[Ge];if(0>i(We,pe))Ge<ie&&0>i(Ve,We)?(Z[q]=Ve,Z[Ge]=pe,q=Ge):(Z[q]=We,Z[Pe]=pe,q=Pe);else if(Ge<ie&&0>i(Ve,pe))Z[q]=Ve,Z[Ge]=pe,q=Ge;else break e}}return ve}function i(Z,ve){var pe=Z.sortIndex-ve.sortIndex;return pe!==0?pe:Z.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var u=[],f=[],d=1,p=null,g=3,y=!1,E=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(Z){for(var ve=t(f);ve!==null;){if(ve.callback===null)r(f);else if(ve.startTime<=Z)r(f),ve.sortIndex=ve.expirationTime,e(u,ve);else break;ve=t(f)}}function j(Z){if(A=!1,k(Z),!E)if(t(u)!==null)E=!0,Ue(H);else{var ve=t(f);ve!==null&&Ie(j,ve.startTime-Z)}}function H(Z,ve){E=!1,A&&(A=!1,N(S),S=-1),y=!0;var pe=g;try{for(k(ve),p=t(u);p!==null&&(!(p.expirationTime>ve)||Z&&!L());){var q=p.callback;if(typeof q=="function"){p.callback=null,g=p.priorityLevel;var ie=q(p.expirationTime<=ve);ve=n.unstable_now(),typeof ie=="function"?p.callback=ie:p===t(u)&&r(u),k(ve)}else r(u);p=t(u)}if(p!==null)var Ee=!0;else{var Pe=t(f);Pe!==null&&Ie(j,Pe.startTime-ve),Ee=!1}return Ee}finally{p=null,g=pe,y=!1}}var $=!1,b=null,S=-1,O=5,V=-1;function L(){return!(n.unstable_now()-V<O)}function U(){if(b!==null){var Z=n.unstable_now();V=Z;var ve=!0;try{ve=b(!0,Z)}finally{ve?D():($=!1,b=null)}}else $=!1}var D;if(typeof R=="function")D=function(){R(U)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,le=ue.port2;ue.port1.onmessage=U,D=function(){le.postMessage(null)}}else D=function(){I(U,0)};function Ue(Z){b=Z,$||($=!0,D())}function Ie(Z,ve){S=I(function(){Z(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){E||y||(E=!0,Ue(H))},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(Z){switch(g){case 1:case 2:case 3:var ve=3;break;default:ve=g}var pe=g;g=ve;try{return Z()}finally{g=pe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,ve){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var pe=g;g=Z;try{return ve()}finally{g=pe}},n.unstable_scheduleCallback=function(Z,ve,pe){var q=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?q+pe:q):pe=q,Z){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=pe+ie,Z={id:d++,callback:ve,priorityLevel:Z,startTime:pe,expirationTime:ie,sortIndex:-1},pe>q?(Z.sortIndex=pe,e(f,Z),t(u)===null&&Z===t(f)&&(A?(N(S),S=-1):A=!0,Ie(j,pe-q))):(Z.sortIndex=ie,e(u,Z),E||y||(E=!0,Ue(H))),Z},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(Z){var ve=g;return function(){var pe=g;g=ve;try{return Z.apply(this,arguments)}finally{g=pe}}}})(z1)),z1}var fx;function y4(){return fx||(fx=1,j1.exports=v4()),j1.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx;function w4(){if(dx)return cr;dx=1;var n=rv(),e=y4();function t(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(l,c){s(l,c),s(l+"Capture",c)}function s(l,c){for(i[l]=c,l=0;l<c.length;l++)r.add(c[l])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function g(l){return u.call(p,l)?!0:u.call(d,l)?!1:f.test(l)?p[l]=!0:(d[l]=!0,!1)}function y(l,c,h,v){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return v?!1:h!==null?!h.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function E(l,c,h,v){if(c===null||typeof c>"u"||y(l,c,h,v))return!0;if(v)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function A(l,c,h,v,w,_,P){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=v,this.attributeNamespace=w,this.mustUseProperty=h,this.propertyName=l,this.type=c,this.sanitizeURL=_,this.removeEmptyString=P}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){I[l]=new A(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var c=l[0];I[c]=new A(c,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){I[l]=new A(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){I[l]=new A(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){I[l]=new A(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){I[l]=new A(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){I[l]=new A(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){I[l]=new A(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){I[l]=new A(l,5,!1,l.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function R(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var c=l.replace(N,R);I[c]=new A(c,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var c=l.replace(N,R);I[c]=new A(c,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var c=l.replace(N,R);I[c]=new A(c,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){I[l]=new A(l,1,!1,l.toLowerCase(),null,!1,!1)}),I.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){I[l]=new A(l,1,!1,l.toLowerCase(),null,!0,!0)});function k(l,c,h,v){var w=I.hasOwnProperty(c)?I[c]:null;(w!==null?w.type!==0:v||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(E(c,h,w,v)&&(h=null),v||w===null?g(c)&&(h===null?l.removeAttribute(c):l.setAttribute(c,""+h)):w.mustUseProperty?l[w.propertyName]=h===null?w.type===3?!1:"":h:(c=w.attributeName,v=w.attributeNamespace,h===null?l.removeAttribute(c):(w=w.type,h=w===3||w===4&&h===!0?"":""+h,v?l.setAttributeNS(v,c,h):l.setAttribute(c,h))))}var j=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),$=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),L=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),le=Symbol.for("react.memo"),Ue=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ve(l){return l===null||typeof l!="object"?null:(l=Z&&l[Z]||l["@@iterator"],typeof l=="function"?l:null)}var pe=Object.assign,q;function ie(l){if(q===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);q=c&&c[1]||""}return`
`+q+l}var Ee=!1;function Pe(l,c){if(!l||Ee)return"";Ee=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(J){var v=J}Reflect.construct(l,[],c)}else{try{c.call()}catch(J){v=J}l.call(c.prototype)}else{try{throw Error()}catch(J){v=J}l()}}catch(J){if(J&&v&&typeof J.stack=="string"){for(var w=J.stack.split(`
`),_=v.stack.split(`
`),P=w.length-1,z=_.length-1;1<=P&&0<=z&&w[P]!==_[z];)z--;for(;1<=P&&0<=z;P--,z--)if(w[P]!==_[z]){if(P!==1||z!==1)do if(P--,z--,0>z||w[P]!==_[z]){var W=`
`+w[P].replace(" at new "," at ");return l.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",l.displayName)),W}while(1<=P&&0<=z);break}}}finally{Ee=!1,Error.prepareStackTrace=h}return(l=l?l.displayName||l.name:"")?ie(l):""}function We(l){switch(l.tag){case 5:return ie(l.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return l=Pe(l.type,!1),l;case 11:return l=Pe(l.type.render,!1),l;case 1:return l=Pe(l.type,!0),l;default:return""}}function Ge(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case b:return"Fragment";case $:return"Portal";case O:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case ue:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case L:return(l.displayName||"Context")+".Consumer";case V:return(l._context.displayName||"Context")+".Provider";case U:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case le:return c=l.displayName||null,c!==null?c:Ge(l.type)||"Memo";case Ue:c=l._payload,l=l._init;try{return Ge(l(c))}catch{}}return null}function Ve(l){var c=l.type;switch(l.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=c.render,l=l.displayName||l.name||"",c.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ge(c);case 8:return c===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function ne(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function ye(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function He(l){var c=ye(l)?"checked":"value",h=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),v=""+l[c];if(!l.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var w=h.get,_=h.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return w.call(this)},set:function(P){v=""+P,_.call(this,P)}}),Object.defineProperty(l,c,{enumerable:h.enumerable}),{getValue:function(){return v},setValue:function(P){v=""+P},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function bt(l){l._valueTracker||(l._valueTracker=He(l))}function Pt(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var h=c.getValue(),v="";return l&&(v=ye(l)?l.checked?"true":"false":l.value),l=v,l!==h?(c.setValue(l),!0):!1}function kr(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Ba(l,c){var h=c.checked;return pe({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??l._wrapperState.initialChecked})}function Kf(l,c){var h=c.defaultValue==null?"":c.defaultValue,v=c.checked!=null?c.checked:c.defaultChecked;h=ne(c.value!=null?c.value:h),l._wrapperState={initialChecked:v,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Ua(l,c){c=c.checked,c!=null&&k(l,"checked",c,!1)}function Fs(l,c){Ua(l,c);var h=ne(c.value),v=c.type;if(h!=null)v==="number"?(h===0&&l.value===""||l.value!=h)&&(l.value=""+h):l.value!==""+h&&(l.value=""+h);else if(v==="submit"||v==="reset"){l.removeAttribute("value");return}c.hasOwnProperty("value")?qt(l,c.type,h):c.hasOwnProperty("defaultValue")&&qt(l,c.type,ne(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(l.defaultChecked=!!c.defaultChecked)}function Iu(l,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var v=c.type;if(!(v!=="submit"&&v!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+l._wrapperState.initialValue,h||c===l.value||(l.value=c),l.defaultValue=c}h=l.name,h!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,h!==""&&(l.name=h)}function qt(l,c,h){(c!=="number"||kr(l.ownerDocument)!==l)&&(h==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+h&&(l.defaultValue=""+h))}var zt=Array.isArray;function Zr(l,c,h,v){if(l=l.options,c){c={};for(var w=0;w<h.length;w++)c["$"+h[w]]=!0;for(h=0;h<l.length;h++)w=c.hasOwnProperty("$"+l[h].value),l[h].selected!==w&&(l[h].selected=w),w&&v&&(l[h].defaultSelected=!0)}else{for(h=""+ne(h),c=null,w=0;w<l.length;w++){if(l[w].value===h){l[w].selected=!0,v&&(l[w].defaultSelected=!0);return}c!==null||l[w].disabled||(c=l[w])}c!==null&&(c.selected=!0)}}function Su(l,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return pe({},c,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function bu(l,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(t(92));if(zt(h)){if(1<h.length)throw Error(t(93));h=h[0]}c=h}c==null&&(c=""),h=c}l._wrapperState={initialValue:ne(h)}}function Xf(l,c){var h=ne(c.value),v=ne(c.defaultValue);h!=null&&(h=""+h,h!==l.value&&(l.value=h),c.defaultValue==null&&l.defaultValue!==h&&(l.defaultValue=h)),v!=null&&(l.defaultValue=""+v)}function Ro(l){var c=l.textContent;c===l._wrapperState.initialValue&&c!==""&&c!==null&&(l.value=c)}function Pu(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ja(l,c){return l==null||l==="http://www.w3.org/1999/xhtml"?Pu(c):l==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var No,Yf=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,v,w){MSApp.execUnsafeLocalFunction(function(){return l(c,h,v,w)})}:l})(function(l,c){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=c;else{for(No=No||document.createElement("div"),No.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=No.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;c.firstChild;)l.appendChild(c.firstChild)}});function Bs(l,c){if(c){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=c;return}}l.textContent=c}var Oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qf=["Webkit","ms","Moz","O"];Object.keys(Oo).forEach(function(l){Qf.forEach(function(c){c=c+l.charAt(0).toUpperCase()+l.substring(1),Oo[c]=Oo[l]})});function Do(l,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||Oo.hasOwnProperty(l)&&Oo[l]?(""+c).trim():c+"px"}function za(l,c){l=l.style;for(var h in c)if(c.hasOwnProperty(h)){var v=h.indexOf("--")===0,w=Do(h,c[h],v);h==="float"&&(h="cssFloat"),v?l.setProperty(h,w):l[h]=w}}var Ru=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jr(l,c){if(c){if(Ru[l]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,l));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function Ha(l,c){if(l.indexOf("-")===-1)return typeof c.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ko=null;function Wa(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Qi=null,Zi=null,Vt=null;function Nu(l){if(l=ic(l)){if(typeof Qi!="function")throw Error(t(280));var c=l.stateNode;c&&(c=Td(c),Qi(l.stateNode,l.type,c))}}function Mo(l){Zi?Vt?Vt.push(l):Vt=[l]:Zi=l}function Lo(){if(Zi){var l=Zi,c=Vt;if(Vt=Zi=null,Nu(l),c)for(l=0;l<c.length;l++)Nu(c[l])}}function Zf(l,c){return l(c)}function Jf(){}var yi=!1;function ed(l,c,h){if(yi)return l(c,h);yi=!0;try{return Zf(l,c,h)}finally{yi=!1,(Zi!==null||Vt!==null)&&(Jf(),Lo())}}function Us(l,c){var h=l.stateNode;if(h===null)return null;var v=Td(h);if(v===null)return null;h=v[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(l=l.type,v=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!v;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(t(231,c,typeof h));return h}var Vo=!1;if(a)try{var Fo={};Object.defineProperty(Fo,"passive",{get:function(){Vo=!0}}),window.addEventListener("test",Fo,Fo),window.removeEventListener("test",Fo,Fo)}catch{Vo=!1}function td(l,c,h,v,w,_,P,z,W){var J=Array.prototype.slice.call(arguments,3);try{c.apply(h,J)}catch(ae){this.onError(ae)}}var Ji=!1,wi=null,$a=!1,Mr=null,nd={onError:function(l){Ji=!0,wi=l}};function rd(l,c,h,v,w,_,P,z,W){Ji=!1,wi=null,td.apply(nd,arguments)}function Ou(l,c,h,v,w,_,P,z,W){if(rd.apply(this,arguments),Ji){if(Ji){var J=wi;Ji=!1,wi=null}else throw Error(t(198));$a||($a=!0,Mr=J)}}function ei(l){var c=l,h=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(h=c.return),l=c.return;while(l)}return c.tag===3?h:null}function Du(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function id(l){if(ei(l)!==l)throw Error(t(188))}function od(l){var c=l.alternate;if(!c){if(c=ei(l),c===null)throw Error(t(188));return c!==l?null:l}for(var h=l,v=c;;){var w=h.return;if(w===null)break;var _=w.alternate;if(_===null){if(v=w.return,v!==null){h=v;continue}break}if(w.child===_.child){for(_=w.child;_;){if(_===h)return id(w),l;if(_===v)return id(w),c;_=_.sibling}throw Error(t(188))}if(h.return!==v.return)h=w,v=_;else{for(var P=!1,z=w.child;z;){if(z===h){P=!0,h=w,v=_;break}if(z===v){P=!0,v=w,h=_;break}z=z.sibling}if(!P){for(z=_.child;z;){if(z===h){P=!0,h=_,v=w;break}if(z===v){P=!0,v=_,h=w;break}z=z.sibling}if(!P)throw Error(t(189))}}if(h.alternate!==v)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?l:c}function sd(l){return l=od(l),l!==null?js(l):null}function js(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var c=js(l);if(c!==null)return c;l=l.sibling}return null}var ku=e.unstable_scheduleCallback,Ga=e.unstable_cancelCallback,zs=e.unstable_shouldYield,eo=e.unstable_requestPaint,Et=e.unstable_now,m0=e.unstable_getCurrentPriorityLevel,qa=e.unstable_ImmediatePriority,Mu=e.unstable_UserBlockingPriority,Hs=e.unstable_NormalPriority,Lu=e.unstable_LowPriority,Ka=e.unstable_IdlePriority,Ws=null,wr=null;function ad(l){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(Ws,l,void 0,(l.current.flags&128)===128)}catch{}}var _r=Math.clz32?Math.clz32:$s,_i=Math.log,Lr=Math.LN2;function $s(l){return l>>>=0,l===0?32:31-(_i(l)/Lr|0)|0}var xi=64,Bo=4194304;function ut(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function to(l,c){var h=l.pendingLanes;if(h===0)return 0;var v=0,w=l.suspendedLanes,_=l.pingedLanes,P=h&268435455;if(P!==0){var z=P&~w;z!==0?v=ut(z):(_&=P,_!==0&&(v=ut(_)))}else P=h&~w,P!==0?v=ut(P):_!==0&&(v=ut(_));if(v===0)return 0;if(c!==0&&c!==v&&(c&w)===0&&(w=v&-v,_=c&-c,w>=_||w===16&&(_&4194240)!==0))return c;if((v&4)!==0&&(v|=h&16),c=l.entangledLanes,c!==0)for(l=l.entanglements,c&=v;0<c;)h=31-_r(c),w=1<<h,v|=l[h],c&=~w;return v}function Gs(l,c){switch(l){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qs(l,c){for(var h=l.suspendedLanes,v=l.pingedLanes,w=l.expirationTimes,_=l.pendingLanes;0<_;){var P=31-_r(_),z=1<<P,W=w[P];W===-1?((z&h)===0||(z&v)!==0)&&(w[P]=Gs(z,c)):W<=c&&(l.expiredLanes|=z),_&=~z}}function Vu(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Fu(){var l=xi;return xi<<=1,(xi&4194240)===0&&(xi=64),l}function Bu(l){for(var c=[],h=0;31>h;h++)c.push(l);return c}function Ks(l,c,h){l.pendingLanes|=c,c!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,c=31-_r(c),l[c]=h}function g0(l,c){var h=l.pendingLanes&~c;l.pendingLanes=c,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=c,l.mutableReadLanes&=c,l.entangledLanes&=c,c=l.entanglements;var v=l.eventTimes;for(l=l.expirationTimes;0<h;){var w=31-_r(h),_=1<<w;c[w]=0,v[w]=-1,l[w]=-1,h&=~_}}function Uu(l,c){var h=l.entangledLanes|=c;for(l=l.entanglements;h;){var v=31-_r(h),w=1<<v;w&c|l[v]&c&&(l[v]|=c),h&=~w}}var tt=0;function Ei(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var ju,Xa,zu,Hu,Wu,Ai=!1,Ya=[],Ti=null,Ci=null,In=null,Xs=new Map,no=new Map,xr=[],ld="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uo(l,c){switch(l){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":Xs.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":no.delete(c.pointerId)}}function ti(l,c,h,v,w,_){return l===null||l.nativeEvent!==_?(l={blockedOn:c,domEventName:h,eventSystemFlags:v,nativeEvent:_,targetContainers:[w]},c!==null&&(c=ic(c),c!==null&&Xa(c)),l):(l.eventSystemFlags|=v,c=l.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),l)}function ud(l,c,h,v,w){switch(c){case"focusin":return Ti=ti(Ti,l,c,h,v,w),!0;case"dragenter":return Ci=ti(Ci,l,c,h,v,w),!0;case"mouseover":return In=ti(In,l,c,h,v,w),!0;case"pointerover":var _=w.pointerId;return Xs.set(_,ti(Xs.get(_)||null,l,c,h,v,w)),!0;case"gotpointercapture":return _=w.pointerId,no.set(_,ti(no.get(_)||null,l,c,h,v,w)),!0}return!1}function Qa(l){var c=Js(l.target);if(c!==null){var h=ei(c);if(h!==null){if(c=h.tag,c===13){if(c=Du(h),c!==null){l.blockedOn=c,Wu(l.priority,function(){zu(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function yt(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var h=Za(l.domEventName,l.eventSystemFlags,c[0],l.nativeEvent);if(h===null){h=l.nativeEvent;var v=new h.constructor(h.type,h);ko=v,h.target.dispatchEvent(v),ko=null}else return c=ic(h),c!==null&&Xa(c),l.blockedOn=h,!1;c.shift()}return!0}function cd(l,c,h){yt(l)&&h.delete(c)}function v0(){Ai=!1,Ti!==null&&yt(Ti)&&(Ti=null),Ci!==null&&yt(Ci)&&(Ci=null),In!==null&&yt(In)&&(In=null),Xs.forEach(cd),no.forEach(cd)}function jo(l,c){l.blockedOn===c&&(l.blockedOn=null,Ai||(Ai=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,v0)))}function zo(l){function c(w){return jo(w,l)}if(0<Ya.length){jo(Ya[0],l);for(var h=1;h<Ya.length;h++){var v=Ya[h];v.blockedOn===l&&(v.blockedOn=null)}}for(Ti!==null&&jo(Ti,l),Ci!==null&&jo(Ci,l),In!==null&&jo(In,l),Xs.forEach(c),no.forEach(c),h=0;h<xr.length;h++)v=xr[h],v.blockedOn===l&&(v.blockedOn=null);for(;0<xr.length&&(h=xr[0],h.blockedOn===null);)Qa(h),h.blockedOn===null&&xr.shift()}var ro=j.ReactCurrentBatchConfig,io=!0;function Ii(l,c,h,v){var w=tt,_=ro.transition;ro.transition=null;try{tt=1,$u(l,c,h,v)}finally{tt=w,ro.transition=_}}function fd(l,c,h,v){var w=tt,_=ro.transition;ro.transition=null;try{tt=4,$u(l,c,h,v)}finally{tt=w,ro.transition=_}}function $u(l,c,h,v){if(io){var w=Za(l,c,h,v);if(w===null)b0(l,c,v,Si,h),Uo(l,v);else if(ud(w,l,c,h,v))v.stopPropagation();else if(Uo(l,v),c&4&&-1<ld.indexOf(l)){for(;w!==null;){var _=ic(w);if(_!==null&&ju(_),_=Za(l,c,h,v),_===null&&b0(l,c,v,Si,h),_===w)break;w=_}w!==null&&v.stopPropagation()}else b0(l,c,v,null,h)}}var Si=null;function Za(l,c,h,v){if(Si=null,l=Wa(v),l=Js(l),l!==null)if(c=ei(l),c===null)l=null;else if(h=c.tag,h===13){if(l=Du(c),l!==null)return l;l=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null);return Si=l,null}function Ja(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m0()){case qa:return 1;case Mu:return 4;case Hs:case Lu:return 16;case Ka:return 536870912;default:return 16}default:return 16}}var Er=null,el=null,oo=null;function dd(){if(oo)return oo;var l,c=el,h=c.length,v,w="value"in Er?Er.value:Er.textContent,_=w.length;for(l=0;l<h&&c[l]===w[l];l++);var P=h-l;for(v=1;v<=P&&c[h-v]===w[_-v];v++);return oo=w.slice(l,1<v?1-v:void 0)}function Ys(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function bi(){return!0}function Gu(){return!1}function Fn(l){function c(h,v,w,_,P){this._reactName=h,this._targetInst=w,this.type=v,this.nativeEvent=_,this.target=P,this.currentTarget=null;for(var z in l)l.hasOwnProperty(z)&&(h=l[z],this[z]=h?h(_):_[z]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?bi:Gu,this.isPropagationStopped=Gu,this}return pe(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),c}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qs=Fn(Pi),Ho=pe({},Pi,{view:0,detail:0}),tl=Fn(Ho),nl,rl,Ar,Zs=pe({},Ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$e,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ar&&(Ar&&l.type==="mousemove"?(nl=l.screenX-Ar.screenX,rl=l.screenY-Ar.screenY):rl=nl=0,Ar=l),nl)},movementY:function(l){return"movementY"in l?l.movementY:rl}}),qu=Fn(Zs),hd=pe({},Zs,{dataTransfer:0}),pd=Fn(hd),il=pe({},Ho,{relatedTarget:0}),Sn=Fn(il),md=pe({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),gd=Fn(md),Wo=pe({},Pi,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),m=Fn(Wo),x=pe({},Pi,{data:0}),C=Fn(x),M={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function de(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=ee[l])?!!c[l]:!1}function $e(){return de}var Ht=pe({},Ho,{key:function(l){if(l.key){var c=M[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=Ys(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?X[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$e,charCode:function(l){return l.type==="keypress"?Ys(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Ys(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),ht=Fn(Ht),Kt=pe({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tr=Fn(Kt),so=pe({},Ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$e}),Ri=Fn(so),Ni=pe({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ol=Fn(Ni),Ku=pe({},Zs,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),sP=Fn(Ku),aP=[9,13,27,32],y0=a&&"CompositionEvent"in window,Xu=null;a&&"documentMode"in document&&(Xu=document.documentMode);var lP=a&&"TextEvent"in window&&!Xu,Zy=a&&(!y0||Xu&&8<Xu&&11>=Xu),Jy=" ",ew=!1;function tw(l,c){switch(l){case"keyup":return aP.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nw(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var sl=!1;function uP(l,c){switch(l){case"compositionend":return nw(c);case"keypress":return c.which!==32?null:(ew=!0,Jy);case"textInput":return l=c.data,l===Jy&&ew?null:l;default:return null}}function cP(l,c){if(sl)return l==="compositionend"||!y0&&tw(l,c)?(l=dd(),oo=el=Er=null,sl=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Zy&&c.locale!=="ko"?null:c.data;default:return null}}var fP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rw(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!fP[l.type]:c==="textarea"}function iw(l,c,h,v){Mo(v),c=xd(c,"onChange"),0<c.length&&(h=new Qs("onChange","change",null,h,v),l.push({event:h,listeners:c}))}var Yu=null,Qu=null;function dP(l){Ew(l,0)}function vd(l){var c=fl(l);if(Pt(c))return l}function hP(l,c){if(l==="change")return c}var ow=!1;if(a){var w0;if(a){var _0="oninput"in document;if(!_0){var sw=document.createElement("div");sw.setAttribute("oninput","return;"),_0=typeof sw.oninput=="function"}w0=_0}else w0=!1;ow=w0&&(!document.documentMode||9<document.documentMode)}function aw(){Yu&&(Yu.detachEvent("onpropertychange",lw),Qu=Yu=null)}function lw(l){if(l.propertyName==="value"&&vd(Qu)){var c=[];iw(c,Qu,l,Wa(l)),ed(dP,c)}}function pP(l,c,h){l==="focusin"?(aw(),Yu=c,Qu=h,Yu.attachEvent("onpropertychange",lw)):l==="focusout"&&aw()}function mP(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return vd(Qu)}function gP(l,c){if(l==="click")return vd(c)}function vP(l,c){if(l==="input"||l==="change")return vd(c)}function yP(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var ni=typeof Object.is=="function"?Object.is:yP;function Zu(l,c){if(ni(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var h=Object.keys(l),v=Object.keys(c);if(h.length!==v.length)return!1;for(v=0;v<h.length;v++){var w=h[v];if(!u.call(c,w)||!ni(l[w],c[w]))return!1}return!0}function uw(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function cw(l,c){var h=uw(l);l=0;for(var v;h;){if(h.nodeType===3){if(v=l+h.textContent.length,l<=c&&v>=c)return{node:h,offset:c-l};l=v}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=uw(h)}}function fw(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?fw(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function dw(){for(var l=window,c=kr();c instanceof l.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)l=c.contentWindow;else break;c=kr(l.document)}return c}function x0(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}function wP(l){var c=dw(),h=l.focusedElem,v=l.selectionRange;if(c!==h&&h&&h.ownerDocument&&fw(h.ownerDocument.documentElement,h)){if(v!==null&&x0(h)){if(c=v.start,l=v.end,l===void 0&&(l=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(l,h.value.length);else if(l=(c=h.ownerDocument||document)&&c.defaultView||window,l.getSelection){l=l.getSelection();var w=h.textContent.length,_=Math.min(v.start,w);v=v.end===void 0?_:Math.min(v.end,w),!l.extend&&_>v&&(w=v,v=_,_=w),w=cw(h,_);var P=cw(h,v);w&&P&&(l.rangeCount!==1||l.anchorNode!==w.node||l.anchorOffset!==w.offset||l.focusNode!==P.node||l.focusOffset!==P.offset)&&(c=c.createRange(),c.setStart(w.node,w.offset),l.removeAllRanges(),_>v?(l.addRange(c),l.extend(P.node,P.offset)):(c.setEnd(P.node,P.offset),l.addRange(c)))}}for(c=[],l=h;l=l.parentNode;)l.nodeType===1&&c.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)l=c[h],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var _P=a&&"documentMode"in document&&11>=document.documentMode,al=null,E0=null,Ju=null,A0=!1;function hw(l,c,h){var v=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;A0||al==null||al!==kr(v)||(v=al,"selectionStart"in v&&x0(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Ju&&Zu(Ju,v)||(Ju=v,v=xd(E0,"onSelect"),0<v.length&&(c=new Qs("onSelect","select",null,c,h),l.push({event:c,listeners:v}),c.target=al)))}function yd(l,c){var h={};return h[l.toLowerCase()]=c.toLowerCase(),h["Webkit"+l]="webkit"+c,h["Moz"+l]="moz"+c,h}var ll={animationend:yd("Animation","AnimationEnd"),animationiteration:yd("Animation","AnimationIteration"),animationstart:yd("Animation","AnimationStart"),transitionend:yd("Transition","TransitionEnd")},T0={},pw={};a&&(pw=document.createElement("div").style,"AnimationEvent"in window||(delete ll.animationend.animation,delete ll.animationiteration.animation,delete ll.animationstart.animation),"TransitionEvent"in window||delete ll.transitionend.transition);function wd(l){if(T0[l])return T0[l];if(!ll[l])return l;var c=ll[l],h;for(h in c)if(c.hasOwnProperty(h)&&h in pw)return T0[l]=c[h];return l}var mw=wd("animationend"),gw=wd("animationiteration"),vw=wd("animationstart"),yw=wd("transitionend"),ww=new Map,_w="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $o(l,c){ww.set(l,c),o(c,[l])}for(var C0=0;C0<_w.length;C0++){var I0=_w[C0],xP=I0.toLowerCase(),EP=I0[0].toUpperCase()+I0.slice(1);$o(xP,"on"+EP)}$o(mw,"onAnimationEnd"),$o(gw,"onAnimationIteration"),$o(vw,"onAnimationStart"),$o("dblclick","onDoubleClick"),$o("focusin","onFocus"),$o("focusout","onBlur"),$o(yw,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AP=new Set("cancel close invalid load scroll toggle".split(" ").concat(ec));function xw(l,c,h){var v=l.type||"unknown-event";l.currentTarget=h,Ou(v,c,void 0,l),l.currentTarget=null}function Ew(l,c){c=(c&4)!==0;for(var h=0;h<l.length;h++){var v=l[h],w=v.event;v=v.listeners;e:{var _=void 0;if(c)for(var P=v.length-1;0<=P;P--){var z=v[P],W=z.instance,J=z.currentTarget;if(z=z.listener,W!==_&&w.isPropagationStopped())break e;xw(w,z,J),_=W}else for(P=0;P<v.length;P++){if(z=v[P],W=z.instance,J=z.currentTarget,z=z.listener,W!==_&&w.isPropagationStopped())break e;xw(w,z,J),_=W}}}if($a)throw l=Mr,$a=!1,Mr=null,l}function At(l,c){var h=c[k0];h===void 0&&(h=c[k0]=new Set);var v=l+"__bubble";h.has(v)||(Aw(c,l,2,!1),h.add(v))}function S0(l,c,h){var v=0;c&&(v|=4),Aw(h,l,v,c)}var _d="_reactListening"+Math.random().toString(36).slice(2);function tc(l){if(!l[_d]){l[_d]=!0,r.forEach(function(h){h!=="selectionchange"&&(AP.has(h)||S0(h,!1,l),S0(h,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[_d]||(c[_d]=!0,S0("selectionchange",!1,c))}}function Aw(l,c,h,v){switch(Ja(c)){case 1:var w=Ii;break;case 4:w=fd;break;default:w=$u}h=w.bind(null,c,h,l),w=void 0,!Vo||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),v?w!==void 0?l.addEventListener(c,h,{capture:!0,passive:w}):l.addEventListener(c,h,!0):w!==void 0?l.addEventListener(c,h,{passive:w}):l.addEventListener(c,h,!1)}function b0(l,c,h,v,w){var _=v;if((c&1)===0&&(c&2)===0&&v!==null)e:for(;;){if(v===null)return;var P=v.tag;if(P===3||P===4){var z=v.stateNode.containerInfo;if(z===w||z.nodeType===8&&z.parentNode===w)break;if(P===4)for(P=v.return;P!==null;){var W=P.tag;if((W===3||W===4)&&(W=P.stateNode.containerInfo,W===w||W.nodeType===8&&W.parentNode===w))return;P=P.return}for(;z!==null;){if(P=Js(z),P===null)return;if(W=P.tag,W===5||W===6){v=_=P;continue e}z=z.parentNode}}v=v.return}ed(function(){var J=_,ae=Wa(h),ce=[];e:{var se=ww.get(l);if(se!==void 0){var we=Qs,Ae=l;switch(l){case"keypress":if(Ys(h)===0)break e;case"keydown":case"keyup":we=ht;break;case"focusin":Ae="focus",we=Sn;break;case"focusout":Ae="blur",we=Sn;break;case"beforeblur":case"afterblur":we=Sn;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=pd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=Ri;break;case mw:case gw:case vw:we=gd;break;case yw:we=ol;break;case"scroll":we=tl;break;case"wheel":we=sP;break;case"copy":case"cut":case"paste":we=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Tr}var Se=(c&4)!==0,Wt=!Se&&l==="scroll",K=Se?se!==null?se+"Capture":null:se;Se=[];for(var G=J,Q;G!==null;){Q=G;var fe=Q.stateNode;if(Q.tag===5&&fe!==null&&(Q=fe,K!==null&&(fe=Us(G,K),fe!=null&&Se.push(nc(G,fe,Q)))),Wt)break;G=G.return}0<Se.length&&(se=new we(se,Ae,null,h,ae),ce.push({event:se,listeners:Se}))}}if((c&7)===0){e:{if(se=l==="mouseover"||l==="pointerover",we=l==="mouseout"||l==="pointerout",se&&h!==ko&&(Ae=h.relatedTarget||h.fromElement)&&(Js(Ae)||Ae[ao]))break e;if((we||se)&&(se=ae.window===ae?ae:(se=ae.ownerDocument)?se.defaultView||se.parentWindow:window,we?(Ae=h.relatedTarget||h.toElement,we=J,Ae=Ae?Js(Ae):null,Ae!==null&&(Wt=ei(Ae),Ae!==Wt||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(we=null,Ae=J),we!==Ae)){if(Se=qu,fe="onMouseLeave",K="onMouseEnter",G="mouse",(l==="pointerout"||l==="pointerover")&&(Se=Tr,fe="onPointerLeave",K="onPointerEnter",G="pointer"),Wt=we==null?se:fl(we),Q=Ae==null?se:fl(Ae),se=new Se(fe,G+"leave",we,h,ae),se.target=Wt,se.relatedTarget=Q,fe=null,Js(ae)===J&&(Se=new Se(K,G+"enter",Ae,h,ae),Se.target=Q,Se.relatedTarget=Wt,fe=Se),Wt=fe,we&&Ae)t:{for(Se=we,K=Ae,G=0,Q=Se;Q;Q=ul(Q))G++;for(Q=0,fe=K;fe;fe=ul(fe))Q++;for(;0<G-Q;)Se=ul(Se),G--;for(;0<Q-G;)K=ul(K),Q--;for(;G--;){if(Se===K||K!==null&&Se===K.alternate)break t;Se=ul(Se),K=ul(K)}Se=null}else Se=null;we!==null&&Tw(ce,se,we,Se,!1),Ae!==null&&Wt!==null&&Tw(ce,Wt,Ae,Se,!0)}}e:{if(se=J?fl(J):window,we=se.nodeName&&se.nodeName.toLowerCase(),we==="select"||we==="input"&&se.type==="file")var Re=hP;else if(rw(se))if(ow)Re=vP;else{Re=mP;var ke=pP}else(we=se.nodeName)&&we.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Re=gP);if(Re&&(Re=Re(l,J))){iw(ce,Re,h,ae);break e}ke&&ke(l,se,J),l==="focusout"&&(ke=se._wrapperState)&&ke.controlled&&se.type==="number"&&qt(se,"number",se.value)}switch(ke=J?fl(J):window,l){case"focusin":(rw(ke)||ke.contentEditable==="true")&&(al=ke,E0=J,Ju=null);break;case"focusout":Ju=E0=al=null;break;case"mousedown":A0=!0;break;case"contextmenu":case"mouseup":case"dragend":A0=!1,hw(ce,h,ae);break;case"selectionchange":if(_P)break;case"keydown":case"keyup":hw(ce,h,ae)}var Me;if(y0)e:{switch(l){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else sl?tw(l,h)&&(je="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(je="onCompositionStart");je&&(Zy&&h.locale!=="ko"&&(sl||je!=="onCompositionStart"?je==="onCompositionEnd"&&sl&&(Me=dd()):(Er=ae,el="value"in Er?Er.value:Er.textContent,sl=!0)),ke=xd(J,je),0<ke.length&&(je=new C(je,l,null,h,ae),ce.push({event:je,listeners:ke}),Me?je.data=Me:(Me=nw(h),Me!==null&&(je.data=Me)))),(Me=lP?uP(l,h):cP(l,h))&&(J=xd(J,"onBeforeInput"),0<J.length&&(ae=new C("onBeforeInput","beforeinput",null,h,ae),ce.push({event:ae,listeners:J}),ae.data=Me))}Ew(ce,c)})}function nc(l,c,h){return{instance:l,listener:c,currentTarget:h}}function xd(l,c){for(var h=c+"Capture",v=[];l!==null;){var w=l,_=w.stateNode;w.tag===5&&_!==null&&(w=_,_=Us(l,h),_!=null&&v.unshift(nc(l,_,w)),_=Us(l,c),_!=null&&v.push(nc(l,_,w))),l=l.return}return v}function ul(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function Tw(l,c,h,v,w){for(var _=c._reactName,P=[];h!==null&&h!==v;){var z=h,W=z.alternate,J=z.stateNode;if(W!==null&&W===v)break;z.tag===5&&J!==null&&(z=J,w?(W=Us(h,_),W!=null&&P.unshift(nc(h,W,z))):w||(W=Us(h,_),W!=null&&P.push(nc(h,W,z)))),h=h.return}P.length!==0&&l.push({event:c,listeners:P})}var TP=/\r\n?/g,CP=/\u0000|\uFFFD/g;function Cw(l){return(typeof l=="string"?l:""+l).replace(TP,`
`).replace(CP,"")}function Ed(l,c,h){if(c=Cw(c),Cw(l)!==c&&h)throw Error(t(425))}function Ad(){}var P0=null,R0=null;function N0(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var O0=typeof setTimeout=="function"?setTimeout:void 0,IP=typeof clearTimeout=="function"?clearTimeout:void 0,Iw=typeof Promise=="function"?Promise:void 0,SP=typeof queueMicrotask=="function"?queueMicrotask:typeof Iw<"u"?function(l){return Iw.resolve(null).then(l).catch(bP)}:O0;function bP(l){setTimeout(function(){throw l})}function D0(l,c){var h=c,v=0;do{var w=h.nextSibling;if(l.removeChild(h),w&&w.nodeType===8)if(h=w.data,h==="/$"){if(v===0){l.removeChild(w),zo(c);return}v--}else h!=="$"&&h!=="$?"&&h!=="$!"||v++;h=w}while(h);zo(c)}function Go(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return l}function Sw(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return l;c--}else h==="/$"&&c++}l=l.previousSibling}return null}var cl=Math.random().toString(36).slice(2),Oi="__reactFiber$"+cl,rc="__reactProps$"+cl,ao="__reactContainer$"+cl,k0="__reactEvents$"+cl,PP="__reactListeners$"+cl,RP="__reactHandles$"+cl;function Js(l){var c=l[Oi];if(c)return c;for(var h=l.parentNode;h;){if(c=h[ao]||h[Oi]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(l=Sw(l);l!==null;){if(h=l[Oi])return h;l=Sw(l)}return c}l=h,h=l.parentNode}return null}function ic(l){return l=l[Oi]||l[ao],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function fl(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(t(33))}function Td(l){return l[rc]||null}var M0=[],dl=-1;function qo(l){return{current:l}}function Tt(l){0>dl||(l.current=M0[dl],M0[dl]=null,dl--)}function _t(l,c){dl++,M0[dl]=l.current,l.current=c}var Ko={},Bn=qo(Ko),or=qo(!1),ea=Ko;function hl(l,c){var h=l.type.contextTypes;if(!h)return Ko;var v=l.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===c)return v.__reactInternalMemoizedMaskedChildContext;var w={},_;for(_ in h)w[_]=c[_];return v&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=w),w}function sr(l){return l=l.childContextTypes,l!=null}function Cd(){Tt(or),Tt(Bn)}function bw(l,c,h){if(Bn.current!==Ko)throw Error(t(168));_t(Bn,c),_t(or,h)}function Pw(l,c,h){var v=l.stateNode;if(c=c.childContextTypes,typeof v.getChildContext!="function")return h;v=v.getChildContext();for(var w in v)if(!(w in c))throw Error(t(108,Ve(l)||"Unknown",w));return pe({},h,v)}function Id(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Ko,ea=Bn.current,_t(Bn,l),_t(or,or.current),!0}function Rw(l,c,h){var v=l.stateNode;if(!v)throw Error(t(169));h?(l=Pw(l,c,ea),v.__reactInternalMemoizedMergedChildContext=l,Tt(or),Tt(Bn),_t(Bn,l)):Tt(or),_t(or,h)}var lo=null,Sd=!1,L0=!1;function Nw(l){lo===null?lo=[l]:lo.push(l)}function NP(l){Sd=!0,Nw(l)}function Xo(){if(!L0&&lo!==null){L0=!0;var l=0,c=tt;try{var h=lo;for(tt=1;l<h.length;l++){var v=h[l];do v=v(!0);while(v!==null)}lo=null,Sd=!1}catch(w){throw lo!==null&&(lo=lo.slice(l+1)),ku(qa,Xo),w}finally{tt=c,L0=!1}}return null}var pl=[],ml=0,bd=null,Pd=0,Vr=[],Fr=0,ta=null,uo=1,co="";function na(l,c){pl[ml++]=Pd,pl[ml++]=bd,bd=l,Pd=c}function Ow(l,c,h){Vr[Fr++]=uo,Vr[Fr++]=co,Vr[Fr++]=ta,ta=l;var v=uo;l=co;var w=32-_r(v)-1;v&=~(1<<w),h+=1;var _=32-_r(c)+w;if(30<_){var P=w-w%5;_=(v&(1<<P)-1).toString(32),v>>=P,w-=P,uo=1<<32-_r(c)+w|h<<w|v,co=_+l}else uo=1<<_|h<<w|v,co=l}function V0(l){l.return!==null&&(na(l,1),Ow(l,1,0))}function F0(l){for(;l===bd;)bd=pl[--ml],pl[ml]=null,Pd=pl[--ml],pl[ml]=null;for(;l===ta;)ta=Vr[--Fr],Vr[Fr]=null,co=Vr[--Fr],Vr[Fr]=null,uo=Vr[--Fr],Vr[Fr]=null}var Cr=null,Ir=null,Rt=!1,ri=null;function Dw(l,c){var h=zr(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=l,c=l.deletions,c===null?(l.deletions=[h],l.flags|=16):c.push(h)}function kw(l,c){switch(l.tag){case 5:var h=l.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(l.stateNode=c,Cr=l,Ir=Go(c.firstChild),!0):!1;case 6:return c=l.pendingProps===""||c.nodeType!==3?null:c,c!==null?(l.stateNode=c,Cr=l,Ir=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=ta!==null?{id:uo,overflow:co}:null,l.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=zr(18,null,null,0),h.stateNode=c,h.return=l,l.child=h,Cr=l,Ir=null,!0):!1;default:return!1}}function B0(l){return(l.mode&1)!==0&&(l.flags&128)===0}function U0(l){if(Rt){var c=Ir;if(c){var h=c;if(!kw(l,c)){if(B0(l))throw Error(t(418));c=Go(h.nextSibling);var v=Cr;c&&kw(l,c)?Dw(v,h):(l.flags=l.flags&-4097|2,Rt=!1,Cr=l)}}else{if(B0(l))throw Error(t(418));l.flags=l.flags&-4097|2,Rt=!1,Cr=l}}}function Mw(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Cr=l}function Rd(l){if(l!==Cr)return!1;if(!Rt)return Mw(l),Rt=!0,!1;var c;if((c=l.tag!==3)&&!(c=l.tag!==5)&&(c=l.type,c=c!=="head"&&c!=="body"&&!N0(l.type,l.memoizedProps)),c&&(c=Ir)){if(B0(l))throw Lw(),Error(t(418));for(;c;)Dw(l,c),c=Go(c.nextSibling)}if(Mw(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(t(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8){var h=l.data;if(h==="/$"){if(c===0){Ir=Go(l.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}l=l.nextSibling}Ir=null}}else Ir=Cr?Go(l.stateNode.nextSibling):null;return!0}function Lw(){for(var l=Ir;l;)l=Go(l.nextSibling)}function gl(){Ir=Cr=null,Rt=!1}function j0(l){ri===null?ri=[l]:ri.push(l)}var OP=j.ReactCurrentBatchConfig;function oc(l,c,h){if(l=h.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var v=h.stateNode}if(!v)throw Error(t(147,l));var w=v,_=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===_?c.ref:(c=function(P){var z=w.refs;P===null?delete z[_]:z[_]=P},c._stringRef=_,c)}if(typeof l!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,l))}return l}function Nd(l,c){throw l=Object.prototype.toString.call(c),Error(t(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l))}function Vw(l){var c=l._init;return c(l._payload)}function Fw(l){function c(K,G){if(l){var Q=K.deletions;Q===null?(K.deletions=[G],K.flags|=16):Q.push(G)}}function h(K,G){if(!l)return null;for(;G!==null;)c(K,G),G=G.sibling;return null}function v(K,G){for(K=new Map;G!==null;)G.key!==null?K.set(G.key,G):K.set(G.index,G),G=G.sibling;return K}function w(K,G){return K=rs(K,G),K.index=0,K.sibling=null,K}function _(K,G,Q){return K.index=Q,l?(Q=K.alternate,Q!==null?(Q=Q.index,Q<G?(K.flags|=2,G):Q):(K.flags|=2,G)):(K.flags|=1048576,G)}function P(K){return l&&K.alternate===null&&(K.flags|=2),K}function z(K,G,Q,fe){return G===null||G.tag!==6?(G=O1(Q,K.mode,fe),G.return=K,G):(G=w(G,Q),G.return=K,G)}function W(K,G,Q,fe){var Re=Q.type;return Re===b?ae(K,G,Q.props.children,fe,Q.key):G!==null&&(G.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Ue&&Vw(Re)===G.type)?(fe=w(G,Q.props),fe.ref=oc(K,G,Q),fe.return=K,fe):(fe=th(Q.type,Q.key,Q.props,null,K.mode,fe),fe.ref=oc(K,G,Q),fe.return=K,fe)}function J(K,G,Q,fe){return G===null||G.tag!==4||G.stateNode.containerInfo!==Q.containerInfo||G.stateNode.implementation!==Q.implementation?(G=D1(Q,K.mode,fe),G.return=K,G):(G=w(G,Q.children||[]),G.return=K,G)}function ae(K,G,Q,fe,Re){return G===null||G.tag!==7?(G=ca(Q,K.mode,fe,Re),G.return=K,G):(G=w(G,Q),G.return=K,G)}function ce(K,G,Q){if(typeof G=="string"&&G!==""||typeof G=="number")return G=O1(""+G,K.mode,Q),G.return=K,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case H:return Q=th(G.type,G.key,G.props,null,K.mode,Q),Q.ref=oc(K,null,G),Q.return=K,Q;case $:return G=D1(G,K.mode,Q),G.return=K,G;case Ue:var fe=G._init;return ce(K,fe(G._payload),Q)}if(zt(G)||ve(G))return G=ca(G,K.mode,Q,null),G.return=K,G;Nd(K,G)}return null}function se(K,G,Q,fe){var Re=G!==null?G.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Re!==null?null:z(K,G,""+Q,fe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case H:return Q.key===Re?W(K,G,Q,fe):null;case $:return Q.key===Re?J(K,G,Q,fe):null;case Ue:return Re=Q._init,se(K,G,Re(Q._payload),fe)}if(zt(Q)||ve(Q))return Re!==null?null:ae(K,G,Q,fe,null);Nd(K,Q)}return null}function we(K,G,Q,fe,Re){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return K=K.get(Q)||null,z(G,K,""+fe,Re);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case H:return K=K.get(fe.key===null?Q:fe.key)||null,W(G,K,fe,Re);case $:return K=K.get(fe.key===null?Q:fe.key)||null,J(G,K,fe,Re);case Ue:var ke=fe._init;return we(K,G,Q,ke(fe._payload),Re)}if(zt(fe)||ve(fe))return K=K.get(Q)||null,ae(G,K,fe,Re,null);Nd(G,fe)}return null}function Ae(K,G,Q,fe){for(var Re=null,ke=null,Me=G,je=G=0,vn=null;Me!==null&&je<Q.length;je++){Me.index>je?(vn=Me,Me=null):vn=Me.sibling;var at=se(K,Me,Q[je],fe);if(at===null){Me===null&&(Me=vn);break}l&&Me&&at.alternate===null&&c(K,Me),G=_(at,G,je),ke===null?Re=at:ke.sibling=at,ke=at,Me=vn}if(je===Q.length)return h(K,Me),Rt&&na(K,je),Re;if(Me===null){for(;je<Q.length;je++)Me=ce(K,Q[je],fe),Me!==null&&(G=_(Me,G,je),ke===null?Re=Me:ke.sibling=Me,ke=Me);return Rt&&na(K,je),Re}for(Me=v(K,Me);je<Q.length;je++)vn=we(Me,K,je,Q[je],fe),vn!==null&&(l&&vn.alternate!==null&&Me.delete(vn.key===null?je:vn.key),G=_(vn,G,je),ke===null?Re=vn:ke.sibling=vn,ke=vn);return l&&Me.forEach(function(is){return c(K,is)}),Rt&&na(K,je),Re}function Se(K,G,Q,fe){var Re=ve(Q);if(typeof Re!="function")throw Error(t(150));if(Q=Re.call(Q),Q==null)throw Error(t(151));for(var ke=Re=null,Me=G,je=G=0,vn=null,at=Q.next();Me!==null&&!at.done;je++,at=Q.next()){Me.index>je?(vn=Me,Me=null):vn=Me.sibling;var is=se(K,Me,at.value,fe);if(is===null){Me===null&&(Me=vn);break}l&&Me&&is.alternate===null&&c(K,Me),G=_(is,G,je),ke===null?Re=is:ke.sibling=is,ke=is,Me=vn}if(at.done)return h(K,Me),Rt&&na(K,je),Re;if(Me===null){for(;!at.done;je++,at=Q.next())at=ce(K,at.value,fe),at!==null&&(G=_(at,G,je),ke===null?Re=at:ke.sibling=at,ke=at);return Rt&&na(K,je),Re}for(Me=v(K,Me);!at.done;je++,at=Q.next())at=we(Me,K,je,at.value,fe),at!==null&&(l&&at.alternate!==null&&Me.delete(at.key===null?je:at.key),G=_(at,G,je),ke===null?Re=at:ke.sibling=at,ke=at);return l&&Me.forEach(function(f4){return c(K,f4)}),Rt&&na(K,je),Re}function Wt(K,G,Q,fe){if(typeof Q=="object"&&Q!==null&&Q.type===b&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case H:e:{for(var Re=Q.key,ke=G;ke!==null;){if(ke.key===Re){if(Re=Q.type,Re===b){if(ke.tag===7){h(K,ke.sibling),G=w(ke,Q.props.children),G.return=K,K=G;break e}}else if(ke.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Ue&&Vw(Re)===ke.type){h(K,ke.sibling),G=w(ke,Q.props),G.ref=oc(K,ke,Q),G.return=K,K=G;break e}h(K,ke);break}else c(K,ke);ke=ke.sibling}Q.type===b?(G=ca(Q.props.children,K.mode,fe,Q.key),G.return=K,K=G):(fe=th(Q.type,Q.key,Q.props,null,K.mode,fe),fe.ref=oc(K,G,Q),fe.return=K,K=fe)}return P(K);case $:e:{for(ke=Q.key;G!==null;){if(G.key===ke)if(G.tag===4&&G.stateNode.containerInfo===Q.containerInfo&&G.stateNode.implementation===Q.implementation){h(K,G.sibling),G=w(G,Q.children||[]),G.return=K,K=G;break e}else{h(K,G);break}else c(K,G);G=G.sibling}G=D1(Q,K.mode,fe),G.return=K,K=G}return P(K);case Ue:return ke=Q._init,Wt(K,G,ke(Q._payload),fe)}if(zt(Q))return Ae(K,G,Q,fe);if(ve(Q))return Se(K,G,Q,fe);Nd(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,G!==null&&G.tag===6?(h(K,G.sibling),G=w(G,Q),G.return=K,K=G):(h(K,G),G=O1(Q,K.mode,fe),G.return=K,K=G),P(K)):h(K,G)}return Wt}var vl=Fw(!0),Bw=Fw(!1),Od=qo(null),Dd=null,yl=null,z0=null;function H0(){z0=yl=Dd=null}function W0(l){var c=Od.current;Tt(Od),l._currentValue=c}function $0(l,c,h){for(;l!==null;){var v=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,v!==null&&(v.childLanes|=c)):v!==null&&(v.childLanes&c)!==c&&(v.childLanes|=c),l===h)break;l=l.return}}function wl(l,c){Dd=l,z0=yl=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&c)!==0&&(ar=!0),l.firstContext=null)}function Br(l){var c=l._currentValue;if(z0!==l)if(l={context:l,memoizedValue:c,next:null},yl===null){if(Dd===null)throw Error(t(308));yl=l,Dd.dependencies={lanes:0,firstContext:l}}else yl=yl.next=l;return c}var ra=null;function G0(l){ra===null?ra=[l]:ra.push(l)}function Uw(l,c,h,v){var w=c.interleaved;return w===null?(h.next=h,G0(c)):(h.next=w.next,w.next=h),c.interleaved=h,fo(l,v)}function fo(l,c){l.lanes|=c;var h=l.alternate;for(h!==null&&(h.lanes|=c),h=l,l=l.return;l!==null;)l.childLanes|=c,h=l.alternate,h!==null&&(h.childLanes|=c),h=l,l=l.return;return h.tag===3?h.stateNode:null}var Yo=!1;function q0(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jw(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function ho(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function Qo(l,c,h){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(ot&2)!==0){var w=v.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),v.pending=c,fo(l,h)}return w=v.interleaved,w===null?(c.next=c,G0(v)):(c.next=w.next,w.next=c),v.interleaved=c,fo(l,h)}function kd(l,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var v=c.lanes;v&=l.pendingLanes,h|=v,c.lanes=h,Uu(l,h)}}function zw(l,c){var h=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,h===v)){var w=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var P={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};_===null?w=_=P:_=_.next=P,h=h.next}while(h!==null);_===null?w=_=c:_=_.next=c}else w=_=c;h={baseState:v.baseState,firstBaseUpdate:w,lastBaseUpdate:_,shared:v.shared,effects:v.effects},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=c}function Md(l,c,h,v){var w=l.updateQueue;Yo=!1;var _=w.firstBaseUpdate,P=w.lastBaseUpdate,z=w.shared.pending;if(z!==null){w.shared.pending=null;var W=z,J=W.next;W.next=null,P===null?_=J:P.next=J,P=W;var ae=l.alternate;ae!==null&&(ae=ae.updateQueue,z=ae.lastBaseUpdate,z!==P&&(z===null?ae.firstBaseUpdate=J:z.next=J,ae.lastBaseUpdate=W))}if(_!==null){var ce=w.baseState;P=0,ae=J=W=null,z=_;do{var se=z.lane,we=z.eventTime;if((v&se)===se){ae!==null&&(ae=ae.next={eventTime:we,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var Ae=l,Se=z;switch(se=c,we=h,Se.tag){case 1:if(Ae=Se.payload,typeof Ae=="function"){ce=Ae.call(we,ce,se);break e}ce=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Se.payload,se=typeof Ae=="function"?Ae.call(we,ce,se):Ae,se==null)break e;ce=pe({},ce,se);break e;case 2:Yo=!0}}z.callback!==null&&z.lane!==0&&(l.flags|=64,se=w.effects,se===null?w.effects=[z]:se.push(z))}else we={eventTime:we,lane:se,tag:z.tag,payload:z.payload,callback:z.callback,next:null},ae===null?(J=ae=we,W=ce):ae=ae.next=we,P|=se;if(z=z.next,z===null){if(z=w.shared.pending,z===null)break;se=z,z=se.next,se.next=null,w.lastBaseUpdate=se,w.shared.pending=null}}while(!0);if(ae===null&&(W=ce),w.baseState=W,w.firstBaseUpdate=J,w.lastBaseUpdate=ae,c=w.shared.interleaved,c!==null){w=c;do P|=w.lane,w=w.next;while(w!==c)}else _===null&&(w.shared.lanes=0);sa|=P,l.lanes=P,l.memoizedState=ce}}function Hw(l,c,h){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var v=l[c],w=v.callback;if(w!==null){if(v.callback=null,v=h,typeof w!="function")throw Error(t(191,w));w.call(v)}}}var sc={},Di=qo(sc),ac=qo(sc),lc=qo(sc);function ia(l){if(l===sc)throw Error(t(174));return l}function K0(l,c){switch(_t(lc,c),_t(ac,l),_t(Di,sc),l=c.nodeType,l){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:ja(null,"");break;default:l=l===8?c.parentNode:c,c=l.namespaceURI||null,l=l.tagName,c=ja(c,l)}Tt(Di),_t(Di,c)}function _l(){Tt(Di),Tt(ac),Tt(lc)}function Ww(l){ia(lc.current);var c=ia(Di.current),h=ja(c,l.type);c!==h&&(_t(ac,l),_t(Di,h))}function X0(l){ac.current===l&&(Tt(Di),Tt(ac))}var Ot=qo(0);function Ld(l){for(var c=l;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Y0=[];function Q0(){for(var l=0;l<Y0.length;l++)Y0[l]._workInProgressVersionPrimary=null;Y0.length=0}var Vd=j.ReactCurrentDispatcher,Z0=j.ReactCurrentBatchConfig,oa=0,Dt=null,tn=null,mn=null,Fd=!1,uc=!1,cc=0,DP=0;function Un(){throw Error(t(321))}function J0(l,c){if(c===null)return!1;for(var h=0;h<c.length&&h<l.length;h++)if(!ni(l[h],c[h]))return!1;return!0}function e1(l,c,h,v,w,_){if(oa=_,Dt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Vd.current=l===null||l.memoizedState===null?VP:FP,l=h(v,w),uc){_=0;do{if(uc=!1,cc=0,25<=_)throw Error(t(301));_+=1,mn=tn=null,c.updateQueue=null,Vd.current=BP,l=h(v,w)}while(uc)}if(Vd.current=jd,c=tn!==null&&tn.next!==null,oa=0,mn=tn=Dt=null,Fd=!1,c)throw Error(t(300));return l}function t1(){var l=cc!==0;return cc=0,l}function ki(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?Dt.memoizedState=mn=l:mn=mn.next=l,mn}function Ur(){if(tn===null){var l=Dt.alternate;l=l!==null?l.memoizedState:null}else l=tn.next;var c=mn===null?Dt.memoizedState:mn.next;if(c!==null)mn=c,tn=l;else{if(l===null)throw Error(t(310));tn=l,l={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},mn===null?Dt.memoizedState=mn=l:mn=mn.next=l}return mn}function fc(l,c){return typeof c=="function"?c(l):c}function n1(l){var c=Ur(),h=c.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=l;var v=tn,w=v.baseQueue,_=h.pending;if(_!==null){if(w!==null){var P=w.next;w.next=_.next,_.next=P}v.baseQueue=w=_,h.pending=null}if(w!==null){_=w.next,v=v.baseState;var z=P=null,W=null,J=_;do{var ae=J.lane;if((oa&ae)===ae)W!==null&&(W=W.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),v=J.hasEagerState?J.eagerState:l(v,J.action);else{var ce={lane:ae,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};W===null?(z=W=ce,P=v):W=W.next=ce,Dt.lanes|=ae,sa|=ae}J=J.next}while(J!==null&&J!==_);W===null?P=v:W.next=z,ni(v,c.memoizedState)||(ar=!0),c.memoizedState=v,c.baseState=P,c.baseQueue=W,h.lastRenderedState=v}if(l=h.interleaved,l!==null){w=l;do _=w.lane,Dt.lanes|=_,sa|=_,w=w.next;while(w!==l)}else w===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function r1(l){var c=Ur(),h=c.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=l;var v=h.dispatch,w=h.pending,_=c.memoizedState;if(w!==null){h.pending=null;var P=w=w.next;do _=l(_,P.action),P=P.next;while(P!==w);ni(_,c.memoizedState)||(ar=!0),c.memoizedState=_,c.baseQueue===null&&(c.baseState=_),h.lastRenderedState=_}return[_,v]}function $w(){}function Gw(l,c){var h=Dt,v=Ur(),w=c(),_=!ni(v.memoizedState,w);if(_&&(v.memoizedState=w,ar=!0),v=v.queue,i1(Xw.bind(null,h,v,l),[l]),v.getSnapshot!==c||_||mn!==null&&mn.memoizedState.tag&1){if(h.flags|=2048,dc(9,Kw.bind(null,h,v,w,c),void 0,null),gn===null)throw Error(t(349));(oa&30)!==0||qw(h,c,w)}return w}function qw(l,c,h){l.flags|=16384,l={getSnapshot:c,value:h},c=Dt.updateQueue,c===null?(c={lastEffect:null,stores:null},Dt.updateQueue=c,c.stores=[l]):(h=c.stores,h===null?c.stores=[l]:h.push(l))}function Kw(l,c,h,v){c.value=h,c.getSnapshot=v,Yw(c)&&Qw(l)}function Xw(l,c,h){return h(function(){Yw(c)&&Qw(l)})}function Yw(l){var c=l.getSnapshot;l=l.value;try{var h=c();return!ni(l,h)}catch{return!0}}function Qw(l){var c=fo(l,1);c!==null&&ai(c,l,1,-1)}function Zw(l){var c=ki();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fc,lastRenderedState:l},c.queue=l,l=l.dispatch=LP.bind(null,Dt,l),[c.memoizedState,l]}function dc(l,c,h,v){return l={tag:l,create:c,destroy:h,deps:v,next:null},c=Dt.updateQueue,c===null?(c={lastEffect:null,stores:null},Dt.updateQueue=c,c.lastEffect=l.next=l):(h=c.lastEffect,h===null?c.lastEffect=l.next=l:(v=h.next,h.next=l,l.next=v,c.lastEffect=l)),l}function Jw(){return Ur().memoizedState}function Bd(l,c,h,v){var w=ki();Dt.flags|=l,w.memoizedState=dc(1|c,h,void 0,v===void 0?null:v)}function Ud(l,c,h,v){var w=Ur();v=v===void 0?null:v;var _=void 0;if(tn!==null){var P=tn.memoizedState;if(_=P.destroy,v!==null&&J0(v,P.deps)){w.memoizedState=dc(c,h,_,v);return}}Dt.flags|=l,w.memoizedState=dc(1|c,h,_,v)}function e_(l,c){return Bd(8390656,8,l,c)}function i1(l,c){return Ud(2048,8,l,c)}function t_(l,c){return Ud(4,2,l,c)}function n_(l,c){return Ud(4,4,l,c)}function r_(l,c){if(typeof c=="function")return l=l(),c(l),function(){c(null)};if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function i_(l,c,h){return h=h!=null?h.concat([l]):null,Ud(4,4,r_.bind(null,c,l),h)}function o1(){}function o_(l,c){var h=Ur();c=c===void 0?null:c;var v=h.memoizedState;return v!==null&&c!==null&&J0(c,v[1])?v[0]:(h.memoizedState=[l,c],l)}function s_(l,c){var h=Ur();c=c===void 0?null:c;var v=h.memoizedState;return v!==null&&c!==null&&J0(c,v[1])?v[0]:(l=l(),h.memoizedState=[l,c],l)}function a_(l,c,h){return(oa&21)===0?(l.baseState&&(l.baseState=!1,ar=!0),l.memoizedState=h):(ni(h,c)||(h=Fu(),Dt.lanes|=h,sa|=h,l.baseState=!0),c)}function kP(l,c){var h=tt;tt=h!==0&&4>h?h:4,l(!0);var v=Z0.transition;Z0.transition={};try{l(!1),c()}finally{tt=h,Z0.transition=v}}function l_(){return Ur().memoizedState}function MP(l,c,h){var v=ts(l);if(h={lane:v,action:h,hasEagerState:!1,eagerState:null,next:null},u_(l))c_(c,h);else if(h=Uw(l,c,h,v),h!==null){var w=Qn();ai(h,l,v,w),f_(h,c,v)}}function LP(l,c,h){var v=ts(l),w={lane:v,action:h,hasEagerState:!1,eagerState:null,next:null};if(u_(l))c_(c,w);else{var _=l.alternate;if(l.lanes===0&&(_===null||_.lanes===0)&&(_=c.lastRenderedReducer,_!==null))try{var P=c.lastRenderedState,z=_(P,h);if(w.hasEagerState=!0,w.eagerState=z,ni(z,P)){var W=c.interleaved;W===null?(w.next=w,G0(c)):(w.next=W.next,W.next=w),c.interleaved=w;return}}catch{}finally{}h=Uw(l,c,w,v),h!==null&&(w=Qn(),ai(h,l,v,w),f_(h,c,v))}}function u_(l){var c=l.alternate;return l===Dt||c!==null&&c===Dt}function c_(l,c){uc=Fd=!0;var h=l.pending;h===null?c.next=c:(c.next=h.next,h.next=c),l.pending=c}function f_(l,c,h){if((h&4194240)!==0){var v=c.lanes;v&=l.pendingLanes,h|=v,c.lanes=h,Uu(l,h)}}var jd={readContext:Br,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},VP={readContext:Br,useCallback:function(l,c){return ki().memoizedState=[l,c===void 0?null:c],l},useContext:Br,useEffect:e_,useImperativeHandle:function(l,c,h){return h=h!=null?h.concat([l]):null,Bd(4194308,4,r_.bind(null,c,l),h)},useLayoutEffect:function(l,c){return Bd(4194308,4,l,c)},useInsertionEffect:function(l,c){return Bd(4,2,l,c)},useMemo:function(l,c){var h=ki();return c=c===void 0?null:c,l=l(),h.memoizedState=[l,c],l},useReducer:function(l,c,h){var v=ki();return c=h!==void 0?h(c):c,v.memoizedState=v.baseState=c,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},v.queue=l,l=l.dispatch=MP.bind(null,Dt,l),[v.memoizedState,l]},useRef:function(l){var c=ki();return l={current:l},c.memoizedState=l},useState:Zw,useDebugValue:o1,useDeferredValue:function(l){return ki().memoizedState=l},useTransition:function(){var l=Zw(!1),c=l[0];return l=kP.bind(null,l[1]),ki().memoizedState=l,[c,l]},useMutableSource:function(){},useSyncExternalStore:function(l,c,h){var v=Dt,w=ki();if(Rt){if(h===void 0)throw Error(t(407));h=h()}else{if(h=c(),gn===null)throw Error(t(349));(oa&30)!==0||qw(v,c,h)}w.memoizedState=h;var _={value:h,getSnapshot:c};return w.queue=_,e_(Xw.bind(null,v,_,l),[l]),v.flags|=2048,dc(9,Kw.bind(null,v,_,h,c),void 0,null),h},useId:function(){var l=ki(),c=gn.identifierPrefix;if(Rt){var h=co,v=uo;h=(v&~(1<<32-_r(v)-1)).toString(32)+h,c=":"+c+"R"+h,h=cc++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=DP++,c=":"+c+"r"+h.toString(32)+":";return l.memoizedState=c},unstable_isNewReconciler:!1},FP={readContext:Br,useCallback:o_,useContext:Br,useEffect:i1,useImperativeHandle:i_,useInsertionEffect:t_,useLayoutEffect:n_,useMemo:s_,useReducer:n1,useRef:Jw,useState:function(){return n1(fc)},useDebugValue:o1,useDeferredValue:function(l){var c=Ur();return a_(c,tn.memoizedState,l)},useTransition:function(){var l=n1(fc)[0],c=Ur().memoizedState;return[l,c]},useMutableSource:$w,useSyncExternalStore:Gw,useId:l_,unstable_isNewReconciler:!1},BP={readContext:Br,useCallback:o_,useContext:Br,useEffect:i1,useImperativeHandle:i_,useInsertionEffect:t_,useLayoutEffect:n_,useMemo:s_,useReducer:r1,useRef:Jw,useState:function(){return r1(fc)},useDebugValue:o1,useDeferredValue:function(l){var c=Ur();return tn===null?c.memoizedState=l:a_(c,tn.memoizedState,l)},useTransition:function(){var l=r1(fc)[0],c=Ur().memoizedState;return[l,c]},useMutableSource:$w,useSyncExternalStore:Gw,useId:l_,unstable_isNewReconciler:!1};function ii(l,c){if(l&&l.defaultProps){c=pe({},c),l=l.defaultProps;for(var h in l)c[h]===void 0&&(c[h]=l[h]);return c}return c}function s1(l,c,h,v){c=l.memoizedState,h=h(v,c),h=h==null?c:pe({},c,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var zd={isMounted:function(l){return(l=l._reactInternals)?ei(l)===l:!1},enqueueSetState:function(l,c,h){l=l._reactInternals;var v=Qn(),w=ts(l),_=ho(v,w);_.payload=c,h!=null&&(_.callback=h),c=Qo(l,_,w),c!==null&&(ai(c,l,w,v),kd(c,l,w))},enqueueReplaceState:function(l,c,h){l=l._reactInternals;var v=Qn(),w=ts(l),_=ho(v,w);_.tag=1,_.payload=c,h!=null&&(_.callback=h),c=Qo(l,_,w),c!==null&&(ai(c,l,w,v),kd(c,l,w))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var h=Qn(),v=ts(l),w=ho(h,v);w.tag=2,c!=null&&(w.callback=c),c=Qo(l,w,v),c!==null&&(ai(c,l,v,h),kd(c,l,v))}};function d_(l,c,h,v,w,_,P){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,_,P):c.prototype&&c.prototype.isPureReactComponent?!Zu(h,v)||!Zu(w,_):!0}function h_(l,c,h){var v=!1,w=Ko,_=c.contextType;return typeof _=="object"&&_!==null?_=Br(_):(w=sr(c)?ea:Bn.current,v=c.contextTypes,_=(v=v!=null)?hl(l,w):Ko),c=new c(h,_),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=zd,l.stateNode=c,c._reactInternals=l,v&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=w,l.__reactInternalMemoizedMaskedChildContext=_),c}function p_(l,c,h,v){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,v),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,v),c.state!==l&&zd.enqueueReplaceState(c,c.state,null)}function a1(l,c,h,v){var w=l.stateNode;w.props=h,w.state=l.memoizedState,w.refs={},q0(l);var _=c.contextType;typeof _=="object"&&_!==null?w.context=Br(_):(_=sr(c)?ea:Bn.current,w.context=hl(l,_)),w.state=l.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(s1(l,c,_,h),w.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(c=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),c!==w.state&&zd.enqueueReplaceState(w,w.state,null),Md(l,h,w,v),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308)}function xl(l,c){try{var h="",v=c;do h+=We(v),v=v.return;while(v);var w=h}catch(_){w=`
Error generating stack: `+_.message+`
`+_.stack}return{value:l,source:c,stack:w,digest:null}}function l1(l,c,h){return{value:l,source:null,stack:h??null,digest:c??null}}function u1(l,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var UP=typeof WeakMap=="function"?WeakMap:Map;function m_(l,c,h){h=ho(-1,h),h.tag=3,h.payload={element:null};var v=c.value;return h.callback=function(){Xd||(Xd=!0,T1=v),u1(l,c)},h}function g_(l,c,h){h=ho(-1,h),h.tag=3;var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var w=c.value;h.payload=function(){return v(w)},h.callback=function(){u1(l,c)}}var _=l.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(h.callback=function(){u1(l,c),typeof v!="function"&&(Jo===null?Jo=new Set([this]):Jo.add(this));var P=c.stack;this.componentDidCatch(c.value,{componentStack:P!==null?P:""})}),h}function v_(l,c,h){var v=l.pingCache;if(v===null){v=l.pingCache=new UP;var w=new Set;v.set(c,w)}else w=v.get(c),w===void 0&&(w=new Set,v.set(c,w));w.has(h)||(w.add(h),l=e4.bind(null,l,c,h),c.then(l,l))}function y_(l){do{var c;if((c=l.tag===13)&&(c=l.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return l;l=l.return}while(l!==null);return null}function w_(l,c,h,v,w){return(l.mode&1)===0?(l===c?l.flags|=65536:(l.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=ho(-1,1),c.tag=2,Qo(h,c,1))),h.lanes|=1),l):(l.flags|=65536,l.lanes=w,l)}var jP=j.ReactCurrentOwner,ar=!1;function Yn(l,c,h,v){c.child=l===null?Bw(c,null,h,v):vl(c,l.child,h,v)}function __(l,c,h,v,w){h=h.render;var _=c.ref;return wl(c,w),v=e1(l,c,h,v,_,w),h=t1(),l!==null&&!ar?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~w,po(l,c,w)):(Rt&&h&&V0(c),c.flags|=1,Yn(l,c,v,w),c.child)}function x_(l,c,h,v,w){if(l===null){var _=h.type;return typeof _=="function"&&!N1(_)&&_.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=_,E_(l,c,_,v,w)):(l=th(h.type,null,v,c,c.mode,w),l.ref=c.ref,l.return=c,c.child=l)}if(_=l.child,(l.lanes&w)===0){var P=_.memoizedProps;if(h=h.compare,h=h!==null?h:Zu,h(P,v)&&l.ref===c.ref)return po(l,c,w)}return c.flags|=1,l=rs(_,v),l.ref=c.ref,l.return=c,c.child=l}function E_(l,c,h,v,w){if(l!==null){var _=l.memoizedProps;if(Zu(_,v)&&l.ref===c.ref)if(ar=!1,c.pendingProps=v=_,(l.lanes&w)!==0)(l.flags&131072)!==0&&(ar=!0);else return c.lanes=l.lanes,po(l,c,w)}return c1(l,c,h,v,w)}function A_(l,c,h){var v=c.pendingProps,w=v.children,_=l!==null?l.memoizedState:null;if(v.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(Al,Sr),Sr|=h;else{if((h&1073741824)===0)return l=_!==null?_.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:l,cachePool:null,transitions:null},c.updateQueue=null,_t(Al,Sr),Sr|=l,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=_!==null?_.baseLanes:h,_t(Al,Sr),Sr|=v}else _!==null?(v=_.baseLanes|h,c.memoizedState=null):v=h,_t(Al,Sr),Sr|=v;return Yn(l,c,w,h),c.child}function T_(l,c){var h=c.ref;(l===null&&h!==null||l!==null&&l.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function c1(l,c,h,v,w){var _=sr(h)?ea:Bn.current;return _=hl(c,_),wl(c,w),h=e1(l,c,h,v,_,w),v=t1(),l!==null&&!ar?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~w,po(l,c,w)):(Rt&&v&&V0(c),c.flags|=1,Yn(l,c,h,w),c.child)}function C_(l,c,h,v,w){if(sr(h)){var _=!0;Id(c)}else _=!1;if(wl(c,w),c.stateNode===null)Wd(l,c),h_(c,h,v),a1(c,h,v,w),v=!0;else if(l===null){var P=c.stateNode,z=c.memoizedProps;P.props=z;var W=P.context,J=h.contextType;typeof J=="object"&&J!==null?J=Br(J):(J=sr(h)?ea:Bn.current,J=hl(c,J));var ae=h.getDerivedStateFromProps,ce=typeof ae=="function"||typeof P.getSnapshotBeforeUpdate=="function";ce||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(z!==v||W!==J)&&p_(c,P,v,J),Yo=!1;var se=c.memoizedState;P.state=se,Md(c,v,P,w),W=c.memoizedState,z!==v||se!==W||or.current||Yo?(typeof ae=="function"&&(s1(c,h,ae,v),W=c.memoizedState),(z=Yo||d_(c,h,z,v,se,W,J))?(ce||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(c.flags|=4194308)):(typeof P.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=v,c.memoizedState=W),P.props=v,P.state=W,P.context=J,v=z):(typeof P.componentDidMount=="function"&&(c.flags|=4194308),v=!1)}else{P=c.stateNode,jw(l,c),z=c.memoizedProps,J=c.type===c.elementType?z:ii(c.type,z),P.props=J,ce=c.pendingProps,se=P.context,W=h.contextType,typeof W=="object"&&W!==null?W=Br(W):(W=sr(h)?ea:Bn.current,W=hl(c,W));var we=h.getDerivedStateFromProps;(ae=typeof we=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(z!==ce||se!==W)&&p_(c,P,v,W),Yo=!1,se=c.memoizedState,P.state=se,Md(c,v,P,w);var Ae=c.memoizedState;z!==ce||se!==Ae||or.current||Yo?(typeof we=="function"&&(s1(c,h,we,v),Ae=c.memoizedState),(J=Yo||d_(c,h,J,v,se,Ae,W)||!1)?(ae||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(v,Ae,W),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(v,Ae,W)),typeof P.componentDidUpdate=="function"&&(c.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof P.componentDidUpdate!="function"||z===l.memoizedProps&&se===l.memoizedState||(c.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||z===l.memoizedProps&&se===l.memoizedState||(c.flags|=1024),c.memoizedProps=v,c.memoizedState=Ae),P.props=v,P.state=Ae,P.context=W,v=J):(typeof P.componentDidUpdate!="function"||z===l.memoizedProps&&se===l.memoizedState||(c.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||z===l.memoizedProps&&se===l.memoizedState||(c.flags|=1024),v=!1)}return f1(l,c,h,v,_,w)}function f1(l,c,h,v,w,_){T_(l,c);var P=(c.flags&128)!==0;if(!v&&!P)return w&&Rw(c,h,!1),po(l,c,_);v=c.stateNode,jP.current=c;var z=P&&typeof h.getDerivedStateFromError!="function"?null:v.render();return c.flags|=1,l!==null&&P?(c.child=vl(c,l.child,null,_),c.child=vl(c,null,z,_)):Yn(l,c,z,_),c.memoizedState=v.state,w&&Rw(c,h,!0),c.child}function I_(l){var c=l.stateNode;c.pendingContext?bw(l,c.pendingContext,c.pendingContext!==c.context):c.context&&bw(l,c.context,!1),K0(l,c.containerInfo)}function S_(l,c,h,v,w){return gl(),j0(w),c.flags|=256,Yn(l,c,h,v),c.child}var d1={dehydrated:null,treeContext:null,retryLane:0};function h1(l){return{baseLanes:l,cachePool:null,transitions:null}}function b_(l,c,h){var v=c.pendingProps,w=Ot.current,_=!1,P=(c.flags&128)!==0,z;if((z=P)||(z=l!==null&&l.memoizedState===null?!1:(w&2)!==0),z?(_=!0,c.flags&=-129):(l===null||l.memoizedState!==null)&&(w|=1),_t(Ot,w&1),l===null)return U0(c),l=c.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((c.mode&1)===0?c.lanes=1:l.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(P=v.children,l=v.fallback,_?(v=c.mode,_=c.child,P={mode:"hidden",children:P},(v&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=P):_=nh(P,v,0,null),l=ca(l,v,h,null),_.return=c,l.return=c,_.sibling=l,c.child=_,c.child.memoizedState=h1(h),c.memoizedState=d1,l):p1(c,P));if(w=l.memoizedState,w!==null&&(z=w.dehydrated,z!==null))return zP(l,c,P,v,z,w,h);if(_){_=v.fallback,P=c.mode,w=l.child,z=w.sibling;var W={mode:"hidden",children:v.children};return(P&1)===0&&c.child!==w?(v=c.child,v.childLanes=0,v.pendingProps=W,c.deletions=null):(v=rs(w,W),v.subtreeFlags=w.subtreeFlags&14680064),z!==null?_=rs(z,_):(_=ca(_,P,h,null),_.flags|=2),_.return=c,v.return=c,v.sibling=_,c.child=v,v=_,_=c.child,P=l.child.memoizedState,P=P===null?h1(h):{baseLanes:P.baseLanes|h,cachePool:null,transitions:P.transitions},_.memoizedState=P,_.childLanes=l.childLanes&~h,c.memoizedState=d1,v}return _=l.child,l=_.sibling,v=rs(_,{mode:"visible",children:v.children}),(c.mode&1)===0&&(v.lanes=h),v.return=c,v.sibling=null,l!==null&&(h=c.deletions,h===null?(c.deletions=[l],c.flags|=16):h.push(l)),c.child=v,c.memoizedState=null,v}function p1(l,c){return c=nh({mode:"visible",children:c},l.mode,0,null),c.return=l,l.child=c}function Hd(l,c,h,v){return v!==null&&j0(v),vl(c,l.child,null,h),l=p1(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function zP(l,c,h,v,w,_,P){if(h)return c.flags&256?(c.flags&=-257,v=l1(Error(t(422))),Hd(l,c,P,v)):c.memoizedState!==null?(c.child=l.child,c.flags|=128,null):(_=v.fallback,w=c.mode,v=nh({mode:"visible",children:v.children},w,0,null),_=ca(_,w,P,null),_.flags|=2,v.return=c,_.return=c,v.sibling=_,c.child=v,(c.mode&1)!==0&&vl(c,l.child,null,P),c.child.memoizedState=h1(P),c.memoizedState=d1,_);if((c.mode&1)===0)return Hd(l,c,P,null);if(w.data==="$!"){if(v=w.nextSibling&&w.nextSibling.dataset,v)var z=v.dgst;return v=z,_=Error(t(419)),v=l1(_,v,void 0),Hd(l,c,P,v)}if(z=(P&l.childLanes)!==0,ar||z){if(v=gn,v!==null){switch(P&-P){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(v.suspendedLanes|P))!==0?0:w,w!==0&&w!==_.retryLane&&(_.retryLane=w,fo(l,w),ai(v,l,w,-1))}return R1(),v=l1(Error(t(421))),Hd(l,c,P,v)}return w.data==="$?"?(c.flags|=128,c.child=l.child,c=t4.bind(null,l),w._reactRetry=c,null):(l=_.treeContext,Ir=Go(w.nextSibling),Cr=c,Rt=!0,ri=null,l!==null&&(Vr[Fr++]=uo,Vr[Fr++]=co,Vr[Fr++]=ta,uo=l.id,co=l.overflow,ta=c),c=p1(c,v.children),c.flags|=4096,c)}function P_(l,c,h){l.lanes|=c;var v=l.alternate;v!==null&&(v.lanes|=c),$0(l.return,c,h)}function m1(l,c,h,v,w){var _=l.memoizedState;_===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:v,tail:h,tailMode:w}:(_.isBackwards=c,_.rendering=null,_.renderingStartTime=0,_.last=v,_.tail=h,_.tailMode=w)}function R_(l,c,h){var v=c.pendingProps,w=v.revealOrder,_=v.tail;if(Yn(l,c,v.children,h),v=Ot.current,(v&2)!==0)v=v&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&P_(l,h,c);else if(l.tag===19)P_(l,h,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}v&=1}if(_t(Ot,v),(c.mode&1)===0)c.memoizedState=null;else switch(w){case"forwards":for(h=c.child,w=null;h!==null;)l=h.alternate,l!==null&&Ld(l)===null&&(w=h),h=h.sibling;h=w,h===null?(w=c.child,c.child=null):(w=h.sibling,h.sibling=null),m1(c,!1,w,h,_);break;case"backwards":for(h=null,w=c.child,c.child=null;w!==null;){if(l=w.alternate,l!==null&&Ld(l)===null){c.child=w;break}l=w.sibling,w.sibling=h,h=w,w=l}m1(c,!0,h,null,_);break;case"together":m1(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Wd(l,c){(c.mode&1)===0&&l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2)}function po(l,c,h){if(l!==null&&(c.dependencies=l.dependencies),sa|=c.lanes,(h&c.childLanes)===0)return null;if(l!==null&&c.child!==l.child)throw Error(t(153));if(c.child!==null){for(l=c.child,h=rs(l,l.pendingProps),c.child=h,h.return=c;l.sibling!==null;)l=l.sibling,h=h.sibling=rs(l,l.pendingProps),h.return=c;h.sibling=null}return c.child}function HP(l,c,h){switch(c.tag){case 3:I_(c),gl();break;case 5:Ww(c);break;case 1:sr(c.type)&&Id(c);break;case 4:K0(c,c.stateNode.containerInfo);break;case 10:var v=c.type._context,w=c.memoizedProps.value;_t(Od,v._currentValue),v._currentValue=w;break;case 13:if(v=c.memoizedState,v!==null)return v.dehydrated!==null?(_t(Ot,Ot.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?b_(l,c,h):(_t(Ot,Ot.current&1),l=po(l,c,h),l!==null?l.sibling:null);_t(Ot,Ot.current&1);break;case 19:if(v=(h&c.childLanes)!==0,(l.flags&128)!==0){if(v)return R_(l,c,h);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),_t(Ot,Ot.current),v)break;return null;case 22:case 23:return c.lanes=0,A_(l,c,h)}return po(l,c,h)}var N_,g1,O_,D_;N_=function(l,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)l.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},g1=function(){},O_=function(l,c,h,v){var w=l.memoizedProps;if(w!==v){l=c.stateNode,ia(Di.current);var _=null;switch(h){case"input":w=Ba(l,w),v=Ba(l,v),_=[];break;case"select":w=pe({},w,{value:void 0}),v=pe({},v,{value:void 0}),_=[];break;case"textarea":w=Su(l,w),v=Su(l,v),_=[];break;default:typeof w.onClick!="function"&&typeof v.onClick=="function"&&(l.onclick=Ad)}Jr(h,v);var P;h=null;for(J in w)if(!v.hasOwnProperty(J)&&w.hasOwnProperty(J)&&w[J]!=null)if(J==="style"){var z=w[J];for(P in z)z.hasOwnProperty(P)&&(h||(h={}),h[P]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(i.hasOwnProperty(J)?_||(_=[]):(_=_||[]).push(J,null));for(J in v){var W=v[J];if(z=w?.[J],v.hasOwnProperty(J)&&W!==z&&(W!=null||z!=null))if(J==="style")if(z){for(P in z)!z.hasOwnProperty(P)||W&&W.hasOwnProperty(P)||(h||(h={}),h[P]="");for(P in W)W.hasOwnProperty(P)&&z[P]!==W[P]&&(h||(h={}),h[P]=W[P])}else h||(_||(_=[]),_.push(J,h)),h=W;else J==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,z=z?z.__html:void 0,W!=null&&z!==W&&(_=_||[]).push(J,W)):J==="children"?typeof W!="string"&&typeof W!="number"||(_=_||[]).push(J,""+W):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(i.hasOwnProperty(J)?(W!=null&&J==="onScroll"&&At("scroll",l),_||z===W||(_=[])):(_=_||[]).push(J,W))}h&&(_=_||[]).push("style",h);var J=_;(c.updateQueue=J)&&(c.flags|=4)}},D_=function(l,c,h,v){h!==v&&(c.flags|=4)};function hc(l,c){if(!Rt)switch(l.tailMode){case"hidden":c=l.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function jn(l){var c=l.alternate!==null&&l.alternate.child===l.child,h=0,v=0;if(c)for(var w=l.child;w!==null;)h|=w.lanes|w.childLanes,v|=w.subtreeFlags&14680064,v|=w.flags&14680064,w.return=l,w=w.sibling;else for(w=l.child;w!==null;)h|=w.lanes|w.childLanes,v|=w.subtreeFlags,v|=w.flags,w.return=l,w=w.sibling;return l.subtreeFlags|=v,l.childLanes=h,c}function WP(l,c,h){var v=c.pendingProps;switch(F0(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(c),null;case 1:return sr(c.type)&&Cd(),jn(c),null;case 3:return v=c.stateNode,_l(),Tt(or),Tt(Bn),Q0(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(l===null||l.child===null)&&(Rd(c)?c.flags|=4:l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ri!==null&&(S1(ri),ri=null))),g1(l,c),jn(c),null;case 5:X0(c);var w=ia(lc.current);if(h=c.type,l!==null&&c.stateNode!=null)O_(l,c,h,v,w),l.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!v){if(c.stateNode===null)throw Error(t(166));return jn(c),null}if(l=ia(Di.current),Rd(c)){v=c.stateNode,h=c.type;var _=c.memoizedProps;switch(v[Oi]=c,v[rc]=_,l=(c.mode&1)!==0,h){case"dialog":At("cancel",v),At("close",v);break;case"iframe":case"object":case"embed":At("load",v);break;case"video":case"audio":for(w=0;w<ec.length;w++)At(ec[w],v);break;case"source":At("error",v);break;case"img":case"image":case"link":At("error",v),At("load",v);break;case"details":At("toggle",v);break;case"input":Kf(v,_),At("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!_.multiple},At("invalid",v);break;case"textarea":bu(v,_),At("invalid",v)}Jr(h,_),w=null;for(var P in _)if(_.hasOwnProperty(P)){var z=_[P];P==="children"?typeof z=="string"?v.textContent!==z&&(_.suppressHydrationWarning!==!0&&Ed(v.textContent,z,l),w=["children",z]):typeof z=="number"&&v.textContent!==""+z&&(_.suppressHydrationWarning!==!0&&Ed(v.textContent,z,l),w=["children",""+z]):i.hasOwnProperty(P)&&z!=null&&P==="onScroll"&&At("scroll",v)}switch(h){case"input":bt(v),Iu(v,_,!0);break;case"textarea":bt(v),Ro(v);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(v.onclick=Ad)}v=w,c.updateQueue=v,v!==null&&(c.flags|=4)}else{P=w.nodeType===9?w:w.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Pu(h)),l==="http://www.w3.org/1999/xhtml"?h==="script"?(l=P.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof v.is=="string"?l=P.createElement(h,{is:v.is}):(l=P.createElement(h),h==="select"&&(P=l,v.multiple?P.multiple=!0:v.size&&(P.size=v.size))):l=P.createElementNS(l,h),l[Oi]=c,l[rc]=v,N_(l,c,!1,!1),c.stateNode=l;e:{switch(P=Ha(h,v),h){case"dialog":At("cancel",l),At("close",l),w=v;break;case"iframe":case"object":case"embed":At("load",l),w=v;break;case"video":case"audio":for(w=0;w<ec.length;w++)At(ec[w],l);w=v;break;case"source":At("error",l),w=v;break;case"img":case"image":case"link":At("error",l),At("load",l),w=v;break;case"details":At("toggle",l),w=v;break;case"input":Kf(l,v),w=Ba(l,v),At("invalid",l);break;case"option":w=v;break;case"select":l._wrapperState={wasMultiple:!!v.multiple},w=pe({},v,{value:void 0}),At("invalid",l);break;case"textarea":bu(l,v),w=Su(l,v),At("invalid",l);break;default:w=v}Jr(h,w),z=w;for(_ in z)if(z.hasOwnProperty(_)){var W=z[_];_==="style"?za(l,W):_==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,W!=null&&Yf(l,W)):_==="children"?typeof W=="string"?(h!=="textarea"||W!=="")&&Bs(l,W):typeof W=="number"&&Bs(l,""+W):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(i.hasOwnProperty(_)?W!=null&&_==="onScroll"&&At("scroll",l):W!=null&&k(l,_,W,P))}switch(h){case"input":bt(l),Iu(l,v,!1);break;case"textarea":bt(l),Ro(l);break;case"option":v.value!=null&&l.setAttribute("value",""+ne(v.value));break;case"select":l.multiple=!!v.multiple,_=v.value,_!=null?Zr(l,!!v.multiple,_,!1):v.defaultValue!=null&&Zr(l,!!v.multiple,v.defaultValue,!0);break;default:typeof w.onClick=="function"&&(l.onclick=Ad)}switch(h){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return jn(c),null;case 6:if(l&&c.stateNode!=null)D_(l,c,l.memoizedProps,v);else{if(typeof v!="string"&&c.stateNode===null)throw Error(t(166));if(h=ia(lc.current),ia(Di.current),Rd(c)){if(v=c.stateNode,h=c.memoizedProps,v[Oi]=c,(_=v.nodeValue!==h)&&(l=Cr,l!==null))switch(l.tag){case 3:Ed(v.nodeValue,h,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Ed(v.nodeValue,h,(l.mode&1)!==0)}_&&(c.flags|=4)}else v=(h.nodeType===9?h:h.ownerDocument).createTextNode(v),v[Oi]=c,c.stateNode=v}return jn(c),null;case 13:if(Tt(Ot),v=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Rt&&Ir!==null&&(c.mode&1)!==0&&(c.flags&128)===0)Lw(),gl(),c.flags|=98560,_=!1;else if(_=Rd(c),v!==null&&v.dehydrated!==null){if(l===null){if(!_)throw Error(t(318));if(_=c.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Oi]=c}else gl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;jn(c),_=!1}else ri!==null&&(S1(ri),ri=null),_=!0;if(!_)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(v=v!==null,v!==(l!==null&&l.memoizedState!==null)&&v&&(c.child.flags|=8192,(c.mode&1)!==0&&(l===null||(Ot.current&1)!==0?nn===0&&(nn=3):R1())),c.updateQueue!==null&&(c.flags|=4),jn(c),null);case 4:return _l(),g1(l,c),l===null&&tc(c.stateNode.containerInfo),jn(c),null;case 10:return W0(c.type._context),jn(c),null;case 17:return sr(c.type)&&Cd(),jn(c),null;case 19:if(Tt(Ot),_=c.memoizedState,_===null)return jn(c),null;if(v=(c.flags&128)!==0,P=_.rendering,P===null)if(v)hc(_,!1);else{if(nn!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(P=Ld(l),P!==null){for(c.flags|=128,hc(_,!1),v=P.updateQueue,v!==null&&(c.updateQueue=v,c.flags|=4),c.subtreeFlags=0,v=h,h=c.child;h!==null;)_=h,l=v,_.flags&=14680066,P=_.alternate,P===null?(_.childLanes=0,_.lanes=l,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=P.childLanes,_.lanes=P.lanes,_.child=P.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=P.memoizedProps,_.memoizedState=P.memoizedState,_.updateQueue=P.updateQueue,_.type=P.type,l=P.dependencies,_.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),h=h.sibling;return _t(Ot,Ot.current&1|2),c.child}l=l.sibling}_.tail!==null&&Et()>Tl&&(c.flags|=128,v=!0,hc(_,!1),c.lanes=4194304)}else{if(!v)if(l=Ld(P),l!==null){if(c.flags|=128,v=!0,h=l.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),hc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!P.alternate&&!Rt)return jn(c),null}else 2*Et()-_.renderingStartTime>Tl&&h!==1073741824&&(c.flags|=128,v=!0,hc(_,!1),c.lanes=4194304);_.isBackwards?(P.sibling=c.child,c.child=P):(h=_.last,h!==null?h.sibling=P:c.child=P,_.last=P)}return _.tail!==null?(c=_.tail,_.rendering=c,_.tail=c.sibling,_.renderingStartTime=Et(),c.sibling=null,h=Ot.current,_t(Ot,v?h&1|2:h&1),c):(jn(c),null);case 22:case 23:return P1(),v=c.memoizedState!==null,l!==null&&l.memoizedState!==null!==v&&(c.flags|=8192),v&&(c.mode&1)!==0?(Sr&1073741824)!==0&&(jn(c),c.subtreeFlags&6&&(c.flags|=8192)):jn(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function $P(l,c){switch(F0(c),c.tag){case 1:return sr(c.type)&&Cd(),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return _l(),Tt(or),Tt(Bn),Q0(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 5:return X0(c),null;case 13:if(Tt(Ot),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(t(340));gl()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return Tt(Ot),null;case 4:return _l(),null;case 10:return W0(c.type._context),null;case 22:case 23:return P1(),null;case 24:return null;default:return null}}var $d=!1,zn=!1,GP=typeof WeakSet=="function"?WeakSet:Set,xe=null;function El(l,c){var h=l.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(v){Ft(l,c,v)}else h.current=null}function v1(l,c,h){try{h()}catch(v){Ft(l,c,v)}}var k_=!1;function qP(l,c){if(P0=io,l=dw(),x0(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var v=h.getSelection&&h.getSelection();if(v&&v.rangeCount!==0){h=v.anchorNode;var w=v.anchorOffset,_=v.focusNode;v=v.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break e}var P=0,z=-1,W=-1,J=0,ae=0,ce=l,se=null;t:for(;;){for(var we;ce!==h||w!==0&&ce.nodeType!==3||(z=P+w),ce!==_||v!==0&&ce.nodeType!==3||(W=P+v),ce.nodeType===3&&(P+=ce.nodeValue.length),(we=ce.firstChild)!==null;)se=ce,ce=we;for(;;){if(ce===l)break t;if(se===h&&++J===w&&(z=P),se===_&&++ae===v&&(W=P),(we=ce.nextSibling)!==null)break;ce=se,se=ce.parentNode}ce=we}h=z===-1||W===-1?null:{start:z,end:W}}else h=null}h=h||{start:0,end:0}}else h=null;for(R0={focusedElem:l,selectionRange:h},io=!1,xe=c;xe!==null;)if(c=xe,l=c.child,(c.subtreeFlags&1028)!==0&&l!==null)l.return=c,xe=l;else for(;xe!==null;){c=xe;try{var Ae=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var Se=Ae.memoizedProps,Wt=Ae.memoizedState,K=c.stateNode,G=K.getSnapshotBeforeUpdate(c.elementType===c.type?Se:ii(c.type,Se),Wt);K.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var Q=c.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(fe){Ft(c,c.return,fe)}if(l=c.sibling,l!==null){l.return=c.return,xe=l;break}xe=c.return}return Ae=k_,k_=!1,Ae}function pc(l,c,h){var v=c.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var w=v=v.next;do{if((w.tag&l)===l){var _=w.destroy;w.destroy=void 0,_!==void 0&&v1(c,h,_)}w=w.next}while(w!==v)}}function Gd(l,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&l)===l){var v=h.create;h.destroy=v()}h=h.next}while(h!==c)}}function y1(l){var c=l.ref;if(c!==null){var h=l.stateNode;switch(l.tag){case 5:l=h;break;default:l=h}typeof c=="function"?c(l):c.current=l}}function M_(l){var c=l.alternate;c!==null&&(l.alternate=null,M_(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&(delete c[Oi],delete c[rc],delete c[k0],delete c[PP],delete c[RP])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function L_(l){return l.tag===5||l.tag===3||l.tag===4}function V_(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||L_(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function w1(l,c,h){var v=l.tag;if(v===5||v===6)l=l.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(l,c):h.insertBefore(l,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(l,h)):(c=h,c.appendChild(l)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Ad));else if(v!==4&&(l=l.child,l!==null))for(w1(l,c,h),l=l.sibling;l!==null;)w1(l,c,h),l=l.sibling}function _1(l,c,h){var v=l.tag;if(v===5||v===6)l=l.stateNode,c?h.insertBefore(l,c):h.appendChild(l);else if(v!==4&&(l=l.child,l!==null))for(_1(l,c,h),l=l.sibling;l!==null;)_1(l,c,h),l=l.sibling}var bn=null,oi=!1;function Zo(l,c,h){for(h=h.child;h!==null;)F_(l,c,h),h=h.sibling}function F_(l,c,h){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(Ws,h)}catch{}switch(h.tag){case 5:zn||El(h,c);case 6:var v=bn,w=oi;bn=null,Zo(l,c,h),bn=v,oi=w,bn!==null&&(oi?(l=bn,h=h.stateNode,l.nodeType===8?l.parentNode.removeChild(h):l.removeChild(h)):bn.removeChild(h.stateNode));break;case 18:bn!==null&&(oi?(l=bn,h=h.stateNode,l.nodeType===8?D0(l.parentNode,h):l.nodeType===1&&D0(l,h),zo(l)):D0(bn,h.stateNode));break;case 4:v=bn,w=oi,bn=h.stateNode.containerInfo,oi=!0,Zo(l,c,h),bn=v,oi=w;break;case 0:case 11:case 14:case 15:if(!zn&&(v=h.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){w=v=v.next;do{var _=w,P=_.destroy;_=_.tag,P!==void 0&&((_&2)!==0||(_&4)!==0)&&v1(h,c,P),w=w.next}while(w!==v)}Zo(l,c,h);break;case 1:if(!zn&&(El(h,c),v=h.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=h.memoizedProps,v.state=h.memoizedState,v.componentWillUnmount()}catch(z){Ft(h,c,z)}Zo(l,c,h);break;case 21:Zo(l,c,h);break;case 22:h.mode&1?(zn=(v=zn)||h.memoizedState!==null,Zo(l,c,h),zn=v):Zo(l,c,h);break;default:Zo(l,c,h)}}function B_(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var h=l.stateNode;h===null&&(h=l.stateNode=new GP),c.forEach(function(v){var w=n4.bind(null,l,v);h.has(v)||(h.add(v),v.then(w,w))})}}function si(l,c){var h=c.deletions;if(h!==null)for(var v=0;v<h.length;v++){var w=h[v];try{var _=l,P=c,z=P;e:for(;z!==null;){switch(z.tag){case 5:bn=z.stateNode,oi=!1;break e;case 3:bn=z.stateNode.containerInfo,oi=!0;break e;case 4:bn=z.stateNode.containerInfo,oi=!0;break e}z=z.return}if(bn===null)throw Error(t(160));F_(_,P,w),bn=null,oi=!1;var W=w.alternate;W!==null&&(W.return=null),w.return=null}catch(J){Ft(w,c,J)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)U_(c,l),c=c.sibling}function U_(l,c){var h=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(si(c,l),Mi(l),v&4){try{pc(3,l,l.return),Gd(3,l)}catch(Se){Ft(l,l.return,Se)}try{pc(5,l,l.return)}catch(Se){Ft(l,l.return,Se)}}break;case 1:si(c,l),Mi(l),v&512&&h!==null&&El(h,h.return);break;case 5:if(si(c,l),Mi(l),v&512&&h!==null&&El(h,h.return),l.flags&32){var w=l.stateNode;try{Bs(w,"")}catch(Se){Ft(l,l.return,Se)}}if(v&4&&(w=l.stateNode,w!=null)){var _=l.memoizedProps,P=h!==null?h.memoizedProps:_,z=l.type,W=l.updateQueue;if(l.updateQueue=null,W!==null)try{z==="input"&&_.type==="radio"&&_.name!=null&&Ua(w,_),Ha(z,P);var J=Ha(z,_);for(P=0;P<W.length;P+=2){var ae=W[P],ce=W[P+1];ae==="style"?za(w,ce):ae==="dangerouslySetInnerHTML"?Yf(w,ce):ae==="children"?Bs(w,ce):k(w,ae,ce,J)}switch(z){case"input":Fs(w,_);break;case"textarea":Xf(w,_);break;case"select":var se=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!_.multiple;var we=_.value;we!=null?Zr(w,!!_.multiple,we,!1):se!==!!_.multiple&&(_.defaultValue!=null?Zr(w,!!_.multiple,_.defaultValue,!0):Zr(w,!!_.multiple,_.multiple?[]:"",!1))}w[rc]=_}catch(Se){Ft(l,l.return,Se)}}break;case 6:if(si(c,l),Mi(l),v&4){if(l.stateNode===null)throw Error(t(162));w=l.stateNode,_=l.memoizedProps;try{w.nodeValue=_}catch(Se){Ft(l,l.return,Se)}}break;case 3:if(si(c,l),Mi(l),v&4&&h!==null&&h.memoizedState.isDehydrated)try{zo(c.containerInfo)}catch(Se){Ft(l,l.return,Se)}break;case 4:si(c,l),Mi(l);break;case 13:si(c,l),Mi(l),w=l.child,w.flags&8192&&(_=w.memoizedState!==null,w.stateNode.isHidden=_,!_||w.alternate!==null&&w.alternate.memoizedState!==null||(A1=Et())),v&4&&B_(l);break;case 22:if(ae=h!==null&&h.memoizedState!==null,l.mode&1?(zn=(J=zn)||ae,si(c,l),zn=J):si(c,l),Mi(l),v&8192){if(J=l.memoizedState!==null,(l.stateNode.isHidden=J)&&!ae&&(l.mode&1)!==0)for(xe=l,ae=l.child;ae!==null;){for(ce=xe=ae;xe!==null;){switch(se=xe,we=se.child,se.tag){case 0:case 11:case 14:case 15:pc(4,se,se.return);break;case 1:El(se,se.return);var Ae=se.stateNode;if(typeof Ae.componentWillUnmount=="function"){v=se,h=se.return;try{c=v,Ae.props=c.memoizedProps,Ae.state=c.memoizedState,Ae.componentWillUnmount()}catch(Se){Ft(v,h,Se)}}break;case 5:El(se,se.return);break;case 22:if(se.memoizedState!==null){H_(ce);continue}}we!==null?(we.return=se,xe=we):H_(ce)}ae=ae.sibling}e:for(ae=null,ce=l;;){if(ce.tag===5){if(ae===null){ae=ce;try{w=ce.stateNode,J?(_=w.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(z=ce.stateNode,W=ce.memoizedProps.style,P=W!=null&&W.hasOwnProperty("display")?W.display:null,z.style.display=Do("display",P))}catch(Se){Ft(l,l.return,Se)}}}else if(ce.tag===6){if(ae===null)try{ce.stateNode.nodeValue=J?"":ce.memoizedProps}catch(Se){Ft(l,l.return,Se)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===l)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===l)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===l)break e;ae===ce&&(ae=null),ce=ce.return}ae===ce&&(ae=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:si(c,l),Mi(l),v&4&&B_(l);break;case 21:break;default:si(c,l),Mi(l)}}function Mi(l){var c=l.flags;if(c&2){try{e:{for(var h=l.return;h!==null;){if(L_(h)){var v=h;break e}h=h.return}throw Error(t(160))}switch(v.tag){case 5:var w=v.stateNode;v.flags&32&&(Bs(w,""),v.flags&=-33);var _=V_(l);_1(l,_,w);break;case 3:case 4:var P=v.stateNode.containerInfo,z=V_(l);w1(l,z,P);break;default:throw Error(t(161))}}catch(W){Ft(l,l.return,W)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function KP(l,c,h){xe=l,j_(l)}function j_(l,c,h){for(var v=(l.mode&1)!==0;xe!==null;){var w=xe,_=w.child;if(w.tag===22&&v){var P=w.memoizedState!==null||$d;if(!P){var z=w.alternate,W=z!==null&&z.memoizedState!==null||zn;z=$d;var J=zn;if($d=P,(zn=W)&&!J)for(xe=w;xe!==null;)P=xe,W=P.child,P.tag===22&&P.memoizedState!==null?W_(w):W!==null?(W.return=P,xe=W):W_(w);for(;_!==null;)xe=_,j_(_),_=_.sibling;xe=w,$d=z,zn=J}z_(l)}else(w.subtreeFlags&8772)!==0&&_!==null?(_.return=w,xe=_):z_(l)}}function z_(l){for(;xe!==null;){var c=xe;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:zn||Gd(5,c);break;case 1:var v=c.stateNode;if(c.flags&4&&!zn)if(h===null)v.componentDidMount();else{var w=c.elementType===c.type?h.memoizedProps:ii(c.type,h.memoizedProps);v.componentDidUpdate(w,h.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var _=c.updateQueue;_!==null&&Hw(c,_,v);break;case 3:var P=c.updateQueue;if(P!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}Hw(c,P,h)}break;case 5:var z=c.stateNode;if(h===null&&c.flags&4){h=z;var W=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":W.autoFocus&&h.focus();break;case"img":W.src&&(h.src=W.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var J=c.alternate;if(J!==null){var ae=J.memoizedState;if(ae!==null){var ce=ae.dehydrated;ce!==null&&zo(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zn||c.flags&512&&y1(c)}catch(se){Ft(c,c.return,se)}}if(c===l){xe=null;break}if(h=c.sibling,h!==null){h.return=c.return,xe=h;break}xe=c.return}}function H_(l){for(;xe!==null;){var c=xe;if(c===l){xe=null;break}var h=c.sibling;if(h!==null){h.return=c.return,xe=h;break}xe=c.return}}function W_(l){for(;xe!==null;){var c=xe;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{Gd(4,c)}catch(W){Ft(c,h,W)}break;case 1:var v=c.stateNode;if(typeof v.componentDidMount=="function"){var w=c.return;try{v.componentDidMount()}catch(W){Ft(c,w,W)}}var _=c.return;try{y1(c)}catch(W){Ft(c,_,W)}break;case 5:var P=c.return;try{y1(c)}catch(W){Ft(c,P,W)}}}catch(W){Ft(c,c.return,W)}if(c===l){xe=null;break}var z=c.sibling;if(z!==null){z.return=c.return,xe=z;break}xe=c.return}}var XP=Math.ceil,qd=j.ReactCurrentDispatcher,x1=j.ReactCurrentOwner,jr=j.ReactCurrentBatchConfig,ot=0,gn=null,Xt=null,Pn=0,Sr=0,Al=qo(0),nn=0,mc=null,sa=0,Kd=0,E1=0,gc=null,lr=null,A1=0,Tl=1/0,mo=null,Xd=!1,T1=null,Jo=null,Yd=!1,es=null,Qd=0,vc=0,C1=null,Zd=-1,Jd=0;function Qn(){return(ot&6)!==0?Et():Zd!==-1?Zd:Zd=Et()}function ts(l){return(l.mode&1)===0?1:(ot&2)!==0&&Pn!==0?Pn&-Pn:OP.transition!==null?(Jd===0&&(Jd=Fu()),Jd):(l=tt,l!==0||(l=window.event,l=l===void 0?16:Ja(l.type)),l)}function ai(l,c,h,v){if(50<vc)throw vc=0,C1=null,Error(t(185));Ks(l,h,v),((ot&2)===0||l!==gn)&&(l===gn&&((ot&2)===0&&(Kd|=h),nn===4&&ns(l,Pn)),ur(l,v),h===1&&ot===0&&(c.mode&1)===0&&(Tl=Et()+500,Sd&&Xo()))}function ur(l,c){var h=l.callbackNode;qs(l,c);var v=to(l,l===gn?Pn:0);if(v===0)h!==null&&Ga(h),l.callbackNode=null,l.callbackPriority=0;else if(c=v&-v,l.callbackPriority!==c){if(h!=null&&Ga(h),c===1)l.tag===0?NP(G_.bind(null,l)):Nw(G_.bind(null,l)),SP(function(){(ot&6)===0&&Xo()}),h=null;else{switch(Ei(v)){case 1:h=qa;break;case 4:h=Mu;break;case 16:h=Hs;break;case 536870912:h=Ka;break;default:h=Hs}h=ex(h,$_.bind(null,l))}l.callbackPriority=c,l.callbackNode=h}}function $_(l,c){if(Zd=-1,Jd=0,(ot&6)!==0)throw Error(t(327));var h=l.callbackNode;if(Cl()&&l.callbackNode!==h)return null;var v=to(l,l===gn?Pn:0);if(v===0)return null;if((v&30)!==0||(v&l.expiredLanes)!==0||c)c=eh(l,v);else{c=v;var w=ot;ot|=2;var _=K_();(gn!==l||Pn!==c)&&(mo=null,Tl=Et()+500,la(l,c));do try{ZP();break}catch(z){q_(l,z)}while(!0);H0(),qd.current=_,ot=w,Xt!==null?c=0:(gn=null,Pn=0,c=nn)}if(c!==0){if(c===2&&(w=Vu(l),w!==0&&(v=w,c=I1(l,w))),c===1)throw h=mc,la(l,0),ns(l,v),ur(l,Et()),h;if(c===6)ns(l,v);else{if(w=l.current.alternate,(v&30)===0&&!YP(w)&&(c=eh(l,v),c===2&&(_=Vu(l),_!==0&&(v=_,c=I1(l,_))),c===1))throw h=mc,la(l,0),ns(l,v),ur(l,Et()),h;switch(l.finishedWork=w,l.finishedLanes=v,c){case 0:case 1:throw Error(t(345));case 2:ua(l,lr,mo);break;case 3:if(ns(l,v),(v&130023424)===v&&(c=A1+500-Et(),10<c)){if(to(l,0)!==0)break;if(w=l.suspendedLanes,(w&v)!==v){Qn(),l.pingedLanes|=l.suspendedLanes&w;break}l.timeoutHandle=O0(ua.bind(null,l,lr,mo),c);break}ua(l,lr,mo);break;case 4:if(ns(l,v),(v&4194240)===v)break;for(c=l.eventTimes,w=-1;0<v;){var P=31-_r(v);_=1<<P,P=c[P],P>w&&(w=P),v&=~_}if(v=w,v=Et()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*XP(v/1960))-v,10<v){l.timeoutHandle=O0(ua.bind(null,l,lr,mo),v);break}ua(l,lr,mo);break;case 5:ua(l,lr,mo);break;default:throw Error(t(329))}}}return ur(l,Et()),l.callbackNode===h?$_.bind(null,l):null}function I1(l,c){var h=gc;return l.current.memoizedState.isDehydrated&&(la(l,c).flags|=256),l=eh(l,c),l!==2&&(c=lr,lr=h,c!==null&&S1(c)),l}function S1(l){lr===null?lr=l:lr.push.apply(lr,l)}function YP(l){for(var c=l;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var v=0;v<h.length;v++){var w=h[v],_=w.getSnapshot;w=w.value;try{if(!ni(_(),w))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function ns(l,c){for(c&=~E1,c&=~Kd,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var h=31-_r(c),v=1<<h;l[h]=-1,c&=~v}}function G_(l){if((ot&6)!==0)throw Error(t(327));Cl();var c=to(l,0);if((c&1)===0)return ur(l,Et()),null;var h=eh(l,c);if(l.tag!==0&&h===2){var v=Vu(l);v!==0&&(c=v,h=I1(l,v))}if(h===1)throw h=mc,la(l,0),ns(l,c),ur(l,Et()),h;if(h===6)throw Error(t(345));return l.finishedWork=l.current.alternate,l.finishedLanes=c,ua(l,lr,mo),ur(l,Et()),null}function b1(l,c){var h=ot;ot|=1;try{return l(c)}finally{ot=h,ot===0&&(Tl=Et()+500,Sd&&Xo())}}function aa(l){es!==null&&es.tag===0&&(ot&6)===0&&Cl();var c=ot;ot|=1;var h=jr.transition,v=tt;try{if(jr.transition=null,tt=1,l)return l()}finally{tt=v,jr.transition=h,ot=c,(ot&6)===0&&Xo()}}function P1(){Sr=Al.current,Tt(Al)}function la(l,c){l.finishedWork=null,l.finishedLanes=0;var h=l.timeoutHandle;if(h!==-1&&(l.timeoutHandle=-1,IP(h)),Xt!==null)for(h=Xt.return;h!==null;){var v=h;switch(F0(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&Cd();break;case 3:_l(),Tt(or),Tt(Bn),Q0();break;case 5:X0(v);break;case 4:_l();break;case 13:Tt(Ot);break;case 19:Tt(Ot);break;case 10:W0(v.type._context);break;case 22:case 23:P1()}h=h.return}if(gn=l,Xt=l=rs(l.current,null),Pn=Sr=c,nn=0,mc=null,E1=Kd=sa=0,lr=gc=null,ra!==null){for(c=0;c<ra.length;c++)if(h=ra[c],v=h.interleaved,v!==null){h.interleaved=null;var w=v.next,_=h.pending;if(_!==null){var P=_.next;_.next=w,v.next=P}h.pending=v}ra=null}return l}function q_(l,c){do{var h=Xt;try{if(H0(),Vd.current=jd,Fd){for(var v=Dt.memoizedState;v!==null;){var w=v.queue;w!==null&&(w.pending=null),v=v.next}Fd=!1}if(oa=0,mn=tn=Dt=null,uc=!1,cc=0,x1.current=null,h===null||h.return===null){nn=1,mc=c,Xt=null;break}e:{var _=l,P=h.return,z=h,W=c;if(c=Pn,z.flags|=32768,W!==null&&typeof W=="object"&&typeof W.then=="function"){var J=W,ae=z,ce=ae.tag;if((ae.mode&1)===0&&(ce===0||ce===11||ce===15)){var se=ae.alternate;se?(ae.updateQueue=se.updateQueue,ae.memoizedState=se.memoizedState,ae.lanes=se.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var we=y_(P);if(we!==null){we.flags&=-257,w_(we,P,z,_,c),we.mode&1&&v_(_,J,c),c=we,W=J;var Ae=c.updateQueue;if(Ae===null){var Se=new Set;Se.add(W),c.updateQueue=Se}else Ae.add(W);break e}else{if((c&1)===0){v_(_,J,c),R1();break e}W=Error(t(426))}}else if(Rt&&z.mode&1){var Wt=y_(P);if(Wt!==null){(Wt.flags&65536)===0&&(Wt.flags|=256),w_(Wt,P,z,_,c),j0(xl(W,z));break e}}_=W=xl(W,z),nn!==4&&(nn=2),gc===null?gc=[_]:gc.push(_),_=P;do{switch(_.tag){case 3:_.flags|=65536,c&=-c,_.lanes|=c;var K=m_(_,W,c);zw(_,K);break e;case 1:z=W;var G=_.type,Q=_.stateNode;if((_.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Jo===null||!Jo.has(Q)))){_.flags|=65536,c&=-c,_.lanes|=c;var fe=g_(_,z,c);zw(_,fe);break e}}_=_.return}while(_!==null)}Y_(h)}catch(Re){c=Re,Xt===h&&h!==null&&(Xt=h=h.return);continue}break}while(!0)}function K_(){var l=qd.current;return qd.current=jd,l===null?jd:l}function R1(){(nn===0||nn===3||nn===2)&&(nn=4),gn===null||(sa&268435455)===0&&(Kd&268435455)===0||ns(gn,Pn)}function eh(l,c){var h=ot;ot|=2;var v=K_();(gn!==l||Pn!==c)&&(mo=null,la(l,c));do try{QP();break}catch(w){q_(l,w)}while(!0);if(H0(),ot=h,qd.current=v,Xt!==null)throw Error(t(261));return gn=null,Pn=0,nn}function QP(){for(;Xt!==null;)X_(Xt)}function ZP(){for(;Xt!==null&&!zs();)X_(Xt)}function X_(l){var c=J_(l.alternate,l,Sr);l.memoizedProps=l.pendingProps,c===null?Y_(l):Xt=c,x1.current=null}function Y_(l){var c=l;do{var h=c.alternate;if(l=c.return,(c.flags&32768)===0){if(h=WP(h,c,Sr),h!==null){Xt=h;return}}else{if(h=$P(h,c),h!==null){h.flags&=32767,Xt=h;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{nn=6,Xt=null;return}}if(c=c.sibling,c!==null){Xt=c;return}Xt=c=l}while(c!==null);nn===0&&(nn=5)}function ua(l,c,h){var v=tt,w=jr.transition;try{jr.transition=null,tt=1,JP(l,c,h,v)}finally{jr.transition=w,tt=v}return null}function JP(l,c,h,v){do Cl();while(es!==null);if((ot&6)!==0)throw Error(t(327));h=l.finishedWork;var w=l.finishedLanes;if(h===null)return null;if(l.finishedWork=null,l.finishedLanes=0,h===l.current)throw Error(t(177));l.callbackNode=null,l.callbackPriority=0;var _=h.lanes|h.childLanes;if(g0(l,_),l===gn&&(Xt=gn=null,Pn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Yd||(Yd=!0,ex(Hs,function(){return Cl(),null})),_=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||_){_=jr.transition,jr.transition=null;var P=tt;tt=1;var z=ot;ot|=4,x1.current=null,qP(l,h),U_(h,l),wP(R0),io=!!P0,R0=P0=null,l.current=h,KP(h),eo(),ot=z,tt=P,jr.transition=_}else l.current=h;if(Yd&&(Yd=!1,es=l,Qd=w),_=l.pendingLanes,_===0&&(Jo=null),ad(h.stateNode),ur(l,Et()),c!==null)for(v=l.onRecoverableError,h=0;h<c.length;h++)w=c[h],v(w.value,{componentStack:w.stack,digest:w.digest});if(Xd)throw Xd=!1,l=T1,T1=null,l;return(Qd&1)!==0&&l.tag!==0&&Cl(),_=l.pendingLanes,(_&1)!==0?l===C1?vc++:(vc=0,C1=l):vc=0,Xo(),null}function Cl(){if(es!==null){var l=Ei(Qd),c=jr.transition,h=tt;try{if(jr.transition=null,tt=16>l?16:l,es===null)var v=!1;else{if(l=es,es=null,Qd=0,(ot&6)!==0)throw Error(t(331));var w=ot;for(ot|=4,xe=l.current;xe!==null;){var _=xe,P=_.child;if((xe.flags&16)!==0){var z=_.deletions;if(z!==null){for(var W=0;W<z.length;W++){var J=z[W];for(xe=J;xe!==null;){var ae=xe;switch(ae.tag){case 0:case 11:case 15:pc(8,ae,_)}var ce=ae.child;if(ce!==null)ce.return=ae,xe=ce;else for(;xe!==null;){ae=xe;var se=ae.sibling,we=ae.return;if(M_(ae),ae===J){xe=null;break}if(se!==null){se.return=we,xe=se;break}xe=we}}}var Ae=_.alternate;if(Ae!==null){var Se=Ae.child;if(Se!==null){Ae.child=null;do{var Wt=Se.sibling;Se.sibling=null,Se=Wt}while(Se!==null)}}xe=_}}if((_.subtreeFlags&2064)!==0&&P!==null)P.return=_,xe=P;else e:for(;xe!==null;){if(_=xe,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:pc(9,_,_.return)}var K=_.sibling;if(K!==null){K.return=_.return,xe=K;break e}xe=_.return}}var G=l.current;for(xe=G;xe!==null;){P=xe;var Q=P.child;if((P.subtreeFlags&2064)!==0&&Q!==null)Q.return=P,xe=Q;else e:for(P=G;xe!==null;){if(z=xe,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:Gd(9,z)}}catch(Re){Ft(z,z.return,Re)}if(z===P){xe=null;break e}var fe=z.sibling;if(fe!==null){fe.return=z.return,xe=fe;break e}xe=z.return}}if(ot=w,Xo(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(Ws,l)}catch{}v=!0}return v}finally{tt=h,jr.transition=c}}return!1}function Q_(l,c,h){c=xl(h,c),c=m_(l,c,1),l=Qo(l,c,1),c=Qn(),l!==null&&(Ks(l,1,c),ur(l,c))}function Ft(l,c,h){if(l.tag===3)Q_(l,l,h);else for(;c!==null;){if(c.tag===3){Q_(c,l,h);break}else if(c.tag===1){var v=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Jo===null||!Jo.has(v))){l=xl(h,l),l=g_(c,l,1),c=Qo(c,l,1),l=Qn(),c!==null&&(Ks(c,1,l),ur(c,l));break}}c=c.return}}function e4(l,c,h){var v=l.pingCache;v!==null&&v.delete(c),c=Qn(),l.pingedLanes|=l.suspendedLanes&h,gn===l&&(Pn&h)===h&&(nn===4||nn===3&&(Pn&130023424)===Pn&&500>Et()-A1?la(l,0):E1|=h),ur(l,c)}function Z_(l,c){c===0&&((l.mode&1)===0?c=1:(c=Bo,Bo<<=1,(Bo&130023424)===0&&(Bo=4194304)));var h=Qn();l=fo(l,c),l!==null&&(Ks(l,c,h),ur(l,h))}function t4(l){var c=l.memoizedState,h=0;c!==null&&(h=c.retryLane),Z_(l,h)}function n4(l,c){var h=0;switch(l.tag){case 13:var v=l.stateNode,w=l.memoizedState;w!==null&&(h=w.retryLane);break;case 19:v=l.stateNode;break;default:throw Error(t(314))}v!==null&&v.delete(c),Z_(l,h)}var J_;J_=function(l,c,h){if(l!==null)if(l.memoizedProps!==c.pendingProps||or.current)ar=!0;else{if((l.lanes&h)===0&&(c.flags&128)===0)return ar=!1,HP(l,c,h);ar=(l.flags&131072)!==0}else ar=!1,Rt&&(c.flags&1048576)!==0&&Ow(c,Pd,c.index);switch(c.lanes=0,c.tag){case 2:var v=c.type;Wd(l,c),l=c.pendingProps;var w=hl(c,Bn.current);wl(c,h),w=e1(null,c,v,l,w,h);var _=t1();return c.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,sr(v)?(_=!0,Id(c)):_=!1,c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,q0(c),w.updater=zd,c.stateNode=w,w._reactInternals=c,a1(c,v,l,h),c=f1(null,c,v,!0,_,h)):(c.tag=0,Rt&&_&&V0(c),Yn(null,c,w,h),c=c.child),c;case 16:v=c.elementType;e:{switch(Wd(l,c),l=c.pendingProps,w=v._init,v=w(v._payload),c.type=v,w=c.tag=i4(v),l=ii(v,l),w){case 0:c=c1(null,c,v,l,h);break e;case 1:c=C_(null,c,v,l,h);break e;case 11:c=__(null,c,v,l,h);break e;case 14:c=x_(null,c,v,ii(v.type,l),h);break e}throw Error(t(306,v,""))}return c;case 0:return v=c.type,w=c.pendingProps,w=c.elementType===v?w:ii(v,w),c1(l,c,v,w,h);case 1:return v=c.type,w=c.pendingProps,w=c.elementType===v?w:ii(v,w),C_(l,c,v,w,h);case 3:e:{if(I_(c),l===null)throw Error(t(387));v=c.pendingProps,_=c.memoizedState,w=_.element,jw(l,c),Md(c,v,null,h);var P=c.memoizedState;if(v=P.element,_.isDehydrated)if(_={element:v,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},c.updateQueue.baseState=_,c.memoizedState=_,c.flags&256){w=xl(Error(t(423)),c),c=S_(l,c,v,h,w);break e}else if(v!==w){w=xl(Error(t(424)),c),c=S_(l,c,v,h,w);break e}else for(Ir=Go(c.stateNode.containerInfo.firstChild),Cr=c,Rt=!0,ri=null,h=Bw(c,null,v,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(gl(),v===w){c=po(l,c,h);break e}Yn(l,c,v,h)}c=c.child}return c;case 5:return Ww(c),l===null&&U0(c),v=c.type,w=c.pendingProps,_=l!==null?l.memoizedProps:null,P=w.children,N0(v,w)?P=null:_!==null&&N0(v,_)&&(c.flags|=32),T_(l,c),Yn(l,c,P,h),c.child;case 6:return l===null&&U0(c),null;case 13:return b_(l,c,h);case 4:return K0(c,c.stateNode.containerInfo),v=c.pendingProps,l===null?c.child=vl(c,null,v,h):Yn(l,c,v,h),c.child;case 11:return v=c.type,w=c.pendingProps,w=c.elementType===v?w:ii(v,w),__(l,c,v,w,h);case 7:return Yn(l,c,c.pendingProps,h),c.child;case 8:return Yn(l,c,c.pendingProps.children,h),c.child;case 12:return Yn(l,c,c.pendingProps.children,h),c.child;case 10:e:{if(v=c.type._context,w=c.pendingProps,_=c.memoizedProps,P=w.value,_t(Od,v._currentValue),v._currentValue=P,_!==null)if(ni(_.value,P)){if(_.children===w.children&&!or.current){c=po(l,c,h);break e}}else for(_=c.child,_!==null&&(_.return=c);_!==null;){var z=_.dependencies;if(z!==null){P=_.child;for(var W=z.firstContext;W!==null;){if(W.context===v){if(_.tag===1){W=ho(-1,h&-h),W.tag=2;var J=_.updateQueue;if(J!==null){J=J.shared;var ae=J.pending;ae===null?W.next=W:(W.next=ae.next,ae.next=W),J.pending=W}}_.lanes|=h,W=_.alternate,W!==null&&(W.lanes|=h),$0(_.return,h,c),z.lanes|=h;break}W=W.next}}else if(_.tag===10)P=_.type===c.type?null:_.child;else if(_.tag===18){if(P=_.return,P===null)throw Error(t(341));P.lanes|=h,z=P.alternate,z!==null&&(z.lanes|=h),$0(P,h,c),P=_.sibling}else P=_.child;if(P!==null)P.return=_;else for(P=_;P!==null;){if(P===c){P=null;break}if(_=P.sibling,_!==null){_.return=P.return,P=_;break}P=P.return}_=P}Yn(l,c,w.children,h),c=c.child}return c;case 9:return w=c.type,v=c.pendingProps.children,wl(c,h),w=Br(w),v=v(w),c.flags|=1,Yn(l,c,v,h),c.child;case 14:return v=c.type,w=ii(v,c.pendingProps),w=ii(v.type,w),x_(l,c,v,w,h);case 15:return E_(l,c,c.type,c.pendingProps,h);case 17:return v=c.type,w=c.pendingProps,w=c.elementType===v?w:ii(v,w),Wd(l,c),c.tag=1,sr(v)?(l=!0,Id(c)):l=!1,wl(c,h),h_(c,v,w),a1(c,v,w,h),f1(null,c,v,!0,l,h);case 19:return R_(l,c,h);case 22:return A_(l,c,h)}throw Error(t(156,c.tag))};function ex(l,c){return ku(l,c)}function r4(l,c,h,v){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(l,c,h,v){return new r4(l,c,h,v)}function N1(l){return l=l.prototype,!(!l||!l.isReactComponent)}function i4(l){if(typeof l=="function")return N1(l)?1:0;if(l!=null){if(l=l.$$typeof,l===U)return 11;if(l===le)return 14}return 2}function rs(l,c){var h=l.alternate;return h===null?(h=zr(l.tag,c,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=c,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&14680064,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,c=l.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h}function th(l,c,h,v,w,_){var P=2;if(v=l,typeof l=="function")N1(l)&&(P=1);else if(typeof l=="string")P=5;else e:switch(l){case b:return ca(h.children,w,_,c);case S:P=8,w|=8;break;case O:return l=zr(12,h,c,w|2),l.elementType=O,l.lanes=_,l;case D:return l=zr(13,h,c,w),l.elementType=D,l.lanes=_,l;case ue:return l=zr(19,h,c,w),l.elementType=ue,l.lanes=_,l;case Ie:return nh(h,w,_,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case V:P=10;break e;case L:P=9;break e;case U:P=11;break e;case le:P=14;break e;case Ue:P=16,v=null;break e}throw Error(t(130,l==null?l:typeof l,""))}return c=zr(P,h,c,w),c.elementType=l,c.type=v,c.lanes=_,c}function ca(l,c,h,v){return l=zr(7,l,v,c),l.lanes=h,l}function nh(l,c,h,v){return l=zr(22,l,v,c),l.elementType=Ie,l.lanes=h,l.stateNode={isHidden:!1},l}function O1(l,c,h){return l=zr(6,l,null,c),l.lanes=h,l}function D1(l,c,h){return c=zr(4,l.children!==null?l.children:[],l.key,c),c.lanes=h,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function o4(l,c,h,v,w){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bu(0),this.expirationTimes=Bu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bu(0),this.identifierPrefix=v,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function k1(l,c,h,v,w,_,P,z,W){return l=new o4(l,c,h,z,W),c===1?(c=1,_===!0&&(c|=8)):c=0,_=zr(3,null,null,c),l.current=_,_.stateNode=l,_.memoizedState={element:v,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},q0(_),l}function s4(l,c,h){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:v==null?null:""+v,children:l,containerInfo:c,implementation:h}}function tx(l){if(!l)return Ko;l=l._reactInternals;e:{if(ei(l)!==l||l.tag!==1)throw Error(t(170));var c=l;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(sr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(l.tag===1){var h=l.type;if(sr(h))return Pw(l,h,c)}return c}function nx(l,c,h,v,w,_,P,z,W){return l=k1(h,v,!0,l,w,_,P,z,W),l.context=tx(null),h=l.current,v=Qn(),w=ts(h),_=ho(v,w),_.callback=c??null,Qo(h,_,w),l.current.lanes=w,Ks(l,w,v),ur(l,v),l}function rh(l,c,h,v){var w=c.current,_=Qn(),P=ts(w);return h=tx(h),c.context===null?c.context=h:c.pendingContext=h,c=ho(_,P),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=Qo(w,c,P),l!==null&&(ai(l,w,P,_),kd(l,w,P)),P}function ih(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function rx(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<c?h:c}}function M1(l,c){rx(l,c),(l=l.alternate)&&rx(l,c)}function a4(){return null}var ix=typeof reportError=="function"?reportError:function(l){console.error(l)};function L1(l){this._internalRoot=l}oh.prototype.render=L1.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(t(409));rh(l,c,null,null)},oh.prototype.unmount=L1.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;aa(function(){rh(null,l,null,null)}),c[ao]=null}};function oh(l){this._internalRoot=l}oh.prototype.unstable_scheduleHydration=function(l){if(l){var c=Hu();l={blockedOn:null,target:l,priority:c};for(var h=0;h<xr.length&&c!==0&&c<xr[h].priority;h++);xr.splice(h,0,l),h===0&&Qa(l)}};function V1(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function sh(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function ox(){}function l4(l,c,h,v,w){if(w){if(typeof v=="function"){var _=v;v=function(){var J=ih(P);_.call(J)}}var P=nx(c,v,l,0,null,!1,!1,"",ox);return l._reactRootContainer=P,l[ao]=P.current,tc(l.nodeType===8?l.parentNode:l),aa(),P}for(;w=l.lastChild;)l.removeChild(w);if(typeof v=="function"){var z=v;v=function(){var J=ih(W);z.call(J)}}var W=k1(l,0,!1,null,null,!1,!1,"",ox);return l._reactRootContainer=W,l[ao]=W.current,tc(l.nodeType===8?l.parentNode:l),aa(function(){rh(c,W,h,v)}),W}function ah(l,c,h,v,w){var _=h._reactRootContainer;if(_){var P=_;if(typeof w=="function"){var z=w;w=function(){var W=ih(P);z.call(W)}}rh(c,P,l,w)}else P=l4(h,c,l,w,v);return ih(P)}ju=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.current.memoizedState.isDehydrated){var h=ut(c.pendingLanes);h!==0&&(Uu(c,h|1),ur(c,Et()),(ot&6)===0&&(Tl=Et()+500,Xo()))}break;case 13:aa(function(){var v=fo(l,1);if(v!==null){var w=Qn();ai(v,l,1,w)}}),M1(l,1)}},Xa=function(l){if(l.tag===13){var c=fo(l,134217728);if(c!==null){var h=Qn();ai(c,l,134217728,h)}M1(l,134217728)}},zu=function(l){if(l.tag===13){var c=ts(l),h=fo(l,c);if(h!==null){var v=Qn();ai(h,l,c,v)}M1(l,c)}},Hu=function(){return tt},Wu=function(l,c){var h=tt;try{return tt=l,c()}finally{tt=h}},Qi=function(l,c,h){switch(c){case"input":if(Fs(l,h),c=h.name,h.type==="radio"&&c!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var v=h[c];if(v!==l&&v.form===l.form){var w=Td(v);if(!w)throw Error(t(90));Pt(v),Fs(v,w)}}}break;case"textarea":Xf(l,h);break;case"select":c=h.value,c!=null&&Zr(l,!!h.multiple,c,!1)}},Zf=b1,Jf=aa;var u4={usingClientEntryPoint:!1,Events:[ic,fl,Td,Mo,Lo,b1]},yc={findFiberByHostInstance:Js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},c4={bundleType:yc.bundleType,version:yc.version,rendererPackageName:yc.rendererPackageName,rendererConfig:yc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=sd(l),l===null?null:l.stateNode},findFiberByHostInstance:yc.findFiberByHostInstance||a4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lh.isDisabled&&lh.supportsFiber)try{Ws=lh.inject(c4),wr=lh}catch{}}return cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u4,cr.createPortal=function(l,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!V1(c))throw Error(t(200));return s4(l,c,null,h)},cr.createRoot=function(l,c){if(!V1(l))throw Error(t(299));var h=!1,v="",w=ix;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onRecoverableError!==void 0&&(w=c.onRecoverableError)),c=k1(l,1,!1,null,null,h,!1,v,w),l[ao]=c.current,tc(l.nodeType===8?l.parentNode:l),new L1(c)},cr.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(t(188)):(l=Object.keys(l).join(","),Error(t(268,l)));return l=sd(c),l=l===null?null:l.stateNode,l},cr.flushSync=function(l){return aa(l)},cr.hydrate=function(l,c,h){if(!sh(c))throw Error(t(200));return ah(null,l,c,!0,h)},cr.hydrateRoot=function(l,c,h){if(!V1(l))throw Error(t(405));var v=h!=null&&h.hydratedSources||null,w=!1,_="",P=ix;if(h!=null&&(h.unstable_strictMode===!0&&(w=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onRecoverableError!==void 0&&(P=h.onRecoverableError)),c=nx(c,null,l,1,h??null,w,!1,_,P),l[ao]=c.current,tc(l),v)for(l=0;l<v.length;l++)h=v[l],w=h._getVersion,w=w(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,w]:c.mutableSourceEagerHydrationData.push(h,w);return new oh(c)},cr.render=function(l,c,h){if(!sh(c))throw Error(t(200));return ah(null,l,c,!1,h)},cr.unmountComponentAtNode=function(l){if(!sh(l))throw Error(t(40));return l._reactRootContainer?(aa(function(){ah(null,null,l,!1,function(){l._reactRootContainer=null,l[ao]=null})}),!0):!1},cr.unstable_batchedUpdates=b1,cr.unstable_renderSubtreeIntoContainer=function(l,c,h,v){if(!sh(h))throw Error(t(200));if(l==null||l._reactInternals===void 0)throw Error(t(38));return ah(l,c,h,!1,v)},cr.version="18.3.1-next-f1338f8080-20240426",cr}var hx;function xT(){if(hx)return U1.exports;hx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),U1.exports=w4(),U1.exports}var px;function _4(){if(px)return uh;px=1;var n=xT();return uh.createRoot=n.createRoot,uh.hydrateRoot=n.hydrateRoot,uh}var x4=_4();const E4=uu(x4);/*! Capacitor: https://capacitorjs.com/ - MIT License */var Yl;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(Yl||(Yl={}));class H1 extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const A4=n=>{var e,t;return n?.androidBridge?"android":!((t=(e=n?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},T4=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},r=t.Plugins=t.Plugins||{},i=()=>e!==null?e.name:A4(n),o=()=>i()!=="web",s=p=>{const g=f.get(p);return!!(g?.platforms.has(i())||a(p))},a=p=>{var g;return(g=t.PluginHeaders)===null||g===void 0?void 0:g.find(y=>y.name===p)},u=p=>n.console.error(p),f=new Map,d=(p,g={})=>{const y=f.get(p);if(y)return console.warn(`Capacitor plugin "${p}" already registered. Cannot register plugins twice.`),y.proxy;const E=i(),A=a(p);let I;const N=async()=>(!I&&E in g?I=typeof g[E]=="function"?I=await g[E]():I=g[E]:e!==null&&!I&&"web"in g&&(I=typeof g.web=="function"?I=await g.web():I=g.web),I),R=(S,O)=>{var V,L;if(A){const U=A?.methods.find(D=>O===D.name);if(U)return U.rtype==="promise"?D=>t.nativePromise(p,O.toString(),D):(D,ue)=>t.nativeCallback(p,O.toString(),D,ue);if(S)return(V=S[O])===null||V===void 0?void 0:V.bind(S)}else{if(S)return(L=S[O])===null||L===void 0?void 0:L.bind(S);throw new H1(`"${p}" plugin is not implemented on ${E}`,Yl.Unimplemented)}},k=S=>{let O;const V=(...L)=>{const U=N().then(D=>{const ue=R(D,S);if(ue){const le=ue(...L);return O=le?.remove,le}else throw new H1(`"${p}.${S}()" is not implemented on ${E}`,Yl.Unimplemented)});return S==="addListener"&&(U.remove=async()=>O()),U};return V.toString=()=>`${S.toString()}() { [capacitor code] }`,Object.defineProperty(V,"name",{value:S,writable:!1,configurable:!1}),V},j=k("addListener"),H=k("removeListener"),$=(S,O)=>{const V=j({eventName:S},O),L=async()=>{const D=await V;H({eventName:S,callbackId:D},O)},U=new Promise(D=>V.then(()=>D({remove:L})));return U.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await L()},U},b=new Proxy({},{get(S,O){switch(O){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return A?$:j;case"removeListener":return H;default:return k(O)}}});return r[p]=b,f.set(p,{name:p,proxy:b,platforms:new Set([...Object.keys(g),...A?[E]:[]])}),b};return t.convertFileSrc||(t.convertFileSrc=p=>p),t.getPlatform=i,t.handleError=u,t.isNativePlatform=o,t.isPluginAvailable=s,t.registerPlugin=d,t.Exception=H1,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},C4=n=>n.Capacitor=T4(n),mi=C4(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),If=mi.registerPlugin;class ET{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e);const s=async()=>this.removeListener(e,t);return Promise.resolve({remove:s})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const i=this.listeners[e];if(!i){if(r){let o=this.retainedEventArguments[e];o||(o=[]),o.push(t),this.retainedEventArguments[e]=o}return}i.forEach(o=>o(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new mi.Exception(e,Yl.Unimplemented)}unavailable(e="not available"){return new mi.Exception(e,Yl.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const i=r.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const mx=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),gx=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class I4 extends ET{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=gx(i).trim(),o=gx(o).trim(),t[i]=o}),t}async setCookie(e){try{const t=mx(e.key),r=mx(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),s=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${i}; path=${o}; ${s};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}If("CapacitorCookies",{web:()=>new I4});const S4=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>t(i),r.readAsDataURL(n)}),b4=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,o,s)=>(i[o]=n[e[s]],i),{})},P4=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[o,s]=i;let a,u;return Array.isArray(s)?(u="",s.forEach(f=>{a=e?encodeURIComponent(f):f,u+=`${o}=${a}&`}),u.slice(0,-1)):(a=e?encodeURIComponent(s):s,u=`${o}=${a}`),`${r}&${u}`},"").substr(1):null,R4=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),i=b4(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[s,a]of Object.entries(n.data||{}))o.set(s,a);t.body=o.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const o=new FormData;if(n.data instanceof FormData)n.data.forEach((a,u)=>{o.append(u,a)});else for(const a of Object.keys(n.data))o.append(a,n.data[a]);t.body=o;const s=new Headers(t.headers);s.delete("content-type"),t.headers=s}else(i.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class N4 extends ET{async request(e){const t=R4(e,e.webFetchExtra),r=P4(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,o=await fetch(i,t),s=o.headers.get("content-type")||"";let{responseType:a="text"}=o.ok?e:{};s.includes("application/json")&&(a="json");let u,f;switch(a){case"arraybuffer":case"blob":f=await o.blob(),u=await S4(f);break;case"json":u=await o.json();break;case"document":case"text":default:u=await o.text()}const d={};return o.headers.forEach((p,g)=>{d[g]=p}),{data:u,headers:d,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}If("CapacitorHttp",{web:()=>new N4});const O4="modulepreload",D4=function(n){return"/"+n},vx={},AT=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let u=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");i=u(t.map(f=>{if(f=D4(f),f in vx)return;vx[f]=!0;const d=f.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":O4,d||(g.as="script"),g.crossOrigin="",g.href=f,a&&g.setAttribute("nonce",a),document.head.appendChild(g),d)return new Promise((y,E)=>{g.addEventListener("load",y),g.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},k4=If("SplashScreen",{web:()=>AT(()=>import("./web-DGz559Xa.js"),[]).then(n=>new n.SplashScreenWeb)});var Bm;(function(n){n.Dark="DARK",n.Light="LIGHT",n.Default="DEFAULT"})(Bm||(Bm={}));var yx;(function(n){n.None="NONE",n.Slide="SLIDE",n.Fade="FADE"})(yx||(yx={}));const wx=If("StatusBar");var W1,_x;function M4(){if(_x)return W1;_x=1;var n=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(o,s){if(o===s)return!0;if(o&&s&&typeof o=="object"&&typeof s=="object"){if(o.constructor!==s.constructor)return!1;var a,u,f;if(Array.isArray(o)){if(a=o.length,a!=s.length)return!1;for(u=a;u--!==0;)if(!i(o[u],s[u]))return!1;return!0}var d;if(e&&o instanceof Map&&s instanceof Map){if(o.size!==s.size)return!1;for(d=o.entries();!(u=d.next()).done;)if(!s.has(u.value[0]))return!1;for(d=o.entries();!(u=d.next()).done;)if(!i(u.value[1],s.get(u.value[0])))return!1;return!0}if(t&&o instanceof Set&&s instanceof Set){if(o.size!==s.size)return!1;for(d=o.entries();!(u=d.next()).done;)if(!s.has(u.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(s)){if(a=o.length,a!=s.length)return!1;for(u=a;u--!==0;)if(o[u]!==s[u])return!1;return!0}if(o.constructor===RegExp)return o.source===s.source&&o.flags===s.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof s.valueOf=="function")return o.valueOf()===s.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof s.toString=="function")return o.toString()===s.toString();if(f=Object.keys(o),a=f.length,a!==Object.keys(s).length)return!1;for(u=a;u--!==0;)if(!Object.prototype.hasOwnProperty.call(s,f[u]))return!1;if(n&&o instanceof Element)return!1;for(u=a;u--!==0;)if(!((f[u]==="_owner"||f[u]==="__v"||f[u]==="__o")&&o.$$typeof)&&!i(o[f[u]],s[f[u]]))return!1;return!0}return o!==o&&s!==s}return W1=function(s,a){try{return i(s,a)}catch(u){if((u.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw u}},W1}var L4=M4();const V4=uu(L4);var $1,xx;function F4(){if(xx)return $1;xx=1;var n=function(e,t,r,i,o,s,a,u){if(!e){var f;if(t===void 0)f=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,i,o,s,a,u],p=0;f=new Error(t.replace(/%s/g,function(){return d[p++]})),f.name="Invariant Violation"}throw f.framesToPop=1,f}};return $1=n,$1}var B4=F4();const Ex=uu(B4);var G1,Ax;function U4(){return Ax||(Ax=1,G1=function(e,t,r,i){var o=r?r.call(i,e,t):void 0;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),f=0;f<s.length;f++){var d=s[f];if(!u(d))return!1;var p=e[d],g=t[d];if(o=r?r.call(i,p,g,d):void 0,o===!1||o===void 0&&p!==g)return!1}return!0}),G1}var j4=U4();const z4=uu(j4);var TT=(n=>(n.BASE="base",n.BODY="body",n.HEAD="head",n.HTML="html",n.LINK="link",n.META="meta",n.NOSCRIPT="noscript",n.SCRIPT="script",n.STYLE="style",n.TITLE="title",n.FRAGMENT="Symbol(react.fragment)",n))(TT||{}),q1={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Tx=Object.values(TT),iv={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},H4=Object.entries(iv).reduce((n,[e,t])=>(n[t]=e,n),{}),hi="data-rh",zl={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Hl=(n,e)=>{for(let t=n.length-1;t>=0;t-=1){const r=n[t];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},W4=n=>{let e=Hl(n,"title");const t=Hl(n,zl.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),t&&e)return t.replace(/%s/g,()=>e);const r=Hl(n,zl.DEFAULT_TITLE);return e||r||void 0},$4=n=>Hl(n,zl.ON_CHANGE_CLIENT_STATE)||(()=>{}),K1=(n,e)=>e.filter(t=>typeof t[n]<"u").map(t=>t[n]).reduce((t,r)=>({...t,...r}),{}),G4=(n,e)=>e.filter(t=>typeof t.base<"u").map(t=>t.base).reverse().reduce((t,r)=>{if(!t.length){const i=Object.keys(r);for(let o=0;o<i.length;o+=1){const a=i[o].toLowerCase();if(n.indexOf(a)!==-1&&r[a])return t.concat(r)}}return t},[]),q4=n=>console&&typeof console.warn=="function"&&console.warn(n),_c=(n,e,t)=>{const r={};return t.filter(i=>Array.isArray(i[n])?!0:(typeof i[n]<"u"&&q4(`Helmet: ${n} should be of type "Array". Instead found type "${typeof i[n]}"`),!1)).map(i=>i[n]).reverse().reduce((i,o)=>{const s={};o.filter(u=>{let f;const d=Object.keys(u);for(let g=0;g<d.length;g+=1){const y=d[g],E=y.toLowerCase();e.indexOf(E)!==-1&&!(f==="rel"&&u[f].toLowerCase()==="canonical")&&!(E==="rel"&&u[E].toLowerCase()==="stylesheet")&&(f=E),e.indexOf(y)!==-1&&(y==="innerHTML"||y==="cssText"||y==="itemprop")&&(f=y)}if(!f||!u[f])return!1;const p=u[f].toLowerCase();return r[f]||(r[f]={}),s[f]||(s[f]={}),r[f][p]?!1:(s[f][p]=!0,!0)}).reverse().forEach(u=>i.push(u));const a=Object.keys(s);for(let u=0;u<a.length;u+=1){const f=a[u],d={...r[f],...s[f]};r[f]=d}return i},[]).reverse()},K4=(n,e)=>{if(Array.isArray(n)&&n.length){for(let t=0;t<n.length;t+=1)if(n[t][e])return!0}return!1},X4=n=>({baseTag:G4(["href"],n),bodyAttributes:K1("bodyAttributes",n),defer:Hl(n,zl.DEFER),encode:Hl(n,zl.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:K1("htmlAttributes",n),linkTags:_c("link",["rel","href"],n),metaTags:_c("meta",["name","charset","http-equiv","property","itemprop"],n),noscriptTags:_c("noscript",["innerHTML"],n),onChangeClientState:$4(n),scriptTags:_c("script",["src","innerHTML"],n),styleTags:_c("style",["cssText"],n),title:W4(n),titleAttributes:K1("titleAttributes",n),prioritizeSeoTags:K4(n,zl.PRIORITIZE_SEO_TAGS)}),CT=n=>Array.isArray(n)?n.join(""):n,Y4=(n,e)=>{const t=Object.keys(n);for(let r=0;r<t.length;r+=1)if(e[t[r]]&&e[t[r]].includes(n[t[r]]))return!0;return!1},X1=(n,e)=>Array.isArray(n)?n.reduce((t,r)=>(Y4(r,e)?t.priority.push(r):t.default.push(r),t),{priority:[],default:[]}):{default:n,priority:[]},Cx=(n,e)=>({...n,[e]:void 0}),Q4=["noscript","script","style"],Um=(n,e=!0)=>e===!1?String(n):String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),IT=n=>Object.keys(n).reduce((e,t)=>{const r=typeof n[t]<"u"?`${t}="${n[t]}"`:`${t}`;return e?`${e} ${r}`:r},""),Z4=(n,e,t,r)=>{const i=IT(t),o=CT(e);return i?`<${n} ${hi}="true" ${i}>${Um(o,r)}</${n}>`:`<${n} ${hi}="true">${Um(o,r)}</${n}>`},J4=(n,e,t=!0)=>e.reduce((r,i)=>{const o=i,s=Object.keys(o).filter(f=>!(f==="innerHTML"||f==="cssText")).reduce((f,d)=>{const p=typeof o[d]>"u"?d:`${d}="${Um(o[d],t)}"`;return f?`${f} ${p}`:p},""),a=o.innerHTML||o.cssText||"",u=Q4.indexOf(n)===-1;return`${r}<${n} ${hi}="true" ${s}${u?"/>":`>${a}</${n}>`}`},""),ST=(n,e={})=>Object.keys(n).reduce((t,r)=>{const i=iv[r];return t[i||r]=n[r],t},e),eR=(n,e,t)=>{const r={key:e,[hi]:!0},i=ST(t,r);return[xn.createElement("title",i,e)]},Rh=(n,e)=>e.map((t,r)=>{const i={key:r,[hi]:!0};return Object.keys(t).forEach(o=>{const a=iv[o]||o;if(a==="innerHTML"||a==="cssText"){const u=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:u}}else i[a]=t[o]}),xn.createElement(n,i)}),Gr=(n,e,t=!0)=>{switch(n){case"title":return{toComponent:()=>eR(n,e.title,e.titleAttributes),toString:()=>Z4(n,e.title,e.titleAttributes,t)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>ST(e),toString:()=>IT(e)};default:return{toComponent:()=>Rh(n,e),toString:()=>J4(n,e,t)}}},tR=({metaTags:n,linkTags:e,scriptTags:t,encode:r})=>{const i=X1(n,q1.meta),o=X1(e,q1.link),s=X1(t,q1.script);return{priorityMethods:{toComponent:()=>[...Rh("meta",i.priority),...Rh("link",o.priority),...Rh("script",s.priority)],toString:()=>`${Gr("meta",i.priority,r)} ${Gr("link",o.priority,r)} ${Gr("script",s.priority,r)}`},metaTags:i.default,linkTags:o.default,scriptTags:s.default}},nR=n=>{const{baseTag:e,bodyAttributes:t,encode:r=!0,htmlAttributes:i,noscriptTags:o,styleTags:s,title:a="",titleAttributes:u,prioritizeSeoTags:f}=n;let{linkTags:d,metaTags:p,scriptTags:g}=n,y={toComponent:()=>{},toString:()=>""};return f&&({priorityMethods:y,linkTags:d,metaTags:p,scriptTags:g}=tR(n)),{priority:y,base:Gr("base",e,r),bodyAttributes:Gr("bodyAttributes",t,r),htmlAttributes:Gr("htmlAttributes",i,r),link:Gr("link",d,r),meta:Gr("meta",p,r),noscript:Gr("noscript",o,r),script:Gr("script",g,r),style:Gr("style",s,r),title:Gr("title",{title:a,titleAttributes:u},r)}},jm=nR,ch=[],bT=!!(typeof window<"u"&&window.document&&window.document.createElement),zm=class{instances=[];canUseDOM=bT;context;value={setHelmet:n=>{this.context.helmet=n},helmetInstances:{get:()=>this.canUseDOM?ch:this.instances,add:n=>{(this.canUseDOM?ch:this.instances).push(n)},remove:n=>{const e=(this.canUseDOM?ch:this.instances).indexOf(n);(this.canUseDOM?ch:this.instances).splice(e,1)}}};constructor(n,e){this.context=n,this.canUseDOM=e||!1,e||(n.helmet=jm({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},rR={},PT=xn.createContext(rR),RT=class NT extends B.Component{static canUseDOM=bT;helmetData;constructor(e){super(e),this.helmetData=new zm(this.props.context||{},NT.canUseDOM)}render(){return xn.createElement(PT.Provider,{value:this.helmetData.value},this.props.children)}},Il=(n,e)=>{const t=document.head||document.querySelector("head"),r=t.querySelectorAll(`${n}[${hi}]`),i=[].slice.call(r),o=[];let s;return e&&e.length&&e.forEach(a=>{const u=document.createElement(n);for(const f in a)if(Object.prototype.hasOwnProperty.call(a,f))if(f==="innerHTML")u.innerHTML=a.innerHTML;else if(f==="cssText")u.styleSheet?u.styleSheet.cssText=a.cssText:u.appendChild(document.createTextNode(a.cssText));else{const d=f,p=typeof a[d]>"u"?"":a[d];u.setAttribute(f,p)}u.setAttribute(hi,"true"),i.some((f,d)=>(s=d,u.isEqualNode(f)))?i.splice(s,1):o.push(u)}),i.forEach(a=>a.parentNode?.removeChild(a)),o.forEach(a=>t.appendChild(a)),{oldTags:i,newTags:o}},Hm=(n,e)=>{const t=document.getElementsByTagName(n)[0];if(!t)return;const r=t.getAttribute(hi),i=r?r.split(","):[],o=[...i],s=Object.keys(e);for(const a of s){const u=e[a]||"";t.getAttribute(a)!==u&&t.setAttribute(a,u),i.indexOf(a)===-1&&i.push(a);const f=o.indexOf(a);f!==-1&&o.splice(f,1)}for(let a=o.length-1;a>=0;a-=1)t.removeAttribute(o[a]);i.length===o.length?t.removeAttribute(hi):t.getAttribute(hi)!==s.join(",")&&t.setAttribute(hi,s.join(","))},iR=(n,e)=>{typeof n<"u"&&document.title!==n&&(document.title=CT(n)),Hm("title",e)},Ix=(n,e)=>{const{baseTag:t,bodyAttributes:r,htmlAttributes:i,linkTags:o,metaTags:s,noscriptTags:a,onChangeClientState:u,scriptTags:f,styleTags:d,title:p,titleAttributes:g}=n;Hm("body",r),Hm("html",i),iR(p,g);const y={baseTag:Il("base",t),linkTags:Il("link",o),metaTags:Il("meta",s),noscriptTags:Il("noscript",a),scriptTags:Il("script",f),styleTags:Il("style",d)},E={},A={};Object.keys(y).forEach(I=>{const{newTags:N,oldTags:R}=y[I];N.length&&(E[I]=N),R.length&&(A[I]=y[I].oldTags)}),e&&e(),u(n,E,A)},xc=null,oR=n=>{xc&&cancelAnimationFrame(xc),n.defer?xc=requestAnimationFrame(()=>{Ix(n,()=>{xc=null})}):(Ix(n),xc=null)},sR=oR,Sx=class extends B.Component{rendered=!1;shouldComponentUpdate(n){return!z4(n,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:n}=this.props.context;n.remove(this),this.emitChange()}emitChange(){const{helmetInstances:n,setHelmet:e}=this.props.context;let t=null;const r=X4(n.get().map(i=>{const o={...i.props};return delete o.context,o}));RT.canUseDOM?sR(r):jm&&(t=jm(r)),e(t)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:n}=this.props.context;n.add(this),this.emitChange()}render(){return this.init(),null}},Sp=class extends B.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(n){return!V4(Cx(this.props,"helmetData"),Cx(n,"helmetData"))}mapNestedChildrenToProps(n,e){if(!e)return null;switch(n.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${n.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(n,e,t,r){return{...e,[n.type]:[...e[n.type]||[],{...t,...this.mapNestedChildrenToProps(n,r)}]}}mapObjectTypeChildren(n,e,t,r){switch(n.type){case"title":return{...e,[n.type]:r,titleAttributes:{...t}};case"body":return{...e,bodyAttributes:{...t}};case"html":return{...e,htmlAttributes:{...t}};default:return{...e,[n.type]:{...t}}}}mapArrayTypeChildrenToProps(n,e){let t={...e};return Object.keys(n).forEach(r=>{t={...t,[r]:n[r]}}),t}warnOnInvalidChildren(n,e){return Ex(Tx.some(t=>n.type===t),typeof n.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Tx.join(", ")} are allowed. Helmet does not support rendering <${n.type}> elements. Refer to our API for more information.`),Ex(!e||typeof e=="string"||Array.isArray(e)&&!e.some(t=>typeof t!="string"),`Helmet expects a string as a child of <${n.type}>. Did you forget to wrap your children in braces? ( <${n.type}>{\`\`}</${n.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(n,e){let t={};return xn.Children.forEach(n,r=>{if(!r||!r.props)return;const{children:i,...o}=r.props,s=Object.keys(o).reduce((u,f)=>(u[H4[f]||f]=o[f],u),{});let{type:a}=r;switch(typeof a=="symbol"?a=a.toString():this.warnOnInvalidChildren(r,i),a){case"Symbol(react.fragment)":e=this.mapChildrenToProps(i,e);break;case"link":case"meta":case"noscript":case"script":case"style":t=this.flattenArrayTypeChildren(r,t,s,i);break;default:e=this.mapObjectTypeChildren(r,e,s,i);break}}),this.mapArrayTypeChildrenToProps(t,e)}render(){const{children:n,...e}=this.props;let t={...e},{helmetData:r}=e;if(n&&(t=this.mapChildrenToProps(n,t)),r&&!(r instanceof zm)){const i=r;r=new zm(i.context,!0),delete t.helmetData}return r?xn.createElement(Sx,{...t,context:r.value}):xn.createElement(PT.Consumer,null,i=>xn.createElement(Sx,{...t,context:i}))}};const ov=B.createContext({});function sv(n){const e=B.useRef(null);return e.current===null&&(e.current=n()),e.current}const av=typeof window<"u",OT=av?B.useLayoutEffect:B.useEffect,bp=B.createContext(null);function lv(n,e){n.indexOf(e)===-1&&n.push(e)}function uv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const wo=(n,e,t)=>t>e?e:t<n?n:t;let cv=()=>{};const _o={},DT=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function kT(n){return typeof n=="object"&&n!==null}const MT=n=>/^0[^.\s]+$/u.test(n);function fv(n){let e;return()=>(e===void 0&&(e=n()),e)}const Xr=n=>n,aR=(n,e)=>t=>e(n(t)),Sf=(...n)=>n.reduce(aR),of=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class dv{constructor(){this.subscriptions=[]}add(e){return lv(this.subscriptions,e),()=>uv(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ui=n=>n*1e3,qr=n=>n/1e3;function LT(n,e){return e?n*(1e3/e):0}const VT=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,lR=1e-7,uR=12;function cR(n,e,t,r,i){let o,s,a=0;do s=e+(t-e)/2,o=VT(s,r,i)-n,o>0?t=s:e=s;while(Math.abs(o)>lR&&++a<uR);return s}function bf(n,e,t,r){if(n===e&&t===r)return Xr;const i=o=>cR(o,0,1,n,t);return o=>o===0||o===1?o:VT(i(o),e,r)}const FT=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,BT=n=>e=>1-n(1-e),UT=bf(.33,1.53,.69,.99),hv=BT(UT),jT=FT(hv),zT=n=>(n*=2)<1?.5*hv(n):.5*(2-Math.pow(2,-10*(n-1))),pv=n=>1-Math.sin(Math.acos(n)),HT=BT(pv),WT=FT(pv),fR=bf(.42,0,1,1),dR=bf(0,0,.58,1),$T=bf(.42,0,.58,1),hR=n=>Array.isArray(n)&&typeof n[0]!="number",GT=n=>Array.isArray(n)&&typeof n[0]=="number",pR={linear:Xr,easeIn:fR,easeInOut:$T,easeOut:dR,circIn:pv,circInOut:WT,circOut:HT,backIn:hv,backInOut:jT,backOut:UT,anticipate:zT},mR=n=>typeof n=="string",bx=n=>{if(GT(n)){cv(n.length===4);const[e,t,r,i]=n;return bf(e,t,r,i)}else if(mR(n))return pR[n];return n},fh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function gR(n,e){let t=new Set,r=new Set,i=!1,o=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function u(d){s.has(d)&&(f.schedule(d),n()),d(a)}const f={schedule:(d,p=!1,g=!1)=>{const E=g&&i?t:r;return p&&s.add(d),E.has(d)||E.add(d),d},cancel:d=>{r.delete(d),s.delete(d)},process:d=>{if(a=d,i){o=!0;return}i=!0,[t,r]=[r,t],t.forEach(u),t.clear(),i=!1,o&&(o=!1,f.process(d))}};return f}const vR=40;function qT(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,s=fh.reduce((k,j)=>(k[j]=gR(o),k),{}),{setup:a,read:u,resolveKeyframes:f,preUpdate:d,update:p,preRender:g,render:y,postRender:E}=s,A=()=>{const k=_o.useManualTiming?i.timestamp:performance.now();t=!1,_o.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,vR),1)),i.timestamp=k,i.isProcessing=!0,a.process(i),u.process(i),f.process(i),d.process(i),p.process(i),g.process(i),y.process(i),E.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(A))},I=()=>{t=!0,r=!0,i.isProcessing||n(A)};return{schedule:fh.reduce((k,j)=>{const H=s[j];return k[j]=($,b=!1,S=!1)=>(t||I(),H.schedule($,b,S)),k},{}),cancel:k=>{for(let j=0;j<fh.length;j++)s[fh[j]].cancel(k)},state:i,steps:s}}const{schedule:Nt,cancel:Cs,state:On,steps:Y1}=qT(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xr,!0);let Nh;function yR(){Nh=void 0}const mr={now:()=>(Nh===void 0&&mr.set(On.isProcessing||_o.useManualTiming?On.timestamp:performance.now()),Nh),set:n=>{Nh=n,queueMicrotask(yR)}},KT=n=>e=>typeof e=="string"&&e.startsWith(n),mv=KT("--"),wR=KT("var(--"),gv=n=>wR(n)?_R.test(n.split("/*")[0].trim()):!1,_R=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,cu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},sf={...cu,transform:n=>wo(0,1,n)},dh={...cu,default:1},Uc=n=>Math.round(n*1e5)/1e5,vv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function xR(n){return n==null}const ER=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yv=(n,e)=>t=>!!(typeof t=="string"&&ER.test(t)&&t.startsWith(n)||e&&!xR(t)&&Object.prototype.hasOwnProperty.call(t,e)),XT=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,o,s,a]=r.match(vv);return{[n]:parseFloat(i),[e]:parseFloat(o),[t]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},AR=n=>wo(0,255,n),Q1={...cu,transform:n=>Math.round(AR(n))},ya={test:yv("rgb","red"),parse:XT("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Q1.transform(n)+", "+Q1.transform(e)+", "+Q1.transform(t)+", "+Uc(sf.transform(r))+")"};function TR(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Wm={test:yv("#"),parse:TR,transform:ya.transform},Pf=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),us=Pf("deg"),ji=Pf("%"),Be=Pf("px"),CR=Pf("vh"),IR=Pf("vw"),Px={...ji,parse:n=>ji.parse(n)/100,transform:n=>ji.transform(n*100)},kl={test:yv("hsl","hue"),parse:XT("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+ji.transform(Uc(e))+", "+ji.transform(Uc(t))+", "+Uc(sf.transform(r))+")"},Qt={test:n=>ya.test(n)||Wm.test(n)||kl.test(n),parse:n=>ya.test(n)?ya.parse(n):kl.test(n)?kl.parse(n):Wm.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?ya.transform(n):kl.transform(n),getAnimatableNone:n=>{const e=Qt.parse(n);return e.alpha=0,Qt.transform(e)}},SR=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function bR(n){return isNaN(n)&&typeof n=="string"&&(n.match(vv)?.length||0)+(n.match(SR)?.length||0)>0}const YT="number",QT="color",PR="var",RR="var(",Rx="${}",NR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function af(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let o=0;const a=e.replace(NR,u=>(Qt.test(u)?(r.color.push(o),i.push(QT),t.push(Qt.parse(u))):u.startsWith(RR)?(r.var.push(o),i.push(PR),t.push(u)):(r.number.push(o),i.push(YT),t.push(parseFloat(u))),++o,Rx)).split(Rx);return{values:t,split:a,indexes:r,types:i}}function ZT(n){return af(n).values}function JT(n){const{split:e,types:t}=af(n),r=e.length;return i=>{let o="";for(let s=0;s<r;s++)if(o+=e[s],i[s]!==void 0){const a=t[s];a===YT?o+=Uc(i[s]):a===QT?o+=Qt.transform(i[s]):o+=i[s]}return o}}const OR=n=>typeof n=="number"?0:Qt.test(n)?Qt.getAnimatableNone(n):n;function DR(n){const e=ZT(n);return JT(n)(e.map(OR))}const Is={test:bR,parse:ZT,createTransformer:JT,getAnimatableNone:DR};function Z1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function kR({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,o=0,s=0;if(!e)i=o=s=t;else{const a=t<.5?t*(1+e):t+e-t*e,u=2*t-a;i=Z1(u,a,n+1/3),o=Z1(u,a,n),s=Z1(u,a,n-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}function Zh(n,e){return t=>t>0?e:n}const kt=(n,e,t)=>n+(e-n)*t,J1=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},MR=[Wm,ya,kl],LR=n=>MR.find(e=>e.test(n));function Nx(n){const e=LR(n);if(!e)return!1;let t=e.parse(n);return e===kl&&(t=kR(t)),t}const Ox=(n,e)=>{const t=Nx(n),r=Nx(e);if(!t||!r)return Zh(n,e);const i={...t};return o=>(i.red=J1(t.red,r.red,o),i.green=J1(t.green,r.green,o),i.blue=J1(t.blue,r.blue,o),i.alpha=kt(t.alpha,r.alpha,o),ya.transform(i))},$m=new Set(["none","hidden"]);function VR(n,e){return $m.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function FR(n,e){return t=>kt(n,e,t)}function wv(n){return typeof n=="number"?FR:typeof n=="string"?gv(n)?Zh:Qt.test(n)?Ox:jR:Array.isArray(n)?eC:typeof n=="object"?Qt.test(n)?Ox:BR:Zh}function eC(n,e){const t=[...n],r=t.length,i=n.map((o,s)=>wv(o)(o,e[s]));return o=>{for(let s=0;s<r;s++)t[s]=i[s](o);return t}}function BR(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=wv(n[i])(n[i],e[i]));return i=>{for(const o in r)t[o]=r[o](i);return t}}function UR(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],s=n.indexes[o][r[o]],a=n.values[s]??0;t[i]=a,r[o]++}return t}const jR=(n,e)=>{const t=Is.createTransformer(e),r=af(n),i=af(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?$m.has(n)&&!i.values.length||$m.has(e)&&!r.values.length?VR(n,e):Sf(eC(UR(r,i),i.values),t):Zh(n,e)};function tC(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?kt(n,e,t):wv(n)(n,e)}const zR=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Nt.update(e,t),stop:()=>Cs(e),now:()=>On.isProcessing?On.timestamp:mr.now()}},nC=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let o=0;o<i;o++)r+=Math.round(n(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Jh=2e4;function _v(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Jh;)e+=t,r=n.next(e);return e>=Jh?1/0:e}function HR(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(_v(r),Jh);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:qr(i)}}const WR=5;function rC(n,e,t){const r=Math.max(e-WR,0);return LT(t-n(r),e-r)}const Bt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},em=.001;function $R({duration:n=Bt.duration,bounce:e=Bt.bounce,velocity:t=Bt.velocity,mass:r=Bt.mass}){let i,o,s=1-e;s=wo(Bt.minDamping,Bt.maxDamping,s),n=wo(Bt.minDuration,Bt.maxDuration,qr(n)),s<1?(i=f=>{const d=f*s,p=d*n,g=d-t,y=Gm(f,s),E=Math.exp(-p);return em-g/y*E},o=f=>{const p=f*s*n,g=p*t+t,y=Math.pow(s,2)*Math.pow(f,2)*n,E=Math.exp(-p),A=Gm(Math.pow(f,2),s);return(-i(f)+em>0?-1:1)*((g-y)*E)/A}):(i=f=>{const d=Math.exp(-f*n),p=(f-t)*n+1;return-em+d*p},o=f=>{const d=Math.exp(-f*n),p=(t-f)*(n*n);return d*p});const a=5/n,u=qR(i,o,a);if(n=Ui(n),isNaN(u))return{stiffness:Bt.stiffness,damping:Bt.damping,duration:n};{const f=Math.pow(u,2)*r;return{stiffness:f,damping:s*2*Math.sqrt(r*f),duration:n}}}const GR=12;function qR(n,e,t){let r=t;for(let i=1;i<GR;i++)r=r-n(r)/e(r);return r}function Gm(n,e){return n*Math.sqrt(1-e*e)}const KR=["duration","bounce"],XR=["stiffness","damping","mass"];function Dx(n,e){return e.some(t=>n[t]!==void 0)}function YR(n){let e={velocity:Bt.velocity,stiffness:Bt.stiffness,damping:Bt.damping,mass:Bt.mass,isResolvedFromDuration:!1,...n};if(!Dx(n,XR)&&Dx(n,KR))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,o=2*wo(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Bt.mass,stiffness:i,damping:o}}else{const t=$R(n);e={...e,...t,mass:Bt.mass},e.isResolvedFromDuration=!0}return e}function ep(n=Bt.visualDuration,e=Bt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const o=t.keyframes[0],s=t.keyframes[t.keyframes.length-1],a={done:!1,value:o},{stiffness:u,damping:f,mass:d,duration:p,velocity:g,isResolvedFromDuration:y}=YR({...t,velocity:-qr(t.velocity||0)}),E=g||0,A=f/(2*Math.sqrt(u*d)),I=s-o,N=qr(Math.sqrt(u/d)),R=Math.abs(I)<5;r||(r=R?Bt.restSpeed.granular:Bt.restSpeed.default),i||(i=R?Bt.restDelta.granular:Bt.restDelta.default);let k;if(A<1){const H=Gm(N,A);k=$=>{const b=Math.exp(-A*N*$);return s-b*((E+A*N*I)/H*Math.sin(H*$)+I*Math.cos(H*$))}}else if(A===1)k=H=>s-Math.exp(-N*H)*(I+(E+N*I)*H);else{const H=N*Math.sqrt(A*A-1);k=$=>{const b=Math.exp(-A*N*$),S=Math.min(H*$,300);return s-b*((E+A*N*I)*Math.sinh(S)+H*I*Math.cosh(S))/H}}const j={calculatedDuration:y&&p||null,next:H=>{const $=k(H);if(y)a.done=H>=p;else{let b=H===0?E:0;A<1&&(b=H===0?Ui(E):rC(k,H,$));const S=Math.abs(b)<=r,O=Math.abs(s-$)<=i;a.done=S&&O}return a.value=a.done?s:$,a},toString:()=>{const H=Math.min(_v(j),Jh),$=nC(b=>j.next(H*b).value,H,30);return H+"ms "+$},toTransition:()=>{}};return j}ep.applyToOptions=n=>{const e=HR(n,100,ep);return n.ease=e.ease,n.duration=Ui(e.duration),n.type="keyframes",n};function qm({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:a,max:u,restDelta:f=.5,restSpeed:d}){const p=n[0],g={done:!1,value:p},y=S=>a!==void 0&&S<a||u!==void 0&&S>u,E=S=>a===void 0?u:u===void 0||Math.abs(a-S)<Math.abs(u-S)?a:u;let A=t*e;const I=p+A,N=s===void 0?I:s(I);N!==I&&(A=N-p);const R=S=>-A*Math.exp(-S/r),k=S=>N+R(S),j=S=>{const O=R(S),V=k(S);g.done=Math.abs(O)<=f,g.value=g.done?N:V};let H,$;const b=S=>{y(g.value)&&(H=S,$=ep({keyframes:[g.value,E(g.value)],velocity:rC(k,S,g.value),damping:i,stiffness:o,restDelta:f,restSpeed:d}))};return b(0),{calculatedDuration:null,next:S=>{let O=!1;return!$&&H===void 0&&(O=!0,j(S),b(S)),H!==void 0&&S>=H?$.next(S-H):(!O&&j(S),g)}}}function QR(n,e,t){const r=[],i=t||_o.mix||tC,o=n.length-1;for(let s=0;s<o;s++){let a=i(n[s],n[s+1]);if(e){const u=Array.isArray(e)?e[s]||Xr:e;a=Sf(u,a)}r.push(a)}return r}function ZR(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const o=n.length;if(cv(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const s=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=QR(e,r,i),u=a.length,f=d=>{if(s&&d<n[0])return e[0];let p=0;if(u>1)for(;p<n.length-2&&!(d<n[p+1]);p++);const g=of(n[p],n[p+1],d);return a[p](g)};return t?d=>f(wo(n[0],n[o-1],d)):f}function JR(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=of(0,e,r);n.push(kt(t,1,i))}}function eN(n){const e=[0];return JR(e,n.length-1),e}function tN(n,e){return n.map(t=>t*e)}function nN(n,e){return n.map(()=>e||$T).splice(0,n.length-1)}function jc({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=hR(r)?r.map(bx):bx(r),o={done:!1,value:e[0]},s=tN(t&&t.length===e.length?t:eN(e),n),a=ZR(s,e,{ease:Array.isArray(i)?i:nN(e,i)});return{calculatedDuration:n,next:u=>(o.value=a(u),o.done=u>=n,o)}}const rN=n=>n!==null;function xv(n,{repeat:e,repeatType:t="loop"},r,i=1){const o=n.filter(rN),a=i<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!a||r===void 0?o[a]:r}const iN={decay:qm,inertia:qm,tween:jc,keyframes:jc,spring:ep};function iC(n){typeof n.type=="string"&&(n.type=iN[n.type])}class Ev{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const oN=n=>n/100;class Av extends Ev{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==mr.now()&&this.tick(mr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;iC(e);const{type:t=jc,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:s=0}=e;let{keyframes:a}=e;const u=t||jc;u!==jc&&typeof a[0]!="number"&&(this.mixKeyframes=Sf(oN,tC(a[0],a[1])),a=[0,100]);const f=u({...e,keyframes:a});o==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...a].reverse(),velocity:-s})),f.calculatedDuration===null&&(f.calculatedDuration=_v(f));const{calculatedDuration:d}=f;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:s,resolvedDuration:a,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:d,repeat:p,repeatType:g,repeatDelay:y,type:E,onUpdate:A,finalKeyframe:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const N=this.currentTime-f*(this.playbackSpeed>=0?1:-1),R=this.playbackSpeed>=0?N<0:N>i;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let k=this.currentTime,j=r;if(p){const S=Math.min(this.currentTime,i)/a;let O=Math.floor(S),V=S%1;!V&&S>=1&&(V=1),V===1&&O--,O=Math.min(O,p+1),!!(O%2)&&(g==="reverse"?(V=1-V,y&&(V-=y/a)):g==="mirror"&&(j=s)),k=wo(0,1,V)*a}const H=R?{done:!1,value:d[0]}:j.next(k);o&&(H.value=o(H.value));let{done:$}=H;!R&&u!==null&&($=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const b=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$);return b&&E!==qm&&(H.value=xv(d,this.options,I,this.speed)),A&&A(H.value),b&&this.finish(),H}then(e,t){return this.finished.then(e,t)}get duration(){return qr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+qr(e)}get time(){return qr(this.currentTime)}set time(e){e=Ui(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(mr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=qr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=zR,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(mr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function sN(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const wa=n=>n*180/Math.PI,Km=n=>{const e=wa(Math.atan2(n[1],n[0]));return Xm(e)},aN={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Km,rotateZ:Km,skewX:n=>wa(Math.atan(n[1])),skewY:n=>wa(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Xm=n=>(n=n%360,n<0&&(n+=360),n),kx=Km,Mx=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Lx=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),lN={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Mx,scaleY:Lx,scale:n=>(Mx(n)+Lx(n))/2,rotateX:n=>Xm(wa(Math.atan2(n[6],n[5]))),rotateY:n=>Xm(wa(Math.atan2(-n[2],n[0]))),rotateZ:kx,rotate:kx,skewX:n=>wa(Math.atan(n[4])),skewY:n=>wa(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Ym(n){return n.includes("scale")?1:0}function Qm(n,e){if(!n||n==="none")return Ym(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=lN,i=t;else{const a=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=aN,i=a}if(!i)return Ym(e);const o=r[e],s=i[1].split(",").map(cN);return typeof o=="function"?o(s):s[o]}const uN=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Qm(t,e)};function cN(n){return parseFloat(n.trim())}const fu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],du=new Set(fu),Vx=n=>n===cu||n===Be,fN=new Set(["x","y","z"]),dN=fu.filter(n=>!fN.has(n));function hN(n){const e=[];return dN.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Aa={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Qm(e,"x"),y:(n,{transform:e})=>Qm(e,"y")};Aa.translateX=Aa.x;Aa.translateY=Aa.y;const Ta=new Set;let Zm=!1,Jm=!1,eg=!1;function oC(){if(Jm){const n=Array.from(Ta).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=hN(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([o,s])=>{r.getValue(o)?.set(s)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Jm=!1,Zm=!1,Ta.forEach(n=>n.complete(eg)),Ta.clear()}function sC(){Ta.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Jm=!0)})}function pN(){eg=!0,sC(),oC(),eg=!1}class Tv{constructor(e,t,r,i,o,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=o,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Ta.add(this),Zm||(Zm=!0,Nt.read(sC),Nt.resolveKeyframes(oC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const o=i?.get(),s=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const a=r.readValue(t,s);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=s),i&&o===void 0&&i.set(e[0])}sN(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ta.delete(this)}cancel(){this.state==="scheduled"&&(Ta.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const mN=n=>n.startsWith("--");function gN(n,e,t){mN(e)?n.style.setProperty(e,t):n.style[e]=t}const vN=fv(()=>window.ScrollTimeline!==void 0),yN={};function wN(n,e){const t=fv(n);return()=>yN[e]??t()}const aC=wN(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,Fx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bc([0,.65,.55,1]),circOut:bc([.55,0,1,.45]),backIn:bc([.31,.01,.66,-.59]),backOut:bc([.33,1.53,.69,.99])};function lC(n,e){if(n)return typeof n=="function"?aC()?nC(n,e):"ease-out":GT(n)?bc(n):Array.isArray(n)?n.map(t=>lC(t,e)||Fx.easeOut):Fx[n]}function _N(n,e,t,{delay:r=0,duration:i=300,repeat:o=0,repeatType:s="loop",ease:a="easeOut",times:u}={},f=void 0){const d={[e]:t};u&&(d.offset=u);const p=lC(a,i);Array.isArray(p)&&(d.easing=p);const g={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"};return f&&(g.pseudoElement=f),n.animate(d,g)}function uC(n){return typeof n=="function"&&"applyToOptions"in n}function xN({type:n,...e}){return uC(n)&&aC()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class EN extends Ev{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:o,allowFlatten:s=!1,finalKeyframe:a,onComplete:u}=e;this.isPseudoElement=!!o,this.allowFlatten=s,this.options=e,cv(typeof e.type!="string");const f=xN(e);this.animation=_N(t,r,i,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const d=xv(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):gN(t,r,d),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return qr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+qr(e)}get time(){return qr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ui(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&vN()?(this.animation.timeline=e,Xr):t(this)}}const cC={anticipate:zT,backInOut:jT,circInOut:WT};function AN(n){return n in cC}function TN(n){typeof n.ease=="string"&&AN(n.ease)&&(n.ease=cC[n.ease])}const Bx=10;class CN extends EN{constructor(e){TN(e),iC(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:o,...s}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const a=new Av({...s,autoplay:!1}),u=Ui(this.finishedTime??this.time);t.setWithVelocity(a.sample(u-Bx).value,a.sample(u).value,Bx),a.stop()}}const Ux=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Is.test(n)||n==="0")&&!n.startsWith("url("));function IN(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function SN(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],s=Ux(i,e),a=Ux(o,e);return!s||!a?!1:IN(n)||(t==="spring"||uC(t))&&r}function tg(n){n.duration=0,n.type="keyframes"}const bN=new Set(["opacity","clipPath","filter","transform"]),PN=fv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function RN(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:o,type:s}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:f}=e.owner.getProps();return PN()&&t&&bN.has(t)&&(t!=="transform"||!f)&&!u&&!r&&i!=="mirror"&&o!==0&&s!=="inertia"}const NN=40;class ON extends Ev{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:s="loop",keyframes:a,name:u,motionValue:f,element:d,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=mr.now();const g={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:o,repeatType:s,name:u,motionValue:f,element:d,...p},y=d?.KeyframeResolver||Tv;this.keyframeResolver=new y(a,(E,A,I)=>this.onKeyframesResolved(E,A,g,!I),u,f,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:o,type:s,velocity:a,delay:u,isHandoff:f,onUpdate:d}=r;this.resolvedAt=mr.now(),SN(e,o,s,a)||((_o.instantAnimations||!u)&&d?.(xv(e,r,t)),e[0]=e[e.length-1],tg(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>NN?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},y=!f&&RN(g)?new CN({...g,element:g.motionValue.owner.current}):new Av(g);y.finished.then(()=>this.notifyFinished()).catch(Xr),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),pN()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const DN=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function kN(n){const e=DN.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function fC(n,e,t=1){const[r,i]=kN(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const s=o.trim();return DT(s)?parseFloat(s):s}return gv(i)?fC(i,e,t+1):i}function Cv(n,e){return n?.[e]??n?.default??n}const dC=new Set(["width","height","top","left","right","bottom",...fu]),MN={test:n=>n==="auto",parse:n=>n},hC=n=>e=>e.test(n),pC=[cu,Be,ji,us,IR,CR,MN],jx=n=>pC.find(hC(n));function LN(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||MT(n):!0}const VN=new Set(["brightness","contrast","saturate","opacity"]);function FN(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(vv)||[];if(!r)return n;const i=t.replace(r,"");let o=VN.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+i+")"}const BN=/\b([a-z-]*)\(.*?\)/gu,ng={...Is,getAnimatableNone:n=>{const e=n.match(BN);return e?e.map(FN).join(" "):n}},zx={...cu,transform:Math.round},UN={rotate:us,rotateX:us,rotateY:us,rotateZ:us,scale:dh,scaleX:dh,scaleY:dh,scaleZ:dh,skew:us,skewX:us,skewY:us,distance:Be,translateX:Be,translateY:Be,translateZ:Be,x:Be,y:Be,z:Be,perspective:Be,transformPerspective:Be,opacity:sf,originX:Px,originY:Px,originZ:Be},Iv={borderWidth:Be,borderTopWidth:Be,borderRightWidth:Be,borderBottomWidth:Be,borderLeftWidth:Be,borderRadius:Be,radius:Be,borderTopLeftRadius:Be,borderTopRightRadius:Be,borderBottomRightRadius:Be,borderBottomLeftRadius:Be,width:Be,maxWidth:Be,height:Be,maxHeight:Be,top:Be,right:Be,bottom:Be,left:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,backgroundPositionX:Be,backgroundPositionY:Be,...UN,zIndex:zx,fillOpacity:sf,strokeOpacity:sf,numOctaves:zx},jN={...Iv,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:ng,WebkitFilter:ng},mC=n=>jN[n];function gC(n,e){let t=mC(n);return t!==ng&&(t=Is),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const zN=new Set(["auto","none","0"]);function HN(n,e,t){let r=0,i;for(;r<n.length&&!i;){const o=n[r];typeof o=="string"&&!zN.has(o)&&af(o).values.length&&(i=n[r]),r++}if(i&&t)for(const o of e)n[o]=gC(t,i)}class WN extends Tv{constructor(e,t,r,i,o){super(e,t,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let f=e[u];if(typeof f=="string"&&(f=f.trim(),gv(f))){const d=fC(f,t.current);d!==void 0&&(e[u]=d),u===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!dC.has(r)||e.length!==2)return;const[i,o]=e,s=jx(i),a=jx(o);if(s!==a)if(Vx(s)&&Vx(a))for(let u=0;u<e.length;u++){const f=e[u];typeof f=="string"&&(e[u]=parseFloat(f))}else Aa[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||LN(e[i]))&&r.push(i);r.length&&HN(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Aa[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,s=r[o];r[o]=Aa[t](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,u])=>{e.getValue(a).set(u)}),this.resolveNoneKeyframes()}}function $N(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=t?.[n]??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const vC=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function yC(n){return kT(n)&&"offsetHeight"in n}const Hx=30,GN=n=>!isNaN(parseFloat(n));class qN{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=mr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=mr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=GN(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new dv);const r=this.events[e].add(t);return e==="change"?()=>{r(),Nt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=mr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Hx)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Hx);return LT(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ql(n,e){return new qN(n,e)}const{schedule:Sv}=qT(queueMicrotask,!1),ci={x:!1,y:!1};function wC(){return ci.x||ci.y}function KN(n){return n==="x"||n==="y"?ci[n]?null:(ci[n]=!0,()=>{ci[n]=!1}):ci.x||ci.y?null:(ci.x=ci.y=!0,()=>{ci.x=ci.y=!1})}function _C(n,e){const t=$N(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function Wx(n){return!(n.pointerType==="touch"||wC())}function XN(n,e,t={}){const[r,i,o]=_C(n,t),s=a=>{if(!Wx(a))return;const{target:u}=a,f=e(u,a);if(typeof f!="function"||!u)return;const d=p=>{Wx(p)&&(f(p),u.removeEventListener("pointerleave",d))};u.addEventListener("pointerleave",d,i)};return r.forEach(a=>{a.addEventListener("pointerenter",s,i)}),o}const xC=(n,e)=>e?n===e?!0:xC(n,e.parentElement):!1,bv=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,YN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function QN(n){return YN.has(n.tagName)||n.tabIndex!==-1}const Oh=new WeakSet;function $x(n){return e=>{e.key==="Enter"&&n(e)}}function tm(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ZN=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=$x(()=>{if(Oh.has(t))return;tm(t,"down");const i=$x(()=>{tm(t,"up")}),o=()=>tm(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function Gx(n){return bv(n)&&!wC()}function JN(n,e,t={}){const[r,i,o]=_C(n,t),s=a=>{const u=a.currentTarget;if(!Gx(a))return;Oh.add(u);const f=e(u,a),d=(y,E)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),Oh.has(u)&&Oh.delete(u),Gx(y)&&typeof f=="function"&&f(y,{success:E})},p=y=>{d(y,u===window||u===document||t.useGlobalTarget||xC(u,y.target))},g=y=>{d(y,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",g,i)};return r.forEach(a=>{(t.useGlobalTarget?window:a).addEventListener("pointerdown",s,i),yC(a)&&(a.addEventListener("focus",f=>ZN(f,i)),!QN(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),o}function EC(n){return kT(n)&&"ownerSVGElement"in n}function e8(n){return EC(n)&&n.tagName==="svg"}const qn=n=>!!(n&&n.getVelocity),t8=[...pC,Qt,Is],n8=n=>t8.find(hC(n)),Pv=B.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function qx(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function r8(...n){return e=>{let t=!1;const r=n.map(i=>{const o=qx(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():qx(n[i],null)}}}}function i8(...n){return B.useCallback(r8(...n),n)}class o8 extends B.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=yC(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function s8({children:n,isPresent:e,anchorX:t,root:r}){const i=B.useId(),o=B.useRef(null),s=B.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=B.useContext(Pv),u=i8(o,n?.ref);return B.useInsertionEffect(()=>{const{width:f,height:d,top:p,left:g,right:y}=s.current;if(e||!o.current||!f||!d)return;const E=t==="left"?`left: ${g}`:`right: ${y}`;o.current.dataset.motionPopId=i;const A=document.createElement("style");a&&(A.nonce=a);const I=r??document.head;return I.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${d}px !important;
            ${E}px !important;
            top: ${p}px !important;
          }
        `),()=>{I.contains(A)&&I.removeChild(A)}},[e]),T.jsx(o8,{isPresent:e,childRef:o,sizeRef:s,children:B.cloneElement(n,{ref:u})})}const a8=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:s,anchorX:a,root:u})=>{const f=sv(l8),d=B.useId();let p=!0,g=B.useMemo(()=>(p=!1,{id:d,initial:e,isPresent:t,custom:i,onExitComplete:y=>{f.set(y,!0);for(const E of f.values())if(!E)return;r&&r()},register:y=>(f.set(y,!1),()=>f.delete(y))}),[t,f,r]);return o&&p&&(g={...g}),B.useMemo(()=>{f.forEach((y,E)=>f.set(E,!1))},[t]),B.useEffect(()=>{!t&&!f.size&&r&&r()},[t]),s==="popLayout"&&(n=T.jsx(s8,{isPresent:t,anchorX:a,root:u,children:n})),T.jsx(bp.Provider,{value:g,children:n})};function l8(){return new Map}function AC(n=!0){const e=B.useContext(bp);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,o=B.useId();B.useEffect(()=>{if(n)return i(o)},[n]);const s=B.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,s]:[!0]}const hh=n=>n.key||"";function Kx(n){const e=[];return B.Children.forEach(n,t=>{B.isValidElement(t)&&e.push(t)}),e}const lf=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:s=!1,anchorX:a="left",root:u})=>{const[f,d]=AC(s),p=B.useMemo(()=>Kx(n),[n]),g=s&&!f?[]:p.map(hh),y=B.useRef(!0),E=B.useRef(p),A=sv(()=>new Map),[I,N]=B.useState(p),[R,k]=B.useState(p);OT(()=>{y.current=!1,E.current=p;for(let $=0;$<R.length;$++){const b=hh(R[$]);g.includes(b)?A.delete(b):A.get(b)!==!0&&A.set(b,!1)}},[R,g.length,g.join("-")]);const j=[];if(p!==I){let $=[...p];for(let b=0;b<R.length;b++){const S=R[b],O=hh(S);g.includes(O)||($.splice(b,0,S),j.push(S))}return o==="wait"&&j.length&&($=j),k(Kx($)),N(p),null}const{forceRender:H}=B.useContext(ov);return T.jsx(T.Fragment,{children:R.map($=>{const b=hh($),S=s&&!f?!1:p===R||g.includes(b),O=()=>{if(A.has(b))A.set(b,!0);else return;let V=!0;A.forEach(L=>{L||(V=!1)}),V&&(H?.(),k(E.current),s&&d?.(),r&&r())};return T.jsx(a8,{isPresent:S,initial:!y.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:u,onExitComplete:S?void 0:O,anchorX:a,children:$},b)})})},TC=B.createContext({strict:!1}),Xx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zl={};for(const n in Xx)Zl[n]={isEnabled:e=>Xx[n].some(t=>!!e[t])};function u8(n){for(const e in n)Zl[e]={...Zl[e],...n[e]}}const c8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function tp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||c8.has(n)}let CC=n=>!tp(n);function f8(n){typeof n=="function"&&(CC=e=>e.startsWith("on")?!tp(e):n(e))}try{f8(require("@emotion/is-prop-valid").default)}catch{}function d8(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(CC(i)||t===!0&&tp(i)||!e&&!tp(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const Pp=B.createContext({});function Rp(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function uf(n){return typeof n=="string"||Array.isArray(n)}const Rv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Nv=["initial",...Rv];function Np(n){return Rp(n.animate)||Nv.some(e=>uf(n[e]))}function IC(n){return!!(Np(n)||n.variants)}function h8(n,e){if(Np(n)){const{initial:t,animate:r}=n;return{initial:t===!1||uf(t)?t:void 0,animate:uf(r)?r:void 0}}return n.inherit!==!1?e:{}}function p8(n){const{initial:e,animate:t}=h8(n,B.useContext(Pp));return B.useMemo(()=>({initial:e,animate:t}),[Yx(e),Yx(t)])}function Yx(n){return Array.isArray(n)?n.join(" "):n}const cf={};function m8(n){for(const e in n)cf[e]=n[e],mv(e)&&(cf[e].isCSSVariable=!0)}function SC(n,{layout:e,layoutId:t}){return du.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!cf[n]||n==="opacity")}const g8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},v8=fu.length;function y8(n,e,t){let r="",i=!0;for(let o=0;o<v8;o++){const s=fu[o],a=n[s];if(a===void 0)continue;let u=!0;if(typeof a=="number"?u=a===(s.startsWith("scale")?1:0):u=parseFloat(a)===0,!u||t){const f=vC(a,Iv[s]);if(!u){i=!1;const d=g8[s]||s;r+=`${d}(${f}) `}t&&(e[s]=f)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function Ov(n,e,t){const{style:r,vars:i,transformOrigin:o}=n;let s=!1,a=!1;for(const u in e){const f=e[u];if(du.has(u)){s=!0;continue}else if(mv(u)){i[u]=f;continue}else{const d=vC(f,Iv[u]);u.startsWith("origin")?(a=!0,o[u]=d):r[u]=d}}if(e.transform||(s||t?r.transform=y8(e,n.transform,t):r.transform&&(r.transform="none")),a){const{originX:u="50%",originY:f="50%",originZ:d=0}=o;r.transformOrigin=`${u} ${f} ${d}`}}const Dv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function bC(n,e,t){for(const r in e)!qn(e[r])&&!SC(r,t)&&(n[r]=e[r])}function w8({transformTemplate:n},e){return B.useMemo(()=>{const t=Dv();return Ov(t,e,n),Object.assign({},t.vars,t.style)},[e])}function _8(n,e){const t=n.style||{},r={};return bC(r,t,n),Object.assign(r,w8(n,e)),r}function x8(n,e){const t={},r=_8(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const E8={offset:"stroke-dashoffset",array:"stroke-dasharray"},A8={offset:"strokeDashoffset",array:"strokeDasharray"};function T8(n,e,t=1,r=0,i=!0){n.pathLength=1;const o=i?E8:A8;n[o.offset]=Be.transform(-r);const s=Be.transform(e),a=Be.transform(t);n[o.array]=`${s} ${a}`}function PC(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:s=0,...a},u,f,d){if(Ov(n,a,f),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:g}=n;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=d?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),r!==void 0&&(p.scale=r),i!==void 0&&T8(p,i,o,s,!1)}const RC=()=>({...Dv(),attrs:{}}),NC=n=>typeof n=="string"&&n.toLowerCase()==="svg";function C8(n,e,t,r){const i=B.useMemo(()=>{const o=RC();return PC(o,e,NC(r),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};bC(o,n.style,n),i.style={...o,...i.style}}return i}const I8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kv(n){return typeof n!="string"||n.includes("-")?!1:!!(I8.indexOf(n)>-1||/[A-Z]/u.test(n))}function S8(n,e,t,{latestValues:r},i,o=!1){const a=(kv(n)?C8:x8)(e,r,i,n),u=d8(e,typeof n=="string",o),f=n!==B.Fragment?{...u,...a,ref:t}:{},{children:d}=e,p=B.useMemo(()=>qn(d)?d.get():d,[d]);return B.createElement(n,{...f,children:p})}function Qx(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function Mv(n,e,t,r){if(typeof e=="function"){const[i,o]=Qx(r);e=e(t!==void 0?t:n.custom,i,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,o]=Qx(r);e=e(t!==void 0?t:n.custom,i,o)}return e}function Dh(n){return qn(n)?n.get():n}function b8({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:P8(t,r,i,n),renderState:e()}}function P8(n,e,t,r){const i={},o=r(n,{});for(const g in o)i[g]=Dh(o[g]);let{initial:s,animate:a}=n;const u=Np(n),f=IC(n);e&&f&&!u&&n.inherit!==!1&&(s===void 0&&(s=e.initial),a===void 0&&(a=e.animate));let d=t?t.initial===!1:!1;d=d||s===!1;const p=d?a:s;if(p&&typeof p!="boolean"&&!Rp(p)){const g=Array.isArray(p)?p:[p];for(let y=0;y<g.length;y++){const E=Mv(n,g[y]);if(E){const{transitionEnd:A,transition:I,...N}=E;for(const R in N){let k=N[R];if(Array.isArray(k)){const j=d?k.length-1:0;k=k[j]}k!==null&&(i[R]=k)}for(const R in A)i[R]=A[R]}}}return i}const OC=n=>(e,t)=>{const r=B.useContext(Pp),i=B.useContext(bp),o=()=>b8(n,e,r,i);return t?o():sv(o)};function Lv(n,e,t){const{style:r}=n,i={};for(const o in r)(qn(r[o])||e.style&&qn(e.style[o])||SC(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(i[o]=r[o]);return i}const R8=OC({scrapeMotionValuesFromProps:Lv,createRenderState:Dv});function DC(n,e,t){const r=Lv(n,e,t);for(const i in n)if(qn(n[i])||qn(e[i])){const o=fu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=n[i]}return r}const N8=OC({scrapeMotionValuesFromProps:DC,createRenderState:RC}),O8=Symbol.for("motionComponentSymbol");function Ml(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function D8(n,e,t){return B.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Ml(t)&&(t.current=r))},[e])}const Vv=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),k8="framerAppearId",kC="data-"+Vv(k8),MC=B.createContext({});function M8(n,e,t,r,i){const{visualElement:o}=B.useContext(Pp),s=B.useContext(TC),a=B.useContext(bp),u=B.useContext(Pv).reducedMotion,f=B.useRef(null);r=r||s.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:o,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const d=f.current,p=B.useContext(MC);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&L8(f.current,t,i,p);const g=B.useRef(!1);B.useInsertionEffect(()=>{d&&g.current&&d.update(t,a)});const y=t[kC],E=B.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return OT(()=>{d&&(g.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),E.current&&d.animationState&&d.animationState.animateChanges())}),B.useEffect(()=>{d&&(!E.current&&d.animationState&&d.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),E.current=!1),d.enteringChildren=void 0)}),d}function L8(n,e,t,r){const{layoutId:i,layout:o,drag:s,dragConstraints:a,layoutScroll:u,layoutRoot:f,layoutCrossfade:d}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:LC(n.parent)),n.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!s||a&&Ml(a),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:u,layoutRoot:f})}function LC(n){if(n)return n.options.allowProjection!==!1?n.projection:LC(n.parent)}function nm(n,{forwardMotionProps:e=!1}={},t,r){t&&u8(t);const i=kv(n)?N8:R8;function o(a,u){let f;const d={...B.useContext(Pv),...a,layoutId:V8(a)},{isStatic:p}=d,g=p8(a),y=i(a,p);if(!p&&av){F8();const E=B8(d);f=E.MeasureLayout,g.visualElement=M8(n,y,d,r,E.ProjectionNode)}return T.jsxs(Pp.Provider,{value:g,children:[f&&g.visualElement?T.jsx(f,{visualElement:g.visualElement,...d}):null,S8(n,a,D8(y,g.visualElement,u),y,p,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const s=B.forwardRef(o);return s[O8]=n,s}function V8({layoutId:n}){const e=B.useContext(ov).id;return e&&n!==void 0?e+"-"+n:n}function F8(n,e){B.useContext(TC).strict}function B8(n){const{drag:e,layout:t}=Zl;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function U8(n,e){if(typeof Proxy>"u")return nm;const t=new Map,r=(o,s)=>nm(o,s,n,e),i=(o,s)=>r(o,s);return new Proxy(i,{get:(o,s)=>s==="create"?r:(t.has(s)||t.set(s,nm(s,void 0,n,e)),t.get(s))})}function VC({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function j8({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function z8(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function rm(n){return n===void 0||n===1}function rg({scale:n,scaleX:e,scaleY:t}){return!rm(n)||!rm(e)||!rm(t)}function ma(n){return rg(n)||FC(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function FC(n){return Zx(n.x)||Zx(n.y)}function Zx(n){return n&&n!=="0%"}function np(n,e,t){const r=n-t,i=e*r;return t+i}function Jx(n,e,t,r,i){return i!==void 0&&(n=np(n,i,r)),np(n,t,r)+e}function ig(n,e=0,t=1,r,i){n.min=Jx(n.min,e,t,r,i),n.max=Jx(n.max,e,t,r,i)}function BC(n,{x:e,y:t}){ig(n.x,e.translate,e.scale,e.originPoint),ig(n.y,t.translate,t.scale,t.originPoint)}const e2=.999999999999,t2=1.0000000000001;function H8(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let o,s;for(let a=0;a<i;a++){o=t[a],s=o.projectionDelta;const{visualElement:u}=o.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Vl(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,BC(n,s)),r&&ma(o.latestValues)&&Vl(n,o.latestValues))}e.x<t2&&e.x>e2&&(e.x=1),e.y<t2&&e.y>e2&&(e.y=1)}function Ll(n,e){n.min=n.min+e,n.max=n.max+e}function n2(n,e,t,r,i=.5){const o=kt(n.min,n.max,i);ig(n,e,t,o,r)}function Vl(n,e){n2(n.x,e.x,e.scaleX,e.scale,e.originX),n2(n.y,e.y,e.scaleY,e.scale,e.originY)}function UC(n,e){return VC(z8(n.getBoundingClientRect(),e))}function W8(n,e,t){const r=UC(n,t),{scroll:i}=e;return i&&(Ll(r.x,i.offset.x),Ll(r.y,i.offset.y)),r}const r2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fl=()=>({x:r2(),y:r2()}),i2=()=>({min:0,max:0}),$t=()=>({x:i2(),y:i2()}),og={current:null},jC={current:!1};function $8(){if(jC.current=!0,!!av)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>og.current=n.matches;n.addEventListener("change",e),e()}else og.current=!1}const G8=new WeakMap;function q8(n,e,t){for(const r in e){const i=e[r],o=t[r];if(qn(i))n.addValue(r,i);else if(qn(o))n.addValue(r,Ql(i,{owner:n}));else if(o!==i)if(n.hasValue(r)){const s=n.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=n.getStaticValue(r);n.addValue(r,Ql(s!==void 0?s:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const o2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class K8{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Tv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=mr.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Nt.render(this.render,!1,!0))};const{latestValues:u,renderState:f}=s;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!o,this.isControllingVariants=Np(t),this.isVariantNode=IC(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(t,{},this);for(const g in p){const y=p[g];u[g]!==void 0&&qn(y)&&y.set(u[g])}}mount(e){this.current=e,G8.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),jC.current||$8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:og.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Cs(this.notifyUpdate),Cs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=du.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&Nt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Zl){const t=Zl[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$t()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<o2.length;r++){const i=o2[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,s=e[o];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=q8(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Ql(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(DT(r)||MT(r))?r=parseFloat(r):!n8(r)&&Is.test(t)&&(r=gC(e,t)),this.setBaseTarget(e,qn(r)?r.get():r)),qn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const o=Mv(this.props,t,this.presenceContext?.custom);o&&(r=o[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!qn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new dv),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Sv.render(this.render)}}class zC extends K8{constructor(){super(...arguments),this.KeyframeResolver=WN}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;qn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function HC(n,{style:e,vars:t},r,i){const o=n.style;let s;for(s in e)o[s]=e[s];i?.applyProjectionStyles(o,r);for(s in t)o.setProperty(s,t[s])}function X8(n){return window.getComputedStyle(n)}class Y8 extends zC{constructor(){super(...arguments),this.type="html",this.renderInstance=HC}readValueFromInstance(e,t){if(du.has(t))return this.projection?.isProjecting?Ym(t):uN(e,t);{const r=X8(e),i=(mv(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return UC(e,t)}build(e,t,r){Ov(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return Lv(e,t,r)}}const WC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Q8(n,e,t,r){HC(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(WC.has(i)?i:Vv(i),e.attrs[i])}class Z8 extends zC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$t}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(du.has(t)){const r=mC(t);return r&&r.default||0}return t=WC.has(t)?t:Vv(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return DC(e,t,r)}build(e,t,r){PC(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){Q8(e,t,r,i)}mount(e){this.isSVGTag=NC(e.tagName),super.mount(e)}}const J8=(n,e)=>kv(n)?new Z8(e):new Y8(e,{allowProjection:n!==B.Fragment});function Wl(n,e,t){const r=n.getProps();return Mv(r,e,t!==void 0?t:r.custom,n)}const sg=n=>Array.isArray(n);function e6(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ql(t))}function t6(n){return sg(n)?n[n.length-1]||0:n}function n6(n,e){const t=Wl(n,e);let{transitionEnd:r={},transition:i={},...o}=t||{};o={...o,...r};for(const s in o){const a=t6(o[s]);e6(n,s,a)}}function r6(n){return!!(qn(n)&&n.add)}function ag(n,e){const t=n.getValue("willChange");if(r6(t))return t.add(e);if(!t&&_o.WillChange){const r=new _o.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function $C(n){return n.props[kC]}const i6=n=>n!==null;function o6(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(i6),o=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[o]}const s6={type:"spring",stiffness:500,damping:25,restSpeed:10},a6=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),l6={type:"keyframes",duration:.8},u6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},c6=(n,{keyframes:e})=>e.length>2?l6:du.has(n)?n.startsWith("scale")?a6(e[1]):s6:u6;function f6({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:a,from:u,elapsed:f,...d}){return!!Object.keys(d).length}const Fv=(n,e,t,r={},i,o)=>s=>{const a=Cv(r,n)||{},u=a.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Ui(u);const d={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-f,onUpdate:g=>{e.set(g),a.onUpdate&&a.onUpdate(g)},onComplete:()=>{s(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:o?void 0:i};f6(a)||Object.assign(d,c6(n,d)),d.duration&&(d.duration=Ui(d.duration)),d.repeatDelay&&(d.repeatDelay=Ui(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(tg(d),d.delay===0&&(p=!0)),(_o.instantAnimations||_o.skipAnimations)&&(p=!0,tg(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,p&&!o&&e.get()!==void 0){const g=o6(d.keyframes,a);if(g!==void 0){Nt.update(()=>{d.onUpdate(g),d.onComplete()});return}}return a.isSync?new Av(d):new ON(d)};function d6({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function GC(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:s,...a}=e;r&&(o=r);const u=[],f=i&&n.animationState&&n.animationState.getState()[i];for(const d in a){const p=n.getValue(d,n.latestValues[d]??null),g=a[d];if(g===void 0||f&&d6(f,d))continue;const y={delay:t,...Cv(o||{},d)},E=p.get();if(E!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===E&&!y.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const N=$C(n);if(N){const R=window.MotionHandoffAnimation(N,d,Nt);R!==null&&(y.startTime=R,A=!0)}}ag(n,d),p.start(Fv(d,p,g,n.shouldReduceMotion&&dC.has(d)?{type:!1}:y,n,A));const I=p.animation;I&&u.push(I)}return s&&Promise.all(u).then(()=>{Nt.update(()=>{s&&n6(n,s)})}),u}function qC(n,e,t,r=0,i=1){const o=Array.from(n).sort((f,d)=>f.sortNodePosition(d)).indexOf(e),s=n.size,a=(s-1)*r;return typeof t=="function"?t(o,s):i===1?o*r:a-o*r}function lg(n,e,t={}){const r=Wl(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const o=r?()=>Promise.all(GC(n,r,t)):()=>Promise.resolve(),s=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:f=0,staggerChildren:d,staggerDirection:p}=i;return h6(n,e,u,f,d,p,t)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,f]=a==="beforeChildren"?[o,s]:[s,o];return u().then(()=>f())}else return Promise.all([o(),s(t.delay)])}function h6(n,e,t=0,r=0,i=0,o=1,s){const a=[];for(const u of n.variantChildren)u.notify("AnimationStart",e),a.push(lg(u,e,{...s,delay:t+(typeof r=="function"?0:r)+qC(n.variantChildren,u,r,i,o)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(a)}function p6(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>lg(n,o,t));r=Promise.all(i)}else if(typeof e=="string")r=lg(n,e,t);else{const i=typeof e=="function"?Wl(n,e,t.custom):e;r=Promise.all(GC(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function KC(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const m6=Nv.length;function XC(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?XC(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<m6;t++){const r=Nv[t],i=n.props[r];(uf(i)||i===!1)&&(e[r]=i)}return e}const g6=[...Rv].reverse(),v6=Rv.length;function y6(n){return e=>Promise.all(e.map(({animation:t,options:r})=>p6(n,t,r)))}function w6(n){let e=y6(n),t=s2(),r=!0;const i=u=>(f,d)=>{const p=Wl(n,d,u==="exit"?n.presenceContext?.custom:void 0);if(p){const{transition:g,transitionEnd:y,...E}=p;f={...f,...E,...y}}return f};function o(u){e=u(n)}function s(u){const{props:f}=n,d=XC(n.parent)||{},p=[],g=new Set;let y={},E=1/0;for(let I=0;I<v6;I++){const N=g6[I],R=t[N],k=f[N]!==void 0?f[N]:d[N],j=uf(k),H=N===u?R.isActive:null;H===!1&&(E=I);let $=k===d[N]&&k!==f[N]&&j;if($&&r&&n.manuallyAnimateOnMount&&($=!1),R.protectedKeys={...y},!R.isActive&&H===null||!k&&!R.prevProp||Rp(k)||typeof k=="boolean")continue;const b=_6(R.prevProp,k);let S=b||N===u&&R.isActive&&!$&&j||I>E&&j,O=!1;const V=Array.isArray(k)?k:[k];let L=V.reduce(i(N),{});H===!1&&(L={});const{prevResolvedValues:U={}}=R,D={...U,...L},ue=Ie=>{S=!0,g.has(Ie)&&(O=!0,g.delete(Ie)),R.needsAnimating[Ie]=!0;const Z=n.getValue(Ie);Z&&(Z.liveStyle=!1)};for(const Ie in D){const Z=L[Ie],ve=U[Ie];if(y.hasOwnProperty(Ie))continue;let pe=!1;sg(Z)&&sg(ve)?pe=!KC(Z,ve):pe=Z!==ve,pe?Z!=null?ue(Ie):g.add(Ie):Z!==void 0&&g.has(Ie)?ue(Ie):R.protectedKeys[Ie]=!0}R.prevProp=k,R.prevResolvedValues=L,R.isActive&&(y={...y,...L}),r&&n.blockInitialAnimation&&(S=!1);const le=$&&b;S&&(!le||O)&&p.push(...V.map(Ie=>{const Z={type:N};if(typeof Ie=="string"&&r&&!le&&n.manuallyAnimateOnMount&&n.parent){const{parent:ve}=n,pe=Wl(ve,Ie);if(ve.enteringChildren&&pe){const{delayChildren:q}=pe.transition||{};Z.delay=qC(ve.enteringChildren,n,q)}}return{animation:Ie,options:Z}}))}if(g.size){const I={};if(typeof f.initial!="boolean"){const N=Wl(n,Array.isArray(f.initial)?f.initial[0]:f.initial);N&&N.transition&&(I.transition=N.transition)}g.forEach(N=>{const R=n.getBaseTarget(N),k=n.getValue(N);k&&(k.liveStyle=!0),I[N]=R??null}),p.push({animation:I})}let A=!!p.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(A=!1),r=!1,A?e(p):Promise.resolve()}function a(u,f){if(t[u].isActive===f)return Promise.resolve();n.variantChildren?.forEach(p=>p.animationState?.setActive(u,f)),t[u].isActive=f;const d=s(u);for(const p in t)t[p].protectedKeys={};return d}return{animateChanges:s,setActive:a,setAnimateFunction:o,getState:()=>t,reset:()=>{t=s2()}}}function _6(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!KC(e,n):!1}function fa(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function s2(){return{animate:fa(!0),whileInView:fa(),whileHover:fa(),whileTap:fa(),whileDrag:fa(),whileFocus:fa(),exit:fa()}}class ks{constructor(e){this.isMounted=!1,this.node=e}update(){}}class x6 extends ks{constructor(e){super(e),e.animationState||(e.animationState=w6(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Rp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let E6=0;class A6 extends ks{constructor(){super(...arguments),this.id=E6++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const T6={animation:{Feature:x6},exit:{Feature:A6}};function ff(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Rf(n){return{point:{x:n.pageX,y:n.pageY}}}const C6=n=>e=>bv(e)&&n(e,Rf(e));function zc(n,e,t,r){return ff(n,e,C6(t),r)}const YC=1e-4,I6=1-YC,S6=1+YC,QC=.01,b6=0-QC,P6=0+QC;function nr(n){return n.max-n.min}function R6(n,e,t){return Math.abs(n-e)<=t}function a2(n,e,t,r=.5){n.origin=r,n.originPoint=kt(e.min,e.max,n.origin),n.scale=nr(t)/nr(e),n.translate=kt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=I6&&n.scale<=S6||isNaN(n.scale))&&(n.scale=1),(n.translate>=b6&&n.translate<=P6||isNaN(n.translate))&&(n.translate=0)}function Hc(n,e,t,r){a2(n.x,e.x,t.x,r?r.originX:void 0),a2(n.y,e.y,t.y,r?r.originY:void 0)}function l2(n,e,t){n.min=t.min+e.min,n.max=n.min+nr(e)}function N6(n,e,t){l2(n.x,e.x,t.x),l2(n.y,e.y,t.y)}function u2(n,e,t){n.min=e.min-t.min,n.max=n.min+nr(e)}function Wc(n,e,t){u2(n.x,e.x,t.x),u2(n.y,e.y,t.y)}function Wr(n){return[n("x"),n("y")]}const ZC=({current:n})=>n?n.ownerDocument.defaultView:null,c2=(n,e)=>Math.abs(n-e);function O6(n,e){const t=c2(n.x,e.x),r=c2(n.y,e.y);return Math.sqrt(t**2+r**2)}class JC{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=om(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,E=O6(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!E)return;const{point:A}=g,{timestamp:I}=On;this.history.push({...A,timestamp:I});const{onStart:N,onMove:R}=this.handlers;y||(N&&N(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=im(y,this.transformPagePoint),Nt.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:E,onSessionEnd:A,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=om(g.type==="pointercancel"?this.lastMoveEventInfo:im(y,this.transformPagePoint),this.history);this.startEvent&&E&&E(g,N),A&&A(g,N)},!bv(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const a=Rf(e),u=im(a,this.transformPagePoint),{point:f}=u,{timestamp:d}=On;this.history=[{...f,timestamp:d}];const{onSessionStart:p}=t;p&&p(e,om(u,this.history)),this.removeListeners=Sf(zc(this.contextWindow,"pointermove",this.handlePointerMove),zc(this.contextWindow,"pointerup",this.handlePointerUp),zc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Cs(this.updatePoint)}}function im(n,e){return e?{point:e(n.point)}:n}function f2(n,e){return{x:n.x-e.x,y:n.y-e.y}}function om({point:n},e){return{point:n,delta:f2(n,eI(e)),offset:f2(n,D6(e)),velocity:k6(e,.1)}}function D6(n){return n[0]}function eI(n){return n[n.length-1]}function k6(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=eI(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Ui(e)));)t--;if(!r)return{x:0,y:0};const o=qr(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function M6(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?kt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?kt(t,n,r.max):Math.min(n,t)),n}function d2(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function L6(n,{top:e,left:t,bottom:r,right:i}){return{x:d2(n.x,t,i),y:d2(n.y,e,r)}}function h2(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function V6(n,e){return{x:h2(n.x,e.x),y:h2(n.y,e.y)}}function F6(n,e){let t=.5;const r=nr(n),i=nr(e);return i>r?t=of(e.min,e.max-r,n.min):r>i&&(t=of(n.min,n.max-i,e.min)),wo(0,1,t)}function B6(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const ug=.35;function U6(n=ug){return n===!1?n=0:n===!0&&(n=ug),{x:p2(n,"left","right"),y:p2(n,"top","bottom")}}function p2(n,e,t){return{min:m2(n,e),max:m2(n,t)}}function m2(n,e){return typeof n=="number"?n:n[e]||0}const j6=new WeakMap;class z6{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$t(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Rf(p).point)},s=(p,g)=>{const{drag:y,dragPropagation:E,onDragStart:A}=this.getProps();if(y&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=KN(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Wr(N=>{let R=this.getAxisMotionValue(N).get()||0;if(ji.test(R)){const{projection:k}=this.visualElement;if(k&&k.layout){const j=k.layout.layoutBox[N];j&&(R=nr(j)*(parseFloat(R)/100))}}this.originPoint[N]=R}),A&&Nt.postRender(()=>A(p,g)),ag(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},a=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g;const{dragPropagation:y,dragDirectionLock:E,onDirectionLock:A,onDrag:I}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:N}=g;if(E&&this.currentDirection===null){this.currentDirection=H6(N),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",g.point,N),this.updateAxis("y",g.point,N),this.visualElement.render(),I&&I(p,g)},u=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g,this.stop(p,g),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Wr(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new JC(e,{onSessionStart:o,onStart:s,onMove:a,onSessionEnd:u,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:ZC(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&Nt.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!ph(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=M6(s,this.constraints[e],this.elastic[e])),o.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Ml(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=L6(r.layoutBox,e):this.constraints=!1,this.elastic=U6(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Wr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=B6(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ml(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=W8(r,i.root,this.visualElement.getTransformPagePoint());let s=V6(i.layout.layoutBox,o);if(t){const a=t(j8(s));this.hasMutatedConstraints=!!a,a&&(s=VC(a))}return s}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},f=Wr(d=>{if(!ph(d,t,this.currentDirection))return;let p=u&&u[d]||{};s&&(p={min:0,max:0});const g=i?200:1e6,y=i?40:1e7,E={type:"inertia",velocity:r?e[d]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...o,...p};return this.startAxisValueAnimation(d,E)});return Promise.all(f).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return ag(this.visualElement,e),r.start(Fv(e,r,0,t,this.visualElement,!1))}stopAnimation(){Wr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Wr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Wr(t=>{const{drag:r}=this.getProps();if(!ph(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(t);if(i&&i.layout){const{min:s,max:a}=i.layout.layoutBox[t];o.set(e[t]-kt(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Ml(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Wr(s=>{const a=this.getAxisMotionValue(s);if(a&&this.constraints!==!1){const u=a.get();i[s]=F6({min:u,max:u},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Wr(s=>{if(!ph(s,e,null))return;const a=this.getAxisMotionValue(s),{min:u,max:f}=this.constraints[s];a.set(kt(u,f,i[s]))})}addListeners(){if(!this.visualElement.current)return;j6.set(this.visualElement,this);const e=this.visualElement.current,t=zc(e,"pointerdown",u=>{const{drag:f,dragListener:d=!0}=this.getProps();f&&d&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Ml(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Nt.read(r);const s=ff(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:f})=>{this.isDragging&&f&&(Wr(d=>{const p=this.getAxisMotionValue(d);p&&(this.originPoint[d]+=u[d].translate,p.set(p.get()+u[d].translate))}),this.visualElement.render())}));return()=>{s(),t(),o(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=ug,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:a}}}function ph(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function H6(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class W6 extends ks{constructor(e){super(e),this.removeGroupControls=Xr,this.removeListeners=Xr,this.controls=new z6(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xr}unmount(){this.removeGroupControls(),this.removeListeners()}}const g2=n=>(e,t)=>{n&&Nt.postRender(()=>n(e,t))};class $6 extends ks{constructor(){super(...arguments),this.removePointerDownListener=Xr}onPointerDown(e){this.session=new JC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ZC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:g2(e),onStart:g2(t),onMove:r,onEnd:(o,s)=>{delete this.session,i&&Nt.postRender(()=>i(o,s))}}}mount(){this.removePointerDownListener=zc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const kh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function v2(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ec={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Be.test(n))n=parseFloat(n);else return n;const t=v2(n,e.target.x),r=v2(n,e.target.y);return`${t}% ${r}%`}},G6={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Is.parse(n);if(i.length>5)return r;const o=Is.createTransformer(n),s=typeof i[0]!="number"?1:0,a=t.x.scale*e.x,u=t.y.scale*e.y;i[0+s]/=a,i[1+s]/=u;const f=kt(a,u,.5);return typeof i[2+s]=="number"&&(i[2+s]/=f),typeof i[3+s]=="number"&&(i[3+s]/=f),o(i)}};let sm=!1;class q6 extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;m8(K6),o&&(t.group&&t.group.add(o),r&&r.register&&i&&r.register(o),sm&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),kh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:o}=this.props,{projection:s}=r;return s&&(s.isPresent=o,sm=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==o?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||Nt.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Sv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;sm=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function tI(n){const[e,t]=AC(),r=B.useContext(ov);return T.jsx(q6,{...n,layoutGroup:r,switchLayoutGroup:B.useContext(MC),isPresent:e,safeToRemove:t})}const K6={borderRadius:{...Ec,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ec,borderTopRightRadius:Ec,borderBottomLeftRadius:Ec,borderBottomRightRadius:Ec,boxShadow:G6};function X6(n,e,t){const r=qn(n)?n:Ql(n);return r.start(Fv("",r,e,t)),r.animation}const Y6=(n,e)=>n.depth-e.depth;class Q6{constructor(){this.children=[],this.isDirty=!1}add(e){lv(this.children,e),this.isDirty=!0}remove(e){uv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Y6),this.isDirty=!1,this.children.forEach(e)}}function Z6(n,e){const t=mr.now(),r=({timestamp:i})=>{const o=i-t;o>=e&&(Cs(r),n(o-e))};return Nt.setup(r,!0),()=>Cs(r)}const nI=["TopLeft","TopRight","BottomLeft","BottomRight"],J6=nI.length,y2=n=>typeof n=="string"?parseFloat(n):n,w2=n=>typeof n=="number"||Be.test(n);function eO(n,e,t,r,i,o){i?(n.opacity=kt(0,t.opacity??1,tO(r)),n.opacityExit=kt(e.opacity??1,0,nO(r))):o&&(n.opacity=kt(e.opacity??1,t.opacity??1,r));for(let s=0;s<J6;s++){const a=`border${nI[s]}Radius`;let u=_2(e,a),f=_2(t,a);if(u===void 0&&f===void 0)continue;u||(u=0),f||(f=0),u===0||f===0||w2(u)===w2(f)?(n[a]=Math.max(kt(y2(u),y2(f),r),0),(ji.test(f)||ji.test(u))&&(n[a]+="%")):n[a]=f}(e.rotate||t.rotate)&&(n.rotate=kt(e.rotate||0,t.rotate||0,r))}function _2(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const tO=rI(0,.5,HT),nO=rI(.5,.95,Xr);function rI(n,e,t){return r=>r<n?0:r>e?1:t(of(n,e,r))}function x2(n,e){n.min=e.min,n.max=e.max}function Hr(n,e){x2(n.x,e.x),x2(n.y,e.y)}function E2(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function A2(n,e,t,r,i){return n-=e,n=np(n,1/t,r),i!==void 0&&(n=np(n,1/i,r)),n}function rO(n,e=0,t=1,r=.5,i,o=n,s=n){if(ji.test(e)&&(e=parseFloat(e),e=kt(s.min,s.max,e/100)-s.min),typeof e!="number")return;let a=kt(o.min,o.max,r);n===o&&(a-=e),n.min=A2(n.min,e,t,a,i),n.max=A2(n.max,e,t,a,i)}function T2(n,e,[t,r,i],o,s){rO(n,e[t],e[r],e[i],e.scale,o,s)}const iO=["x","scaleX","originX"],oO=["y","scaleY","originY"];function C2(n,e,t,r){T2(n.x,e,iO,t?t.x:void 0,r?r.x:void 0),T2(n.y,e,oO,t?t.y:void 0,r?r.y:void 0)}function I2(n){return n.translate===0&&n.scale===1}function iI(n){return I2(n.x)&&I2(n.y)}function S2(n,e){return n.min===e.min&&n.max===e.max}function sO(n,e){return S2(n.x,e.x)&&S2(n.y,e.y)}function b2(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function oI(n,e){return b2(n.x,e.x)&&b2(n.y,e.y)}function P2(n){return nr(n.x)/nr(n.y)}function R2(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class aO{constructor(){this.members=[]}add(e){lv(this.members,e),e.scheduleRender()}remove(e){if(uv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function lO(n,e,t){let r="";const i=n.x.translate/e.x,o=n.y.translate/e.y,s=t?.z||0;if((i||o||s)&&(r=`translate3d(${i}px, ${o}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:d,rotateX:p,rotateY:g,skewX:y,skewY:E}=t;f&&(r=`perspective(${f}px) ${r}`),d&&(r+=`rotate(${d}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),y&&(r+=`skewX(${y}deg) `),E&&(r+=`skewY(${E}deg) `)}const a=n.x.scale*e.x,u=n.y.scale*e.y;return(a!==1||u!==1)&&(r+=`scale(${a}, ${u})`),r||"none"}const am=["","X","Y","Z"],uO=1e3;let cO=0;function lm(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function sI(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=$C(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Nt,!(i||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&sI(r)}function aI({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},a=e?.()){this.id=cO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(hO),this.nodes.forEach(vO),this.nodes.forEach(yO),this.nodes.forEach(pO)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new Q6)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new dv),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const u=this.eventHandlers.get(s);u&&u.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=EC(s)&&!e8(s),this.instance=s;const{layoutId:a,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||a)&&(this.isLayoutDirty=!0),n){let d,p=0;const g=()=>this.root.updateBlockedByResize=!1;Nt.read(()=>{p=window.innerWidth}),n(s,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,d&&d(),d=Z6(g,250),kh.hasAnimatedSinceResize&&(kh.hasAnimatedSinceResize=!1,this.nodes.forEach(D2)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&f&&(a||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||f.getDefaultTransition()||AO,{onLayoutAnimationStart:A,onLayoutAnimationComplete:I}=f.getProps(),N=!this.targetLayout||!oI(this.targetLayout,y),R=!p&&g;if(this.options.layoutRoot||this.resumeFrom||R||p&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...Cv(E,"layout"),onPlay:A,onComplete:I};(f.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(d,R)}else p||D2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Cs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(wO),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&sI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const p=this.path[d];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(N2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(O2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(gO),this.nodes.forEach(fO),this.nodes.forEach(dO)):this.nodes.forEach(O2),this.clearAllSnapshots();const a=mr.now();On.delta=wo(0,1e3/60,a-On.timestamp),On.timestamp=a,On.isProcessing=!0,Y1.update.process(On),Y1.preRender.process(On),Y1.render.process(On),On.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Sv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mO),this.sharedNodes.forEach(_O)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Nt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Nt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!nr(this.snapshot.measuredBox.x)&&!nr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$t(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!iI(this.projectionDelta),u=this.getTransformTemplate(),f=u?u(this.latestValues,""):void 0,d=f!==this.prevTransformTemplateValue;s&&this.instance&&(a||ma(this.latestValues)||d)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return s&&(u=this.removeTransform(u)),TO(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return $t();const a=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(CO))){const{scroll:f}=this.root;f&&(Ll(a.x,f.offset.x),Ll(a.y,f.offset.y))}return a}removeElementScroll(s){const a=$t();if(Hr(a,s),this.scroll?.wasRoot)return a;for(let u=0;u<this.path.length;u++){const f=this.path[u],{scroll:d,options:p}=f;f!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&Hr(a,s),Ll(a.x,d.offset.x),Ll(a.y,d.offset.y))}return a}applyTransform(s,a=!1){const u=$t();Hr(u,s);for(let f=0;f<this.path.length;f++){const d=this.path[f];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Vl(u,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ma(d.latestValues)&&Vl(u,d.latestValues)}return ma(this.latestValues)&&Vl(u,this.latestValues),u}removeTransform(s){const a=$t();Hr(a,s);for(let u=0;u<this.path.length;u++){const f=this.path[u];if(!f.instance||!ma(f.latestValues))continue;rg(f.latestValues)&&f.updateSnapshot();const d=$t(),p=f.measurePageBox();Hr(d,p),C2(a,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,d)}return ma(this.latestValues)&&C2(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==On.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==a;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=On.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$t(),this.relativeTargetOrigin=$t(),Wc(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Hr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$t(),this.targetWithTransforms=$t()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),N6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Hr(this.target,this.layout.layoutBox),BC(this.target,this.targetDelta)):Hr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$t(),this.relativeTargetOrigin=$t(),Wc(this.relativeTargetOrigin,this.target,g.target),Hr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||rg(this.parent.latestValues)||FC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const s=this.getLead(),a=!!this.resumingFrom||this!==s;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===On.timestamp&&(u=!1),u)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;Hr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;H8(this.layoutCorrected,this.treeScale,this.path,a),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=$t());const{target:y}=s;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(E2(this.prevProjectionDelta.x,this.projectionDelta.x),E2(this.prevProjectionDelta.y,this.projectionDelta.y)),Hc(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!R2(this.projectionDelta.x,this.prevProjectionDelta.x)||!R2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Fl(),this.projectionDelta=Fl(),this.projectionDeltaWithTransform=Fl()}setAnimationOrigin(s,a=!1){const u=this.snapshot,f=u?u.latestValues:{},d={...this.latestValues},p=Fl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const g=$t(),y=u?u.source:void 0,E=this.layout?this.layout.source:void 0,A=y!==E,I=this.getStack(),N=!I||I.members.length<=1,R=!!(A&&!N&&this.options.crossfade===!0&&!this.path.some(EO));this.animationProgress=0;let k;this.mixTargetDelta=j=>{const H=j/1e3;k2(p.x,s.x,H),k2(p.y,s.y,H),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wc(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),xO(this.relativeTarget,this.relativeTargetOrigin,g,H),k&&sO(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=$t()),Hr(k,this.relativeTarget)),A&&(this.animationValues=d,eO(d,f,this.latestValues,H,R,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Cs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Nt.update(()=>{kh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ql(0)),this.currentAnimation=X6(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(uO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:u,layout:f,latestValues:d}=s;if(!(!a||!u||!f)){if(this!==s&&this.layout&&f&&lI(this.options.animationType,this.layout.layoutBox,f.layoutBox)){u=this.target||$t();const p=nr(this.layout.layoutBox.x);u.x.min=s.target.x.min,u.x.max=u.x.min+p;const g=nr(this.layout.layoutBox.y);u.y.min=s.target.y.min,u.y.max=u.y.min+g}Hr(a,u),Vl(a,d),Hc(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new aO),this.sharedNodes.get(s).add(a);const f=a.options.initialPromotionConfig;a.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:u}={}){const f=this.getStack();f&&f.promote(this,u),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:u}=s;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(a=!0),!a)return;const f={};u.z&&lm("z",s,f,this.animationValues);for(let d=0;d<am.length;d++)lm(`rotate${am[d]}`,s,f,this.animationValues),lm(`skew${am[d]}`,s,f,this.animationValues);s.render();for(const d in f)s.setStaticValue(d,f[d]),this.animationValues&&(this.animationValues[d]=f[d]);s.scheduleRender()}applyProjectionStyles(s,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=Dh(a?.pointerEvents)||"",s.transform=u?u(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=Dh(a?.pointerEvents)||""),this.hasProjected&&!ma(this.latestValues)&&(s.transform=u?u({},""):"none",this.hasProjected=!1);return}s.visibility="";const d=f.animationValues||f.latestValues;this.applyTransformsToTarget();let p=lO(this.projectionDeltaWithTransform,this.treeScale,d);u&&(p=u(d,p)),s.transform=p;const{x:g,y}=this.projectionDelta;s.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,f.animationValues?s.opacity=f===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:s.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const E in cf){if(d[E]===void 0)continue;const{correct:A,applyTo:I,isCSSVariable:N}=cf[E],R=p==="none"?d[E]:A(d[E],f);if(I){const k=I.length;for(let j=0;j<k;j++)s[I[j]]=R}else N?this.options.visualElement.renderState.vars[E]=R:s[E]=R}this.options.layoutId&&(s.pointerEvents=f===this?Dh(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(N2),this.root.sharedNodes.clear()}}}function fO(n){n.updateLayout()}function dO(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:i}=n.options,o=e.source!==n.layout.source;i==="size"?Wr(d=>{const p=o?e.measuredBox[d]:e.layoutBox[d],g=nr(p);p.min=t[d].min,p.max=p.min+g}):lI(i,e.layoutBox,t)&&Wr(d=>{const p=o?e.measuredBox[d]:e.layoutBox[d],g=nr(t[d]);p.max=p.min+g,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+g)});const s=Fl();Hc(s,t,e.layoutBox);const a=Fl();o?Hc(a,n.applyTransform(r,!0),e.measuredBox):Hc(a,t,e.layoutBox);const u=!iI(s);let f=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:g}=d;if(p&&g){const y=$t();Wc(y,e.layoutBox,p.layoutBox);const E=$t();Wc(E,t,g.layoutBox),oI(y,E)||(f=!0),d.options.layoutRoot&&(n.relativeTarget=E,n.relativeTargetOrigin=y,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:a,layoutDelta:s,hasLayoutChanged:u,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function hO(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function pO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function mO(n){n.clearSnapshot()}function N2(n){n.clearMeasurements()}function O2(n){n.isLayoutDirty=!1}function gO(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function D2(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function vO(n){n.resolveTargetDelta()}function yO(n){n.calcProjection()}function wO(n){n.resetSkewAndRotation()}function _O(n){n.removeLeadSnapshot()}function k2(n,e,t){n.translate=kt(e.translate,0,t),n.scale=kt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function M2(n,e,t,r){n.min=kt(e.min,t.min,r),n.max=kt(e.max,t.max,r)}function xO(n,e,t,r){M2(n.x,e.x,t.x,r),M2(n.y,e.y,t.y,r)}function EO(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const AO={duration:.45,ease:[.4,0,.1,1]},L2=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),V2=L2("applewebkit/")&&!L2("chrome/")?Math.round:Xr;function F2(n){n.min=V2(n.min),n.max=V2(n.max)}function TO(n){F2(n.x),F2(n.y)}function lI(n,e,t){return n==="position"||n==="preserve-aspect"&&!R6(P2(e),P2(t),.2)}function CO(n){return n!==n.root&&n.scroll?.wasRoot}const IO=aI({attachResizeListener:(n,e)=>ff(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),um={current:void 0},uI=aI({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!um.current){const n=new IO({});n.mount(window),n.setOptions({layoutScroll:!0}),um.current=n}return um.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),SO={pan:{Feature:$6},drag:{Feature:W6,ProjectionNode:uI,MeasureLayout:tI}};function B2(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,o=r[i];o&&Nt.postRender(()=>o(e,Rf(e)))}class bO extends ks{mount(){const{current:e}=this.node;e&&(this.unmount=XN(e,(t,r)=>(B2(this.node,r,"Start"),i=>B2(this.node,i,"End"))))}unmount(){}}class PO extends ks{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Sf(ff(this.node.current,"focus",()=>this.onFocus()),ff(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function U2(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),o=r[i];o&&Nt.postRender(()=>o(e,Rf(e)))}class RO extends ks{mount(){const{current:e}=this.node;e&&(this.unmount=JN(e,(t,r)=>(U2(this.node,r,"Start"),(i,{success:o})=>U2(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const cg=new WeakMap,cm=new WeakMap,NO=n=>{const e=cg.get(n.target);e&&e(n)},OO=n=>{n.forEach(NO)};function DO({root:n,...e}){const t=n||document;cm.has(t)||cm.set(t,{});const r=cm.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(OO,{root:n,...e})),r[i]}function kO(n,e,t){const r=DO(e);return cg.set(n,t),r.observe(n),()=>{cg.delete(n),r.unobserve(n)}}const MO={some:0,all:1};class LO extends ks{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:o}=e,s={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:MO[i]},a=u=>{const{isIntersecting:f}=u;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:d,onViewportLeave:p}=this.node.getProps(),g=f?d:p;g&&g(u)};return kO(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(VO(e,t))&&this.startObserver()}unmount(){}}function VO({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const FO={inView:{Feature:LO},tap:{Feature:RO},focus:{Feature:PO},hover:{Feature:bO}},BO={layout:{ProjectionNode:uI,MeasureLayout:tI}},UO={...T6,...FO,...SO,...BO},kn=U8(UO,J8),jO=()=>{};var j2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},zO=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},fI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,f=u?n[i+2]:0,d=o>>2,p=(o&3)<<4|a>>4;let g=(a&15)<<2|f>>6,y=f&63;u||(y=64,s||(g=64)),r.push(t[d],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(cI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):zO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||f==null||p==null)throw new HO;const g=o<<2|a>>4;if(r.push(g),f!==64){const y=a<<4&240|f>>2;if(r.push(y),p!==64){const E=f<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class HO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WO=function(n){const e=cI(n);return fI.encodeByteArray(e,!0)},rp=function(n){return WO(n).replace(/\./g,"")},dI=function(n){try{return fI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=()=>$O().__FIREBASE_DEFAULTS__,qO=()=>{if(typeof process>"u"||typeof j2>"u")return;const n=j2.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},KO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&dI(n[1]);return e&&JSON.parse(e)},Op=()=>{try{return jO()||GO()||qO()||KO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},hI=n=>Op()?.emulatorHosts?.[n],XO=n=>{const e=hI(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},pI=()=>Op()?.config,mI=n=>Op()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gI(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[rp(JSON.stringify(t)),rp(JSON.stringify(s)),""].join(".")}const $c={};function ZO(){const n={prod:[],emulator:[]};for(const e of Object.keys($c))$c[e]?n.emulator.push(e):n.prod.push(e);return n}function JO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let z2=!1;function vI(n,e){if(typeof window>"u"||typeof document>"u"||!hu(window.location.host)||$c[n]===e||$c[n]||z2)return;$c[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",o=ZO().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function f(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{z2=!0,s()},g}function d(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=JO(r),y=t("text"),E=document.getElementById(y)||document.createElement("span"),A=t("learnmore"),I=document.getElementById(A)||document.createElement("a"),N=t("preprendIcon"),R=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const k=g.element;a(k),d(I,A);const j=f();u(R,N),k.append(R,E,I,j),document.body.appendChild(k)}o?(E.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kn())}function tD(){const n=Op()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function iD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oD(){const n=Kn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function sD(){return!tD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aD(){try{return typeof indexedDB=="object"}catch{return!1}}function lD(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="FirebaseError";class So extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=uD,Object.setPrototypeOf(this,So.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nf.prototype.create)}}class Nf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?cD(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new So(i,a,r)}}function cD(n,e){return n.replace(fD,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const fD=/\{\$([^}]+)}/g;function dD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Sa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],s=e[i];if(H2(o)&&H2(s)){if(!Sa(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function H2(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Pc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Rc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function hD(n,e){const t=new pD(n,e);return t.subscribe.bind(t)}class pD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");mD(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=fm),i.error===void 0&&(i.error=fm),i.complete===void 0&&(i.complete=fm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function fm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(n){return n&&n._delegate?n._delegate:n}class ba{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gD=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new YO;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yD(e))try{this.getOrInitializeService({instanceIdentifier:ga})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ga){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ga){return this.instances.has(e)}getOptions(e=ga){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ga){return this.component?this.component.multipleInstances?e:ga:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function vD(n){return n===ga?void 0:n}function yD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ze||(Ze={}));const _D={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},xD=Ze.INFO,ED={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},AD=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=ED[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bv{constructor(e){this.name=e,this._logLevel=xD,this._logHandler=AD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_D[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const TD=(n,e)=>e.some(t=>n instanceof t);let W2,$2;function CD(){return W2||(W2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ID(){return $2||($2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yI=new WeakMap,fg=new WeakMap,wI=new WeakMap,dm=new WeakMap,Uv=new WeakMap;function SD(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(gs(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&yI.set(t,n)}).catch(()=>{}),Uv.set(e,n),e}function bD(n){if(fg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});fg.set(n,e)}let dg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return fg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||wI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function PD(n){dg=n(dg)}function RD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(hm(this),e,...t);return wI.set(r,e.sort?e.sort():[e]),gs(r)}:ID().includes(n)?function(...e){return n.apply(hm(this),e),gs(yI.get(this))}:function(...e){return gs(n.apply(hm(this),e))}}function ND(n){return typeof n=="function"?RD(n):(n instanceof IDBTransaction&&bD(n),TD(n,CD())?new Proxy(n,dg):n)}function gs(n){if(n instanceof IDBRequest)return SD(n);if(dm.has(n))return dm.get(n);const e=ND(n);return e!==n&&(dm.set(n,e),Uv.set(e,n)),e}const hm=n=>Uv.get(n);function OD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,e),a=gs(s);return r&&s.addEventListener("upgradeneeded",u=>{r(gs(s.result),u.oldVersion,u.newVersion,gs(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),a}const DD=["get","getKey","getAll","getAllKeys","count"],kD=["put","add","delete","clear"],pm=new Map;function G2(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(pm.get(e))return pm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=kD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||DD.includes(t)))return;const o=async function(s,...a){const u=this.transaction(s,i?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(a.shift())),(await Promise.all([f[t](...a),i&&u.done]))[0]};return pm.set(e,o),o}PD(n=>({...n,get:(e,t,r)=>G2(e,t)||n.get(e,t,r),has:(e,t)=>!!G2(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(LD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function LD(n){return n.getComponent()?.type==="VERSION"}const hg="@firebase/app",q2="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new Bv("@firebase/app"),VD="@firebase/app-compat",FD="@firebase/analytics-compat",BD="@firebase/analytics",UD="@firebase/app-check-compat",jD="@firebase/app-check",zD="@firebase/auth",HD="@firebase/auth-compat",WD="@firebase/database",$D="@firebase/data-connect",GD="@firebase/database-compat",qD="@firebase/functions",KD="@firebase/functions-compat",XD="@firebase/installations",YD="@firebase/installations-compat",QD="@firebase/messaging",ZD="@firebase/messaging-compat",JD="@firebase/performance",ek="@firebase/performance-compat",tk="@firebase/remote-config",nk="@firebase/remote-config-compat",rk="@firebase/storage",ik="@firebase/storage-compat",ok="@firebase/firestore",sk="@firebase/ai",ak="@firebase/firestore-compat",lk="firebase",uk="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="[DEFAULT]",ck={[hg]:"fire-core",[VD]:"fire-core-compat",[BD]:"fire-analytics",[FD]:"fire-analytics-compat",[jD]:"fire-app-check",[UD]:"fire-app-check-compat",[zD]:"fire-auth",[HD]:"fire-auth-compat",[WD]:"fire-rtdb",[$D]:"fire-data-connect",[GD]:"fire-rtdb-compat",[qD]:"fire-fn",[KD]:"fire-fn-compat",[XD]:"fire-iid",[YD]:"fire-iid-compat",[QD]:"fire-fcm",[ZD]:"fire-fcm-compat",[JD]:"fire-perf",[ek]:"fire-perf-compat",[tk]:"fire-rc",[nk]:"fire-rc-compat",[rk]:"fire-gcs",[ik]:"fire-gcs-compat",[ok]:"fire-fst",[ak]:"fire-fst-compat",[sk]:"fire-vertex","fire-js":"fire-js",[lk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=new Map,fk=new Map,mg=new Map;function K2(n,e){try{n.container.addComponent(e)}catch(t){xo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Jl(n){const e=n.name;if(mg.has(e))return xo.debug(`There were multiple attempts to register component ${e}.`),!1;mg.set(e,n);for(const t of ip.values())K2(t,n);for(const t of fk.values())K2(t,n);return!0}function jv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function un(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vs=new Nf("app","Firebase",dk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ba("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=uk;function _I(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:pg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw vs.create("bad-app-name",{appName:String(i)});if(t||(t=pI()),!t)throw vs.create("no-options");const o=ip.get(i);if(o){if(Sa(t,o.options)&&Sa(r,o.config))return o;throw vs.create("duplicate-app",{appName:i})}const s=new wD(i);for(const u of mg.values())s.addComponent(u);const a=new hk(t,r,s);return ip.set(i,a),a}function xI(n=pg){const e=ip.get(n);if(!e&&n===pg&&pI())return _I();if(!e)throw vs.create("no-app",{appName:n});return e}function ys(n,e,t){let r=ck[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xo.warn(s.join(" "));return}Jl(new ba(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="firebase-heartbeat-database",mk=1,df="firebase-heartbeat-store";let mm=null;function EI(){return mm||(mm=OD(pk,mk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(df)}catch(t){console.warn(t)}}}}).catch(n=>{throw vs.create("idb-open",{originalErrorMessage:n.message})})),mm}async function gk(n){try{const t=(await EI()).transaction(df),r=await t.objectStore(df).get(AI(n));return await t.done,r}catch(e){if(e instanceof So)xo.warn(e.message);else{const t=vs.create("idb-get",{originalErrorMessage:e?.message});xo.warn(t.message)}}}async function X2(n,e){try{const r=(await EI()).transaction(df,"readwrite");await r.objectStore(df).put(e,AI(n)),await r.done}catch(t){if(t instanceof So)xo.warn(t.message);else{const r=vs.create("idb-set",{originalErrorMessage:t?.message});xo.warn(r.message)}}}function AI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=1024,yk=30;class wk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xk(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Y2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>yk){const i=Ek(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xo.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Y2(),{heartbeatsToSend:t,unsentEntries:r}=_k(this._heartbeatsCache.heartbeats),i=rp(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return xo.warn(e),""}}}function Y2(){return new Date().toISOString().substring(0,10)}function _k(n,e=vk){const t=[];let r=n.slice();for(const i of n){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Q2(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Q2(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class xk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aD()?lD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await gk(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return X2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return X2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Q2(n){return rp(JSON.stringify({version:2,heartbeats:n})).length}function Ek(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(n){Jl(new ba("platform-logger",e=>new MD(e),"PRIVATE")),Jl(new ba("heartbeat",e=>new wk(e),"PRIVATE")),ys(hg,q2,n),ys(hg,q2,"esm2020"),ys("fire-js","")}Ak("");function TI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Tk=TI,CI=new Nf("auth","Firebase",TI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=new Bv("@firebase/auth");function Ck(n,...e){op.logLevel<=Ze.WARN&&op.warn(`Auth (${mu}): ${n}`,...e)}function Mh(n,...e){op.logLevel<=Ze.ERROR&&op.error(`Auth (${mu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(n,...e){throw Hv(n,...e)}function gr(n,...e){return Hv(n,...e)}function zv(n,e,t){const r={...Tk(),[e]:t};return new Nf("auth","Firebase",r).create(e,{appName:n.name})}function ir(n){return zv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dp(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Qr(n,"argument-error"),zv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Hv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return CI.create(n,...e)}function ge(n,e,...t){if(!n)throw Hv(e,...t)}function vo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Mh(e),new Error(e)}function Eo(n,e){n||vo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(){return typeof self<"u"&&self.location?.href||""}function Wv(){return Z2()==="http:"||Z2()==="https:"}function Z2(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Wv()||rD()||"connection"in navigator)?navigator.onLine:!0}function Sk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t){this.shortDelay=e,this.longDelay=t,Eo(t>e,"Short delay should be less than long delay!"),this.isMobile=eD()||iD()}get(){return Ik()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(n,e){Eo(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Rk=new Of(3e4,6e4);function hn(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function pn(n,e,t,r,i={}){return SI(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=pu({key:n.config.apiKey,...s}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:u,...o};return nD()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&hu(n.emulatorConfig.host)&&(f.credentials="include"),II.fetch()(await bI(n,n.config.apiHost,t,a),f)})}async function SI(n,e,t){n._canInitEmulator=!1;const r={...bk,...e};try{const i=new Ok(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Nc(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[u,f]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nc(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Nc(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Nc(n,"user-disabled",s);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw zv(n,d,f);Qr(n,d)}}catch(i){if(i instanceof So)throw i;Qr(n,"network-request-failed",{message:String(i)})}}async function bo(n,e,t,r,i={}){const o=await pn(n,e,t,r,i);return"mfaPendingCredential"in o&&Qr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function bI(n,e,t,r){const i=`${e}${t}?${r}`,o=n,s=o.config.emulator?$v(n.config,i):`${n.config.apiScheme}://${i}`;return Pk.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function Nk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ok{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(gr(this.auth,"network-request-failed")),Rk.get())})}}function Nc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=gr(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(n){return n!==void 0&&n.getResponse!==void 0}function eE(n){return n!==void 0&&n.enterprise!==void 0}class PI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Nk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(n){return(await pn(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function RI(n,e){return pn(n,"GET","/v2/recaptchaConfig",hn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kk(n,e){return pn(n,"POST","/v1/accounts:delete",e)}async function Mk(n,e){return pn(n,"POST","/v1/accounts:update",e)}async function sp(n,e){return pn(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Lk(n,e=!1){const t=Xe(n),r=await t.getIdToken(e),i=kp(r);ge(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Gc(gm(i.auth_time)),issuedAtTime:Gc(gm(i.iat)),expirationTime:Gc(gm(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function gm(n){return Number(n)*1e3}function kp(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Mh("JWT malformed, contained fewer than 3 sections"),null;try{const i=dI(t);return i?JSON.parse(i):(Mh("Failed to decode base64 JWT payload"),null)}catch(i){return Mh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function tE(n){const e=kp(n);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pa(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof So&&Vk(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Vk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gc(this.lastLoginAt),this.creationTime=Gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pf(n){const e=n.auth,t=await n.getIdToken(),r=await Pa(n,sp(e,{idToken:t}));ge(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=i.providerUserInfo?.length?NI(i.providerUserInfo):[],s=Uk(n.providerData,o),a=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!s?.length,f=a?u:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new gg(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(n,d)}async function Bk(n){const e=Xe(n);await pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Uk(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function NI(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jk(n,e){const t=await SI(n,{},async()=>{const r=pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await bI(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:r};return n.emulatorConfig&&hu(n.emulatorConfig.host)&&(u.credentials="include"),II.fetch()(s,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function zk(n,e){return pn(n,"POST","/v2/accounts:revokeToken",hn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const t=tE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await jk(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new $l;return r&&(ge(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ge(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ge(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $l,this.toJSON())}_performRefresh(){return vo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(n,e){ge(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class pi{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Fk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new gg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Pa(this,this.stsTokenManager.getToken(this.auth,e));return ge(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Lk(this,e)}reload(){return Bk(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await pf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(ir(this.auth));const e=await this.getIdToken();return await Pa(this,kk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,u=t._redirectEventId??void 0,f=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:y,providerData:E,stsTokenManager:A}=t;ge(p&&A,e,"internal-error");const I=$l.fromJSON(this.name,A);ge(typeof p=="string",e,"internal-error"),os(r,e.name),os(i,e.name),ge(typeof g=="boolean",e,"internal-error"),ge(typeof y=="boolean",e,"internal-error"),os(o,e.name),os(s,e.name),os(a,e.name),os(u,e.name),os(f,e.name),os(d,e.name);const N=new pi({uid:p,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:I,createdAt:f,lastLoginAt:d});return E&&Array.isArray(E)&&(N.providerData=E.map(R=>({...R}))),u&&(N._redirectEventId=u),N}static async _fromIdTokenResponse(e,t,r=!1){const i=new $l;i.updateFromServerResponse(t);const o=new pi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await pf(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ge(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?NI(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new $l;a.updateFromIdToken(r);const u=new pi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new gg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,f),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=new Map;function yo(n){Eo(n instanceof Function,"Expected a class definition");let e=nE.get(n);return e?(Eo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,nE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}OI.type="NONE";const rE=OI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(n,e,t){return`firebase:${n}:${e}:${t}`}class Gl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Lh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Lh("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await sp(this.auth,{idToken:e}).catch(()=>{});return t?pi._fromGetAccountInfoResponse(this.auth,t,e):null}return pi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Gl(yo(rE),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||yo(rE);const s=Lh(r,e.config.apiKey,e.name);let a=null;for(const f of t)try{const d=await f._get(s);if(d){let p;if(typeof d=="string"){const g=await sp(e,{idToken:d}).catch(()=>{});if(!g)break;p=await pi._fromGetAccountInfoResponse(e,g,d)}else p=pi._fromJSON(e,d);f!==o&&(a=p),o=f;break}}catch{}const u=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Gl(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(s)}catch{}})),new Gl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FI(e))return"Blackberry";if(BI(e))return"Webos";if(kI(e))return"Safari";if((e.includes("chrome/")||MI(e))&&!e.includes("edge/"))return"Chrome";if(VI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function DI(n=Kn()){return/firefox\//i.test(n)}function kI(n=Kn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MI(n=Kn()){return/crios\//i.test(n)}function LI(n=Kn()){return/iemobile/i.test(n)}function VI(n=Kn()){return/android/i.test(n)}function FI(n=Kn()){return/blackberry/i.test(n)}function BI(n=Kn()){return/webos/i.test(n)}function Gv(n=Kn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Hk(n=Kn()){return Gv(n)&&!!window.navigator?.standalone}function Wk(){return oD()&&document.documentMode===10}function UI(n=Kn()){return Gv(n)||VI(n)||BI(n)||FI(n)||/windows phone/i.test(n)||LI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(n,e=[]){let t;switch(n){case"Browser":t=iE(Kn());break;case"Worker":t=`${iE(Kn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${mu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((s,a)=>{try{const u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gk(n,e={}){return pn(n,"GET","/v2/passwordPolicy",hn(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=6;class Kk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??qk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oE(this),this.idTokenSubscription=new oE(this),this.beforeStateQueue=new $k(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yo(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Gl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await sp(this,{idToken:e}),r=await pi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(un(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Sk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(un(this.app))return Promise.reject(ir(this));const t=e?Xe(e):null;return t&&ge(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return un(this.app)?Promise.reject(ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return un(this.app)?Promise.reject(ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Gk(this),t=new Kk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await zk(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yo(e)||this._popupRedirectResolver;ge(t,this,"argument-error"),this.redirectPersistenceManager=await Gl.create(this,[yo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{const u=e.addObserver(t);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Ck(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Cn(n){return Xe(n)}class oE{constructor(e){this.auth=e,this.observer=null,this.addObserver=hD(t=>this.observer=t)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yk(n){Df=n}function qv(n){return Df.loadJS(n)}function Qk(){return Df.recaptchaV2Script}function Zk(){return Df.recaptchaEnterpriseScript}function Jk(){return Df.gapiScript}function zI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=500,t5=6e4,mh=1e12;class n5{constructor(e){this.auth=e,this.counter=mh,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new o5(e,this.auth.name,t||{})),this.counter++,r}reset(e){const t=e||mh;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||mh;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||mh;return this._widgets.get(t)?.execute(),""}}class r5{constructor(){this.enterprise=new i5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class i5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class o5{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;ge(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=s5(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},t5)},e5))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function s5(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const a5="recaptcha-enterprise",qc="NO_RECAPTCHA";class HI{constructor(e){this.type=a5,this.auth=Cn(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{RI(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const f=new PI(u);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,s(f.siteKey)}}).catch(u=>{a(u)})})}function i(o,s,a){const u=window.grecaptcha;eE(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(f=>{s(f)}).catch(()=>{s(qc)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new r5().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&eE(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Zk();u.length!==0&&(u+=a),qv(u).then(()=>{i(a,o,s)}).catch(f=>{s(f)})}}).catch(a=>{s(a)})})}}async function Ac(n,e,t,r=!1,i=!1){const o=new HI(n);let s;if(i)s=qc;else try{s=await o.verify(t)}catch{s=await o.verify(t,!0)}const a={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const u=a.phoneEnrollmentInfo.phoneNumber,f=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:f,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ws(n,e,t,r,i){if(i==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Ac(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await Ac(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)});else if(i==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const o=await Ac(n,e,t);return r(n,o).catch(async s=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(s.code==="auth/missing-recaptcha-token"||s.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const a=await Ac(n,e,t,!1,!0);return r(n,a)}return Promise.reject(s)})}else{const o=await Ac(n,e,t,!1,!0);return r(n,o)}else return Promise.reject(i+" provider is not supported.")}async function l5(n){const e=Cn(n),t=await RI(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new PI(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new HI(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(n,e){const t=jv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Sa(o,e??{}))return i;Qr(i,"already-initialized")}return t.initialize({options:e})}function c5(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(yo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function f5(n,e,t){const r=Cn(n);ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=WI(e),{host:s,port:a}=d5(e),u=a===null?"":`:${a}`,f={url:`${o}//${s}${u}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ge(Sa(f,r.config.emulator)&&Sa(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,hu(s)?(gI(`${o}//${s}${u}`),vI("Auth",!0)):h5()}function WI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function d5(n){const e=WI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:sE(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:sE(s)}}}function sE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function h5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vo("not implemented")}_getIdTokenResponse(e){return vo("not implemented")}_linkToIdToken(e,t){return vo("not implemented")}_getReauthenticationResolver(e){return vo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(n,e){return pn(n,"POST","/v1/accounts:resetPassword",hn(n,e))}async function m5(n,e){return pn(n,"POST","/v1/accounts:update",e)}async function g5(n,e){return pn(n,"POST","/v1/accounts:signUp",e)}async function v5(n,e){return pn(n,"POST","/v1/accounts:update",hn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5(n,e){return bo(n,"POST","/v1/accounts:signInWithPassword",hn(n,e))}async function Lp(n,e){return pn(n,"POST","/v1/accounts:sendOobCode",hn(n,e))}async function w5(n,e){return Lp(n,e)}async function _5(n,e){return Lp(n,e)}async function x5(n,e){return Lp(n,e)}async function E5(n,e){return Lp(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A5(n,e){return bo(n,"POST","/v1/accounts:signInWithEmailLink",hn(n,e))}async function T5(n,e){return bo(n,"POST","/v1/accounts:signInWithEmailLink",hn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends Mp{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new mf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new mf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ws(e,t,"signInWithPassword",y5,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return A5(e,{email:this._email,oobCode:this._password});default:Qr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ws(e,r,"signUpPassword",g5,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return T5(e,{idToken:t,email:this._email,oobCode:this._password});default:Qr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(n,e){return bo(n,"POST","/v1/accounts:signInWithIdp",hn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5="http://localhost";class Ao extends Mp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const s=new Ao(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return ql(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ql(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ql(e,t)}buildRequest(){const e={requestUri:C5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aE(n,e){return pn(n,"POST","/v1/accounts:sendVerificationCode",hn(n,e))}async function I5(n,e){return bo(n,"POST","/v1/accounts:signInWithPhoneNumber",hn(n,e))}async function S5(n,e){const t=await bo(n,"POST","/v1/accounts:signInWithPhoneNumber",hn(n,e));if(t.temporaryProof)throw Nc(n,"account-exists-with-different-credential",t);return t}const b5={USER_NOT_FOUND:"user-not-found"};async function P5(n,e){const t={...e,operation:"REAUTH"};return bo(n,"POST","/v1/accounts:signInWithPhoneNumber",hn(n,t),b5)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends Mp{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Kc({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Kc({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return I5(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return S5(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return P5(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:o}=e;return!r&&!t&&!i&&!o?null:new Kc({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function N5(n){const e=Pc(Rc(n)).link,t=e?Pc(Rc(e)).deep_link_id:null,r=Pc(Rc(n)).deep_link_id;return(r?Pc(Rc(r)).link:null)||r||t||e||n}class Vp{constructor(e){const t=Pc(Rc(e)),r=t.apiKey??null,i=t.oobCode??null,o=R5(t.mode??null);ge(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=N5(e);try{return new Vp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.providerId=La.PROVIDER_ID}static credential(e,t){return mf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Vp.parseLink(t);return ge(r,"argument-error"),mf._fromEmailAndCode(e,r.code,r.tenantId)}}La.PROVIDER_ID="password";La.EMAIL_PASSWORD_SIGN_IN_METHOD="password";La.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends gu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Vh extends vu{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return ge("providerId"in t&&"signInMethod"in t,"argument-error"),Ao._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return ge(e.idToken||e.accessToken,"argument-error"),Ao._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Vh.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Vh.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:a}=e;if(!r&&!i&&!t&&!o||!a)return null;try{return new Vh(a)._credential({idToken:t,accessToken:r,nonce:s,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends vu{constructor(){super("facebook.com")}static credential(e){return Ao._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ao._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Fi.credential(t,r)}catch{return null}}}Fi.GOOGLE_SIGN_IN_METHOD="google.com";Fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends vu{constructor(){super("github.com")}static credential(e){return Ao._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends vu{constructor(){super("twitter.com")}static credential(e,t){return Ao._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return hs.credential(t,r)}catch{return null}}}hs.TWITTER_SIGN_IN_METHOD="twitter.com";hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $I(n,e){return bo(n,"POST","/v1/accounts:signUp",hn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await pi._fromIdTokenResponse(e,r,i),s=lE(r);return new Gi({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=lE(r);return new Gi({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function lE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aW(n){if(un(n.app))return Promise.reject(ir(n));const e=Cn(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Gi({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await $I(e,{returnSecureToken:!0}),r=await Gi._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends So{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ap.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new ap(e,t,r,i)}}function GI(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ap._fromErrorAndOperation(n,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lW(n,e){const t=Xe(n);await Fp(!0,t,e);const{providerUserInfo:r}=await Mk(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=qI(r||[]);return t.providerData=t.providerData.filter(o=>i.has(o.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function KI(n,e,t=!1){const r=await Pa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Gi._forOperation(n,"link",r)}async function Fp(n,e,t){await pf(e);const r=qI(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";ge(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O5(n,e,t=!1){const{auth:r}=n;if(un(r.app))return Promise.reject(ir(r));const i="reauthenticate";try{const o=await Pa(n,GI(r,i,e,n),t);ge(o.idToken,r,"internal-error");const s=kp(o.idToken);ge(s,r,"internal-error");const{sub:a}=s;return ge(n.uid===a,r,"user-mismatch"),Gi._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Qr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(n,e,t=!1){if(un(n.app))return Promise.reject(ir(n));const r="signIn",i=await GI(n,r,e),o=await Gi._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function Bp(n,e){return XI(Cn(n),e)}async function D5(n,e){const t=Xe(n);return await Fp(!1,t,e.providerId),KI(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k5(n,e){return bo(n,"POST","/v1/accounts:signInWithCustomToken",hn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uW(n,e){if(un(n.app))return Promise.reject(ir(n));const t=Cn(n),r=await k5(t,{token:e,returnSecureToken:!0}),i=await Gi._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(n,e,t){ge(t.url?.length>0,n,"invalid-continue-uri"),ge(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),ge(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(ge(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(ge(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kv(n){const e=Cn(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cW(n,e,t){const r=Cn(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Up(r,i,t),await ws(r,i,"getOobCode",_5,"EMAIL_PASSWORD_PROVIDER")}async function fW(n,e,t){await p5(Xe(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Kv(n),r})}async function dW(n,e){await v5(Xe(n),{oobCode:e})}async function hW(n,e,t){if(un(n.app))return Promise.reject(ir(n));const r=Cn(n),s=await ws(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$I,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Kv(n),u}),a=await Gi._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function M5(n,e,t){return un(n.app)?Promise.reject(ir(n)):Bp(Xe(n),La.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Kv(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pW(n,e,t){const r=Cn(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(s,a){ge(a.handleCodeInApp,r,"argument-error"),a&&Up(r,s,a)}o(i,t),await ws(r,i,"getOobCode",x5,"EMAIL_PASSWORD_PROVIDER")}function mW(n,e){return Vp.parseLink(e)?.operation==="EMAIL_SIGNIN"}async function gW(n,e,t){if(un(n.app))return Promise.reject(ir(n));const r=Xe(n),i=La.credentialWithLink(e,t||hf());return ge(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Bp(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L5(n,e){return pn(n,"POST","/v1/accounts:createAuthUri",hn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vW(n,e){const t=Wv()?hf():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await L5(Xe(n),r);return i||[]}async function yW(n,e){const t=Xe(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&Up(t.auth,i,e);const{email:o}=await w5(t.auth,i);o!==n.email&&await n.reload()}async function wW(n,e,t){const r=Xe(n),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&Up(r.auth,o,t);const{email:s}=await E5(r.auth,o);s!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V5(n,e){return pn(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _W(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Xe(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},s=await Pa(r,V5(r.auth,o));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function xW(n,e){const t=Xe(n);return un(t.auth.app)?Promise.reject(ir(t.auth)):YI(t,e,null)}function EW(n,e){return YI(Xe(n),null,e)}async function YI(n,e,t){const{auth:r}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);const s=await Pa(n,m5(r,o));await n._updateTokensIfNecessary(s,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(n){if(!n)return null;const{providerId:e}=n,t=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},r=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&n?.idToken){const i=kp(n.idToken)?.firebase?.sign_in_provider;if(i){const o=i!=="anonymous"&&i!=="custom"?i:null;return new Kl(r,o)}}if(!e)return null;switch(e){case"facebook.com":return new B5(r,t);case"github.com":return new U5(r,t);case"google.com":return new j5(r,t);case"twitter.com":return new z5(r,t,n.screenName||null);case"custom":case"anonymous":return new Kl(r,null);default:return new Kl(r,e,t)}}class Kl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class QI extends Kl{constructor(e,t,r,i){super(e,t,r),this.username=i}}class B5 extends Kl{constructor(e,t){super(e,"facebook.com",t)}}class U5 extends QI{constructor(e,t){super(e,"github.com",t,typeof t?.login=="string"?t?.login:null)}}class j5 extends Kl{constructor(e,t){super(e,"google.com",t)}}class z5 extends QI{constructor(e,t,r){super(e,"twitter.com",t,r)}}function AW(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:F5(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TW(n,e){return Xe(n).setPersistence(e)}function H5(n,e,t,r){return Xe(n).onIdTokenChanged(e,t,r)}function W5(n,e,t){return Xe(n).beforeAuthStateChanged(e,t)}function $5(n,e,t,r){return Xe(n).onAuthStateChanged(e,t,r)}function G5(n){return Xe(n).signOut()}function CW(n,e){return Cn(n).revokeAccessToken(e)}async function IW(n){return Xe(n).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(n,e){return pn(n,"POST","/v2/accounts/mfaEnrollment:start",hn(n,e))}const lp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lp,"1"),this.storage.removeItem(lp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=1e3,K5=10;class JI extends ZI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,a,u)=>{this.notifyListeners(s,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!t&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);Wk()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,K5):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},q5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}JI.type="LOCAL";const X5=JI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS extends ZI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}eS.type="SESSION";const tS=eS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new jp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,s=this.handlersMap[i];if(!s?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async f=>f(t.origin,o)),u=await Y5(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{const f=zp("",20);i.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===f)switch(g.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(d),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return window}function Z5(n){Zt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(){return typeof Zt().WorkerGlobalScope<"u"&&typeof Zt().importScripts=="function"}async function J5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eM(){return navigator?.serviceWorker?.controller||null}function tM(){return Xv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="firebaseLocalStorageDb",nM=1,up="firebaseLocalStorage",rS="fbase_key";class kf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hp(n,e){return n.transaction([up],e?"readwrite":"readonly").objectStore(up)}function rM(){const n=indexedDB.deleteDatabase(nS);return new kf(n).toPromise()}function vg(){const n=indexedDB.open(nS,nM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(up,{keyPath:rS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(up)?e(r):(r.close(),await rM(),e(await vg()))})})}async function cE(n,e,t){const r=Hp(n,!0).put({[rS]:e,value:t});return new kf(r).toPromise()}async function iM(n,e){const t=Hp(n,!1).get(e),r=await new kf(t).toPromise();return r===void 0?null:r.value}function fE(n,e){const t=Hp(n,!0).delete(e);return new kf(t).toPromise()}const oM=800,sM=3;class iS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>sM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jp._getInstance(tM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await J5(),!this.activeServiceWorker)return;this.sender=new Q5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vg();return await cE(e,lp,"1"),await fE(e,lp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>cE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>iM(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Hp(i,!1).getAll();return new kf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iS.type="LOCAL";const aM=iS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(n,e){return pn(n,"POST","/v2/accounts/mfaSignIn:start",hn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=zI("rcb"),lM=new Of(3e4,6e4);class uM{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Zt().grecaptcha?.render}load(e,t=""){return ge(cM(t),e,"argument-error"),this.shouldResolveImmediately(t)&&J2(Zt().grecaptcha)?Promise.resolve(Zt().grecaptcha):new Promise((r,i)=>{const o=Zt().setTimeout(()=>{i(gr(e,"network-request-failed"))},lM.get());Zt()[vm]=()=>{Zt().clearTimeout(o),delete Zt()[vm];const a=Zt().grecaptcha;if(!a||!J2(a)){i(gr(e,"internal-error"));return}const u=a.render;a.render=(f,d)=>{const p=u(f,d);return this.counter++,p},this.hostLanguage=t,r(a)};const s=`${Qk()}?${pu({onload:vm,render:"explicit",hl:t})}`;qv(s).catch(()=>{clearTimeout(o),i(gr(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Zt().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function cM(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class fM{async load(e){return new n5(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc="recaptcha",dM={theme:"light",type:"image"};class SW{constructor(e,t,r={...dM}){this.parameters=r,this.type=Xc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cn(e),this.isInvisible=this.parameters.size==="invisible",ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;ge(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fM:new uM,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const o=s=>{s&&(this.tokenChangeListeners.delete(o),i(s))};this.tokenChangeListeners.add(o),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ge(!this.parameters.sitekey,this.auth,"argument-error"),ge(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Zt()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){ge(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ge(Wv()&&!Xv(),this.auth,"internal-error"),await hM(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Dk(this.auth);ge(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ge(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function hM(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Kc._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function bW(n,e,t){if(un(n.app))return Promise.reject(ir(n));const r=Cn(n),i=await sS(r,e,Xe(t));return new oS(i,o=>Bp(r,o))}async function PW(n,e,t){const r=Xe(n);await Fp(!1,r,"phone");const i=await sS(r.auth,e,Xe(t));return new oS(i,o=>D5(r,o))}async function sS(n,e,t){if(!n._getRecaptchaConfig())try{await l5(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const i=r.session;if("phoneNumber"in r){ge(i.type==="enroll",n,"internal-error");const o={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ws(n,o,"mfaSmsEnrollment",async(f,d)=>{if(d.phoneEnrollmentInfo.captchaResponse===qc){ge(t?.type===Xc,f,"argument-error");const p=await ym(f,d,t);return uE(f,p)}return uE(f,d)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneSessionInfo.sessionInfo}else{ge(i.type==="signin",n,"internal-error");const o=r.multiFactorHint?.uid||r.multiFactorUid;ge(o,n,"missing-multi-factor-info");const s={mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ws(n,s,"mfaSmsSignIn",async(d,p)=>{if(p.phoneSignInInfo.captchaResponse===qc){ge(t?.type===Xc,d,"argument-error");const g=await ym(d,p,t);return dE(d,g)}return dE(d,p)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ws(n,i,"sendVerificationCode",async(u,f)=>{if(f.captchaResponse===qc){ge(t?.type===Xc,u,"argument-error");const d=await ym(u,f,t);return aE(u,d)}return aE(u,f)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{t?._reset()}}async function ym(n,e,t){ge(t.type===Xc,n,"argument-error");const r=await t.verify();ge(typeof r=="string",n,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const o=i.phoneEnrollmentInfo.phoneNumber,s=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,u=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r,captchaResponse:s,clientType:a,recaptchaVersion:u}}),i}else if("phoneSignInInfo"in i){const o=i.phoneSignInInfo.captchaResponse,s=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:o,clientType:s,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(n,e){return e?yo(e):(ge(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv extends Mp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ql(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ql(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ql(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pM(n){return XI(n.auth,new Yv(n),n.bypassAuthState)}function mM(n){const{auth:e,user:t}=n;return ge(t,e,"internal-error"),O5(t,new Yv(n),n.bypassAuthState)}async function gM(n){const{auth:e,user:t}=n;return ge(t,e,"internal-error"),KI(t,new Yv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pM;case"linkViaPopup":case"linkViaRedirect":return gM;case"reauthViaPopup":case"reauthViaRedirect":return mM;default:Qr(this.auth,"internal-error")}}resolve(e){Eo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Eo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=new Of(2e3,1e4);async function yM(n,e,t){if(un(n.app))return Promise.reject(gr(n,"operation-not-supported-in-this-environment"));const r=Cn(n);Dp(n,e,gu);const i=Mf(r,t);return new ps(r,"signInViaPopup",e,i).executeNotNull()}async function RW(n,e,t){const r=Xe(n);Dp(r.auth,e,gu);const i=Mf(r.auth,t);return new ps(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class ps extends aS{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,ps.currentPopupAction&&ps.currentPopupAction.cancel(),ps.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){Eo(this.filter.length===1,"Popup operations only handle one event");const e=zp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ps.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vM.get())};e()}}ps.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="pendingRedirect",Fh=new Map;class _M extends aS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Fh.get(this.auth._key());if(!e){try{const r=await xM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Fh.set(this.auth._key(),e)}return this.bypassAuthState||Fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xM(n,e){const t=cS(e),r=uS(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function lS(n,e){return uS(n)._set(cS(e),"true")}function EM(n,e){Fh.set(n._key(),e)}function uS(n){return yo(n._redirectPersistence)}function cS(n){return Lh(wM,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(n,e,t){return TM(n,e,t)}async function TM(n,e,t){if(un(n.app))return Promise.reject(ir(n));const r=Cn(n);Dp(n,e,gu),await r._initializationPromise;const i=Mf(r,t);return await lS(i,r),i._openRedirect(r,e,"signInViaRedirect")}function NW(n,e,t){return CM(n,e,t)}async function CM(n,e,t){const r=Xe(n);Dp(r.auth,e,gu),await r.auth._initializationPromise;const i=Mf(r.auth,t);await Fp(!1,r,e.providerId),await lS(i,r.auth);const o=await IM(r);return i._openRedirect(r.auth,e,"linkViaRedirect",o)}async function OW(n,e){return await Cn(n)._initializationPromise,fS(n,e,!1)}async function fS(n,e,t=!1){if(un(n.app))return Promise.reject(ir(n));const r=Cn(n),i=Mf(r,e),s=await new _M(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}async function IM(n){const e=zp(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=600*1e3;class bM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!dS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(gr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SM&&this.cachedEventUids.clear(),this.cachedEventUids.has(hE(e))}saveEventToCache(e){this.cachedEventUids.add(hE(e)),this.lastProcessedEventTime=Date.now()}}function hE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function dS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function PM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RM(n,e={}){return pn(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OM=/^https?/;async function DM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await RM(n);for(const t of e)try{if(kM(t))return}catch{}Qr(n,"unauthorized-domain")}function kM(n){const e=hf(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!OM.test(t))return!1;if(NM.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=new Of(3e4,6e4);function pE(){const n=Zt().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function LM(n){return new Promise((e,t)=>{function r(){pE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pE(),t(gr(n,"network-request-failed"))},timeout:MM.get()})}if(Zt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Zt().gapi?.load)r();else{const i=zI("iframefcb");return Zt()[i]=()=>{gapi.load?r():t(gr(n,"network-request-failed"))},qv(`${Jk()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw Bh=null,e})}let Bh=null;function VM(n){return Bh=Bh||LM(n),Bh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=new Of(5e3,15e3),BM="__/auth/iframe",UM="emulator/auth/iframe",jM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HM(n){const e=n.config;ge(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$v(e,UM):`https://${n.config.authDomain}/${BM}`,r={apiKey:e.apiKey,appName:n.name,v:mu},i=zM.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${pu(r).slice(1)}`}async function WM(n){const e=await VM(n),t=Zt().gapi;return ge(t,n,"internal-error"),e.open({where:document.body,url:HM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jM,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=gr(n,"network-request-failed"),a=Zt().setTimeout(()=>{o(s)},FM.get());function u(){Zt().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GM=500,qM=600,KM="_blank",XM="http://localhost";class mE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YM(n,e,t,r=GM,i=qM){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u={...$M,width:r.toString(),height:i.toString(),top:o,left:s},f=Kn().toLowerCase();t&&(a=MI(f)?KM:t),DI(f)&&(e=e||XM,u.scrollbars="yes");const d=Object.entries(u).reduce((g,[y,E])=>`${g}${y}=${E},`,"");if(Hk(f)&&a!=="_self")return QM(e||"",a),new mE(null);const p=window.open(e||"",a,d);ge(p,n,"popup-blocked");try{p.focus()}catch{}return new mE(p)}function QM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="__/auth/handler",JM="emulator/auth/handler",e9=encodeURIComponent("fac");async function gE(n,e,t,r,i,o){ge(n.config.authDomain,n,"auth-domain-config-required"),ge(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:mu,eventId:i};if(e instanceof gu){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",dD(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))s[d]=p}if(e instanceof vu){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);const a=s;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const u=await n._getAppCheckToken(),f=u?`#${e9}=${encodeURIComponent(u)}`:"";return`${t9(n)}?${pu(a).slice(1)}${f}`}function t9({config:n}){return n.emulator?$v(n,JM):`https://${n.authDomain}/${ZM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="webStorageSupport";class n9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tS,this._completeRedirectFn=fS,this._overrideRedirectResult=EM}async _openPopup(e,t,r,i){Eo(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await gE(e,t,r,hf(),i);return YM(e,o,zp())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await gE(e,t,r,hf(),i);return Z5(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Eo(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await WM(e),r=new bM(e);return t.register("authEvent",i=>(ge(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wm,{type:wm},i=>{const o=i?.[0]?.[wm];o!==void 0&&t(!!o),Qr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=DM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return UI()||kI()||Gv()}}const r9=n9;var vE="@firebase/auth",yE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function s9(n){Jl(new ba("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ge(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jI(n)},f=new Xk(r,i,o,u);return c5(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Jl(new ba("auth-internal",e=>{const t=Cn(e.getProvider("auth").getImmediate());return(r=>new i9(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ys(vE,yE,o9(n)),ys(vE,yE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=300,l9=mI("authIdTokenMaxAge")||a9;let wE=null;const u9=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>l9)return;const i=t?.token;wE!==i&&(wE=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function c9(n=xI()){const e=jv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=u5(n,{popupRedirectResolver:r9,persistence:[aM,X5,tS]}),r=mI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=u9(o.toString());W5(t,s,()=>s(t.currentUser)),H5(t,a=>s(a))}}const i=hI("auth");return i&&f5(t,`http://${i}`),t}function f9(){return document.getElementsByTagName("head")?.[0]??document}Yk({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=gr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",f9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});s9("Browser");var d9="firebase",h9="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ys(d9,h9,"app");var _E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _s,hS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,S){function O(){}O.prototype=S.prototype,b.F=S.prototype,b.prototype=new O,b.prototype.constructor=b,b.D=function(V,L,U){for(var D=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)D[ue-2]=arguments[ue];return S.prototype[L].apply(V,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,S,O){O||(O=0);const V=Array(16);if(typeof S=="string")for(var L=0;L<16;++L)V[L]=S.charCodeAt(O++)|S.charCodeAt(O++)<<8|S.charCodeAt(O++)<<16|S.charCodeAt(O++)<<24;else for(L=0;L<16;++L)V[L]=S[O++]|S[O++]<<8|S[O++]<<16|S[O++]<<24;S=b.g[0],O=b.g[1],L=b.g[2];let U=b.g[3],D;D=S+(U^O&(L^U))+V[0]+3614090360&4294967295,S=O+(D<<7&4294967295|D>>>25),D=U+(L^S&(O^L))+V[1]+3905402710&4294967295,U=S+(D<<12&4294967295|D>>>20),D=L+(O^U&(S^O))+V[2]+606105819&4294967295,L=U+(D<<17&4294967295|D>>>15),D=O+(S^L&(U^S))+V[3]+3250441966&4294967295,O=L+(D<<22&4294967295|D>>>10),D=S+(U^O&(L^U))+V[4]+4118548399&4294967295,S=O+(D<<7&4294967295|D>>>25),D=U+(L^S&(O^L))+V[5]+1200080426&4294967295,U=S+(D<<12&4294967295|D>>>20),D=L+(O^U&(S^O))+V[6]+2821735955&4294967295,L=U+(D<<17&4294967295|D>>>15),D=O+(S^L&(U^S))+V[7]+4249261313&4294967295,O=L+(D<<22&4294967295|D>>>10),D=S+(U^O&(L^U))+V[8]+1770035416&4294967295,S=O+(D<<7&4294967295|D>>>25),D=U+(L^S&(O^L))+V[9]+2336552879&4294967295,U=S+(D<<12&4294967295|D>>>20),D=L+(O^U&(S^O))+V[10]+4294925233&4294967295,L=U+(D<<17&4294967295|D>>>15),D=O+(S^L&(U^S))+V[11]+2304563134&4294967295,O=L+(D<<22&4294967295|D>>>10),D=S+(U^O&(L^U))+V[12]+1804603682&4294967295,S=O+(D<<7&4294967295|D>>>25),D=U+(L^S&(O^L))+V[13]+4254626195&4294967295,U=S+(D<<12&4294967295|D>>>20),D=L+(O^U&(S^O))+V[14]+2792965006&4294967295,L=U+(D<<17&4294967295|D>>>15),D=O+(S^L&(U^S))+V[15]+1236535329&4294967295,O=L+(D<<22&4294967295|D>>>10),D=S+(L^U&(O^L))+V[1]+4129170786&4294967295,S=O+(D<<5&4294967295|D>>>27),D=U+(O^L&(S^O))+V[6]+3225465664&4294967295,U=S+(D<<9&4294967295|D>>>23),D=L+(S^O&(U^S))+V[11]+643717713&4294967295,L=U+(D<<14&4294967295|D>>>18),D=O+(U^S&(L^U))+V[0]+3921069994&4294967295,O=L+(D<<20&4294967295|D>>>12),D=S+(L^U&(O^L))+V[5]+3593408605&4294967295,S=O+(D<<5&4294967295|D>>>27),D=U+(O^L&(S^O))+V[10]+38016083&4294967295,U=S+(D<<9&4294967295|D>>>23),D=L+(S^O&(U^S))+V[15]+3634488961&4294967295,L=U+(D<<14&4294967295|D>>>18),D=O+(U^S&(L^U))+V[4]+3889429448&4294967295,O=L+(D<<20&4294967295|D>>>12),D=S+(L^U&(O^L))+V[9]+568446438&4294967295,S=O+(D<<5&4294967295|D>>>27),D=U+(O^L&(S^O))+V[14]+3275163606&4294967295,U=S+(D<<9&4294967295|D>>>23),D=L+(S^O&(U^S))+V[3]+4107603335&4294967295,L=U+(D<<14&4294967295|D>>>18),D=O+(U^S&(L^U))+V[8]+1163531501&4294967295,O=L+(D<<20&4294967295|D>>>12),D=S+(L^U&(O^L))+V[13]+2850285829&4294967295,S=O+(D<<5&4294967295|D>>>27),D=U+(O^L&(S^O))+V[2]+4243563512&4294967295,U=S+(D<<9&4294967295|D>>>23),D=L+(S^O&(U^S))+V[7]+1735328473&4294967295,L=U+(D<<14&4294967295|D>>>18),D=O+(U^S&(L^U))+V[12]+2368359562&4294967295,O=L+(D<<20&4294967295|D>>>12),D=S+(O^L^U)+V[5]+4294588738&4294967295,S=O+(D<<4&4294967295|D>>>28),D=U+(S^O^L)+V[8]+2272392833&4294967295,U=S+(D<<11&4294967295|D>>>21),D=L+(U^S^O)+V[11]+1839030562&4294967295,L=U+(D<<16&4294967295|D>>>16),D=O+(L^U^S)+V[14]+4259657740&4294967295,O=L+(D<<23&4294967295|D>>>9),D=S+(O^L^U)+V[1]+2763975236&4294967295,S=O+(D<<4&4294967295|D>>>28),D=U+(S^O^L)+V[4]+1272893353&4294967295,U=S+(D<<11&4294967295|D>>>21),D=L+(U^S^O)+V[7]+4139469664&4294967295,L=U+(D<<16&4294967295|D>>>16),D=O+(L^U^S)+V[10]+3200236656&4294967295,O=L+(D<<23&4294967295|D>>>9),D=S+(O^L^U)+V[13]+681279174&4294967295,S=O+(D<<4&4294967295|D>>>28),D=U+(S^O^L)+V[0]+3936430074&4294967295,U=S+(D<<11&4294967295|D>>>21),D=L+(U^S^O)+V[3]+3572445317&4294967295,L=U+(D<<16&4294967295|D>>>16),D=O+(L^U^S)+V[6]+76029189&4294967295,O=L+(D<<23&4294967295|D>>>9),D=S+(O^L^U)+V[9]+3654602809&4294967295,S=O+(D<<4&4294967295|D>>>28),D=U+(S^O^L)+V[12]+3873151461&4294967295,U=S+(D<<11&4294967295|D>>>21),D=L+(U^S^O)+V[15]+530742520&4294967295,L=U+(D<<16&4294967295|D>>>16),D=O+(L^U^S)+V[2]+3299628645&4294967295,O=L+(D<<23&4294967295|D>>>9),D=S+(L^(O|~U))+V[0]+4096336452&4294967295,S=O+(D<<6&4294967295|D>>>26),D=U+(O^(S|~L))+V[7]+1126891415&4294967295,U=S+(D<<10&4294967295|D>>>22),D=L+(S^(U|~O))+V[14]+2878612391&4294967295,L=U+(D<<15&4294967295|D>>>17),D=O+(U^(L|~S))+V[5]+4237533241&4294967295,O=L+(D<<21&4294967295|D>>>11),D=S+(L^(O|~U))+V[12]+1700485571&4294967295,S=O+(D<<6&4294967295|D>>>26),D=U+(O^(S|~L))+V[3]+2399980690&4294967295,U=S+(D<<10&4294967295|D>>>22),D=L+(S^(U|~O))+V[10]+4293915773&4294967295,L=U+(D<<15&4294967295|D>>>17),D=O+(U^(L|~S))+V[1]+2240044497&4294967295,O=L+(D<<21&4294967295|D>>>11),D=S+(L^(O|~U))+V[8]+1873313359&4294967295,S=O+(D<<6&4294967295|D>>>26),D=U+(O^(S|~L))+V[15]+4264355552&4294967295,U=S+(D<<10&4294967295|D>>>22),D=L+(S^(U|~O))+V[6]+2734768916&4294967295,L=U+(D<<15&4294967295|D>>>17),D=O+(U^(L|~S))+V[13]+1309151649&4294967295,O=L+(D<<21&4294967295|D>>>11),D=S+(L^(O|~U))+V[4]+4149444226&4294967295,S=O+(D<<6&4294967295|D>>>26),D=U+(O^(S|~L))+V[11]+3174756917&4294967295,U=S+(D<<10&4294967295|D>>>22),D=L+(S^(U|~O))+V[2]+718787259&4294967295,L=U+(D<<15&4294967295|D>>>17),D=O+(U^(L|~S))+V[9]+3951481745&4294967295,b.g[0]=b.g[0]+S&4294967295,b.g[1]=b.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,b.g[2]=b.g[2]+L&4294967295,b.g[3]=b.g[3]+U&4294967295}r.prototype.v=function(b,S){S===void 0&&(S=b.length);const O=S-this.blockSize,V=this.C;let L=this.h,U=0;for(;U<S;){if(L==0)for(;U<=O;)i(this,b,U),U+=this.blockSize;if(typeof b=="string"){for(;U<S;)if(V[L++]=b.charCodeAt(U++),L==this.blockSize){i(this,V),L=0;break}}else for(;U<S;)if(V[L++]=b[U++],L==this.blockSize){i(this,V),L=0;break}}this.h=L,this.o+=S},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var S=1;S<b.length-8;++S)b[S]=0;S=this.o*8;for(var O=b.length-8;O<b.length;++O)b[O]=S&255,S/=256;for(this.v(b),b=Array(16),S=0,O=0;O<4;++O)for(let V=0;V<32;V+=8)b[S++]=this.g[O]>>>V&255;return b};function o(b,S){var O=a;return Object.prototype.hasOwnProperty.call(O,b)?O[b]:O[b]=S(b)}function s(b,S){this.h=S;const O=[];let V=!0;for(let L=b.length-1;L>=0;L--){const U=b[L]|0;V&&U==S||(O[L]=U,V=!1)}this.g=O}var a={};function u(b){return-128<=b&&b<128?o(b,function(S){return new s([S|0],S<0?-1:0)}):new s([b|0],b<0?-1:0)}function f(b){if(isNaN(b)||!isFinite(b))return p;if(b<0)return I(f(-b));const S=[];let O=1;for(let V=0;b>=O;V++)S[V]=b/O|0,O*=4294967296;return new s(S,0)}function d(b,S){if(b.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(b.charAt(0)=="-")return I(d(b.substring(1),S));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=f(Math.pow(S,8));let V=p;for(let U=0;U<b.length;U+=8){var L=Math.min(8,b.length-U);const D=parseInt(b.substring(U,U+L),S);L<8?(L=f(Math.pow(S,L)),V=V.j(L).add(f(D))):(V=V.j(O),V=V.add(f(D)))}return V}var p=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(A(this))return-I(this).m();let b=0,S=1;for(let O=0;O<this.g.length;O++){const V=this.i(O);b+=(V>=0?V:4294967296+V)*S,S*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(E(this))return"0";if(A(this))return"-"+I(this).toString(b);const S=f(Math.pow(b,6));var O=this;let V="";for(;;){const L=j(O,S).g;O=N(O,L.j(S));let U=((O.g.length>0?O.g[0]:O.h)>>>0).toString(b);if(O=L,E(O))return U+V;for(;U.length<6;)U="0"+U;V=U+V}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function E(b){if(b.h!=0)return!1;for(let S=0;S<b.g.length;S++)if(b.g[S]!=0)return!1;return!0}function A(b){return b.h==-1}n.l=function(b){return b=N(this,b),A(b)?-1:E(b)?0:1};function I(b){const S=b.g.length,O=[];for(let V=0;V<S;V++)O[V]=~b.g[V];return new s(O,~b.h).add(g)}n.abs=function(){return A(this)?I(this):this},n.add=function(b){const S=Math.max(this.g.length,b.g.length),O=[];let V=0;for(let L=0;L<=S;L++){let U=V+(this.i(L)&65535)+(b.i(L)&65535),D=(U>>>16)+(this.i(L)>>>16)+(b.i(L)>>>16);V=D>>>16,U&=65535,D&=65535,O[L]=D<<16|U}return new s(O,O[O.length-1]&-2147483648?-1:0)};function N(b,S){return b.add(I(S))}n.j=function(b){if(E(this)||E(b))return p;if(A(this))return A(b)?I(this).j(I(b)):I(I(this).j(b));if(A(b))return I(this.j(I(b)));if(this.l(y)<0&&b.l(y)<0)return f(this.m()*b.m());const S=this.g.length+b.g.length,O=[];for(var V=0;V<2*S;V++)O[V]=0;for(V=0;V<this.g.length;V++)for(let L=0;L<b.g.length;L++){const U=this.i(V)>>>16,D=this.i(V)&65535,ue=b.i(L)>>>16,le=b.i(L)&65535;O[2*V+2*L]+=D*le,R(O,2*V+2*L),O[2*V+2*L+1]+=U*le,R(O,2*V+2*L+1),O[2*V+2*L+1]+=D*ue,R(O,2*V+2*L+1),O[2*V+2*L+2]+=U*ue,R(O,2*V+2*L+2)}for(b=0;b<S;b++)O[b]=O[2*b+1]<<16|O[2*b];for(b=S;b<2*S;b++)O[b]=0;return new s(O,0)};function R(b,S){for(;(b[S]&65535)!=b[S];)b[S+1]+=b[S]>>>16,b[S]&=65535,S++}function k(b,S){this.g=b,this.h=S}function j(b,S){if(E(S))throw Error("division by zero");if(E(b))return new k(p,p);if(A(b))return S=j(I(b),S),new k(I(S.g),I(S.h));if(A(S))return S=j(b,I(S)),new k(I(S.g),S.h);if(b.g.length>30){if(A(b)||A(S))throw Error("slowDivide_ only works with positive integers.");for(var O=g,V=S;V.l(b)<=0;)O=H(O),V=H(V);var L=$(O,1),U=$(V,1);for(V=$(V,2),O=$(O,2);!E(V);){var D=U.add(V);D.l(b)<=0&&(L=L.add(O),U=D),V=$(V,1),O=$(O,1)}return S=N(b,L.j(S)),new k(L,S)}for(L=p;b.l(S)>=0;){for(O=Math.max(1,Math.floor(b.m()/S.m())),V=Math.ceil(Math.log(O)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),U=f(O),D=U.j(S);A(D)||D.l(b)>0;)O-=V,U=f(O),D=U.j(S);E(U)&&(U=g),L=L.add(U),b=N(b,D)}return new k(L,b)}n.B=function(b){return j(this,b).h},n.and=function(b){const S=Math.max(this.g.length,b.g.length),O=[];for(let V=0;V<S;V++)O[V]=this.i(V)&b.i(V);return new s(O,this.h&b.h)},n.or=function(b){const S=Math.max(this.g.length,b.g.length),O=[];for(let V=0;V<S;V++)O[V]=this.i(V)|b.i(V);return new s(O,this.h|b.h)},n.xor=function(b){const S=Math.max(this.g.length,b.g.length),O=[];for(let V=0;V<S;V++)O[V]=this.i(V)^b.i(V);return new s(O,this.h^b.h)};function H(b){const S=b.g.length+1,O=[];for(let V=0;V<S;V++)O[V]=b.i(V)<<1|b.i(V-1)>>>31;return new s(O,b.h)}function $(b,S){const O=S>>5;S%=32;const V=b.g.length-O,L=[];for(let U=0;U<V;U++)L[U]=S>0?b.i(U+O)>>>S|b.i(U+O+1)<<32-S:b.i(U+O);return new s(L,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,hS=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=d,_s=s}).apply(typeof _E<"u"?_E:typeof self<"u"?self:typeof window<"u"?window:{});var gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pS,Oc,mS,Uh,yg,gS,vS,yS;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof gh=="object"&&gh];for(var x=0;x<m.length;++x){var C=m[x];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=t(this);function i(m,x){if(x)e:{var C=r;m=m.split(".");for(var M=0;M<m.length-1;M++){var X=m[M];if(!(X in C))break e;C=C[X]}m=m[m.length-1],M=C[m],x=x(M),x!=M&&x!=null&&e(C,m,{configurable:!0,writable:!0,value:x})}}i("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(m){return m||function(x){var C=[],M;for(M in x)Object.prototype.hasOwnProperty.call(x,M)&&C.push([M,x[M]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function a(m){var x=typeof m;return x=="object"&&m!=null||x=="function"}function u(m,x,C){return m.call.apply(m.bind,arguments)}function f(m,x,C){return f=u,f.apply(null,arguments)}function d(m,x){var C=Array.prototype.slice.call(arguments,1);return function(){var M=C.slice();return M.push.apply(M,arguments),m.apply(this,M)}}function p(m,x){function C(){}C.prototype=x.prototype,m.Z=x.prototype,m.prototype=new C,m.prototype.constructor=m,m.Ob=function(M,X,ee){for(var de=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)de[$e-2]=arguments[$e];return x.prototype[X].apply(M,de)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function y(m){const x=m.length;if(x>0){const C=Array(x);for(let M=0;M<x;M++)C[M]=m[M];return C}return[]}function E(m,x){for(let M=1;M<arguments.length;M++){const X=arguments[M];var C=typeof X;if(C=C!="object"?C:X?Array.isArray(X)?"array":C:"null",C=="array"||C=="object"&&typeof X.length=="number"){C=m.length||0;const ee=X.length||0;m.length=C+ee;for(let de=0;de<ee;de++)m[C+de]=X[de]}else m.push(X)}}class A{constructor(x,C){this.i=x,this.j=C,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function I(m){s.setTimeout(()=>{throw m},0)}function N(){var m=b;let x=null;return m.g&&(x=m.g,m.g=m.g.next,m.g||(m.h=null),x.next=null),x}class R{constructor(){this.h=this.g=null}add(x,C){const M=k.get();M.set(x,C),this.h?this.h.next=M:this.g=M,this.h=M}}var k=new A(()=>new j,m=>m.reset());class j{constructor(){this.next=this.g=this.h=null}set(x,C){this.h=x,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let H,$=!1,b=new R,S=()=>{const m=Promise.resolve(void 0);H=()=>{m.then(O)}};function O(){for(var m;m=N();){try{m.h.call(m.g)}catch(C){I(C)}var x=k;x.j(m),x.h<100&&(x.h++,m.next=x.g,x.g=m)}$=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(m,x){this.type=m,this.g=this.target=x,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var m=!1,x=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};s.addEventListener("test",C,x),s.removeEventListener("test",C,x)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function ue(m,x){L.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,x)}p(ue,L),ue.prototype.init=function(m,x){const C=this.type=m.type,M=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=x,x=m.relatedTarget,x||(C=="mouseover"?x=m.fromElement:C=="mouseout"&&(x=m.toElement)),this.relatedTarget=x,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&ue.Z.h.call(this)},ue.prototype.h=function(){ue.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var le="closure_listenable_"+(Math.random()*1e6|0),Ue=0;function Ie(m,x,C,M,X){this.listener=m,this.proxy=null,this.src=x,this.type=C,this.capture=!!M,this.ha=X,this.key=++Ue,this.da=this.fa=!1}function Z(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ve(m,x,C){for(const M in m)x.call(C,m[M],M,m)}function pe(m,x){for(const C in m)x.call(void 0,m[C],C,m)}function q(m){const x={};for(const C in m)x[C]=m[C];return x}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ee(m,x){let C,M;for(let X=1;X<arguments.length;X++){M=arguments[X];for(C in M)m[C]=M[C];for(let ee=0;ee<ie.length;ee++)C=ie[ee],Object.prototype.hasOwnProperty.call(M,C)&&(m[C]=M[C])}}function Pe(m){this.src=m,this.g={},this.h=0}Pe.prototype.add=function(m,x,C,M,X){const ee=m.toString();m=this.g[ee],m||(m=this.g[ee]=[],this.h++);const de=Ge(m,x,M,X);return de>-1?(x=m[de],C||(x.fa=!1)):(x=new Ie(x,this.src,ee,!!M,X),x.fa=C,m.push(x)),x};function We(m,x){const C=x.type;if(C in m.g){var M=m.g[C],X=Array.prototype.indexOf.call(M,x,void 0),ee;(ee=X>=0)&&Array.prototype.splice.call(M,X,1),ee&&(Z(x),m.g[C].length==0&&(delete m.g[C],m.h--))}}function Ge(m,x,C,M){for(let X=0;X<m.length;++X){const ee=m[X];if(!ee.da&&ee.listener==x&&ee.capture==!!C&&ee.ha==M)return X}return-1}var Ve="closure_lm_"+(Math.random()*1e6|0),ne={};function ye(m,x,C,M,X){if(Array.isArray(x)){for(let ee=0;ee<x.length;ee++)ye(m,x[ee],C,M,X);return null}return C=Iu(C),m&&m[le]?m.J(x,C,a(M)?!!M.capture:!1,X):He(m,x,C,!1,M,X)}function He(m,x,C,M,X,ee){if(!x)throw Error("Invalid event type");const de=a(X)?!!X.capture:!!X;let $e=Ua(m);if($e||(m[Ve]=$e=new Pe(m)),C=$e.add(x,C,M,de,ee),C.proxy)return C;if(M=bt(),C.proxy=M,M.src=m,M.listener=C,m.addEventListener)U||(X=de),X===void 0&&(X=!1),m.addEventListener(x.toString(),M,X);else if(m.attachEvent)m.attachEvent(Ba(x.toString()),M);else if(m.addListener&&m.removeListener)m.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return C}function bt(){function m(C){return x.call(m.src,m.listener,C)}const x=Kf;return m}function Pt(m,x,C,M,X){if(Array.isArray(x))for(var ee=0;ee<x.length;ee++)Pt(m,x[ee],C,M,X);else M=a(M)?!!M.capture:!!M,C=Iu(C),m&&m[le]?(m=m.i,ee=String(x).toString(),ee in m.g&&(x=m.g[ee],C=Ge(x,C,M,X),C>-1&&(Z(x[C]),Array.prototype.splice.call(x,C,1),x.length==0&&(delete m.g[ee],m.h--)))):m&&(m=Ua(m))&&(x=m.g[x.toString()],m=-1,x&&(m=Ge(x,C,M,X)),(C=m>-1?x[m]:null)&&kr(C))}function kr(m){if(typeof m!="number"&&m&&!m.da){var x=m.src;if(x&&x[le])We(x.i,m);else{var C=m.type,M=m.proxy;x.removeEventListener?x.removeEventListener(C,M,m.capture):x.detachEvent?x.detachEvent(Ba(C),M):x.addListener&&x.removeListener&&x.removeListener(M),(C=Ua(x))?(We(C,m),C.h==0&&(C.src=null,x[Ve]=null)):Z(m)}}}function Ba(m){return m in ne?ne[m]:ne[m]="on"+m}function Kf(m,x){if(m.da)m=!0;else{x=new ue(x,this);const C=m.listener,M=m.ha||m.src;m.fa&&kr(m),m=C.call(M,x)}return m}function Ua(m){return m=m[Ve],m instanceof Pe?m:null}var Fs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Iu(m){return typeof m=="function"?m:(m[Fs]||(m[Fs]=function(x){return m.handleEvent(x)}),m[Fs])}function qt(){V.call(this),this.i=new Pe(this),this.M=this,this.G=null}p(qt,V),qt.prototype[le]=!0,qt.prototype.removeEventListener=function(m,x,C,M){Pt(this,m,x,C,M)};function zt(m,x){var C,M=m.G;if(M)for(C=[];M;M=M.G)C.push(M);if(m=m.M,M=x.type||x,typeof x=="string")x=new L(x,m);else if(x instanceof L)x.target=x.target||m;else{var X=x;x=new L(M,m),Ee(x,X)}X=!0;let ee,de;if(C)for(de=C.length-1;de>=0;de--)ee=x.g=C[de],X=Zr(ee,M,!0,x)&&X;if(ee=x.g=m,X=Zr(ee,M,!0,x)&&X,X=Zr(ee,M,!1,x)&&X,C)for(de=0;de<C.length;de++)ee=x.g=C[de],X=Zr(ee,M,!1,x)&&X}qt.prototype.N=function(){if(qt.Z.N.call(this),this.i){var m=this.i;for(const x in m.g){const C=m.g[x];for(let M=0;M<C.length;M++)Z(C[M]);delete m.g[x],m.h--}}this.G=null},qt.prototype.J=function(m,x,C,M){return this.i.add(String(m),x,!1,C,M)},qt.prototype.K=function(m,x,C,M){return this.i.add(String(m),x,!0,C,M)};function Zr(m,x,C,M){if(x=m.i.g[String(x)],!x)return!0;x=x.concat();let X=!0;for(let ee=0;ee<x.length;++ee){const de=x[ee];if(de&&!de.da&&de.capture==C){const $e=de.listener,Ht=de.ha||de.src;de.fa&&We(m.i,de),X=$e.call(Ht,M)!==!1&&X}}return X&&!M.defaultPrevented}function Su(m,x){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:s.setTimeout(m,x||0)}function bu(m){m.g=Su(()=>{m.g=null,m.i&&(m.i=!1,bu(m))},m.l);const x=m.h;m.h=null,m.m.apply(null,x)}class Xf extends V{constructor(x,C){super(),this.m=x,this.l=C,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:bu(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ro(m){V.call(this),this.h=m,this.g={}}p(Ro,V);var Pu=[];function ja(m){ve(m.g,function(x,C){this.g.hasOwnProperty(C)&&kr(x)},m),m.g={}}Ro.prototype.N=function(){Ro.Z.N.call(this),ja(this)},Ro.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var No=s.JSON.stringify,Yf=s.JSON.parse,Bs=class{stringify(m){return s.JSON.stringify(m,void 0)}parse(m){return s.JSON.parse(m,void 0)}};function Oo(){}function Qf(){}var Do={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function za(){L.call(this,"d")}p(za,L);function Ru(){L.call(this,"c")}p(Ru,L);var Jr={},Ha=null;function ko(){return Ha=Ha||new qt}Jr.Ia="serverreachability";function Wa(m){L.call(this,Jr.Ia,m)}p(Wa,L);function Qi(m){const x=ko();zt(x,new Wa(x))}Jr.STAT_EVENT="statevent";function Zi(m,x){L.call(this,Jr.STAT_EVENT,m),this.stat=x}p(Zi,L);function Vt(m){const x=ko();zt(x,new Zi(x,m))}Jr.Ja="timingevent";function Nu(m,x){L.call(this,Jr.Ja,m),this.size=x}p(Nu,L);function Mo(m,x){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){m()},x)}function Lo(){this.g=!0}Lo.prototype.ua=function(){this.g=!1};function Zf(m,x,C,M,X,ee){m.info(function(){if(m.g)if(ee){var de="",$e=ee.split("&");for(let ht=0;ht<$e.length;ht++){var Ht=$e[ht].split("=");if(Ht.length>1){const Kt=Ht[0];Ht=Ht[1];const Tr=Kt.split("_");de=Tr.length>=2&&Tr[1]=="type"?de+(Kt+"="+Ht+"&"):de+(Kt+"=redacted&")}}}else de=null;else de=ee;return"XMLHTTP REQ ("+M+") [attempt "+X+"]: "+x+`
`+C+`
`+de})}function Jf(m,x,C,M,X,ee,de){m.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+X+"]: "+x+`
`+C+`
`+ee+" "+de})}function yi(m,x,C,M){m.info(function(){return"XMLHTTP TEXT ("+x+"): "+Us(m,C)+(M?" "+M:"")})}function ed(m,x){m.info(function(){return"TIMEOUT: "+x})}Lo.prototype.info=function(){};function Us(m,x){if(!m.g)return x;if(!x)return null;try{const ee=JSON.parse(x);if(ee){for(m=0;m<ee.length;m++)if(Array.isArray(ee[m])){var C=ee[m];if(!(C.length<2)){var M=C[1];if(Array.isArray(M)&&!(M.length<1)){var X=M[0];if(X!="noop"&&X!="stop"&&X!="close")for(let de=1;de<M.length;de++)M[de]=""}}}}return No(ee)}catch{return x}}var Vo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},td;function Ji(){}p(Ji,Oo),Ji.prototype.g=function(){return new XMLHttpRequest},td=new Ji;function wi(m){return encodeURIComponent(String(m))}function $a(m){var x=1;m=m.split(":");const C=[];for(;x>0&&m.length;)C.push(m.shift()),x--;return m.length&&C.push(m.join(":")),C}function Mr(m,x,C,M){this.j=m,this.i=x,this.l=C,this.S=M||1,this.V=new Ro(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new nd}function nd(){this.i=null,this.g="",this.h=!1}var rd={},Ou={};function ei(m,x,C){m.M=1,m.A=to(Lr(x)),m.u=C,m.R=!0,Du(m,null)}function Du(m,x){m.F=Date.now(),js(m),m.B=Lr(m.A);var C=m.B,M=m.S;Array.isArray(M)||(M=[String(M)]),Hu(C.i,"t",M),m.C=0,C=m.j.L,m.h=new nd,m.g=hd(m.j,C?x:null,!m.u),m.P>0&&(m.O=new Xf(f(m.Y,m,m.g),m.P)),x=m.V,C=m.g,M=m.ba;var X="readystatechange";Array.isArray(X)||(X&&(Pu[0]=X.toString()),X=Pu);for(let ee=0;ee<X.length;ee++){const de=ye(C,X[ee],M||x.handleEvent,!1,x.h||x);if(!de)break;x.g[de.key]=de}x=m.J?q(m.J):{},m.u?(m.v||(m.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,x)):(m.v="GET",m.g.ea(m.B,m.v,null,x)),Qi(),Zf(m.i,m.v,m.B,m.l,m.S,m.u)}Mr.prototype.ba=function(m){m=m.target;const x=this.O;x&&Ii(m)==3?x.j():this.Y(m)},Mr.prototype.Y=function(m){try{if(m==this.g)e:{const $e=Ii(this.g),Ht=this.g.ya(),ht=this.g.ca();if(!($e<3)&&($e!=3||this.g&&(this.h.h||this.g.la()||fd(this.g)))){this.K||$e!=4||Ht==7||(Ht==8||ht<=0?Qi(3):Qi(2)),Ga(this);var x=this.g.ca();this.X=x;var C=id(this);if(this.o=x==200,Jf(this.i,this.v,this.B,this.l,this.S,$e,x),this.o){if(this.U&&!this.L){t:{if(this.g){var M,X=this.g;if((M=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(M)){var ee=M;break t}}ee=null}if(m=ee)yi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Et(this,m);else{this.o=!1,this.m=3,Vt(12),eo(this),zs(this);break e}}if(this.R){m=!0;let Kt;for(;!this.K&&this.C<C.length;)if(Kt=sd(this,C),Kt==Ou){$e==4&&(this.m=4,Vt(14),m=!1),yi(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==rd){this.m=4,Vt(15),yi(this.i,this.l,C,"[Invalid Chunk]"),m=!1;break}else yi(this.i,this.l,Kt,null),Et(this,Kt);if(od(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||C.length!=0||this.h.h||(this.m=1,Vt(16),m=!1),this.o=this.o&&m,!m)yi(this.i,this.l,C,"[Invalid Chunked Response]"),eo(this),zs(this);else if(C.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Qs(de),de.P=!0,Vt(11))}}else yi(this.i,this.l,C,null),Et(this,C);$e==4&&eo(this),this.o&&!this.K&&($e==4?nl(this.j,this):(this.o=!1,js(this)))}else $u(this.g),x==400&&C.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),eo(this),zs(this)}}}catch{}finally{}};function id(m){if(!od(m))return m.g.la();const x=fd(m.g);if(x==="")return"";let C="";const M=x.length,X=Ii(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return eo(m),zs(m),"";m.h.i=new s.TextDecoder}for(let ee=0;ee<M;ee++)m.h.h=!0,C+=m.h.i.decode(x[ee],{stream:!(X&&ee==M-1)});return x.length=0,m.h.g+=C,m.C=0,m.h.g}function od(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function sd(m,x){var C=m.C,M=x.indexOf(`
`,C);return M==-1?Ou:(C=Number(x.substring(C,M)),isNaN(C)?rd:(M+=1,M+C>x.length?Ou:(x=x.slice(M,M+C),m.C=M+C,x)))}Mr.prototype.cancel=function(){this.K=!0,eo(this)};function js(m){m.T=Date.now()+m.H,ku(m,m.H)}function ku(m,x){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Mo(f(m.aa,m),x)}function Ga(m){m.D&&(s.clearTimeout(m.D),m.D=null)}Mr.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(ed(this.i,this.B),this.M!=2&&(Qi(),Vt(17)),eo(this),this.m=2,zs(this)):ku(this,this.T-m)};function zs(m){m.j.I==0||m.K||nl(m.j,m)}function eo(m){Ga(m);var x=m.O;x&&typeof x.dispose=="function"&&x.dispose(),m.O=null,ja(m.V),m.g&&(x=m.g,m.g=null,x.abort(),x.dispose())}function Et(m,x){try{var C=m.j;if(C.I!=0&&(C.g==m||Lu(C.h,m))){if(!m.L&&Lu(C.h,m)&&C.I==3){try{var M=C.Ba.g.parse(x)}catch{M=null}if(Array.isArray(M)&&M.length==3){var X=M;if(X[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<m.F)tl(C),Er(C);else break e;Pi(C),Vt(18)}}else C.xa=X[1],0<C.xa-C.K&&X[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=Mo(f(C.Va,C),6e3));Hs(C.h)<=1&&C.ta&&(C.ta=void 0)}else Ar(C,11)}else if((m.L||C.g==m)&&tl(C),!D(x))for(X=C.Ba.g.parse(x),x=0;x<X.length;x++){let ht=X[x];const Kt=ht[0];if(!(Kt<=C.K))if(C.K=Kt,ht=ht[1],C.I==2)if(ht[0]=="c"){C.M=ht[1],C.ba=ht[2];const Tr=ht[3];Tr!=null&&(C.ka=Tr,C.j.info("VER="+C.ka));const so=ht[4];so!=null&&(C.za=so,C.j.info("SVER="+C.za));const Ri=ht[5];Ri!=null&&typeof Ri=="number"&&Ri>0&&(M=1.5*Ri,C.O=M,C.j.info("backChannelRequestTimeoutMs_="+M)),M=C;const Ni=m.g;if(Ni){const ol=Ni.g?Ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ol){var ee=M.h;ee.g||ol.indexOf("spdy")==-1&&ol.indexOf("quic")==-1&&ol.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Ka(ee,ee.h),ee.h=null))}if(M.G){const Ku=Ni.g?Ni.g.getResponseHeader("X-HTTP-Session-Id"):null;Ku&&(M.wa=Ku,ut(M.J,M.G,Ku))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-m.F,C.j.info("Handshake RTT: "+C.T+"ms")),M=C;var de=m;if(M.na=qu(M,M.L?M.ba:null,M.W),de.L){Ws(M.h,de);var $e=de,Ht=M.O;Ht&&($e.H=Ht),$e.D&&(Ga($e),js($e)),M.g=de}else Fn(M);C.i.length>0&&oo(C)}else ht[0]!="stop"&&ht[0]!="close"||Ar(C,7);else C.I==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?Ar(C,7):Ja(C):ht[0]!="noop"&&C.l&&C.l.qa(ht),C.A=0)}}Qi(4)}catch{}}var m0=class{constructor(m,x){this.g=m,this.map=x}};function qa(m){this.l=m||10,s.PerformanceNavigationTiming?(m=s.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Mu(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Hs(m){return m.h?1:m.g?m.g.size:0}function Lu(m,x){return m.h?m.h==x:m.g?m.g.has(x):!1}function Ka(m,x){m.g?m.g.add(x):m.h=x}function Ws(m,x){m.h&&m.h==x?m.h=null:m.g&&m.g.has(x)&&m.g.delete(x)}qa.prototype.cancel=function(){if(this.i=wr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function wr(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let x=m.i;for(const C of m.g.values())x=x.concat(C.G);return x}return y(m.i)}var ad=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _r(m,x){if(m){m=m.split("&");for(let C=0;C<m.length;C++){const M=m[C].indexOf("=");let X,ee=null;M>=0?(X=m[C].substring(0,M),ee=m[C].substring(M+1)):X=m[C],x(X,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function _i(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;m instanceof _i?(this.l=m.l,$s(this,m.j),this.o=m.o,this.g=m.g,xi(this,m.u),this.h=m.h,Bo(this,Wu(m.i)),this.m=m.m):m&&(x=String(m).match(ad))?(this.l=!1,$s(this,x[1]||"",!0),this.o=Gs(x[2]||""),this.g=Gs(x[3]||"",!0),xi(this,x[4]),this.h=Gs(x[5]||"",!0),Bo(this,x[6]||"",!0),this.m=Gs(x[7]||"")):(this.l=!1,this.i=new tt(null,this.l))}_i.prototype.toString=function(){const m=[];var x=this.j;x&&m.push(qs(x,Fu,!0),":");var C=this.g;return(C||x=="file")&&(m.push("//"),(x=this.o)&&m.push(qs(x,Fu,!0),"@"),m.push(wi(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&m.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(qs(C,C.charAt(0)=="/"?Ks:Bu,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",qs(C,Uu)),m.join("")},_i.prototype.resolve=function(m){const x=Lr(this);let C=!!m.j;C?$s(x,m.j):C=!!m.o,C?x.o=m.o:C=!!m.g,C?x.g=m.g:C=m.u!=null;var M=m.h;if(C)xi(x,m.u);else if(C=!!m.h){if(M.charAt(0)!="/")if(this.g&&!this.h)M="/"+M;else{var X=x.h.lastIndexOf("/");X!=-1&&(M=x.h.slice(0,X+1)+M)}if(X=M,X==".."||X==".")M="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){M=X.lastIndexOf("/",0)==0,X=X.split("/");const ee=[];for(let de=0;de<X.length;){const $e=X[de++];$e=="."?M&&de==X.length&&ee.push(""):$e==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),M&&de==X.length&&ee.push("")):(ee.push($e),M=!0)}M=ee.join("/")}else M=X}return C?x.h=M:C=m.i.toString()!=="",C?Bo(x,Wu(m.i)):C=!!m.m,C&&(x.m=m.m),x};function Lr(m){return new _i(m)}function $s(m,x,C){m.j=C?Gs(x,!0):x,m.j&&(m.j=m.j.replace(/:$/,""))}function xi(m,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);m.u=x}else m.u=null}function Bo(m,x,C){x instanceof tt?(m.i=x,Ya(m.i,m.l)):(C||(x=qs(x,g0)),m.i=new tt(x,m.l))}function ut(m,x,C){m.i.set(x,C)}function to(m){return ut(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Gs(m,x){return m?x?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function qs(m,x,C){return typeof m=="string"?(m=encodeURI(m).replace(x,Vu),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Vu(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Fu=/[#\/\?@]/g,Bu=/[#\?:]/g,Ks=/[#\?]/g,g0=/[#\?@]/g,Uu=/#/g;function tt(m,x){this.h=this.g=null,this.i=m||null,this.j=!!x}function Ei(m){m.g||(m.g=new Map,m.h=0,m.i&&_r(m.i,function(x,C){m.add(decodeURIComponent(x.replace(/\+/g," ")),C)}))}n=tt.prototype,n.add=function(m,x){Ei(this),this.i=null,m=Ai(this,m);let C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(x),this.h+=1,this};function ju(m,x){Ei(m),x=Ai(m,x),m.g.has(x)&&(m.i=null,m.h-=m.g.get(x).length,m.g.delete(x))}function Xa(m,x){return Ei(m),x=Ai(m,x),m.g.has(x)}n.forEach=function(m,x){Ei(this),this.g.forEach(function(C,M){C.forEach(function(X){m.call(x,X,M,this)},this)},this)};function zu(m,x){Ei(m);let C=[];if(typeof x=="string")Xa(m,x)&&(C=C.concat(m.g.get(Ai(m,x))));else for(m=Array.from(m.g.values()),x=0;x<m.length;x++)C=C.concat(m[x]);return C}n.set=function(m,x){return Ei(this),this.i=null,m=Ai(this,m),Xa(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[x]),this.h+=1,this},n.get=function(m,x){return m?(m=zu(this,m),m.length>0?String(m[0]):x):x};function Hu(m,x,C){ju(m,x),C.length>0&&(m.i=null,m.g.set(Ai(m,x),y(C)),m.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],x=Array.from(this.g.keys());for(let M=0;M<x.length;M++){var C=x[M];const X=wi(C);C=zu(this,C);for(let ee=0;ee<C.length;ee++){let de=X;C[ee]!==""&&(de+="="+wi(C[ee])),m.push(de)}}return this.i=m.join("&")};function Wu(m){const x=new tt;return x.i=m.i,m.g&&(x.g=new Map(m.g),x.h=m.h),x}function Ai(m,x){return x=String(x),m.j&&(x=x.toLowerCase()),x}function Ya(m,x){x&&!m.j&&(Ei(m),m.i=null,m.g.forEach(function(C,M){const X=M.toLowerCase();M!=X&&(ju(this,M),Hu(this,X,C))},m)),m.j=x}function Ti(m,x){const C=new Lo;if(s.Image){const M=new Image;M.onload=d(In,C,"TestLoadImage: loaded",!0,x,M),M.onerror=d(In,C,"TestLoadImage: error",!1,x,M),M.onabort=d(In,C,"TestLoadImage: abort",!1,x,M),M.ontimeout=d(In,C,"TestLoadImage: timeout",!1,x,M),s.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=m}else x(!1)}function Ci(m,x){const C=new Lo,M=new AbortController,X=setTimeout(()=>{M.abort(),In(C,"TestPingServer: timeout",!1,x)},1e4);fetch(m,{signal:M.signal}).then(ee=>{clearTimeout(X),ee.ok?In(C,"TestPingServer: ok",!0,x):In(C,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(X),In(C,"TestPingServer: error",!1,x)})}function In(m,x,C,M,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),M(C)}catch{}}function Xs(){this.g=new Bs}function no(m){this.i=m.Sb||null,this.h=m.ab||!1}p(no,Oo),no.prototype.g=function(){return new xr(this.i,this.h)};function xr(m,x){qt.call(this),this.H=m,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(xr,qt),n=xr.prototype,n.open=function(m,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=x,this.readyState=1,ti(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(x.body=m),(this.H||s).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Uo(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ld(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function ld(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var x=m.value?m.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!m.done}))&&(this.response=this.responseText+=x)}m.done?Uo(this):ti(this),this.readyState==3&&ld(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Uo(this))},n.Na=function(m){this.g&&(this.response=m,Uo(this))},n.ga=function(){this.g&&Uo(this)};function Uo(m){m.readyState=4,m.l=null,m.j=null,m.B=null,ti(m)}n.setRequestHeader=function(m,x){this.A.append(m,x)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],x=this.h.entries();for(var C=x.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=x.next();return m.join(`\r
`)};function ti(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(xr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ud(m){let x="";return ve(m,function(C,M){x+=M,x+=":",x+=C,x+=`\r
`}),x}function Qa(m,x,C){e:{for(M in C){var M=!1;break e}M=!0}M||(C=ud(C),typeof m=="string"?C!=null&&wi(C):ut(m,x,C))}function yt(m){qt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(yt,qt);var cd=/^https?$/i,v0=["POST","PUT"];n=yt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,x,C,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);x=x?x.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():td.g(),this.g.onreadystatechange=g(f(this.Ca,this));try{this.B=!0,this.g.open(x,String(m),!0),this.B=!1}catch(ee){jo(this,ee);return}if(m=C||"",C=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var X in M)C.set(X,M[X]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const ee of M.keys())C.set(ee,M.get(ee));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(C.keys()).find(ee=>ee.toLowerCase()=="content-type"),X=s.FormData&&m instanceof s.FormData,!(Array.prototype.indexOf.call(v0,x,void 0)>=0)||M||X||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,de]of C)this.g.setRequestHeader(ee,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ee){jo(this,ee)}};function jo(m,x){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=x,m.o=5,zo(m),io(m)}function zo(m){m.A||(m.A=!0,zt(m,"complete"),zt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,zt(this,"complete"),zt(this,"abort"),io(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),io(this,!0)),yt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ro(this):this.Xa())},n.Xa=function(){ro(this)};function ro(m){if(m.h&&typeof o<"u"){if(m.v&&Ii(m)==4)setTimeout(m.Ca.bind(m),0);else if(zt(m,"readystatechange"),Ii(m)==4){m.h=!1;try{const ee=m.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var C;if(!(C=x)){var M;if(M=ee===0){let de=String(m.D).match(ad)[1]||null;!de&&s.self&&s.self.location&&(de=s.self.location.protocol.slice(0,-1)),M=!cd.test(de?de.toLowerCase():"")}C=M}if(C)zt(m,"complete"),zt(m,"success");else{m.o=6;try{var X=Ii(m)>2?m.g.statusText:""}catch{X=""}m.l=X+" ["+m.ca()+"]",zo(m)}}finally{io(m)}}}}function io(m,x){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const C=m.g;m.g=null,x||zt(m,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ii(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Ii(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var x=this.g.responseText;return m&&x.indexOf(m)==0&&(x=x.substring(m.length)),Yf(x)}};function fd(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function $u(m){const x={};m=(m.g&&Ii(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<m.length;M++){if(D(m[M]))continue;var C=$a(m[M]);const X=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ee=x[X]||[];x[X]=ee,ee.push(C)}pe(x,function(M){return M.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Si(m,x,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||x}function Za(m){this.za=0,this.i=[],this.j=new Lo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Si("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Si("baseRetryDelayMs",5e3,m),this.Za=Si("retryDelaySeedMs",1e4,m),this.Ta=Si("forwardChannelMaxRetries",2,m),this.va=Si("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new qa(m&&m.concurrentRequestLimit),this.Ba=new Xs,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Za.prototype,n.ka=8,n.I=1,n.connect=function(m,x,C,M){Vt(0),this.W=m,this.H=x||{},C&&M!==void 0&&(this.H.OSID=C,this.H.OAID=M),this.F=this.X,this.J=qu(this,null,this.W),oo(this)};function Ja(m){if(el(m),m.I==3){var x=m.V++,C=Lr(m.J);if(ut(C,"SID",m.M),ut(C,"RID",x),ut(C,"TYPE","terminate"),bi(m,C),x=new Mr(m,m.j,x),x.M=2,x.A=to(Lr(C)),C=!1,s.navigator&&s.navigator.sendBeacon)try{C=s.navigator.sendBeacon(x.A.toString(),"")}catch{}!C&&s.Image&&(new Image().src=x.A,C=!0),C||(x.g=hd(x.j,null),x.g.ea(x.A)),x.F=Date.now(),js(x)}Zs(m)}function Er(m){m.g&&(Qs(m),m.g.cancel(),m.g=null)}function el(m){Er(m),m.v&&(s.clearTimeout(m.v),m.v=null),tl(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&s.clearTimeout(m.m),m.m=null)}function oo(m){if(!Mu(m.h)&&!m.m){m.m=!0;var x=m.Ea;H||S(),$||(H(),$=!0),b.add(x,m),m.D=0}}function dd(m,x){return Hs(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=x.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Mo(f(m.Ea,m,x),rl(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const X=new Mr(this,this.j,m);let ee=this.o;if(this.U&&(ee?(ee=q(ee),Ee(ee,this.U)):ee=this.U),this.u!==null||this.R||(X.J=ee,ee=null),this.S)e:{for(var x=0,C=0;C<this.i.length;C++){t:{var M=this.i[C];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(x+=M,x>4096){x=C;break e}if(x===4096||C===this.i.length-1){x=C+1;break e}}x=1e3}else x=1e3;x=Gu(this,X,x),C=Lr(this.J),ut(C,"RID",m),ut(C,"CVER",22),this.G&&ut(C,"X-HTTP-Session-Id",this.G),bi(this,C),ee&&(this.R?x="headers="+wi(ud(ee))+"&"+x:this.u&&Qa(C,this.u,ee)),Ka(this.h,X),this.Ra&&ut(C,"TYPE","init"),this.S?(ut(C,"$req",x),ut(C,"SID","null"),X.U=!0,ei(X,C,null)):ei(X,C,x),this.I=2}}else this.I==3&&(m?Ys(this,m):this.i.length==0||Mu(this.h)||Ys(this))};function Ys(m,x){var C;x?C=x.l:C=m.V++;const M=Lr(m.J);ut(M,"SID",m.M),ut(M,"RID",C),ut(M,"AID",m.K),bi(m,M),m.u&&m.o&&Qa(M,m.u,m.o),C=new Mr(m,m.j,C,m.D+1),m.u===null&&(C.J=m.o),x&&(m.i=x.G.concat(m.i)),x=Gu(m,C,1e3),C.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Ka(m.h,C),ei(C,M,x)}function bi(m,x){m.H&&ve(m.H,function(C,M){ut(x,M,C)}),m.l&&ve({},function(C,M){ut(x,M,C)})}function Gu(m,x,C){C=Math.min(m.i.length,C);const M=m.l?f(m.l.Ka,m.l,m):null;e:{var X=m.i;let $e=-1;for(;;){const Ht=["count="+C];$e==-1?C>0?($e=X[0].g,Ht.push("ofs="+$e)):$e=0:Ht.push("ofs="+$e);let ht=!0;for(let Kt=0;Kt<C;Kt++){var ee=X[Kt].g;const Tr=X[Kt].map;if(ee-=$e,ee<0)$e=Math.max(0,X[Kt].g-100),ht=!1;else try{ee="req"+ee+"_"||"";try{var de=Tr instanceof Map?Tr:Object.entries(Tr);for(const[so,Ri]of de){let Ni=Ri;a(Ri)&&(Ni=No(Ri)),Ht.push(ee+so+"="+encodeURIComponent(Ni))}}catch(so){throw Ht.push(ee+"type="+encodeURIComponent("_badmap")),so}}catch{M&&M(Tr)}}if(ht){de=Ht.join("&");break e}}de=void 0}return m=m.i.splice(0,C),x.G=m,de}function Fn(m){if(!m.g&&!m.v){m.Y=1;var x=m.Da;H||S(),$||(H(),$=!0),b.add(x,m),m.A=0}}function Pi(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Mo(f(m.Da,m),rl(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Ho(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Mo(f(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),Er(this),Ho(this))};function Qs(m){m.B!=null&&(s.clearTimeout(m.B),m.B=null)}function Ho(m){m.g=new Mr(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var x=Lr(m.na);ut(x,"RID","rpc"),ut(x,"SID",m.M),ut(x,"AID",m.K),ut(x,"CI",m.F?"0":"1"),!m.F&&m.ia&&ut(x,"TO",m.ia),ut(x,"TYPE","xmlhttp"),bi(m,x),m.u&&m.o&&Qa(x,m.u,m.o),m.O&&(m.g.H=m.O);var C=m.g;m=m.ba,C.M=1,C.A=to(Lr(x)),C.u=null,C.R=!0,Du(C,m)}n.Va=function(){this.C!=null&&(this.C=null,Er(this),Pi(this),Vt(19))};function tl(m){m.C!=null&&(s.clearTimeout(m.C),m.C=null)}function nl(m,x){var C=null;if(m.g==x){tl(m),Qs(m),m.g=null;var M=2}else if(Lu(m.h,x))C=x.G,Ws(m.h,x),M=1;else return;if(m.I!=0){if(x.o)if(M==1){C=x.u?x.u.length:0,x=Date.now()-x.F;var X=m.D;M=ko(),zt(M,new Nu(M,C)),oo(m)}else Fn(m);else if(X=x.m,X==3||X==0&&x.X>0||!(M==1&&dd(m,x)||M==2&&Pi(m)))switch(C&&C.length>0&&(x=m.h,x.i=x.i.concat(C)),X){case 1:Ar(m,5);break;case 4:Ar(m,10);break;case 3:Ar(m,6);break;default:Ar(m,2)}}}function rl(m,x){let C=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(C*=2),C*x}function Ar(m,x){if(m.j.info("Error code "+x),x==2){var C=f(m.bb,m),M=m.Ua;const X=!M;M=new _i(M||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||$s(M,"https"),to(M),X?Ti(M.toString(),C):Ci(M.toString(),C)}else Vt(2);m.I=0,m.l&&m.l.pa(x),Zs(m),el(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Zs(m){if(m.I=0,m.ja=[],m.l){const x=wr(m.h);(x.length!=0||m.i.length!=0)&&(E(m.ja,x),E(m.ja,m.i),m.h.i.length=0,y(m.i),m.i.length=0),m.l.oa()}}function qu(m,x,C){var M=C instanceof _i?Lr(C):new _i(C);if(M.g!="")x&&(M.g=x+"."+M.g),xi(M,M.u);else{var X=s.location;M=X.protocol,x=x?x+"."+X.hostname:X.hostname,X=+X.port;const ee=new _i(null);M&&$s(ee,M),x&&(ee.g=x),X&&xi(ee,X),C&&(ee.h=C),M=ee}return C=m.G,x=m.wa,C&&x&&ut(M,C,x),ut(M,"VER",m.ka),bi(m,M),M}function hd(m,x,C){if(x&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=m.Aa&&!m.ma?new yt(new no({ab:C})):new yt(m.ma),x.Fa(m.L),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function pd(){}n=pd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function il(){}il.prototype.g=function(m,x){return new Sn(m,x)};function Sn(m,x){qt.call(this),this.g=new Za(x),this.l=m,this.h=x&&x.messageUrlParams||null,m=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(m?m["X-WebChannel-Content-Type"]=x.messageContentType:m={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(m?m["X-WebChannel-Client-Profile"]=x.sa:m={"X-WebChannel-Client-Profile":x.sa}),this.g.U=m,(m=x&&x.Qb)&&!D(m)&&(this.g.u=m),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!D(x)&&(this.g.G=x,m=this.h,m!==null&&x in m&&(m=this.h,x in m&&delete m[x])),this.j=new Wo(this)}p(Sn,qt),Sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){Ja(this.g)},Sn.prototype.o=function(m){var x=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.v&&(C={},C.__data__=No(m),m=C);x.i.push(new m0(x.Ya++,m)),x.I==3&&oo(x)},Sn.prototype.N=function(){this.g.l=null,delete this.j,Ja(this.g),delete this.g,Sn.Z.N.call(this)};function md(m){za.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var x=m.__sm__;if(x){e:{for(const C in x){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,x=x!==null&&m in x?x[m]:void 0),this.data=x}else this.data=m}p(md,za);function gd(){Ru.call(this),this.status=1}p(gd,Ru);function Wo(m){this.g=m}p(Wo,pd),Wo.prototype.ra=function(){zt(this.g,"a")},Wo.prototype.qa=function(m){zt(this.g,new md(m))},Wo.prototype.pa=function(m){zt(this.g,new gd)},Wo.prototype.oa=function(){zt(this.g,"b")},il.prototype.createWebChannel=il.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,yS=function(){return new il},vS=function(){return ko()},gS=Jr,yg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vo.NO_ERROR=0,Vo.TIMEOUT=8,Vo.HTTP_ERROR=6,Uh=Vo,Fo.COMPLETE="complete",mS=Fo,Qf.EventType=Do,Do.OPEN="a",Do.CLOSE="b",Do.ERROR="c",Do.MESSAGE="d",qt.prototype.listen=qt.prototype.J,Oc=Qf,yt.prototype.listenOnce=yt.prototype.K,yt.prototype.getLastError=yt.prototype.Ha,yt.prototype.getLastErrorCode=yt.prototype.ya,yt.prototype.getStatus=yt.prototype.ca,yt.prototype.getResponseJson=yt.prototype.La,yt.prototype.getResponseText=yt.prototype.la,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Fa,pS=yt}).apply(typeof gh<"u"?gh:typeof self<"u"?self:typeof window<"u"?window:{});const xE="@firebase/firestore",EE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$n.UNAUTHENTICATED=new $n(null),$n.GOOGLE_CREDENTIALS=new $n("google-credentials-uid"),$n.FIRST_PARTY=new $n("first-party-uid"),$n.MOCK_USER=new $n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new Bv("@firebase/firestore");function Rl(){return Ra.logLevel}function _e(n,...e){if(Ra.logLevel<=Ze.DEBUG){const t=e.map(Qv);Ra.debug(`Firestore (${yu}): ${n}`,...t)}}function To(n,...e){if(Ra.logLevel<=Ze.ERROR){const t=e.map(Qv);Ra.error(`Firestore (${yu}): ${n}`,...t)}}function eu(n,...e){if(Ra.logLevel<=Ze.WARN){const t=e.map(Qv);Ra.warn(`Firestore (${yu}): ${n}`,...t)}}function Qv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,wS(n,r,t)}function wS(n,e,t){let r=`FIRESTORE (${yu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw To(r),new Error(r)}function it(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||wS(e,i,r)}function ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends So{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($n.UNAUTHENTICATED)))}shutdown(){}}class m9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class g9{constructor(e){this.t=e,this.currentUser=$n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let o=new zi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new zi,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const u=o;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},a=u=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((u=>a(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new zi)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string",31837,{l:r}),new _S(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new $n(e)}}class v9{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=$n.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class y9{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new v9(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($n.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class AE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w9{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const r=o=>{o.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,_e("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new AE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new AE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _9(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=_9(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Je(n,e){return n<e?-1:n>e?1:0}function wg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return _m(i)===_m(o)?Je(i,o):_m(i)?1:-1}return Je(n.length,e.length)}const x9=55296,E9=57343;function _m(n){const e=n.charCodeAt(0);return e>=x9&&e<=E9}function tu(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="__name__";class Li{constructor(e,t,r){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&De(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Li.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Li?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Li.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Je(e.length,t.length)}static compareSegments(e,t){const r=Li.isNumericId(e),i=Li.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Li.extractNumericId(e).compare(Li.extractNumericId(t)):wg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _s.fromString(e.substring(4,e.length-2))}}class vt extends Li{construct(e,t,r){return new vt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new vt(t)}static emptyPath(){return new vt([])}}const A9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mn extends Li{construct(e,t,r){return new Mn(e,t,r)}static isValidIdentifier(e){return A9.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===TE}static keyField(){return new Mn([TE])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new me(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new me(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new me(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new me(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mn(t)}static emptyPath(){return new Mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(vt.fromString(e))}static fromName(e){return new Ne(vt.fromString(e).popFirst(5))}static empty(){return new Ne(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(n,e,t){if(!t)throw new me(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function T9(n,e,t,r){if(e===!0&&r===!0)throw new me(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function CE(n){if(!Ne.isDocumentKey(n))throw new me(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function IE(n){if(Ne.isDocumentKey(n))throw new me(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ES(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Wp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De(12329,{type:typeof n})}function Or(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wp(n);throw new me(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function C9(n,e){if(e<=0)throw new me(re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(n,e){const t={typeString:n};return e&&(t.value=e),t}function Lf(n,e){if(!ES(n))throw new me(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new me(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=-62135596800,bE=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*bE);return new St(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<SE)throw new me(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bE}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:St._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lf(e,St._jsonSchema))return new St(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-SE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:en("string",St._jsonSchemaVersion),seconds:en("number"),nanoseconds:en("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new St(0,0))}static max(){return new Fe(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf=-1;function I9(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Fe.fromTimestamp(r===1e9?new St(t+1,0):new St(t,r));return new Ss(i,Ne.empty(),e)}function S9(n){return new Ss(n.readTime,n.key,gf)}class Ss{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ss(Fe.min(),Ne.empty(),gf)}static max(){return new Ss(Fe.max(),Ne.empty(),gf)}}function b9(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(n.documentKey,e.documentKey),t!==0?t:Je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wu(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==P9)throw n;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,r)=>{t(e)}))}static reject(e){return new oe(((t,r)=>{r(e)}))}static waitFor(e){return new oe(((t,r)=>{let i=0,o=0,s=!1;e.forEach((a=>{++i,a.next((()=>{++o,s&&o===i&&t()}),(u=>r(u)))})),s=!0,o===i&&t()}))}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next((i=>i?oe.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,o)=>{r.push(t.call(this,i,o))})),this.waitFor(r)}static mapArray(e,t){return new oe(((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const f=u;t(e[f]).next((d=>{s[f]=d,++a,a===o&&r(s)}),(d=>i(d)))}}))}static doWhile(e,t){return new oe(((r,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):r()};o()}))}}function N9(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function _u(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$p.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=-1;function Vf(n){return n==null}function cp(n){return n===0&&1/n==-1/0}function O9(n){return typeof n=="number"&&Number.isInteger(n)&&!cp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="";function D9(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=PE(e)),e=k9(n.get(t),e);return PE(e)}function k9(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case AS:t+="";break;default:t+=o}}return t}function PE(n){return n+AS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ms(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,t){this.comparator=e,this.root=t||Dn.EMPTY}insert(e,t){return new Lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vh(this.root,e,this.comparator,!0)}}class vh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Dn.RED,this.left=i??Dn.EMPTY,this.right=o??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Dn(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Dn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new NE(this.data.getIterator())}getIteratorFrom(e){return new NE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new dn(this.comparator);return t.data=e,t}}class NE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.fields=e,e.sort(Mn.comparator)}static empty(){return new Nr([])}unionWith(e){let t=new dn(Mn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Nr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tu(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new CS("Invalid base64 string: "+o):o}})(e);return new Vn(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new Vn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vn.EMPTY_BYTE_STRING=new Vn("");const M9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(n){if(it(!!n,39018),typeof n=="string"){let e=0;const t=M9.exec(n);if(it(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gt(n.seconds),nanos:Gt(n.nanos)}}function Gt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ps(n){return typeof n=="string"?Vn.fromBase64String(n):Vn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="server_timestamp",SS="__type__",bS="__previous_value__",PS="__local_write_time__";function ey(n){return(n?.mapValue?.fields||{})[SS]?.stringValue===IS}function Gp(n){const e=n.mapValue.fields[bS];return ey(e)?Gp(e):e}function vf(n){const e=bs(n.mapValue.fields[PS].timestampValue);return new St(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e,t,r,i,o,s,a,u,f,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=d}}const fp="(default)";class yf{constructor(e,t){this.projectId=e,this.database=t||fp}static empty(){return new yf("","")}get isDefaultDatabase(){return this.database===fp}isEqual(e){return e instanceof yf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="__type__",V9="__max__",yh={mapValue:{}},NS="__vector__",dp="value";function Rs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ey(n)?4:B9(n)?9007199254740991:F9(n)?10:11:De(28295,{value:n})}function qi(n,e){if(n===e)return!0;const t=Rs(n);if(t!==Rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vf(n).isEqual(vf(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=bs(i.timestampValue),a=bs(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Ps(i.bytesValue).isEqual(Ps(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Gt(i.geoPointValue.latitude)===Gt(o.geoPointValue.latitude)&&Gt(i.geoPointValue.longitude)===Gt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Gt(i.integerValue)===Gt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Gt(i.doubleValue),a=Gt(o.doubleValue);return s===a?cp(s)===cp(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return tu(n.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return(function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(RE(s)!==RE(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!qi(s[u],a[u])))return!1;return!0})(n,e);default:return De(52216,{left:n})}}function wf(n,e){return(n.values||[]).find((t=>qi(t,e)))!==void 0}function nu(n,e){if(n===e)return 0;const t=Rs(n),r=Rs(e);if(t!==r)return Je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return(function(o,s){const a=Gt(o.integerValue||o.doubleValue),u=Gt(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return OE(n.timestampValue,e.timestampValue);case 4:return OE(vf(n),vf(e));case 5:return wg(n.stringValue,e.stringValue);case 6:return(function(o,s){const a=Ps(o),u=Ps(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){const a=o.split("/"),u=s.split("/");for(let f=0;f<a.length&&f<u.length;f++){const d=Je(a[f],u[f]);if(d!==0)return d}return Je(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){const a=Je(Gt(o.latitude),Gt(s.latitude));return a!==0?a:Je(Gt(o.longitude),Gt(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return DE(n.arrayValue,e.arrayValue);case 10:return(function(o,s){const a=o.fields||{},u=s.fields||{},f=a[dp]?.arrayValue,d=u[dp]?.arrayValue,p=Je(f?.values?.length||0,d?.values?.length||0);return p!==0?p:DE(f,d)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===yh.mapValue&&s===yh.mapValue)return 0;if(o===yh.mapValue)return 1;if(s===yh.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),f=s.fields||{},d=Object.keys(f);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const g=wg(u[p],d[p]);if(g!==0)return g;const y=nu(a[u[p]],f[d[p]]);if(y!==0)return y}return Je(u.length,d.length)})(n.mapValue,e.mapValue);default:throw De(23264,{he:t})}}function OE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Je(n,e);const t=bs(n),r=bs(e),i=Je(t.seconds,r.seconds);return i!==0?i:Je(t.nanos,r.nanos)}function DE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=nu(t[i],r[i]);if(o)return o}return Je(t.length,r.length)}function ru(n){return _g(n)}function _g(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=bs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ps(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ne.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=_g(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${_g(t.fields[s])}`;return i+"}"})(n.mapValue):De(61005,{value:n})}function jh(n){switch(Rs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gp(n);return e?16+jh(e):16;case 5:return 2*n.stringValue.length;case 6:return Ps(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+jh(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Ms(r.fields,((o,s)=>{i+=o.length+jh(s)})),i})(n.mapValue);default:throw De(13486,{value:n})}}function kE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xg(n){return!!n&&"integerValue"in n}function ty(n){return!!n&&"arrayValue"in n}function ME(n){return!!n&&"nullValue"in n}function LE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zh(n){return!!n&&"mapValue"in n}function F9(n){return(n?.mapValue?.fields||{})[RS]?.stringValue===NS}function Yc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ms(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Yc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yc(n.arrayValue.values[t]);return e}return{...n}}function B9(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===V9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.value=e}static empty(){return new tr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(t)}setAll(e){let t=Mn.emptyPath(),r={},i=[];e.forEach(((s,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Yc(s):i.push(a.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());zh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];zh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ms(t,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new tr(Yc(this.value))}}function OS(n){const e=[];return Ms(n.fields,((t,r)=>{const i=new Mn([t]);if(zh(r)){const o=OS(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)})),new Nr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new En(e,0,Fe.min(),Fe.min(),Fe.min(),tr.empty(),0)}static newFoundDocument(e,t,r,i){return new En(e,1,t,Fe.min(),r,i,0)}static newNoDocument(e,t){return new En(e,2,t,Fe.min(),Fe.min(),tr.empty(),0)}static newUnknownDocument(e,t){return new En(e,3,t,Fe.min(),Fe.min(),tr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t){this.position=e,this.inclusive=t}}function VE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Ne.comparator(Ne.fromName(s.referenceValue),t.key):r=nu(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function FE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t="asc"){this.field=e,this.dir=t}}function U9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{}class Jt extends DS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new z9(e,t,r):t==="array-contains"?new $9(e,r):t==="in"?new G9(e,r):t==="not-in"?new q9(e,r):t==="array-contains-any"?new K9(e,r):new Jt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new H9(e,r):new W9(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(nu(t,this.value)):t!==null&&Rs(this.value)===Rs(t)&&this.matchesComparison(nu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gi extends DS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new gi(e,t)}matches(e){return kS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kS(n){return n.op==="and"}function MS(n){return j9(n)&&kS(n)}function j9(n){for(const e of n.filters)if(e instanceof gi)return!1;return!0}function Eg(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+ru(n.value);if(MS(n))return n.filters.map((e=>Eg(e))).join(",");{const e=n.filters.map((t=>Eg(t))).join(",");return`${n.op}(${e})`}}function LS(n,e){return n instanceof Jt?(function(r,i){return i instanceof Jt&&r.op===i.op&&r.field.isEqual(i.field)&&qi(r.value,i.value)})(n,e):n instanceof gi?(function(r,i){return i instanceof gi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,s,a)=>o&&LS(s,i.filters[a])),!0):!1})(n,e):void De(19439)}function VS(n){return n instanceof Jt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ru(t.value)}`})(n):n instanceof gi?(function(t){return t.op.toString()+" {"+t.getFilters().map(VS).join(" ,")+"}"})(n):"Filter"}class z9 extends Jt{constructor(e,t,r){super(e,t,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class H9 extends Jt{constructor(e,t){super(e,"in",t),this.keys=FS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class W9 extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=FS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function FS(n,e){return(e.arrayValue?.values||[]).map((t=>Ne.fromName(t.referenceValue)))}class $9 extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ty(t)&&wf(t.arrayValue,this.value)}}class G9 extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wf(this.value.arrayValue,t)}}class q9 extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(wf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!wf(this.value.arrayValue,t)}}class K9 extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ty(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>wf(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}}function BE(n,e=null,t=[],r=[],i=null,o=null,s=null){return new X9(n,e,t,r,i,o,s)}function ny(n){const e=ze(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Eg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Vf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ru(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ru(r))).join(",")),e.Te=t}return e.Te}function ry(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!U9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!LS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!FE(n.startAt,e.startAt)&&FE(n.endAt,e.endAt)}function Ag(n){return Ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Y9(n,e,t,r,i,o,s,a){return new xu(n,e,t,r,i,o,s,a)}function qp(n){return new xu(n)}function UE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function BS(n){return n.collectionGroup!==null}function Qc(n){const e=ze(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new dn(Mn.comparator);return s.filters.forEach((u=>{u.getFlattenedFilters().forEach((f=>{f.isInequality()&&(a=a.add(f.field))}))})),a})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new _f(o,r))})),t.has(Mn.keyField().canonicalString())||e.Ie.push(new _f(Mn.keyField(),r))}return e.Ie}function Hi(n){const e=ze(n);return e.Ee||(e.Ee=Q9(e,Qc(n))),e.Ee}function Q9(n,e){if(n.limitType==="F")return BE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new _f(i.field,o)}));const t=n.endAt?new hp(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new hp(n.startAt.position,n.startAt.inclusive):null;return BE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Tg(n,e){const t=n.filters.concat([e]);return new xu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function pp(n,e,t){return new xu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kp(n,e){return ry(Hi(n),Hi(e))&&n.limitType===e.limitType}function US(n){return`${ny(Hi(n))}|lt:${n.limitType}`}function Nl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>VS(i))).join(", ")}]`),Vf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>ru(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>ru(i))).join(",")),`Target(${r})`})(Hi(n))}; limitType=${n.limitType})`}function Xp(n,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ne.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(const o of Qc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){const f=VE(s,a,u);return s.inclusive?f<=0:f<0})(r.startAt,Qc(r),i)||r.endAt&&!(function(s,a,u){const f=VE(s,a,u);return s.inclusive?f>=0:f>0})(r.endAt,Qc(r),i))})(n,e)}function Z9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jS(n){return(e,t)=>{let r=!1;for(const i of Qc(n)){const o=J9(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function J9(n,e,t){const r=n.field.isKeyField()?Ne.comparator(e.key,t.key):(function(o,s,a){const u=s.data.field(o),f=a.data.field(o);return u!==null&&f!==null?nu(u,f):De(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return De(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,((t,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return TS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7=new Lt(Ne.comparator);function Co(){return e7}const zS=new Lt(Ne.comparator);function Dc(...n){let e=zS;for(const t of n)e=e.insert(t.key,t);return e}function HS(n){let e=zS;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function _a(){return Zc()}function WS(){return Zc()}function Zc(){return new Va((n=>n.toString()),((n,e)=>n.isEqual(e)))}const t7=new Lt(Ne.comparator),n7=new dn(Ne.comparator);function et(...n){let e=n7;for(const t of n)e=e.add(t);return e}const r7=new dn(Je);function i7(){return r7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cp(e)?"-0":e}}function $S(n){return{integerValue:""+n}}function GS(n,e){return O9(e)?$S(e):iy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(){this._=void 0}}function o7(n,e,t){return n instanceof xf?(function(i,o){const s={fields:{[SS]:{stringValue:IS},[PS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ey(o)&&(o=Gp(o)),o&&(s.fields[bS]=o),{mapValue:s}})(t,e):n instanceof Ef?KS(n,e):n instanceof Af?XS(n,e):(function(i,o){const s=qS(i,o),a=jE(s)+jE(i.Ae);return xg(s)&&xg(i.Ae)?$S(a):iy(i.serializer,a)})(n,e)}function s7(n,e,t){return n instanceof Ef?KS(n,e):n instanceof Af?XS(n,e):t}function qS(n,e){return n instanceof Tf?(function(r){return xg(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class xf extends Yp{}class Ef extends Yp{constructor(e){super(),this.elements=e}}function KS(n,e){const t=YS(e);for(const r of n.elements)t.some((i=>qi(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Af extends Yp{constructor(e){super(),this.elements=e}}function XS(n,e){let t=YS(e);for(const r of n.elements)t=t.filter((i=>!qi(i,r)));return{arrayValue:{values:t}}}class Tf extends Yp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function jE(n){return Gt(n.integerValue||n.doubleValue)}function YS(n){return ty(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t){this.field=e,this.transform=t}}function a7(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ef&&i instanceof Ef||r instanceof Af&&i instanceof Af?tu(r.elements,i.elements,qi):r instanceof Tf&&i instanceof Tf?qi(r.Ae,i.Ae):r instanceof xf&&i instanceof xf})(n.transform,e.transform)}class l7{constructor(e,t){this.version=e,this.transformResults=t}}class Gn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Qp{}function ZS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zp(n.key,Gn.none()):new Ff(n.key,n.data,Gn.none());{const t=n.data,r=tr.empty();let i=new dn(Mn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ls(n.key,r,new Nr(i.toArray()),Gn.none())}}function u7(n,e,t){n instanceof Ff?(function(i,o,s){const a=i.value.clone(),u=HE(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Ls?(function(i,o,s){if(!Hh(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=HE(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(JS(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Jc(n,e,t,r){return n instanceof Ff?(function(o,s,a,u){if(!Hh(o.precondition,s))return a;const f=o.value.clone(),d=WE(o.fieldTransforms,u,s);return f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ls?(function(o,s,a,u){if(!Hh(o.precondition,s))return a;const f=WE(o.fieldTransforms,u,s),d=s.data;return d.setAll(JS(o)),d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((p=>p.field)))})(n,e,t,r):(function(o,s,a){return Hh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function c7(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=qS(r.transform,i||null);o!=null&&(t===null&&(t=tr.empty()),t.set(r.field,o))}return t||null}function zE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&tu(r,i,((o,s)=>a7(o,s)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ff extends Qp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ls extends Qp{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function JS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function HE(n,e,t){const r=new Map;it(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,s7(s,a,t[i]))}return r}function WE(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,o7(o,s,e))}return r}class Zp extends Qp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e3 extends Qp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&u7(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Jc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Jc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=WS();return this.mutations.forEach((i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const u=ZS(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Fe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),et())}isEqual(e){return this.batchId===e.batchId&&tu(this.mutations,e.mutations,((t,r)=>zE(t,r)))&&tu(this.baseMutations,e.baseMutations,((t,r)=>zE(t,r)))}}class oy{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){it(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return t7})();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new oy(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,nt;function t3(n){switch(n){case re.OK:return De(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return De(15467,{code:n})}}function n3(n){if(n===void 0)return To("GRPC error has no .code"),re.UNKNOWN;switch(n){case Yt.OK:return re.OK;case Yt.CANCELLED:return re.CANCELLED;case Yt.UNKNOWN:return re.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return re.INTERNAL;case Yt.UNAVAILABLE:return re.UNAVAILABLE;case Yt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Yt.NOT_FOUND:return re.NOT_FOUND;case Yt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Yt.ABORTED:return re.ABORTED;case Yt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Yt.DATA_LOSS:return re.DATA_LOSS;default:return De(39323,{code:n})}}(nt=Yt||(Yt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m7=new _s([4294967295,4294967295],0);function $E(n){const e=p7().encode(n),t=new hS;return t.update(e),new Uint8Array(t.digest())}function GE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new _s([t,r],0),new _s([i,o],0)]}class sy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new kc(`Invalid padding: ${t}`);if(r<0)throw new kc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new kc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new kc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_s.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(_s.fromNumber(r)));return i.compare(m7)===1&&(i=new _s([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=$E(e),[r,i]=GE(t);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new sy(o,i,t);return r.forEach((a=>s.insert(a))),s}insert(e){if(this.ge===0)return;const t=$E(e),[r,i]=GE(t);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);this.Se(s)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class kc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Bf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Jp(Fe.min(),i,new Lt(Je),Co(),et())}}class Bf{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Bf(r,t,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class r3{constructor(e,t){this.targetId=e,this.Ce=t}}class i3{constructor(e,t,r=Vn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class qE{constructor(){this.ve=0,this.Fe=KE(),this.Me=Vn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),t=et(),r=et();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:De(38017,{changeType:o})}})),new Bf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=KE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class g7{constructor(e){this.Ge=e,this.ze=new Map,this.je=Co(),this.Je=wh(),this.He=wh(),this.Ye=new Lt(Je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(Ag(o))if(r===0){const s=new Ne(o.path);this.et(t,s,En.newNoDocument(s,Fe.min()))}else it(r===1,20013,{expectedCount:r});else{const s=this._t(t);if(s!==r){const a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(t);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=Ps(r).toUint8Array()}catch(u){if(u instanceof CS)return eu("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new sy(s,i,o)}catch(u){return eu(u instanceof kc?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((o=>{const s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,s)=>{const a=this.ot(s);if(a){if(o.current&&Ag(a.target)){const u=new Ne(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,En.newNoDocument(u,e))}o.Be&&(t.set(s,o.ke()),o.qe())}}));let r=et();this.He.forEach(((o,s)=>{let a=!0;s.forEachWhile((u=>{const f=this.ot(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(o))})),this.je.forEach(((o,s)=>s.setReadTime(e)));const i=new Jp(e,t,this.Ye,this.je,r);return this.je=Co(),this.Je=wh(),this.He=wh(),this.Ye=new Lt(Je),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new qE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new dn(Je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new dn(Je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function wh(){return new Lt(Ne.comparator)}function KE(){return new Lt(Ne.comparator)}const v7={asc:"ASCENDING",desc:"DESCENDING"},y7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},w7={and:"AND",or:"OR"};class _7{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cg(n,e){return n.useProto3Json||Vf(e)?e:{value:e}}function mp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function o3(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function x7(n,e){return mp(n,e.toTimestamp())}function Dr(n){return it(!!n,49232),Fe.fromTimestamp((function(t){const r=bs(t);return new St(r.seconds,r.nanos)})(n))}function ay(n,e){return Ig(n,e).canonicalString()}function Ig(n,e){const t=(function(i){return new vt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function s3(n){const e=vt.fromString(n);return it(d3(e),10190,{key:e.toString()}),e}function gp(n,e){return ay(n.databaseId,e.path)}function ef(n,e){const t=s3(e);if(t.get(1)!==n.databaseId.projectId)throw new me(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ne(l3(t))}function a3(n,e){return ay(n.databaseId,e)}function E7(n){const e=s3(n);return e.length===4?vt.emptyPath():l3(e)}function Sg(n){return new vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function l3(n){return it(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function XE(n,e,t){return{name:gp(n,e),fields:t.value.mapValue.fields}}function A7(n,e){return"found"in e?(function(r,i){it(!!i.found,43571),i.found.name,i.found.updateTime;const o=ef(r,i.found.name),s=Dr(i.found.updateTime),a=i.found.createTime?Dr(i.found.createTime):Fe.min(),u=new tr({mapValue:{fields:i.found.fields}});return En.newFoundDocument(o,s,a,u)})(n,e):"missing"in e?(function(r,i){it(!!i.missing,3894),it(!!i.readTime,22933);const o=ef(r,i.missing),s=Dr(i.readTime);return En.newNoDocument(o,s)})(n,e):De(7234,{result:e})}function T7(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:De(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,d){return f.useProto3Json?(it(d===void 0||typeof d=="string",58123),Vn.fromBase64String(d||"")):(it(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Vn.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(f){const d=f.code===void 0?re.UNKNOWN:n3(f.code);return new me(d,f.message||"")})(s);t=new i3(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ef(n,r.document.name),o=Dr(r.document.updateTime),s=r.document.createTime?Dr(r.document.createTime):Fe.min(),a=new tr({mapValue:{fields:r.document.fields}}),u=En.newFoundDocument(i,o,s,a),f=r.targetIds||[],d=r.removedTargetIds||[];t=new Wh(f,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ef(n,r.document),o=r.readTime?Dr(r.readTime):Fe.min(),s=En.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Wh([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ef(n,r.document),o=r.removedTargetIds||[];t=new Wh([],o,i,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new h7(i,o),a=r.targetId;t=new r3(a,s)}}return t}function u3(n,e){let t;if(e instanceof Ff)t={update:XE(n,e.key,e.value)};else if(e instanceof Zp)t={delete:gp(n,e.key)};else if(e instanceof Ls)t={update:XE(n,e.key,e.data),updateMask:D7(e.fieldMask)};else{if(!(e instanceof e3))return De(16599,{Vt:e.type});t={verify:gp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,s){const a=s.transform;if(a instanceof xf)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ef)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Af)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Tf)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw De(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:x7(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:De(27497)})(n,e.precondition)),t}function C7(n,e){return n&&n.length>0?(it(e!==void 0,14353),n.map((t=>(function(i,o){let s=i.updateTime?Dr(i.updateTime):Dr(o);return s.isEqual(Fe.min())&&(s=Dr(o)),new l7(s,i.transformResults||[])})(t,e)))):[]}function I7(n,e){return{documents:[a3(n,e.path)]}}function S7(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=a3(n,i);const o=(function(f){if(f.length!==0)return f3(gi.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const s=(function(f){if(f.length!==0)return f.map((d=>(function(g){return{field:Ol(g.field),direction:R7(g.dir)}})(d)))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=Cg(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:i}}function b7(n){let e=E7(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){it(r===1,65062);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=(function(p){const g=c3(p);return g instanceof gi&&MS(g)?g.getFilters():[g]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map((g=>(function(E){return new _f(Dl(E.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(g)))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,Vf(g)?null:g})(t.limit));let u=null;t.startAt&&(u=(function(p){const g=!!p.before,y=p.values||[];return new hp(y,g)})(t.startAt));let f=null;return t.endAt&&(f=(function(p){const g=!p.before,y=p.values||[];return new hp(y,g)})(t.endAt)),Y9(e,i,s,o,a,"F",u,f)}function P7(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function c3(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Dl(t.unaryFilter.field);return Jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Dl(t.unaryFilter.field);return Jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Dl(t.unaryFilter.field);return Jt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Dl(t.unaryFilter.field);return Jt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Jt.create(Dl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return gi.create(t.compositeFilter.filters.map((r=>c3(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(t.compositeFilter.op))})(n):De(30097,{filter:n})}function R7(n){return v7[n]}function N7(n){return y7[n]}function O7(n){return w7[n]}function Ol(n){return{fieldPath:n.canonicalString()}}function Dl(n){return Mn.fromServerFormat(n.fieldPath)}function f3(n){return n instanceof Jt?(function(t){if(t.op==="=="){if(LE(t.value))return{unaryFilter:{field:Ol(t.field),op:"IS_NAN"}};if(ME(t.value))return{unaryFilter:{field:Ol(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(LE(t.value))return{unaryFilter:{field:Ol(t.field),op:"IS_NOT_NAN"}};if(ME(t.value))return{unaryFilter:{field:Ol(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ol(t.field),op:N7(t.op),value:t.value}}})(n):n instanceof gi?(function(t){const r=t.getFilters().map((i=>f3(i)));return r.length===1?r[0]:{compositeFilter:{op:O7(t.op),filters:r}}})(n):De(54877,{filter:n})}function D7(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function d3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t,r,i,o=Fe.min(),s=Fe.min(),a=Vn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(e){this.yt=e}}function M7(n){const e=b7({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?pp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(){this.Cn=new V7}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Ss.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class V7{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new dn(vt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dn(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},h3=41943040;class dr{static withCacheSize(e){return new dr(e,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(h3,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new iu(0)}static cr(){return new iu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="LruGarbageCollector",F7=1048576;function ZE([n,e],[t,r]){const i=Je(n,t);return i===0?Je(e,r):i}class B7{constructor(e){this.Ir=e,this.buffer=new dn(ZE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ZE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class U7{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){_e(QE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){_u(t)?_e(QE,"Ignoring IndexedDB error during garbage collection: ",t):await wu(t)}await this.Vr(3e5)}))}}class j7{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve($p.ce);const r=new B7(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(YE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,u,f;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(r=p,a=Date.now(),this.removeTargets(e,r,t)))).next((p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(f=Date.now(),Rl()<=Ze.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(f-u)+`ms
Total Duration: ${f-d}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p}))))}}function z7(n,e){return new j7(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(){this.changes=new Va((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Jc(r.mutation,i,Nr.empty(),St.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,et()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=et()){const i=_a();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((o=>{let s=Dc();return o.forEach(((a,u)=>{s=s.insert(a,u.overlayedDocument)})),s}))))}getOverlayedDocuments(e,t){const r=_a();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,et())))}populateOverlays(e,t,r){const i=[];return r.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((s,a)=>{t.set(s,a)}))}))}computeViews(e,t,r,i){let o=Co();const s=Zc(),a=(function(){return Zc()})();return t.forEach(((u,f)=>{const d=r.get(f.key);i.has(f.key)&&(d===void 0||d.mutation instanceof Ls)?o=o.insert(f.key,f):d!==void 0?(s.set(f.key,d.mutation.getFieldMask()),Jc(d.mutation,f,d.mutation.getFieldMask(),St.now())):s.set(f.key,Nr.empty())})),this.recalculateAndSaveOverlays(e,o).next((u=>(u.forEach(((f,d)=>s.set(f,d))),t.forEach(((f,d)=>a.set(f,new W7(d,s.get(f)??null)))),a)))}recalculateAndSaveOverlays(e,t){const r=Zc();let i=new Lt(((s,a)=>s-a)),o=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((s=>{for(const a of s)a.keys().forEach((u=>{const f=t.get(u);if(f===null)return;let d=r.get(u)||Nr.empty();d=a.applyToLocalView(f,d),r.set(u,d);const p=(i.get(a.batchId)||et()).add(u);i=i.insert(a.batchId,p)}))})).next((()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),f=u.key,d=u.value,p=WS();d.forEach((g=>{if(!o.has(g)){const y=ZS(t.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}})),s.push(this.documentOverlayCache.saveOverlays(e,f,p))}return oe.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return Ne.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):BS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):oe.resolve(_a());let a=gf,u=o;return s.next((f=>oe.forEach(f,((d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(d)?oe.resolve():this.remoteDocumentCache.getEntry(e,d).next((g=>{u=u.insert(d,g)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,u,f,et()))).next((d=>({batchId:a,changes:HS(d)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next((r=>{let i=Dc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=Dc();return this.indexManager.getCollectionParents(e,o).next((a=>oe.forEach(a,(u=>{const f=(function(p,g){return new xu(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((d=>{d.forEach(((p,g)=>{s=s.insert(p,g)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i)))).next((s=>{o.forEach(((u,f)=>{const d=f.getKey();s.get(d)===null&&(s=s.insert(d,En.newInvalidDocument(d)))}));let a=Dc();return s.forEach(((u,f)=>{const d=o.get(u);d!==void 0&&Jc(d.mutation,f,Nr.empty(),St.now()),Xp(t,f)&&(a=a.insert(u,f))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Dr(i.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:M7(i.bundledQuery),readTime:Dr(i.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(){this.overlays=new Lt(Ne.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=_a();return oe.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,o)=>{this.St(e,t,o)})),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=_a(),o=t.length+1,s=new Ne(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,f=u.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Lt(((f,d)=>f-d));const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let d=o.get(f.largestBatchId);d===null&&(d=_a(),o=o.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const a=_a(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((f,d)=>a.set(f,d))),!(a.size()>=i)););return oe.resolve(a)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new d7(t,r));let o=this.qr.get(t);o===void 0&&(o=et(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(){this.sessionToken=Vn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(){this.Qr=new dn(_n.$r),this.Ur=new dn(_n.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new _n(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new _n(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Ne(new vt([])),r=new _n(t,e),i=new _n(t,e+1),o=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),o.push(s.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ne(new vt([])),r=new _n(t,e),i=new _n(t,e+1);let o=et();return this.Ur.forEachInRange([r,i],(s=>{o=o.add(s.key)})),o}containsKey(e){const t=new _n(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class _n{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ne.comparator(e.key,t.key)||Je(e.Yr,t.Yr)}static Kr(e,t){return Je(e.Yr,t.Yr)||Ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new dn(_n.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new f7(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.Zr=this.Zr.add(new _n(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return oe.resolve(s)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Jv:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new _n(t,0),i=new _n(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(s=>{const a=this.Xr(s.Yr);o.push(a)})),oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(Je);return t.forEach((i=>{const o=new _n(i,0),s=new _n(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],(a=>{r=r.add(a.Yr)}))})),oe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Ne.isDocumentKey(o)||(o=o.child(""));const s=new _n(new Ne(o),0);let a=new dn(Je);return this.Zr.forEachWhile((u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(a=a.add(u.Yr)),!0)}),s),oe.resolve(this.ti(a))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){it(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return oe.forEach(t.mutations,(i=>{const o=new _n(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new _n(t,0),i=this.Zr.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(e){this.ri=e,this.docs=(function(){return new Lt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():En.newInvalidDocument(t))}getEntries(e,t){let r=Co();return t.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():En.newInvalidDocument(i))})),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Co();const s=t.path,a=new Ne(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:f,value:{document:d}}=u.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||b9(S9(d),r)<=0||(i.has(d.key)||Xp(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,t,r,i){De(9500)}ii(e,t){return oe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Q7(this)}getSize(e){return oe.resolve(this.size)}}class Q7 extends H7{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e){this.persistence=e,this.si=new Va((t=>ny(t)),ry),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.oi=0,this._i=new ly,this.targetCount=0,this.ai=iu.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new iu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach(((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),oe.waitFor(o).next((()=>i))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((s=>{o.push(i.markPotentiallyOrphaned(e,s))})),oe.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,t){this.ui={},this.overlays={},this.ci=new $p(0),this.li=!1,this.li=!0,this.hi=new K7,this.referenceDelegate=e(this),this.Pi=new Z7(this),this.indexManager=new L7,this.remoteDocumentCache=(function(i){return new Y7(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new k7(t),this.Ii=new G7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new q7,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new X7(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){_e("MemoryPersistence","Starting transaction:",e);const i=new J7(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,t){return oe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class J7 extends R9{constructor(e){super(),this.currentSequenceNumber=e}}class uy{constructor(e){this.persistence=e,this.Ri=new ly,this.Vi=null}static mi(e){return new uy(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(r=>{const i=Ne.fromPath(r);return this.gi(e,i).next((o=>{o||t.removeEntry(i,Fe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class vp{constructor(e,t){this.persistence=e,this.pi=new Va((r=>D9(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=z7(this,t)}static mi(e,t){return new vp(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return oe.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?oe.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,t).next((a=>{a||(r++,o.removeEntry(s,Fe.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=jh(e.data.value)),t}br(e,t,r){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return oe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=et(),i=et();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new cy(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return sD()?8:N9(Kn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next((s=>{o.result=s})).next((()=>{if(!o.result)return this.ws(e,t,i,r).next((s=>{o.result=s}))})).next((()=>{if(o.result)return;const s=new eL;return this.Ss(e,t,s).next((a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)}))})).next((()=>o.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Rl()<=Ze.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",Nl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(Rl()<=Ze.DEBUG&&_e("QueryEngine","Query:",Nl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Rl()<=Ze.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",Nl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hi(t))):oe.resolve())}ys(e,t){if(UE(t))return oe.resolve(null);let r=Hi(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=pp(t,null,"F"),r=Hi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const s=et(...o);return this.ps.getDocuments(e,s).next((a=>this.indexManager.getMinOffset(e,r).next((u=>{const f=this.Ds(t,a);return this.Cs(t,f,s,u.readTime)?this.ys(e,pp(t,null,"F")):this.vs(e,f,t,u)}))))})))))}ws(e,t,r,i){return UE(t)||i.isEqual(Fe.min())?oe.resolve(null):this.ps.getDocuments(e,r).next((o=>{const s=this.Ds(t,o);return this.Cs(t,s,r,i)?oe.resolve(null):(Rl()<=Ze.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Nl(t)),this.vs(e,s,t,I9(i,gf)).next((a=>a)))}))}Ds(e,t){let r=new dn(jS(e));return t.forEach(((i,o)=>{Xp(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Rl()<=Ze.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",Nl(t)),this.ps.getDocumentsMatchingQuery(e,t,Ss.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(t.forEach((s=>{o=o.insert(s.key,s)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="LocalStore",nL=3e8;class rL{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Lt(Je),this.xs=new Va((o=>ny(o)),ry),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $7(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function iL(n,e,t,r){return new rL(n,e,t,r)}async function m3(n,e){const t=ze(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const s=[],a=[];let u=et();for(const f of i){s.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}for(const f of o){a.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}return t.localDocuments.getDocuments(r,u).next((f=>({Ls:f,removedBatchIds:s,addedBatchIds:a})))}))}))}function oL(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,u,f,d){const p=f.batch,g=p.keys();let y=oe.resolve();return g.forEach((E=>{y=y.next((()=>d.getEntry(u,E))).next((A=>{const I=f.docVersions.get(E);it(I!==null,48541),A.version.compareTo(I)<0&&(p.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),d.addEntry(A)))}))})),y.next((()=>a.mutationQueue.removeMutationBatch(u,p)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=et();for(let f=0;f<a.mutationResults.length;++f)a.mutationResults[f].transformResults.length>0&&(u=u.add(a.batch.mutations[f].key));return u})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function g3(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function sL(n,e){const t=ze(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const a=[];e.targetChanges.forEach(((d,p)=>{const g=i.get(p);if(!g)return;a.push(t.Pi.removeMatchingKeys(o,d.removedDocuments,p).next((()=>t.Pi.addMatchingKeys(o,d.addedDocuments,p))));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Vn.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(p,y),(function(A,I,N){return A.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=nL?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(g,y,d)&&a.push(t.Pi.updateTargetData(o,y))}));let u=Co(),f=et();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))})),a.push(aL(o,s,e.documentUpdates).next((d=>{u=d.ks,f=d.qs}))),!r.isEqual(Fe.min())){const d=t.Pi.getLastRemoteSnapshotVersion(o).next((p=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));a.push(d)}return oe.waitFor(a).next((()=>s.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,u,f))).next((()=>u))})).then((o=>(t.Ms=i,o)))}function aL(n,e,t){let r=et(),i=et();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let s=Co();return t.forEach(((a,u)=>{const f=o.get(a);u.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Fe.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):_e(fy,"Ignoring outdated watch update for ",a,". Current version:",f.version," Watch version:",u.version)})),{ks:s,qs:i}}))}function lL(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Jv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function uL(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((o=>o?(i=o,oe.resolve(i)):t.Pi.allocateTargetId(r).next((s=>(i=new ms(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function bg(n,e,t){const r=ze(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!_u(s))throw s;_e(fy,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function JE(n,e,t){const r=ze(n);let i=Fe.min(),o=et();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(u,f,d){const p=ze(u),g=p.xs.get(d);return g!==void 0?oe.resolve(p.Ms.get(g)):p.Pi.getTargetData(f,d)})(r,s,Hi(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next((u=>{o=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:Fe.min(),t?o:et()))).next((a=>(cL(r,Z9(e),a),{documents:a,Qs:o})))))}function cL(n,e,t){let r=n.Os.get(e)||Fe.min();t.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class eA{constructor(){this.activeTargetIds=i7()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fL{constructor(){this.Mo=new eA,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new eA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="ConnectivityMonitor";class nA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_e(tA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){_e(tA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h=null;function Pg(){return _h===null?_h=(function(){return 268435456+Math.round(2147483648*Math.random())})():_h++,"0x"+_h.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="RestConnection",hL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===fp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const s=Pg(),a=this.zo(e,t.toUriEncodedString());_e(xm,`Sending RPC '${e}' ${s}:`,a,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);const{host:f}=new URL(a),d=hu(f);return this.Jo(e,a,u,r,d).then((p=>(_e(xm,`Received RPC '${e}' ${s}: `,p),p)),(p=>{throw eu(xm,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p}))}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+yu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,t){const r=hL[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn="WebChannelConnection";class gL extends pL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const s=Pg();return new Promise(((a,u)=>{const f=new pS;f.setWithCredentials(!0),f.listenOnce(mS.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Uh.NO_ERROR:const p=f.getResponseJson();_e(Hn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Uh.TIMEOUT:_e(Hn,`RPC '${e}' ${s} timed out`),u(new me(re.DEADLINE_EXCEEDED,"Request time out"));break;case Uh.HTTP_ERROR:const g=f.getStatus();if(_e(Hn,`RPC '${e}' ${s} failed with status:`,g,"response text:",f.getResponseText()),g>0){let y=f.getResponseJson();Array.isArray(y)&&(y=y[0]);const E=y?.error;if(E&&E.status&&E.message){const A=(function(N){const R=N.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(R)>=0?R:re.UNKNOWN})(E.status);u(new me(A,E.message))}else u(new me(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new me(re.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:s,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{_e(Hn,`RPC '${e}' ${s} completed.`)}}));const d=JSON.stringify(i);_e(Hn,`RPC '${e}' ${s} sending request:`,i),f.send(t,"POST",d,r,15)}))}T_(e,t,r){const i=Pg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=yS(),a=vS(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const d=o.join("");_e(Hn,`Creating RPC '${e}' stream ${i}: ${d}`,u);const p=s.createWebChannel(d,u);this.I_(p);let g=!1,y=!1;const E=new mL({Yo:I=>{y?_e(Hn,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(g||(_e(Hn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),_e(Hn,`RPC '${e}' stream ${i} sending:`,I),p.send(I))},Zo:()=>p.close()}),A=(I,N,R)=>{I.listen(N,(k=>{try{R(k)}catch(j){setTimeout((()=>{throw j}),0)}}))};return A(p,Oc.EventType.OPEN,(()=>{y||(_e(Hn,`RPC '${e}' stream ${i} transport opened.`),E.o_())})),A(p,Oc.EventType.CLOSE,(()=>{y||(y=!0,_e(Hn,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(p))})),A(p,Oc.EventType.ERROR,(I=>{y||(y=!0,eu(Hn,`RPC '${e}' stream ${i} transport errored. Name:`,I.name,"Message:",I.message),E.a_(new me(re.UNAVAILABLE,"The operation could not be completed")))})),A(p,Oc.EventType.MESSAGE,(I=>{if(!y){const N=I.data[0];it(!!N,16349);const R=N,k=R?.error||R[0]?.error;if(k){_e(Hn,`RPC '${e}' stream ${i} received error:`,k);const j=k.status;let H=(function(S){const O=Yt[S];if(O!==void 0)return n3(O)})(j),$=k.message;H===void 0&&(H=re.INTERNAL,$="Unknown error status: "+j+" with message "+k.message),y=!0,E.a_(new me(H,$)),p.close()}else _e(Hn,`RPC '${e}' stream ${i} received:`,N),E.u_(N)}})),A(a,gS.STAT_EVENT,(I=>{I.stat===yg.PROXY?_e(Hn,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===yg.NOPROXY&&_e(Hn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Em(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(n){return new _7(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&_e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="PersistentStream";class v3{constructor(e,t,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dy(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(To(t.toString()),To("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new me(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return _e(rA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(_e(rA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vL extends v3{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=T7(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Fe.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Fe.min():s.readTime?Dr(s.readTime):Fe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Sg(this.serializer),t.addTarget=(function(o,s){let a;const u=s.target;if(a=Ag(u)?{documents:I7(o,u)}:{query:S7(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=o3(o,s.resumeToken);const f=Cg(o,s.expectedCount);f!==null&&(a.expectedCount=f)}else if(s.snapshotVersion.compareTo(Fe.min())>0){a.readTime=mp(o,s.snapshotVersion.toTimestamp());const f=Cg(o,s.expectedCount);f!==null&&(a.expectedCount=f)}return a})(this.serializer,e);const r=P7(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Sg(this.serializer),t.removeTarget=e,this.q_(t)}}class yL extends v3{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=C7(e.writeResults,e.commitTime),r=Dr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Sg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>u3(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{}class _L extends wL{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new me(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,s])=>this.connection.Go(e,Ig(t,r),i,o,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new me(re.UNKNOWN,o.toString())}))}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Ho(e,Ig(t,r),i,s,a,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new me(re.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class xL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(To(t),this.aa=!1):_e("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="RemoteStore";class EL{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{Fa(this)&&(_e(Na,"Restarting streams for network reachability change."),await(async function(u){const f=ze(u);f.Ea.add(4),await Uf(f),f.Ra.set("Unknown"),f.Ea.delete(4),await t0(f)})(this))}))})),this.Ra=new xL(r,i)}}async function t0(n){if(Fa(n))for(const e of n.da)await e(!0)}async function Uf(n){for(const e of n.da)await e(!1)}function y3(n,e){const t=ze(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),gy(t)?my(t):Eu(t).O_()&&py(t,e))}function hy(n,e){const t=ze(n),r=Eu(t);t.Ia.delete(e),r.O_()&&w3(t,e),t.Ia.size===0&&(r.O_()?r.L_():Fa(t)&&t.Ra.set("Unknown"))}function py(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Eu(n).Y_(e)}function w3(n,e){n.Va.Ue(e),Eu(n).Z_(e)}function my(n){n.Va=new g7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Eu(n).start(),n.Ra.ua()}function gy(n){return Fa(n)&&!Eu(n).x_()&&n.Ia.size>0}function Fa(n){return ze(n).Ea.size===0}function _3(n){n.Va=void 0}async function AL(n){n.Ra.set("Online")}async function TL(n){n.Ia.forEach(((e,t)=>{py(n,e)}))}async function CL(n,e){_3(n),gy(n)?(n.Ra.ha(e),my(n)):n.Ra.set("Unknown")}async function IL(n,e,t){if(n.Ra.set("Online"),e instanceof i3&&e.state===2&&e.cause)try{await(async function(i,o){const s=o.cause;for(const a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){_e(Na,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yp(n,r)}else if(e instanceof Wh?n.Va.Ze(e):e instanceof r3?n.Va.st(e):n.Va.tt(e),!t.isEqual(Fe.min()))try{const r=await g3(n.localStore);t.compareTo(r)>=0&&await(function(o,s){const a=o.Va.Tt(s);return a.targetChanges.forEach(((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const d=o.Ia.get(f);d&&o.Ia.set(f,d.withResumeToken(u.resumeToken,s))}})),a.targetMismatches.forEach(((u,f)=>{const d=o.Ia.get(u);if(!d)return;o.Ia.set(u,d.withResumeToken(Vn.EMPTY_BYTE_STRING,d.snapshotVersion)),w3(o,u);const p=new ms(d.target,u,f,d.sequenceNumber);py(o,p)})),o.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){_e(Na,"Failed to raise snapshot:",r),await yp(n,r)}}async function yp(n,e,t){if(!_u(e))throw e;n.Ea.add(1),await Uf(n),n.Ra.set("Offline"),t||(t=()=>g3(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{_e(Na,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await t0(n)}))}function x3(n,e){return e().catch((t=>yp(n,t,e)))}async function n0(n){const e=ze(n),t=Ns(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Jv;for(;SL(e);)try{const i=await lL(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,bL(e,i)}catch(i){await yp(e,i)}E3(e)&&A3(e)}function SL(n){return Fa(n)&&n.Ta.length<10}function bL(n,e){n.Ta.push(e);const t=Ns(n);t.O_()&&t.X_&&t.ea(e.mutations)}function E3(n){return Fa(n)&&!Ns(n).x_()&&n.Ta.length>0}function A3(n){Ns(n).start()}async function PL(n){Ns(n).ra()}async function RL(n){const e=Ns(n);for(const t of n.Ta)e.ea(t.mutations)}async function NL(n,e,t){const r=n.Ta.shift(),i=oy.from(r,e,t);await x3(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await n0(n)}async function OL(n,e){e&&Ns(n).X_&&await(async function(r,i){if((function(s){return t3(s)&&s!==re.ABORTED})(i.code)){const o=r.Ta.shift();Ns(r).B_(),await x3(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await n0(r)}})(n,e),E3(n)&&A3(n)}async function iA(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),_e(Na,"RemoteStore received new credentials");const r=Fa(t);t.Ea.add(3),await Uf(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await t0(t)}async function DL(n,e){const t=ze(n);e?(t.Ea.delete(2),await t0(t)):e||(t.Ea.add(2),await Uf(t),t.Ra.set("Unknown"))}function Eu(n){return n.ma||(n.ma=(function(t,r,i){const o=ze(t);return o.sa(),new vL(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:AL.bind(null,n),t_:TL.bind(null,n),r_:CL.bind(null,n),H_:IL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),gy(n)?my(n):n.Ra.set("Unknown")):(await n.ma.stop(),_3(n))}))),n.ma}function Ns(n){return n.fa||(n.fa=(function(t,r,i){const o=ze(t);return o.sa(),new yL(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:PL.bind(null,n),r_:OL.bind(null,n),ta:RL.bind(null,n),na:NL.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await n0(n)):(await n.fa.stop(),n.Ta.length>0&&(_e(Na,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new zi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new vy(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yy(n,e){if(To("AsyncQueue",`${e}: ${n}`),_u(n))return new me(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{static emptySet(e){return new Xl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ne.comparator(t.key,r.key):(t,r)=>Ne.comparator(t.key,r.key),this.keyedMap=Dc(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Xl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.ga=new Lt(Ne.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ou{constructor(e,t,r,i,o,s,a,u,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach((a=>{s.push({type:0,doc:a})})),new ou(e,t,Xl.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ML{constructor(){this.queries=sA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=ze(t),o=i.queries;i.queries=sA(),o.forEach(((s,a)=>{for(const u of a.Sa)u.onError(r)}))})(this,new me(re.ABORTED,"Firestore shutting down"))}}function sA(){return new Va((n=>US(n)),Kp)}async function wy(n,e){const t=ze(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new kL,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const a=yy(s,`Initialization of query '${Nl(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&xy(t)}async function _y(n,e){const t=ze(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function LL(n,e){const t=ze(n);let r=!1;for(const i of e){const o=i.query,s=t.queries.get(o);if(s){for(const a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&xy(t)}function VL(n,e,t){const r=ze(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function xy(n){n.Ca.forEach((e=>{e.next()}))}var Rg,aA;(aA=Rg||(Rg={})).Ma="default",aA.Cache="cache";class Ey{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ou(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ou.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e){this.key=e}}class C3{constructor(e){this.key=e}}class FL{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=et(),this.mutatedKeys=et(),this.eu=jS(e),this.tu=new Xl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new oA,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((d,p)=>{const g=i.get(d),y=Xp(this.query,p)?p:null,E=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let I=!1;g&&y?g.data.isEqual(y.data)?E!==A&&(r.track({type:3,doc:y}),I=!0):this.su(g,y)||(r.track({type:2,doc:y}),I=!0,(u&&this.eu(y,u)>0||f&&this.eu(y,f)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),I=!0):g&&!y&&(r.track({type:1,doc:g}),I=!0,(u||f)&&(a=!0)),I&&(y?(s=s.add(y),o=A?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((d,p)=>(function(y,E){const A=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:I})}};return A(y)-A(E)})(d.type,p.type)||this.eu(d.doc,p.doc))),this.ou(r),i=i??!1;const a=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,f=u!==this.Za;return this.Za=u,s.length!==0||f?{snapshot:new ou(this.query,e.tu,o,s,e.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=et(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new C3(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new T3(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=et();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ou.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ay="SyncEngine";class BL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class UL{constructor(e){this.key=e,this.hu=!1}}class jL{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Va((a=>US(a)),Kp),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(Ne.comparator),this.Au=new Map,this.Ru=new ly,this.Vu={},this.mu=new Map,this.fu=iu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zL(n,e,t=!0){const r=N3(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await I3(r,e,t,!0),i}async function HL(n,e){const t=N3(n);await I3(t,e,!0,!1)}async function I3(n,e,t,r){const i=await uL(n.localStore,Hi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t);let a;return r&&(a=await WL(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&y3(n.remoteStore,i),a}async function WL(n,e,t,r,i){n.pu=(p,g,y)=>(async function(A,I,N,R){let k=I.view.ru(N);k.Cs&&(k=await JE(A.localStore,I.query,!1).then((({documents:b})=>I.view.ru(b,k))));const j=R&&R.targetChanges.get(I.targetId),H=R&&R.targetMismatches.get(I.targetId)!=null,$=I.view.applyChanges(k,A.isPrimaryClient,j,H);return uA(A,I.targetId,$.au),$.snapshot})(n,p,g,y);const o=await JE(n.localStore,e,!0),s=new FL(e,o.Qs),a=s.ru(o.documents),u=Bf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=s.applyChanges(a,n.isPrimaryClient,u);uA(n,t,f.au);const d=new BL(e,t,s);return n.Tu.set(e,d),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function $L(n,e,t){const r=ze(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((s=>!Kp(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await bg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&hy(r.remoteStore,i.targetId),Ng(r,i.targetId)})).catch(wu)):(Ng(r,i.targetId),await bg(r.localStore,i.targetId,!0))}async function GL(n,e){const t=ze(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),hy(t.remoteStore,r.targetId))}async function qL(n,e,t){const r=eV(n);try{const i=await(function(s,a){const u=ze(s),f=St.now(),d=a.reduce(((y,E)=>y.add(E.key)),et());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let E=Co(),A=et();return u.Ns.getEntries(y,d).next((I=>{E=I,E.forEach(((N,R)=>{R.isValidDocument()||(A=A.add(N))}))})).next((()=>u.localDocuments.getOverlayedDocuments(y,E))).next((I=>{p=I;const N=[];for(const R of a){const k=c7(R,p.get(R.key).overlayedDocument);k!=null&&N.push(new Ls(R.key,k,OS(k.value.mapValue),Gn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,f,N,a)})).next((I=>{g=I;const N=I.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,I.batchId,N)}))})).then((()=>({batchId:g.batchId,changes:HS(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let f=s.Vu[s.currentUser.toKey()];f||(f=new Lt(Je)),f=f.insert(a,u),s.Vu[s.currentUser.toKey()]=f})(r,i.batchId,t),await jf(r,i.changes),await n0(r.remoteStore)}catch(i){const o=yy(i,"Failed to persist write");t.reject(o)}}async function S3(n,e){const t=ze(n);try{const r=await sL(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const s=t.Au.get(o);s&&(it(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?it(s.hu,14607):i.removedDocuments.size>0&&(it(s.hu,42227),s.hu=!1))})),await jf(t,r,e)}catch(r){await wu(r)}}function lA(n,e,t){const r=ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((o,s)=>{const a=s.view.va(e);a.snapshot&&i.push(a.snapshot)})),(function(s,a){const u=ze(s);u.onlineState=a;let f=!1;u.queries.forEach(((d,p)=>{for(const g of p.Sa)g.va(a)&&(f=!0)})),f&&xy(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KL(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let s=new Lt(Ne.comparator);s=s.insert(o,En.newNoDocument(o,Fe.min()));const a=et().add(o),u=new Jp(Fe.min(),new Map,new Lt(Je),s,a);await S3(r,u),r.du=r.du.remove(o),r.Au.delete(e),Ty(r)}else await bg(r.localStore,e,!1).then((()=>Ng(r,e,t))).catch(wu)}async function XL(n,e){const t=ze(n),r=e.batch.batchId;try{const i=await oL(t.localStore,e);P3(t,r,null),b3(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await jf(t,i)}catch(i){await wu(i)}}async function YL(n,e,t){const r=ze(n);try{const i=await(function(s,a){const u=ze(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let d;return u.mutationQueue.lookupMutationBatch(f,a).next((p=>(it(p!==null,37113),d=p.keys(),u.mutationQueue.removeMutationBatch(f,p)))).next((()=>u.mutationQueue.performConsistencyCheck(f))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(f,d,a))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d))).next((()=>u.localDocuments.getDocuments(f,d)))}))})(r.localStore,e);P3(r,e,t),b3(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await jf(r,i)}catch(i){await wu(i)}}function b3(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function P3(n,e,t){const r=ze(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ng(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||R3(n,r)}))}function R3(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(hy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Ty(n))}function uA(n,e,t){for(const r of t)r instanceof T3?(n.Ru.addReference(r.key,e),QL(n,r)):r instanceof C3?(_e(Ay,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||R3(n,r.key)):De(19791,{wu:r})}function QL(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(_e(Ay,"New document in limbo: "+t),n.Eu.add(r),Ty(n))}function Ty(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ne(vt.fromString(e)),r=n.fu.next();n.Au.set(r,new UL(t)),n.du=n.du.insert(t,r),y3(n.remoteStore,new ms(Hi(qp(t.path)),r,"TargetPurposeLimboResolution",$p.ce))}}async function jf(n,e,t){const r=ze(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,u)=>{s.push(r.pu(u,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const d=f?!f.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(f){i.push(f);const d=cy.As(u.targetId,f);o.push(d)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(u,f){const d=ze(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>oe.forEach(f,(g=>oe.forEach(g.Es,(y=>d.persistence.referenceDelegate.addReference(p,g.targetId,y))).next((()=>oe.forEach(g.ds,(y=>d.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))))))}catch(p){if(!_u(p))throw p;_e(fy,"Failed to update sequence numbers: "+p)}for(const p of f){const g=p.targetId;if(!p.fromCache){const y=d.Ms.get(g),E=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(E);d.Ms=d.Ms.insert(g,A)}}})(r.localStore,o))}async function ZL(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){_e(Ay,"User change. New user:",e.toKey());const r=await m3(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach((a=>{a.forEach((u=>{u.reject(new me(re.CANCELLED,s))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jf(t,r.Ls)}}function JL(n,e){const t=ze(n),r=t.Au.get(e);if(r&&r.hu)return et().add(r.key);{let i=et();const o=t.Iu.get(e);if(!o)return i;for(const s of o){const a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function N3(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=S3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KL.bind(null,e),e.Pu.H_=LL.bind(null,e.eventManager),e.Pu.yu=VL.bind(null,e.eventManager),e}function eV(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YL.bind(null,e),e}class wp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=e0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return iL(this.persistence,new tL,e.initialUser,this.serializer)}Cu(e){return new p3(uy.mi,this.serializer)}Du(e){return new fL}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wp.provider={build:()=>new wp};class tV extends wp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){it(this.persistence.referenceDelegate instanceof vp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new U7(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new p3((r=>vp.mi(r,t)),this.serializer)}}class Og{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZL.bind(null,this.syncEngine),await DL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ML})()}createDatastore(e){const t=e0(e.databaseInfo.databaseId),r=(function(o){return new gL(o)})(e.databaseInfo);return(function(o,s,a,u){return new _L(o,s,a,u)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,o,s,a){return new EL(r,i,o,s,a)})(this.localStore,this.datastore,e.asyncQueue,(t=>lA(this.syncEngine,t,0)),(function(){return nA.v()?new nA:new dL})())}createSyncEngine(e,t){return(function(i,o,s,a,u,f,d){const p=new jL(i,o,s,a,u,f);return d&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ze(t);_e(Na,"RemoteStore shutting down."),r.Ea.add(5),await Uf(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Og.provider={build:()=>new Og};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):To("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new me(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,o){const s=ze(i),a={documents:o.map((p=>gp(s.serializer,p)))},u=await s.Ho("BatchGetDocuments",s.serializer.databaseId,vt.emptyPath(),a,o.length),f=new Map;u.forEach((p=>{const g=A7(s.serializer,p);f.set(g.key.toString(),g)}));const d=[];return o.forEach((p=>{const g=f.get(p.toString());it(!!g,55234,{key:p}),d.push(g)})),d})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=Ne.fromPath(r);this.mutations.push(new e3(i,this.precondition(i)))})),await(async function(r,i){const o=ze(r),s={writes:i.map((a=>u3(o.serializer,a)))};await o.Go("Commit",o.serializer.databaseId,vt.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw De(50498,{Gu:e.constructor.name});t=Fe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new me(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Fe.min())?Gn.exists(!1):Gn.updateTime(t):Gn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Fe.min()))throw new me(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gn.updateTime(t)}return Gn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new dy(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new nV(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Vf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!t3(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="FirestoreClient";class iV{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=$n.UNAUTHENTICATED,this.clientId=Zv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async s=>{_e(Os,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(_e(Os,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=yy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Am(n,e){n.asyncQueue.verifyOperationInProgress(),_e(Os,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await m3(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function cA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await oV(n);_e(Os,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>iA(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>iA(e.remoteStore,i))),n._onlineComponents=e}async function oV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_e(Os,"Using user provided OfflineComponentProvider");try{await Am(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;eu("Error using user provided cache. Falling back to memory cache: "+t),await Am(n,new wp)}}else _e(Os,"Using default OfflineComponentProvider"),await Am(n,new tV(void 0));return n._offlineComponents}async function Iy(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_e(Os,"Using user provided OnlineComponentProvider"),await cA(n,n._uninitializedComponentsProvider._online)):(_e(Os,"Using default OnlineComponentProvider"),await cA(n,new Og))),n._onlineComponents}function sV(n){return Iy(n).then((e=>e.syncEngine))}function aV(n){return Iy(n).then((e=>e.datastore))}async function _p(n){const e=await Iy(n),t=e.eventManager;return t.onListen=zL.bind(null,e.syncEngine),t.onUnlisten=$L.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=GL.bind(null,e.syncEngine),t}function lV(n,e,t={}){const r=new zi;return n.asyncQueue.enqueueAndForget((async()=>(function(o,s,a,u,f){const d=new Cy({next:g=>{d.Nu(),s.enqueueAndForget((()=>_y(o,p)));const y=g.docs.has(a);!y&&g.fromCache?f.reject(new me(re.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?f.reject(new me(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new Ey(qp(a.path),d,{includeMetadataChanges:!0,qa:!0});return wy(o,p)})(await _p(n),n.asyncQueue,e,t,r))),r.promise}function uV(n,e,t={}){const r=new zi;return n.asyncQueue.enqueueAndForget((async()=>(function(o,s,a,u,f){const d=new Cy({next:g=>{d.Nu(),s.enqueueAndForget((()=>_y(o,p))),g.fromCache&&u.source==="server"?f.reject(new me(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new Ey(a,d,{includeMetadataChanges:!0,qa:!0});return wy(o,p)})(await _p(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3="firestore.googleapis.com",dA=!0;class hA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=D3,this.ssl=dA}else this.host=e.host,this.ssl=e.ssl??dA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=h3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<F7)throw new me(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}T9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=O3(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new me(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new me(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new me(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class r0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new p9;switch(r.type){case"firstParty":return new y9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=fA.get(t);r&&(_e("ComponentProvider","Removing Datastore"),fA.delete(t),r.terminate())})(this),Promise.resolve()}}function cV(n,e,t,r={}){n=Or(n,r0);const i=hu(e),o=n._getSettings(),s={...o,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;i&&(gI(`https://${a}`),vI("Firestore",!0)),o.host!==D3&&o.host!==a&&eu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:a,ssl:i,emulatorOptions:r};if(!Sa(u,s)&&(n._setSettings(u),r.mockUserToken)){let f,d;if(typeof r.mockUserToken=="string")f=r.mockUserToken,d=$n.MOCK_USER;else{f=QO(r.mockUserToken,n._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new me(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new $n(p)}n._authCredentials=new m9(new _S(f,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Po(this.firestore,e,this._query)}}class jt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Lf(t,jt._jsonSchema))return new jt(e,r||null,new Ne(vt.fromString(t.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:en("string",jt._jsonSchemaVersion),referencePath:en("string")};class xs extends Po{constructor(e,t,r){super(e,t,qp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new Ne(e))}withConverter(e){return new xs(this.firestore,e,this._path)}}function vr(n,e,...t){if(n=Xe(n),xS("collection","path",e),n instanceof r0){const r=vt.fromString(e,...t);return IE(r),new xs(n,null,r)}{if(!(n instanceof jt||n instanceof xs))throw new me(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vt.fromString(e,...t));return IE(r),new xs(n.firestore,null,r)}}function rr(n,e,...t){if(n=Xe(n),arguments.length===1&&(e=Zv.newId()),xS("doc","path",e),n instanceof r0){const r=vt.fromString(e,...t);return CE(r),new jt(n,null,new Ne(r))}{if(!(n instanceof jt||n instanceof xs))throw new me(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vt.fromString(e,...t));return CE(r),new jt(n.firestore,n instanceof xs?n.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="AsyncQueue";class mA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dy(this,"async_queue_retry"),this._c=()=>{const r=Em();r&&_e(pA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Em();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Em();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new zi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_u(e))throw e;_e(pA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,To("INTERNAL UNHANDLED ERROR: ",gA(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=vy.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&De(47125,{Pc:gA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function gA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}class Io extends r0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new mA,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mA(e),this._firestoreClient=void 0,await e}}}function fV(n,e){const t=typeof n=="object"?n:xI(),r=typeof n=="string"?n:fp,i=jv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=XO("firestore");o&&cV(i,...o)}return i}function zf(n){if(n._terminated)throw new me(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||dV(n),n._firestoreClient}function dV(n){const e=n._freezeSettings(),t=(function(i,o,s,a){return new L9(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,O3(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new iV(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pr(Vn.fromBase64String(e))}catch(t){throw new me(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pr(Vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lf(e,Pr._jsonSchema))return Pr.fromBase64String(e.bytes)}}Pr._jsonSchemaVersion="firestore/bytes/1.0",Pr._jsonSchema={type:en("string",Pr._jsonSchemaVersion),bytes:en("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wi._jsonSchemaVersion}}static fromJSON(e){if(Lf(e,Wi._jsonSchema))return new Wi(e.latitude,e.longitude)}}Wi._jsonSchemaVersion="firestore/geoPoint/1.0",Wi._jsonSchema={type:en("string",Wi._jsonSchemaVersion),latitude:en("number"),longitude:en("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:$i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lf(e,$i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new $i(e.vectorValues);throw new me(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$i._jsonSchemaVersion="firestore/vectorValue/1.0",$i._jsonSchema={type:en("string",$i._jsonSchemaVersion),vectorValues:en("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=/^__.*__$/;class pV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ls(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ff(e,this.data,t,this.fieldTransforms)}}class k3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ls(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function M3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:n})}}class Sy{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Sy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(M3(this.Ac)&&hV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class mV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||e0(e)}Cc(e,t,r,i=!1){return new Sy({Ac:e,methodName:t,Dc:r,path:Mn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function i0(n){const e=n._freezeSettings(),t=e0(n._databaseId);return new mV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function L3(n,e,t,r,i,o={}){const s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);Ry("Data must be an object, but it was:",s,r);const a=B3(r,s);let u,f;if(o.merge)u=new Nr(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const p of o.mergeFields){const g=Dg(e,p,t);if(!s.contains(g))throw new me(re.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);j3(d,g)||d.push(g)}u=new Nr(d),f=s.fieldTransforms.filter((p=>u.covers(p.field)))}else u=null,f=s.fieldTransforms;return new pV(new tr(a),u,f)}class o0 extends Wf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof o0}}class by extends Wf{_toFieldTransform(e){return new QS(e.path,new xf)}isEqual(e){return e instanceof by}}class Py extends Wf{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Tf(e.serializer,GS(e.serializer,this.Fc));return new QS(e.path,t)}isEqual(e){return e instanceof Py&&this.Fc===e.Fc}}function V3(n,e,t,r){const i=n.Cc(1,e,t);Ry("Data must be an object, but it was:",i,r);const o=[],s=tr.empty();Ms(r,((u,f)=>{const d=Ny(e,u,t);f=Xe(f);const p=i.yc(d);if(f instanceof o0)o.push(d);else{const g=$f(f,p);g!=null&&(o.push(d),s.set(d,g))}}));const a=new Nr(o);return new k3(s,a,i.fieldTransforms)}function F3(n,e,t,r,i,o){const s=n.Cc(1,e,t),a=[Dg(e,r,t)],u=[i];if(o.length%2!=0)throw new me(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(Dg(e,o[g])),u.push(o[g+1]);const f=[],d=tr.empty();for(let g=a.length-1;g>=0;--g)if(!j3(f,a[g])){const y=a[g];let E=u[g];E=Xe(E);const A=s.yc(y);if(E instanceof o0)f.push(y);else{const I=$f(E,A);I!=null&&(f.push(y),d.set(y,I))}}const p=new Nr(f);return new k3(d,p,s.fieldTransforms)}function gV(n,e,t,r=!1){return $f(t,n.Cc(r?4:3,e))}function $f(n,e){if(U3(n=Xe(n)))return Ry("Unsupported field value:",e,n),B3(n,e);if(n instanceof Wf)return(function(r,i){if(!M3(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let s=0;for(const a of r){let u=$f(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=St.fromDate(r);return{timestampValue:mp(i.serializer,o)}}if(r instanceof St){const o=new St(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mp(i.serializer,o)}}if(r instanceof Wi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pr)return{bytesValue:o3(i.serializer,r._byteString)};if(r instanceof jt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ay(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof $i)return(function(s,a){return{mapValue:{fields:{[RS]:{stringValue:NS},[dp]:{arrayValue:{values:s.toArray().map((f=>{if(typeof f!="number")throw a.Sc("VectorValues must only contain numeric values.");return iy(a.serializer,f)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Wp(r)}`)})(n,e)}function B3(n,e){const t={};return TS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(n,((r,i)=>{const o=$f(i,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function U3(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof St||n instanceof Wi||n instanceof Pr||n instanceof jt||n instanceof Wf||n instanceof $i)}function Ry(n,e,t){if(!U3(t)||!ES(t)){const r=Wp(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Dg(n,e,t){if((e=Xe(e))instanceof Hf)return e._internalPath;if(typeof e=="string")return Ny(n,e);throw xp("Field path arguments must be of type string or ",n,!1,void 0,t)}const vV=new RegExp("[~\\*/\\[\\]]");function Ny(n,e,t){if(e.search(vV)>=0)throw xp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hf(...e.split("."))._internalPath}catch{throw xp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xp(n,e,t,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new me(re.INVALID_ARGUMENT,a+n+u)}function j3(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(s0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class yV extends Ep{data(){return super.data()}}function s0(n,e){return typeof e=="string"?Ny(n,e):e instanceof Hf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new me(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Oy{}class Dy extends Oy{}function Ki(n,e,...t){let r=[];e instanceof Oy&&r.push(e),r=r.concat(t),(function(o){const s=o.filter((u=>u instanceof ky)).length,a=o.filter((u=>u instanceof a0)).length;if(s>1||s>0&&a>0)throw new me(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class a0 extends Dy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new a0(e,t,r)}_apply(e){const t=this._parse(e);return H3(e._query,t),new Po(e.firestore,e.converter,Tg(e._query,t))}_parse(e){const t=i0(e.firestore);return(function(o,s,a,u,f,d,p){let g;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new me(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){wA(p,d);const E=[];for(const A of p)E.push(yA(u,o,A));g={arrayValue:{values:E}}}else g=yA(u,o,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||wA(p,d),g=gV(a,s,p,d==="in"||d==="not-in");return Jt.create(f,d,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function su(n,e,t){const r=e,i=s0("where",n);return a0._create(i,r,t)}class ky extends Oy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ky(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:gi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)H3(s,u),s=Tg(s,u)})(e._query,t),new Po(e.firestore,e.converter,Tg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class My extends Dy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new My(e,t)}_apply(e){const t=(function(i,o,s){if(i.startAt!==null)throw new me(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new me(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _f(o,s)})(e._query,this._field,this._direction);return new Po(e.firestore,e.converter,(function(i,o){const s=i.explicitOrderBy.concat([o]);return new xu(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function l0(n,e="asc"){const t=e,r=s0("orderBy",n);return My._create(r,t)}class Ly extends Dy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ly(e,t,r)}_apply(e){return new Po(e.firestore,e.converter,pp(e._query,this._limit,this._limitType))}}function Oa(n){return C9("limit",n),Ly._create("limit",n,"F")}function yA(n,e,t){if(typeof(t=Xe(t))=="string"){if(t==="")throw new me(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BS(e)&&t.indexOf("/")!==-1)throw new me(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(vt.fromString(t));if(!Ne.isDocumentKey(r))throw new me(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kE(n,new Ne(r))}if(t instanceof jt)return kE(n,t._key);throw new me(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wp(t)}.`)}function wA(n,e){if(!Array.isArray(n)||n.length===0)throw new me(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function H3(n,e){const t=(function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new me(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class W3{convertValue(e,t="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ms(e,((i,o)=>{r[i]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[dp].arrayValue?.values?.map((r=>Gt(r.doubleValue)));return new $i(t)}convertGeoPoint(e){return new Wi(Gt(e.latitude),Gt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Gp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vf(e));default:return null}}convertTimestamp(e){const t=bs(e);return new St(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=vt.fromString(e);it(d3(r),9688,{name:e});const i=new yf(r.get(1),r.get(3)),o=new Ne(r.popFirst(5));return i.isEqual(t)||To(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class wV extends W3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}}class Bl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Es extends Ep{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(s0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Es._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Es._jsonSchemaVersion="firestore/documentSnapshot/1.0",Es._jsonSchema={type:en("string",Es._jsonSchemaVersion),bundleSource:en("string","DocumentSnapshot"),bundleName:en("string"),bundle:en("string")};class $h extends Es{data(e={}){return super.data(e)}}class Ca{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Bl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new $h(this._firestore,this._userDataWriter,r.key,r,new Bl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((a=>{const u=new $h(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>o||a.type!==3)).map((a=>{const u=new $h(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,d=-1;return a.type!==0&&(f=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:_V(a.type),doc:u,oldIndex:f,newIndex:d}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ca._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _V(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(n){n=Or(n,jt);const e=Or(n.firestore,Io);return lV(zf(e),n._key).then((t=>G3(e,n,t)))}Ca._jsonSchemaVersion="firestore/querySnapshot/1.0",Ca._jsonSchema={type:en("string",Ca._jsonSchemaVersion),bundleSource:en("string","QuerySnapshot"),bundleName:en("string"),bundle:en("string")};class u0 extends W3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}}function kg(n){n=Or(n,Po);const e=Or(n.firestore,Io),t=zf(e),r=new u0(e);return z3(n._query),uV(t,n._query).then((i=>new Ca(e,r,n,i)))}function EV(n,e,t,...r){n=Or(n,jt);const i=Or(n.firestore,Io),o=i0(i);let s;return s=typeof(e=Xe(e))=="string"||e instanceof Hf?F3(o,"updateDoc",n._key,e,t,r):V3(o,"updateDoc",n._key,e),Vy(i,[s.toMutation(n._key,Gn.exists(!0))])}function AV(n){return Vy(Or(n.firestore,Io),[new Zp(n._key,Gn.none())])}function TV(n,e){const t=Or(n.firestore,Io),r=rr(n),i=$3(n.converter,e);return Vy(t,[L3(i0(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Gn.exists(!1))]).then((()=>r))}function Ds(n,...e){n=Xe(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||vA(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(vA(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,a;if(n instanceof jt)s=Or(n.firestore,Io),a=qp(n._key.path),o={next:u=>{e[r]&&e[r](G3(s,n,u))},error:e[r+1],complete:e[r+2]};else{const u=Or(n,Po);s=Or(u.firestore,Io),a=u._query;const f=new u0(s);o={next:d=>{e[r]&&e[r](new Ca(s,f,u,d))},error:e[r+1],complete:e[r+2]},z3(n._query)}return(function(f,d,p,g){const y=new Cy(g),E=new Ey(d,y,p);return f.asyncQueue.enqueueAndForget((async()=>wy(await _p(f),E))),()=>{y.Nu(),f.asyncQueue.enqueueAndForget((async()=>_y(await _p(f),E)))}})(zf(s),a,i,o)}function Vy(n,e){return(function(r,i){const o=new zi;return r.asyncQueue.enqueueAndForget((async()=>qL(await sV(r),i,o))),o.promise})(zf(n),e)}function G3(n,e,t){const r=t.docs.get(e._key),i=new u0(n);return new Es(n,i,e._key,r,new Bl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV={maxAttempts:5};function Mc(n,e){if((n=Xe(n)).firestore!==e)throw new me(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=i0(e)}get(e){const t=Mc(e,this._firestore),r=new wV(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return De(24041);const o=i[0];if(o.isFoundDocument())return new Ep(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Ep(this._firestore,r,t._key,null,t.converter);throw De(18433,{doc:o})}))}set(e,t,r){const i=Mc(e,this._firestore),o=$3(i.converter,t,r),s=L3(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){const o=Mc(e,this._firestore);let s;return s=typeof(t=Xe(t))=="string"||t instanceof Hf?F3(this._dataReader,"Transaction.update",o._key,t,r,i):V3(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){const t=Mc(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV extends IV{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Mc(e,this._firestore),r=new u0(this._firestore);return super.get(e).then((i=>new Es(this._firestore,r,t._key,i._document,new Bl(!1,!1),t.converter)))}}function Fy(n,e,t){n=Or(n,Io);const r={...CV,...t};return(function(o){if(o.maxAttempts<1)throw new me(re.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){const u=new zi;return o.asyncQueue.enqueueAndForget((async()=>{const f=await aV(o);new rV(o.asyncQueue,f,a,s,u).ju()})),u.promise})(zf(n),(i=>e(new SV(n,i))),r)}function hr(){return new by("serverTimestamp")}function Ap(n){return new Py("increment",n)}(function(e,t=!0){(function(i){yu=i})(mu),Jl(new ba("firestore",((r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Io(new g9(r.getProvider("auth-internal")),new w9(s,r.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new me(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yf(f.options.projectId,d)})(s,i),s);return o={useFetchStreams:t,...o},a._setSettings(o),a}),"PUBLIC").setMultipleInstances(!0)),ys(xE,EE,e),ys(xE,EE,"esm2020")})();const Mg={apiKey:"AIzaSyCEP8h9z4pW9NIV3qEd2XrrAOGkkgZGAiQ",authDomain:"borealabsweb.firebaseapp.com",projectId:"borealabsweb",storageBucket:"borealabsweb.appspot.com",messagingSenderId:"338356857449",appId:"1:338356857449:web:6e6515fa93bb8d4c1390f8"},bV=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"];let xa=bV.every(n=>typeof Mg[n]=="string"&&Mg[n].length>0),Tm=null,Vi=null,wt=null,tf=null;try{if(xa){Tm=_I(Mg),Vi=c9(Tm),wt=fV(Tm),tf=new Fi;try{tf.setCustomParameters({prompt:"select_account"})}catch(n){console.debug("No se pudieron establecer parmetros de GoogleAuthProvider:",n?.message||n)}}else console.warn("Firebase no configurado: faltan variables en .env (VITE_FIREBASE_*)")}catch(n){console.error("Error inicializando Firebase:",n),xa=!1}const q3="/assets/logo-DQzvxpvb.png";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RV=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),_A=n=>{const e=RV(n);return e.charAt(0).toUpperCase()+e.slice(1)},K3=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),NV=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=B.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},u)=>B.createElement("svg",{ref:u,...OV,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:K3("lucide",i),...!o&&!NV(a)&&{"aria-hidden":"true"},...a},[...s.map(([f,d])=>B.createElement(f,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=(n,e)=>{const t=B.forwardRef(({className:r,...i},o)=>B.createElement(DV,{ref:o,iconNode:e,className:K3(`lucide-${PV(_A(n))}`,`lucide-${n}`,r),...i}));return t.displayName=_A(n),t};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Gh=vi("circle-check",kV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],LV=vi("download",MV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xA=vi("file-text",VV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],au=vi("loader-circle",FV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],UV=vi("mail",BV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],zV=vi("menu",jV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=[["path",{d:"M5 12h14",key:"1ays0h"}]],WV=vi("minus",HV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],GV=vi("plus",$V);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],KV=vi("qr-code",qV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],X3=vi("triangle-alert",XV);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Y3=vi("x",YV),QV=({user:n,activeTab:e,onNavigate:t})=>{const[r,i]=B.useState(!1),[o,s]=B.useState(!1),a=async()=>{try{await G5(Vi)}catch(u){console.error("No se pudo cerrar sesin:",u)}};return T.jsxs("header",{className:"fixed top-0 inset-x-0 z-50 w-full glass-effect",children:[T.jsxs("nav",{className:"max-w-7xl mx-auto flex items-center justify-between px-4 py-4 md:py-5",children:[T.jsxs("a",{href:"#",className:"flex items-center gap-3",children:[T.jsx("img",{src:q3,alt:"Boreal Labs",className:"h-9 md:h-11 w-auto"}),T.jsx("span",{className:"sr-only",children:"Boreal Labs"})]}),T.jsxs("div",{className:"hidden md:flex items-center gap-7",children:[T.jsxs("button",{className:`relative pb-2 text-base transition-colors ${e==="certs"?"text-white":"text-gray-300 hover:text-white"}`,onClick:()=>{t&&t("certs")},children:["Certificados",e==="certs"&&T.jsx(kn.span,{layoutId:"nav-underline",className:"absolute left-0 right-0 -bottom-1.5 h-[3px] rounded-full bg-gradient-to-r from-boreal-blue to-boreal-purple",transition:{type:"spring",stiffness:500,damping:35}})]}),T.jsxs("button",{className:`relative pb-2 text-base transition-colors ${e==="points"?"text-white":"text-gray-300 hover:text-white"}`,onClick:()=>{t&&t("points")},children:["Mis puntos",e==="points"&&T.jsx(kn.span,{layoutId:"nav-underline",className:"absolute left-0 right-0 -bottom-1.5 h-[3px] rounded-full bg-gradient-to-r from-boreal-blue to-boreal-purple",transition:{type:"spring",stiffness:500,damping:35}})]}),T.jsxs("button",{className:`relative pb-2 text-base transition-colors ${e==="market"?"text-white":"text-gray-300 hover:text-white"}`,onClick:()=>{t&&t("market")},children:["Marketplace",e==="market"&&T.jsx(kn.span,{layoutId:"nav-underline",className:"absolute left-0 right-0 -bottom-1.5 h-[3px] rounded-full bg-gradient-to-r from-boreal-blue to-boreal-purple",transition:{type:"spring",stiffness:500,damping:35}})]}),T.jsx("a",{href:"https://borealabs.org",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-lg text-base bg-gradient-to-r from-boreal-purple to-boreal-blue text-white shadow font-bold",children:"Pgina principal"}),n&&T.jsx("button",{onClick:()=>{s(!0)},className:"ml-1 px-3 py-2 rounded-md text-sm border border-white/15 text-white/90 hover:text-white hover:bg-white/10",children:"Cerrar sesin"})]}),T.jsx("div",{className:"md:hidden flex items-center gap-2",children:T.jsx("button",{className:`md:hidden p-2 rounded-md hover:bg-white/10 ${o?"opacity-60 pointer-events-none":""}`,"aria-label":"Abrir men",onClick:()=>{i(u=>!u)},disabled:o,children:r?T.jsx(Y3,{className:"w-7 h-7 text-white"}):T.jsx(zV,{className:"w-7 h-7 text-white"})})})]}),T.jsx(lf,{initial:!1,children:r&&T.jsx(kn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2,ease:"easeOut"},className:"md:hidden border-t border-white/10 bg-white/5 overflow-hidden",children:T.jsxs("div",{className:"max-w-7xl mx-auto p-4 flex flex-col gap-3 items-center",children:[T.jsx("button",{className:"px-3 py-2 rounded-md text-sm hover:bg-white/10 text-center",onClick:()=>{t&&t("certs"),i(!1)},children:"Certificados"}),T.jsx("button",{className:"px-3 py-2 rounded-md text-sm hover:bg-white/10 text-center",onClick:()=>{t&&t("points"),i(!1)},children:"Mis puntos"}),T.jsx("button",{className:"px-3 py-2 rounded-md text-sm hover:bg-white/10 text-center",onClick:()=>{t&&t("market"),i(!1)},children:"Marketplace"}),T.jsx("a",{href:"https://borealabs.org",target:"_blank",rel:"noopener noreferrer",className:"w-full px-3 py-2 rounded-md text-sm bg-gradient-to-r from-boreal-purple to-boreal-blue text-white text-center font-bold",onClick:()=>i(!1),children:"Pgina principal"}),n&&T.jsx("button",{className:"mt-1 px-3 py-2 rounded-md text-sm hover:bg-white/10 text-red-300 hover:text-red-200 text-center",onClick:()=>{i(!1),s(!0)},children:"Cerrar sesin"})]})})}),T.jsx(lf,{children:o&&T.jsxs(kn.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4 min-h-dvh pt-[env(safe-area-inset-top)] pb-[env(safe-area-inset-bottom)]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[T.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>s(!1)}),T.jsxs(kn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},className:"relative z-10 w-[min(92vw,420px)] rounded-2xl glass-effect bg-white/10 p-5 text-center mt-10 md:mt-0",children:[T.jsx("h3",{className:"text-xl font-semibold mb-1",children:"Cerrar sesin"}),T.jsx("p",{className:"text-gray-300 mb-4",children:"Seguro que deseas cerrar tu sesin?"}),T.jsxs("div",{className:"flex items-center justify-center gap-3",children:[T.jsx("button",{className:"px-4 py-2 rounded-md border border-white/20 text-white hover:bg-white/10",onClick:()=>{s(!1)},children:"Cancelar"}),T.jsx("button",{className:"px-4 py-2 rounded-md bg-gradient-to-r from-boreal-purple to-boreal-blue text-white font-bold",onClick:async()=>{i(!1),await a(),s(!1)},children:"Confirmar"})]})]})]})})]})},ZV=()=>T.jsx("footer",{className:"w-full mt-12 py-6 glass-effect",children:T.jsxs("div",{className:"max-w-7xl mx-auto text-center text-gray-400 text-sm",children:[" ",new Date().getFullYear()," Boreal Labs. Todos los derechos reservados."]})});var EA;(function(n){n.IndexedDbLocal="INDEXED_DB_LOCAL",n.InMemory="IN_MEMORY",n.BrowserLocal="BROWSER_LOCAL",n.BrowserSession="BROWSER_SESSION"})(EA||(EA={}));var AA;(function(n){n.APPLE="apple.com",n.FACEBOOK="facebook.com",n.GAME_CENTER="gc.apple.com",n.GITHUB="github.com",n.GOOGLE="google.com",n.MICROSOFT="microsoft.com",n.PLAY_GAMES="playgames.google.com",n.TWITTER="twitter.com",n.YAHOO="yahoo.com",n.PASSWORD="password",n.PHONE="phone"})(AA||(AA={}));const JV=If("FirebaseAuthentication",{web:()=>AT(()=>import("./web-Chqc8TVq.js"),[]).then(n=>new n.FirebaseAuthenticationWeb)});function TA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Q3(...n){return e=>{let t=!1;const r=n.map(i=>{const o=TA(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():TA(n[i],null)}}}}function Da(...n){return B.useCallback(Q3(...n),n)}function Tp(n){const e=tF(n),t=B.forwardRef((r,i)=>{const{children:o,...s}=r,a=B.Children.toArray(o),u=a.find(rF);if(u){const f=u.props.children,d=a.map(p=>p===u?B.Children.count(f)>1?B.Children.only(null):B.isValidElement(f)?f.props.children:null:p);return T.jsx(e,{...s,ref:i,children:B.isValidElement(f)?B.cloneElement(f,void 0,d):null})}return T.jsx(e,{...s,ref:i,children:o})});return t.displayName=`${n}.Slot`,t}var eF=Tp("Slot");function tF(n){const e=B.forwardRef((t,r)=>{const{children:i,...o}=t;if(B.isValidElement(i)){const s=oF(i),a=iF(o,i.props);return i.type!==B.Fragment&&(a.ref=r?Q3(r,s):s),B.cloneElement(i,a)}return B.Children.count(i)>1?B.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var nF=Symbol("radix.slottable");function rF(n){return B.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===nF}function iF(n,e){const t={...e};for(const r in e){const i=n[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?t[r]=(...a)=>{const u=o(...a);return i(...a),u}:i&&(t[r]=i):r==="style"?t[r]={...i,...o}:r==="className"&&(t[r]=[i,o].filter(Boolean).join(" "))}return{...n,...t}}function oF(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Z3(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=Z3(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function J3(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=Z3(n))&&(r&&(r+=" "),r+=e);return r}const CA=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,IA=J3,eb=(n,e)=>t=>{var r;if(e?.variants==null)return IA(n,t?.class,t?.className);const{variants:i,defaultVariants:o}=e,s=Object.keys(i).map(f=>{const d=t?.[f],p=o?.[f];if(d===null)return null;const g=CA(d)||CA(p);return i[f][g]}),a=t&&Object.entries(t).reduce((f,d)=>{let[p,g]=d;return g===void 0||(f[p]=g),f},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,d)=>{let{class:p,className:g,...y}=d;return Object.entries(y).every(E=>{let[A,I]=E;return Array.isArray(I)?I.includes({...o,...a}[A]):{...o,...a}[A]===I})?[...f,p,g]:f},[]);return IA(n,s,u,t?.class,t?.className)},By="-",sF=n=>{const e=lF(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:s=>{const a=s.split(By);return a[0]===""&&a.length!==1&&a.shift(),tb(a,e)||aF(s)},getConflictingClassGroupIds:(s,a)=>{const u=t[s]||[];return a&&r[s]?[...u,...r[s]]:u}}},tb=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?tb(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=n.join(By);return e.validators.find(({validator:s})=>s(o))?.classGroupId},SA=/^\[(.+)\]$/,aF=n=>{if(SA.test(n)){const e=SA.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},lF=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)Lg(t[i],r,i,e);return r},Lg=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const o=i===""?e:bA(e,i);o.classGroupId=t;return}if(typeof i=="function"){if(uF(i)){Lg(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([o,s])=>{Lg(s,bA(e,o),t,r)})})},bA=(n,e)=>{let t=n;return e.split(By).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},uF=n=>n.isThemeGetter,cF=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(o,s)=>{t.set(o,s),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let s=t.get(o);if(s!==void 0)return s;if((s=r.get(o))!==void 0)return i(o,s),s},set(o,s){t.has(o)?t.set(o,s):i(o,s)}}},Vg="!",Fg=":",fF=Fg.length,dF=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const o=[];let s=0,a=0,u=0,f;for(let E=0;E<i.length;E++){let A=i[E];if(s===0&&a===0){if(A===Fg){o.push(i.slice(u,E)),u=E+fF;continue}if(A==="/"){f=E;continue}}A==="["?s++:A==="]"?s--:A==="("?a++:A===")"&&a--}const d=o.length===0?i:i.substring(u),p=hF(d),g=p!==d,y=f&&f>u?f-u:void 0;return{modifiers:o,hasImportantModifier:g,baseClassName:p,maybePostfixModifierPosition:y}};if(e){const i=e+Fg,o=r;r=s=>s.startsWith(i)?o(s.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=o=>t({className:o,parseClassName:i})}return r},hF=n=>n.endsWith(Vg)?n.substring(0,n.length-1):n.startsWith(Vg)?n.substring(1):n,pF=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(s=>{s[0]==="["||e[s]?(i.push(...o.sort(),s),o=[]):o.push(s)}),i.push(...o.sort()),i}},mF=n=>({cache:cF(n.cacheSize),parseClassName:dF(n),sortModifiers:pF(n),...sF(n)}),gF=/\s+/,vF=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,s=[],a=n.trim().split(gF);let u="";for(let f=a.length-1;f>=0;f-=1){const d=a[f],{isExternal:p,modifiers:g,hasImportantModifier:y,baseClassName:E,maybePostfixModifierPosition:A}=t(d);if(p){u=d+(u.length>0?" "+u:u);continue}let I=!!A,N=r(I?E.substring(0,A):E);if(!N){if(!I){u=d+(u.length>0?" "+u:u);continue}if(N=r(E),!N){u=d+(u.length>0?" "+u:u);continue}I=!1}const R=o(g).join(":"),k=y?R+Vg:R,j=k+N;if(s.includes(j))continue;s.push(j);const H=i(N,I);for(let $=0;$<H.length;++$){const b=H[$];s.push(k+b)}u=d+(u.length>0?" "+u:u)}return u};function yF(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=nb(e))&&(r&&(r+=" "),r+=t);return r}const nb=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=nb(n[r]))&&(t&&(t+=" "),t+=e);return t};function wF(n,...e){let t,r,i,o=s;function s(u){const f=e.reduce((d,p)=>p(d),n());return t=mF(f),r=t.cache.get,i=t.cache.set,o=a,a(u)}function a(u){const f=r(u);if(f)return f;const d=vF(u,t);return i(u,d),d}return function(){return o(yF.apply(null,arguments))}}const rn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},rb=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ib=/^\((?:(\w[\w-]*):)?(.+)\)$/i,_F=/^\d+\/\d+$/,xF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,EF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,AF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,TF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,CF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Sl=n=>_F.test(n),qe=n=>!!n&&!Number.isNaN(Number(n)),ss=n=>!!n&&Number.isInteger(Number(n)),Cm=n=>n.endsWith("%")&&qe(n.slice(0,-1)),go=n=>xF.test(n),IF=()=>!0,SF=n=>EF.test(n)&&!AF.test(n),ob=()=>!1,bF=n=>TF.test(n),PF=n=>CF.test(n),RF=n=>!Te(n)&&!Ce(n),NF=n=>Au(n,lb,ob),Te=n=>rb.test(n),da=n=>Au(n,ub,SF),Im=n=>Au(n,LF,qe),PA=n=>Au(n,sb,ob),OF=n=>Au(n,ab,PF),xh=n=>Au(n,cb,bF),Ce=n=>ib.test(n),Tc=n=>Tu(n,ub),DF=n=>Tu(n,VF),RA=n=>Tu(n,sb),kF=n=>Tu(n,lb),MF=n=>Tu(n,ab),Eh=n=>Tu(n,cb,!0),Au=(n,e,t)=>{const r=rb.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},Tu=(n,e,t=!1)=>{const r=ib.exec(n);return r?r[1]?e(r[1]):t:!1},sb=n=>n==="position"||n==="percentage",ab=n=>n==="image"||n==="url",lb=n=>n==="length"||n==="size"||n==="bg-size",ub=n=>n==="length",LF=n=>n==="number",VF=n=>n==="family-name",cb=n=>n==="shadow",FF=()=>{const n=rn("color"),e=rn("font"),t=rn("text"),r=rn("font-weight"),i=rn("tracking"),o=rn("leading"),s=rn("breakpoint"),a=rn("container"),u=rn("spacing"),f=rn("radius"),d=rn("shadow"),p=rn("inset-shadow"),g=rn("text-shadow"),y=rn("drop-shadow"),E=rn("blur"),A=rn("perspective"),I=rn("aspect"),N=rn("ease"),R=rn("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],H=()=>[...j(),Ce,Te],$=()=>["auto","hidden","clip","visible","scroll"],b=()=>["auto","contain","none"],S=()=>[Ce,Te,u],O=()=>[Sl,"full","auto",...S()],V=()=>[ss,"none","subgrid",Ce,Te],L=()=>["auto",{span:["full",ss,Ce,Te]},ss,Ce,Te],U=()=>[ss,"auto",Ce,Te],D=()=>["auto","min","max","fr",Ce,Te],ue=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],le=()=>["start","end","center","stretch","center-safe","end-safe"],Ue=()=>["auto",...S()],Ie=()=>[Sl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],Z=()=>[n,Ce,Te],ve=()=>[...j(),RA,PA,{position:[Ce,Te]}],pe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",kF,NF,{size:[Ce,Te]}],ie=()=>[Cm,Tc,da],Ee=()=>["","none","full",f,Ce,Te],Pe=()=>["",qe,Tc,da],We=()=>["solid","dashed","dotted","double"],Ge=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ve=()=>[qe,Cm,RA,PA],ne=()=>["","none",E,Ce,Te],ye=()=>["none",qe,Ce,Te],He=()=>["none",qe,Ce,Te],bt=()=>[qe,Ce,Te],Pt=()=>[Sl,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[go],breakpoint:[go],color:[IF],container:[go],"drop-shadow":[go],ease:["in","out","in-out"],font:[RF],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[go],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[go],shadow:[go],spacing:["px",qe],text:[go],"text-shadow":[go],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Sl,Te,Ce,I]}],container:["container"],columns:[{columns:[qe,Te,Ce,a]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:H()}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[ss,"auto",Ce,Te]}],basis:[{basis:[Sl,"full","auto",a,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[qe,Sl,"auto","initial","none",Te]}],grow:[{grow:["",qe,Ce,Te]}],shrink:[{shrink:["",qe,Ce,Te]}],order:[{order:[ss,"first","last","none",Ce,Te]}],"grid-cols":[{"grid-cols":V()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":V()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...ue(),"normal"]}],"justify-items":[{"justify-items":[...le(),"normal"]}],"justify-self":[{"justify-self":["auto",...le()]}],"align-content":[{content:["normal",...ue()]}],"align-items":[{items:[...le(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...le(),{baseline:["","last"]}]}],"place-content":[{"place-content":ue()}],"place-items":[{"place-items":[...le(),"baseline"]}],"place-self":[{"place-self":["auto",...le()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:Ue()}],mx:[{mx:Ue()}],my:[{my:Ue()}],ms:[{ms:Ue()}],me:[{me:Ue()}],mt:[{mt:Ue()}],mr:[{mr:Ue()}],mb:[{mb:Ue()}],ml:[{ml:Ue()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ie()}],w:[{w:[a,"screen",...Ie()]}],"min-w":[{"min-w":[a,"screen","none",...Ie()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...Ie()]}],h:[{h:["screen","lh",...Ie()]}],"min-h":[{"min-h":["screen","lh","none",...Ie()]}],"max-h":[{"max-h":["screen","lh",...Ie()]}],"font-size":[{text:["base",t,Tc,da]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ce,Im]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Cm,Te]}],"font-family":[{font:[DF,Te,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ce,Te]}],"line-clamp":[{"line-clamp":[qe,"none",Ce,Im]}],leading:[{leading:[o,...S()]}],"list-image":[{"list-image":["none",Ce,Te]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ce,Te]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Z()}],"text-color":[{text:Z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...We(),"wavy"]}],"text-decoration-thickness":[{decoration:[qe,"from-font","auto",Ce,da]}],"text-decoration-color":[{decoration:Z()}],"underline-offset":[{"underline-offset":[qe,"auto",Ce,Te]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce,Te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce,Te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ve()}],"bg-repeat":[{bg:pe()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ss,Ce,Te],radial:["",Ce,Te],conic:[ss,Ce,Te]},MF,OF]}],"bg-color":[{bg:Z()}],"gradient-from-pos":[{from:ie()}],"gradient-via-pos":[{via:ie()}],"gradient-to-pos":[{to:ie()}],"gradient-from":[{from:Z()}],"gradient-via":[{via:Z()}],"gradient-to":[{to:Z()}],rounded:[{rounded:Ee()}],"rounded-s":[{"rounded-s":Ee()}],"rounded-e":[{"rounded-e":Ee()}],"rounded-t":[{"rounded-t":Ee()}],"rounded-r":[{"rounded-r":Ee()}],"rounded-b":[{"rounded-b":Ee()}],"rounded-l":[{"rounded-l":Ee()}],"rounded-ss":[{"rounded-ss":Ee()}],"rounded-se":[{"rounded-se":Ee()}],"rounded-ee":[{"rounded-ee":Ee()}],"rounded-es":[{"rounded-es":Ee()}],"rounded-tl":[{"rounded-tl":Ee()}],"rounded-tr":[{"rounded-tr":Ee()}],"rounded-br":[{"rounded-br":Ee()}],"rounded-bl":[{"rounded-bl":Ee()}],"border-w":[{border:Pe()}],"border-w-x":[{"border-x":Pe()}],"border-w-y":[{"border-y":Pe()}],"border-w-s":[{"border-s":Pe()}],"border-w-e":[{"border-e":Pe()}],"border-w-t":[{"border-t":Pe()}],"border-w-r":[{"border-r":Pe()}],"border-w-b":[{"border-b":Pe()}],"border-w-l":[{"border-l":Pe()}],"divide-x":[{"divide-x":Pe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Pe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...We(),"hidden","none"]}],"divide-style":[{divide:[...We(),"hidden","none"]}],"border-color":[{border:Z()}],"border-color-x":[{"border-x":Z()}],"border-color-y":[{"border-y":Z()}],"border-color-s":[{"border-s":Z()}],"border-color-e":[{"border-e":Z()}],"border-color-t":[{"border-t":Z()}],"border-color-r":[{"border-r":Z()}],"border-color-b":[{"border-b":Z()}],"border-color-l":[{"border-l":Z()}],"divide-color":[{divide:Z()}],"outline-style":[{outline:[...We(),"none","hidden"]}],"outline-offset":[{"outline-offset":[qe,Ce,Te]}],"outline-w":[{outline:["",qe,Tc,da]}],"outline-color":[{outline:Z()}],shadow:[{shadow:["","none",d,Eh,xh]}],"shadow-color":[{shadow:Z()}],"inset-shadow":[{"inset-shadow":["none",p,Eh,xh]}],"inset-shadow-color":[{"inset-shadow":Z()}],"ring-w":[{ring:Pe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Z()}],"ring-offset-w":[{"ring-offset":[qe,da]}],"ring-offset-color":[{"ring-offset":Z()}],"inset-ring-w":[{"inset-ring":Pe()}],"inset-ring-color":[{"inset-ring":Z()}],"text-shadow":[{"text-shadow":["none",g,Eh,xh]}],"text-shadow-color":[{"text-shadow":Z()}],opacity:[{opacity:[qe,Ce,Te]}],"mix-blend":[{"mix-blend":[...Ge(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ge()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[qe]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ve()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ve()}],"mask-image-linear-from-color":[{"mask-linear-from":Z()}],"mask-image-linear-to-color":[{"mask-linear-to":Z()}],"mask-image-t-from-pos":[{"mask-t-from":Ve()}],"mask-image-t-to-pos":[{"mask-t-to":Ve()}],"mask-image-t-from-color":[{"mask-t-from":Z()}],"mask-image-t-to-color":[{"mask-t-to":Z()}],"mask-image-r-from-pos":[{"mask-r-from":Ve()}],"mask-image-r-to-pos":[{"mask-r-to":Ve()}],"mask-image-r-from-color":[{"mask-r-from":Z()}],"mask-image-r-to-color":[{"mask-r-to":Z()}],"mask-image-b-from-pos":[{"mask-b-from":Ve()}],"mask-image-b-to-pos":[{"mask-b-to":Ve()}],"mask-image-b-from-color":[{"mask-b-from":Z()}],"mask-image-b-to-color":[{"mask-b-to":Z()}],"mask-image-l-from-pos":[{"mask-l-from":Ve()}],"mask-image-l-to-pos":[{"mask-l-to":Ve()}],"mask-image-l-from-color":[{"mask-l-from":Z()}],"mask-image-l-to-color":[{"mask-l-to":Z()}],"mask-image-x-from-pos":[{"mask-x-from":Ve()}],"mask-image-x-to-pos":[{"mask-x-to":Ve()}],"mask-image-x-from-color":[{"mask-x-from":Z()}],"mask-image-x-to-color":[{"mask-x-to":Z()}],"mask-image-y-from-pos":[{"mask-y-from":Ve()}],"mask-image-y-to-pos":[{"mask-y-to":Ve()}],"mask-image-y-from-color":[{"mask-y-from":Z()}],"mask-image-y-to-color":[{"mask-y-to":Z()}],"mask-image-radial":[{"mask-radial":[Ce,Te]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ve()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ve()}],"mask-image-radial-from-color":[{"mask-radial-from":Z()}],"mask-image-radial-to-color":[{"mask-radial-to":Z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[qe]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ve()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ve()}],"mask-image-conic-from-color":[{"mask-conic-from":Z()}],"mask-image-conic-to-color":[{"mask-conic-to":Z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ve()}],"mask-repeat":[{mask:pe()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ce,Te]}],filter:[{filter:["","none",Ce,Te]}],blur:[{blur:ne()}],brightness:[{brightness:[qe,Ce,Te]}],contrast:[{contrast:[qe,Ce,Te]}],"drop-shadow":[{"drop-shadow":["","none",y,Eh,xh]}],"drop-shadow-color":[{"drop-shadow":Z()}],grayscale:[{grayscale:["",qe,Ce,Te]}],"hue-rotate":[{"hue-rotate":[qe,Ce,Te]}],invert:[{invert:["",qe,Ce,Te]}],saturate:[{saturate:[qe,Ce,Te]}],sepia:[{sepia:["",qe,Ce,Te]}],"backdrop-filter":[{"backdrop-filter":["","none",Ce,Te]}],"backdrop-blur":[{"backdrop-blur":ne()}],"backdrop-brightness":[{"backdrop-brightness":[qe,Ce,Te]}],"backdrop-contrast":[{"backdrop-contrast":[qe,Ce,Te]}],"backdrop-grayscale":[{"backdrop-grayscale":["",qe,Ce,Te]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[qe,Ce,Te]}],"backdrop-invert":[{"backdrop-invert":["",qe,Ce,Te]}],"backdrop-opacity":[{"backdrop-opacity":[qe,Ce,Te]}],"backdrop-saturate":[{"backdrop-saturate":[qe,Ce,Te]}],"backdrop-sepia":[{"backdrop-sepia":["",qe,Ce,Te]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ce,Te]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[qe,"initial",Ce,Te]}],ease:[{ease:["linear","initial",N,Ce,Te]}],delay:[{delay:[qe,Ce,Te]}],animate:[{animate:["none",R,Ce,Te]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[A,Ce,Te]}],"perspective-origin":[{"perspective-origin":H()}],rotate:[{rotate:ye()}],"rotate-x":[{"rotate-x":ye()}],"rotate-y":[{"rotate-y":ye()}],"rotate-z":[{"rotate-z":ye()}],scale:[{scale:He()}],"scale-x":[{"scale-x":He()}],"scale-y":[{"scale-y":He()}],"scale-z":[{"scale-z":He()}],"scale-3d":["scale-3d"],skew:[{skew:bt()}],"skew-x":[{"skew-x":bt()}],"skew-y":[{"skew-y":bt()}],transform:[{transform:[Ce,Te,"","none","gpu","cpu"]}],"transform-origin":[{origin:H()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Pt()}],"translate-x":[{"translate-x":Pt()}],"translate-y":[{"translate-y":Pt()}],"translate-z":[{"translate-z":Pt()}],"translate-none":["translate-none"],accent:[{accent:Z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce,Te]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce,Te]}],fill:[{fill:["none",...Z()]}],"stroke-w":[{stroke:[qe,Tc,da,Im]}],stroke:[{stroke:["none",...Z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},BF=wF(FF);function Vs(...n){return BF(J3(n))}const UF=eb("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ut=B.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},o)=>{const s=r?eF:"button";return T.jsx(s,{className:Vs(UF({variant:e,size:t,className:n})),ref:o,...i})});Ut.displayName="Button";const jF=1,zF=1e6;let Sm=0;function HF(){return Sm=(Sm+1)%Number.MAX_SAFE_INTEGER,Sm.toString()}const bm=new Map,NA=n=>{if(bm.has(n))return;const e=setTimeout(()=>{bm.delete(n),nf({type:"REMOVE_TOAST",toastId:n})},zF);bm.set(n,e)},WF=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,jF)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?NA(t):n.toasts.forEach(r=>{NA(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},qh=[];let Kh={toasts:[]};function nf(n){Kh=WF(Kh,n),qh.forEach(e=>{e(Kh)})}function $F({...n}){const e=HF(),t=i=>nf({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>nf({type:"DISMISS_TOAST",toastId:e});return nf({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function c0(){const[n,e]=B.useState(Kh);return B.useEffect(()=>(qh.push(e),()=>{const t=qh.indexOf(e);t>-1&&qh.splice(t,1)}),[n]),{...n,toast:$F,dismiss:t=>nf({type:"DISMISS_TOAST",toastId:t})}}const GF=n=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...n,children:T.jsx("path",{d:"M20.283 10.356h-8.327v3.451h4.792c-.446 2.193-2.313 3.453-4.792 3.453a5.27 5.27 0 0 1-5.279-5.28 5.27 5.27 0 0 1 5.279-5.279c1.259 0 2.397.447 3.29 1.178l2.6-2.599c-1.584-1.381-3.615-2.233-5.89-2.233a8.908 8.908 0 0 0-8.934 8.934 8.908 8.908 0 0 0 8.934 8.934c4.956 0 8.641-3.52 8.641-8.781 0-.593-.053-1.165-.154-1.722z"})}),qF=()=>{const[n,e]=B.useState(null),{toast:t}=c0(),[r,i]=B.useState(!0),[o,s]=B.useState(""),[a,u]=B.useState("");xn.useEffect(()=>{i(mi.getPlatform()==="web")},[]);const f=()=>{if(!Vi||!xa)throw new Error("Firebase no est configurado. Completa el archivo .env con VITE_FIREBASE_* y reinicia.")},d=async()=>{e("email");try{if(f(),!o||!a)throw new Error("Ingresa correo y contrasea.");await M5(Vi,o.trim(),a),t({title:"Bienvenido!",description:"Inicio de sesin exitoso."})}catch(g){console.error(g);let y=String(g?.message||g?.code||"No se pudo iniciar sesin.");String(g?.code).includes("auth/invalid-credential")||String(g?.code).includes("auth/invalid-login-credentials")?y="Credenciales invlidas. Verifica tu correo y contrasea.":String(g?.code).includes("auth/user-not-found")?y="No existe una cuenta con ese correo.":String(g?.code).includes("auth/too-many-requests")&&(y="Demasiados intentos. Intntalo ms tarde."),t({title:"Error al iniciar sesin",description:y,variant:"destructive"})}finally{e(null)}},p=async()=>{e("google");try{if(!Vi||!tf)throw new Error("Firebase no est configurado o el proveedor de Google no est disponible.");if(mi.getPlatform()!=="web")try{const{credential:y}=await JV.signInWithGoogle({scopes:["email","profile"]}),E=y?.idToken;if(!E)throw new Error("No se recibi idToken de Google.");const A=Fi.credential(E);await Bp(Vi,A)}catch(y){console.error("Login nativo con Google fall:",y);const E=String(y?.message||y?.code||"");if(E.toLowerCase().includes("no credentials available")){t({title:"No hay credenciales de Google en el dispositivo",description:"Asegrate de tener una cuenta de Google aadida en el dispositivo y que Google Play Services est actualizado. Tambin verifica la configuracin de OAuth/cliente web en Firebase. Puedes ingresar con correo y contrasea como alternativa.",variant:"destructive"});return}t({title:"Error con Google (nativo)",description:E||"No se pudo iniciar sesin con Google en el dispositivo.",variant:"destructive"});return}else await yM(Vi,tf)}catch(g){console.error(g);const y=g&&g.code?String(g.code):"";if(y==="auth/popup-blocked"&&mi.getPlatform()==="web")try{await AM(Vi,tf);return}catch(A){console.error("Fallback a redirect fall:",A)}let E=g&&(g.message||g.code)?String(g.message||g.code):"No se pudo iniciar sesin con Google.";y==="auth/operation-not-allowed"?E="El proveedor de Google no est habilitado. Ve a Firebase Console > Authentication > Sign-in method y habilita Google (elige un Support email) y guarda.":y==="auth/unauthorized-domain"&&(E="Dominio no autorizado. En Firebase Console > Authentication > Settings > Authorized domains, agrega localhost y 127.0.0.1 (los puertos no importan)."),t({title:"Error con Google",description:E,variant:"destructive"})}e(!1)};return T.jsxs("div",{className:"min-h-screen min-h-dvh w-full bg-boreal-dark relative overflow-hidden",children:[T.jsxs("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[T.jsx("div",{className:"absolute top-0 left-0 w-full h-full animate-move-bg",style:{background:"radial-gradient(ellipse 120% 90% at 20% 30%, rgba(105,230,175,0.45) 0%, rgba(49,98,237,0.35) 60%, rgba(190,88,240,0.32) 100%)"}}),T.jsx("div",{className:"absolute bottom-0 right-0 w-full h-full animate-move-bg-reverse",style:{background:"radial-gradient(ellipse 110% 80% at 80% 70%, rgba(49,98,237,0.38) 0%, rgba(190,88,240,0.32) 60%, rgba(105,230,175,0.28) 100%)"}})]}),T.jsx("div",{className:"relative z-10 min-h-screen min-h-dvh w-full flex items-center justify-center px-4 pt-[env(safe-area-inset-top)] pb-[env(safe-area-inset-bottom)]",children:T.jsxs(kn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative z-10 w-full max-w-md sm:w-[420px] mx-auto p-6 sm:p-8 rounded-3xl shadow-2xl bg-[#0a1836] bg-opacity-95 backdrop-blur-lg border border-white/20",children:[T.jsx(Sp,{children:T.jsx("title",{children:"Iniciar Sesin - Borea Wallet"})}),T.jsxs("div",{className:"flex flex-col items-center mb-3",children:[T.jsx("img",{src:q3,alt:"Logo Boreal",className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 object-contain mb-2 drop-shadow-lg"}),T.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-center tracking-tight",children:T.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-boreal-aqua to-boreal-blue drop-shadow-lg",children:"Accede a tu Wallet"})})]}),T.jsx("p",{className:"text-center text-gray-200 mb-8 text-base font-medium",children:"Inicia sesin para ver tus certificados, puntos y recompensas."}),T.jsxs(Ut,{variant:"outline",className:"w-full border-white/30 text-white bg-boreal-blue/30 hover:bg-boreal-blue/50 hover:scale-[1.03] transition-all duration-200 shadow-lg flex items-center justify-center gap-2 py-2 text-lg font-semibold",onClick:p,disabled:n==="google",children:[n==="google"?T.jsx(au,{className:"w-5 h-5 animate-spin"}):T.jsx(GF,{className:"w-5 h-5 mr-2"}),"Ingresar con Google"]}),T.jsxs("div",{className:"w-full flex items-center my-5",children:[T.jsx("hr",{className:"flex-grow border-t border-gray-400 opacity-50"}),T.jsx("span",{className:"mx-4 text-gray-400 font-semibold select-none",children:"O"}),T.jsx("hr",{className:"flex-grow border-t border-gray-400 opacity-50"})]}),T.jsxs("div",{className:"space-y-3 mb-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"email",className:"block text-sm text-gray-200 mb-1",children:"Correo"}),T.jsx("input",{id:"email",type:"email",autoComplete:"email",className:"w-full rounded-lg bg-white/10 border border-white/20 px-3 py-2 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-boreal-aqua/60",placeholder:"tucorreo@ejemplo.com",value:o,onChange:g=>s(g.target.value)})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"password",className:"block text-sm text-gray-200 mb-1",children:"Contrasea"}),T.jsx("input",{id:"password",type:"password",autoComplete:"current-password",className:"w-full rounded-lg bg-white/10 border border-white/20 px-3 py-2 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-boreal-aqua/60",placeholder:"Tu contrasea",value:a,onChange:g=>u(g.target.value)})]}),T.jsxs(Ut,{className:"w-full bg-gradient-to-r from-boreal-aqua to-boreal-blue text-boreal-dark font-bold py-2 hover:opacity-90 shadow-lg transition-all duration-200 flex items-center justify-center gap-2",onClick:d,disabled:n==="email",children:[n==="email"?T.jsx(au,{className:"w-4 h-4 animate-spin"}):T.jsx(UV,{className:"w-4 h-4"}),"Ingresar con correo"]})]})]})})]})};var ka=xT();const KF=uu(ka);function fb(n,e){const t=rr(wt,"userPoints",n);return Ds(t,r=>{r.exists()?e(r.data()):e({balance:0})})}function XF(n,e,t=20){const r=vr(wt,"userPoints",n,"redemptions"),i=Ki(r,l0("redeemedAt","desc"),Oa(t));return Ds(i,o=>{const s=[];o.forEach(a=>s.push({id:a.id,...a.data()})),e(s)})}function YF(n,e,t=20){const r=vr(wt,"userPoints",n,"purchases"),i=Ki(r,l0("purchasedAt","desc"),Oa(t));return Ds(i,o=>{const s=[];o.forEach(a=>s.push({id:a.id,...a.data()})),e(s)})}function QF(n,e,t=20){const r=vr(wt,"userPoints",n,"adminGrants"),i=Ki(r,l0("grantedAt","desc"),Oa(t));return Ds(i,o=>{const s=[];o.forEach(a=>s.push({id:a.id,...a.data()})),e(s)})}async function ZF(n,e,t,r=""){const i=String(n||"").trim().toLowerCase(),o=Number(e);if(!i)throw new Error("Correo requerido");if(!o||o<=0)throw new Error("Monto de puntos invlido");const s=vr(wt,"userPoints"),a=Ki(s,su("email","==",i),Oa(1)),u=await kg(a);if(u.empty)throw new Error("No se encontr un usuario con ese correo. Pdele que inicie sesin primero.");const d=u.docs[0].id,p=rr(wt,"userPoints",d),g=vr(wt,"userPoints",d,"adminGrants");return await Fy(wt,async y=>{(await y.get(p)).exists()?y.update(p,{balance:Ap(o),updatedAt:hr(),email:i}):y.set(p,{balance:o,updatedAt:hr(),email:i});const A=rr(g);y.set(A,{amount:o,email:i,note:r||"",grantedAt:hr(),grantedBy:t||null,type:"manual-award"})}),{email:i,amount:o,uid:d}}async function db(n){const e=String(n).trim();if(!e)throw new Error("Cdigo vaco");const t=rr(wt,"pointCodes",e),r=await xV(t);if(r.exists())return{ref:t,snap:r};const i=Ki(vr(wt,"pointCodes"),su("code","==",e),Oa(1));let o=await kg(i);if(!o.empty){const a=o.docs[0];return{ref:a.ref,snap:a}}const s=Ki(vr(wt,"pointCodes"),su("id","==",e),Oa(1));if(o=await kg(s),!o.empty){const a=o.docs[0];return{ref:a.ref,snap:a}}throw new Error("Cdigo no vlido")}async function JF(n){const{snap:e}=await db(n),t=e.data();let r=null;try{t.expiresAt?.toDate&&(r=t.expiresAt.toDate())}catch(i){console.debug("No se pudo convertir expiresAt a Date:",i?.message||i)}return{id:String(n).trim(),...t,expiresAt:r}}async function eB(n,e,t){if(!n)throw new Error("Usuario no autenticado");const r=String(e).trim();if(!r)throw new Error("Cdigo vaco");const{ref:i}=await db(r),o=rr(wt,"userPoints",n),s=rr(vr(wt,"userPoints",n,"redemptions"),r);return Fy(wt,async a=>{const[u,f]=await Promise.all([a.get(i),a.get(o)]);if(!u.exists())throw new Error("Cdigo no vlido");const d=u.data(),p=!!d.multiUse;if(!p&&(d.used||d.active===!1))throw new Error("Cdigo ya utilizado");if(p&&d.active===!1)throw new Error("Cdigo inactivo");const g=Number(d.amount||0);if(!g||Number.isNaN(g))throw new Error("Cdigo invlido (monto)");if(d.expiresAt?.toDate&&d.expiresAt.toDate()<new Date)throw new Error("El cdigo expir");let y,E;if(p){const I=vr(i,"uses");if(y=rr(I,n),E=await a.get(y),E.exists())throw new Error("Ya usaste este cdigo")}p?(a.set(y,{uid:n,usedAt:hr(),userEmail:t||null}),a.update(i,{redeemedCount:Ap(1),lastUsedAt:hr()})):a.update(i,{used:!0,active:!1,usedBy:n,usedAt:hr(),userEmail:t||null});const A=(t||"").toLowerCase()||null;return f.exists()?a.update(o,{balance:Ap(g),updatedAt:hr(),email:A}):a.set(o,{balance:g,updatedAt:hr(),email:A}),a.set(s,{code:r,amount:g,redeemedAt:hr(),userEmail:A}),{amount:g}})}const br=B.forwardRef(({className:n,type:e,...t},r)=>T.jsx("input",{type:e,className:Vs("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));br.displayName="Input";function tB(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function nB(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var rB=(function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),iB=(function(n){rB(e,n);function e(t,r){var i=this.constructor,o=n.call(this,t,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),tB(o,i.prototype),nB(o),o}return e})(Error),oB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),yr=(function(n){oB(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(iB),sB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ui=(function(n){sB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e})(yr),aB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Le=(function(n){aB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(yr),lB=(function(){function n(e){if(this.binarizer=e,e===null)throw new Le("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var o=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(o))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n})(),uB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),An=(function(n){uB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(yr),cB=(function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n})(),xt=(function(){function n(){}return n.arraycopy=function(e,t,r,i,o){for(;o--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n})(),fB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Uy=(function(n){fB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(yr),dB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),OA=(function(n){dB(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(Uy),hB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cn=(function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var o=t;o<r;o++)e[o]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Le("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new OA(t);if(r>e)throw new OA(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var o=hB(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=31*i+a}}catch(u){t={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,o=new Int32Array(i);return xt.arraycopy(e,t,o,0,i),o},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,a=r(t,e[s]);if(a>0)i=s+1;else if(a<0)o=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n})(),Qe=(function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),Tn=(function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);xt.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=r[i]}var a=i*32+Qe.numberOfTrailingZeros(o);return a>t?t:a},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=~r[i]}var a=i*32+Qe.numberOfTrailingZeros(o);return a>t?t:a},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Le;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,s=r;s<=i;s++){var a=s>r?0:e&31,u=s<i?31:t&31,f=(2<<u)-(1<<a);o[s]|=f}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Le;if(t===e)return!0;t--;for(var i=Math.floor(e/32),o=Math.floor(t/32),s=this.bits,a=i;a<=o;a++){var u=a>i?0:e&31,f=a<o?31:t&31,d=(2<<f)-(1<<u)&4294967295;if((s[a]&d)!==(r?d:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Le("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Le("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var o=0;o<i;o++){for(var s=0,a=0;a<8;a++)this.get(e)&&(s|=1<<7-a),e++;t[r+o]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,o=0;o<r;o++){var s=i[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-o]=s}if(this.size!==r*32){for(var a=r*32-this.size,u=e[0]>>>a,o=1;o<r;o++){var f=e[o];u|=f<<32-a,e[o-1]=u,u=f>>>a}e[r-1]=u}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&cn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+cn.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n})(),Bg;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ASSUME_GS1=7]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Bg||(Bg={}));const Mt=Bg;var pB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),he=(function(n){pB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(yr),mB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pt;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(pt||(pt={}));var ln=(function(){function n(e,t,r){for(var i,o,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var u=this.values,f=0,d=u.length;f!==d;f++){var p=u[f];n.VALUES_TO_ECI.set(p,this)}try{for(var g=mB(s),y=g.next();!y.done;y=g.next()){var E=y.value;n.NAME_TO_ECI.set(E,this)}}catch(A){i={error:A}}finally{try{y&&!y.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new he("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new he("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new he("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(pt.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(pt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(pt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(pt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(pt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(pt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(pt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(pt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(pt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(pt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(pt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(pt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(pt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(pt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(pt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(pt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(pt.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(pt.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(pt.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(pt.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(pt.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(pt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(pt.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(pt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(pt.Big5,28,"Big5"),n.GB18030=new n(pt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(pt.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),gB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Xh=(function(n){gB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(yr),Yr=(function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof ln?e:ln.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",o=0,s=e.length;o<s;o++){var a=e[o].toString(16);a.length<2&&(a="0"+a),i+="%"+a}return decodeURIComponent(i)}if(r.equals(ln.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Xh("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(ln.UTF8)||e.equals(ln.ISO8859_1)||e.equals(ln.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],o=0;o<r.length;o++)i.push(r[o].charCodeAt(0));return new Uint8Array(i)},n})(),rt=(function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return Yr.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Mt.CHARACTER_SET)!==void 0)return t.get(Mt.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,s=!0,a=0,u=0,f=0,d=0,p=0,g=0,y=0,E=0,A=0,I=0,N=0,R=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,k=0;k<r&&(i||o||s);k++){var j=e[k]&255;s&&(a>0?(j&128)===0?s=!1:a--:(j&128)!==0&&((j&64)===0?s=!1:(a++,(j&32)===0?u++:(a++,(j&16)===0?f++:(a++,(j&8)===0?d++:s=!1))))),i&&(j>127&&j<160?i=!1:j>159&&(j<192||j===215||j===247)&&N++),o&&(p>0?j<64||j===127||j>252?o=!1:p--:j===128||j===160||j>239?o=!1:j>160&&j<224?(g++,E=0,y++,y>A&&(A=y)):j>127?(p++,y=0,E++,E>I&&(I=E)):(y=0,E=0))}return s&&a>0&&(s=!1),o&&p>0&&(o=!1),s&&(R||u+f+d>0)?n.UTF8:o&&(n.ASSUME_SHIFT_JIS||A>=3||I>=3)?n.SHIFT_JIS:i&&o?A===2&&g===2||N*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:o?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function o(a,u,f,d,p,g){if(a==="%%")return"%";if(t[++i]!==void 0){a=d?parseInt(d.substr(1)):void 0;var y=p?parseInt(p.substr(1)):void 0,E;switch(g){case"s":E=t[i];break;case"c":E=t[i][0];break;case"f":E=parseFloat(t[i]).toFixed(a);break;case"p":E=parseFloat(t[i]).toPrecision(a);break;case"e":E=parseFloat(t[i]).toExponential(a);break;case"x":E=parseInt(t[i]).toString(y||16);break;case"d":E=parseFloat(parseInt(t[i],y||10).toPrecision(a)).toFixed(0);break}E=typeof E=="object"?JSON.stringify(E):(+E).toString(y);for(var A=parseInt(f),I=f&&f[0]+""=="0"?"0":" ";E.length<A;)E=u!==void 0?E+I:I+E;return E}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)},n.getBytes=function(e,t){return Yr.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=ln.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=ln.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=ln.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),Ke=(function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=rt.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n})(),Xi=(function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Le("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),o=0;o<t;o++)for(var s=e[o],a=0;a<r;a++)s[a]&&i.set(a,o);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Le("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,a=-1,u=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new Le("row lengths do not match");s=o,u++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,i[o]=!0,o++;else if(e.substring(f,f+r.length)===r)f+=r.length,i[o]=!1,o++;else throw new Le("illegal character encountered: "+e.substring(f));if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new Le("row lengths do not match");u++}for(var d=new n(a,u),p=0;p<o;p++)i[p]&&d.set(Math.floor(p%a),Math.floor(p/a));return d},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Le("input matrix dimensions do not match");for(var t=new Tn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var a=o*r,u=e.getRow(o,t).getBitArray(),f=0;f<r;f++)i[a+f]^=u[f]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Le("Left and top must be nonnegative");if(i<1||r<1)throw new Le("Height and width must be at least 1");var o=e+r,s=t+i;if(s>this.height||o>this.width)throw new Le("The region must fit inside the matrix");for(var a=this.rowSize,u=this.bits,f=t;f<s;f++)for(var d=f*a,p=e;p<o;p++)u[d+Math.floor(p/32)]|=1<<(p&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Tn(this.width):t.clear();for(var r=this.rowSize,i=this.bits,o=e*r,s=0;s<r;s++)t.setBulk(s*32,i[o+s]);return t},n.prototype.setRow=function(e,t){xt.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new Tn(e),i=new Tn(e),o=0,s=Math.floor((t+1)/2);o<s;o++)r=this.getRow(o,r),i=this.getRow(t-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(t-1-o,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,o=e,s=t,a=-1,u=-1,f=0;f<t;f++)for(var d=0;d<r;d++){var p=i[f*r+d];if(p!==0){if(f<s&&(s=f),f>u&&(u=f),d*32<o){for(var g=0;(p<<31-g&4294967295)===0;)g++;d*32+g<o&&(o=d*32+g)}if(d*32+31>a){for(var g=31;!(p>>>g);)g--;d*32+g>a&&(a=d*32+g)}}}return a<o||u<s?null:Int32Array.from([o,s,a-o+1,u-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,o=r%e*32,s=t[r],a=0;(s<<31-a&4294967295)===0;)a++;return o+=a,Int32Array.from([o,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=Math.floor(r%e)*32,s=t[r],a=31;!(s>>>a);)a--;return o+=a,Int32Array.from([o,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&cn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+cn.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new Ke,o=0,s=this.height;o<s;o++){for(var a=0,u=this.width;a<u;a++)i.append(this.get(a,o)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),vB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),te=(function(n){vB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(yr),yB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),wB=(function(n){yB(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new Tn(o):r.clear(),this.initArrays(o);for(var s=i.getRow(t,this.luminances),a=this.buckets,u=0;u<o;u++)a[(s[u]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(a);if(o<3)for(var u=0;u<o;u++)(s[u]&255)<f&&r.set(u);else for(var d=s[0]&255,p=s[1]&255,u=1;u<o-1;u++){var g=s[u+1]&255;(p*4-d-g)/2<f&&r.set(u),d=p,p=g}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),o=new Xi(r,i);this.initArrays(r);for(var s=this.buckets,a=1;a<5;a++)for(var u=Math.floor(i*a/5),f=t.getRow(u,this.luminances),d=Math.floor(r*4/5),p=Math.floor(r/5);p<d;p++){var g=f[p]&255;s[g>>e.LUMINANCE_SHIFT]++}for(var y=e.estimateBlackPoint(s),E=t.getMatrix(),a=0;a<i;a++)for(var A=a*r,p=0;p<r;p++){var g=E[A+p]&255;g<y&&o.set(p,a)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,o=0,s=0,a=0;a<r;a++)t[a]>s&&(o=a,s=t[a]),t[a]>i&&(i=t[a]);for(var u=0,f=0,a=0;a<r;a++){var d=a-o,p=t[a]*d*d;p>f&&(u=a,f=p)}if(o>u){var g=o;o=u,u=g}if(u-o<=r/16)throw new te;for(var y=u-1,E=-1,a=u-1;a>o;a--){var A=a-o,p=A*A*(u-a)*(i-t[a]);p>E&&(y=a,E=p)}return y<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(cB),_B=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xB=(function(n){_B(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var a=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&a++;var u=e.calculateBlackPoints(o,s,a,r,i),f=new Xi(r,i);e.calculateThresholdForBlock(o,s,a,r,i,u,f),this.matrix=f}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,o,s,a,u){for(var f=s-e.BLOCK_SIZE,d=o-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>f&&(g=f);for(var y=e.cap(p,2,i-3),E=0;E<r;E++){var A=E<<e.BLOCK_SIZE_POWER;A>d&&(A=d);for(var I=e.cap(E,2,r-3),N=0,R=-2;R<=2;R++){var k=a[y+R];N+=k[I-2]+k[I-1]+k[I]+k[I+1]+k[I+2]}var j=N/25;e.thresholdBlock(t,A,g,j,o,u)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,o,s,a){for(var u=0,f=i*s+r;u<e.BLOCK_SIZE;u++,f+=s)for(var d=0;d<e.BLOCK_SIZE;d++)(t[f+d]&255)<=o&&a.set(r+d,i+u)},e.calculateBlackPoints=function(t,r,i,o,s){for(var a=s-e.BLOCK_SIZE,u=o-e.BLOCK_SIZE,f=new Array(i),d=0;d<i;d++){f[d]=new Int32Array(r);var p=d<<e.BLOCK_SIZE_POWER;p>a&&(p=a);for(var g=0;g<r;g++){var y=g<<e.BLOCK_SIZE_POWER;y>u&&(y=u);for(var E=0,A=255,I=0,N=0,R=p*o+y;N<e.BLOCK_SIZE;N++,R+=o){for(var k=0;k<e.BLOCK_SIZE;k++){var j=t[R+k]&255;E+=j,j<A&&(A=j),j>I&&(I=j)}if(I-A>e.MIN_DYNAMIC_RANGE)for(N++,R+=o;N<e.BLOCK_SIZE;N++,R+=o)for(var k=0;k<e.BLOCK_SIZE;k++)E+=t[R+k]&255}var H=E>>e.BLOCK_SIZE_POWER*2;if(I-A<=e.MIN_DYNAMIC_RANGE&&(H=A/2,d>0&&g>0)){var $=(f[d-1][g]+2*f[d][g-1]+f[d-1][g-1])/4;A<$&&(H=$)}f[d][g]=H}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(wB),f0=(function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new Xh("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new Xh("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new Xh("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Ke,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var s=i[o]&255,a=void 0;s<64?a="#":s<128?a="+":s<192?a=".":a=" ",t.append(a)}t.append(`
`)}return t.toString()},n})(),EB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jy=(function(n){EB(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(t[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,o){return new e(this.delegate.crop(t,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(f0),AB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),TB=(function(n){AB(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(r.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX)for(var s=0,a=0,u=t.length;s<u;s+=4,a++){var f=void 0,d=t[s+3];if(d===0)f=255;else{var p=t[s],g=t[s+1],y=t[s+2];f=306*p+601*g+117*y+512>>10}o[a]=f}else for(var s=0,a=0,E=t.length;s<E;s+=4,a++){var f=void 0,d=t[s+3];if(d===0)f=255;else{var p=t[s],g=t[s+1],y=t[s+2];f=306*p+601*g+117*y+512>>10}o[a]=255-f}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Le("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return n.prototype.crop.call(this,t,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,a=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*a),f=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*a);return r.width=u,r.height=f,i.translate(u/2,f/2),i.rotate(o),i.drawImage(this.canvas,s/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new jy(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(f0),CB=(function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n})(),Zn=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{f(r.next(d))}catch(p){s(p)}}function u(d){try{f(r.throw(d))}catch(p){s(p)}}function f(d){d.done?o(d.value):i(d.value).then(a,u)}f((r=r.apply(n,e||[])).next())})},Jn=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(d){return u([f,d])}}function u(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},IB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cu=(function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Zn(this,void 0,void 0,function(){var e,t,r,i,o,s,a,u,f,d,p,g;return Jn(this,function(y){switch(y.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=y.sent(),t=[];try{for(r=IB(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,u=o.label||"Video device "+(t.length+1),f=o.groupId,d={deviceId:a,label:u,kind:s,groupId:f},t.push(d))}catch(E){p={error:E}}finally{try{i&&!i.done&&(g=r.return)&&g.call(r)}finally{if(p)throw p.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Zn(this,void 0,void 0,function(){var e;return Jn(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new CB(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Zn(this,void 0,void 0,function(){var t;return Jn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Zn(this,void 0,void 0,function(){return Jn(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Zn(this,void 0,void 0,function(){var r,i;return Jn(this,function(o){switch(o.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Zn(this,void 0,void 0,function(){var r;return Jn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Zn(this,void 0,void 0,function(){var r,i;return Jn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=o.sent(),[4,this.decodeOnce(r)];case 2:return i=o.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Zn(this,void 0,void 0,function(){return Jn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Zn(this,void 0,void 0,function(){var i,o;return Jn(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Zn(this,void 0,void 0,function(){var i;return Jn(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,o.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Zn(this,void 0,void 0,function(){var i;return Jn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Zn(this,void 0,void 0,function(){var r;return Jn(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Zn(this,void 0,void 0,function(){return Jn(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new ui("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new ui("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new ui("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new ui("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new ui("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new ui("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new ui("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new ui("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new ui("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new ui("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Zn(this,void 0,void 0,function(){return Jn(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Zn(this,void 0,void 0,function(){return Jn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var o=function(s,a){if(i._stopAsyncDecode){a(new te("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var u=i.decode(e);s(u)}catch(g){var f=t&&g instanceof te,d=g instanceof An||g instanceof he,p=d&&r;if(f||p)return setTimeout(o,i._timeBetweenDecodingAttempts,s,a);a(g)}};return new Promise(function(s,a){return o(s,a)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var o=r.decode(e);t(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(u){t(null,u);var s=u instanceof An||u instanceof he,a=u instanceof te;(s||a)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e),e instanceof HTMLVideoElement?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var t=this.getCaptureCanvas(e),r=new TB(t),i=new xB(r);return new lB(i)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n})(),Xn=(function(){function n(e,t,r,i,o,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=xt.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=o,this.resultMetadata=null,s==null?this.timestamp=xt.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);xt.arraycopy(t,0,r,0,t.length),xt.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n})(),Ug;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ug||(Ug={}));const Oe=Ug;var jg;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(jg||(jg={}));const Ln=jg;var d0=(function(){function n(e,t,r,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n})(),Lc=(function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Le;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n})(),As=(function(){function n(e,t){if(t.length===0)throw new Le;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),xt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,o=t.length;i!==o;i++){var s=t[i];r=Lc.addOrSubtract(r,s)}return r}r=t[0];for(var a=t.length,u=this.field,i=1;i<a;i++)r=Lc.addOrSubtract(u.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Le("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;xt.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=Lc.addOrSubtract(t[a-s],r[a]);return new n(this.field,o)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Le("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=this.field,u=0;u<r;u++)for(var f=t[u],d=0;d<o;d++)s[u+d]=Lc.addOrSubtract(s[u+d],a.multiply(f,i[d]));return new n(a,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),o=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(o[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Le;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),s=this.field,a=0;a<i;a++)o[a]=s.multiply(r[a],t);return new n(s,o)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Le("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Le("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=t.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var a=i.getDegree()-e.getDegree(),u=t.multiply(i.getCoefficient(i.getDegree()),s),f=e.multiplyByMonomial(a,u),d=t.buildMonomial(a,u);r=r.addOrSubtract(d),i=i.addOrSubtract(f)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n})(),SB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),hb=(function(n){SB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(yr),bB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pr=(function(n){bB(e,n);function e(t,r,i){var o=n.call(this)||this;o.primitive=t,o.size=r,o.generatorBase=i;for(var s=new Int32Array(r),a=1,u=0;u<r;u++)s[u]=a,a*=2,a>=r&&(a^=t,a&=r-1);o.expTable=s;for(var f=new Int32Array(r),u=0;u<r-1;u++)f[s[u]]=u;return o.logTable=f,o.zero=new As(o,Int32Array.from([0])),o.one=new As(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Le;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new As(this,i)},e.prototype.inverse=function(t){if(t===0)throw new hb;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Qe.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(Lc),PB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ah=(function(n){PB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(yr),RB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Gf=(function(n){RB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(yr),h0=(function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new As(r,e),o=new Int32Array(t),s=!0,a=0;a<t;a++){var u=i.evaluateAt(r.exp(a+r.getGeneratorBase()));o[o.length-1-a]=u,u!==0&&(s=!1)}if(!s)for(var f=new As(r,o),d=this.runEuclideanAlgorithm(r.buildMonomial(t,1),f,t),p=d[0],g=d[1],y=this.findErrorLocations(p),E=this.findErrorMagnitudes(g,y),a=0;a<y.length;a++){var A=e.length-1-r.log(y[a]);if(A<0)throw new Ah("Bad error location");e[A]=pr.addOrSubtract(e[A],E[a])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=this.field,s=e,a=t,u=o.getZero(),f=o.getOne();a.getDegree()>=(r/2|0);){var d=s,p=u;if(s=a,u=f,s.isZero())throw new Ah("r_{i-1} was zero");a=d;for(var g=o.getZero(),y=s.getCoefficient(s.getDegree()),E=o.inverse(y);a.getDegree()>=s.getDegree()&&!a.isZero();){var A=a.getDegree()-s.getDegree(),I=o.multiply(a.getCoefficient(a.getDegree()),E);g=g.addOrSubtract(o.buildMonomial(A,I)),a=a.addOrSubtract(s.multiplyByMonomial(A,I))}if(f=g.multiply(u).addOrSubtract(p),a.getDegree()>=s.getDegree())throw new Gf("Division algorithm failed to reduce polynomial?")}var N=f.getCoefficient(0);if(N===0)throw new Ah("sigmaTilde(0) was zero");var R=o.inverse(N),k=f.multiplyScalar(R),j=a.multiplyScalar(R);return[k,j]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,o=this.field,s=1;s<o.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=o.inverse(s),i++);if(i!==t)throw new Ah("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),o=this.field,s=0;s<r;s++){for(var a=o.inverse(t[s]),u=1,f=0;f<r;f++)if(s!==f){var d=o.multiply(t[f],a),p=(d&1)===0?d|1:d&-2;u=o.multiply(u,p)}i[s]=o.multiply(e.evaluateAt(a),o.inverse(u)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],a))}return i},n})(),Rn;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Rn||(Rn={}));var DA=(function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),o=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),a=new d0(o,s,null,null);return a.setNumBits(i.length),a},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=Rn.UPPER,i=Rn.UPPER,o="",s=0;s<t;)if(i===Rn.BINARY){if(t-s<5)break;var a=n.readCode(e,s,5);if(s+=5,a===0){if(t-s<11)break;a=n.readCode(e,s,11)+31,s+=11}for(var u=0;u<a;u++){if(t-s<8){s=t;break}var f=n.readCode(e,s,8);o+=rt.castAsNonUtf8Char(f),s+=8}i=r}else{var d=i===Rn.DIGIT?4:5;if(t-s<d)break;var f=n.readCode(e,s,d);s+=d;var p=n.getCharacter(i,f);p.startsWith("CTRL_")?(r=i,i=n.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(o+=p,i=r)}return o},n.getTable=function(e){switch(e){case"L":return Rn.LOWER;case"P":return Rn.PUNCT;case"M":return Rn.MIXED;case"D":return Rn.DIGIT;case"B":return Rn.BINARY;case"U":default:return Rn.UPPER}},n.getCharacter=function(e,t){switch(e){case Rn.UPPER:return n.UPPER_TABLE[t];case Rn.LOWER:return n.LOWER_TABLE[t];case Rn.MIXED:return n.MIXED_TABLE[t];case Rn.PUNCT:return n.PUNCT_TABLE[t];case Rn.DIGIT:return n.DIGIT_TABLE[t];default:throw new Gf("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=pr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=pr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=pr.AZTEC_DATA_10):(r=12,t=pr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new he;for(var s=e.length%r,a=new Int32Array(o),u=0;u<o;u++,s+=r)a[u]=n.readCode(e,s,r);try{var f=new h0(t);f.decode(a,o-i)}catch(I){throw new he(I)}for(var d=(1<<r)-1,p=0,u=0;u<i;u++){var g=a[u];if(g===0||g===d)throw new he;(g===1||g===d-1)&&p++}for(var y=new Array(i*r-p),E=0,u=0;u<i;u++){var g=a[u];if(g===1||g===d-1)y.fill(g>1,E,E+r-1),E+=r-1;else for(var A=r-1;A>=0;--A)y[E++]=(g&1<<A)!==0}return y},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var a=0;a<o.length;a++)o[a]=a;else for(var u=i+1+2*Qe.truncDivision(Qe.truncDivision(i,2)-1,15),f=i/2,d=Qe.truncDivision(u,2),a=0;a<f;a++){var p=a+Qe.truncDivision(a,15);o[f-a-1]=d-p-1,o[f+a]=d+p+1}for(var a=0,g=0;a<r;a++){for(var y=(r-a)*4+(t?9:12),E=a*2,A=i-1-E,I=0;I<y;I++)for(var N=I*2,R=0;R<2;R++)s[g+N+R]=e.get(o[E+R],o[E+I]),s[g+2*y+N+R]=e.get(o[E+I],o[A-R]),s[g+4*y+N+R]=e.get(o[A-R],o[A-I]),s[g+6*y+N+R]=e.get(o[A-I],o[E+R]);g+=y*8}return s},n.readCode=function(e,t,r){for(var i=0,o=t;o<t+r;o++)i<<=1,e[o]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n})(),lt=(function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var o=e-r,s=t-i;return Math.sqrt(o*o+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var o=e[r];t+=o}return t},n})(),zg=(function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),be=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*zg.floatToIntBits(this.x)+zg.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,s,a;if(r>=t&&r>=i?(s=e[0],o=e[1],a=e[2]):i>=r&&i>=t?(s=e[1],o=e[0],a=e[2]):(s=e[2],o=e[0],a=e[1]),this.crossProductZ(o,s,a)<0){var u=o;o=a,a=u}e[0]=o,e[1]=s,e[2]=a},n.distance=function(e,t){return lt.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,o=t.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},n})(),zy=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),NB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),OB=(function(n){NB(e,n);function e(t,r,i,o,s){var a=n.call(this,t,r)||this;return a.compact=i,a.nbDatablocks=o,a.nbLayers=s,a}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(zy),Hg=(function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=t/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new te}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,o=!1,s=!0,a=!1,u=!1,f=!1,d=!1,p=!1,g=this.width,y=this.height;s;){s=!1;for(var E=!0;(E||!u)&&t<g;)E=this.containsBlackPoint(r,i,t,!1),E?(t++,s=!0,u=!0):u||t++;if(t>=g){o=!0;break}for(var A=!0;(A||!f)&&i<y;)A=this.containsBlackPoint(e,t,i,!0),A?(i++,s=!0,f=!0):f||i++;if(i>=y){o=!0;break}for(var I=!0;(I||!d)&&e>=0;)I=this.containsBlackPoint(r,i,e,!1),I?(e--,s=!0,d=!0):d||e--;if(e<0){o=!0;break}for(var N=!0;(N||!p)&&r>=0;)N=this.containsBlackPoint(e,t,r,!0),N?(r--,s=!0,p=!0):p||r--;if(r<0){o=!0;break}s&&(a=!0)}if(!o&&a){for(var R=t-e,k=null,j=1;k===null&&j<R;j++)k=this.getBlackPointOnSegment(e,i-j,e+j,i);if(k==null)throw new te;for(var H=null,j=1;H===null&&j<R;j++)H=this.getBlackPointOnSegment(e,r+j,e+j,r);if(H==null)throw new te;for(var $=null,j=1;$===null&&j<R;j++)$=this.getBlackPointOnSegment(t,r+j,t-j,r);if($==null)throw new te;for(var b=null,j=1;b===null&&j<R;j++)b=this.getBlackPointOnSegment(t,i-j,t-j,i);if(b==null)throw new te;return this.centerEdges(b,k,$,H)}else throw new te},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var o=lt.round(lt.distance(e,t,r,i)),s=(r-e)/o,a=(i-t)/o,u=this.image,f=0;f<o;f++){var d=lt.round(e+f*s),p=lt.round(t+f*a);if(u.get(d,p))return new be(d,p)}return null},n.prototype.centerEdges=function(e,t,r,i){var o=e.getX(),s=e.getY(),a=t.getX(),u=t.getY(),f=r.getX(),d=r.getY(),p=i.getX(),g=i.getY(),y=n.CORR;return o<this.width/2?[new be(p-y,g+y),new be(a+y,u+y),new be(f-y,d-y),new be(o+y,s-y)]:[new be(p+y,g+y),new be(a+y,u-y),new be(f-y,d+y),new be(o-y,s-y)]},n.prototype.containsBlackPoint=function(e,t,r,i){var o=this.image;if(i){for(var s=e;s<=t;s++)if(o.get(s,r))return!0}else for(var a=e;a<=t;a++)if(o.get(r,a))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n})(),kA=(function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<t.length&&o;s+=2){var a=Math.floor(t[s]),u=Math.floor(t[s+1]);if(a<-1||a>r||u<-1||u>i)throw new te;o=!1,a===-1?(t[s]=0,o=!0):a===r&&(t[s]=r-1,o=!0),u===-1?(t[s+1]=0,o=!0):u===i&&(t[s+1]=i-1,o=!0)}o=!0;for(var s=t.length-2;s>=0&&o;s-=2){var a=Math.floor(t[s]),u=Math.floor(t[s+1]);if(a<-1||a>r||u<-1||u>i)throw new te;o=!1,a===-1?(t[s]=0,o=!0):a===r&&(t[s]=r-1,o=!0),u===-1?(t[s+1]=0,o=!0):u===i&&(t[s+1]=i-1,o=!0)}},n})(),pb=(function(){function n(e,t,r,i,o,s,a,u,f){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=o,this.a32=s,this.a13=a,this.a23=u,this.a33=f}return n.quadrilateralToQuadrilateral=function(e,t,r,i,o,s,a,u,f,d,p,g,y,E,A,I){var N=n.quadrilateralToSquare(e,t,r,i,o,s,a,u),R=n.squareToQuadrilateral(f,d,p,g,y,E,A,I);return R.times(N)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,u=this.a23,f=this.a31,d=this.a32,p=this.a33,g=0;g<t;g+=2){var y=e[g],E=e[g+1],A=o*y+u*E+p;e[g]=(r*y+s*E+f)/A,e[g+1]=(i*y+a*E+d)/A}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,u=this.a23,f=this.a31,d=this.a32,p=this.a33,g=e.length,y=0;y<g;y++){var E=e[y],A=t[y],I=o*E+u*A+p;e[y]=(r*E+s*A+f)/I,t[y]=(i*E+a*A+d)/I}},n.squareToQuadrilateral=function(e,t,r,i,o,s,a,u){var f=e-r+o-a,d=t-i+s-u;if(f===0&&d===0)return new n(r-e,o-r,e,i-t,s-i,t,0,0,1);var p=r-o,g=a-o,y=i-s,E=u-s,A=p*E-g*y,I=(f*E-g*d)/A,N=(p*d-f*y)/A;return new n(r-e+I*r,a-e+N*a,e,i-t+I*i,u-t+N*u,t,I,N,1)},n.quadrilateralToSquare=function(e,t,r,i,o,s,a,u){return n.squareToQuadrilateral(e,t,r,i,o,s,a,u).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n})(),DB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),kB=(function(n){DB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,o,s,a,u,f,d,p,g,y,E,A,I,N,R,k,j){var H=pb.quadrilateralToQuadrilateral(o,s,a,u,f,d,p,g,y,E,A,I,N,R,k,j);return this.sampleGridWithTransform(t,r,i,H)},e.prototype.sampleGridWithTransform=function(t,r,i,o){if(r<=0||i<=0)throw new te;for(var s=new Xi(r,i),a=new Float32Array(2*r),u=0;u<i;u++){for(var f=a.length,d=u+.5,p=0;p<f;p+=2)a[p]=p/2+.5,a[p+1]=d;o.transformPoints(a),kA.checkAndNudgePoints(t,a);try{for(var p=0;p<f;p+=2)t.get(Math.floor(a[p]),Math.floor(a[p+1]))&&s.set(p/2,u)}catch{throw new te}}return s},e})(kA),Hy=(function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new kB,n})(),fr=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new be(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n})(),MB=(function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new OB(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new te;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,o=0;o<4;o++){var s=r[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(o,s,a){var u=(o>>t-2<<1)+(o&1);r=(r<<3)+u}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Qe.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new te},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var o=r-i,s=new Int32Array(r),a=r-1;a>=0;--a)s[a]=e&15,e>>=4;try{var u=new h0(pr.AZTEC_PARAM);u.decode(s,o)}catch{throw new te}for(var f=0,a=0;a<i;a++)f=(f<<4)+s[a];return f},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(t,s,1,-1),u=this.getFirstDifferent(r,s,1,1),f=this.getFirstDifferent(i,s,-1,1),d=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(d,a)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(a,u,f,d))break}t=a,r=u,i=f,o=d,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new te;this.compact=this.nbCenterLayers===5;var g=new be(t.getX()+.5,t.getY()-.5),y=new be(r.getX()+.5,r.getY()+.5),E=new be(i.getX()-.5,i.getY()+.5),A=new be(o.getX()-.5,o.getY()-.5);return this.expandSquare([g,y,E,A],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var o=new Hg(this.image).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{var s=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new fr(s+7,a-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new fr(s+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new fr(s-7,a+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new fr(s-7,a-7),!1,-1,-1).toResultPoint()}var u=lt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=lt.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var o=new Hg(this.image,15,u,f).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{e=this.getFirstDifferent(new fr(u+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new fr(u+7,f+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new fr(u-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new fr(u-7,f-7),!1,-1,-1).toResultPoint()}return u=lt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=lt.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new fr(u,f)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,o){var s=Hy.getInstance(),a=this.getDimension(),u=a/2-this.nbCenterLayers,f=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,u,u,f,u,f,f,u,f,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,o=this.distanceResultPoint(e,t),s=o/r,a=e.getX(),u=e.getY(),f=s*(t.getX()-e.getX())/o,d=s*(t.getY()-e.getY())/o,p=0;p<r;p++)this.image.get(lt.round(a+p*f),lt.round(u+p*d))&&(i|=1<<r-p-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var o=3;e=new fr(e.getX()-o,e.getY()+o),t=new fr(t.getX()-o,t.getY()-o),r=new fr(r.getX()+o,r.getY()-o),i=new fr(i.getX()+o,i.getY()+o);var s=this.getColor(i,e);if(s===0)return!1;var a=this.getColor(e,t);return a!==s||(a=this.getColor(t,r),a!==s)?!1:(a=this.getColor(r,i),a===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,o=(t.getY()-e.getY())/r,s=0,a=e.getX(),u=e.getY(),f=this.image.get(e.getX(),e.getY()),d=Math.ceil(r),p=0;p<d;p++)a+=i,u+=o,this.image.get(lt.round(a),lt.round(u))!==f&&s++;var g=s/r;return g>.1&&g<.9?0:g<=.1===f?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var o=e.getX()+r,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r,s+=i;for(o-=r,s-=i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r;for(o-=r;this.isValid(o,s)&&this.image.get(o,s)===t;)s+=i;return s-=i,new fr(o,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,f=new be(a+i*o,u+i*s),d=new be(a-i*o,u-i*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;var p=new be(a+i*o,u+i*s),g=new be(a-i*o,u-i*s),y=[f,p,d,g];return y},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=lt.round(e.getX()),r=lt.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return lt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return lt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Qe.truncDivision(this.nbLayers-4,8)+1)+15},n})(),Wg=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new MB(e.getBlackMatrix()),o=null,s=null;try{var a=i.detectMirror(!1);o=a.getPoints(),this.reportFoundResultPoints(t,o),s=new DA().decode(a)}catch(p){r=p}if(s==null)try{var a=i.detectMirror(!0);o=a.getPoints(),this.reportFoundResultPoints(t,o),s=new DA().decode(a)}catch(p){throw r??p}var u=new Xn(s.getText(),s.getRawBytes(),s.getNumBits(),o,Oe.AZTEC,xt.currentTimeMillis()),f=s.getByteSegments();f!=null&&u.putMetadata(Ln.BYTE_SEGMENTS,f);var d=s.getECLevel();return d!=null&&u.putMetadata(Ln.ERROR_CORRECTION_LEVEL,d),u},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Mt.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,o,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n})(),LB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){LB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Wg,t)||this}return e})(Cu);var fn=(function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Mt.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,t),s=o.getResultMetadata(),a=270;s!==null&&s.get(Ln.ORIENTATION)===!0&&(a=a+s.get(Ln.ORIENTATION)%360),o.putMetadata(Ln.ORIENTATION,a);var u=o.getResultPoints();if(u!==null)for(var f=i.getHeight(),d=0;d<u.length;d++)u[d]=new be(f-u[d].getY()-1,u[d].getX());return o}else throw new te}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),o=new Tn(r),s=t&&t.get(Mt.TRY_HARDER)===!0,a=Math.max(1,i>>(s?8:5)),u;s?u=i:u=15;for(var f=Math.trunc(i/2),d=0;d<u;d++){var p=Math.trunc((d+1)/2),g=(d&1)===0,y=f+a*(g?p:-p);if(y<0||y>=i)break;try{o=e.getBlackRow(y,o)}catch{continue}for(var E=function(R){if(R===1&&(o.reverse(),t&&t.get(Mt.NEED_RESULT_POINT_CALLBACK)===!0)){var k=new Map;t.forEach(function($,b){return k.set(b,$)}),k.delete(Mt.NEED_RESULT_POINT_CALLBACK),t=k}try{var j=A.decodeRow(y,o,t);if(R===1){j.putMetadata(Ln.ORIENTATION,180);var H=j.getResultPoints();H!==null&&(H[0]=new be(r-H[0].getX()-1,H[0].getY()),H[1]=new be(r-H[1].getX()-1,H[1].getY()))}return{value:j}}catch{}},A=this,I=0;I<2;I++){var N=E(I);if(typeof N=="object")return N.value}}throw new te},n.recordPattern=function(e,t,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var s=e.getSize();if(t>=s)throw new te;for(var a=!e.get(t),u=0,f=t;f<s;){if(e.get(f)!==a)r[u]++;else{if(++u===i)break;r[u]=1,a=!a}f++}if(!(u===i||u===i-1&&f===s))throw new te},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,o=e.get(t);t>0&&i>=0;)e.get(--t)!==o&&(i--,o=!o);if(i>=0)throw new te;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=t[a];if(o<s)return Number.POSITIVE_INFINITY;var u=o/s;r*=u;for(var f=0,d=0;d<i;d++){var p=e[d],g=t[d]*u,y=p>g?p-g:g-p;if(y>r)return Number.POSITIVE_INFINITY;f+=y}return f/o},n})(),VB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),MA=(function(n){VB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),a=i,u=!1,f=6,d=i;d<r;d++)if(t.get(d)!==u)s[o]++;else{if(o===f-1){for(var p=e.MAX_AVG_VARIANCE,g=-1,y=e.CODE_START_A;y<=e.CODE_START_C;y++){var E=fn.patternMatchVariance(s,e.CODE_PATTERNS[y],e.MAX_INDIVIDUAL_VARIANCE);E<p&&(p=E,g=y)}if(g>=0&&t.isRange(Math.max(0,a-(d-a)/2),a,!1))return Int32Array.from([a,d,g]);a+=s[0]+s[1],s=s.slice(2,s.length-1),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,u=!u}throw new te},e.decodeCode=function(t,r,i){fn.recordPattern(t,i,r);for(var o=e.MAX_AVG_VARIANCE,s=-1,a=0;a<e.CODE_PATTERNS.length;a++){var u=e.CODE_PATTERNS[a],f=this.patternMatchVariance(r,u,e.MAX_INDIVIDUAL_VARIANCE);f<o&&(o=f,s=a)}if(s>=0)return s;throw new te},e.prototype.decodeRow=function(t,r,i){var o=i&&i.get(Mt.ASSUME_GS1)===!0,s=e.findStartPattern(r),a=s[2],u=0,f=new Uint8Array(20);f[u++]=a;var d;switch(a){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new he}for(var p=!1,g=!1,y="",E=s[0],A=s[1],I=Int32Array.from([0,0,0,0,0,0]),N=0,R=0,k=a,j=0,H=!0,$=!1,b=!1;!p;){var S=g;switch(g=!1,N=R,R=e.decodeCode(r,I,A),f[u++]=R,R!==e.CODE_STOP&&(H=!0),R!==e.CODE_STOP&&(j++,k+=j*R),E=A,A+=I.reduce(function(Ie,Z){return Ie+Z},0),R){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new he}switch(d){case e.CODE_CODE_A:if(R<64)b===$?y+=String.fromCharCode(32+R):y+=String.fromCharCode(32+R+128),b=!1;else if(R<96)b===$?y+=String.fromCharCode(R-64):y+=String.fromCharCode(R+64),b=!1;else switch(R!==e.CODE_STOP&&(H=!1),R){case e.CODE_FNC_1:o&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!$&&b?($=!0,b=!1):$&&b?($=!1,b=!1):b=!0;break;case e.CODE_SHIFT:g=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(R<96)b===$?y+=String.fromCharCode(32+R):y+=String.fromCharCode(32+R+128),b=!1;else switch(R!==e.CODE_STOP&&(H=!1),R){case e.CODE_FNC_1:o&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!$&&b?($=!0,b=!1):$&&b?($=!1,b=!1):b=!0;break;case e.CODE_SHIFT:g=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(R<100)R<10&&(y+="0"),y+=R;else switch(R!==e.CODE_STOP&&(H=!1),R){case e.CODE_FNC_1:o&&(y.length===0?y+="]C1":y+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}S&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var O=A-E;if(A=r.getNextUnset(A),!r.isRange(A,Math.min(r.getSize(),A+(A-E)/2),!1))throw new te;if(k-=j*N,k%103!==N)throw new An;var V=y.length;if(V===0)throw new te;V>0&&H&&(d===e.CODE_CODE_C?y=y.substring(0,V-2):y=y.substring(0,V-1));for(var L=(s[1]+s[0])/2,U=E+O/2,D=f.length,ue=new Uint8Array(D),le=0;le<D;le++)ue[le]=f[le];var Ue=[new be(L,t),new be(U,t)];return new Xn(y,ue,0,Ue,Oe.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(fn),FB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Pm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LA=(function(n){FB(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var o,s,a,u,f=this.counters;f.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(r,f),p=r.getNextSet(d[1]),g=r.getSize(),y,E;do{e.recordPattern(r,p,f);var A=e.toNarrowWidePattern(f);if(A<0)throw new te;y=e.patternToChar(A),this.decodeRowResult+=y,E=p;try{for(var I=(o=void 0,Pm(f)),N=I.next();!N.done;N=I.next()){var R=N.value;p+=R}}catch(D){o={error:D}}finally{try{N&&!N.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}p=r.getNextSet(p)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var k=0;try{for(var j=Pm(f),H=j.next();!H.done;H=j.next()){var R=H.value;k+=R}}catch(D){a={error:D}}finally{try{H&&!H.done&&(u=j.return)&&u.call(j)}finally{if(a)throw a.error}}var $=p-E-k;if(p!==g&&$*2<k)throw new te;if(this.usingCheckDigit){for(var b=this.decodeRowResult.length-1,S=0,O=0;O<b;O++)S+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(O));if(this.decodeRowResult.charAt(b)!==e.ALPHABET_STRING.charAt(S%43))throw new An;this.decodeRowResult=this.decodeRowResult.substring(0,b)}if(this.decodeRowResult.length===0)throw new te;var V;this.extendedMode?V=e.decodeExtended(this.decodeRowResult):V=this.decodeRowResult;var L=(d[1]+d[0])/2,U=E+k/2;return new Xn(V,null,0,[new be(L,t),new be(U,t)],Oe.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),o=t.getNextSet(0),s=0,a=o,u=!1,f=r.length,d=o;d<i;d++)if(t.get(d)!==u)r[s]++;else{if(s===f-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,a-Math.floor((d-a)/2)),a,!1))return[a,d];a+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,u=!u}throw new te},e.toNarrowWidePattern=function(t){var r,i,o=t.length,s=0,a;do{var u=2147483647;try{for(var f=(r=void 0,Pm(t)),d=f.next();!d.done;d=f.next()){var p=d.value;p<u&&p>s&&(u=p)}}catch(A){r={error:A}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}s=u,a=0;for(var g=0,y=0,E=0;E<o;E++){var p=t[E];p>s&&(y|=1<<o-1-E,a++,g+=p)}if(a===3){for(var E=0;E<o&&a>0;E++){var p=t[E];if(p>s&&(a--,p*2>=g))return-1}return y}}while(a>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new te},e.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var a=t.charAt(o+1),u="\0";switch(s){case"+":if(a>="A"&&a<="Z")u=String.fromCharCode(a.charCodeAt(0)+32);else throw new he;break;case"$":if(a>="A"&&a<="Z")u=String.fromCharCode(a.charCodeAt(0)-64);else throw new he;break;case"%":if(a>="A"&&a<="E")u=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")u=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")u=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")u=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")u="\0";else if(a==="V")u="@";else if(a==="W")u="`";else if(a==="X"||a==="Y"||a==="Z")u="";else throw new he;break;case"/":if(a>="A"&&a<="O")u=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")u=":";else throw new he;break}i+=u,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(fn),BB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Rm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VA=(function(n){BB(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var o,s,a,u,f=this.findAsteriskPattern(r),d=r.getNextSet(f[1]),p=r.getSize(),g=this.counters;g.fill(0),this.decodeRowResult="";var y,E;do{e.recordPattern(r,d,g);var A=this.toPattern(g);if(A<0)throw new te;y=this.patternToChar(A),this.decodeRowResult+=y,E=d;try{for(var I=(o=void 0,Rm(g)),N=I.next();!N.done;N=I.next()){var R=N.value;d+=R}}catch(O){o={error:O}}finally{try{N&&!N.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}d=r.getNextSet(d)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var k=0;try{for(var j=Rm(g),H=j.next();!H.done;H=j.next()){var R=H.value;k+=R}}catch(O){a={error:O}}finally{try{H&&!H.done&&(u=j.return)&&u.call(j)}finally{if(a)throw a.error}}if(d===p||!r.get(d))throw new te;if(this.decodeRowResult.length<2)throw new te;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var $=this.decodeExtended(this.decodeRowResult),b=(f[1]+f[0])/2,S=E+k/2;return new Xn($,null,0,[new be(b,t),new be(S,t)],Oe.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,a=!1,u=o.length,f=0,d=i;d<r;d++)if(t.get(d)!==a)o[f]++;else{if(f===u-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,d]);s+=o[0]+o[1],o.copyWithin(0,2,2+f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,a=!a}throw new te},e.prototype.toPattern=function(t){var r,i,o=0;try{for(var s=Rm(t),a=s.next();!a.done;a=s.next()){var u=a.value;o+=u}}catch(E){r={error:E}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var f=0,d=t.length,p=0;p<d;p++){var g=Math.round(t[p]*9/o);if(g<1||g>4)return-1;if((p&1)===0)for(var y=0;y<g;y++)f=f<<1|1;else f<<=g}return f},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new te},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s>="a"&&s<="d"){if(o>=r-1)throw new he;var a=t.charAt(o+1),u="\0";switch(s){case"d":if(a>="A"&&a<="Z")u=String.fromCharCode(a.charCodeAt(0)+32);else throw new he;break;case"a":if(a>="A"&&a<="Z")u=String.fromCharCode(a.charCodeAt(0)-64);else throw new he;break;case"b":if(a>="A"&&a<="E")u=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")u=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")u=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")u=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")u="\0";else if(a==="V")u="@";else if(a==="W")u="`";else if(a>="X"&&a<="Z")u="";else throw new he;break;case"c":if(a>="A"&&a<="O")u=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")u=":";else throw new he;break}i+=u,o++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var o=1,s=0,a=r-1;a>=0;a--)s+=o*e.ALPHABET_STRING.indexOf(t.charAt(a)),++o>i&&(o=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new An},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(fn),UB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FA=(function(n){UB(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var o,s,a=this.decodeStart(r),u=this.decodeEnd(r),f=new Ke;e.decodeMiddle(r,a[1],u[0],f);var d=f.toString(),p=null;i!=null&&(p=i.get(Mt.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=d.length,y=!1,E=0;try{for(var A=jB(p),I=A.next();!I.done;I=A.next()){var N=I.value;if(g===N){y=!0;break}N>E&&(E=N)}}catch(j){o={error:j}}finally{try{I&&!I.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}if(!y&&g>E&&(y=!0),!y)throw new he;var R=[new be(a[1],t),new be(u[0],t)],k=new Xn(d,null,0,R,Oe.ITF,new Date().getTime());return k},e.decodeMiddle=function(t,r,i,o){var s=new Int32Array(10),a=new Int32Array(5),u=new Int32Array(5);for(s.fill(0),a.fill(0),u.fill(0);r<i;){fn.recordPattern(t,r,s);for(var f=0;f<5;f++){var d=2*f;a[f]=s[d],u[f]=s[d+1]}var p=e.decodeDigit(a);o.append(p.toString()),p=this.decodeDigit(u),o.append(p.toString()),s.forEach(function(g){r+=g})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!t.get(o);o--)i--;if(i!==0)throw new te},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new te;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof te&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var o=i.length,s=new Int32Array(o),a=t.getSize(),u=!1,f=0,d=r;s.fill(0);for(var p=r;p<a;p++)if(t.get(p)!==u)s[f]++;else{if(f===o-1){if(fn.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,p];d+=s[0]+s[1],xt.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,u=!u}throw new te},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var a=e.PATTERNS[s],u=fn.patternMatchVariance(t,a,e.MAX_INDIVIDUAL_VARIANCE);u<r?(r=u,i=s):u===r&&(i=-1)}if(i>=0)return i%10;throw new te},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(fn),zB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),lu=(function(n){zB(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,o=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,s);var a=i[0];o=i[1];var u=a-(o-a);u>=0&&(r=t.isRange(u,a,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new he;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new he;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,o){return this.findGuardPattern(t,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(t,r,i,o,s){var a=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var u=0,f=r,d=o.length,p=i,g=r;g<a;g++)if(t.get(g)!==p)s[u]++;else{if(u===d-1){if(fn.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,g]);f+=s[0]+s[1];for(var y=s.slice(2,s.length),E=0;E<u-1;E++)s[E]=y[E];s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,p=!p}throw new te},e.decodeDigit=function(t,r,i,o){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,a=-1,u=o.length,f=0;f<u;f++){var d=o[f],p=fn.patternMatchVariance(r,d,e.MAX_INDIVIDUAL_VARIANCE);p<s&&(s=p,a=f)}if(a>=0)return a;throw new te},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(fn),HB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WB=(function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),a=n.parseExtensionString(s),u=[new be((r[0]+r[1])/2,e),new be(o,e)],f=new Xn(s,null,0,u,Oe.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&f.putAllMetadata(a),f},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),u=t[1],f=0,d=0;d<5&&u<a;d++){var p=lu.decodeDigit(e,s,u,lu.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,HB(s)),y=g.next();!y.done;y=g.next()){var E=y.value;u+=E}}catch(I){i={error:I}}finally{try{y&&!y.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<4-d),d!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==5)throw new te;var A=this.determineCheckDigit(f);if(n.extensionChecksum(r.toString())!==A)throw new te;return u},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new te},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[Ln.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),o=r%100,s=o<10?"0"+o:o.toString();return t+i+"."+s},n})(),$B=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GB=(function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),a=n.parseExtensionString(s),u=[new be((r[0]+r[1])/2,e),new be(o,e)],f=new Xn(s,null,0,u,Oe.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&f.putAllMetadata(a),f},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),u=t[1],f=0,d=0;d<2&&u<a;d++){var p=lu.decodeDigit(e,s,u,lu.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,$B(s)),y=g.next();!y.done;y=g.next()){var E=y.value;u+=E}}catch(A){i={error:A}}finally{try{y&&!y.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<1-d),d!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==2)throw new te;if(parseInt(r.toString())%4!==f)throw new te;return u},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[Ln.ISSUE_NUMBER,parseInt(e)]])},n})(),qB=(function(){function n(){}return n.decodeRow=function(e,t,r){var i=lu.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new WB;return o.decodeRow(e,t,i)}catch{var s=new GB;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n})(),KB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),an=(function(n){KB(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=o}return t}return e.prototype.decodeRow=function(t,r,i){var o=e.findStartGuardPattern(r),s=i==null?null:i.get(Mt.NEED_RESULT_POINT_CALLBACK);if(s!=null){var a=new be((o[0]+o[1])/2,t);s.foundPossibleResultPoint(a)}var u=this.decodeMiddle(r,o,this.decodeRowStringBuffer),f=u.rowOffset,d=u.resultString;if(s!=null){var p=new be(f,t);s.foundPossibleResultPoint(p)}var g=e.decodeEnd(r,f);if(s!=null){var y=new be((g[0]+g[1])/2,t);s.foundPossibleResultPoint(y)}var E=g[1],A=E+(E-g[0]);if(A>=r.getSize()||!r.isRange(E,A,!1))throw new te;var I=d.toString();if(I.length<8)throw new he;if(!e.checkChecksum(I))throw new An;var N=(o[1]+o[0])/2,R=(g[1]+g[0])/2,k=this.getBarcodeFormat(),j=[new be(N,t),new be(R,t)],H=new Xn(I,null,0,j,k,new Date().getTime()),$=0;try{var b=qB.decodeRow(t,r,g[1]);H.putMetadata(Ln.UPC_EAN_EXTENSION,b.getText()),H.putAllMetadata(b.getResultMetadata()),H.addResultPoints(b.getResultPoints()),$=b.getText().length}catch{}var S=i==null?null:i.get(Mt.ALLOWED_EAN_EXTENSIONS);if(S!=null){var O=!1;for(var V in S)if($.toString()===V){O=!0;break}if(!O)throw new te}return k===Oe.EAN_13||Oe.UPC_A,H},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new he;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new he;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(lu),XB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),BA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$g=(function(n){XB(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a,u,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=t.getSize(),p=r[1],g=0,y=0;y<6&&p<d;y++){var E=an.decodeDigit(t,f,p,an.L_AND_G_PATTERNS);i+=String.fromCharCode(48+E%10);try{for(var A=(o=void 0,BA(f)),I=A.next();!I.done;I=A.next()){var N=I.value;p+=N}}catch(H){o={error:H}}finally{try{I&&!I.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}E>=10&&(g|=1<<5-y)}i=e.determineFirstDigit(i,g);var R=an.findGuardPattern(t,p,!0,an.MIDDLE_PATTERN,new Int32Array(an.MIDDLE_PATTERN.length).fill(0));p=R[1];for(var y=0;y<6&&p<d;y++){var E=an.decodeDigit(t,f,p,an.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var k=(a=void 0,BA(f)),j=k.next();!j.done;j=k.next()){var N=j.value;p+=N}}catch(b){a={error:b}}finally{try{j&&!j.done&&(u=k.return)&&u.call(k)}finally{if(a)throw a.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Oe.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new te},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(an),YB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),UA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jA=(function(n){YB(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a,u,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=t.getSize(),p=r[1],g=0;g<4&&p<d;g++){var y=an.decodeDigit(t,f,p,an.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var E=(o=void 0,UA(f)),A=E.next();!A.done;A=E.next()){var I=A.value;p+=I}}catch(j){o={error:j}}finally{try{A&&!A.done&&(s=E.return)&&s.call(E)}finally{if(o)throw o.error}}}var N=an.findGuardPattern(t,p,!0,an.MIDDLE_PATTERN,new Int32Array(an.MIDDLE_PATTERN.length).fill(0));p=N[1];for(var g=0;g<4&&p<d;g++){var y=an.decodeDigit(t,f,p,an.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var R=(a=void 0,UA(f)),k=R.next();!k.done;k=R.next()){var I=k.value;p+=I}}catch($){a={error:$}}finally{try{k&&!k.done&&(u=R.return)&&u.call(R)}finally{if(a)throw a.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Oe.EAN_8},e})(an),QB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),zA=(function(n){QB(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new $g,t}return e.prototype.getBarcodeFormat=function(){return Oe.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new Xn(r.substring(1),null,null,t.getResultPoints(),Oe.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new te},e.prototype.reset=function(){this.ean13Reader.reset()},e})(an),ZB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),JB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HA=(function(n){ZB(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a=this.decodeMiddleCounters.map(function(I){return I});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var u=t.getSize(),f=r[1],d=0,p=0;p<6&&f<u;p++){var g=e.decodeDigit(t,a,f,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var y=(o=void 0,JB(a)),E=y.next();!E.done;E=y.next()){var A=E.value;f+=A}}catch(I){o={error:I}}finally{try{E&&!E.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}g>=10&&(d|=1<<5-p)}return e.determineNumSysAndCheckDigit(new Ke(i),d),f},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return an.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){t.insert(0,"0"+i),t.append("0"+o);return}throw te.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Oe.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new Ke;i.append(t.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(an),eU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),WA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nm=(function(n){eU(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Mt.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(Oe.EAN_13)>-1&&o.push(new $g),i.indexOf(Oe.UPC_A)>-1&&o.push(new zA),i.indexOf(Oe.EAN_8)>-1&&o.push(new jA),i.indexOf(Oe.UPC_E)>-1&&o.push(new HA)),o.length===0&&(o.push(new $g),o.push(new zA),o.push(new jA),o.push(new HA)),r.readers=o,r}return e.prototype.decodeRow=function(t,r,i){var o,s;try{for(var a=WA(this.readers),u=a.next();!u.done;u=a.next()){var f=u.value;try{var d=f.decodeRow(t,r,i),p=d.getBarcodeFormat()===Oe.EAN_13&&d.getText().charAt(0)==="0",g=i==null?null:i.get(Mt.POSSIBLE_FORMATS),y=g==null||g.includes(Oe.UPC_A);if(p&&y){var E=d.getRawBytes(),A=new Xn(d.getText().substring(1),E,E?E.length:null,d.getResultPoints(),Oe.UPC_A);return A.putAllMetadata(d.getResultMetadata()),A}return d}catch{}}}catch(I){o={error:I}}finally{try{u&&!u.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}throw new te},e.prototype.reset=function(){var t,r;try{for(var i=WA(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;s.reset()}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e})(fn),tU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),nU=(function(n){tU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var o=this.getValidRowData(r);if(!o)throw new te;var s=this.codaBarDecodeRow(o.row);if(!s)throw new te;return new Xn(s,null,0,[new be(o.left,t),new be(o.right,t)],Oe.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var o=r.lastIndexOf(!0);if(o<=i)return null;r=r.slice(i,o+1);for(var s=[],a=r[0],u=1,f=1;f<r.length;f++)r[f]===a?u++:(a=r[f],s.push(u),u=1);return s.push(u),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(u,f){return(u+f)/2},0));t.length>0;){var o=t.splice(0,8).splice(0,7),s=o.map(function(u){return u<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var a=r.join("");return this.validCodaBarString(a)?a:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e})(fn),rU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),iU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},va=(function(n){rU(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(fn.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new te},e.count=function(t){return lt.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]>o&&(o=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]<o&&(o=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,o=t[0]+t[1],s=o+t[2]+t[3],a=o/s;if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var u=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var d=iU(t),p=d.next();!p.done;p=d.next()){var g=p.value;g>f&&(f=g),g<u&&(u=g)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return f<10*u}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(fn),Cp=(function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n})(),mb=(function(){function n(e,t,r,i,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new be(r,o)),this.resultPoints.push(new be(i,o))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n})(),oU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ul=(function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,o,s=0;try{for(var a=oU(e),u=a.next();!u.done;u=a.next()){var f=u.value;s+=f}}catch(R){i={error:R}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}for(var d=0,p=0,g=e.length,y=0;y<g-1;y++){var E=void 0;for(E=1,p|=1<<y;E<e[y];E++,p&=~(1<<y)){var A=n.combins(s-E-1,g-y-2);if(r&&p===0&&s-E-(g-y-1)>=g-y-1&&(A-=n.combins(s-E-(g-y),g-y-2)),g-y-1>1){for(var I=0,N=s-E-(g-y-2);N>t;N--)I+=n.combins(s-E-N-1,g-y-3);A-=I*(g-1-y)}else s-E>t&&A--;d+=A}s-=E}return d},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var o=1,s=1,a=e;a>r;a--)o*=a,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},n})(),sU=(function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new Tn(r),o=0,s=e[0],a=s.getRightChar().getValue(),u=11;u>=0;--u)(a&1<<u)!==0&&i.set(o),o++;for(var u=1;u<e.length;++u){for(var f=e[u],d=f.getLeftChar().getValue(),p=11;p>=0;--p)(d&1<<p)!==0&&i.set(o),o++;if(f.getRightChar()!==null)for(var g=f.getRightChar().getValue(),p=11;p>=0;--p)(g&1<<p)!==0&&i.set(o),o++}return i},n})(),ha=(function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n})(),Wy=(function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n})(),aU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),li=(function(n){aU(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(Wy),lU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pa=(function(n){lU(e,n);function e(t,r,i){var o=n.call(this,t)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(Wy),uU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bl=(function(n){uU(e,n);function e(t,r,i){var o=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new he;return o.firstDigit=r,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(Wy),Th=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cU=(function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,o,s,a,u,f;if(!e)return null;if(e.length<2)throw new te;var d=e.substring(0,2);try{for(var p=Th(n.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var y=g.value;if(y[0]===d)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,y[2],e):n.processFixedAI(2,y[1],e)}}catch($){t={error:$}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}if(e.length<3)throw new te;var E=e.substring(0,3);try{for(var A=Th(n.THREE_DIGIT_DATA_LENGTH),I=A.next();!I.done;I=A.next()){var y=I.value;if(y[0]===E)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,y[2],e):n.processFixedAI(3,y[1],e)}}catch($){i={error:$}}finally{try{I&&!I.done&&(o=A.return)&&o.call(A)}finally{if(i)throw i.error}}try{for(var N=Th(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),R=N.next();!R.done;R=N.next()){var y=R.value;if(y[0]===E)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],e):n.processFixedAI(4,y[1],e)}}catch($){s={error:$}}finally{try{R&&!R.done&&(a=N.return)&&a.call(N)}finally{if(s)throw s.error}}if(e.length<4)throw new te;var k=e.substring(0,4);try{for(var j=Th(n.FOUR_DIGIT_DATA_LENGTH),H=j.next();!H.done;H=j.next()){var y=H.value;if(y[0]===k)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],e):n.processFixedAI(4,y[1],e)}}catch($){u={error:$}}finally{try{H&&!H.done&&(f=j.return)&&f.call(j)}finally{if(u)throw u.error}}throw new te},n.processFixedAI=function(e,t,r){if(r.length<e)throw new te;var i=r.substring(0,e);if(r.length<e+t)throw new te;var o=r.substring(e,e+t),s=r.substring(e+t),a="("+i+")"+o,u=n.parseFieldsInGeneralPurpose(s);return u==null?a:a+u},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),o;r.length<e+t?o=r.length:o=e+t;var s=r.substring(e,o),a=r.substring(o),u="("+i+")"+s,f=n.parseFieldsInGeneralPurpose(a);return f==null?u:u+f},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n})(),Yh=(function(){function n(e){this.buffer=new Ke,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var o=this.decodeGeneralPurposeField(r,i),s=cU.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?i=""+o.getRemainingValue():i=null,r===o.getNewPosition())break;r=o.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new bl(this.information.getSize(),bl.FNC1,bl.FNC1):new bl(this.information.getSize(),t-1,bl.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,o=(r-8)%11;return new bl(e+7,i,o)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,o=0;o<r;++o)e.get(t+o)&&(i|=1<<r-o-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new pa(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new pa(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new pa(this.current.getPosition(),this.buffer.toString()):t=new pa(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new ha(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new pa(this.current.getPosition(),this.buffer.toString());return new ha(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ha(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new pa(this.current.getPosition(),this.buffer.toString());return new ha(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ha(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new pa(this.current.getPosition(),this.buffer.toString());return new ha(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ha(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new li(e+5,li.FNC1);if(t>=5&&t<15)return new li(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new li(e+7,""+(r+1));if(r>=90&&r<116)return new li(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new he}return new li(e+8,o)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new li(e+5,li.FNC1);if(t>=5&&t<15)return new li(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new li(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Gf("Decoding invalid alphanumeric value: "+r)}return new li(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n})(),gb=(function(){function n(e){this.information=e,this.generalDecoder=new Yh(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n})(),fU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),fi=(function(n){fU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,o=0;o<13;o++){var s=t.charAt(o+r).charCodeAt(0)-48;i+=(o&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(gb),dU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),hU=(function(n){dU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ke;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(fi),pU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mU=(function(n){pU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ke;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(gb),gU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Qh=(function(n){gU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,o);for(var s=this.checkWeight(o),a=1e5,u=0;u<5;++u)s/a===0&&t.append("0"),a/=10;t.append(s)},e})(fi),vU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),vb=(function(n){vU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Qh.GTIN_SIZE+e.WEIGHT_SIZE)throw new te;var t=new Ke;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Qh.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(Qh),yU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),wU=(function(n){yU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(vb),_U=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xU=(function(n){_U(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(vb),EU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),AU=(function(n){EU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+fi.GTIN_SIZE)throw new te;var t=new Ke;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+fi.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+fi.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(fi),TU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),CU=(function(n){TU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+fi.GTIN_SIZE)throw new te;var t=new Ke;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+fi.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+fi.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+fi.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(fi),IU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),as=(function(n){IU(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.dateCode=i,o.firstAIdigits=r,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new te;var t=new Ke;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var o=i%32;i/=32;var s=i%12+1;i/=12;var a=i;a/10===0&&t.append("0"),t.append(a),s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(Qh);function SU(n){try{if(n.get(1))return new hU(n);if(!n.get(2))return new mU(n);var e=Yh.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new wU(n);case 5:return new xU(n)}var t=Yh.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new AU(n);case 13:return new CU(n)}var r=Yh.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new as(n,"310","11");case 57:return new as(n,"320","11");case 58:return new as(n,"310","13");case 59:return new as(n,"320","13");case 60:return new as(n,"310","15");case 61:return new as(n,"320","15");case 62:return new as(n,"310","17");case 63:return new as(n,"320","17")}}catch(i){throw console.log(i),new Gf("unknown decoder: "+n)}}var $A=(function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n})(),bU=(function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,o){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n})(),PU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ls=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RU=(function(n){PU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(a){if(a instanceof te){if(!this.pairs.length)throw new te;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new te},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,o,s=r;s<this.rows.length;s++){var a=this.rows[s];this.pairs.length=0;try{for(var u=(i=void 0,ls(t)),f=u.next();!f.done;f=u.next()){var d=f.value;this.pairs.push(d.getPairs())}}catch(g){i={error:g}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}if(this.pairs.push(a.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(t);p.push(a);try{return this.checkRows(p,s+1)}catch(g){console.log(g)}}}throw new te},e.isValidSequence=function(t){var r,i;try{for(var o=ls(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var a=s.value;if(!(t.length>a.length)){for(var u=!0,f=0;f<t.length;f++)if(t[f].getFinderPattern().getValue()!==a[f]){u=!1;break}if(u)return!0}}}catch(d){r={error:d}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,o=!1,s=!1;i<this.rows.length;){var a=this.rows[i];if(a.getRowNumber()>t){s=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new bU(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,o,s,a,u,f;try{for(var d=ls(r),p=d.next();!p.done;p=d.next()){var g=p.value;if(g.getPairs().length!==t.length){var y=!0;try{for(var E=(s=void 0,ls(g.getPairs())),A=E.next();!A.done;A=E.next()){var I=A.value,N=!1;try{for(var R=(u=void 0,ls(t)),k=R.next();!k.done;k=R.next()){var j=k.value;if($A.equals(I,j)){N=!0;break}}}catch(H){u={error:H}}finally{try{k&&!k.done&&(f=R.return)&&f.call(R)}finally{if(u)throw u.error}}N||(y=!1)}}catch(H){s={error:H}}finally{try{A&&!A.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}}}}catch(H){i={error:H}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,o,s,a,u,f;try{for(var d=ls(r),p=d.next();!p.done;p=d.next()){var g=p.value,y=!0;try{for(var E=(s=void 0,ls(t)),A=E.next();!A.done;A=E.next()){var I=A.value,N=!1;try{for(var R=(u=void 0,ls(g.getPairs())),k=R.next();!k.done;k=R.next()){var j=k.value;if(I.equals(j)){N=!0;break}}}catch(H){u={error:H}}finally{try{k&&!k.done&&(f=R.return)&&f.call(R)}finally{if(u)throw u.error}}if(!N){y=!1;break}}}catch(H){s={error:H}}finally{try{A&&!A.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}if(y)return!0}}catch(H){i={error:H}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=sU.buildBitArray(t),i=SU(r),o=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),a=t[t.length-1].getFinderPattern().getResultPoints(),u=[s[0],s[1],a[0],a[1]];return new Xn(o,null,null,u,Oe.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,a=1;a<this.pairs.size();++a){var u=this.pairs.get(a);o+=u.getLeftChar().getChecksumPortion(),s++;var f=u.getRightChar();f!=null&&(o+=f.getChecksumPortion(),s++)}o%=211;var d=211*(s-4)+o;return d===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var o=r.length%2===0;this.startFromEven&&(o=!o);var s,a=!0,u=-1;do this.findNextPair(t,r,u),s=this.parseFoundFinderPattern(t,i,o),s===null?u=e.getNextSecondBar(t,this.startEnd[0]):a=!1;while(a);var f=this.decodeDataCharacter(t,s,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new te;var d;try{d=this.decodeDataCharacter(t,s,o,!1)}catch(p){d=null,console.log(p)}return new $A(f,d,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s=t.getSize(),a;if(i>=0)a=i;else if(this.isEmptyPair(r))a=0;else{var u=r[r.length-1];a=u.getFinderPattern().getStartEnd()[1]}var f=r.length%2!==0;this.startFromEven&&(f=!f);for(var d=!1;a<s&&(d=!t.get(a),!!d);)a++;for(var p=0,g=a,y=a;y<s;y++)if(t.get(y)!==d)o[p]++;else{if(p===3){if(f&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=g,this.startEnd[1]=y;return}f&&e.reverseCounters(o),g+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,p--}else p++;o[p]=1,d=!d}throw new te},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var o=t[i];t[i]=t[r-i-1],t[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(t,r,i){var o,s,a;if(i){for(var u=this.startEnd[0]-1;u>=0&&!t.get(u);)u--;u++,o=this.startEnd[0]-u,s=u,a=this.startEnd[1]}else s=this.startEnd[0],a=t.getNextUnset(this.startEnd[1]+1),o=a-this.startEnd[1];var f=this.getDecodeFinderCounters();xt.arraycopy(f,0,f,1,f.length-1),f[0]=o;var d;try{d=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new mb(d,[s,a],s,a,r)},e.prototype.decodeDataCharacter=function(t,r,i,o){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(o)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var u=0,f=s.length-1;u<f;u++,f--){var d=s[u];s[u]=s[f],s[f]=d}}var p=17,g=lt.sum(new Int32Array(s))/p,y=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(g-y)/y>.3)throw new te;for(var E=this.getOddCounts(),A=this.getEvenCounts(),I=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors(),u=0;u<s.length;u++){var R=1*s[u]/g,k=R+.5;if(k<1){if(R<.3)throw new te;k=1}else if(k>8){if(R>8.7)throw new te;k=8}var j=u/2;(u&1)===0?(E[j]=k,I[j]=R-k):(A[j]=k,N[j]=R-k)}this.adjustOddEvenCounts(p);for(var H=4*r.getValue()+(i?0:2)+(o?0:1)-1,$=0,b=0,u=E.length-1;u>=0;u--){if(e.isNotA1left(r,i,o)){var S=e.WEIGHTS[H][2*u];b+=E[u]*S}$+=E[u]}for(var O=0,u=A.length-1;u>=0;u--)if(e.isNotA1left(r,i,o)){var S=e.WEIGHTS[H][2*u+1];O+=A[u]*S}var V=b+O;if(($&1)!==0||$>13||$<4)throw new te;var L=(13-$)/2,U=e.SYMBOL_WIDEST[L],D=9-U,ue=Ul.getRSSvalue(E,U,!0),le=Ul.getRSSvalue(A,D,!1),Ue=e.EVEN_TOTAL_SUBSET[L],Ie=e.GSUM[L],Z=ue*Ue+le+Ie;return new Cp(Z,V)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=lt.sum(new Int32Array(this.getOddCounts())),i=lt.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);var a=!1,u=!1;i>13?u=!0:i<4&&(a=!0);var f=r+i-t,d=(r&1)===1,p=(i&1)===0;if(f===1)if(d){if(p)throw new te;s=!0}else{if(!p)throw new te;u=!0}else if(f===-1)if(d){if(p)throw new te;o=!0}else{if(!p)throw new te;a=!0}else if(f===0){if(d){if(!p)throw new te;r<i?(o=!0,u=!0):(s=!0,a=!0)}else if(p)throw new te}else throw new te;if(o){if(s)throw new te;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(u)throw new te;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(va),NU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),OU=(function(n){NU(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(Cp),DU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Om=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GA=(function(n){DU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var o,s,a,u,f=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,f),r.reverse();var d=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,d),r.reverse();try{for(var p=Om(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var y=g.value;if(y.getCount()>1)try{for(var E=(a=void 0,Om(this.possibleRightPairs)),A=E.next();!A.done;A=E.next()){var I=A.value;if(I.getCount()>1&&e.checkChecksum(y,I))return e.constructResult(y,I)}}catch(N){a={error:N}}finally{try{A&&!A.done&&(u=E.return)&&u.call(E)}finally{if(a)throw a.error}}}}catch(N){o={error:N}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}throw new te},e.addOrTally=function(t,r){var i,o;if(r!=null){var s=!1;try{for(var a=Om(t),u=a.next();!u.done;u=a.next()){var f=u.value;if(f.getValue()===r.getValue()){f.incrementCount(),s=!0;break}}}catch(d){i={error:d}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),o=new String(i).toString(),s=new Ke,a=13-o.length;a>0;a--)s.append("0");s.append(o);for(var u=0,a=0;a<13;a++){var f=s.charAt(a).charCodeAt(0)-48;u+=(a&1)===0?3*f:f}u=10-u%10,u===10&&(u=0),s.append(u.toString());var d=t.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new Xn(s.toString(),null,0,[d[0],d[1],p[0],p[1]],Oe.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(t,r,i,o){try{var s=this.findFinderPattern(t,r),a=this.parseFoundFinderPattern(t,i,r,s),u=o==null?null:o.get(Mt.NEED_RESULT_POINT_CALLBACK);if(u!=null){var f=(s[0]+s[1])/2;r&&(f=t.getSize()-1-f),u.foundPossibleResultPoint(new be(f,i))}var d=this.decodeDataCharacter(t,a,!0),p=this.decodeDataCharacter(t,a,!1);return new OU(1597*d.getValue()+p.getValue(),d.getChecksumPortion()+4*p.getChecksumPortion(),a)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)fn.recordPatternInReverse(t,r.getStartEnd()[0],o);else{fn.recordPattern(t,r.getStartEnd()[1]+1,o);for(var a=0,u=o.length-1;a<u;a++,u--){var f=o[a];o[a]=o[u],o[u]=f}}for(var d=i?16:15,p=lt.sum(new Int32Array(o))/d,g=this.getOddCounts(),y=this.getEvenCounts(),E=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors(),a=0;a<o.length;a++){var I=o[a]/p,N=Math.floor(I+.5);N<1?N=1:N>8&&(N=8);var R=Math.floor(a/2);(a&1)===0?(g[R]=N,E[R]=I-N):(y[R]=N,A[R]=I-N)}this.adjustOddEvenCounts(i,d);for(var k=0,j=0,a=g.length-1;a>=0;a--)j*=9,j+=g[a],k+=g[a];for(var H=0,$=0,a=y.length-1;a>=0;a--)H*=9,H+=y[a],$+=y[a];var b=j+3*H;if(i){if((k&1)!==0||k>12||k<4)throw new te;var S=(12-k)/2,O=e.OUTSIDE_ODD_WIDEST[S],V=9-O,L=Ul.getRSSvalue(g,O,!1),U=Ul.getRSSvalue(y,V,!0),D=e.OUTSIDE_EVEN_TOTAL_SUBSET[S],ue=e.OUTSIDE_GSUM[S];return new Cp(L*D+U+ue,b)}else{if(($&1)!==0||$>10||$<4)throw new te;var S=(10-$)/2,O=e.INSIDE_ODD_WIDEST[S],V=9-O,L=Ul.getRSSvalue(g,O,!0),U=Ul.getRSSvalue(y,V,!1),le=e.INSIDE_ODD_TOTAL_SUBSET[S],ue=e.INSIDE_GSUM[S];return new Cp(U*le+L+ue,b)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=t.getSize(),s=!1,a=0;a<o&&(s=!t.get(a),r!==s);)a++;for(var u=0,f=a,d=a;d<o;d++)if(t.get(d)!==s)i[u]++;else{if(u===3){if(va.isFinderPattern(i))return[f,d];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,u--}else u++;i[u]=1,s=!s}throw new te},e.prototype.parseFoundFinderPattern=function(t,r,i,o){for(var s=t.get(o[0]),a=o[0]-1;a>=0&&s!==t.get(a);)a--;a++;var u=o[0]-a,f=this.getDecodeFinderCounters(),d=new Int32Array(f.length);xt.arraycopy(f,0,d,1,f.length-1),d[0]=u;var p=this.parseFinderValue(d,e.FINDER_PATTERNS),g=a,y=o[1];return i&&(g=t.getSize()-1-g,y=t.getSize()-1-y),new mb(p,[a,o[1]],g,y,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=lt.sum(new Int32Array(this.getOddCounts())),o=lt.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1,u=!1,f=!1;t?(i>12?a=!0:i<4&&(s=!0),o>12?f=!0:o<4&&(u=!0)):(i>11?a=!0:i<5&&(s=!0),o>10?f=!0:o<4&&(u=!0));var d=i+o-r,p=(i&1)===(t?1:0),g=(o&1)===1;if(d===1)if(p){if(g)throw new te;a=!0}else{if(!g)throw new te;f=!0}else if(d===-1)if(p){if(g)throw new te;s=!0}else{if(!g)throw new te;u=!0}else if(d===0){if(p){if(!g)throw new te;i<o?(s=!0,f=!0):(a=!0,u=!0)}else if(g)throw new te}else throw new te;if(s){if(a)throw new te;va.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&va.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(f)throw new te;va.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&va.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(va),kU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Vc=(function(n){kU(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Mt.POSSIBLE_FORMATS):null,o=t&&t.get(Mt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;return i&&((i.includes(Oe.EAN_13)||i.includes(Oe.UPC_A)||i.includes(Oe.EAN_8)||i.includes(Oe.UPC_E))&&r.readers.push(new Nm(t)),i.includes(Oe.CODE_39)&&r.readers.push(new LA(o)),i.includes(Oe.CODE_93)&&r.readers.push(new VA),i.includes(Oe.CODE_128)&&r.readers.push(new MA),i.includes(Oe.ITF)&&r.readers.push(new FA),i.includes(Oe.CODABAR)&&r.readers.push(new nU),i.includes(Oe.RSS_14)&&r.readers.push(new GA),i.includes(Oe.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new RU))),r.readers.length===0&&(r.readers.push(new Nm(t)),r.readers.push(new LA),r.readers.push(new VA),r.readers.push(new Nm(t)),r.readers.push(new MA),r.readers.push(new FA),r.readers.push(new GA)),r}return e.prototype.decodeRow=function(t,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,r,i)}catch{}throw new te},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(fn),MU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){MU(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new Vc(r),t,r)||this}return e})(Cu);var qA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dt=(function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),ct=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),LU=(function(){function n(e,t,r,i,o,s){var a,u;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var f=0,d=s.getECCodewords(),p=s.getECBlocks();try{for(var g=qA(p),y=g.next();!y.done;y=g.next()){var E=y.value;f+=E.getCount()*(E.getDataCodewords()+d)}}catch(A){a={error:A}}finally{try{y&&!y.done&&(u=g.return)&&u.call(g)}finally{if(a)throw a.error}}this.totalCodewords=f}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new he;try{for(var o=qA(n.VERSIONS),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===t)return a}}catch(u){r={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new he},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new dt(5,new ct(1,3))),new n(2,12,12,10,10,new dt(7,new ct(1,5))),new n(3,14,14,12,12,new dt(10,new ct(1,8))),new n(4,16,16,14,14,new dt(12,new ct(1,12))),new n(5,18,18,16,16,new dt(14,new ct(1,18))),new n(6,20,20,18,18,new dt(18,new ct(1,22))),new n(7,22,22,20,20,new dt(20,new ct(1,30))),new n(8,24,24,22,22,new dt(24,new ct(1,36))),new n(9,26,26,24,24,new dt(28,new ct(1,44))),new n(10,32,32,14,14,new dt(36,new ct(1,62))),new n(11,36,36,16,16,new dt(42,new ct(1,86))),new n(12,40,40,18,18,new dt(48,new ct(1,114))),new n(13,44,44,20,20,new dt(56,new ct(1,144))),new n(14,48,48,22,22,new dt(68,new ct(1,174))),new n(15,52,52,24,24,new dt(42,new ct(2,102))),new n(16,64,64,14,14,new dt(56,new ct(2,140))),new n(17,72,72,16,16,new dt(36,new ct(4,92))),new n(18,80,80,18,18,new dt(48,new ct(4,114))),new n(19,88,88,20,20,new dt(56,new ct(4,144))),new n(20,96,96,22,22,new dt(68,new ct(4,174))),new n(21,104,104,24,24,new dt(56,new ct(6,136))),new n(22,120,120,18,18,new dt(68,new ct(6,175))),new n(23,132,132,20,20,new dt(62,new ct(8,163))),new n(24,144,144,22,22,new dt(62,new ct(8,156),new ct(2,155))),new n(25,8,18,6,16,new dt(7,new ct(1,5))),new n(26,8,32,6,14,new dt(11,new ct(1,10))),new n(27,12,26,10,24,new dt(14,new ct(1,16))),new n(28,12,36,10,16,new dt(18,new ct(1,22))),new n(29,16,36,14,16,new dt(24,new ct(1,32))),new n(30,16,48,14,22,new dt(28,new ct(1,49)))]},n.VERSIONS=n.buildVersions(),n})(),VU=(function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new he;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Xi(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return LU.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),a=!1,u=!1,f=!1,d=!1;do if(r===o&&i===0&&!a)e[t++]=this.readCorner1(o,s)&255,r-=2,i+=2,a=!0;else if(r===o-2&&i===0&&(s&3)!==0&&!u)e[t++]=this.readCorner2(o,s)&255,r-=2,i+=2,u=!0;else if(r===o+4&&i===2&&(s&7)===0&&!f)e[t++]=this.readCorner3(o,s)&255,r-=2,i+=2,f=!0;else if(r===o-2&&i===0&&(s&7)===4&&!d)e[t++]=this.readCorner4(o,s)&255,r-=2,i+=2,d=!0;else{do r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r+=2,i-=2;while(r<o&&i>=0);r+=3,i+=1}while(r<o||i<s);if(t!==this.version.getTotalCodewords())throw new he;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var o=0;return this.readModule(e-2,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t,r,i)&&(o|=1),o<<=1,this.readModule(e,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e,t,r,i)&&(o|=1),o},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Le("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=t/i|0,a=r/o|0,u=s*i,f=a*o,d=new Xi(f,u),p=0;p<s;++p)for(var g=p*i,y=0;y<a;++y)for(var E=y*o,A=0;A<i;++A)for(var I=p*(i+2)+1+A,N=g+A,R=0;R<o;++R){var k=y*(o+2)+1+R;if(e.get(k,I)){var j=E+R;d.set(j,N)}}return d},n})(),KA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FU=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,o,s,a=t.getECBlocks(),u=0,f=a.getECBlocks();try{for(var d=KA(f),p=d.next();!p.done;p=d.next()){var g=p.value;u+=g.getCount()}}catch(ue){r={error:ue}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var y=new Array(u),E=0;try{for(var A=KA(f),I=A.next();!I.done;I=A.next())for(var g=I.value,N=0;N<g.getCount();N++){var R=g.getDataCodewords(),k=a.getECCodewords()+R;y[E++]=new n(R,new Uint8Array(k))}}catch(ue){o={error:ue}}finally{try{I&&!I.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}for(var j=y[0].codewords.length,H=j-a.getECCodewords(),$=H-1,b=0,N=0;N<$;N++)for(var S=0;S<E;S++)y[S].codewords[N]=e[b++];for(var O=t.getVersionNumber()===24,V=O?8:E,S=0;S<V;S++)y[S].codewords[H-1]=e[b++];for(var L=y[0].codewords.length,N=H;N<L;N++)for(var S=0;S<E;S++){var U=O?(S+8)%E:S,D=O&&U>7?N-1:N;y[U].codewords[D]=e[b++]}if(b!==e.length)throw new Le;return y},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),yb=(function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Le(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var s=8-r,a=e<s?e:s,u=s-a,f=255>>8-a<<u;t=(o[i]&f)>>u,e-=a,r+=a,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|o[i]&255,i++,e-=8;if(e>0){var u=8-e,f=255>>u<<u;t=t<<e|(o[i]&f)>>u,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n})(),on;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(on||(on={}));var BU=(function(){function n(){}return n.decode=function(e){var t=new yb(e),r=new Ke,i=new Ke,o=new Array,s=on.ASCII_ENCODE;do if(s===on.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case on.C40_ENCODE:this.decodeC40Segment(t,r);break;case on.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case on.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case on.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case on.BASE256_ENCODE:this.decodeBase256Segment(t,r,o);break;default:throw new he}s=on.ASCII_ENCODE}while(s!==on.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new d0(e,r.toString(),o.length===0?null:o,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var o=e.readBits(8);if(o===0)throw new he;if(o<=128)return i&&(o+=128),t.append(String.fromCharCode(o-1)),on.ASCII_ENCODE;if(o===129)return on.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&t.append("0"),t.append(""+s)}else switch(o){case 230:return on.C40_ENCODE;case 231:return on.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return on.ANSIX12_ENCODE;case 239:return on.TEXT_ENCODE;case 240:return on.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new he;break}}while(e.available()>0);return on.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var u=i[a];switch(o){case 0:if(u<3)o=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new he;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),o=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new he}o=0;break;case 3:r?(t.append(String.fromCharCode(u+224)),r=!1):t.append(String.fromCharCode(u+96)),o=0;break;default:throw new he}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var u=i[a];switch(o){case 0:if(u<3)o=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new he;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),o=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new he}o=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[u];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f),o=0}else throw new he;break;default:throw new he}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var s=r[o];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new he;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,o=Math.floor(i/1600);r[0]=o,i-=o*1600,o=Math.floor(i/40),r[1]=o,r[2]=i-o*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new he;for(var a=new Uint8Array(s),u=0;u<s;u++){if(e.available()<8)throw new he;a[u]=this.unrandomize255State(e.readBits(8),i++)}r.push(a);try{t.append(Yr.decode(a,rt.ISO88591))}catch(f){throw new Gf("Platform does not support required encoding: "+f.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n})(),UU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jU=(function(){function n(){this.rsDecoder=new h0(pr.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new VU(e),o=i.getVersion(),s=i.readCodewords(),a=FU.getDataBlocks(s,o),u=0;try{for(var f=UU(a),d=f.next();!d.done;d=f.next()){var p=d.value;u+=p.getNumDataCodewords()}}catch(k){t={error:k}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}for(var g=new Uint8Array(u),y=a.length,E=0;E<y;E++){var A=a[E],I=A.getCodewords(),N=A.getNumDataCodewords();this.correctErrors(I,N);for(var R=0;R<N;R++)g[R*y+E]=I[R]}return BU.decode(g)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new An}for(var i=0;i<t;i++)e[i]=r[i]},n})(),zU=(function(){function n(e){this.image=e,this.rectangleDetector=new Hg(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new te;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],o=t[2],s=t[3],a=this.transitionsBetween(r,s)+1,u=this.transitionsBetween(o,s)+1;(a&1)===1&&(a+=1),(u&1)===1&&(u+=1),4*a<7*u&&4*u<7*a&&(a=u=Math.max(a,u));var f=n.sampleGrid(this.image,r,i,o,s,a,u);return new zy(f,[r,i,o,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),o=(t.getY()-e.getY())/(r+1);return new be(e.getX()+i,e.getY()+o)},n.moveAway=function(e,t,r){var i=e.getX(),o=e.getY();return i<t?i-=1:i+=1,o<r?o-=1:o+=1,new be(i,o)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],o=e[2],s=this.transitionsBetween(t,r),a=this.transitionsBetween(r,i),u=this.transitionsBetween(i,o),f=this.transitionsBetween(o,t),d=s,p=[o,t,r,i];return d>a&&(d=a,p[0]=t,p[1]=r,p[2]=i,p[3]=o),d>u&&(d=u,p[0]=r,p[1]=i,p[2]=o,p[3]=t),d>f&&(p[0]=i,p[1]=o,p[2]=t,p[3]=r),p},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),a=n.shiftPoint(r,i,(s+1)*4),u=n.shiftPoint(i,r,(s+1)*4),f=this.transitionsBetween(a,t),d=this.transitionsBetween(u,o);return f<d?(e[0]=t,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),a=this.transitionsBetween(r,o),u=n.shiftPoint(t,r,(a+1)*4),f=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(u,o),a=this.transitionsBetween(f,o);var d=new be(o.getX()+(i.getX()-r.getX())/(s+1),o.getY()+(i.getY()-r.getY())/(s+1)),p=new be(o.getX()+(t.getX()-r.getX())/(a+1),o.getY()+(t.getY()-r.getY())/(a+1));if(!this.isValid(d))return this.isValid(p)?p:null;if(!this.isValid(p))return d;var g=this.transitionsBetween(u,d)+this.transitionsBetween(f,d),y=this.transitionsBetween(u,p)+this.transitionsBetween(f,p);return g>y?d:p},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o)+1,a=this.transitionsBetween(i,o)+1,u=n.shiftPoint(t,r,a*4),f=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(u,o)+1,a=this.transitionsBetween(f,o)+1,(s&1)===1&&(s+=1),(a&1)===1&&(a+=1);var d=(t.getX()+r.getX()+i.getX()+o.getX())/4,p=(t.getY()+r.getY()+i.getY()+o.getY())/4;t=n.moveAway(t,d,p),r=n.moveAway(r,d,p),i=n.moveAway(i,d,p),o=n.moveAway(o,d,p);var g,y;return u=n.shiftPoint(t,r,a*4),u=n.shiftPoint(u,o,s*4),g=n.shiftPoint(r,t,a*4),g=n.shiftPoint(g,i,s*4),f=n.shiftPoint(i,o,a*4),f=n.shiftPoint(f,r,s*4),y=n.shiftPoint(o,i,a*4),y=n.shiftPoint(y,t,s*4),[u,g,f,y]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,o,s,a){var u=Hy.getInstance();return u.sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,t.getX(),t.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(t.getX()),s=Math.trunc(t.getY()),a=Math.abs(s-i)>Math.abs(o-r);if(a){var u=r;r=i,i=u,u=o,o=s,s=u}for(var f=Math.abs(o-r),d=Math.abs(s-i),p=-f/2,g=i<s?1:-1,y=r<o?1:-1,E=0,A=this.image.get(a?i:r,a?r:i),I=r,N=i;I!==o;I+=y){var R=this.image.get(a?N:I,a?I:N);if(R!==A&&(E++,A=R),p+=d,p>0){if(N===s)break;N+=g,p-=f}}return E},n})(),Gg=(function(){function n(){this.decoder=new jU}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Mt.PURE_BARCODE)){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=n.NO_POINTS}else{var s=new zU(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var a=r.getRawBytes(),u=new Xn(r.getText(),a,8*a.length,i,Oe.DATA_MATRIX,xt.currentTimeMillis()),f=r.getByteSegments();f!=null&&u.putMetadata(Ln.BYTE_SEGMENTS,f);var d=r.getECLevel();return d!=null&&u.putMetadata(Ln.ERROR_CORRECTION_LEVEL,d),u},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new te;var i=this.moduleSize(t,e),o=t[1],s=r[1],a=t[0],u=r[0],f=(u-a+1)/i,d=(s-o+1)/i;if(f<=0||d<=0)throw new te;var p=i/2;o+=p,a+=p;for(var g=new Xi(f,d),y=0;y<d;y++)for(var E=o+y*i,A=0;A<f;A++)e.get(a+A*i,E)&&g.set(A,y);return g},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],o=e[1];i<r&&t.get(i,o);)i++;if(i===r)throw new te;var s=i-e[0];if(s===0)throw new te;return s},n.NO_POINTS=[],n})(),HU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){HU(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Gg,t)||this}return e})(Cu);var jl;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(jl||(jl={}));var WU=(function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new ui(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Le;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(jl.L,"L",1),n.M=new n(jl.M,"M",0),n.Q=new n(jl.Q,"Q",3),n.H=new n(jl.H,"H",2),n})(),$U=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wb=(function(){function n(e){this.errorCorrectionLevel=WU.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return Qe.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var a=$U(n.FORMAT_INFO_DECODE_LOOKUP),u=a.next();!u.done;u=a.next()){var f=u.value,d=f[0];if(d===e||d===t)return new n(f[1]);var p=n.numBitsDiffering(e,d);p<o&&(s=f[1],o=p),e!==t&&(p=n.numBitsDiffering(t,d),p<o&&(s=f[1],o=p))}}catch(g){r={error:g}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),GU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=(function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var o=GU(i),s=o.next();!s.done;s=o.next()){var a=s.value;r+=a.getCount()}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),F=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),qU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ia=(function(){function n(e,t){for(var r,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var a=0,u=o[0].getECCodewordsPerBlock(),f=o[0].getECBlocks();try{for(var d=qU(f),p=d.next();!p.done;p=d.next()){var g=p.value;a+=g.getCount()*(g.getDataCodewords()+u)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}this.totalCodewords=a}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new he;try{return this.getVersionForNumber((e-17)/4)}catch{throw new he}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Le;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var o=n.VERSION_DECODE_INFO[i];if(o===e)return n.getVersionForNumber(i+7);var s=wb.numBitsDiffering(e,o);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Xi(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Y(7,new F(1,19)),new Y(10,new F(1,16)),new Y(13,new F(1,13)),new Y(17,new F(1,9))),new n(2,Int32Array.from([6,18]),new Y(10,new F(1,34)),new Y(16,new F(1,28)),new Y(22,new F(1,22)),new Y(28,new F(1,16))),new n(3,Int32Array.from([6,22]),new Y(15,new F(1,55)),new Y(26,new F(1,44)),new Y(18,new F(2,17)),new Y(22,new F(2,13))),new n(4,Int32Array.from([6,26]),new Y(20,new F(1,80)),new Y(18,new F(2,32)),new Y(26,new F(2,24)),new Y(16,new F(4,9))),new n(5,Int32Array.from([6,30]),new Y(26,new F(1,108)),new Y(24,new F(2,43)),new Y(18,new F(2,15),new F(2,16)),new Y(22,new F(2,11),new F(2,12))),new n(6,Int32Array.from([6,34]),new Y(18,new F(2,68)),new Y(16,new F(4,27)),new Y(24,new F(4,19)),new Y(28,new F(4,15))),new n(7,Int32Array.from([6,22,38]),new Y(20,new F(2,78)),new Y(18,new F(4,31)),new Y(18,new F(2,14),new F(4,15)),new Y(26,new F(4,13),new F(1,14))),new n(8,Int32Array.from([6,24,42]),new Y(24,new F(2,97)),new Y(22,new F(2,38),new F(2,39)),new Y(22,new F(4,18),new F(2,19)),new Y(26,new F(4,14),new F(2,15))),new n(9,Int32Array.from([6,26,46]),new Y(30,new F(2,116)),new Y(22,new F(3,36),new F(2,37)),new Y(20,new F(4,16),new F(4,17)),new Y(24,new F(4,12),new F(4,13))),new n(10,Int32Array.from([6,28,50]),new Y(18,new F(2,68),new F(2,69)),new Y(26,new F(4,43),new F(1,44)),new Y(24,new F(6,19),new F(2,20)),new Y(28,new F(6,15),new F(2,16))),new n(11,Int32Array.from([6,30,54]),new Y(20,new F(4,81)),new Y(30,new F(1,50),new F(4,51)),new Y(28,new F(4,22),new F(4,23)),new Y(24,new F(3,12),new F(8,13))),new n(12,Int32Array.from([6,32,58]),new Y(24,new F(2,92),new F(2,93)),new Y(22,new F(6,36),new F(2,37)),new Y(26,new F(4,20),new F(6,21)),new Y(28,new F(7,14),new F(4,15))),new n(13,Int32Array.from([6,34,62]),new Y(26,new F(4,107)),new Y(22,new F(8,37),new F(1,38)),new Y(24,new F(8,20),new F(4,21)),new Y(22,new F(12,11),new F(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Y(30,new F(3,115),new F(1,116)),new Y(24,new F(4,40),new F(5,41)),new Y(20,new F(11,16),new F(5,17)),new Y(24,new F(11,12),new F(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Y(22,new F(5,87),new F(1,88)),new Y(24,new F(5,41),new F(5,42)),new Y(30,new F(5,24),new F(7,25)),new Y(24,new F(11,12),new F(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Y(24,new F(5,98),new F(1,99)),new Y(28,new F(7,45),new F(3,46)),new Y(24,new F(15,19),new F(2,20)),new Y(30,new F(3,15),new F(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Y(28,new F(1,107),new F(5,108)),new Y(28,new F(10,46),new F(1,47)),new Y(28,new F(1,22),new F(15,23)),new Y(28,new F(2,14),new F(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Y(30,new F(5,120),new F(1,121)),new Y(26,new F(9,43),new F(4,44)),new Y(28,new F(17,22),new F(1,23)),new Y(28,new F(2,14),new F(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Y(28,new F(3,113),new F(4,114)),new Y(26,new F(3,44),new F(11,45)),new Y(26,new F(17,21),new F(4,22)),new Y(26,new F(9,13),new F(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Y(28,new F(3,107),new F(5,108)),new Y(26,new F(3,41),new F(13,42)),new Y(30,new F(15,24),new F(5,25)),new Y(28,new F(15,15),new F(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Y(28,new F(4,116),new F(4,117)),new Y(26,new F(17,42)),new Y(28,new F(17,22),new F(6,23)),new Y(30,new F(19,16),new F(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Y(28,new F(2,111),new F(7,112)),new Y(28,new F(17,46)),new Y(30,new F(7,24),new F(16,25)),new Y(24,new F(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Y(30,new F(4,121),new F(5,122)),new Y(28,new F(4,47),new F(14,48)),new Y(30,new F(11,24),new F(14,25)),new Y(30,new F(16,15),new F(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Y(30,new F(6,117),new F(4,118)),new Y(28,new F(6,45),new F(14,46)),new Y(30,new F(11,24),new F(16,25)),new Y(30,new F(30,16),new F(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Y(26,new F(8,106),new F(4,107)),new Y(28,new F(8,47),new F(13,48)),new Y(30,new F(7,24),new F(22,25)),new Y(30,new F(22,15),new F(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Y(28,new F(10,114),new F(2,115)),new Y(28,new F(19,46),new F(4,47)),new Y(28,new F(28,22),new F(6,23)),new Y(30,new F(33,16),new F(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Y(30,new F(8,122),new F(4,123)),new Y(28,new F(22,45),new F(3,46)),new Y(30,new F(8,23),new F(26,24)),new Y(30,new F(12,15),new F(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Y(30,new F(3,117),new F(10,118)),new Y(28,new F(3,45),new F(23,46)),new Y(30,new F(4,24),new F(31,25)),new Y(30,new F(11,15),new F(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Y(30,new F(7,116),new F(7,117)),new Y(28,new F(21,45),new F(7,46)),new Y(30,new F(1,23),new F(37,24)),new Y(30,new F(19,15),new F(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Y(30,new F(5,115),new F(10,116)),new Y(28,new F(19,47),new F(10,48)),new Y(30,new F(15,24),new F(25,25)),new Y(30,new F(23,15),new F(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Y(30,new F(13,115),new F(3,116)),new Y(28,new F(2,46),new F(29,47)),new Y(30,new F(42,24),new F(1,25)),new Y(30,new F(23,15),new F(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Y(30,new F(17,115)),new Y(28,new F(10,46),new F(23,47)),new Y(30,new F(10,24),new F(35,25)),new Y(30,new F(19,15),new F(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Y(30,new F(17,115),new F(1,116)),new Y(28,new F(14,46),new F(21,47)),new Y(30,new F(29,24),new F(19,25)),new Y(30,new F(11,15),new F(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Y(30,new F(13,115),new F(6,116)),new Y(28,new F(14,46),new F(23,47)),new Y(30,new F(44,24),new F(7,25)),new Y(30,new F(59,16),new F(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Y(30,new F(12,121),new F(7,122)),new Y(28,new F(12,47),new F(26,48)),new Y(30,new F(39,24),new F(14,25)),new Y(30,new F(22,15),new F(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Y(30,new F(6,121),new F(14,122)),new Y(28,new F(6,47),new F(34,48)),new Y(30,new F(46,24),new F(10,25)),new Y(30,new F(2,15),new F(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Y(30,new F(17,122),new F(4,123)),new Y(28,new F(29,46),new F(14,47)),new Y(30,new F(49,24),new F(10,25)),new Y(30,new F(24,15),new F(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Y(30,new F(4,122),new F(18,123)),new Y(28,new F(13,46),new F(32,47)),new Y(30,new F(48,24),new F(14,25)),new Y(30,new F(42,15),new F(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Y(30,new F(20,117),new F(4,118)),new Y(28,new F(40,47),new F(7,48)),new Y(30,new F(43,24),new F(22,25)),new Y(30,new F(10,15),new F(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Y(30,new F(19,118),new F(6,119)),new Y(28,new F(18,47),new F(31,48)),new Y(30,new F(34,24),new F(34,25)),new Y(30,new F(20,15),new F(61,16)))],n})(),yn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(yn||(yn={}));var XA=(function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[yn.DATA_MASK_000,new n(yn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[yn.DATA_MASK_001,new n(yn.DATA_MASK_001,function(e,t){return(e&1)===0})],[yn.DATA_MASK_010,new n(yn.DATA_MASK_010,function(e,t){return t%3===0})],[yn.DATA_MASK_011,new n(yn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[yn.DATA_MASK_100,new n(yn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[yn.DATA_MASK_101,new n(yn.DATA_MASK_101,function(e,t){return e*t%6===0})],[yn.DATA_MASK_110,new n(yn.DATA_MASK_110,function(e,t){return e*t%6<3})],[yn.DATA_MASK_111,new n(yn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n})(),KU=(function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new he;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),o=0,s=i-7,r=i-1;r>=s;r--)o=this.copyBit(8,r,o);for(var t=i-8;t<i;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=wb.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new he},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Ia.getVersionForNumber(t);for(var r=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,o,r);var a=Ia.decodeVersionInformation(r);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;r=0;for(var s=5;s>=0;s--)for(var o=e-9;o>=i;o--)r=this.copyBit(s,o,r);if(a=Ia.decodeVersionInformation(r),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new he},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=XA.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=t.buildFunctionPattern(),s=!0,a=new Uint8Array(t.getTotalCodewords()),u=0,f=0,d=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var y=s?i-1-g:g,E=0;E<2;E++)o.get(p-E,y)||(d++,f<<=1,this.bitMatrix.get(p-E,y)&&(f|=1),d===8&&(a[u++]=f,d=0,f=0));s=!s}if(u!==t.getTotalCodewords())throw new he;return a},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=XA.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,o=e.getHeight();i<o;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n})(),YA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XU=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,o,s,a;if(e.length!==t.getTotalCodewords())throw new Le;var u=t.getECBlocksForLevel(r),f=0,d=u.getECBlocks();try{for(var p=YA(d),g=p.next();!g.done;g=p.next()){var y=g.value;f+=y.getCount()}}catch(D){i={error:D}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}var E=new Array(f),A=0;try{for(var I=YA(d),N=I.next();!N.done;N=I.next())for(var y=N.value,R=0;R<y.getCount();R++){var k=y.getDataCodewords(),j=u.getECCodewordsPerBlock()+k;E[A++]=new n(k,new Uint8Array(j))}}catch(D){s={error:D}}finally{try{N&&!N.done&&(a=I.return)&&a.call(I)}finally{if(s)throw s.error}}for(var H=E[0].codewords.length,$=E.length-1;$>=0;){var b=E[$].codewords.length;if(b===H)break;$--}$++;for(var S=H-u.getECCodewordsPerBlock(),O=0,R=0;R<S;R++)for(var V=0;V<A;V++)E[V].codewords[R]=e[O++];for(var V=$;V<A;V++)E[V].codewords[S]=e[O++];for(var L=E[0].codewords.length,R=S;R<L;R++)for(var V=0;V<A;V++){var U=V<$?R:R+1;E[V].codewords[U]=e[O++]}return E},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),$r;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})($r||($r={}));var It=(function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Le;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n($r.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n($r.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n($r.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n($r.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n($r.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n($r.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n($r.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n($r.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n($r.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n($r.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n})(),YU=(function(){function n(){}return n.decode=function(e,t,r,i){var o=new yb(e),s=new Ke,a=new Array,u=-1,f=-1;try{var d=null,p=!1,g=void 0;do{if(o.available()<4)g=It.TERMINATOR;else{var y=o.readBits(4);g=It.forBits(y)}switch(g){case It.TERMINATOR:break;case It.FNC1_FIRST_POSITION:case It.FNC1_SECOND_POSITION:p=!0;break;case It.STRUCTURED_APPEND:if(o.available()<16)throw new he;u=o.readBits(8),f=o.readBits(8);break;case It.ECI:var E=n.parseECIValue(o);if(d=ln.getCharacterSetECIByValue(E),d===null)throw new he;break;case It.HANZI:var A=o.readBits(4),I=o.readBits(g.getCharacterCountBits(t));A===n.GB2312_SUBSET&&n.decodeHanziSegment(o,s,I);break;default:var N=o.readBits(g.getCharacterCountBits(t));switch(g){case It.NUMERIC:n.decodeNumericSegment(o,s,N);break;case It.ALPHANUMERIC:n.decodeAlphanumericSegment(o,s,N,p);break;case It.BYTE:n.decodeByteSegment(o,s,N,d,a,i);break;case It.KANJI:n.decodeKanjiSegment(o,s,N);break;default:throw new he}break}}while(g!==It.TERMINATOR)}catch{throw new he}return new d0(e,s.toString(),a.length===0?null:a,r===null?null:r.toString(),u,f)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new he;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/96<<8&4294967295|s%96;a<959?a+=41377:a+=42657,i[o]=a>>8&255,i[o+1]=a&255,o+=2,r--}try{t.append(Yr.decode(i,rt.GB2312))}catch(u){throw new he(u)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new he;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/192<<8&4294967295|s%192;a<7936?a+=33088:a+=49472,i[o]=a>>8,i[o+1]=a,o+=2,r--}try{t.append(Yr.decode(i,rt.SHIFT_JIS))}catch(u){throw new he(u)}},n.decodeByteSegment=function(e,t,r,i,o,s){if(8*r>e.available())throw new he;for(var a=new Uint8Array(r),u=0;u<r;u++)a[u]=e.readBits(8);var f;i===null?f=rt.guessEncoding(a,s):f=i.getName();try{t.append(Yr.decode(a,f))}catch(d){throw new he(d)}o.push(a)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new he;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var o=t.length();r>1;){if(e.available()<11)throw new he;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new he;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var a=o;a<t.length();a++)t.charAt(a)==="%"&&(a<t.length()-1&&t.charAt(a+1)==="%"?t.deleteCharAt(a+1):t.setCharAt(a,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new he;var i=e.readBits(10);if(i>=1e3)throw new he;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new he;var o=e.readBits(7);if(o>=100)throw new he;t.append(n.toAlphaNumericChar(Math.floor(o/10))),t.append(n.toAlphaNumericChar(o%10))}else if(r===1){if(e.available()<4)throw new he;var s=e.readBits(4);if(s>=10)throw new he;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new he},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n})(),_b=(function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n})(),QA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},QU=(function(){function n(){this.rsDecoder=new h0(pr.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Xi.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new KU(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,t);return o.setOther(new _b(!0)),o}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,o,s,a=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),d=XU.getDataBlocks(f,a,u),p=0;try{for(var g=QA(d),y=g.next();!y.done;y=g.next()){var E=y.value;p+=E.getNumDataCodewords()}}catch($){r={error:$}}finally{try{y&&!y.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var A=new Uint8Array(p),I=0;try{for(var N=QA(d),R=N.next();!R.done;R=N.next()){var E=R.value,k=E.getCodewords(),j=E.getNumDataCodewords();this.correctErrors(k,j);for(var H=0;H<j;H++)A[I++]=k[H]}}catch($){o={error:$}}finally{try{R&&!R.done&&(s=N.return)&&s.call(N)}finally{if(o)throw o.error}}return YU.decode(A,a,u,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new An}for(var i=0;i<t;i++)e[i]=r[i]},n})(),ZU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),JU=(function(n){ZU(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=(this.getX()+r)/2,s=(this.getY()+t)/2,a=(this.estimatedModuleSize+i)/2;return new e(o,s,a)},e})(be),ej=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tj=(function(){function n(e,t,r,i,o,s,a){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,o=this.startY+t/2,s=new Int32Array(3),a=this.image,u=0;u<t;u++){var f=o+((u&1)===0?Math.floor((u+1)/2):-Math.floor((u+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var d=e;d<i&&!a.get(d,f);)d++;for(var p=0;d<i;){if(a.get(d,f))if(p===1)s[1]++;else if(p===2){if(this.foundPatternCross(s)){var g=this.handlePossibleCenter(s,f,d);if(g!==null)return g}s[0]=s[2],s[1]=1,s[2]=0,p=1}else s[++p]++;else p===1&&p++,s[p]++;d++}if(this.foundPatternCross(s)){var g=this.handlePossibleCenter(s,f,i);if(g!==null)return g}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new te},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var o=this.image,s=o.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var u=e;u>=0&&o.get(t,u)&&a[1]<=r;)a[1]++,u--;if(u<0||a[1]>r)return NaN;for(;u>=0&&!o.get(t,u)&&a[0]<=r;)a[0]++,u--;if(a[0]>r)return NaN;for(u=e+1;u<s&&o.get(t,u)&&a[1]<=r;)a[1]++,u++;if(u===s||a[1]>r)return NaN;for(;u<s&&!o.get(t,u)&&a[2]<=r;)a[2]++,u++;if(a[2]>r)return NaN;var f=a[0]+a[1]+a[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(a)?n.centerFromEnd(a,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,o,s=e[0]+e[1]+e[2],a=n.centerFromEnd(e,r),u=this.crossCheckVertical(t,a,2*e[1],s);if(!isNaN(u)){var f=(e[0]+e[1]+e[2])/3;try{for(var d=ej(this.possibleCenters),p=d.next();!p.done;p=d.next()){var g=p.value;if(g.aboutEquals(f,u,a))return g.combineEstimate(u,a,f)}}catch(E){i={error:E}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}var y=new JU(a,u,f);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null},n})(),nj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),rj=(function(n){nj(e,n);function e(t,r,i,o){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=this.count+1,s=(this.count*this.getX()+r)/o,a=(this.count*this.getY()+t)/o,u=(this.count*this.estimatedModuleSize+i)/o;return new e(s,a,u,o)},e})(be),ij=(function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),Cc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oj=(function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Mt.TRY_HARDER)!==void 0,r=e!=null&&e.get(Mt.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),a=Math.floor(3*o/(4*n.MAX_MODULES));(a<n.MIN_SKIP||t)&&(a=n.MIN_SKIP);for(var u=!1,f=new Int32Array(5),d=a-1;d<o&&!u;d+=a){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var p=0,g=0;g<s;g++)if(i.get(g,d))(p&1)===1&&p++,f[p]++;else if((p&1)===0)if(p===4)if(n.foundPatternCross(f)){var y=this.handlePossibleCenter(f,d,g,r);if(y===!0)if(a=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var E=this.findRowSkip();E>f[2]&&(d+=E-f[2]-a,g=s-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;continue}p=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;else f[++p]++;else f[p]++;if(n.foundPatternCross(f)){var y=this.handlePossibleCenter(f,d,s,r);y===!0&&(a=f[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}}var A=this.selectBestPatterns();return be.orderBestPatterns(A),new ij(A)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var o=t/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var o=this.getCrossCheckStateCount(),s=0,a=this.image;e>=s&&t>=s&&a.get(t-s,e-s);)o[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!a.get(t-s,e-s)&&o[1]<=r;)o[1]++,s++;if(e<s||t<s||o[1]>r)return!1;for(;e>=s&&t>=s&&a.get(t-s,e-s)&&o[0]<=r;)o[0]++,s++;if(o[0]>r)return!1;var u=a.getHeight(),f=a.getWidth();for(s=1;e+s<u&&t+s<f&&a.get(t+s,e+s);)o[2]++,s++;if(e+s>=u||t+s>=f)return!1;for(;e+s<u&&t+s<f&&!a.get(t+s,e+s)&&o[3]<r;)o[3]++,s++;if(e+s>=u||t+s>=f||o[3]>=r)return!1;for(;e+s<u&&t+s<f&&a.get(t+s,e+s)&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return!1;var d=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(d-i)<2*i&&n.foundPatternCross(o)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var o=this.image,s=o.getHeight(),a=this.getCrossCheckStateCount(),u=e;u>=0&&o.get(t,u);)a[2]++,u--;if(u<0)return NaN;for(;u>=0&&!o.get(t,u)&&a[1]<=r;)a[1]++,u--;if(u<0||a[1]>r)return NaN;for(;u>=0&&o.get(t,u)&&a[0]<=r;)a[0]++,u--;if(a[0]>r)return NaN;for(u=e+1;u<s&&o.get(t,u);)a[2]++,u++;if(u===s)return NaN;for(;u<s&&!o.get(t,u)&&a[3]<r;)a[3]++,u++;if(u===s||a[3]>=r)return NaN;for(;u<s&&o.get(t,u)&&a[4]<r;)a[4]++,u++;if(a[4]>=r)return NaN;var f=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(f-i)>=2*i?NaN:n.foundPatternCross(a)?n.centerFromEnd(a,u):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var o=this.image,s=o.getWidth(),a=this.getCrossCheckStateCount(),u=e;u>=0&&o.get(u,t);)a[2]++,u--;if(u<0)return NaN;for(;u>=0&&!o.get(u,t)&&a[1]<=r;)a[1]++,u--;if(u<0||a[1]>r)return NaN;for(;u>=0&&o.get(u,t)&&a[0]<=r;)a[0]++,u--;if(a[0]>r)return NaN;for(u=e+1;u<s&&o.get(u,t);)a[2]++,u++;if(u===s)return NaN;for(;u<s&&!o.get(u,t)&&a[3]<r;)a[3]++,u++;if(u===s||a[3]>=r)return NaN;for(;u<s&&o.get(u,t)&&a[4]<r;)a[4]++,u++;if(a[4]>=r)return NaN;var f=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(f-i)>=i?NaN:n.foundPatternCross(a)?n.centerFromEnd(a,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),a=this.crossCheckVertical(t,Math.floor(s),e[2],o);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],o)))){for(var u=o/7,f=!1,d=this.possibleCenters,p=0,g=d.length;p<g;p++){var y=d[p];if(y.aboutEquals(u,a,s)){d[p]=y.combineEstimate(a,s,u),f=!0;break}}if(!f){var E=new rj(s,a,u);d.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var o=Cc(this.possibleCenters),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.getCount()>=n.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,o=0,s=0,a=this.possibleCenters.length;try{for(var u=Cc(this.possibleCenters),f=u.next();!f.done;f=u.next()){var d=f.value;d.getCount()>=n.CENTER_QUORUM&&(o++,s+=d.getEstimatedModuleSize())}}catch(A){e={error:A}}finally{try{f&&!f.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}if(o<3)return!1;var p=s/a,g=0;try{for(var y=Cc(this.possibleCenters),E=y.next();!E.done;E=y.next()){var d=E.value;g+=Math.abs(d.getEstimatedModuleSize()-p)}}catch(A){r={error:A}}finally{try{E&&!E.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}return g<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,o=this.possibleCenters.length;if(o<3)throw new te;var s=this.possibleCenters,a;if(o>3){var u=0,f=0;try{for(var d=Cc(this.possibleCenters),p=d.next();!p.done;p=d.next()){var g=p.value,y=g.getEstimatedModuleSize();u+=y,f+=y*y}}catch(H){e={error:H}}finally{try{p&&!p.done&&(t=d.return)&&t.call(d)}finally{if(e)throw e.error}}a=u/o;var E=Math.sqrt(f/o-a*a);s.sort(function(H,$){var b=Math.abs($.getEstimatedModuleSize()-a),S=Math.abs(H.getEstimatedModuleSize()-a);return b<S?-1:b>S?1:0});for(var A=Math.max(.2*a,E),I=0;I<s.length&&s.length>3;I++){var N=s[I];Math.abs(N.getEstimatedModuleSize()-a)>A&&(s.splice(I,1),I--)}}if(s.length>3){var u=0;try{for(var R=Cc(s),k=R.next();!k.done;k=R.next()){var j=k.value;u+=j.getEstimatedModuleSize()}}catch($){r={error:$}}finally{try{k&&!k.done&&(i=R.return)&&i.call(R)}finally{if(r)throw r.error}}a=u/s.length,s.sort(function($,b){if(b.getCount()===$.getCount()){var S=Math.abs(b.getEstimatedModuleSize()-a),O=Math.abs($.getEstimatedModuleSize()-a);return S<O?1:S>O?-1:0}else return b.getCount()-$.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),sj=(function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Mt.NEED_RESULT_POINT_CALLBACK);var t=new oj(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(t,r,i);if(o<1)throw new te("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,o),a=Ia.getProvisionalVersionForDimension(s),u=a.getDimensionForVersion()-7,f=null;if(a.getAlignmentPatternCenters().length>0)for(var d=r.getX()-t.getX()+i.getX(),p=r.getY()-t.getY()+i.getY(),g=1-3/u,y=Math.floor(t.getX()+g*(d-t.getX())),E=Math.floor(t.getY()+g*(p-t.getY())),A=4;A<=16;A<<=1)try{f=this.findAlignmentInRegion(o,y,E,A);break}catch(k){if(!(k instanceof te))throw k}var I=n.createTransform(t,r,i,f,s),N=n.sampleGrid(this.image,I,s),R;return f===null?R=[i,t,r]:R=[i,t,r,f],new zy(N,R)},n.createTransform=function(e,t,r,i,o){var s=o-3.5,a,u,f,d;return i!==null?(a=i.getX(),u=i.getY(),f=s-3,d=f):(a=t.getX()-e.getX()+r.getX(),u=t.getY()-e.getY()+r.getY(),f=s,d=s),pb.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,f,d,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),a,u,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=Hy.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var o=lt.round(be.distance(e,t)/i),s=lt.round(be.distance(e,r)/i),a=Math.floor((o+s)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new te("Dimensions could be not found.")}return a},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,a=e-(r-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var u=Math.floor(t-(i-t)*s);return s=1,u<0?(s=t/(t-u),u=0):u>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,t,a,u),o-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var o=Math.abs(i-t)>Math.abs(r-e);if(o){var s=e;e=t,t=s,s=r,r=i,i=s}for(var a=Math.abs(r-e),u=Math.abs(i-t),f=-a/2,d=e<r?1:-1,p=t<i?1:-1,g=0,y=r+d,E=e,A=t;E!==y;E+=d){var I=o?A:E,N=o?E:A;if(g===1===this.image.get(I,N)){if(g===2)return lt.distance(E,A,e,t);g++}if(f+=u,f>0){if(A===i)break;A+=p,f-=a}}return g===2?lt.distance(r+d,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var o=Math.floor(i*e),s=Math.max(0,t-o),a=Math.min(this.image.getWidth()-1,t+o);if(a-s<e*3)throw new te("Alignment top exceeds estimated module size.");var u=Math.max(0,r-o),f=Math.min(this.image.getHeight()-1,r+o);if(f-u<e*3)throw new te("Alignment bottom exceeds estimated module size.");var d=new tj(this.image,s,u,a-s,f-u,e,this.resultPointCallback);return d.find()},n})(),qg=(function(){function n(){this.decoder=new QU}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Mt.PURE_BARCODE)!==void 0){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,t),i=n.NO_POINTS}else{var s=new sj(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof _b&&r.getOther().applyMirroredCorrection(i);var a=new Xn(r.getText(),r.getRawBytes(),void 0,i,Oe.QR_CODE,void 0),u=r.getByteSegments();u!==null&&a.putMetadata(Ln.BYTE_SEGMENTS,u);var f=r.getECLevel();return f!==null&&a.putMetadata(Ln.ERROR_CORRECTION_LEVEL,f),r.hasStructuredAppend()&&(a.putMetadata(Ln.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),a.putMetadata(Ln.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),a},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new te;var i=this.moduleSize(t,e),o=t[1],s=r[1],a=t[0],u=r[0];if(a>=u||o>=s)throw new te;if(s-o!==u-a&&(u=a+(s-o),u>=e.getWidth()))throw new te;var f=Math.round((u-a+1)/i),d=Math.round((s-o+1)/i);if(f<=0||d<=0)throw new te;if(d!==f)throw new te;var p=Math.floor(i/2);o+=p,a+=p;var g=a+Math.floor((f-1)*i)-u;if(g>0){if(g>p)throw new te;a-=g}var y=o+Math.floor((d-1)*i)-s;if(y>0){if(y>p)throw new te;o-=y}for(var E=new Xi(f,d),A=0;A<d;A++)for(var I=o+Math.floor(A*i),N=0;N<f;N++)e.get(a+Math.floor(N*i),I)&&E.set(N,A);return E},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),o=e[0],s=e[1],a=!0,u=0;o<i&&s<r;){if(a!==t.get(o,s)){if(++u===5)break;a=!a}o++,s++}if(o===i||s===r)throw new te;return(o-e[0])/7},n.NO_POINTS=new Array,n})(),aj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},st=(function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return lt.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=aj(e),a=s.next();!a.done;a=s.next()){var u=a.value;i[o++]=u}}catch(f){t={error:f}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=cn.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n})(),lj=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),uj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cj=(function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),o=n.detect(r,i);return o.length||(i=i.clone(),i.rotate180(),o=n.detect(r,i)),new lj(i,o)},n.detect=function(e,t){for(var r,i,o=new Array,s=0,a=0,u=!1;s<t.getHeight();){var f=n.findVertices(t,s,a);if(f[0]==null&&f[3]==null){if(!u)break;u=!1,a=0;try{for(var d=(r=void 0,uj(o)),p=d.next();!p.done;p=d.next()){var g=p.value;g[1]!=null&&(s=Math.trunc(Math.max(s,g[1].getY()))),g[3]!=null&&(s=Math.max(s,Math.trunc(g[3].getY())))}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(u=!0,o.push(f),!e)break;f[2]!=null?(a=Math.trunc(f[2].getX()),s=Math.trunc(f[2].getY())):(a=Math.trunc(f[4].getX()),s=Math.trunc(f[4].getY()))}return o},n.findVertices=function(e,t,r){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,o,s){for(var a=new Array(4),u=!1,f=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var d=n.findGuardPattern(e,o,i,r,!1,s,f);if(d!=null){for(;i>0;){var p=n.findGuardPattern(e,o,--i,r,!1,s,f);if(p!=null)d=p;else{i++;break}}a[0]=new be(d[0],i),a[1]=new be(d[1],i),u=!0;break}}var g=i+1;if(u){for(var y=0,p=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);g<t;g++){var d=n.findGuardPattern(e,p[0],g,r,!1,s,f);if(d!=null&&Math.abs(p[0]-d[0])<n.MAX_PATTERN_DRIFT&&Math.abs(p[1]-d[1])<n.MAX_PATTERN_DRIFT)p=d,y=0;else{if(y>n.SKIPPED_ROW_COUNT_MAX)break;y++}}g-=y+1,a[2]=new be(p[0],g),a[3]=new be(p[1],g)}return g-i<n.BARCODE_MIN_HEIGHT&&cn.fill(a,null),a},n.findGuardPattern=function(e,t,r,i,o,s,a){cn.fillWithin(a,0,a.length,0);for(var u=t,f=0;e.get(u,r)&&u>0&&f++<n.MAX_PIXEL_DRIFT;)u--;for(var d=u,p=0,g=s.length,y=o;d<i;d++){var E=e.get(d,r);if(E!==y)a[p]++;else{if(p===g-1){if(n.patternMatchVariance(a,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([u,d]);u+=a[0]+a[1],xt.arraycopy(a,2,a,0,p-1),a[p-1]=0,a[p]=0,p--}else p++;a[p]=1,y=!y}}return p===g-1&&n.patternMatchVariance(a,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([u,d-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=t[a];if(o<s)return 1/0;var u=o/s;r*=u;for(var f=0,d=0;d<i;d++){var p=e[d],g=t[d]*u,y=p>g?p-g:g-p;if(y>r)return 1/0;f+=y}return f/o},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n})(),fj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ea=(function(){function n(e,t){if(t.length===0)throw new Le;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),xt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=fj(this.coefficients),s=o.next();!s.done;s=o.next()){var a=s.value;i=this.field.add(i,a)}}catch(p){t={error:p}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}for(var u=this.coefficients[0],f=this.coefficients.length,d=1;d<f;d++)u=this.field.add(this.field.multiply(e,u),this.coefficients[d]);return u},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Le("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;xt.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=this.field.add(t[a-s],r[a]);return new n(this.field,o)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Le("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Le("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=0;a<r;a++)for(var u=t[a],f=0;f<o;f++)s[a+f]=this.field.add(s[a+f],this.field.multiply(u,i[f]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Le;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new Ke,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n})(),dj=(function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Le;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new hb;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n})(),hj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pj=(function(n){hj(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var o=1,s=0;s<t;s++)i.expTable[s]=o,o=o*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Ea(i,new Int32Array([0])),i.one=new Ea(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Le;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Ea(this,i)},e.PDF417_GF=new e(st.NUMBER_OF_CODEWORDS,3),e})(dj),mj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gj=(function(){function n(){this.field=pj.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,o,s=new Ea(this.field,e),a=new Int32Array(t),u=!1,f=t;f>0;f--){var d=s.evaluateAt(this.field.exp(f));a[t-f]=d,d!==0&&(u=!0)}if(!u)return 0;var p=this.field.getOne();if(r!=null)try{for(var g=mj(r),y=g.next();!y.done;y=g.next()){var E=y.value,A=this.field.exp(e.length-1-E),I=new Ea(this.field,new Int32Array([this.field.subtract(0,A),1]));p=p.multiply(I)}}catch(S){i={error:S}}finally{try{y&&!y.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}for(var N=new Ea(this.field,a),R=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),N,t),k=R[0],j=R[1],H=this.findErrorLocations(k),$=this.findErrorMagnitudes(j,k,H),f=0;f<H.length;f++){var b=e.length-1-this.field.log(H[f]);if(b<0)throw An.getChecksumInstance();e[b]=this.field.subtract(e[b],$[f])}return H.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=e,s=t,a=this.field.getZero(),u=this.field.getOne();s.getDegree()>=Math.round(r/2);){var f=o,d=a;if(o=s,a=u,o.isZero())throw An.getChecksumInstance();s=f;for(var p=this.field.getZero(),g=o.getCoefficient(o.getDegree()),y=this.field.inverse(g);s.getDegree()>=o.getDegree()&&!s.isZero();){var E=s.getDegree()-o.getDegree(),A=this.field.multiply(s.getCoefficient(s.getDegree()),y);p=p.add(this.field.buildMonomial(E,A)),s=s.subtract(o.multiplyByMonomial(E,A))}u=p.multiply(a).subtract(d).negative()}var I=u.getCoefficient(0);if(I===0)throw An.getChecksumInstance();var N=this.field.inverse(I),R=u.multiply(N),k=s.multiply(N);return[R,k]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,o=1;o<this.field.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=this.field.inverse(o),i++);if(i!==t)throw An.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var a=new Ea(this.field,o),u=r.length,f=new Int32Array(u),s=0;s<u;s++){var d=this.field.inverse(r[s]),p=this.field.subtract(0,e.evaluateAt(d)),g=this.field.inverse(a.evaluateAt(d));f[s]=this.field.multiply(p,g)}return f},n})(),Kg=(function(){function n(e,t,r,i,o){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,o)}return n.prototype.constructor_1=function(e,t,r,i,o){var s=t==null||r==null,a=i==null||o==null;if(s&&a)throw new te;s?(t=new be(0,i.getY()),r=new be(0,o.getY())):a&&(i=new be(e.getWidth()-1,t.getY()),o=new be(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){var u=r?this.topLeft:this.topRight,f=Math.trunc(u.getY()-e);f<0&&(f=0);var d=new be(u.getX(),f);r?i=d:s=d}if(t>0){var p=r?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+t);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var y=new be(p.getX(),g);r?o=y:a=y}return new n(this.image,i,o,s,a)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n})(),vj=(function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n})(),$y=(function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,a,u,f,d,p){if(s==="%%")return"%";if(t[++r]!==void 0){s=f?parseInt(f.substr(1)):void 0;var g=d?parseInt(d.substr(1)):void 0,y;switch(p){case"s":y=t[r];break;case"c":y=t[r][0];break;case"f":y=parseFloat(t[r]).toFixed(s);break;case"p":y=parseFloat(t[r]).toPrecision(s);break;case"e":y=parseFloat(t[r]).toExponential(s);break;case"x":y=parseInt(t[r]).toString(g||16);break;case"d":y=parseFloat(parseInt(t[r],g||10).toPrecision(s)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(g);for(var E=parseInt(u),A=u&&u[0]+""=="0"?"0":" ";y.length<E;)y=a!==void 0?y+A:A+y;return y}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n})(),yj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xb=(function(){function n(e){this.boundingBox=new Kg(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new $y,i=0;try{for(var o=yj(this.codewords),s=o.next();!s.done;s=o.next()){var a=s.value;if(a==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n})(),wj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_j=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},Fc=(function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,o=function(p,g){var y={getKey:function(){return p},getValue:function(){return g}};y.getValue()>r?(r=y.getValue(),i=[],i.push(y.getKey())):y.getValue()===r&&i.push(y.getKey())};try{for(var s=wj(this.values.entries()),a=s.next();!a.done;a=s.next()){var u=_j(a.value,2),f=u[0],d=u[1];o(f,d)}}catch(p){e={error:p}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return st.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n})(),xj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Dm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZA=(function(n){xj(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=Dm(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=this.imageRowToCodewordIndex(Math.trunc(s.getY())),f=-1,d=1,p=0,g=a;g<u;g++)if(r[g]!=null){var y=r[g],E=y.getRowNumber()-f;if(E===0)p++;else if(E===1)d=Math.max(d,p),p=1,f=y.getRowNumber();else if(E<0||y.getRowNumber()>=t.getRowCount()||E>g)r[g]=null;else{var A=void 0;d>2?A=(d-2)*E:A=E;for(var I=A>=g,N=1;N<=A&&!I;N++)I=r[g-N]!=null;I?r[g]=null:(f=y.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=Dm(this.getCodewords()),a=s.next();!a.done;a=s.next()){var u=a.value;if(u!=null){var f=u.getRowNumber();if(f>=o.length)continue;o[f]++}}}catch(d){t={error:d}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=this.getCodewords(),f=-1,d=s;d<a;d++)if(u[d]!=null){var p=u[d];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-f;g===0||(g===1?f=p.getRowNumber():p.getRowNumber()>=t.getRowCount()?u[d]=null:f=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),o=new Fc,s=new Fc,a=new Fc,u=new Fc;try{for(var f=Dm(i),d=f.next();!d.done;d=f.next()){var p=d.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,y=p.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:s.setValue(g*3+1);break;case 1:u.setValue(g/3),a.setValue(g%3);break;case 2:o.setValue(g+1);break}}}}catch(A){t={error:A}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}if(o.getValue().length===0||s.getValue().length===0||a.getValue().length===0||u.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<st.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>st.MAX_ROWS_IN_BARCODE)return null;var E=new vj(o.getValue()[0],s.getValue()[0],a.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,E),E},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var o=t[i];if(t[i]!=null){var s=o.getValue()%30,a=o.getRowNumber();if(a>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(a+=2),a%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e})(xb),Ej=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Aj=(function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=st.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=n.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=n.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=r[t],a=this.detectionResultColumns[e-1].getCodewords(),u=a;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=a[t],f[3]=u[t],t>0&&(f[0]=r[t-1],f[4]=a[t-1],f[5]=u[t-1]),t>1&&(f[8]=r[t-2],f[10]=a[t-2],f[11]=u[t-2]),t<r.length-1&&(f[1]=r[t+1],f[6]=a[t+1],f[7]=u[t+1]),t<r.length-2&&(f[9]=r[t+2],f[12]=a[t+2],f[13]=u[t+2]);try{for(var d=Ej(f),p=d.next();!p.done;p=d.next()){var g=p.value;if(n.adjustRowNumber(s,g))return}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new $y,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[r];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()},n})(),Tj=(function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n})(),Cj=(function(){function n(){}return n.initialize=function(){for(var e=0;e<st.SYMBOL_TABLE.length;e++)for(var t=st.SYMBOL_TABLE[e],r=t&1,i=0;i<st.BARS_IN_MODULE;i++){for(var o=0;(t&1)===r;)o+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(st.BARS_IN_MODULE)),n.RATIOS_TABLE[e][st.BARS_IN_MODULE-i-1]=Math.fround(o/st.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=lt.sum(e),r=new Int32Array(st.BARS_IN_MODULE),i=0,o=0,s=0;s<st.MODULES_IN_CODEWORD;s++){var a=t/(2*st.MODULES_IN_CODEWORD)+s*t/st.MODULES_IN_CODEWORD;o+e[i]<=a&&(o+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return st.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=lt.sum(e),r=new Array(st.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var o=zg.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var a=0;a<n.RATIOS_TABLE.length;a++){for(var u=0,f=n.RATIOS_TABLE[a],d=0;d<st.BARS_IN_MODULE;d++){var p=Math.fround(f[d]-r[d]);if(u+=Math.fround(p*p),u>=o)break}u<o&&(o=u,s=st.SYMBOL_TABLE[a])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(st.SYMBOL_TABLE.length).map(function(e){return new Array(st.BARS_IN_MODULE)}),n})(),Ij=(function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n})(),JA=(function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n})(),Sj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bj=(function(n){Sj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e})(yr),Pj=(function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new bj;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new Uy;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n})(),Rj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Nj=(function(n){Rj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(yr),Oj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Dj=(function(n){Oj(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Le("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new Nj;i=Qe.MAX_VALUE}this.buf=cn.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new Uy;this.ensureCapacity(this.count+i),xt.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return cn.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(Pj),gt;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(gt||(gt={}));function Eb(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Ch;function cs(n){if(typeof Ch>"u"&&(Ch=Eb()),Ch===null)throw new Error("BigInt is not supported!");return Ch(n)}function kj(){var n=[];n[0]=cs(1);var e=cs(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var Mj=(function(){function n(){}return n.decode=function(e,t){var r=new Ke(""),i=ln.ISO8859_1;r.enableDecoding(i);for(var o=1,s=e[o++],a=new Ij;o<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:o=n.textCompaction(e,o,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:o=n.byteCompaction(s,e,i,o,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:o=n.numericCompaction(e,o,r);break;case n.ECI_CHARSET:ln.getCharacterSetECIByValue(e[o++]);break;case n.ECI_GENERAL_PURPOSE:o+=2;break;case n.ECI_USER_DEFINED:o++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=n.decodeMacroBlock(e,o,a);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new he;default:o--,o=n.textCompaction(e,o,r);break}if(o<e.length)s=e[o++];else throw he.getFormatInstance()}if(r.length()===0)throw he.getFormatInstance();var u=new d0(null,r.toString(),null,t);return u.setOther(a),u},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw he.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<n.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)i[o]=e[t];r.setSegmentIndex(Qe.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Ke;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var a=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new Ke;t=n.textCompaction(e,t+1,u),r.setFileName(u.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new Ke;t=n.textCompaction(e,t+1,f),r.setSender(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new Ke;t=n.textCompaction(e,t+1,d),r.setAddressee(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new Ke;t=n.numericCompaction(e,t+1,p),r.setSegmentCount(Qe.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new Ke;t=n.numericCompaction(e,t+1,g),r.setTimestamp(JA.parseLong(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var y=new Ke;t=n.numericCompaction(e,t+1,y),r.setChecksum(Qe.parseInt(y.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var E=new Ke;t=n.numericCompaction(e,t+1,E),r.setFileSize(JA.parseLong(E.toString()));break;default:throw he.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw he.getFormatInstance()}if(a!==-1){var A=t-a;r.isLastSegment()&&A--,r.setOptionalData(cn.copyOfRange(e,a,a+A))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),s=0,a=!1;t<e[0]&&!a;){var u=e[t++];if(u<n.TEXT_COMPACTION_MODE_LATCH)i[s]=u/30,i[s+1]=u%30,s+=2;else switch(u){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[t++],o[s]=u,s++;break}}return n.decodeTextCompaction(i,o,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var o=gt.ALPHA,s=gt.ALPHA,a=0;a<r;){var u=e[a],f="";switch(o){case gt.ALPHA:if(u<26)f=String.fromCharCode(65+u);else switch(u){case 26:f=" ";break;case n.LL:o=gt.LOWER;break;case n.ML:o=gt.MIXED;break;case n.PS:s=o,o=gt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break;case gt.LOWER:if(u<26)f=String.fromCharCode(97+u);else switch(u){case 26:f=" ";break;case n.AS:s=o,o=gt.ALPHA_SHIFT;break;case n.ML:o=gt.MIXED;break;case n.PS:s=o,o=gt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break;case gt.MIXED:if(u<n.PL)f=n.MIXED_CHARS[u];else switch(u){case n.PL:o=gt.PUNCT;break;case 26:f=" ";break;case n.LL:o=gt.LOWER;break;case n.AL:o=gt.ALPHA;break;case n.PS:s=o,o=gt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break;case gt.PUNCT:if(u<n.PAL)f=n.PUNCT_CHARS[u];else switch(u){case n.PAL:o=gt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break;case gt.ALPHA_SHIFT:if(o=s,u<26)f=String.fromCharCode(65+u);else switch(u){case 26:f=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break;case gt.PUNCT_SHIFT:if(o=s,u<n.PAL)f=n.PUNCT_CHARS[u];else switch(u){case n.PAL:o=gt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break}f!==""&&i.append(f),a++}},n.byteCompaction=function(e,t,r,i,o){var s=new Dj,a=0,u=0,f=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),p=t[i++];i<t[0]&&!f;)switch(d[a++]=p,u=900*u+p,p=t[i++],p){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(a%5===0&&a>0){for(var g=0;g<6;++g)s.write(Number(cs(u)>>cs(8*(5-g))));u=0,a=0}break}i===t[0]&&p<n.TEXT_COMPACTION_MODE_LATCH&&(d[a++]=p);for(var y=0;y<a;y++)s.write(d[y]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!f;){var E=t[i++];if(E<n.TEXT_COMPACTION_MODE_LATCH)a++,u=900*u+E;else switch(E){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(a%5===0&&a>0){for(var g=0;g<6;++g)s.write(Number(cs(u)>>cs(8*(5-g))));u=0,a=0}}break}return o.append(Yr.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,o=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!o;){var a=e[t++];if(t===e[0]&&(o=!0),a<n.TEXT_COMPACTION_MODE_LATCH)s[i]=a,i++;else switch(a){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||a===n.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=cs(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*cs(e[i]);var o=r.toString();if(o.charAt(0)!=="1")throw new he;return o.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=Eb()?kj():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n})(),Ic=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lj=(function(){function n(){}return n.decode=function(e,t,r,i,o,s,a){for(var u=new Kg(e,t,r,i,o),f=null,d=null,p,g=!0;;g=!1){if(t!=null&&(f=n.getRowIndicatorColumn(e,u,t,!0,s,a)),i!=null&&(d=n.getRowIndicatorColumn(e,u,i,!1,s,a)),p=n.merge(f,d),p==null)throw te.getNotFoundInstance();var y=p.getBoundingBox();if(g&&y!=null&&(y.getMinY()<u.getMinY()||y.getMaxY()>u.getMaxY()))u=y;else break}p.setBoundingBox(u);var E=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,f),p.setDetectionResultColumn(E,d);for(var A=f!=null,I=1;I<=E;I++){var N=A?I:E-I;if(p.getDetectionResultColumn(N)===void 0){var R=void 0;N===0||N===E?R=new ZA(u,N===0):R=new xb(u),p.setDetectionResultColumn(N,R);for(var k=-1,j=k,H=u.getMinY();H<=u.getMaxY();H++){if(k=n.getStartColumn(p,N,H,A),k<0||k>u.getMaxX()){if(j===-1)continue;k=j}var $=n.detectCodeword(e,u.getMinX(),u.getMaxX(),A,k,H,s,a);$!=null&&(R.setCodeword(H,$),j=k,s=Math.min(s,$.getWidth()),a=Math.max(a,$.getWidth()))}}}return n.createDecoderResult(p)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=Kg.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new Aj(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=n.getMax(i),s=0;try{for(var a=Ic(i),u=a.next();!u.done;u=a.next()){var f=u.value;if(s+=o-f,f>0)break}}catch(y){t={error:y}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}for(var d=e.getCodewords(),p=0;s>0&&d[p]==null;p++)s--;for(var g=0,p=i.length-1;p>=0&&(g+=o-i[p],!(i[p]>0));p--);for(var p=d.length-1;g>0&&d[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(s,g,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var o=Ic(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=Math.max(i,a)}}catch(u){t={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,o,s){for(var a=new ZA(t,i),u=0;u<2;u++)for(var f=u===0?1:-1,d=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=f){var g=n.detectCodeword(e,0,e.getWidth(),i,d,p,o,s);g!=null&&(a.setCodeword(p,g),i?d=g.getStartX():d=g.getEndX())}return a},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>st.MAX_CODEWORDS_IN_BARCODE)throw te.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var u=0;u<e.getBarcodeColumnCount();u++){var f=t[a][u+1].getValue(),d=a*e.getBarcodeColumnCount()+u;f.length===0?r.push(d):f.length===1?i[d]=f[0]:(s.push(d),o.push(f))}for(var p=new Array(o.length),g=0;g<p.length;g++)p[g]=o[g];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,st.toIntArray(r),st.toIntArray(s),p)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,o){for(var s=new Int32Array(i.length),a=100;a-- >0;){for(var u=0;u<s.length;u++)t[i[u]]=o[u][s[u]];try{return n.decodeCodewords(t,e,r)}catch(d){var f=d instanceof An;if(!f)throw d}if(s.length===0)throw An.getChecksumInstance();for(var u=0;u<s.length;u++)if(s[u]<o[u].length-1){s[u]++;break}else if(s[u]=0,u===s.length-1)throw An.getChecksumInstance()}throw An.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<s.length;a++)for(var u=0;u<s[a].length;u++)s[a][u]=new Fc;var f=0;try{for(var d=Ic(e.getDetectionResultColumns()),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null)try{for(var y=(i=void 0,Ic(g.getCodewords())),E=y.next();!E.done;E=y.next()){var A=E.value;if(A!=null){var I=A.getRowNumber();if(I>=0){if(I>=s.length)continue;s[I][f].setValue(A.getValue())}}}}catch(N){i={error:N}}finally{try{E&&!E.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}f++}}catch(N){t={error:N}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var o,s,a=i?1:-1,u=null;if(n.isValidBarcodeColumn(e,t-a)&&(u=e.getDetectionResultColumn(t-a).getCodeword(r)),u!=null)return i?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(t).getCodewordNearby(r),u!=null)return i?u.getStartX():u.getEndX();if(n.isValidBarcodeColumn(e,t-a)&&(u=e.getDetectionResultColumn(t-a).getCodewordNearby(r)),u!=null)return i?u.getEndX():u.getStartX();for(var f=0;n.isValidBarcodeColumn(e,t-a);){t-=a;try{for(var d=(o=void 0,Ic(e.getDetectionResultColumn(t).getCodewords())),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+a*f*(g.getEndX()-g.getStartX())}}catch(y){o={error:y}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(o)throw o.error}}f++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,o,s,a,u){o=n.adjustCodewordStartColumn(e,t,r,i,o,s);var f=n.getModuleBitCount(e,t,r,i,o,s);if(f==null)return null;var d,p=lt.sum(f);if(i)d=o+p;else{for(var g=0;g<f.length/2;g++){var y=f[g];f[g]=f[f.length-1-g],f[f.length-1-g]=y}d=o,o=d-p}if(!n.checkCodewordSkew(p,a,u))return null;var E=Cj.getDecodedValue(f),A=st.getCodeword(E);return A===-1?null:new Tj(o,d,n.getCodewordBucketNumber(E),A)},n.getModuleBitCount=function(e,t,r,i,o,s){for(var a=o,u=new Int32Array(8),f=0,d=i?1:-1,p=i;(i?a<r:a>=t)&&f<u.length;)e.get(a,s)===p?(u[f]++,a+=d):(f++,p=!p);return f===u.length||a===(i?r:t)&&f===u.length-1?u:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,o,s){for(var a=o,u=i?-1:1,f=0;f<2;f++){for(;(i?a>=t:a<r)&&i===e.get(a,s);){if(Math.abs(o-a)>n.CODEWORD_SKEW_SIZE)return o;a+=u}u=-u,i=!i}return a},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw he.getFormatInstance();var i=1<<t+1,o=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=Mj.decode(e,""+t);return s.setErrorsCorrected(o),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw An.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw he.getFormatInstance();var r=e[0];if(r>e.length)throw he.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw he.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new $y,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new gj,n})(),Vj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xg=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw te.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof he||r instanceof An?te.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,o,s=new Array,a=cj.detectMultiple(e,t,r);try{for(var u=Vj(a.getPoints()),f=u.next();!f.done;f=u.next()){var d=f.value,p=Lj.decode(a.getBits(),d[4],d[5],d[6],d[7],n.getMinCodewordWidth(d),n.getMaxCodewordWidth(d)),g=new Xn(p.getText(),p.getRawBytes(),void 0,d,Oe.PDF_417);g.putMetadata(Ln.ERROR_CORRECTION_LEVEL,p.getECLevel());var y=p.getOther();y!=null&&g.putMetadata(Ln.PDF417_EXTRA_METADATA,y),s.push(g)}}catch(E){i={error:E}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return s.map(function(E){return E})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?Qe.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n})(),Fj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),eT=(function(n){Fj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e})(yr),tT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bj=(function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Mt.TRY_HARDER)!==void 0,r=e==null?null:e.get(Mt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var o=r.some(function(s){return s===Oe.UPC_A||s===Oe.UPC_E||s===Oe.EAN_13||s===Oe.EAN_8||s===Oe.CODABAR||s===Oe.CODE_39||s===Oe.CODE_93||s===Oe.CODE_128||s===Oe.ITF||s===Oe.RSS_14||s===Oe.RSS_EXPANDED});o&&!t&&i.push(new Vc(e)),r.includes(Oe.QR_CODE)&&i.push(new qg),r.includes(Oe.DATA_MATRIX)&&i.push(new Gg),r.includes(Oe.AZTEC)&&i.push(new Wg),r.includes(Oe.PDF_417)&&i.push(new Xg),o&&t&&i.push(new Vc(e))}i.length===0&&(t||i.push(new Vc(e)),i.push(new qg),i.push(new Gg),i.push(new Wg),i.push(new Xg),t&&i.push(new Vc(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=tT(this.readers),i=r.next();!i.done;i=r.next()){var o=i.value;o.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new eT("No readers where selected, nothing can be read.");try{for(var i=tT(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(a){if(a instanceof eT)continue}}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new te("No MultiFormat Readers were able to detect the code.")},n})(),Uj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jj=(function(n){Uj(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,o=new Bj;return o.setHints(t),i=n.call(this,o,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(Cu),zj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){zj(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Xg,t)||this}return e})(Cu);var Hj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){Hj(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new qg,t)||this}return e})(Cu);var Yg;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Yg||(Yg={}));const Ih=Yg;var Ab=(function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new As(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,o=t.length;o<=e;o++){var s=r.multiply(new As(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Le("No error correction bytes");var r=e.length-t;if(r<=0)throw new Le("No data bytes provided");var i=this.buildGenerator(t),o=new Int32Array(r);xt.arraycopy(e,0,o,0,r);var s=new As(this.field,o);s=s.multiplyByMonomial(t,1);for(var a=s.divide(i)[1],u=a.getCoefficients(),f=t-u.length,d=0;d<f;d++)e[r+d]=0;xt.arraycopy(u,0,e,r+f,u.length)},n})(),Bc=(function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var a=r[s],u=0;u<i-1;u++){var f=a[u];f===a[u+1]&&f===r[s+1][u]&&f===r[s+1][u+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=0;a<i;a++){var u=r[s];a+6<i&&u[a]===1&&u[a+1]===0&&u[a+2]===1&&u[a+3]===1&&u[a+4]===1&&u[a+5]===0&&u[a+6]===1&&(n.isWhiteHorizontal(u,a-4,a)||n.isWhiteHorizontal(u,a+7,a+11))&&t++,s+6<o&&r[s][a]===1&&r[s+1][a]===0&&r[s+2][a]===1&&r[s+3][a]===1&&r[s+4][a]===1&&r[s+5][a]===0&&r[s+6][a]===1&&(n.isWhiteVertical(r,a,s-4,s)||n.isWhiteVertical(r,a,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(e[o][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=r[s],u=0;u<i;u++)a[u]===1&&t++;var f=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(t*2-f)*10/f);return d*n.N4},n.getDataMaskBit=function(e,t,r){var i,o;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:o=r*t,i=(o&1)+o%3;break;case 6:o=r*t,i=(o&1)+o%3&1;break;case 7:o=r*t,i=o%3+(r+t&1)&1;break;default:throw new Le("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),s=e.getArray(),a=0;a<i;a++){for(var u=0,f=-1,d=0;d<o;d++){var p=t?s[a][d]:s[d][a];p===f?u++:(u>=5&&(r+=n.N1+(u-5)),u=1,f=p)}u>=5&&(r+=n.N1+(u-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n})(),Wj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$j=(function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=Wj(this.bytes),o=i.next();!o.done;o=i.next()){var s=o.value;cn.fill(s,e)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],s=t.bytes[r],a=0,u=this.width;a<u;++a)if(o[a]!==s[a])return!1;return!0},n.prototype.toString=function(){for(var e=new Ke,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],o=0,s=this.width;o<s;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n})(),Qg=(function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new Ke;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n})(),Gj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ct=(function(n){Gj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e})(yr),nT=(function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,o){n.clearMatrix(o),n.embedBasicPatterns(r,o),n.embedTypeInfo(t,i,o),n.maybeEmbedVersionInfo(r,o),n.embedDataBits(e,i,o)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new Tn;n.makeTypeInfoBits(e,t,i);for(var o=0,s=i.getSize();o<s;++o){var a=i.get(i.getSize()-1-o),u=n.TYPE_INFO_COORDINATES[o],f=u[0],d=u[1];if(r.setBoolean(f,d,a),o<8){var p=r.getWidth()-o-1,g=8;r.setBoolean(p,g,a)}else{var p=8,g=r.getHeight()-7+(o-8);r.setBoolean(p,g,a)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new Tn;n.makeVersionInfoBits(e,r);for(var i=17,o=0;o<6;++o)for(var s=0;s<3;++s){var a=r.get(i);i--,t.setBoolean(o,t.getHeight()-11+s,a),t.setBoolean(t.getHeight()-11+s,o,a)}}},n.embedDataBits=function(e,t,r){for(var i=0,o=-1,s=r.getWidth()-1,a=r.getHeight()-1;s>0;){for(s===6&&(s-=1);a>=0&&a<r.getHeight();){for(var u=0;u<2;++u){var f=s-u;if(n.isEmpty(r.get(f,a))){var d=void 0;i<e.getSize()?(d=e.get(i),++i):d=!1,t!==255&&Bc.getDataMaskBit(t,f,a)&&(d=!d),r.setBoolean(f,a,d)}}a+=o}o=-o,a+=o,s-=2}if(i!==e.getSize())throw new Ct("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-Qe.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Le("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!Qg.isValidMaskPattern(t))throw new Ct("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var o=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(o,10);var s=new Tn;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new Ct("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Ct("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Ct;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Ct;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Ct;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var o=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var o=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,s=i.length;o!==s;o++){var a=i[o];if(a>=0)for(var u=0;u!==s;u++){var f=i[u];f>=0&&n.isEmpty(t.get(f,a))&&n.embedPositionAdjustmentPattern(f-2,a-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})(),qj=(function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n})(),rT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return Bc.applyMaskPenaltyRule1(e)+Bc.applyMaskPenaltyRule2(e)+Bc.applyMaskPenaltyRule3(e)+Bc.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,o=r!==null&&r.get(Ih.CHARACTER_SET)!==void 0;o&&(i=r.get(Ih.CHARACTER_SET).toString());var s=this.chooseMode(e,i),a=new Tn;if(s===It.BYTE&&(o||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var u=ln.getCharacterSetECIByName(i);u!==void 0&&this.appendECI(u,a)}this.appendModeInfo(s,a);var f=new Tn;this.appendBytes(e,s,f,i);var d;if(r!==null&&r.get(Ih.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(Ih.QR_VERSION).toString(),10);d=Ia.getVersionForNumber(p);var g=this.calculateBitsNeeded(s,a,f,d);if(!this.willFit(g,d,t))throw new Ct("Data too big for requested version")}else d=this.recommendVersion(t,s,a,f);var y=new Tn;y.appendBitArray(a);var E=s===It.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(E,d,s,y),y.appendBitArray(f);var A=d.getECBlocksForLevel(t),I=d.getTotalCodewords()-A.getTotalECCodewords();this.terminateBits(I,y);var N=this.interleaveWithECBytes(y,d.getTotalCodewords(),I,A.getNumBlocks()),R=new Qg;R.setECLevel(t),R.setMode(s),R.setVersion(d);var k=d.getDimensionForVersion(),j=new $j(k,k),H=this.chooseMaskPattern(N,t,d,j);return R.setMaskPattern(H),nT.buildMatrix(N,t,d,H,j),R.setMatrix(j),R},n.recommendVersion=function(e,t,r,i){var o=this.calculateBitsNeeded(t,r,i,Ia.getVersionForNumber(1)),s=this.chooseVersion(o,e),a=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(a,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),ln.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return It.KANJI;for(var r=!1,i=!1,o=0,s=e.length;o<s;++o){var a=e.charAt(o);if(n.isDigit(a))r=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)i=!0;else return It.BYTE}return i?It.ALPHANUMERIC:r?It.NUMERIC:It.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=Yr.encode(e,ln.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var o=t[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var o=Number.MAX_SAFE_INTEGER,s=-1,a=0;a<Qg.NUM_MASK_PATTERNS;a++){nT.buildMatrix(e,t,r,a,i);var u=this.calculateMaskPenalty(i);u<o&&(o=u,s=a)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Ia.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Ct("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),o=t.getECBlocksForLevel(r),s=o.getTotalECCodewords(),a=i-s,u=(e+7)/8;return a>=u},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Ct("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var o=t.getSize()&7;if(o>0)for(var i=o;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Ct("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,o,s){if(i>=r)throw new Ct("Block ID too large");var a=e%r,u=r-a,f=Math.floor(e/r),d=f+1,p=Math.floor(t/r),g=p+1,y=f-p,E=d-g;if(y!==E)throw new Ct("EC bytes mismatch");if(r!==u+a)throw new Ct("RS blocks mismatch");if(e!==(p+y)*u+(g+E)*a)throw new Ct("Total bytes mismatch");i<u?(o[0]=p,s[0]=y):(o[0]=g,s[0]=E)},n.interleaveWithECBytes=function(e,t,r,i){var o,s,a,u;if(e.getSizeInBytes()!==r)throw new Ct("Number of bits and data bytes does not match");for(var f=0,d=0,p=0,g=new Array,y=0;y<i;++y){var E=new Int32Array(1),A=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,y,E,A);var I=E[0],N=new Uint8Array(I);e.toBytes(8*f,N,0,I);var R=n.generateECBytes(N,A[0]);g.push(new qj(N,R)),d=Math.max(d,I),p=Math.max(p,R.length),f+=E[0]}if(r!==f)throw new Ct("Data bytes does not match offset");for(var k=new Tn,y=0;y<d;++y)try{for(var j=(o=void 0,rT(g)),H=j.next();!H.done;H=j.next()){var $=H.value,N=$.getDataBytes();y<N.length&&k.appendBits(N[y],8)}}catch(V){o={error:V}}finally{try{H&&!H.done&&(s=j.return)&&s.call(j)}finally{if(o)throw o.error}}for(var y=0;y<p;++y)try{for(var b=(a=void 0,rT(g)),S=b.next();!S.done;S=b.next()){var $=S.value,R=$.getErrorCorrectionBytes();y<R.length&&k.appendBits(R[y],8)}}catch(V){a={error:V}}finally{try{S&&!S.done&&(u=b.return)&&u.call(b)}finally{if(a)throw a.error}}if(t!==k.getSizeInBytes())throw new Ct("Interleaving error: "+t+" and "+k.getSizeInBytes()+" differ.");return k},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),o=0;o<r;o++)i[o]=e[o]&255;new Ab(pr.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),o=0;o<t;o++)s[o]=i[r+o];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var o=r.getCharacterCountBits(t);if(e>=1<<o)throw new Ct(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},n.appendBytes=function(e,t,r,i){switch(t){case It.NUMERIC:n.appendNumericBytes(e,r);break;case It.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case It.BYTE:n.append8BitBytes(e,r,i);break;case It.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Ct("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),a=n.getDigit(e.charAt(i+2));t.appendBits(o*100+s*10+a,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(o*10+s,7),i+=2}else t.appendBits(o,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new Ct;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new Ct;t.appendBits(o*45+s,11),i+=2}else t.appendBits(o,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=Yr.encode(e,r)}catch(u){throw new Ct(u)}for(var o=0,s=i.length;o!==s;o++){var a=i[o];t.appendBits(a,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=Yr.encode(e,ln.SJIS)}catch(p){throw new Ct(p)}for(var i=r.length,o=0;o<i;o+=2){var s=r[o]&255,a=r[o+1]&255,u=s<<8&4294967295|a,f=-1;if(u>=33088&&u<=40956?f=u-33088:u>=57408&&u<=60351&&(f=u-49472),f===-1)throw new Ct("Invalid byte sequence");var d=(f>>8)*192+(f&255);t.appendBits(d,13)}},n.appendECI=function(e,t){t.appendBits(It.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=ln.UTF8.getName(),n})();var Kj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){Kj(e,n);function e(t,r,i,o,s,a,u,f){var d=n.call(this,a,u)||this;if(d.yuvData=t,d.dataWidth=r,d.dataHeight=i,d.left=o,d.top=s,o+a>r||s+u>i)throw new Le("Crop rectangle does not fit within image data.");return f&&d.reverseHorizontal(a,u),d}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Le("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return xt.arraycopy(this.yuvData,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return xt.arraycopy(this.yuvData,s,o,0,i),o;for(var a=0;a<r;a++){var u=a*t;xt.arraycopy(this.yuvData,s,o,u,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),o=this.yuvData,s=this.top*this.dataWidth+this.left,a=0;a<r;a++){for(var u=a*t,f=0;f<t;f++){var d=o[s+f*e.THUMBNAIL_SCALE_FACTOR]&255;i[u+f]=4278190080|d*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<r;o++,s+=this.dataWidth)for(var a=s+t/2,u=s,f=s+t-1;u<a;u++,f--){var d=i[u];i[u]=i[f],i[f]=d}},e.prototype.invert=function(){return new jy(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(f0);var Xj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){Xj(e,n);function e(t,r,i,o,s,a,u){var f=n.call(this,r,i)||this;if(f.dataWidth=o,f.dataHeight=s,f.left=a,f.top=u,t.BYTES_PER_ELEMENT===4){for(var d=r*i,p=new Uint8ClampedArray(d),g=0;g<d;g++){var y=t[g],E=y>>16&255,A=y>>7&510,I=y&255;p[g]=(E+A+I)/4&255}f.luminances=p}else f.luminances=t;if(o===void 0&&(f.dataWidth=r),s===void 0&&(f.dataHeight=i),a===void 0&&(f.left=0),u===void 0&&(f.top=0),f.left+r>f.dataWidth||f.top+i>f.dataHeight)throw new Le("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Le("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return xt.arraycopy(this.luminances,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return xt.arraycopy(this.luminances,s,o,0,i),o;for(var a=0;a<r;a++){var u=a*t;xt.arraycopy(this.luminances,s,o,u,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new jy(this)},e})(f0);var Yj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Qj=(function(n){Yj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(ln),Zj=(function(){function n(){}return n.ISO_8859_1=ln.ISO8859_1,n})(),Zg,Jj=301,ez=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=Jj);return{LOG:n,ALOG:e}};Zg=ez([],[]),Zg.LOG;Zg.ALOG;var iT;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(iT||(iT={}));var oT=129,Tb=230,tz=231,nz=235,rz=236,iz=237,oz=238,sz=239,az=240,km=254,lz=254,sT="[)>05",aT="[)>06",lT="",mt=0,Nn=1,er=2,sn=3,wn=4,Wn=5,uz=(function(){function n(){}return n.prototype.getEncodingMode=function(){return mt},n.prototype.encode=function(e){var t=di.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=di.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Wn:e.writeCodeword(tz),e.signalEncoderChange(Wn);return;case Nn:e.writeCodeword(Tb),e.signalEncoderChange(Nn);return;case sn:e.writeCodeword(oz),e.signalEncoderChange(sn);break;case er:e.writeCodeword(sz),e.signalEncoderChange(er);break;case wn:e.writeCodeword(az),e.signalEncoderChange(wn);break;default:throw new Error("Illegal mode: "+i)}else di.isExtendedASCII(r)?(e.writeCodeword(nz),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(di.isDigit(e)&&di.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n})(),cz=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Wn},n.prototype.encode=function(e){var t=new Ke;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=di.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(mt);break}}var o=t.length()-1,s=1,a=e.getCodewordCount()+o+s;e.updateSymbolInfo(a);var u=e.getSymbolInfo().getDataCapacity()-a>0;if(e.hasMoreCharacters()||u)if(o<=249)t.setCharAt(0,rt.getCharAt(o));else if(o<=1555)t.setCharAt(0,rt.getCharAt(Math.floor(o/250)+249)),t.insert(1,rt.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var f=0,r=t.length();f<r;f++)e.writeCodeword(this.randomize255State(t.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n})(),Gy=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Nn},n.prototype.encodeMaximal=function(e){for(var t=new Ke,r=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,o=t.length())}if(o!==t.length()){var a=Math.floor(t.length()/3*2),u=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(u);var f=e.getSymbolInfo().getDataCapacity()-u,d=Math.floor(t.length()%3);(d===2&&f!==2||d===1&&(r>3||f!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(Tb),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new Ke;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),o=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var a=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var u=new Ke;for(t.length()%3===2&&a!==2&&(i=this.backtrackOneCharacter(e,t,u,i));t.length()%3===1&&(i>3||a!==1);)i=this.backtrackOneCharacter(e,t,u,i);break}var f=t.length();if(f%3===0){var d=di.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(mt);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var o=t.length(),s=t.toString().substring(0,o-i);t.setLengthToZero(),t.append(s),e.pos--;var a=e.getCurrentChar();return i=this.encodeChar(a,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,o=e.getCodewordCount()+r;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(km)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(km),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(km)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(mt)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,o=new Ke;return o.append(r),o.append(i),o.toString()},n})(),fz=(function(){function n(){}return n.prototype.getEncodingMode=function(){return wn},n.prototype.encode=function(e){for(var t=new Ke;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var o=t.toString().substring(4);t.setLengthToZero(),t.append(o);var s=di.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(mt);break}}}t.append(rt.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,a=this.encodeToCodewords(t.toString()),u=!e.hasMoreCharacters(),f=u&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length))}f?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(a)}finally{e.signalEncoderChange(mt)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(rt.getCharAt(e-64)):di.illegalCharacter(rt.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,o=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,a=(r<<18)+(i<<12)+(o<<6)+s,u=a>>16&255,f=a>>8&255,d=a&255,p=new Ke;return p.append(u),t>=2&&p.append(f),t>=3&&p.append(d),p.toString()},n})(),dz=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),hz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ft=(function(){function n(e,t,r,i,o,s,a,u){a===void 0&&(a=0),u===void 0&&(u=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=a,this.rsBlockError=u}return n.lookup=function(e,t,r,i,o){var s,a;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var u=hz(mz),f=u.next();!f.done;f=u.next()){var d=f.value;if(!(t===1&&d.rectangular)&&!(t===2&&!d.rectangular)&&!(r!=null&&(d.getSymbolWidth()<r.getWidth()||d.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&e<=d.dataCapacity)return d}}catch(p){s={error:p}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n})(),pz=(function(n){dz(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(ft),mz=[new ft(!1,3,5,8,8,1),new ft(!1,5,7,10,10,1),new ft(!0,5,7,16,6,1),new ft(!1,8,10,12,12,1),new ft(!0,10,11,14,6,2),new ft(!1,12,12,14,14,1),new ft(!0,16,14,24,10,1),new ft(!1,18,14,16,16,1),new ft(!1,22,18,18,18,1),new ft(!0,22,18,16,10,2),new ft(!1,30,20,20,20,1),new ft(!0,32,24,16,14,2),new ft(!1,36,24,22,22,1),new ft(!1,44,28,24,24,1),new ft(!0,49,28,22,14,2),new ft(!1,62,36,14,14,4),new ft(!1,86,42,16,16,4),new ft(!1,114,48,18,18,4),new ft(!1,144,56,20,20,4),new ft(!1,174,68,22,22,4),new ft(!1,204,84,24,24,4,102,42),new ft(!1,280,112,14,14,16,140,56),new ft(!1,368,144,16,16,16,92,36),new ft(!1,456,192,18,18,16,114,48),new ft(!1,576,224,20,20,16,144,56),new ft(!1,696,272,22,22,16,174,68),new ft(!1,816,336,24,24,16,136,56),new ft(!1,1050,408,18,18,36,175,68),new ft(!1,1304,496,20,20,36,163,62),new pz],gz=(function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(a){return a.charCodeAt(0)}),r=new Ke,i=0,o=t.length;i<o;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new Ke,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ft.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n})(),vz=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),yz=(function(n){vz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return sn},e.prototype.encode=function(t){for(var r=new Ke;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var o=r.length();if(o%3===0){this.writeNextTriplet(t,r);var s=di.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(mt);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):di.illegalCharacter(rt.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),o=r.length();t.pos-=o,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(lz),t.getNewEncoding()<0&&t.signalEncoderChange(mt)},e})(Gy),wz=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_z=(function(n){wz(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return er},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e})(Gy),di=(function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=oT+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,o){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new Gy,a=[new uz,s,new _z,new yz,new fz,new cz],u=new gz(e);u.setSymbolShape(t),u.setSizeConstraints(r,i),e.startsWith(sT)&&e.endsWith(lT)?(u.writeCodeword(rz),u.setSkipAtEnd(2),u.pos+=sT.length):e.startsWith(aT)&&e.endsWith(lT)&&(u.writeCodeword(iz),u.setSkipAtEnd(2),u.pos+=aT.length);var f=mt;for(o&&(s.encodeMaximal(u),f=u.getNewEncoding(),u.resetEncoderSignal());u.hasMoreCharacters();)a[f].encode(u),u.getNewEncoding()>=0&&(f=u.getNewEncoding(),u.resetEncoderSignal());var d=u.getCodewordCount();u.updateSymbolInfo();var p=u.getSymbolInfo().getDataCapacity();d<p&&f!==mt&&f!==Wn&&f!==wn&&u.writeCodeword("");var g=u.getCodewords();for(g.length()<p&&g.append(oT);g.length()<p;)g.append(this.randomize253State(g.length()+1));return u.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===sn&&i===sn){for(var o=Math.min(t+3,e.length),s=t;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return mt}else if(r===wn&&i===wn){for(var o=Math.min(t+4,e.length),s=t;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return mt}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===mt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var o=0,s=new Uint8Array(6),a=[];;){if(t+o===e.length){cn.fill(s,0),cn.fill(a,0);var u=this.findMinimums(i,a,Qe.MAX_VALUE,s),f=this.getMinimumCount(s);if(a[mt]===u)return mt;if(f===1){if(s[Wn]>0)return Wn;if(s[wn]>0)return wn;if(s[er]>0)return er;if(s[sn]>0)return sn}return Nn}var d=e.charCodeAt(t+o);if(o++,this.isDigit(d)?i[mt]+=.5:this.isExtendedASCII(d)?(i[mt]=Math.ceil(i[mt]),i[mt]+=2):(i[mt]=Math.ceil(i[mt]),i[mt]++),this.isNativeC40(d)?i[Nn]+=2/3:this.isExtendedASCII(d)?i[Nn]+=8/3:i[Nn]+=4/3,this.isNativeText(d)?i[er]+=2/3:this.isExtendedASCII(d)?i[er]+=8/3:i[er]+=4/3,this.isNativeX12(d)?i[sn]+=2/3:this.isExtendedASCII(d)?i[sn]+=13/3:i[sn]+=10/3,this.isNativeEDIFACT(d)?i[wn]+=3/4:this.isExtendedASCII(d)?i[wn]+=17/4:i[wn]+=13/4,this.isSpecialB256(d)?i[Wn]+=4:i[Wn]++,o>=4){if(cn.fill(s,0),cn.fill(a,0),this.findMinimums(i,a,Qe.MAX_VALUE,s),a[mt]<this.min(a[Wn],a[Nn],a[er],a[sn],a[wn]))return mt;if(a[Wn]<a[mt]||a[Wn]+1<this.min(a[Nn],a[er],a[sn],a[wn]))return Wn;if(a[wn]+1<this.min(a[Wn],a[Nn],a[er],a[sn],a[mt]))return wn;if(a[er]+1<this.min(a[Wn],a[Nn],a[wn],a[sn],a[mt]))return er;if(a[sn]+1<this.min(a[Wn],a[Nn],a[wn],a[er],a[mt]))return sn;if(a[Nn]+1<this.min(a[mt],a[Wn],a[wn],a[er])){if(a[Nn]<a[sn])return Nn;if(a[Nn]===a[sn]){for(var p=t+o+1;p<e.length;){var g=e.charCodeAt(p);if(this.isX12TermSep(g))return sn;if(!this.isNativeX12(g))break;p++}return Nn}}}}},n.min=function(e,t,r,i,o){var s=Math.min(e,Math.min(t,Math.min(r,i)));return o===void 0?s:Math.min(s,o)},n.findMinimums=function(e,t,r,i){for(var o=0;o<6;o++){var s=t[o]=Math.ceil(e[o]);r>s&&(r=s,cn.fill(i,0)),r===s&&(i[o]=i[o]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=Qe.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n})(),Mm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uT=(function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return Yr.encode(e,this.charset)!=null}catch{return!1}},n})(),xz=(function(){function n(e,t,r){var i,o,s,a,u,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(O){return new uT(Qj.forName(O))}),this.encoders=[];var d=[];d.push(new uT(Zj.ISO_8859_1));for(var p=t!=null&&t.name.startsWith("UTF"),g=0;g<e.length;g++){var y=!1;try{for(var E=(i=void 0,Mm(d)),A=E.next();!A.done;A=E.next()){var I=A.value,N=e.charAt(g),R=N.charCodeAt(0);if(R===r||I.canEncode(N)){y=!0;break}}}catch(O){i={error:O}}finally{try{A&&!A.done&&(o=E.return)&&o.call(E)}finally{if(i)throw i.error}}if(!y)try{for(var k=(s=void 0,Mm(this.ENCODERS)),j=k.next();!j.done;j=k.next()){var I=j.value;if(I.canEncode(e.charAt(g))){d.push(I),y=!0;break}}}catch(O){s={error:O}}finally{try{j&&!j.done&&(a=k.return)&&a.call(k)}finally{if(s)throw s.error}}y||(p=!0)}if(d.length===1&&!p)this.encoders=[d[0]];else{this.encoders=[];var H=0;try{for(var $=Mm(d),b=$.next();!b.done;b=$.next()){var I=b.value;this.encoders[H++]=I}}catch(O){u={error:O}}finally{try{b&&!b.done&&(f=$.return)&&f.call($)}finally{if(u)throw u.error}}}var S=-1;if(t!=null){for(var g=0;g<this.encoders.length;g++)if(this.encoders[g]!=null&&t.name===this.encoders[g].name){S=g;break}}this.priorityEncoderIndex=S}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Yr.encode(rt.getCharAt(e),this.encoders[t].name)},n})(),Ez=3,Az=(function(){function n(e,t,r){this.fnc1=r;var i=new xz(e,t,r);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new Ke,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,o,s){var a=e.charAt(i).charCodeAt(0),u=0,f=t.length();t.getPriorityEncoderIndex()>=0&&(a===s||t.canEncode(a,t.getPriorityEncoderIndex()))&&(u=t.getPriorityEncoderIndex(),f=u+1);for(var d=u;d<f;d++)(a===s||t.canEncode(a,d))&&this.addEdge(r,i+1,new cT(a,t,d,o,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,o=new cT[i+1][t.length()];this.addEdges(e,t,o,0,null,r);for(var s=1;s<=i;s++){for(var a=0;a<t.length();a++)o[s][a]!=null&&s<i&&this.addEdges(e,t,o,s,o[s][a],r);for(var a=0;a<t.length();a++)o[s-1][a]=null}for(var u=-1,f=Qe.MAX_VALUE,a=0;a<t.length();a++)if(o[i][a]!=null){var d=o[i][a];d.cachedTotalSize<f&&(f=d.cachedTotalSize,u=a)}if(u<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],g=o[i][u];g!=null;){if(g.isFNC1())p.unshift(1e3);else for(var y=t.encode(g.c,g.encoderIndex),s=y.length-1;s>=0;s--)p.unshift(y[s]&255);var E=g.previous===null?0:g.previous.encoderIndex;E!==g.encoderIndex&&p.unshift(256+t.getECIValue(g.encoderIndex)),g=g.previous}for(var A=[],s=0;s<A.length;s++)A[s]=p[s];return A},n})(),cT=(function(){function n(e,t,r,i,o){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,a=i===null?0:i.encoderIndex;a!==r&&(s+=Ez),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n})(),Tz=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();var fT;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(fT||(fT={}));(function(n){Tz(e,n);function e(t,r,i,o,s){var a=n.call(this,t,r,i)||this;return a.shape=o,a.macroId=s,a}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(Az);var Cz=(function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n})(),dT=(function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n})(),Iz=(function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n})(),Sz=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),qy=(function(n){Sz(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.value=r,o.bitCount=i,o}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Qe.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(Iz),bz=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Pz=(function(n){bz(e,n);function e(t,r,i){var o=n.call(this,t,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(qy);function Rz(n,e,t){return new Pz(n,e,t)}function Sc(n,e,t){return new qy(n,e,t)}var Nz=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ts=0,Ip=1,Kr=2,Cb=3,Bi=4,Oz=new qy(null,0,0),Lm=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],Dz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function kz(n){var e,t;try{for(var r=Dz(n),i=r.next();!i.done;i=r.next()){var o=i.value;cn.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[Ts][Bi]=0,n[Ip][Bi]=0,n[Ip][Ts]=28,n[Cb][Bi]=0,n[Kr][Bi]=0,n[Kr][Ts]=15,n}var Ib=kz(cn.createInt32Array(6,6)),Mz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lz=(function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var o=Lm[this.mode][e];i=Sc(i,o&65535,o>>16),r+=o>>16}var s=e===Kr?4:5;return i=Sc(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===Kr?4:5;return r=Sc(r,Ib[this.mode][e],i),r=Sc(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Bi||this.mode===Kr){var o=Lm[r][Ts];t=Sc(t,o&65535,o>>16),i+=o>>16,r=Ts}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,a=new n(t,r,this.binaryShiftByteCount+1,i+s);return a.binaryShiftByteCount===2078&&(a=a.endBinaryShift(e+1)),a},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=Rz(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Lm[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var s=new Tn;try{for(var a=Mz(i),u=a.next();!u.done;u=a.next()){var f=u.value;f.appendTo(s,e)}}catch(d){t={error:d}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return rt.format("%s bits=%d bytes=%d",Nz[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(Oz,Ts,0,0),n})();function Vz(n){var e=rt.getCharCode(" "),t=rt.getCharCode("."),r=rt.getCharCode(",");n[Ts][e]=1;for(var i=rt.getCharCode("Z"),o=rt.getCharCode("A"),s=o;s<=i;s++)n[Ts][s]=s-o+2;n[Ip][e]=1;for(var a=rt.getCharCode("z"),u=rt.getCharCode("a"),s=u;s<=a;s++)n[Ip][s]=s-u+2;n[Kr][e]=1;for(var f=rt.getCharCode("9"),d=rt.getCharCode("0"),s=d;s<=f;s++)n[Kr][s]=s-d+2;n[Kr][r]=12,n[Kr][t]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)n[Cb][rt.getCharCode(p[g])]=g;for(var y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],g=0;g<y.length;g++)rt.getCharCode(y[g])>0&&(n[Bi][rt.getCharCode(y[g])]=g);return n}var Vm=Vz(cn.createInt32Array(5,256)),Sh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fz=(function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=rt.getCharCode(" "),t=rt.getCharCode(`
`),r=dT.singletonList(Lz.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case rt.getCharCode("\r"):o=s===t?2:0;break;case rt.getCharCode("."):o=s===e?3:0;break;case rt.getCharCode(","):o=s===e?4:0;break;case rt.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(r=n.updateStateListForPair(r,i,o),i++):r=this.updateStateListForChar(r,i)}var a=dT.min(r,function(u,f){return u.getBitCount()-f.getBitCount()});return a.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,o=[];try{for(var s=Sh(e),a=s.next();!a.done;a=s.next()){var u=a.value;this.updateStateForChar(u,t,o)}}catch(f){r={error:f}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(o)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,o=Vm[e.getMode()][i]>0,s=null,a=0;a<=Bi;a++){var u=Vm[a][i];if(u>0){if(s==null&&(s=e.endBinaryShift(t)),!o||a===e.getMode()||a===Kr){var f=s.latchAndAppend(a,u);r.push(f)}if(!o&&Ib[e.getMode()][a]>=0){var d=s.shiftAndAppend(a,u);r.push(d)}}}if(e.getBinaryShiftByteCount()>0||Vm[e.getMode()][i]===0){var p=e.addBinaryShiftChar(t);r.push(p)}},n.updateStateListForPair=function(e,t,r){var i,o,s=[];try{for(var a=Sh(e),u=a.next();!u.done;u=a.next()){var f=u.value;this.updateStateForPair(f,t,r,s)}}catch(d){i={error:d}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var o=e.endBinaryShift(t);if(i.push(o.latchAndAppend(Bi,r)),e.getMode()!==Bi&&i.push(o.shiftAndAppend(Bi,r)),r===3||r===4){var s=o.latchAndAppend(Kr,16-r).latchAndAppend(Kr,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(a)}},n.simplifyStates=function(e){var t,r,i,o,s=[];try{for(var a=Sh(e),u=a.next();!u.done;u=a.next()){var f=u.value,d=!0,p=function(I){if(I.isBetterThanOrEqualTo(f))return d=!1,"break";f.isBetterThanOrEqualTo(I)&&(s=s.filter(function(N){return N!==I}))};try{for(var g=(i=void 0,Sh(s)),y=g.next();!y.done;y=g.next()){var E=y.value,A=p(E);if(A==="break")break}}catch(I){i={error:I}}finally{try{y&&!y.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}d&&s.push(f)}}catch(I){t={error:I}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s},n})(),Bz=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new Fz(e).encode(),o=Qe.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+o,a,u,f,d,p;if(r!==n.DEFAULT_AZTEC_LAYERS){if(a=r<0,u=Math.abs(r),u>(a?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Le(rt.format("Illegal value %s for layers",r));f=n.totalBitsInLayer(u,a),d=n.WORD_SIZE[u];var g=f-f%d;if(p=n.stuffBits(i,d),p.getSize()+o>g)throw new Le("Data to large for user specified layer");if(a&&p.getSize()>d*64)throw new Le("Data to large for user specified layer")}else{d=0,p=null;for(var y=0;;y++){if(y>n.MAX_NB_BITS)throw new Le("Data too large for an Aztec code");if(a=y<=3,u=a?y+1:y,f=n.totalBitsInLayer(u,a),!(s>f)){(p==null||d!==n.WORD_SIZE[u])&&(d=n.WORD_SIZE[u],p=n.stuffBits(i,d));var g=f-f%d;if(!(a&&p.getSize()>d*64)&&p.getSize()+o<=g)break}}}var E=n.generateCheckWords(p,f,d),A=p.getSize()/d,I=n.generateModeMessage(a,u,A),N=(a?11:14)+u*4,R=new Int32Array(N),k;if(a){k=N;for(var y=0;y<R.length;y++)R[y]=y}else{k=N+1+2*Qe.truncDivision(Qe.truncDivision(N,2)-1,15);for(var j=Qe.truncDivision(N,2),H=Qe.truncDivision(k,2),y=0;y<j;y++){var $=y+Qe.truncDivision(y,15);R[j-y-1]=H-$-1,R[j+y]=H+$+1}}for(var b=new Xi(k),y=0,S=0;y<u;y++){for(var O=(u-y)*4+(a?9:12),V=0;V<O;V++)for(var L=V*2,U=0;U<2;U++)E.get(S+L+U)&&b.set(R[y*2+U],R[y*2+V]),E.get(S+O*2+L+U)&&b.set(R[y*2+V],R[N-1-y*2-U]),E.get(S+O*4+L+U)&&b.set(R[N-1-y*2-U],R[N-1-y*2-V]),E.get(S+O*6+L+U)&&b.set(R[N-1-y*2-V],R[y*2+U]);S+=O*8}if(n.drawModeMessage(b,a,k,I),a)n.drawBullsEye(b,Qe.truncDivision(k,2),5);else{n.drawBullsEye(b,Qe.truncDivision(k,2),7);for(var y=0,V=0;y<Qe.truncDivision(N,2)-1;y+=15,V+=16)for(var U=Qe.truncDivision(k,2)&1;U<k;U+=2)b.set(Qe.truncDivision(k,2)-V,U),b.set(Qe.truncDivision(k,2)+V,U),b.set(U,Qe.truncDivision(k,2)-V),b.set(U,Qe.truncDivision(k,2)+V)}var D=new Cz;return D.setCompact(a),D.setSize(k),D.setLayers(u),D.setCodeWords(A),D.setMatrix(b),D},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var o=t-i;o<=t+i;o++)e.set(o,t-i),e.set(o,t+i),e.set(t-i,o),e.set(t+i,o);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new Tn;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var o=Qe.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var a=o-3+s;i.get(s)&&e.set(a,o-5),i.get(s+7)&&e.set(o+5,a),i.get(20-s)&&e.set(a,o+5),i.get(27-s)&&e.set(o-5,a)}else for(var s=0;s<10;s++){var a=o-5+s+Qe.truncDivision(s,5);i.get(s)&&e.set(a,o-7),i.get(s+10)&&e.set(o+7,a),i.get(29-s)&&e.set(a,o+7),i.get(39-s)&&e.set(o-7,a)}},n.generateCheckWords=function(e,t,r){var i,o,s=e.getSize()/r,a=new Ab(n.getGF(r)),u=Qe.truncDivision(t,r),f=n.bitsToWords(e,r,u);a.encode(f,u-s);var d=t%r,p=new Tn;p.appendBits(0,d);try{for(var g=Bz(Array.from(f)),y=g.next();!y.done;y=g.next()){var E=y.value;p.appendBits(E,r)}}catch(A){i={error:A}}finally{try{y&&!y.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}return p},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),o,s;for(o=0,s=e.getSize()/t;o<s;o++){for(var a=0,u=0;u<t;u++)a|=e.get(o*t+u)?1<<t-u-1:0;i[o]=a}return i},n.getGF=function(e){switch(e){case 4:return pr.AZTEC_PARAM;case 6:return pr.AZTEC_DATA_6;case 8:return pr.AZTEC_DATA_8;case 10:return pr.AZTEC_DATA_10;case 12:return pr.AZTEC_DATA_12;default:throw new Le("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new Tn,i=e.getSize(),o=(1<<t)-2,s=0;s<i;s+=t){for(var a=0,u=0;u<t;u++)(s+u>=i||e.get(s+u))&&(a|=1<<t-1-u);(a&o)===o?(r.appendBits(a&o,t),s--):(a&o)===0?(r.appendBits(a|1,t),s--):r.appendBits(a,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var Uz={audio:!1,video:{facingMode:"environment"}},jz=300,zz=function(n){var e=n===void 0?{}:n,t=e.timeBetweenDecodingAttempts,r=t===void 0?jz:t,i=e.hints;return B.useMemo(function(){var o=new jj(i);return o.timeBetweenDecodingAttempts=r,o},[i,r])},hT=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{f(r.next(d))}catch(p){s(p)}}function u(d){try{f(r.throw(d))}catch(p){s(p)}}function f(d){d.done?o(d.value):i(d.value).then(a,u)}f((r=r.apply(n,e||[])).next())})},pT=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(d){return u([f,d])}}function u(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Hz=function(n){var e=n.resetStream,t=B.useState(!1),r=t[0],i=t[1],o=B.useState(null),s=o[0],a=o[1],u=B.useRef(null),f=B.useRef(e),d=B.useCallback(function(y){u.current=y,a(typeof y.getCapabilities=="function"?y.getCapabilities().torch!==void 0:!1)},[]),p=B.useCallback(function(){return hT(void 0,void 0,void 0,function(){return pT(this,function(y){switch(y.label){case 0:return!u.current||!s?[2]:[4,u.current.applyConstraints({advanced:[{torch:!0}]})];case 1:return y.sent(),i(!0),[2]}})})},[s]),g=B.useCallback(function(){return hT(void 0,void 0,void 0,function(){return pT(this,function(y){switch(y.label){case 0:return!u.current||!s?[2]:(u.current=null,a(null),i(!1),[4,f.current()]);case 1:return y.sent(),[2]}})})},[s]);return B.useEffect(function(){f.current=e},[e]),{init:d,isOn:r,isAvailable:s,on:p,off:g}},Wz=function(n,e){return JSON.stringify(n)===JSON.stringify(e)},mT=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{f(r.next(d))}catch(p){s(p)}}function u(d){try{f(r.throw(d))}catch(p){s(p)}}function f(d){d.done?o(d.value):i(d.value).then(a,u)}f((r=r.apply(n,e||[])).next())})},gT=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(d){return u([f,d])}}function u(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},$z=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},Gz=function(n){n===void 0&&(n={});var e=n.paused,t=e===void 0?!1:e,r=n.hints,i=n.timeBetweenDecodingAttempts,o=n.onDecodeResult,s=o===void 0?function(){}:o,a=n.onDecodeError,u=a===void 0?function(){}:a,f=n.onError,d=f===void 0?function(){}:f,p="deviceId"in n?n.deviceId:void 0,g=B.useState("constraints"in n?n.constraints:void 0),y=g[0],E=g[1],A=B.useRef(s),I=B.useRef(u),N=B.useRef(d),R=B.useRef(null),k=zz({hints:r,timeBetweenDecodingAttempts:i}),j=Hz({resetStream:function(){return mT(void 0,void 0,void 0,function(){return gT(this,function(V){switch(V.label){case 0:return O(),[4,S()];case 1:return V.sent(),[2]}})})}}),H=j.init,$=$z(j,["init"]),b=B.useCallback(function(V,L){V&&A.current(V),L&&I.current(L)},[]),S=B.useCallback(function(){return mT(void 0,void 0,void 0,function(){var V,L,U;return gT(this,function(D){switch(D.label){case 0:if(!R.current)return[2];if(t)return[2];D.label=1;case 1:return D.trys.push([1,6,,7]),p?[4,k.decodeFromVideoDevice(p,R.current,b)]:[3,3];case 2:return D.sent(),[3,5];case 3:return[4,k.decodeFromConstraints(y??Uz,R.current,b)];case 4:D.sent(),D.label=5;case 5:return[3,7];case 6:return V=D.sent(),N.current(V),[2];case 7:return R.current?(L=R.current.srcObject,U=L.getVideoTracks()[0],U&&H(U),[2]):[2]}})})},[k,p,y,t,b,H]),O=B.useCallback(function(){k.reset()},[k]);return B.useEffect(function(){A.current=s},[s]),B.useEffect(function(){I.current=u},[u]),B.useEffect(function(){N.current=d},[d]),B.useEffect(function(){var V=Wz(y,n.constraints);V||E(n.constraints)},[y,n]),B.useEffect(function(){return S(),function(){O()}},[S,O]),{ref:R,torch:$}};const qz=({user:n})=>{const e=n?.uid,{toast:t}=c0(),[r,i]=B.useState(0),[o,s]=B.useState(!1),[a,u]=B.useState(""),[f,d]=B.useState(!1),[p,g]=B.useState([]),[y,E]=B.useState(null),[A,I]=B.useState(!1),[N,R]=B.useState([]),[k,j]=B.useState([]),[H,$]=B.useState(null);B.useEffect(()=>{if(!e)return;const L=fb(e,U=>i(Number(U?.balance||0)));return()=>L&&L()},[e]),B.useEffect(()=>{if(!e)return;const L=XF(e,U=>g(U));return()=>L&&L()},[e]),B.useEffect(()=>{if(!e)return;const L=YF(e,U=>R(U));return()=>L&&L()},[e]),B.useEffect(()=>{if(!e)return;const L=QF(e,U=>j(U));return()=>L&&L()},[e]),B.useEffect(()=>{if(!!y||!!H){const U=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=U||""}}},[y,H]);const b=B.useMemo(()=>{const L=(p||[]).map(le=>({id:`in_${le.id}`,type:"in",amount:Number(le.amount||0),label:`Canje de cdigo ${le.code}`,at:le.redeemedAt?.toDate?le.redeemedAt.toDate():le.redeemedAt instanceof Date?le.redeemedAt:null,kind:"redemption"})),U=(N||[]).map(le=>({id:`out_${le.id}`,type:"out",amount:Number(le.total||(le.price||0)*(le.quantity||1)),label:`Compra: ${le.name||le.productId}`,at:le.purchasedAt?.toDate?le.purchasedAt.toDate():le.purchasedAt instanceof Date?le.purchasedAt:null,kind:"purchase",purchase:le})),D=(k||[]).map(le=>({id:`grant_${le.id}`,type:"in",amount:Number(le.amount||0),label:le.note?`Asignacin admin: ${le.note}`:"Asignacin de puntos (admin)",at:le.grantedAt?.toDate?le.grantedAt.toDate():le.grantedAt instanceof Date?le.grantedAt:null,kind:"grant"})),ue=[...L,...D,...U];return ue.sort((le,Ue)=>(Ue.at?.getTime?.()||0)-(le.at?.getTime?.()||0)),ue},[p,N,k]),S=async L=>{const U=(L??a).trim();if(U){I(!0);try{const D=await JF(U),ue=new Date,le=D.expiresAt?D.expiresAt<ue:!1;E({...D,expired:le})}catch(D){t({title:"Cdigo invlido",description:D?.message||"No se pudo validar el cdigo",variant:"destructive"})}finally{I(!1)}}},{ref:O}=Gz({onDecodeResult(L){d(!1);const U=L.getText();S(U)},paused:!f,constraints:{video:{facingMode:{ideal:"environment"}}}});async function V(){if(!("mediaDevices"in navigator)||!navigator.mediaDevices?.getUserMedia)throw new Error("Tu dispositivo o navegador no soporta acceso a la cmara.");try{return(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}}})).getTracks().forEach(U=>U.stop()),!0}catch(L){throw L}}return T.jsxs("div",{className:"rounded-2xl glass-effect p-6 w-full",children:[T.jsxs("div",{className:"flex items-end justify-between flex-wrap gap-3",children:[T.jsx("h2",{className:"font-black tracking-tight text-[40px] leading-[44px] sm:text-[60px] sm:leading-[60px]",children:T.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-boreal-aqua to-boreal-blue",children:"Mis puntos"})}),T.jsx("div",{className:"text-6xl font-black text-boreal-aqua leading-none",children:r})]}),T.jsx("p",{className:"text-gray-300 mt-2",children:"Puedes ganar puntos asistiendo a eventos o participando en dinmicas de la comunidad."}),T.jsx("h3",{className:"mt-8 text-xl font-semibold",children:"Canjear puntos"}),T.jsxs("div",{className:"mt-3 grid gap-4 md:grid-cols-2",children:[T.jsxs("div",{className:"space-y-3",children:[T.jsx("label",{className:"text-sm text-gray-300",children:"Canjear con cdigo"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx(br,{placeholder:"Ingresa tu cdigo",value:a,onChange:L=>u(L.target.value),className:"bg-white/5 border-white/20 text-white"}),T.jsxs(Ut,{onClick:()=>S(),disabled:A||!a.trim(),children:[A?T.jsx(au,{className:"w-4 h-4 animate-spin"}):T.jsx(Gh,{className:"w-4 h-4"}),T.jsx("span",{className:"ml-2",children:"Verificar"})]})]})]}),T.jsxs("div",{className:"space-y-3",children:[T.jsx("label",{className:"text-sm text-gray-300",children:"Canjear escaneando QR"}),T.jsx("div",{className:"relative rounded-xl overflow-hidden border border-white/10 min-h-[220px] flex items-center justify-center",children:f?T.jsx("video",{ref:O,className:"w-full h-full object-cover"}):T.jsxs("div",{className:"p-8 text-center text-gray-300",children:[T.jsx(KV,{className:"w-10 h-10 mx-auto mb-3 text-boreal-aqua"}),T.jsx("p",{children:"Activa la cmara para escanear un cdigo QR"}),T.jsx(Ut,{variant:"outline",className:"mt-3 border-white/30 text-white hover:bg-white/10",onClick:async()=>{try{mi.getPlatform()!=="web"&&await V(),d(!0)}catch(L){const U=L?.message||"No se pudo acceder a la cmara.";t({title:"Permiso de cmara",description:U+" Revisa los permisos de la app en Ajustes.",variant:"destructive"})}},children:"Usar cmara"})]})}),f&&T.jsx(Ut,{variant:"ghost",className:"text-gray-300",onClick:()=>d(!1),children:"Detener cmara"})]})]}),T.jsx("div",{className:"my-8 h-px bg-white/10"}),T.jsxs("div",{className:"mt-8",children:[T.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Movimientos"}),b?.length?T.jsx("ul",{className:"divide-y divide-white/10 rounded-xl border border-white/10 overflow-hidden",children:b.map(L=>{const U=L.kind==="purchase"&&L.purchase;return T.jsxs("li",{className:"flex items-center justify-between px-4 py-3 bg-white/5",children:[T.jsxs("div",{children:[T.jsx("div",{className:"text-sm text-gray-300",children:L.label}),T.jsx("div",{className:"text-xs text-gray-400",children:L.at?L.at.toLocaleString():""}),U&&T.jsx("button",{className:"mt-1 text-xs text-boreal-aqua hover:underline",onClick:()=>{const D=L.purchase||{},ue=Kz({id:D.receiptId||D.id,name:D.name||D.productId||"Artculo",quantity:Number(D.quantity||1),total:Number(D.total||(D.price||0)*(D.quantity||1)),price:Number(D.price||0)}),le=Xz(ue);$({id:D.receiptId||D.id,name:D.name||D.productId||"Artculo",quantity:Number(D.quantity||1),total:Number(D.total||(D.price||0)*(D.quantity||1)),price:Number(D.price||0),imageUrl:D.imageUrl||"",qrUrl:le})},children:"Ver comprobante"})]}),T.jsxs("div",{className:L.type==="in"?"text-boreal-aqua font-bold":"text-red-400 font-bold",children:[L.type==="in"?"+":"-",L.amount]})]},L.id)})}):T.jsx("p",{className:"text-sm text-gray-400",children:"An no tienes movimientos."})]}),y&&ka.createPortal(T.jsxs("div",{className:"fixed inset-0 z-50",children:[T.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>E(null)}),T.jsx("div",{className:"relative z-10 overflow-y-auto overscroll-y-contain",children:T.jsx("div",{className:"min-h-screen flex items-center justify-center p-3 md:p-6",children:T.jsxs("div",{className:"glass-effect rounded-2xl p-6 w-[min(92vw,420px)] max-h-[85vh] overflow-y-auto",children:[T.jsx("h4",{className:"text-xl font-semibold mb-1",children:"Confirmar canje"}),T.jsxs("p",{className:"text-sm text-gray-300 mb-4",children:["Vas a canjear el cdigo ",T.jsx("span",{className:"font-mono",children:y.id}),"."]}),T.jsxs("div",{className:"space-y-2 text-sm",children:[T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Monto"}),T.jsxs("span",{className:"font-medium",children:[y.amount," puntos"]})]}),T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Estado"}),T.jsx("span",{className:"font-medium",children:y.used?"Usado":y.active===!1?"Inactivo":"Disponible"})]}),"multiUse"in y&&T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Tipo"}),T.jsx("span",{className:"font-medium",children:y.multiUse?"Multi-uso (un uso por persona)":"Uso nico"})]}),y.expiresAt&&T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Expira"}),T.jsx("span",{className:"font-medium",children:y.expiresAt.toLocaleString()})]}),y.expired&&T.jsx("div",{className:"text-red-400",children:"Este cdigo ya expir."})]}),T.jsxs("div",{className:"mt-5 flex gap-2 justify-end",children:[T.jsx(Ut,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:()=>E(null),children:"Cancelar"}),T.jsxs(Ut,{onClick:async()=>{s(!0);try{const L=await eB(e,y.id,n?.email||null);t({title:"Canje exitoso",description:`Se aadieron ${L.amount} puntos a tu saldo.`}),u(""),E(null)}catch(L){t({title:"No se pudo canjear",description:L?.message||"Error desconocido",variant:"destructive"})}finally{s(!1)}},disabled:o||y.used||y.active===!1||y.expired,children:[o?T.jsx(au,{className:"w-4 h-4 animate-spin"}):T.jsx(Gh,{className:"w-4 h-4"}),T.jsx("span",{className:"ml-2",children:"Confirmar canje"})]})]})]})})})]}),document.body),H&&ka.createPortal(T.jsxs("div",{className:"fixed inset-0 z-50",children:[T.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>$(null)}),T.jsx("div",{className:"relative z-10 overflow-y-auto overscroll-y-contain",children:T.jsx("div",{className:"min-h-screen flex items-center justify-center p-3 md:p-6",children:T.jsxs("div",{className:"glass-effect rounded-2xl w-full max-w-[560px] max-h-[85vh] overflow-y-auto p-6 md:p-8 text-center",children:[T.jsx(Gh,{className:"w-14 h-14 text-boreal-aqua mx-auto mb-3"}),T.jsx("h4",{className:"text-2xl font-semibold mb-1",children:"Comprobante de compra"}),T.jsxs("p",{className:"text-gray-300",children:["Compra de ",T.jsx("span",{className:"font-medium",children:H.quantity})," x ",T.jsx("span",{className:"font-medium",children:H.name}),"."]}),T.jsxs("p",{className:"text-gray-300 mt-1",children:["Total: ",T.jsxs("span",{className:"font-semibold",children:[H.total," pts"]})]}),T.jsx("p",{className:"text-gray-300 mt-3 text-sm",children:"Para retirar tu artculo, presntate en horario de oficina y muestra el cdigo QR o el ID de compra."}),T.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 items-center",children:[H.imageUrl?T.jsx("div",{className:"w-full aspect-square rounded-xl overflow-hidden bg-white/5",children:T.jsx("img",{src:H.imageUrl,alt:H.name,className:"w-full h-full object-cover"})}):null,T.jsxs("div",{className:"flex flex-col items-center justify-center",children:[T.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"ID de compra"}),T.jsx("div",{className:"font-mono text-lg tracking-widest",children:H.id}),H.qrUrl&&T.jsx("img",{src:H.qrUrl,alt:"QR de compra",className:"mt-3 w-40 h-40 mx-auto"})]})]}),T.jsxs("div",{className:"mt-5 flex flex-col md:flex-row flex-wrap gap-2 justify-center",children:[T.jsx(Ut,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:()=>$(null),children:"Cerrar"}),T.jsx(Ut,{variant:"outline",className:"border-green-400 text-green-300 hover:bg-green-500/10",onClick:()=>window.open("https://wa.me/50576796164","_blank","noopener,noreferrer"),children:"Contactar por WhatsApp"})]})]})})})]}),document.body)]})};function Kz({id:n,name:e,quantity:t,total:r,price:i}){return`ID:${n}
NAME:${e}
QTY:${t}
PRICE:${i}
TOTAL:${r}`}function Xz(n){return`https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=${encodeURIComponent(n)}`}function Yz(n,{includeInactive:e=!1}={}){const t=vr(wt,"productos"),r=Ki(t,l0("name"));return Ds(r,i=>{let o=[];i.forEach(s=>o.push({id:s.id,...s.data()})),e||(o=o.filter(s=>s.active!==!1)),n(o)})}async function Qz({name:n,price:e,stock:t=0,imageUrl:r="",active:i=!0,description:o="",tags:s=[]}){if(!n||!e)throw new Error("Nombre y precio son obligatorios");const a=vr(wt,"productos"),u={name:n,price:Number(e),stock:Number(t||0),imageUrl:r||"",active:i!==!1,description:o||"",tags:Array.isArray(s)?s:[],createdAt:hr()};return{id:(await TV(a,u)).id,...u}}async function Zz(n,e){if(!n)throw new Error("Producto invlido");const t=rr(wt,"productos",n),r={},i=["name","price","stock","imageUrl","description","tags","active"];for(const o of i)o in e&&e[o]!==void 0&&(o==="price"||o==="stock"?r[o]=Number(e[o]):o==="tags"?r[o]=Array.isArray(e[o])?e[o]:[]:r[o]=e[o]);await EV(t,r)}async function Jz(n){if(!n)throw new Error("Producto invlido");const e=rr(wt,"productos",n);await AV(e)}async function eH(n,e,t=1,r,i){if(!n)throw new Error("Usuario no autenticado");if(!e)throw new Error("Producto invlido");const o=Math.max(1,Number(t||1)),s=rr(wt,"productos",e),a=rr(wt,"userPoints",n),u=vr(wt,"userPoints",n,"purchases");return Fy(wt,async f=>{const[d,p]=await Promise.all([f.get(s),f.get(a)]);if(!d.exists())throw new Error("Producto no encontrado");const g=d.data();if(g.active===!1)throw new Error("Producto inactivo");const y=Number(g.stock||0),E=Number(g.price||0);if(!E||E<0)throw new Error("Precio invlido");if(y<o)throw new Error("Stock insuficiente");const A=E*o,I=Number((p.exists()?p.data().balance:0)||0);if(I<A)throw new Error("No tienes puntos suficientes");f.update(s,{stock:y-o,lastPurchasedAt:hr()});const N=(r||"").toLowerCase()||null;p.exists()?f.update(a,{balance:Ap(-A),updatedAt:hr(),email:N}):f.set(a,{balance:I-A,updatedAt:hr(),email:N});const R=i?rr(u,String(i)):rr(u);return f.set(R,{receiptId:i||R.id,productId:e,name:g.name,price:E,quantity:o,total:A,imageUrl:g.imageUrl||"",purchasedAt:hr(),userEmail:r||null}),{total:A,receiptId:i||R.id}})}function tH(n,e){if(!n)return e(!1),()=>{};const t=String(n).toLowerCase(),r=vr(wt,"isAdmin"),i=Ki(r,su("email","==",t),Oa(1));return Ds(i,s=>{if(!s.empty){const d=(s.docs[0].data()||{}).active!==!1;e(d);return}const a=rr(wt,"isAdmin",t),u=Ds(a,f=>{if(!f.exists())e(!1);else{const p=(f.data()||{}).active!==!1;e(p)}},()=>e(!1));return()=>u()},()=>e(!1))}const nH=({product:n,onBuy:e,disabled:t,adminMode:r=!1,onEdit:i,onDelete:o})=>{const{name:s,price:a,stock:u,imageUrl:f,description:d}=n;return T.jsxs("div",{className:"rounded-2xl glass-effect p-4 flex flex-col",children:[T.jsx("div",{className:"w-full rounded-xl overflow-hidden mb-3 aspect-square bg-white/5",children:f?T.jsx("img",{src:f,alt:s,className:"w-full h-full object-cover"}):null}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h4",{className:"text-lg font-semibold",children:s}),T.jsx("p",{className:"text-sm text-gray-300 line-clamp-4",children:d||""})]}),Array.isArray(n.tags)&&n.tags.length>0&&T.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:n.tags.map(p=>T.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-white/10 border border-white/10 text-gray-200",children:p},p))}),T.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[T.jsxs("div",{className:"text-boreal-aqua font-bold",children:[a," pts"]}),T.jsxs("div",{className:"text-xs text-gray-400",children:["Stock: ",Number(u??0)]})]}),T.jsx(Ut,{className:"mt-3",onClick:e,disabled:t||Number(u??0)<=0,children:"Canjear"}),r&&T.jsxs("div",{className:"mt-2 flex gap-2",children:[T.jsx(Ut,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:i,children:"Editar"}),T.jsx(Ut,{variant:"destructive",onClick:o,children:"Eliminar"})]})]})},rH=({user:n,onViewMovements:e})=>{const t=n?.uid,{toast:r}=c0(),[i,o]=B.useState([]),[s,a]=B.useState(0),[u]=B.useState(null),[f,d]=B.useState(!1),[p,g]=B.useState(!1),[y,E]=B.useState("products"),[A,I]=B.useState({name:"",price:"",stock:"",imageUrl:"",description:"",tags:"",active:!0}),[N,R]=B.useState(null),[k,j]=B.useState(""),[H,$]=B.useState([]),[b,S]=B.useState(null),[O,V]=B.useState(1),[L,U]=B.useState(!1),[D,ue]=B.useState(null),[le,Ue]=B.useState({email:"",points:"",note:""}),[Ie,Z]=B.useState(!1);B.useEffect(()=>{const ne=Yz(o);return()=>ne&&ne()},[]),B.useEffect(()=>{if(!!b||!!D){const ye=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=ye||""}}},[b,D]),B.useEffect(()=>{if(!t)return;const ne=fb(t,ye=>a(Number(ye?.balance||0)));return()=>ne&&ne()},[t]),B.useEffect(()=>{if(!n?.email)return;const ne=tH(n.email,d);return()=>ne&&ne()},[n?.email]),B.useEffect(()=>{f?(g(!0),E("points")):g(!1)},[f]);const ve=ne=>{S(ne),V(1)},pe=async()=>{if(!b)return;const ne=Math.max(1,Number(O||1));U(!0);try{const ye=q(),He=await eH(t,b.id,ne,n?.email||null,ye);r({title:"Compra realizada",description:`Se descontaron ${He.total} puntos.`});const bt=ie({id:He.receiptId,name:b.name,quantity:ne,total:He.total,price:Number(b.price||0)}),Pt=Ee(bt);ue({id:He.receiptId,name:b.name,quantity:ne,total:He.total,imageUrl:b.imageUrl||"",qrUrl:Pt}),S(null)}catch(ye){r({title:"No se pudo comprar",description:ye?.message||"Error desconocido",variant:"destructive"})}finally{U(!1)}};function q(){return Math.random().toString(36).slice(2,10).toUpperCase()}function ie({id:ne,name:ye,quantity:He,total:bt,price:Pt}){return`ID:${ne}
NAME:${ye}
QTY:${He}
PRICE:${Pt}
TOTAL:${bt}`}function Ee(ne){return`https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=${encodeURIComponent(ne)}`}const Pe=async ne=>{ne.preventDefault();try{const ye=A.tags.split(",").map(He=>He.trim()).filter(Boolean);N?(await Zz(N,{name:A.name.trim(),price:Number(A.price),stock:Number(A.stock||0),imageUrl:A.imageUrl.trim(),description:A.description.trim(),tags:ye,active:!!A.active}),r({title:"Producto actualizado"})):(await Qz({name:A.name.trim(),price:Number(A.price),stock:Number(A.stock||0),imageUrl:A.imageUrl.trim(),description:A.description.trim(),tags:ye,active:!!A.active}),r({title:"Producto agregado"})),I({name:"",price:"",stock:"",imageUrl:"",description:"",tags:"",active:!0}),R(null)}catch(ye){r({title:"No se pudo agregar",description:ye?.message||"Error desconocido",variant:"destructive"})}},We=B.useMemo(()=>{const ne=new Set;return i.forEach(ye=>(Array.isArray(ye.tags)?ye.tags:[]).forEach(He=>ne.add(He))),Array.from(ne).sort((ye,He)=>ye.localeCompare(He))},[i]),Ge=B.useMemo(()=>{const ne=k.trim().toLowerCase();return i.filter(ye=>{const He=!ne||ye.name?.toLowerCase().includes(ne)||ye.description?.toLowerCase().includes(ne)||Array.isArray(ye.tags)&&ye.tags.some(Pt=>Pt.toLowerCase().includes(ne)),bt=!H.length||Array.isArray(ye.tags)&&ye.tags.some(Pt=>H.includes(Pt));return He&&bt})},[i,k,H]),Ve=(i?.length||0)>20;return T.jsxs("div",{className:"w-full",children:[T.jsxs("div",{className:"mb-2 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5",children:[T.jsx("h2",{className:"font-black tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-boreal-aqua to-boreal-purple text-[40px] leading-[44px] sm:text-[60px] sm:leading-[60px] break-words",children:"Marketplace"}),T.jsxs("div",{className:"text-sm text-gray-300 sm:text-right",children:["Saldo: ",T.jsx("span",{className:"text-boreal-aqua font-bold",children:s})," pts"]})]}),T.jsx("p",{className:"text-gray-300 mb-8",children:"Canjea tus puntos por productos y beneficios de la comunidad."}),T.jsxs("div",{className:"mb-6 flex flex-col items-center gap-5",children:[Ve&&T.jsx("div",{className:"w-full flex justify-center",children:T.jsx(br,{placeholder:"Buscar por nombre, descripcin o etiqueta",value:k,onChange:ne=>j(ne.target.value),className:"w-full max-w-2xl h-12 rounded-full bg-white/5 border border-boreal-aqua/40 focus-visible:ring-0 focus-visible:border-boreal-aqua text-white placeholder:text-gray-400 px-5 text-base"})}),!!We.length&&T.jsx("div",{className:"w-full",children:T.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[T.jsx("button",{onClick:()=>$([]),className:`px-5 py-2 text-sm rounded-full border transition ${H.length===0?"bg-gradient-to-r from-boreal-purple to-boreal-blue text-white border-transparent shadow":"bg-transparent text-gray-200 border-boreal-aqua/50 hover:border-boreal-aqua"}`,children:"Todos"}),We.map(ne=>{const ye=H.includes(ne);return T.jsxs("button",{onClick:()=>$(He=>ye?He.filter(bt=>bt!==ne):[...He,ne]),className:`px-5 py-2 text-sm rounded-full border transition ${ye?"bg-gradient-to-r from-boreal-purple to-boreal-blue text-white border-transparent shadow":"bg-transparent text-gray-200 border-boreal-aqua/50 hover:border-boreal-aqua"}`,children:["#",ne]},ne)}),H.length>0&&T.jsx("button",{onClick:()=>$([]),className:"ml-2 px-5 py-2 text-sm rounded-full border text-gray-200 border-boreal-aqua/40 hover:border-boreal-aqua",children:"Limpiar"})]})})]}),T.jsx("div",{className:"mt-8",children:Ge.length?T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:T.jsx(lf,{initial:!1,children:Ge.map(ne=>T.jsx(kn.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},children:T.jsx(nH,{product:ne,onBuy:()=>ve(ne),disabled:u===ne.id,adminMode:p,onEdit:()=>{g(!0),R(ne.id),I({name:ne.name||"",price:String(ne.price??""),stock:String(ne.stock??""),imageUrl:ne.imageUrl||"",description:ne.description||"",tags:Array.isArray(ne.tags)?ne.tags.join(", "):"",active:ne.active!==!1})},onDelete:async()=>{if(window.confirm("Eliminar este producto?"))try{await Jz(ne.id),r({title:"Producto eliminado"})}catch(ye){r({title:"No se pudo eliminar",description:ye?.message||"Error desconocido",variant:"destructive"})}}})},ne.id))})}):T.jsxs("div",{className:"rounded-2xl glass-effect p-8 text-center text-gray-300",children:[T.jsx("p",{className:"text-lg font-semibold text-white",children:"No hay artculos disponibles"}),T.jsx("p",{className:"mt-1",children:"Por el momento no hay productos publicados, pero pronto habr novedades. Vuelve ms tarde."})]})}),T.jsxs("div",{className:"mt-10",children:[f&&T.jsx("div",{className:"mb-3 flex items-center justify-between",children:T.jsxs("div",{className:"inline-flex rounded-lg border border-white/10 p-1 bg-white/5",children:[T.jsx("button",{className:`px-3 py-1.5 rounded-md text-sm ${p?"text-white hover:bg-white/10":"bg-boreal-aqua text-boreal-dark"}`,onClick:()=>g(!1),children:"Usuario"}),T.jsx("button",{className:`px-3 py-1.5 rounded-md text-sm ${p?"bg-boreal-aqua text-boreal-dark":"text-white hover:bg-white/10"}`,onClick:()=>g(!0),children:"Admin"})]})}),f&&p&&T.jsxs("div",{className:"rounded-2xl glass-effect p-4",children:[T.jsxs("div",{className:"mb-4 inline-flex rounded-lg border border-white/10 p-1 bg-white/5",children:[T.jsx("button",{className:`px-3 py-1.5 rounded-md text-sm ${y==="products"?"bg-boreal-aqua text-boreal-dark":"text-white hover:bg-white/10"}`,onClick:()=>E("products"),children:"Productos"}),T.jsx("button",{className:`px-3 py-1.5 rounded-md text-sm ${y==="points"?"bg-boreal-aqua text-boreal-dark":"text-white hover:bg-white/10"}`,onClick:()=>E("points"),children:"Puntos"})]}),y==="products"&&T.jsxs("form",{onSubmit:Pe,className:"grid grid-cols-1 md:grid-cols-6 gap-3",children:[T.jsxs("div",{className:"md:col-span-3",children:[T.jsx("label",{className:"text-xs text-gray-400",children:"Nombre"}),T.jsx(br,{value:A.name,onChange:ne=>I({...A,name:ne.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs text-gray-400",children:"Precio (pts)"}),T.jsx(br,{type:"number",min:"0",value:A.price,onChange:ne=>I({...A,price:ne.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs text-gray-400",children:"Stock"}),T.jsx(br,{type:"number",min:"0",value:A.stock,onChange:ne=>I({...A,stock:ne.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),T.jsxs("div",{className:"md:col-span-2",children:[T.jsx("label",{className:"text-xs text-gray-400",children:"Imagen URL"}),T.jsx(br,{value:A.imageUrl,onChange:ne=>I({...A,imageUrl:ne.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),T.jsxs("div",{className:"md:col-span-2",children:[T.jsx("label",{className:"text-xs text-gray-400",children:"Etiquetas (coma separadas)"}),T.jsx(br,{value:A.tags,onChange:ne=>I({...A,tags:ne.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),T.jsxs("div",{className:"md:col-span-4",children:[T.jsx("label",{className:"text-xs text-gray-400",children:"Descripcin"}),T.jsx(br,{value:A.description,onChange:ne=>I({...A,description:ne.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("input",{id:"prod-active",type:"checkbox",checked:!!A.active,onChange:ne=>I({...A,active:ne.target.checked})}),T.jsx("label",{htmlFor:"prod-active",className:"text-sm text-gray-300",children:"Activo"})]}),T.jsx("div",{children:T.jsx(Ut,{type:"submit",className:"w-full",children:N?"Guardar":"Agregar"})})]}),y==="points"&&T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[T.jsxs("div",{className:"md:col-span-1",children:[T.jsx("label",{className:"text-xs text-gray-400",children:"Correo del usuario"}),T.jsx(br,{value:le.email,onChange:ne=>Ue({...le,email:ne.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs text-gray-400",children:"Puntos a agregar"}),T.jsx(br,{type:"number",min:"1",value:le.points,onChange:ne=>Ue({...le,points:ne.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),T.jsxs("div",{className:"md:col-span-1",children:[T.jsx("label",{className:"text-xs text-gray-400",children:"Nota (opcional)"}),T.jsx(br,{value:le.note,onChange:ne=>Ue({...le,note:ne.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),T.jsx("div",{className:"md:col-span-3 flex justify-end",children:T.jsx(Ut,{onClick:async()=>{Z(!0);try{const ne=await ZF(le.email,Number(le.points),n?.email||null,le.note);r({title:"Puntos agregados",description:`Se aadieron ${ne.amount} puntos a ${ne.email}.`}),Ue({email:"",points:"",note:""})}catch(ne){r({title:"No se pudo agregar",description:ne?.message||"Error desconocido",variant:"destructive"})}finally{Z(!1)}},disabled:Ie||!le.email.trim()||!Number(le.points),children:Ie?"Procesando...":"Agregar puntos"})})]})]})]}),b&&ka.createPortal(T.jsxs("div",{className:"fixed inset-0 z-50",children:[T.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>S(null)}),T.jsx("div",{className:"relative z-10 overflow-y-auto overscroll-y-contain",children:T.jsx("div",{className:"min-h-screen flex items-center justify-center p-3 md:p-6",children:T.jsxs("div",{className:"glass-effect rounded-2xl w-full max-w-[420px] max-h-[80vh] overflow-y-auto",children:[T.jsxs("div",{className:"p-5 border-b border-white/10",children:[T.jsx("h4",{className:"text-2xl font-bold text-white",children:"Confirmar compra"}),T.jsxs("p",{className:"text-sm text-gray-200 mt-0.5",children:["Ests canjeando puntos por ",T.jsx("span",{className:"font-medium",children:b.name}),"."]})]}),T.jsxs("div",{className:"p-5",children:[T.jsxs("div",{className:"flex flex-col gap-4 items-start",children:[T.jsx("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-white/5 flex-shrink-0",children:b.imageUrl?T.jsx("img",{src:b.imageUrl,alt:b.name,className:"w-full h-full object-cover"}):null}),T.jsxs("div",{className:"w-full -mt-2",children:[T.jsx("div",{className:"text-base font-semibold text-white",children:b.name}),b.description?T.jsx("p",{className:"text-sm text-gray-300 mt-1",children:b.description}):null]}),T.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3 text-sm w-full",children:[T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Precio"}),T.jsxs("span",{className:"font-medium",children:[Number(b.price||0)," pts"]})]}),T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{className:"text-gray-400",children:"Saldo"}),T.jsxs("span",{className:"font-medium",children:[s," pts"]})]}),T.jsxs("div",{className:"col-span-2 flex items-center gap-3",children:[T.jsx("span",{className:"text-gray-400",children:"Cantidad"}),T.jsxs("div",{className:"inline-flex items-center rounded-full border border-boreal-aqua/40 overflow-hidden",children:[T.jsx("button",{type:"button",className:"px-2 py-1 text-white/80 hover:bg-white/10",onClick:()=>V(ne=>Math.max(1,Number(ne||1)-1)),children:T.jsx(WV,{className:"w-4 h-4"})}),T.jsx(br,{type:"number",min:"1",max:Number(b.stock||0),value:O,onChange:ne=>V(ne.target.value),className:"bg-transparent border-0 w-16 text-center focus-visible:ring-0"}),T.jsx("button",{type:"button",className:"px-2 py-1 text-white/80 hover:bg-white/10",onClick:()=>V(ne=>{const ye=Number(b.stock||0);return Math.min(ye||9999,Math.max(1,Number(ne||1)+1))}),children:T.jsx(GV,{className:"w-4 h-4"})})]}),T.jsxs("span",{className:"text-gray-400",children:["Stock: ",Number(b.stock||0)]})]})]})]}),(()=>{const ne=Number(b.stock||0),ye=Number(b.price||0),He=Math.max(1,Number(O||1)),bt=ye*He,Pt=He>ne,kr=bt>s;return T.jsxs("div",{className:"mt-4",children:[T.jsxs("div",{className:"flex justify-between text-sm",children:[T.jsx("span",{className:"text-gray-400",children:"Total"}),T.jsxs("span",{className:"font-semibold",children:[bt," pts"]})]}),(Pt||kr)&&T.jsxs("div",{className:"mt-2 flex items-center gap-2 text-amber-300 text-xs",children:[T.jsx(X3,{className:"w-4 h-4"}),T.jsxs("span",{children:[Pt?"Cantidad supera el stock disponible.":"",Pt&&kr?" ":"",kr?"No tienes puntos suficientes.":""]})]})]})})(),T.jsxs("div",{className:"mt-5 flex flex-col-reverse md:flex-row gap-2 justify-end",children:[T.jsx(Ut,{variant:"outline",className:"rounded-full border-white/30 text-white hover:bg-white/10 w-full md:w-auto",onClick:()=>S(null),children:"Cancelar"}),(()=>{const ne=Number(b.stock||0),ye=Number(b.price||0),He=Math.max(1,Number(O||1)),bt=ye*He,Pt=L||He>ne||bt>s;return T.jsx(Ut,{onClick:pe,disabled:Pt,className:"rounded-full w-full md:w-auto bg-gradient-to-r from-boreal-purple to-boreal-blue text-white font-bold",children:L?"Procesando...":`Confirmar (${bt} pts)`})})()]})]})]})})})]}),document.body),D&&ka.createPortal(T.jsxs("div",{className:"fixed inset-0 z-50",children:[T.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>ue(null)}),T.jsx("div",{className:"relative z-10 overflow-y-auto overscroll-y-contain",children:T.jsx("div",{className:"min-h-screen flex items-center justify-center p-3 md:p-6",children:T.jsxs("div",{className:"glass-effect rounded-2xl w-full max-w-[560px] max-h-[85vh] overflow-y-auto p-6 md:p-8 text-center",children:[T.jsx(Gh,{className:"w-14 h-14 text-boreal-aqua mx-auto mb-3"}),T.jsx("h4",{className:"text-2xl font-semibold mb-1",children:"Compra confirmada!"}),T.jsxs("p",{className:"text-gray-300",children:["Canjeaste ",T.jsx("span",{className:"font-medium",children:D.quantity})," x ",T.jsx("span",{className:"font-medium",children:D.name}),"."]}),T.jsxs("p",{className:"text-gray-300 mt-1",children:["Total: ",T.jsxs("span",{className:"font-semibold",children:[D.total," pts"]})]}),T.jsx("p",{className:"text-gray-300 mt-3 text-sm",children:"Para retirar tu artculo, presntate en horario de oficina y muestra el cdigo QR o el ID de compra."}),T.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 items-center",children:[D.imageUrl?T.jsx("div",{className:"rounded-xl overflow-hidden bg-white/5 mx-auto w-40 h-40 md:w-full md:aspect-square",children:T.jsx("img",{src:D.imageUrl,alt:D.name,className:"w-full h-full object-cover"})}):null,T.jsxs("div",{className:"flex flex-col items-center justify-center",children:[T.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"ID de compra"}),T.jsx("div",{className:"font-mono text-lg tracking-widest",children:D.id}),D.qrUrl&&T.jsx("img",{src:D.qrUrl,alt:"QR de compra",className:"mt-3 w-40 h-40 mx-auto"})]})]}),T.jsxs("div",{className:"mt-5 flex flex-col md:flex-row flex-wrap gap-2 justify-center",children:[T.jsx(Ut,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:()=>ue(null),children:"Cerrar"}),T.jsx(Ut,{className:"w-full md:w-auto",onClick:()=>{ue(null),typeof e=="function"&&e()},children:"Ver mis movimientos"}),T.jsx(Ut,{variant:"outline",className:"border-green-400 text-green-300 hover:bg-green-500/10",onClick:()=>window.open("https://wa.me/50576796164","_blank","noopener,noreferrer"),children:"Contactar por WhatsApp"})]})]})})})]}),document.body)]})},iH=({cert:n})=>{const e=f=>{if(!f)return"Fecha desconocida";try{return(f.toDate?f.toDate():new Date(f)).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}catch{return"Fecha invlida"}},t=()=>{n?.idValidacion&&window.open(`https://borealabs.org/validacion?id=${n.idValidacion}`,"_blank")},r=()=>Array.isArray(n?.urlPdf)&&n.urlPdf.length>0?n.urlPdf[0]?.downloadURL||n.urlPdf[0]?.url||null:typeof n?.urlPdf=="string"?n.urlPdf:n?.urlPdf?.downloadURL?n.urlPdf.downloadURL:n?.downloadURL?n.downloadURL:null,i=()=>mi?.getPlatform&&mi.getPlatform()!=="web"||typeof navigator>"u"?!1:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),o=f=>f.toString().replace(/[^a-zA-Z0-9-_\.]+/g,"_")+".pdf",s=(f,d)=>{try{const p=new URL(f);if(p.hostname.includes("firebasestorage.googleapis.com")){p.searchParams.set("alt","media"),p.searchParams.set("response-content-type","application/pdf");const g=`attachment; filename="${d}"`;p.searchParams.set("response-content-disposition",g)}return p.toString()}catch{return f}},a=async(f,d)=>{try{const p=await fetch(f,{mode:"cors"});if(!p.ok)throw new Error("HTTP "+p.status);const g=await p.blob(),y=URL.createObjectURL(g),E=document.createElement("a");return E.href=y,E.download=d,document.body.appendChild(E),E.click(),E.remove(),setTimeout(()=>URL.revokeObjectURL(y),2e3),!0}catch(p){return console.warn("Fallo descarga via fetch, se usar window.open:",p),!1}},u=async()=>{const f=r(),d=o(n?.nombreEvento||"certificado"),p=s(f,d);if(p)try{if(i()&&await a(p,d))return;window.open(p,"_blank","noopener")}catch{try{window.open(p,"_blank","noopener")}catch{const y=document.createElement("a");y.href=p,y.target="_blank",y.rel="noopener",y.download=d,document.body.appendChild(y),y.click(),y.remove()}}};return T.jsxs(kn.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"rounded-2xl p-6 glass-effect flex flex-col justify-between transition-all duration-300 hover:border-boreal-aqua/50",children:[T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[T.jsx(xA,{className:"w-8 h-8 text-boreal-aqua"}),T.jsx("h3",{className:"text-xl font-bold text-boreal-aqua truncate",children:n.nombreEvento||"Evento Desconocido"})]}),T.jsx("p",{className:"text-lg text-white mb-1",children:n.nombreUsuario||"Usuario Desconocido"}),T.jsxs("p",{className:"text-sm text-gray-300 mb-4",children:["Emitido: ",e(n.fechaEmision)]}),T.jsxs("p",{className:"text-xs text-gray-400 font-mono break-all",children:["ID: ",n.idValidacion||n.id]})]}),T.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[T.jsxs(Ut,{className:"w-full bg-gradient-to-r from-boreal-aqua to-boreal-blue text-boreal-dark font-bold hover:opacity-90",onClick:t,children:[T.jsx(xA,{className:"w-4 h-4 mr-2"}),"Validar"]}),T.jsxs(Ut,{variant:"outline",className:"w-full border-white/30 text-white hover:bg-white/10",onClick:u,disabled:!r(),children:[T.jsx(LV,{className:"w-4 h-4 mr-2"}),"Descargar PDF"]})]})]})},oH=({user:n,activeTab:e="certs",onNavigateTab:t})=>{const[r,i]=B.useState([]),[o,s]=B.useState(!0);B.useEffect(()=>{if(!n||!wt)return;s(!0);const u=vr(wt,"certificados"),f=[];n.email&&(f.push(Ki(u,su("userEmail","==",n.email))),f.push(Ki(u,su("correoUsuario","==",n.email))));const d=new Map;let p=0;const g=f.map(y=>Ds(y,E=>{E.forEach(A=>{d.set(A.id,{id:A.id,...A.data()})}),p+=1,i(Array.from(d.values())),p>=1&&s(!1)},E=>{console.error("Error al obtener certificados:",E),p+=1,p>=1&&s(!1)}));return()=>g.forEach(y=>y&&y())},[n]);const a=n.displayName||n.email.split("@")[0];return T.jsxs(kn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"max-w-7xl w-full mx-auto p-4 md:p-8",children:[T.jsx(Sp,{children:T.jsx("title",{children:"Boreal Wallet"})}),e==="certs"&&T.jsxs(T.Fragment,{children:[T.jsxs("h1",{className:"font-black tracking-tight mb-2 text-[40px] leading-[44px] sm:text-[60px] sm:leading-[60px]",children:[T.jsx("span",{className:"text-white",children:"Hola, "}),T.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-boreal-aqua to-boreal-blue",children:a})]}),T.jsx("p",{className:"text-gray-300 mb-6",children:"Aqu estn tus certificados y puntos de Boreal Labs."})]}),T.jsxs(lf,{mode:"wait",children:[e==="certs"&&o&&T.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400",children:[T.jsx(au,{className:"w-12 h-12 mb-4 animate-spin"}),T.jsx("p",{children:"Buscando tus certificados..."})]}),e==="certs"&&!o&&r.length===0&&T.jsxs("div",{className:"flex flex-col items-center justify-center h-64 rounded-2xl glass-effect p-8",children:[T.jsx(X3,{className:"w-16 h-16 text-boreal-purple mb-4"}),T.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No se encontraron certificados"}),T.jsxs("p",{className:"text-gray-300 text-center max-w-md",children:["No pudimos encontrar certificados asociados a la cuenta ",T.jsx("span",{className:"font-medium text-white",children:n.email}),"."]})]}),e==="certs"&&!o&&r.length>0&&T.jsx(kn.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(u=>T.jsx(iH,{cert:u},u.id))},"certs"),e==="points"&&T.jsx(kn.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"mt-4",children:T.jsx(qz,{user:n})},"points"),e==="market"&&T.jsx(kn.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"mt-4",children:T.jsx(rH,{user:n,onViewMovements:()=>t&&t("points")})},"market")]})]})},sH="/assets/favicon-f169e2d8-C2gxQMFy.png";function Rr(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function Sb(n,e=[]){let t=[];function r(o,s){const a=B.createContext(s),u=t.length;t=[...t,s];const f=p=>{const{scope:g,children:y,...E}=p,A=g?.[n]?.[u]||a,I=B.useMemo(()=>E,Object.values(E));return T.jsx(A.Provider,{value:I,children:y})};f.displayName=o+"Provider";function d(p,g){const y=g?.[n]?.[u]||a,E=B.useContext(y);if(E)return E;if(s!==void 0)return s;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[f,d]}const i=()=>{const o=t.map(s=>B.createContext(s));return function(a){const u=a?.[n]||o;return B.useMemo(()=>({[`__scope${n}`]:{...a,[n]:u}}),[a,u])}};return i.scopeName=n,[r,aH(i,...e)]}function aH(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:u,scopeName:f})=>{const p=u(o)[`__scope${f}`];return{...a,...p}},{});return B.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return t.scopeName=e.scopeName,t}function lH(n){const e=n+"CollectionProvider",[t,r]=Sb(e),[i,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),s=A=>{const{scope:I,children:N}=A,R=xn.useRef(null),k=xn.useRef(new Map).current;return T.jsx(i,{scope:I,itemMap:k,collectionRef:R,children:N})};s.displayName=e;const a=n+"CollectionSlot",u=Tp(a),f=xn.forwardRef((A,I)=>{const{scope:N,children:R}=A,k=o(a,N),j=Da(I,k.collectionRef);return T.jsx(u,{ref:j,children:R})});f.displayName=a;const d=n+"CollectionItemSlot",p="data-radix-collection-item",g=Tp(d),y=xn.forwardRef((A,I)=>{const{scope:N,children:R,...k}=A,j=xn.useRef(null),H=Da(I,j),$=o(d,N);return xn.useEffect(()=>($.itemMap.set(j,{ref:j,...k}),()=>void $.itemMap.delete(j))),T.jsx(g,{[p]:"",ref:H,children:R})});y.displayName=d;function E(A){const I=o(n+"CollectionConsumer",A);return xn.useCallback(()=>{const R=I.collectionRef.current;if(!R)return[];const k=Array.from(R.querySelectorAll(`[${p}]`));return Array.from(I.itemMap.values()).sort(($,b)=>k.indexOf($.ref.current)-k.indexOf(b.ref.current))},[I.collectionRef,I.itemMap])}return[{Provider:s,Slot:f,ItemSlot:y},E,r]}var uH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Yi=uH.reduce((n,e)=>{const t=Tp(`Primitive.${e}`),r=B.forwardRef((i,o)=>{const{asChild:s,...a}=i,u=s?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),T.jsx(u,{...a,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function bb(n,e){n&&ka.flushSync(()=>n.dispatchEvent(e))}function Ma(n){const e=B.useRef(n);return B.useEffect(()=>{e.current=n}),B.useMemo(()=>(...t)=>e.current?.(...t),[])}function cH(n,e=globalThis?.document){const t=Ma(n);B.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var fH="DismissableLayer",Jg="dismissableLayer.update",dH="dismissableLayer.pointerDownOutside",hH="dismissableLayer.focusOutside",vT,Pb=B.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Rb=B.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...u}=n,f=B.useContext(Pb),[d,p]=B.useState(null),g=d?.ownerDocument??globalThis?.document,[,y]=B.useState({}),E=Da(e,b=>p(b)),A=Array.from(f.layers),[I]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),N=A.indexOf(I),R=d?A.indexOf(d):-1,k=f.layersWithOutsidePointerEventsDisabled.size>0,j=R>=N,H=mH(b=>{const S=b.target,O=[...f.branches].some(V=>V.contains(S));!j||O||(i?.(b),s?.(b),b.defaultPrevented||a?.())},g),$=gH(b=>{const S=b.target;[...f.branches].some(V=>V.contains(S))||(o?.(b),s?.(b),b.defaultPrevented||a?.())},g);return cH(b=>{R===f.layers.size-1&&(r?.(b),!b.defaultPrevented&&a&&(b.preventDefault(),a()))},g),B.useEffect(()=>{if(d)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(vT=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(d)),f.layers.add(d),yT(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=vT)}},[d,g,t,f]),B.useEffect(()=>()=>{d&&(f.layers.delete(d),f.layersWithOutsidePointerEventsDisabled.delete(d),yT())},[d,f]),B.useEffect(()=>{const b=()=>y({});return document.addEventListener(Jg,b),()=>document.removeEventListener(Jg,b)},[]),T.jsx(Yi.div,{...u,ref:E,style:{pointerEvents:k?j?"auto":"none":void 0,...n.style},onFocusCapture:Rr(n.onFocusCapture,$.onFocusCapture),onBlurCapture:Rr(n.onBlurCapture,$.onBlurCapture),onPointerDownCapture:Rr(n.onPointerDownCapture,H.onPointerDownCapture)})});Rb.displayName=fH;var pH="DismissableLayerBranch",Nb=B.forwardRef((n,e)=>{const t=B.useContext(Pb),r=B.useRef(null),i=Da(e,r);return B.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),T.jsx(Yi.div,{...n,ref:i})});Nb.displayName=pH;function mH(n,e=globalThis?.document){const t=Ma(n),r=B.useRef(!1),i=B.useRef(()=>{});return B.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let u=function(){Ob(dH,t,f,{discrete:!0})};const f={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function gH(n,e=globalThis?.document){const t=Ma(n),r=B.useRef(!1);return B.useEffect(()=>{const i=o=>{o.target&&!r.current&&Ob(hH,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function yT(){const n=new CustomEvent(Jg);document.dispatchEvent(n)}function Ob(n,e,t,{discrete:r}){const i=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?bb(i,o):i.dispatchEvent(o)}var vH=Rb,yH=Nb,Cf=globalThis?.document?B.useLayoutEffect:()=>{},wH="Portal",Db=B.forwardRef((n,e)=>{const{container:t,...r}=n,[i,o]=B.useState(!1);Cf(()=>o(!0),[]);const s=t||i&&globalThis?.document?.body;return s?KF.createPortal(T.jsx(Yi.div,{...r,ref:e}),s):null});Db.displayName=wH;function _H(n,e){return B.useReducer((t,r)=>e[t][r]??t,n)}var kb=n=>{const{present:e,children:t}=n,r=xH(e),i=typeof t=="function"?t({present:r.isPresent}):B.Children.only(t),o=Da(r.ref,EH(i));return typeof t=="function"||r.isPresent?B.cloneElement(i,{ref:o}):null};kb.displayName="Presence";function xH(n){const[e,t]=B.useState(),r=B.useRef(null),i=B.useRef(n),o=B.useRef("none"),s=n?"mounted":"unmounted",[a,u]=_H(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return B.useEffect(()=>{const f=bh(r.current);o.current=a==="mounted"?f:"none"},[a]),Cf(()=>{const f=r.current,d=i.current;if(d!==n){const g=o.current,y=bh(f);n?u("MOUNT"):y==="none"||f?.display==="none"?u("UNMOUNT"):u(d&&g!==y?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,u]),Cf(()=>{if(e){let f;const d=e.ownerDocument.defaultView??window,p=y=>{const A=bh(r.current).includes(CSS.escape(y.animationName));if(y.target===e&&A&&(u("ANIMATION_END"),!i.current)){const I=e.style.animationFillMode;e.style.animationFillMode="forwards",f=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=I)})}},g=y=>{y.target===e&&(o.current=bh(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{d.clearTimeout(f),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:B.useCallback(f=>{r.current=f?getComputedStyle(f):null,t(f)},[])}}function bh(n){return n?.animationName||"none"}function EH(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var AH=g4[" useInsertionEffect ".trim().toString()]||Cf;function TH({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,o,s]=CH({defaultProp:e,onChange:t}),a=n!==void 0,u=a?n:i;{const d=B.useRef(n!==void 0);B.useEffect(()=>{const p=d.current;p!==a&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const f=B.useCallback(d=>{if(a){const p=IH(d)?d(n):d;p!==n&&s.current?.(p)}else o(d)},[a,n,o,s]);return[u,f]}function CH({defaultProp:n,onChange:e}){const[t,r]=B.useState(n),i=B.useRef(t),o=B.useRef(e);return AH(()=>{o.current=e},[e]),B.useEffect(()=>{i.current!==t&&(o.current?.(t),i.current=t)},[t,i]),[t,r,o]}function IH(n){return typeof n=="function"}var SH=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),bH="VisuallyHidden",Ky=B.forwardRef((n,e)=>T.jsx(Yi.span,{...n,ref:e,style:{...SH,...n.style}}));Ky.displayName=bH;var Xy="ToastProvider",[Yy,PH,RH]=lH("Toast"),[Mb]=Sb("Toast",[RH]),[NH,p0]=Mb(Xy),Lb=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:s}=n,[a,u]=B.useState(null),[f,d]=B.useState(0),p=B.useRef(!1),g=B.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Xy}\`. Expected non-empty \`string\`.`),T.jsx(Yy.Provider,{scope:e,children:T.jsx(NH,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:f,viewport:a,onViewportChange:u,onToastAdd:B.useCallback(()=>d(y=>y+1),[]),onToastRemove:B.useCallback(()=>d(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:g,children:s})})};Lb.displayName=Xy;var Vb="ToastViewport",OH=["F8"],ev="toast.viewportPause",tv="toast.viewportResume",Fb=B.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=OH,label:i="Notifications ({hotkey})",...o}=n,s=p0(Vb,t),a=PH(t),u=B.useRef(null),f=B.useRef(null),d=B.useRef(null),p=B.useRef(null),g=Da(e,p,s.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=s.toastCount>0;B.useEffect(()=>{const I=N=>{r.length!==0&&r.every(k=>N[k]||N.code===k)&&p.current?.focus()};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[r]),B.useEffect(()=>{const I=u.current,N=p.current;if(E&&I&&N){const R=()=>{if(!s.isClosePausedRef.current){const $=new CustomEvent(ev);N.dispatchEvent($),s.isClosePausedRef.current=!0}},k=()=>{if(s.isClosePausedRef.current){const $=new CustomEvent(tv);N.dispatchEvent($),s.isClosePausedRef.current=!1}},j=$=>{!I.contains($.relatedTarget)&&k()},H=()=>{I.contains(document.activeElement)||k()};return I.addEventListener("focusin",R),I.addEventListener("focusout",j),I.addEventListener("pointermove",R),I.addEventListener("pointerleave",H),window.addEventListener("blur",R),window.addEventListener("focus",k),()=>{I.removeEventListener("focusin",R),I.removeEventListener("focusout",j),I.removeEventListener("pointermove",R),I.removeEventListener("pointerleave",H),window.removeEventListener("blur",R),window.removeEventListener("focus",k)}}},[E,s.isClosePausedRef]);const A=B.useCallback(({tabbingDirection:I})=>{const R=a().map(k=>{const j=k.ref.current,H=[j,...$H(j)];return I==="forwards"?H:H.reverse()});return(I==="forwards"?R.reverse():R).flat()},[a]);return B.useEffect(()=>{const I=p.current;if(I){const N=R=>{const k=R.altKey||R.ctrlKey||R.metaKey;if(R.key==="Tab"&&!k){const H=document.activeElement,$=R.shiftKey;if(R.target===I&&$){f.current?.focus();return}const O=A({tabbingDirection:$?"backwards":"forwards"}),V=O.findIndex(L=>L===H);Fm(O.slice(V+1))?R.preventDefault():$?f.current?.focus():d.current?.focus()}};return I.addEventListener("keydown",N),()=>I.removeEventListener("keydown",N)}},[a,A]),T.jsxs(yH,{ref:u,role:"region","aria-label":i.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&T.jsx(nv,{ref:f,onFocusFromOutsideViewport:()=>{const I=A({tabbingDirection:"forwards"});Fm(I)}}),T.jsx(Yy.Slot,{scope:t,children:T.jsx(Yi.ol,{tabIndex:-1,...o,ref:g})}),E&&T.jsx(nv,{ref:d,onFocusFromOutsideViewport:()=>{const I=A({tabbingDirection:"backwards"});Fm(I)}})]})});Fb.displayName=Vb;var Bb="ToastFocusProxy",nv=B.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,o=p0(Bb,t);return T.jsx(Ky,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:s=>{const a=s.relatedTarget;!o.viewport?.contains(a)&&r()}})});nv.displayName=Bb;var qf="Toast",DH="toast.swipeStart",kH="toast.swipeMove",MH="toast.swipeCancel",LH="toast.swipeEnd",Ub=B.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:o,...s}=n,[a,u]=TH({prop:r,defaultProp:i??!0,onChange:o,caller:qf});return T.jsx(kb,{present:t||a,children:T.jsx(BH,{open:a,...s,ref:e,onClose:()=>u(!1),onPause:Ma(n.onPause),onResume:Ma(n.onResume),onSwipeStart:Rr(n.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Rr(n.onSwipeMove,f=>{const{x:d,y:p}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:Rr(n.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Rr(n.onSwipeEnd,f=>{const{x:d,y:p}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),u(!1)})})})});Ub.displayName=qf;var[VH,FH]=Mb(qf,{onClose(){}}),BH=B.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:o,onClose:s,onEscapeKeyDown:a,onPause:u,onResume:f,onSwipeStart:d,onSwipeMove:p,onSwipeCancel:g,onSwipeEnd:y,...E}=n,A=p0(qf,t),[I,N]=B.useState(null),R=Da(e,ue=>N(ue)),k=B.useRef(null),j=B.useRef(null),H=i||A.duration,$=B.useRef(0),b=B.useRef(H),S=B.useRef(0),{onToastAdd:O,onToastRemove:V}=A,L=Ma(()=>{I?.contains(document.activeElement)&&A.viewport?.focus(),s()}),U=B.useCallback(ue=>{!ue||ue===1/0||(window.clearTimeout(S.current),$.current=new Date().getTime(),S.current=window.setTimeout(L,ue))},[L]);B.useEffect(()=>{const ue=A.viewport;if(ue){const le=()=>{U(b.current),f?.()},Ue=()=>{const Ie=new Date().getTime()-$.current;b.current=b.current-Ie,window.clearTimeout(S.current),u?.()};return ue.addEventListener(ev,Ue),ue.addEventListener(tv,le),()=>{ue.removeEventListener(ev,Ue),ue.removeEventListener(tv,le)}}},[A.viewport,H,u,f,U]),B.useEffect(()=>{o&&!A.isClosePausedRef.current&&U(H)},[o,H,A.isClosePausedRef,U]),B.useEffect(()=>(O(),()=>V()),[O,V]);const D=B.useMemo(()=>I?qb(I):null,[I]);return A.viewport?T.jsxs(T.Fragment,{children:[D&&T.jsx(UH,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:D}),T.jsx(VH,{scope:t,onClose:L,children:ka.createPortal(T.jsx(Yy.ItemSlot,{scope:t,children:T.jsx(vH,{asChild:!0,onEscapeKeyDown:Rr(a,()=>{A.isFocusedToastEscapeKeyDownRef.current||L(),A.isFocusedToastEscapeKeyDownRef.current=!1}),children:T.jsx(Yi.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":A.swipeDirection,...E,ref:R,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Rr(n.onKeyDown,ue=>{ue.key==="Escape"&&(a?.(ue.nativeEvent),ue.nativeEvent.defaultPrevented||(A.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:Rr(n.onPointerDown,ue=>{ue.button===0&&(k.current={x:ue.clientX,y:ue.clientY})}),onPointerMove:Rr(n.onPointerMove,ue=>{if(!k.current)return;const le=ue.clientX-k.current.x,Ue=ue.clientY-k.current.y,Ie=!!j.current,Z=["left","right"].includes(A.swipeDirection),ve=["left","up"].includes(A.swipeDirection)?Math.min:Math.max,pe=Z?ve(0,le):0,q=Z?0:ve(0,Ue),ie=ue.pointerType==="touch"?10:2,Ee={x:pe,y:q},Pe={originalEvent:ue,delta:Ee};Ie?(j.current=Ee,Ph(kH,p,Pe,{discrete:!1})):wT(Ee,A.swipeDirection,ie)?(j.current=Ee,Ph(DH,d,Pe,{discrete:!1}),ue.target.setPointerCapture(ue.pointerId)):(Math.abs(le)>ie||Math.abs(Ue)>ie)&&(k.current=null)}),onPointerUp:Rr(n.onPointerUp,ue=>{const le=j.current,Ue=ue.target;if(Ue.hasPointerCapture(ue.pointerId)&&Ue.releasePointerCapture(ue.pointerId),j.current=null,k.current=null,le){const Ie=ue.currentTarget,Z={originalEvent:ue,delta:le};wT(le,A.swipeDirection,A.swipeThreshold)?Ph(LH,y,Z,{discrete:!0}):Ph(MH,g,Z,{discrete:!0}),Ie.addEventListener("click",ve=>ve.preventDefault(),{once:!0})}})})})}),A.viewport)})]}):null}),UH=n=>{const{__scopeToast:e,children:t,...r}=n,i=p0(qf,e),[o,s]=B.useState(!1),[a,u]=B.useState(!1);return HH(()=>s(!0)),B.useEffect(()=>{const f=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(f)},[]),a?null:T.jsx(Db,{asChild:!0,children:T.jsx(Ky,{...r,children:o&&T.jsxs(T.Fragment,{children:[i.label," ",t]})})})},jH="ToastTitle",jb=B.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return T.jsx(Yi.div,{...r,ref:e})});jb.displayName=jH;var zH="ToastDescription",zb=B.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return T.jsx(Yi.div,{...r,ref:e})});zb.displayName=zH;var Hb="ToastAction",Wb=B.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?T.jsx(Gb,{altText:t,asChild:!0,children:T.jsx(Qy,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Hb}\`. Expected non-empty \`string\`.`),null)});Wb.displayName=Hb;var $b="ToastClose",Qy=B.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=FH($b,t);return T.jsx(Gb,{asChild:!0,children:T.jsx(Yi.button,{type:"button",...r,ref:e,onClick:Rr(n.onClick,i.onClose)})})});Qy.displayName=$b;var Gb=B.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return T.jsx(Yi.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function qb(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),WH(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const s=r.dataset.radixToastAnnounceAlt;s&&e.push(s)}else e.push(...qb(r))}}),e}function Ph(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,o=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?bb(i,o):i.dispatchEvent(o)}var wT=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),o=r>i;return e==="left"||e==="right"?o&&r>t:!o&&i>t};function HH(n=()=>{}){const e=Ma(n);Cf(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function WH(n){return n.nodeType===n.ELEMENT_NODE}function $H(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Fm(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var GH=Lb,Kb=Fb,Xb=Ub,Yb=jb,Qb=zb,Zb=Wb,Jb=Qy;const qH=GH,eP=B.forwardRef(({className:n,...e},t)=>T.jsx(Kb,{ref:t,className:Vs("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));eP.displayName=Kb.displayName;const KH=eb("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),tP=B.forwardRef(({className:n,variant:e,...t},r)=>T.jsx(Xb,{ref:r,className:Vs(KH({variant:e}),n),...t}));tP.displayName=Xb.displayName;const XH=B.forwardRef(({className:n,...e},t)=>T.jsx(Zb,{ref:t,className:Vs("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));XH.displayName=Zb.displayName;const nP=B.forwardRef(({className:n,...e},t)=>T.jsx(Jb,{ref:t,className:Vs("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:T.jsx(Y3,{className:"h-4 w-4"})}));nP.displayName=Jb.displayName;const rP=B.forwardRef(({className:n,...e},t)=>T.jsx(Yb,{ref:t,className:Vs("text-sm font-semibold",n),...e}));rP.displayName=Yb.displayName;const iP=B.forwardRef(({className:n,...e},t)=>T.jsx(Qb,{ref:t,className:Vs("text-sm opacity-90",n),...e}));iP.displayName=Qb.displayName;function YH(){const{toasts:n}=c0();return T.jsxs(qH,{children:[n.map(function({id:e,title:t,description:r,action:i,...o}){return T.jsxs(tP,{...o,children:[T.jsxs("div",{className:"grid gap-1",children:[t&&T.jsx(rP,{children:t}),r&&T.jsx(iP,{children:r})]}),i,T.jsx(nP,{})]},e)}),T.jsx(eP,{})]})}let Pl=null,rf=!1;const oP="blw_sound_enabled";function QH(){if(typeof window>"u")return null;if(!Pl){const n=window.AudioContext||window.webkitAudioContext;if(!n)return null;Pl=new n}return Pl&&Pl.state==="suspended"&&Pl.resume().catch(n=>{console.debug("No se pudo reanudar AudioContext (iOS/auto):",n?.message||n)}),Pl}function ZH(n){rf=!!n;try{localStorage.setItem(oP,rf?"1":"0")}catch(e){console.debug("No se pudo persistir preferencia de sonido:",e?.message||e)}}function JH(){try{const n=localStorage.getItem(oP);n==="1"?rf=!0:n==="0"&&(rf=!1)}catch(n){console.debug("No se pudo leer preferencia de sonido:",n?.message||n)}return rf}function eW(){QH()}const tW=B.createContext(null),_T="blw_theme";function nW({children:n}){const[e,t]=B.useState("dark"),[r,i]=B.useState(!1);B.useEffect(()=>{try{const s=localStorage.getItem(_T);(s==="light"||s==="dark")&&t(s)}catch(s){console.debug("No se pudo leer configuracin de tema desde localStorage:",s?.message||s)}i(JH())},[]),B.useEffect(()=>{const s=document.documentElement;e==="dark"?s.classList.add("dark"):s.classList.remove("dark");try{localStorage.setItem(_T,e)}catch(a){console.debug("No se pudo guardar configuracin de tema en localStorage:",a?.message||a)}},[e]),B.useEffect(()=>{ZH(r)},[r]);const o=B.useMemo(()=>({theme:e,setTheme:t,toggleTheme:()=>t(s=>s==="dark"?"light":"dark"),soundsEnabled:r,setSoundsEnabled:i,toggleSounds:()=>i(s=>!s),primeSound:eW}),[e,r]);return T.jsx(tW.Provider,{value:o,children:n})}const rW=()=>T.jsxs("div",{className:"w-full flex justify-center",children:[T.jsx(Sp,{children:T.jsx("title",{children:"Poltica de Privacidad - Boreal Wallet"})}),T.jsxs("div",{className:"max-w-3xl w-full mx-auto p-4 md:p-8",children:[T.jsxs("header",{className:"mb-6",children:[T.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight",children:T.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-boreal-aqua to-boreal-blue",children:"Poltica de Privacidad"})}),T.jsx("p",{className:"text-gray-400 mt-1",children:"Fecha de entrada en vigor: 25 de octubre de 2025"})]}),T.jsx("section",{className:"glass-effect rounded-2xl border border-white/10 bg-[#0a1836]/90 backdrop-blur p-5 sm:p-7",children:T.jsxs("div",{className:"max-w-none text-gray-300 leading-relaxed",style:{textAlign:"justify"},children:[T.jsx("p",{className:"mb-4",children:'Boreal Labs ("nosotros", "nuestro") opera la aplicacin mvil Boreal Wallet (la "Aplicacin"). Esta pgina le informa sobre nuestras polticas con respecto a la recopilacin, uso y divulgacin de datos personales cuando utiliza nuestra Aplicacin.'}),T.jsx("p",{className:"mb-4",children:"Al utilizar la Aplicacin, usted acepta la recopilacin y el uso de informacin de acuerdo con esta poltica."}),T.jsx("h3",{className:"text-white text-xl font-semibold mt-6 mb-3",children:"1. Informacin que Recopilamos"}),T.jsx("p",{className:"mb-4",children:"Recopilamos la informacin estrictamente necesaria para el funcionamiento de la Aplicacin."}),T.jsx("p",{className:"mb-2",children:T.jsx("strong",{children:"Datos Proporcionados por el Usuario (Datos Personales):"})}),T.jsxs("ul",{className:"list-disc ml-6 mb-4 space-y-2",children:[T.jsxs("li",{children:[T.jsx("strong",{children:"Direccin de Correo Electrnico:"})," Requerimos su direccin de correo electrnico para la autenticacin (inicio de sesin) y para usarla como identificador nico para buscar y mostrarle los certificados que le pertenecen."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Nombre de Usuario:"})," Podemos obtener su nombre a travs de su proveedor de inicio de sesin (como Google Sign-In) o de los datos asociados a sus certificados para personalizar su experiencia."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Credenciales de Autenticacin:"})," Cuando utiliza el inicio de sesin con correo y contrasea, nuestro proveedor (Firebase Authentication) gestiona esta credencial de forma segura. Nosotros no tenemos acceso a su contrasea en texto plano."]})]}),T.jsx("h3",{className:"text-white text-xl font-semibold mt-6 mb-3",children:"2. Cmo Usamos su Informacin"}),T.jsx("p",{className:"mb-2",children:"Utilizamos los datos que recopilamos con los siguientes propsitos:"}),T.jsxs("ul",{className:"list-disc ml-6 mb-4 space-y-2",children:[T.jsxs("li",{children:[T.jsx("strong",{children:"Para proveer y mantener la Aplicacin:"})," El uso principal de su correo electrnico es autenticar su identidad y permitirle acceder a su cuenta."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Para mostrar sus certificados:"})," Una vez autenticado, usamos su direccin de correo electrnico para realizar una consulta segura en nuestra base de datos (Firestore) y recuperar nicamente los certificados que estn asociados a esa direccin."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Para comunicarnos con usted:"})," Ocasionalmente, podemos usar su correo electrnico para enviarle notificaciones importantes sobre su cuenta o cambios en el servicio (no utilizamos su correo para marketing)."]})]}),T.jsx("h3",{className:"text-white text-xl font-semibold mt-6 mb-3",children:"3. Con Quin Compartimos su Informacin"}),T.jsx("p",{className:"mb-4",children:T.jsx("strong",{children:"No vendemos, alquilamos ni compartimos su informacin personal con terceros con fines de marketing."})}),T.jsx("p",{className:"mb-2",children:"Solo compartimos informacin con los siguientes proveedores de servicios que son esenciales para el funcionamiento de la Aplicacin:"}),T.jsx("ul",{className:"list-disc ml-6 mb-4 space-y-2",children:T.jsxs("li",{children:[T.jsx("strong",{children:"Google Firebase:"})," Boreal Wallet est construida sobre la plataforma Firebase de Google. Utilizamos sus servicios para:",T.jsxs("ul",{className:"list-disc ml-6 mt-2 space-y-2",children:[T.jsxs("li",{children:[T.jsx("strong",{children:"Firebase Authentication:"})," Para gestionar de forma segura todo el proceso de inicio de sesin (Email/Contrasea y Google Sign-In)."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Firestore (Base de Datos):"})," Para almacenar de forma segura la informacin de los certificados y sus datos de usuario asociados (como su correo electrnico)."]})]}),"Google acta como nuestro procesador de datos y est obligado por sus propias polticas de privacidad a proteger su informacin."]})}),T.jsx("h3",{className:"text-white text-xl font-semibold mt-6 mb-3",children:"4. Seguridad de los Datos"}),T.jsx("p",{className:"mb-4",children:"La seguridad de sus datos es importante para nosotros. Utilizamos medidas de seguridad estndar de la industria, incluyendo la transmisin de datos cifrados (HTTPS) y las reglas de seguridad de Firestore, para proteger su informacin contra el acceso, alteracin o divulgacin no autorizados."}),T.jsx("h3",{className:"text-white text-xl font-semibold mt-6 mb-3",children:"5. Privacidad de los Nios"}),T.jsxs("p",{className:"mb-4",children:["Nuestra Aplicacin ",T.jsx("strong",{children:"no est dirigida a ninguna persona menor de 13 aos"}),' ("Nios").']}),T.jsx("p",{className:"mb-4",children:"No recopilamos intencionadamente informacin de identificacin personal de nios menores de 13 aos. Si usted es padre o tutor y sabe que su hijo nos ha proporcionado datos personales, contctenos. Si descubrimos que hemos recopilado datos personales de un nio menor de 13 aos sin verificacin del consentimiento de los padres, tomaremos medidas para eliminar esa informacin de nuestros servidores."}),T.jsx("h3",{className:"text-white text-xl font-semibold mt-6 mb-3",children:"6. Retencin y Eliminacin de Datos"}),T.jsx("p",{className:"mb-4",children:"Retenemos su informacin personal mientras mantenga una cuenta activa en Boreal Wallet."}),T.jsxs("p",{className:"mb-4",children:["Si desea eliminar su cuenta y todos sus datos personales asociados, puede solicitarlo en cualquier momento envindonos un correo electrnico a",T.jsx("code",{className:"text-boreal-aqua mx-1",children:"contacto@borealabs.org"}),". Procesaremos su solicitud y eliminaremos sus datos de nuestros sistemas."]}),T.jsx("h3",{className:"text-white text-xl font-semibold mt-6 mb-3",children:"7. Cambios a esta Poltica de Privacidad"}),T.jsx("p",{className:"mb-4",children:"Podemos actualizar nuestra Poltica de Privacidad peridicamente. Le notificaremos cualquier cambio publicando la nueva Poltica de Privacidad en esta pgina. Se le aconseja revisar esta Poltica de Privacidad peridicamente para detectar cualquier cambio."}),T.jsx("h3",{className:"text-white text-xl font-semibold mt-6 mb-3",children:"8. Contacto"}),T.jsxs("p",{className:"mb-2",children:["Si tiene alguna pregunta sobre esta Poltica de Privacidad, por favor contctenos en:",T.jsx("br",{}),T.jsx("code",{className:"text-boreal-aqua",children:"contacto@borealabs.org"})]})]})})]})]});function iW(){const[n,e]=B.useState(null),[t,r]=B.useState(!1),[i,o]=B.useState("certs"),s=mi.getPlatform()==="web",u=(typeof window<"u"?window.location.pathname:"/")==="/privacy";return B.useEffect(()=>{(async()=>{try{await wx.setStyle({style:Bm.Dark}),mi.getPlatform()!=="web"&&await wx.hide()}catch(d){console.debug("StatusBar plugin no disponible (web):",d?.message||d)}try{await k4.hide()}catch(d){console.debug("SplashScreen plugin no disponible (web):",d?.message||d)}})()},[]),B.useEffect(()=>{if(!xa||!Vi){r(!0);return}try{const f=$5(Vi,d=>{e(d),r(!0)});return()=>f()}catch(f){console.error("No se pudo suscribir a onAuthStateChanged:",f),r(!0)}},[]),T.jsx(nW,{children:T.jsx(RT,{children:T.jsxs("div",{className:"bg-boreal-dark text-white min-h-screen w-full flex flex-col overflow-x-hidden",style:{fontFamily:"'Montserrat', sans-serif"},children:[T.jsxs(Sp,{children:[T.jsx("title",{children:"Boreal Wallet"}),T.jsx("link",{rel:"icon",type:"image/png",href:sH}),T.jsx("style",{children:`
            :root {
              --boreal-dark: #010b1d;
              --boreal-aqua: #69e6af;
              --boreal-purple: #be58f0;
              --boreal-blue: #3162ed;
            }
          `})]}),!u&&n&&T.jsx(QV,{user:n,activeTab:i,onNavigate:f=>o(f)}),!u&&n&&T.jsx("div",{className:"h-16 md:h-20"}),T.jsx("main",{className:"flex-grow flex flex-col items-center w-full",children:u?T.jsx(rW,{}):T.jsxs(lf,{mode:"wait",children:[!xa&&T.jsx(kn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-grow flex items-center justify-center p-6",children:T.jsxs("div",{className:"max-w-lg text-center space-y-3",children:[T.jsx("h2",{className:"text-xl font-bold",children:"Configura Firebase"}),T.jsxs("p",{className:"text-white/80",children:["Faltan variables de entorno. Crea un archivo ",T.jsx("code",{children:".env"})," en la raz con las claves",T.jsx("code",{children:" VITE_FIREBASE_API_KEY, VITE_FIREBASE_AUTH_DOMAIN, VITE_FIREBASE_PROJECT_ID, VITE_FIREBASE_STORAGE_BUCKET, VITE_FIREBASE_MESSAGING_SENDER_ID, VITE_FIREBASE_APP_ID"}),"."]}),T.jsx("p",{className:"text-white/60",children:"Tras guardarlo, reinicia el servidor de desarrollo."})]})},"config-warning"),!t&&T.jsx(kn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-grow flex items-center justify-center",children:T.jsx(au,{className:"w-12 h-12 text-boreal-aqua animate-spin"})},"loader"),t&&xa&&!n&&T.jsx(kn.div,{initial:{opacity:0,y:24,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-16,scale:.98},transition:{duration:.25,ease:"easeOut"},className:"w-full h-full flex",children:T.jsx(qF,{})},"login"),t&&xa&&n&&T.jsx(kn.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},exit:{opacity:0,y:16},transition:{duration:.2,ease:"easeOut"},className:"w-full h-full flex",children:T.jsx(oH,{user:n,activeTab:i})},"wallet")]})}),!u&&n&&s&&T.jsx(ZV,{}),T.jsx(YH,{})]})})})}E4.createRoot(document.getElementById("root")).render(T.jsx(xn.StrictMode,{children:T.jsx(iW,{})}));export{f5 as A,wW as B,AM as C,yM as D,La as E,fs as F,ds as G,NW as H,RW as I,D5 as J,Ao as K,AW as L,rE as M,aM as N,Vh as O,AA as P,tS as Q,SW as R,X5 as S,hs as T,ET as W,dW as a,fW as b,hW as c,IW as d,OW as e,vW as f,c9 as g,Fi as h,mW as i,CW as j,cW as k,PW as l,pW as m,EA as n,TW as o,aW as p,uW as q,Bk as r,yW as s,M5 as t,gW as u,bW as v,lW as w,xW as x,EW as y,_W as z};
