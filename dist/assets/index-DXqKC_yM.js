function ob(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function Qu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var s1={exports:{}},oc={},a1={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx;function sb(){if(Sx)return Xe;Sx=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function v(q){return q===null||typeof q!="object"?null:(q=p&&q[p]||q["@@iterator"],typeof q=="function"?q:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,A={};function T(q,oe,xe){this.props=q,this.context=oe,this.refs=A,this.updater=xe||y}T.prototype.isReactComponent={},T.prototype.setState=function(q,oe){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,oe,"setState")},T.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function N(){}N.prototype=T.prototype;function P(q,oe,xe){this.props=q,this.context=oe,this.refs=A,this.updater=xe||y}var M=P.prototype=new N;M.constructor=P,E(M,T.prototype),M.isPureReactComponent=!0;var j=Array.isArray,H=Object.prototype.hasOwnProperty,W={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(q,oe,xe){var Ie,Ge={},We=null,ke=null;if(oe!=null)for(Ie in oe.ref!==void 0&&(ke=oe.ref),oe.key!==void 0&&(We=""+oe.key),oe)H.call(oe,Ie)&&!R.hasOwnProperty(Ie)&&(Ge[Ie]=oe[Ie]);var Ke=arguments.length-2;if(Ke===1)Ge.children=xe;else if(1<Ke){for(var ie=Array(Ke),be=0;be<Ke;be++)ie[be]=arguments[be+2];Ge.children=ie}if(q&&q.defaultProps)for(Ie in Ke=q.defaultProps,Ke)Ge[Ie]===void 0&&(Ge[Ie]=Ke[Ie]);return{$$typeof:n,type:q,key:We,ref:ke,props:Ge,_owner:W.current}}function D(q,oe){return{$$typeof:n,type:q.type,key:oe,ref:q.ref,props:q.props,_owner:q._owner}}function O(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function F(q){var oe={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(xe){return oe[xe]})}var U=/\/+/g;function V(q,oe){return typeof q=="object"&&q!==null&&q.key!=null?F(""+q.key):oe.toString(36)}function te(q,oe,xe,Ie,Ge){var We=typeof q;(We==="undefined"||We==="boolean")&&(q=null);var ke=!1;if(q===null)ke=!0;else switch(We){case"string":case"number":ke=!0;break;case"object":switch(q.$$typeof){case n:case e:ke=!0}}if(ke)return ke=q,Ge=Ge(ke),q=Ie===""?"."+V(ke,0):Ie,j(Ge)?(xe="",q!=null&&(xe=q.replace(U,"$&/")+"/"),te(Ge,oe,xe,"",function(be){return be})):Ge!=null&&(O(Ge)&&(Ge=D(Ge,xe+(!Ge.key||ke&&ke.key===Ge.key?"":(""+Ge.key).replace(U,"$&/")+"/")+q)),oe.push(Ge)),1;if(ke=0,Ie=Ie===""?".":Ie+":",j(q))for(var Ke=0;Ke<q.length;Ke++){We=q[Ke];var ie=Ie+V(We,Ke);ke+=te(We,oe,xe,ie,Ge)}else if(ie=v(q),typeof ie=="function")for(q=ie.call(q),Ke=0;!(We=q.next()).done;)We=We.value,ie=Ie+V(We,Ke++),ke+=te(We,oe,xe,ie,Ge);else if(We==="object")throw oe=String(q),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.");return ke}function Pe(q,oe,xe){if(q==null)return q;var Ie=[],Ge=0;return te(q,Ie,"","",function(We){return oe.call(xe,We,Ge++)}),Ie}function Oe(q){if(q._status===-1){var oe=q._result;oe=oe(),oe.then(function(xe){(q._status===0||q._status===-1)&&(q._status=1,q._result=xe)},function(xe){(q._status===0||q._status===-1)&&(q._status=2,q._result=xe)}),q._status===-1&&(q._status=0,q._result=oe)}if(q._status===1)return q._result.default;throw q._result}var _e={current:null},Z={transition:null},me={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:Z,ReactCurrentOwner:W};function de(){throw Error("act(...) is not supported in production builds of React.")}return Xe.Children={map:Pe,forEach:function(q,oe,xe){Pe(q,function(){oe.apply(this,arguments)},xe)},count:function(q){var oe=0;return Pe(q,function(){oe++}),oe},toArray:function(q){return Pe(q,function(oe){return oe})||[]},only:function(q){if(!O(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Xe.Component=T,Xe.Fragment=t,Xe.Profiler=i,Xe.PureComponent=P,Xe.StrictMode=r,Xe.Suspense=c,Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Xe.act=de,Xe.cloneElement=function(q,oe,xe){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var Ie=E({},q.props),Ge=q.key,We=q.ref,ke=q._owner;if(oe!=null){if(oe.ref!==void 0&&(We=oe.ref,ke=W.current),oe.key!==void 0&&(Ge=""+oe.key),q.type&&q.type.defaultProps)var Ke=q.type.defaultProps;for(ie in oe)H.call(oe,ie)&&!R.hasOwnProperty(ie)&&(Ie[ie]=oe[ie]===void 0&&Ke!==void 0?Ke[ie]:oe[ie])}var ie=arguments.length-2;if(ie===1)Ie.children=xe;else if(1<ie){Ke=Array(ie);for(var be=0;be<ie;be++)Ke[be]=arguments[be+2];Ie.children=Ke}return{$$typeof:n,type:q.type,key:Ge,ref:We,props:Ie,_owner:ke}},Xe.createContext=function(q){return q={$$typeof:s,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:o,_context:q},q.Consumer=q},Xe.createElement=I,Xe.createFactory=function(q){var oe=I.bind(null,q);return oe.type=q,oe},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(q){return{$$typeof:u,render:q}},Xe.isValidElement=O,Xe.lazy=function(q){return{$$typeof:h,_payload:{_status:-1,_result:q},_init:Oe}},Xe.memo=function(q,oe){return{$$typeof:f,type:q,compare:oe===void 0?null:oe}},Xe.startTransition=function(q){var oe=Z.transition;Z.transition={};try{q()}finally{Z.transition=oe}},Xe.unstable_act=de,Xe.useCallback=function(q,oe){return _e.current.useCallback(q,oe)},Xe.useContext=function(q){return _e.current.useContext(q)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(q){return _e.current.useDeferredValue(q)},Xe.useEffect=function(q,oe){return _e.current.useEffect(q,oe)},Xe.useId=function(){return _e.current.useId()},Xe.useImperativeHandle=function(q,oe,xe){return _e.current.useImperativeHandle(q,oe,xe)},Xe.useInsertionEffect=function(q,oe){return _e.current.useInsertionEffect(q,oe)},Xe.useLayoutEffect=function(q,oe){return _e.current.useLayoutEffect(q,oe)},Xe.useMemo=function(q,oe){return _e.current.useMemo(q,oe)},Xe.useReducer=function(q,oe,xe){return _e.current.useReducer(q,oe,xe)},Xe.useRef=function(q){return _e.current.useRef(q)},Xe.useState=function(q){return _e.current.useState(q)},Xe.useSyncExternalStore=function(q,oe,xe){return _e.current.useSyncExternalStore(q,oe,xe)},Xe.useTransition=function(){return _e.current.useTransition()},Xe.version="18.3.1",Xe}var bx;function Eg(){return bx||(bx=1,a1.exports=sb()),a1.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rx;function ab(){if(Rx)return oc;Rx=1;var n=Eg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(u,c,f){var h,p={},v=null,y=null;f!==void 0&&(v=""+f),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(y=c.ref);for(h in c)r.call(c,h)&&!o.hasOwnProperty(h)&&(p[h]=c[h]);if(u&&u.defaultProps)for(h in c=u.defaultProps,c)p[h]===void 0&&(p[h]=c[h]);return{$$typeof:e,type:u,key:v,ref:y,props:p,_owner:i.current}}return oc.Fragment=t,oc.jsx=s,oc.jsxs=s,oc}var Px;function ub(){return Px||(Px=1,s1.exports=ab()),s1.exports}var S=ub(),B=Eg();const Rn=Qu(B),lb=ob({__proto__:null,default:Rn},[B]);var Bh={},u1={exports:{}},ir={},l1={exports:{}},c1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nx;function cb(){return Nx||(Nx=1,(function(n){function e(Z,me){var de=Z.length;Z.push(me);e:for(;0<de;){var q=de-1>>>1,oe=Z[q];if(0<i(oe,me))Z[q]=me,Z[de]=oe,de=q;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var me=Z[0],de=Z.pop();if(de!==me){Z[0]=de;e:for(var q=0,oe=Z.length,xe=oe>>>1;q<xe;){var Ie=2*(q+1)-1,Ge=Z[Ie],We=Ie+1,ke=Z[We];if(0>i(Ge,de))We<oe&&0>i(ke,Ge)?(Z[q]=ke,Z[We]=de,q=We):(Z[q]=Ge,Z[Ie]=de,q=Ie);else if(We<oe&&0>i(ke,de))Z[q]=ke,Z[We]=de,q=We;else break e}}return me}function i(Z,me){var de=Z.sortIndex-me.sortIndex;return de!==0?de:Z.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();n.unstable_now=function(){return s.now()-u}}var c=[],f=[],h=1,p=null,v=3,y=!1,E=!1,A=!1,T=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(Z){for(var me=t(f);me!==null;){if(me.callback===null)r(f);else if(me.startTime<=Z)r(f),me.sortIndex=me.expirationTime,e(c,me);else break;me=t(f)}}function j(Z){if(A=!1,M(Z),!E)if(t(c)!==null)E=!0,Oe(H);else{var me=t(f);me!==null&&_e(j,me.startTime-Z)}}function H(Z,me){E=!1,A&&(A=!1,N(I),I=-1),y=!0;var de=v;try{for(M(me),p=t(c);p!==null&&(!(p.expirationTime>me)||Z&&!F());){var q=p.callback;if(typeof q=="function"){p.callback=null,v=p.priorityLevel;var oe=q(p.expirationTime<=me);me=n.unstable_now(),typeof oe=="function"?p.callback=oe:p===t(c)&&r(c),M(me)}else r(c);p=t(c)}if(p!==null)var xe=!0;else{var Ie=t(f);Ie!==null&&_e(j,Ie.startTime-me),xe=!1}return xe}finally{p=null,v=de,y=!1}}var W=!1,R=null,I=-1,D=5,O=-1;function F(){return!(n.unstable_now()-O<D)}function U(){if(R!==null){var Z=n.unstable_now();O=Z;var me=!0;try{me=R(!0,Z)}finally{me?V():(W=!1,R=null)}}else W=!1}var V;if(typeof P=="function")V=function(){P(U)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,Pe=te.port2;te.port1.onmessage=U,V=function(){Pe.postMessage(null)}}else V=function(){T(U,0)};function Oe(Z){R=Z,W||(W=!0,V())}function _e(Z,me){I=T(function(){Z(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){E||y||(E=!0,Oe(H))},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(Z){switch(v){case 1:case 2:case 3:var me=3;break;default:me=v}var de=v;v=me;try{return Z()}finally{v=de}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,me){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var de=v;v=Z;try{return me()}finally{v=de}},n.unstable_scheduleCallback=function(Z,me,de){var q=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?q+de:q):de=q,Z){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=de+oe,Z={id:h++,callback:me,priorityLevel:Z,startTime:de,expirationTime:oe,sortIndex:-1},de>q?(Z.sortIndex=de,e(f,Z),t(c)===null&&Z===t(f)&&(A?(N(I),I=-1):A=!0,_e(j,de-q))):(Z.sortIndex=oe,e(c,Z),E||y||(E=!0,Oe(H))),Z},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(Z){var me=v;return function(){var de=v;v=me;try{return Z.apply(this,arguments)}finally{v=de}}}})(c1)),c1}var Dx;function fb(){return Dx||(Dx=1,l1.exports=cb()),l1.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ox;function hb(){if(Ox)return ir;Ox=1;var n=Eg(),e=fb();function t(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(a,l){s(a,l),s(a+"Capture",l)}function s(a,l){for(i[a]=l,a=0;a<l.length;a++)r.add(l[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(a){return c.call(p,a)?!0:c.call(h,a)?!1:f.test(a)?p[a]=!0:(h[a]=!0,!1)}function y(a,l,d,g){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function E(a,l,d,g){if(l===null||typeof l>"u"||y(a,l,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function A(a,l,d,g,_,x,b){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=_,this.mustUseProperty=d,this.propertyName=a,this.type=l,this.sanitizeURL=x,this.removeEmptyString=b}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){T[a]=new A(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];T[l]=new A(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){T[a]=new A(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){T[a]=new A(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){T[a]=new A(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){T[a]=new A(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){T[a]=new A(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){T[a]=new A(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){T[a]=new A(a,5,!1,a.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function P(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(N,P);T[l]=new A(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(N,P);T[l]=new A(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(N,P);T[l]=new A(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){T[a]=new A(a,1,!1,a.toLowerCase(),null,!1,!1)}),T.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){T[a]=new A(a,1,!1,a.toLowerCase(),null,!0,!0)});function M(a,l,d,g){var _=T.hasOwnProperty(l)?T[l]:null;(_!==null?_.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(E(l,d,_,g)&&(d=null),g||_===null?v(l)&&(d===null?a.removeAttribute(l):a.setAttribute(l,""+d)):_.mustUseProperty?a[_.propertyName]=d===null?_.type===3?!1:"":d:(l=_.attributeName,g=_.attributeNamespace,d===null?a.removeAttribute(l):(_=_.type,d=_===3||_===4&&d===!0?"":""+d,g?a.setAttributeNS(g,l,d):a.setAttribute(l,d))))}var j=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),W=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),F=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),Pe=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),_e=Symbol.for("react.offscreen"),Z=Symbol.iterator;function me(a){return a===null||typeof a!="object"?null:(a=Z&&a[Z]||a["@@iterator"],typeof a=="function"?a:null)}var de=Object.assign,q;function oe(a){if(q===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);q=l&&l[1]||""}return`
`+q+a}var xe=!1;function Ie(a,l){if(!a||xe)return"";xe=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(J){var g=J}Reflect.construct(a,[],l)}else{try{l.call()}catch(J){g=J}a.call(l.prototype)}else{try{throw Error()}catch(J){g=J}a()}}catch(J){if(J&&g&&typeof J.stack=="string"){for(var _=J.stack.split(`
`),x=g.stack.split(`
`),b=_.length-1,z=x.length-1;1<=b&&0<=z&&_[b]!==x[z];)z--;for(;1<=b&&0<=z;b--,z--)if(_[b]!==x[z]){if(b!==1||z!==1)do if(b--,z--,0>z||_[b]!==x[z]){var G=`
`+_[b].replace(" at new "," at ");return a.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",a.displayName)),G}while(1<=b&&0<=z);break}}}finally{xe=!1,Error.prepareStackTrace=d}return(a=a?a.displayName||a.name:"")?oe(a):""}function Ge(a){switch(a.tag){case 5:return oe(a.type);case 16:return oe("Lazy");case 13:return oe("Suspense");case 19:return oe("SuspenseList");case 0:case 2:case 15:return a=Ie(a.type,!1),a;case 11:return a=Ie(a.type.render,!1),a;case 1:return a=Ie(a.type,!0),a;default:return""}}function We(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case R:return"Fragment";case W:return"Portal";case D:return"Profiler";case I:return"StrictMode";case V:return"Suspense";case te:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case F:return(a.displayName||"Context")+".Consumer";case O:return(a._context.displayName||"Context")+".Provider";case U:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Pe:return l=a.displayName||null,l!==null?l:We(a.type)||"Memo";case Oe:l=a._payload,a=a._init;try{return We(a(l))}catch{}}return null}function ke(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return We(l);case 8:return l===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ke(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ie(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function be(a){var l=ie(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),g=""+a[l];if(!a.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var _=d.get,x=d.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return _.call(this)},set:function(b){g=""+b,x.call(this,b)}}),Object.defineProperty(a,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(b){g=""+b},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function et(a){a._valueTracker||(a._valueTracker=be(a))}function bt(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return a&&(g=ie(a)?a.checked?"true":"false":a.value),a=g,a!==d?(l.setValue(a),!0):!1}function Lt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function ci(a,l){var d=l.checked;return de({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??a._wrapperState.initialChecked})}function Tf(a,l){var d=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;d=Ke(l.value!=null?l.value:d),a._wrapperState={initialChecked:g,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Ra(a,l){l=l.checked,l!=null&&M(a,"checked",l,!1)}function Rs(a,l){Ra(a,l);var d=Ke(l.value),g=l.type;if(d!=null)g==="number"?(d===0&&a.value===""||a.value!=d)&&(a.value=""+d):a.value!==""+d&&(a.value=""+d);else if(g==="submit"||g==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?qt(a,l.type,d):l.hasOwnProperty("defaultValue")&&qt(a,l.type,Ke(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function hl(a,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,d||l===a.value||(a.value=l),a.defaultValue=l}d=a.name,d!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,d!==""&&(a.name=d)}function qt(a,l,d){(l!=="number"||Lt(a.ownerDocument)!==a)&&(d==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+d&&(a.defaultValue=""+d))}var jt=Array.isArray;function Wr(a,l,d,g){if(a=a.options,l){l={};for(var _=0;_<d.length;_++)l["$"+d[_]]=!0;for(d=0;d<a.length;d++)_=l.hasOwnProperty("$"+a[d].value),a[d].selected!==_&&(a[d].selected=_),_&&g&&(a[d].defaultSelected=!0)}else{for(d=""+Ke(d),l=null,_=0;_<a.length;_++){if(a[_].value===d){a[_].selected=!0,g&&(a[_].defaultSelected=!0);return}l!==null||a[_].disabled||(l=a[_])}l!==null&&(l.selected=!0)}}function dl(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return de({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function pl(a,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(t(92));if(jt(d)){if(1<d.length)throw Error(t(93));d=d[0]}l=d}l==null&&(l=""),d=l}a._wrapperState={initialValue:Ke(d)}}function Cf(a,l){var d=Ke(l.value),g=Ke(l.defaultValue);d!=null&&(d=""+d,d!==a.value&&(a.value=d),l.defaultValue==null&&a.defaultValue!==d&&(a.defaultValue=d)),g!=null&&(a.defaultValue=""+g)}function Eo(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function ml(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pa(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?ml(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Ao,If=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,g,_){MSApp.execUnsafeLocalFunction(function(){return a(l,d,g,_)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(Ao=Ao||document.createElement("div"),Ao.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Ao.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function Ps(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=l;return}}a.textContent=l}var To={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sf=["Webkit","ms","Moz","O"];Object.keys(To).forEach(function(a){Sf.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),To[l]=To[a]})});function Co(a,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||To.hasOwnProperty(a)&&To[a]?(""+l).trim():l+"px"}function Na(a,l){a=a.style;for(var d in l)if(l.hasOwnProperty(d)){var g=d.indexOf("--")===0,_=Co(d,l[d],g);d==="float"&&(d="cssFloat"),g?a.setProperty(d,_):a[d]=_}}var gl=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $r(a,l){if(l){if(gl[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Da(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Io=null;function Oa(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Gi=null,Wi=null,Vt=null;function vl(a){if(a=Gl(a)){if(typeof Gi!="function")throw Error(t(280));var l=a.stateNode;l&&(l=eh(l),Gi(a.stateNode,a.type,l))}}function So(a){Wi?Vt?Vt.push(a):Vt=[a]:Wi=a}function bo(){if(Wi){var a=Wi,l=Vt;if(Vt=Wi=null,vl(a),l)for(a=0;a<l.length;a++)vl(l[a])}}function bf(a,l){return a(l)}function Rf(){}var fi=!1;function Pf(a,l,d){if(fi)return a(l,d);fi=!0;try{return bf(a,l,d)}finally{fi=!1,(Wi!==null||Vt!==null)&&(Rf(),bo())}}function Ns(a,l){var d=a.stateNode;if(d===null)return null;var g=eh(d);if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(t(231,l,typeof d));return d}var Ro=!1;if(u)try{var Po={};Object.defineProperty(Po,"passive",{get:function(){Ro=!0}}),window.addEventListener("test",Po,Po),window.removeEventListener("test",Po,Po)}catch{Ro=!1}function Nf(a,l,d,g,_,x,b,z,G){var J=Array.prototype.slice.call(arguments,3);try{l.apply(d,J)}catch(ue){this.onError(ue)}}var $i=!1,hi=null,ka=!1,br=null,Df={onError:function(a){$i=!0,hi=a}};function Of(a,l,d,g,_,x,b,z,G){$i=!1,hi=null,Nf.apply(Df,arguments)}function yl(a,l,d,g,_,x,b,z,G){if(Of.apply(this,arguments),$i){if($i){var J=hi;$i=!1,hi=null}else throw Error(t(198));ka||(ka=!0,br=J)}}function qr(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function _l(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function kf(a){if(qr(a)!==a)throw Error(t(188))}function Mf(a){var l=a.alternate;if(!l){if(l=qr(a),l===null)throw Error(t(188));return l!==a?null:a}for(var d=a,g=l;;){var _=d.return;if(_===null)break;var x=_.alternate;if(x===null){if(g=_.return,g!==null){d=g;continue}break}if(_.child===x.child){for(x=_.child;x;){if(x===d)return kf(_),a;if(x===g)return kf(_),l;x=x.sibling}throw Error(t(188))}if(d.return!==g.return)d=_,g=x;else{for(var b=!1,z=_.child;z;){if(z===d){b=!0,d=_,g=x;break}if(z===g){b=!0,g=_,d=x;break}z=z.sibling}if(!b){for(z=x.child;z;){if(z===d){b=!0,d=x,g=_;break}if(z===g){b=!0,g=x,d=_;break}z=z.sibling}if(!b)throw Error(t(189))}}if(d.alternate!==g)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?a:l}function Lf(a){return a=Mf(a),a!==null?Ds(a):null}function Ds(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Ds(a);if(l!==null)return l;a=a.sibling}return null}var xl=e.unstable_scheduleCallback,Ma=e.unstable_cancelCallback,Os=e.unstable_shouldYield,qi=e.unstable_requestPaint,Et=e.unstable_now,Vp=e.unstable_getCurrentPriorityLevel,La=e.unstable_ImmediatePriority,wl=e.unstable_UserBlockingPriority,ks=e.unstable_NormalPriority,El=e.unstable_LowPriority,Va=e.unstable_IdlePriority,Ms=null,hr=null;function Vf(a){if(hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(Ms,a,void 0,(a.current.flags&128)===128)}catch{}}var dr=Math.clz32?Math.clz32:Ls,di=Math.log,Rr=Math.LN2;function Ls(a){return a>>>=0,a===0?32:31-(di(a)/Rr|0)|0}var pi=64,No=4194304;function lt(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Ki(a,l){var d=a.pendingLanes;if(d===0)return 0;var g=0,_=a.suspendedLanes,x=a.pingedLanes,b=d&268435455;if(b!==0){var z=b&~_;z!==0?g=lt(z):(x&=b,x!==0&&(g=lt(x)))}else b=d&~_,b!==0?g=lt(b):x!==0&&(g=lt(x));if(g===0)return 0;if(l!==0&&l!==g&&(l&_)===0&&(_=g&-g,x=l&-l,_>=x||_===16&&(x&4194240)!==0))return l;if((g&4)!==0&&(g|=d&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=g;0<l;)d=31-dr(l),_=1<<d,g|=a[d],l&=~_;return g}function Vs(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fs(a,l){for(var d=a.suspendedLanes,g=a.pingedLanes,_=a.expirationTimes,x=a.pendingLanes;0<x;){var b=31-dr(x),z=1<<b,G=_[b];G===-1?((z&d)===0||(z&g)!==0)&&(_[b]=Vs(z,l)):G<=l&&(a.expiredLanes|=z),x&=~z}}function Al(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Tl(){var a=pi;return pi<<=1,(pi&4194240)===0&&(pi=64),a}function Cl(a){for(var l=[],d=0;31>d;d++)l.push(a);return l}function Bs(a,l,d){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-dr(l),a[l]=d}function Fp(a,l){var d=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var g=a.eventTimes;for(a=a.expirationTimes;0<d;){var _=31-dr(d),x=1<<_;l[_]=0,g[_]=-1,a[_]=-1,d&=~x}}function Il(a,l){var d=a.entangledLanes|=l;for(a=a.entanglements;d;){var g=31-dr(d),_=1<<g;_&l|a[g]&l&&(a[g]|=l),d&=~_}}var tt=0;function mi(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Sl,Fa,bl,Rl,Pl,gi=!1,Ba=[],vi=null,yi=null,wn=null,Us=new Map,Xi=new Map,pr=[],Ff="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Do(a,l){switch(a){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":Us.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xi.delete(l.pointerId)}}function Kr(a,l,d,g,_,x){return a===null||a.nativeEvent!==x?(a={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:x,targetContainers:[_]},l!==null&&(l=Gl(l),l!==null&&Fa(l)),a):(a.eventSystemFlags|=g,l=a.targetContainers,_!==null&&l.indexOf(_)===-1&&l.push(_),a)}function Bf(a,l,d,g,_){switch(l){case"focusin":return vi=Kr(vi,a,l,d,g,_),!0;case"dragenter":return yi=Kr(yi,a,l,d,g,_),!0;case"mouseover":return wn=Kr(wn,a,l,d,g,_),!0;case"pointerover":var x=_.pointerId;return Us.set(x,Kr(Us.get(x)||null,a,l,d,g,_)),!0;case"gotpointercapture":return x=_.pointerId,Xi.set(x,Kr(Xi.get(x)||null,a,l,d,g,_)),!0}return!1}function Ua(a){var l=Gs(a.target);if(l!==null){var d=qr(l);if(d!==null){if(l=d.tag,l===13){if(l=_l(d),l!==null){a.blockedOn=l,Pl(a.priority,function(){bl(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function _t(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var d=ja(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(d===null){d=a.nativeEvent;var g=new d.constructor(d.type,d);Io=g,d.target.dispatchEvent(g),Io=null}else return l=Gl(d),l!==null&&Fa(l),a.blockedOn=d,!1;l.shift()}return!0}function Uf(a,l,d){_t(a)&&d.delete(l)}function Bp(){gi=!1,vi!==null&&_t(vi)&&(vi=null),yi!==null&&_t(yi)&&(yi=null),wn!==null&&_t(wn)&&(wn=null),Us.forEach(Uf),Xi.forEach(Uf)}function Oo(a,l){a.blockedOn===l&&(a.blockedOn=null,gi||(gi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bp)))}function ko(a){function l(_){return Oo(_,a)}if(0<Ba.length){Oo(Ba[0],a);for(var d=1;d<Ba.length;d++){var g=Ba[d];g.blockedOn===a&&(g.blockedOn=null)}}for(vi!==null&&Oo(vi,a),yi!==null&&Oo(yi,a),wn!==null&&Oo(wn,a),Us.forEach(l),Xi.forEach(l),d=0;d<pr.length;d++)g=pr[d],g.blockedOn===a&&(g.blockedOn=null);for(;0<pr.length&&(d=pr[0],d.blockedOn===null);)Ua(d),d.blockedOn===null&&pr.shift()}var Yi=j.ReactCurrentBatchConfig,Qi=!0;function _i(a,l,d,g){var _=tt,x=Yi.transition;Yi.transition=null;try{tt=1,Nl(a,l,d,g)}finally{tt=_,Yi.transition=x}}function jf(a,l,d,g){var _=tt,x=Yi.transition;Yi.transition=null;try{tt=4,Nl(a,l,d,g)}finally{tt=_,Yi.transition=x}}function Nl(a,l,d,g){if(Qi){var _=ja(a,l,d,g);if(_===null)Yp(a,l,g,xi,d),Do(a,g);else if(Bf(_,a,l,d,g))g.stopPropagation();else if(Do(a,g),l&4&&-1<Ff.indexOf(a)){for(;_!==null;){var x=Gl(_);if(x!==null&&Sl(x),x=ja(a,l,d,g),x===null&&Yp(a,l,g,xi,d),x===_)break;_=x}_!==null&&g.stopPropagation()}else Yp(a,l,g,null,d)}}var xi=null;function ja(a,l,d,g){if(xi=null,a=Oa(g),a=Gs(a),a!==null)if(l=qr(a),l===null)a=null;else if(d=l.tag,d===13){if(a=_l(l),a!==null)return a;a=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return xi=a,null}function za(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vp()){case La:return 1;case wl:return 4;case ks:case El:return 16;case Va:return 536870912;default:return 16}default:return 16}}var mr=null,Ha=null,Zi=null;function zf(){if(Zi)return Zi;var a,l=Ha,d=l.length,g,_="value"in mr?mr.value:mr.textContent,x=_.length;for(a=0;a<d&&l[a]===_[a];a++);var b=d-a;for(g=1;g<=b&&l[d-g]===_[x-g];g++);return Zi=_.slice(a,1<g?1-g:void 0)}function js(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function wi(){return!0}function Dl(){return!1}function On(a){function l(d,g,_,x,b){this._reactName=d,this._targetInst=_,this.type=g,this.nativeEvent=x,this.target=b,this.currentTarget=null;for(var z in a)a.hasOwnProperty(z)&&(d=a[z],this[z]=d?d(x):x[z]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?wi:Dl,this.isPropagationStopped=Dl,this}return de(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),l}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zs=On(Ei),Mo=de({},Ei,{view:0,detail:0}),Ga=On(Mo),Wa,$a,gr,Hs=de({},Mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:He,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==gr&&(gr&&a.type==="mousemove"?(Wa=a.screenX-gr.screenX,$a=a.screenY-gr.screenY):$a=Wa=0,gr=a),Wa)},movementY:function(a){return"movementY"in a?a.movementY:$a}}),Ol=On(Hs),Hf=de({},Hs,{dataTransfer:0}),Gf=On(Hf),qa=de({},Mo,{relatedTarget:0}),En=On(qa),Wf=de({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),$f=On(Wf),Lo=de({},Ei,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),m=On(Lo),w=de({},Ei,{data:0}),C=On(w),k={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fe(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=ee[a])?!!l[a]:!1}function He(){return fe}var zt=de({},Mo,{key:function(a){if(a.key){var l=k[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=js(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?X[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:He,charCode:function(a){return a.type==="keypress"?js(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?js(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),dt=On(zt),Kt=de({},Hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vr=On(Kt),Ji=de({},Mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:He}),Ai=On(Ji),Ti=de({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ka=On(Ti),kl=de({},Hs,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),J3=On(kl),e4=[9,13,27,32],Up=u&&"CompositionEvent"in window,Ml=null;u&&"documentMode"in document&&(Ml=document.documentMode);var t4=u&&"TextEvent"in window&&!Ml,_y=u&&(!Up||Ml&&8<Ml&&11>=Ml),xy=" ",wy=!1;function Ey(a,l){switch(a){case"keyup":return e4.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ay(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Xa=!1;function n4(a,l){switch(a){case"compositionend":return Ay(l);case"keypress":return l.which!==32?null:(wy=!0,xy);case"textInput":return a=l.data,a===xy&&wy?null:a;default:return null}}function r4(a,l){if(Xa)return a==="compositionend"||!Up&&Ey(a,l)?(a=zf(),Zi=Ha=mr=null,Xa=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return _y&&l.locale!=="ko"?null:l.data;default:return null}}var i4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ty(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!i4[a.type]:l==="textarea"}function Cy(a,l,d,g){So(g),l=Qf(l,"onChange"),0<l.length&&(d=new zs("onChange","change",null,d,g),a.push({event:d,listeners:l}))}var Ll=null,Vl=null;function o4(a){Hy(a,0)}function qf(a){var l=eu(a);if(bt(l))return a}function s4(a,l){if(a==="change")return l}var Iy=!1;if(u){var jp;if(u){var zp="oninput"in document;if(!zp){var Sy=document.createElement("div");Sy.setAttribute("oninput","return;"),zp=typeof Sy.oninput=="function"}jp=zp}else jp=!1;Iy=jp&&(!document.documentMode||9<document.documentMode)}function by(){Ll&&(Ll.detachEvent("onpropertychange",Ry),Vl=Ll=null)}function Ry(a){if(a.propertyName==="value"&&qf(Vl)){var l=[];Cy(l,Vl,a,Oa(a)),Pf(o4,l)}}function a4(a,l,d){a==="focusin"?(by(),Ll=l,Vl=d,Ll.attachEvent("onpropertychange",Ry)):a==="focusout"&&by()}function u4(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return qf(Vl)}function l4(a,l){if(a==="click")return qf(l)}function c4(a,l){if(a==="input"||a==="change")return qf(l)}function f4(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Xr=typeof Object.is=="function"?Object.is:f4;function Fl(a,l){if(Xr(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var _=d[g];if(!c.call(l,_)||!Xr(a[_],l[_]))return!1}return!0}function Py(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ny(a,l){var d=Py(a);a=0;for(var g;d;){if(d.nodeType===3){if(g=a+d.textContent.length,a<=l&&g>=l)return{node:d,offset:l-a};a=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Py(d)}}function Dy(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?Dy(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function Oy(){for(var a=window,l=Lt();l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)a=l.contentWindow;else break;l=Lt(a.document)}return l}function Hp(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function h4(a){var l=Oy(),d=a.focusedElem,g=a.selectionRange;if(l!==d&&d&&d.ownerDocument&&Dy(d.ownerDocument.documentElement,d)){if(g!==null&&Hp(d)){if(l=g.start,a=g.end,a===void 0&&(a=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(a,d.value.length);else if(a=(l=d.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var _=d.textContent.length,x=Math.min(g.start,_);g=g.end===void 0?x:Math.min(g.end,_),!a.extend&&x>g&&(_=g,g=x,x=_),_=Ny(d,x);var b=Ny(d,g);_&&b&&(a.rangeCount!==1||a.anchorNode!==_.node||a.anchorOffset!==_.offset||a.focusNode!==b.node||a.focusOffset!==b.offset)&&(l=l.createRange(),l.setStart(_.node,_.offset),a.removeAllRanges(),x>g?(a.addRange(l),a.extend(b.node,b.offset)):(l.setEnd(b.node,b.offset),a.addRange(l)))}}for(l=[],a=d;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)a=l[d],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var d4=u&&"documentMode"in document&&11>=document.documentMode,Ya=null,Gp=null,Bl=null,Wp=!1;function ky(a,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Wp||Ya==null||Ya!==Lt(g)||(g=Ya,"selectionStart"in g&&Hp(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Bl&&Fl(Bl,g)||(Bl=g,g=Qf(Gp,"onSelect"),0<g.length&&(l=new zs("onSelect","select",null,l,d),a.push({event:l,listeners:g}),l.target=Ya)))}function Kf(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var Qa={animationend:Kf("Animation","AnimationEnd"),animationiteration:Kf("Animation","AnimationIteration"),animationstart:Kf("Animation","AnimationStart"),transitionend:Kf("Transition","TransitionEnd")},$p={},My={};u&&(My=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function Xf(a){if($p[a])return $p[a];if(!Qa[a])return a;var l=Qa[a],d;for(d in l)if(l.hasOwnProperty(d)&&d in My)return $p[a]=l[d];return a}var Ly=Xf("animationend"),Vy=Xf("animationiteration"),Fy=Xf("animationstart"),By=Xf("transitionend"),Uy=new Map,jy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vo(a,l){Uy.set(a,l),o(l,[a])}for(var qp=0;qp<jy.length;qp++){var Kp=jy[qp],p4=Kp.toLowerCase(),m4=Kp[0].toUpperCase()+Kp.slice(1);Vo(p4,"on"+m4)}Vo(Ly,"onAnimationEnd"),Vo(Vy,"onAnimationIteration"),Vo(Fy,"onAnimationStart"),Vo("dblclick","onDoubleClick"),Vo("focusin","onFocus"),Vo("focusout","onBlur"),Vo(By,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ul));function zy(a,l,d){var g=a.type||"unknown-event";a.currentTarget=d,yl(g,l,void 0,a),a.currentTarget=null}function Hy(a,l){l=(l&4)!==0;for(var d=0;d<a.length;d++){var g=a[d],_=g.event;g=g.listeners;e:{var x=void 0;if(l)for(var b=g.length-1;0<=b;b--){var z=g[b],G=z.instance,J=z.currentTarget;if(z=z.listener,G!==x&&_.isPropagationStopped())break e;zy(_,z,J),x=G}else for(b=0;b<g.length;b++){if(z=g[b],G=z.instance,J=z.currentTarget,z=z.listener,G!==x&&_.isPropagationStopped())break e;zy(_,z,J),x=G}}}if(ka)throw a=br,ka=!1,br=null,a}function At(a,l){var d=l[n0];d===void 0&&(d=l[n0]=new Set);var g=a+"__bubble";d.has(g)||(Gy(l,a,2,!1),d.add(g))}function Xp(a,l,d){var g=0;l&&(g|=4),Gy(d,a,g,l)}var Yf="_reactListening"+Math.random().toString(36).slice(2);function jl(a){if(!a[Yf]){a[Yf]=!0,r.forEach(function(d){d!=="selectionchange"&&(g4.has(d)||Xp(d,!1,a),Xp(d,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Yf]||(l[Yf]=!0,Xp("selectionchange",!1,l))}}function Gy(a,l,d,g){switch(za(l)){case 1:var _=_i;break;case 4:_=jf;break;default:_=Nl}d=_.bind(null,l,d,a),_=void 0,!Ro||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(_=!0),g?_!==void 0?a.addEventListener(l,d,{capture:!0,passive:_}):a.addEventListener(l,d,!0):_!==void 0?a.addEventListener(l,d,{passive:_}):a.addEventListener(l,d,!1)}function Yp(a,l,d,g,_){var x=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var b=g.tag;if(b===3||b===4){var z=g.stateNode.containerInfo;if(z===_||z.nodeType===8&&z.parentNode===_)break;if(b===4)for(b=g.return;b!==null;){var G=b.tag;if((G===3||G===4)&&(G=b.stateNode.containerInfo,G===_||G.nodeType===8&&G.parentNode===_))return;b=b.return}for(;z!==null;){if(b=Gs(z),b===null)return;if(G=b.tag,G===5||G===6){g=x=b;continue e}z=z.parentNode}}g=g.return}Pf(function(){var J=x,ue=Oa(d),le=[];e:{var ae=Uy.get(a);if(ae!==void 0){var ge=zs,we=a;switch(a){case"keypress":if(js(d)===0)break e;case"keydown":case"keyup":ge=dt;break;case"focusin":we="focus",ge=En;break;case"focusout":we="blur",ge=En;break;case"beforeblur":case"afterblur":ge=En;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Gf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=Ai;break;case Ly:case Vy:case Fy:ge=$f;break;case By:ge=Ka;break;case"scroll":ge=Ga;break;case"wheel":ge=J3;break;case"copy":case"cut":case"paste":ge=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=vr}var Te=(l&4)!==0,Ht=!Te&&a==="scroll",K=Te?ae!==null?ae+"Capture":null:ae;Te=[];for(var $=J,Q;$!==null;){Q=$;var ce=Q.stateNode;if(Q.tag===5&&ce!==null&&(Q=ce,K!==null&&(ce=Ns($,K),ce!=null&&Te.push(zl($,ce,Q)))),Ht)break;$=$.return}0<Te.length&&(ae=new ge(ae,we,null,d,ue),le.push({event:ae,listeners:Te}))}}if((l&7)===0){e:{if(ae=a==="mouseover"||a==="pointerover",ge=a==="mouseout"||a==="pointerout",ae&&d!==Io&&(we=d.relatedTarget||d.fromElement)&&(Gs(we)||we[eo]))break e;if((ge||ae)&&(ae=ue.window===ue?ue:(ae=ue.ownerDocument)?ae.defaultView||ae.parentWindow:window,ge?(we=d.relatedTarget||d.toElement,ge=J,we=we?Gs(we):null,we!==null&&(Ht=qr(we),we!==Ht||we.tag!==5&&we.tag!==6)&&(we=null)):(ge=null,we=J),ge!==we)){if(Te=Ol,ce="onMouseLeave",K="onMouseEnter",$="mouse",(a==="pointerout"||a==="pointerover")&&(Te=vr,ce="onPointerLeave",K="onPointerEnter",$="pointer"),Ht=ge==null?ae:eu(ge),Q=we==null?ae:eu(we),ae=new Te(ce,$+"leave",ge,d,ue),ae.target=Ht,ae.relatedTarget=Q,ce=null,Gs(ue)===J&&(Te=new Te(K,$+"enter",we,d,ue),Te.target=Q,Te.relatedTarget=Ht,ce=Te),Ht=ce,ge&&we)t:{for(Te=ge,K=we,$=0,Q=Te;Q;Q=Za(Q))$++;for(Q=0,ce=K;ce;ce=Za(ce))Q++;for(;0<$-Q;)Te=Za(Te),$--;for(;0<Q-$;)K=Za(K),Q--;for(;$--;){if(Te===K||K!==null&&Te===K.alternate)break t;Te=Za(Te),K=Za(K)}Te=null}else Te=null;ge!==null&&Wy(le,ae,ge,Te,!1),we!==null&&Ht!==null&&Wy(le,Ht,we,Te,!0)}}e:{if(ae=J?eu(J):window,ge=ae.nodeName&&ae.nodeName.toLowerCase(),ge==="select"||ge==="input"&&ae.type==="file")var Se=s4;else if(Ty(ae))if(Iy)Se=c4;else{Se=u4;var Me=a4}else(ge=ae.nodeName)&&ge.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Se=l4);if(Se&&(Se=Se(a,J))){Cy(le,Se,d,ue);break e}Me&&Me(a,ae,J),a==="focusout"&&(Me=ae._wrapperState)&&Me.controlled&&ae.type==="number"&&qt(ae,"number",ae.value)}switch(Me=J?eu(J):window,a){case"focusin":(Ty(Me)||Me.contentEditable==="true")&&(Ya=Me,Gp=J,Bl=null);break;case"focusout":Bl=Gp=Ya=null;break;case"mousedown":Wp=!0;break;case"contextmenu":case"mouseup":case"dragend":Wp=!1,ky(le,d,ue);break;case"selectionchange":if(d4)break;case"keydown":case"keyup":ky(le,d,ue)}var Le;if(Up)e:{switch(a){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Xa?Ey(a,d)&&(Ue="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(Ue="onCompositionStart");Ue&&(_y&&d.locale!=="ko"&&(Xa||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Xa&&(Le=zf()):(mr=ue,Ha="value"in mr?mr.value:mr.textContent,Xa=!0)),Me=Qf(J,Ue),0<Me.length&&(Ue=new C(Ue,a,null,d,ue),le.push({event:Ue,listeners:Me}),Le?Ue.data=Le:(Le=Ay(d),Le!==null&&(Ue.data=Le)))),(Le=t4?n4(a,d):r4(a,d))&&(J=Qf(J,"onBeforeInput"),0<J.length&&(ue=new C("onBeforeInput","beforeinput",null,d,ue),le.push({event:ue,listeners:J}),ue.data=Le))}Hy(le,l)})}function zl(a,l,d){return{instance:a,listener:l,currentTarget:d}}function Qf(a,l){for(var d=l+"Capture",g=[];a!==null;){var _=a,x=_.stateNode;_.tag===5&&x!==null&&(_=x,x=Ns(a,d),x!=null&&g.unshift(zl(a,x,_)),x=Ns(a,l),x!=null&&g.push(zl(a,x,_))),a=a.return}return g}function Za(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Wy(a,l,d,g,_){for(var x=l._reactName,b=[];d!==null&&d!==g;){var z=d,G=z.alternate,J=z.stateNode;if(G!==null&&G===g)break;z.tag===5&&J!==null&&(z=J,_?(G=Ns(d,x),G!=null&&b.unshift(zl(d,G,z))):_||(G=Ns(d,x),G!=null&&b.push(zl(d,G,z)))),d=d.return}b.length!==0&&a.push({event:l,listeners:b})}var v4=/\r\n?/g,y4=/\u0000|\uFFFD/g;function $y(a){return(typeof a=="string"?a:""+a).replace(v4,`
`).replace(y4,"")}function Zf(a,l,d){if(l=$y(l),$y(a)!==l&&d)throw Error(t(425))}function Jf(){}var Qp=null,Zp=null;function Jp(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var e0=typeof setTimeout=="function"?setTimeout:void 0,_4=typeof clearTimeout=="function"?clearTimeout:void 0,qy=typeof Promise=="function"?Promise:void 0,x4=typeof queueMicrotask=="function"?queueMicrotask:typeof qy<"u"?function(a){return qy.resolve(null).then(a).catch(w4)}:e0;function w4(a){setTimeout(function(){throw a})}function t0(a,l){var d=l,g=0;do{var _=d.nextSibling;if(a.removeChild(d),_&&_.nodeType===8)if(d=_.data,d==="/$"){if(g===0){a.removeChild(_),ko(l);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=_}while(d);ko(l)}function Fo(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function Ky(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return a;l--}else d==="/$"&&l++}a=a.previousSibling}return null}var Ja=Math.random().toString(36).slice(2),Ci="__reactFiber$"+Ja,Hl="__reactProps$"+Ja,eo="__reactContainer$"+Ja,n0="__reactEvents$"+Ja,E4="__reactListeners$"+Ja,A4="__reactHandles$"+Ja;function Gs(a){var l=a[Ci];if(l)return l;for(var d=a.parentNode;d;){if(l=d[eo]||d[Ci]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=Ky(a);a!==null;){if(d=a[Ci])return d;a=Ky(a)}return l}a=d,d=a.parentNode}return null}function Gl(a){return a=a[Ci]||a[eo],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function eu(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function eh(a){return a[Hl]||null}var r0=[],tu=-1;function Bo(a){return{current:a}}function Tt(a){0>tu||(a.current=r0[tu],r0[tu]=null,tu--)}function xt(a,l){tu++,r0[tu]=a.current,a.current=l}var Uo={},kn=Bo(Uo),Jn=Bo(!1),Ws=Uo;function nu(a,l){var d=a.type.contextTypes;if(!d)return Uo;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var _={},x;for(x in d)_[x]=l[x];return g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=_),_}function er(a){return a=a.childContextTypes,a!=null}function th(){Tt(Jn),Tt(kn)}function Xy(a,l,d){if(kn.current!==Uo)throw Error(t(168));xt(kn,l),xt(Jn,d)}function Yy(a,l,d){var g=a.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var _ in g)if(!(_ in l))throw Error(t(108,ke(a)||"Unknown",_));return de({},d,g)}function nh(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Uo,Ws=kn.current,xt(kn,a),xt(Jn,Jn.current),!0}function Qy(a,l,d){var g=a.stateNode;if(!g)throw Error(t(169));d?(a=Yy(a,l,Ws),g.__reactInternalMemoizedMergedChildContext=a,Tt(Jn),Tt(kn),xt(kn,a)):Tt(Jn),xt(Jn,d)}var to=null,rh=!1,i0=!1;function Zy(a){to===null?to=[a]:to.push(a)}function T4(a){rh=!0,Zy(a)}function jo(){if(!i0&&to!==null){i0=!0;var a=0,l=tt;try{var d=to;for(tt=1;a<d.length;a++){var g=d[a];do g=g(!0);while(g!==null)}to=null,rh=!1}catch(_){throw to!==null&&(to=to.slice(a+1)),xl(La,jo),_}finally{tt=l,i0=!1}}return null}var ru=[],iu=0,ih=null,oh=0,Pr=[],Nr=0,$s=null,no=1,ro="";function qs(a,l){ru[iu++]=oh,ru[iu++]=ih,ih=a,oh=l}function Jy(a,l,d){Pr[Nr++]=no,Pr[Nr++]=ro,Pr[Nr++]=$s,$s=a;var g=no;a=ro;var _=32-dr(g)-1;g&=~(1<<_),d+=1;var x=32-dr(l)+_;if(30<x){var b=_-_%5;x=(g&(1<<b)-1).toString(32),g>>=b,_-=b,no=1<<32-dr(l)+_|d<<_|g,ro=x+a}else no=1<<x|d<<_|g,ro=a}function o0(a){a.return!==null&&(qs(a,1),Jy(a,1,0))}function s0(a){for(;a===ih;)ih=ru[--iu],ru[iu]=null,oh=ru[--iu],ru[iu]=null;for(;a===$s;)$s=Pr[--Nr],Pr[Nr]=null,ro=Pr[--Nr],Pr[Nr]=null,no=Pr[--Nr],Pr[Nr]=null}var yr=null,_r=null,Rt=!1,Yr=null;function e_(a,l){var d=Mr(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=a,l=a.deletions,l===null?(a.deletions=[d],a.flags|=16):l.push(d)}function t_(a,l){switch(a.tag){case 5:var d=a.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,yr=a,_r=Fo(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,yr=a,_r=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=$s!==null?{id:no,overflow:ro}:null,a.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=Mr(18,null,null,0),d.stateNode=l,d.return=a,a.child=d,yr=a,_r=null,!0):!1;default:return!1}}function a0(a){return(a.mode&1)!==0&&(a.flags&128)===0}function u0(a){if(Rt){var l=_r;if(l){var d=l;if(!t_(a,l)){if(a0(a))throw Error(t(418));l=Fo(d.nextSibling);var g=yr;l&&t_(a,l)?e_(g,d):(a.flags=a.flags&-4097|2,Rt=!1,yr=a)}}else{if(a0(a))throw Error(t(418));a.flags=a.flags&-4097|2,Rt=!1,yr=a}}}function n_(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;yr=a}function sh(a){if(a!==yr)return!1;if(!Rt)return n_(a),Rt=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!Jp(a.type,a.memoizedProps)),l&&(l=_r)){if(a0(a))throw r_(),Error(t(418));for(;l;)e_(a,l),l=Fo(l.nextSibling)}if(n_(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"){if(l===0){_r=Fo(a.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}a=a.nextSibling}_r=null}}else _r=yr?Fo(a.stateNode.nextSibling):null;return!0}function r_(){for(var a=_r;a;)a=Fo(a.nextSibling)}function ou(){_r=yr=null,Rt=!1}function l0(a){Yr===null?Yr=[a]:Yr.push(a)}var C4=j.ReactCurrentBatchConfig;function Wl(a,l,d){if(a=d.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var g=d.stateNode}if(!g)throw Error(t(147,a));var _=g,x=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===x?l.ref:(l=function(b){var z=_.refs;b===null?delete z[x]:z[x]=b},l._stringRef=x,l)}if(typeof a!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,a))}return a}function ah(a,l){throw a=Object.prototype.toString.call(l),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function i_(a){var l=a._init;return l(a._payload)}function o_(a){function l(K,$){if(a){var Q=K.deletions;Q===null?(K.deletions=[$],K.flags|=16):Q.push($)}}function d(K,$){if(!a)return null;for(;$!==null;)l(K,$),$=$.sibling;return null}function g(K,$){for(K=new Map;$!==null;)$.key!==null?K.set($.key,$):K.set($.index,$),$=$.sibling;return K}function _(K,$){return K=Xo(K,$),K.index=0,K.sibling=null,K}function x(K,$,Q){return K.index=Q,a?(Q=K.alternate,Q!==null?(Q=Q.index,Q<$?(K.flags|=2,$):Q):(K.flags|=2,$)):(K.flags|=1048576,$)}function b(K){return a&&K.alternate===null&&(K.flags|=2),K}function z(K,$,Q,ce){return $===null||$.tag!==6?($=e1(Q,K.mode,ce),$.return=K,$):($=_($,Q),$.return=K,$)}function G(K,$,Q,ce){var Se=Q.type;return Se===R?ue(K,$,Q.props.children,ce,Q.key):$!==null&&($.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Oe&&i_(Se)===$.type)?(ce=_($,Q.props),ce.ref=Wl(K,$,Q),ce.return=K,ce):(ce=Nh(Q.type,Q.key,Q.props,null,K.mode,ce),ce.ref=Wl(K,$,Q),ce.return=K,ce)}function J(K,$,Q,ce){return $===null||$.tag!==4||$.stateNode.containerInfo!==Q.containerInfo||$.stateNode.implementation!==Q.implementation?($=t1(Q,K.mode,ce),$.return=K,$):($=_($,Q.children||[]),$.return=K,$)}function ue(K,$,Q,ce,Se){return $===null||$.tag!==7?($=ta(Q,K.mode,ce,Se),$.return=K,$):($=_($,Q),$.return=K,$)}function le(K,$,Q){if(typeof $=="string"&&$!==""||typeof $=="number")return $=e1(""+$,K.mode,Q),$.return=K,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case H:return Q=Nh($.type,$.key,$.props,null,K.mode,Q),Q.ref=Wl(K,null,$),Q.return=K,Q;case W:return $=t1($,K.mode,Q),$.return=K,$;case Oe:var ce=$._init;return le(K,ce($._payload),Q)}if(jt($)||me($))return $=ta($,K.mode,Q,null),$.return=K,$;ah(K,$)}return null}function ae(K,$,Q,ce){var Se=$!==null?$.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Se!==null?null:z(K,$,""+Q,ce);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case H:return Q.key===Se?G(K,$,Q,ce):null;case W:return Q.key===Se?J(K,$,Q,ce):null;case Oe:return Se=Q._init,ae(K,$,Se(Q._payload),ce)}if(jt(Q)||me(Q))return Se!==null?null:ue(K,$,Q,ce,null);ah(K,Q)}return null}function ge(K,$,Q,ce,Se){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return K=K.get(Q)||null,z($,K,""+ce,Se);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case H:return K=K.get(ce.key===null?Q:ce.key)||null,G($,K,ce,Se);case W:return K=K.get(ce.key===null?Q:ce.key)||null,J($,K,ce,Se);case Oe:var Me=ce._init;return ge(K,$,Q,Me(ce._payload),Se)}if(jt(ce)||me(ce))return K=K.get(Q)||null,ue($,K,ce,Se,null);ah($,ce)}return null}function we(K,$,Q,ce){for(var Se=null,Me=null,Le=$,Ue=$=0,pn=null;Le!==null&&Ue<Q.length;Ue++){Le.index>Ue?(pn=Le,Le=null):pn=Le.sibling;var at=ae(K,Le,Q[Ue],ce);if(at===null){Le===null&&(Le=pn);break}a&&Le&&at.alternate===null&&l(K,Le),$=x(at,$,Ue),Me===null?Se=at:Me.sibling=at,Me=at,Le=pn}if(Ue===Q.length)return d(K,Le),Rt&&qs(K,Ue),Se;if(Le===null){for(;Ue<Q.length;Ue++)Le=le(K,Q[Ue],ce),Le!==null&&($=x(Le,$,Ue),Me===null?Se=Le:Me.sibling=Le,Me=Le);return Rt&&qs(K,Ue),Se}for(Le=g(K,Le);Ue<Q.length;Ue++)pn=ge(Le,K,Ue,Q[Ue],ce),pn!==null&&(a&&pn.alternate!==null&&Le.delete(pn.key===null?Ue:pn.key),$=x(pn,$,Ue),Me===null?Se=pn:Me.sibling=pn,Me=pn);return a&&Le.forEach(function(Yo){return l(K,Yo)}),Rt&&qs(K,Ue),Se}function Te(K,$,Q,ce){var Se=me(Q);if(typeof Se!="function")throw Error(t(150));if(Q=Se.call(Q),Q==null)throw Error(t(151));for(var Me=Se=null,Le=$,Ue=$=0,pn=null,at=Q.next();Le!==null&&!at.done;Ue++,at=Q.next()){Le.index>Ue?(pn=Le,Le=null):pn=Le.sibling;var Yo=ae(K,Le,at.value,ce);if(Yo===null){Le===null&&(Le=pn);break}a&&Le&&Yo.alternate===null&&l(K,Le),$=x(Yo,$,Ue),Me===null?Se=Yo:Me.sibling=Yo,Me=Yo,Le=pn}if(at.done)return d(K,Le),Rt&&qs(K,Ue),Se;if(Le===null){for(;!at.done;Ue++,at=Q.next())at=le(K,at.value,ce),at!==null&&($=x(at,$,Ue),Me===null?Se=at:Me.sibling=at,Me=at);return Rt&&qs(K,Ue),Se}for(Le=g(K,Le);!at.done;Ue++,at=Q.next())at=ge(Le,K,Ue,at.value,ce),at!==null&&(a&&at.alternate!==null&&Le.delete(at.key===null?Ue:at.key),$=x(at,$,Ue),Me===null?Se=at:Me.sibling=at,Me=at);return a&&Le.forEach(function(ib){return l(K,ib)}),Rt&&qs(K,Ue),Se}function Ht(K,$,Q,ce){if(typeof Q=="object"&&Q!==null&&Q.type===R&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case H:e:{for(var Se=Q.key,Me=$;Me!==null;){if(Me.key===Se){if(Se=Q.type,Se===R){if(Me.tag===7){d(K,Me.sibling),$=_(Me,Q.props.children),$.return=K,K=$;break e}}else if(Me.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Oe&&i_(Se)===Me.type){d(K,Me.sibling),$=_(Me,Q.props),$.ref=Wl(K,Me,Q),$.return=K,K=$;break e}d(K,Me);break}else l(K,Me);Me=Me.sibling}Q.type===R?($=ta(Q.props.children,K.mode,ce,Q.key),$.return=K,K=$):(ce=Nh(Q.type,Q.key,Q.props,null,K.mode,ce),ce.ref=Wl(K,$,Q),ce.return=K,K=ce)}return b(K);case W:e:{for(Me=Q.key;$!==null;){if($.key===Me)if($.tag===4&&$.stateNode.containerInfo===Q.containerInfo&&$.stateNode.implementation===Q.implementation){d(K,$.sibling),$=_($,Q.children||[]),$.return=K,K=$;break e}else{d(K,$);break}else l(K,$);$=$.sibling}$=t1(Q,K.mode,ce),$.return=K,K=$}return b(K);case Oe:return Me=Q._init,Ht(K,$,Me(Q._payload),ce)}if(jt(Q))return we(K,$,Q,ce);if(me(Q))return Te(K,$,Q,ce);ah(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,$!==null&&$.tag===6?(d(K,$.sibling),$=_($,Q),$.return=K,K=$):(d(K,$),$=e1(Q,K.mode,ce),$.return=K,K=$),b(K)):d(K,$)}return Ht}var su=o_(!0),s_=o_(!1),uh=Bo(null),lh=null,au=null,c0=null;function f0(){c0=au=lh=null}function h0(a){var l=uh.current;Tt(uh),a._currentValue=l}function d0(a,l,d){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===d)break;a=a.return}}function uu(a,l){lh=a,c0=au=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(tr=!0),a.firstContext=null)}function Dr(a){var l=a._currentValue;if(c0!==a)if(a={context:a,memoizedValue:l,next:null},au===null){if(lh===null)throw Error(t(308));au=a,lh.dependencies={lanes:0,firstContext:a}}else au=au.next=a;return l}var Ks=null;function p0(a){Ks===null?Ks=[a]:Ks.push(a)}function a_(a,l,d,g){var _=l.interleaved;return _===null?(d.next=d,p0(l)):(d.next=_.next,_.next=d),l.interleaved=d,io(a,g)}function io(a,l){a.lanes|=l;var d=a.alternate;for(d!==null&&(d.lanes|=l),d=a,a=a.return;a!==null;)a.childLanes|=l,d=a.alternate,d!==null&&(d.childLanes|=l),d=a,a=a.return;return d.tag===3?d.stateNode:null}var zo=!1;function m0(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function u_(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function oo(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function Ho(a,l,d){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(ot&2)!==0){var _=g.pending;return _===null?l.next=l:(l.next=_.next,_.next=l),g.pending=l,io(a,d)}return _=g.interleaved,_===null?(l.next=l,p0(g)):(l.next=_.next,_.next=l),g.interleaved=l,io(a,d)}function ch(a,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var g=l.lanes;g&=a.pendingLanes,d|=g,l.lanes=d,Il(a,d)}}function l_(a,l){var d=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var _=null,x=null;if(d=d.firstBaseUpdate,d!==null){do{var b={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};x===null?_=x=b:x=x.next=b,d=d.next}while(d!==null);x===null?_=x=l:x=x.next=l}else _=x=l;d={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:x,shared:g.shared,effects:g.effects},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=l}function fh(a,l,d,g){var _=a.updateQueue;zo=!1;var x=_.firstBaseUpdate,b=_.lastBaseUpdate,z=_.shared.pending;if(z!==null){_.shared.pending=null;var G=z,J=G.next;G.next=null,b===null?x=J:b.next=J,b=G;var ue=a.alternate;ue!==null&&(ue=ue.updateQueue,z=ue.lastBaseUpdate,z!==b&&(z===null?ue.firstBaseUpdate=J:z.next=J,ue.lastBaseUpdate=G))}if(x!==null){var le=_.baseState;b=0,ue=J=G=null,z=x;do{var ae=z.lane,ge=z.eventTime;if((g&ae)===ae){ue!==null&&(ue=ue.next={eventTime:ge,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var we=a,Te=z;switch(ae=l,ge=d,Te.tag){case 1:if(we=Te.payload,typeof we=="function"){le=we.call(ge,le,ae);break e}le=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Te.payload,ae=typeof we=="function"?we.call(ge,le,ae):we,ae==null)break e;le=de({},le,ae);break e;case 2:zo=!0}}z.callback!==null&&z.lane!==0&&(a.flags|=64,ae=_.effects,ae===null?_.effects=[z]:ae.push(z))}else ge={eventTime:ge,lane:ae,tag:z.tag,payload:z.payload,callback:z.callback,next:null},ue===null?(J=ue=ge,G=le):ue=ue.next=ge,b|=ae;if(z=z.next,z===null){if(z=_.shared.pending,z===null)break;ae=z,z=ae.next,ae.next=null,_.lastBaseUpdate=ae,_.shared.pending=null}}while(!0);if(ue===null&&(G=le),_.baseState=G,_.firstBaseUpdate=J,_.lastBaseUpdate=ue,l=_.shared.interleaved,l!==null){_=l;do b|=_.lane,_=_.next;while(_!==l)}else x===null&&(_.shared.lanes=0);Qs|=b,a.lanes=b,a.memoizedState=le}}function c_(a,l,d){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var g=a[l],_=g.callback;if(_!==null){if(g.callback=null,g=d,typeof _!="function")throw Error(t(191,_));_.call(g)}}}var $l={},Ii=Bo($l),ql=Bo($l),Kl=Bo($l);function Xs(a){if(a===$l)throw Error(t(174));return a}function g0(a,l){switch(xt(Kl,l),xt(ql,a),xt(Ii,$l),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Pa(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=Pa(l,a)}Tt(Ii),xt(Ii,l)}function lu(){Tt(Ii),Tt(ql),Tt(Kl)}function f_(a){Xs(Kl.current);var l=Xs(Ii.current),d=Pa(l,a.type);l!==d&&(xt(ql,a),xt(Ii,d))}function v0(a){ql.current===a&&(Tt(Ii),Tt(ql))}var Nt=Bo(0);function hh(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var y0=[];function _0(){for(var a=0;a<y0.length;a++)y0[a]._workInProgressVersionPrimary=null;y0.length=0}var dh=j.ReactCurrentDispatcher,x0=j.ReactCurrentBatchConfig,Ys=0,Dt=null,en=null,hn=null,ph=!1,Xl=!1,Yl=0,I4=0;function Mn(){throw Error(t(321))}function w0(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!Xr(a[d],l[d]))return!1;return!0}function E0(a,l,d,g,_,x){if(Ys=x,Dt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,dh.current=a===null||a.memoizedState===null?P4:N4,a=d(g,_),Xl){x=0;do{if(Xl=!1,Yl=0,25<=x)throw Error(t(301));x+=1,hn=en=null,l.updateQueue=null,dh.current=D4,a=d(g,_)}while(Xl)}if(dh.current=vh,l=en!==null&&en.next!==null,Ys=0,hn=en=Dt=null,ph=!1,l)throw Error(t(300));return a}function A0(){var a=Yl!==0;return Yl=0,a}function Si(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Dt.memoizedState=hn=a:hn=hn.next=a,hn}function Or(){if(en===null){var a=Dt.alternate;a=a!==null?a.memoizedState:null}else a=en.next;var l=hn===null?Dt.memoizedState:hn.next;if(l!==null)hn=l,en=a;else{if(a===null)throw Error(t(310));en=a,a={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},hn===null?Dt.memoizedState=hn=a:hn=hn.next=a}return hn}function Ql(a,l){return typeof l=="function"?l(a):l}function T0(a){var l=Or(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=a;var g=en,_=g.baseQueue,x=d.pending;if(x!==null){if(_!==null){var b=_.next;_.next=x.next,x.next=b}g.baseQueue=_=x,d.pending=null}if(_!==null){x=_.next,g=g.baseState;var z=b=null,G=null,J=x;do{var ue=J.lane;if((Ys&ue)===ue)G!==null&&(G=G.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),g=J.hasEagerState?J.eagerState:a(g,J.action);else{var le={lane:ue,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};G===null?(z=G=le,b=g):G=G.next=le,Dt.lanes|=ue,Qs|=ue}J=J.next}while(J!==null&&J!==x);G===null?b=g:G.next=z,Xr(g,l.memoizedState)||(tr=!0),l.memoizedState=g,l.baseState=b,l.baseQueue=G,d.lastRenderedState=g}if(a=d.interleaved,a!==null){_=a;do x=_.lane,Dt.lanes|=x,Qs|=x,_=_.next;while(_!==a)}else _===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function C0(a){var l=Or(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=a;var g=d.dispatch,_=d.pending,x=l.memoizedState;if(_!==null){d.pending=null;var b=_=_.next;do x=a(x,b.action),b=b.next;while(b!==_);Xr(x,l.memoizedState)||(tr=!0),l.memoizedState=x,l.baseQueue===null&&(l.baseState=x),d.lastRenderedState=x}return[x,g]}function h_(){}function d_(a,l){var d=Dt,g=Or(),_=l(),x=!Xr(g.memoizedState,_);if(x&&(g.memoizedState=_,tr=!0),g=g.queue,I0(g_.bind(null,d,g,a),[a]),g.getSnapshot!==l||x||hn!==null&&hn.memoizedState.tag&1){if(d.flags|=2048,Zl(9,m_.bind(null,d,g,_,l),void 0,null),dn===null)throw Error(t(349));(Ys&30)!==0||p_(d,l,_)}return _}function p_(a,l,d){a.flags|=16384,a={getSnapshot:l,value:d},l=Dt.updateQueue,l===null?(l={lastEffect:null,stores:null},Dt.updateQueue=l,l.stores=[a]):(d=l.stores,d===null?l.stores=[a]:d.push(a))}function m_(a,l,d,g){l.value=d,l.getSnapshot=g,v_(l)&&y_(a)}function g_(a,l,d){return d(function(){v_(l)&&y_(a)})}function v_(a){var l=a.getSnapshot;a=a.value;try{var d=l();return!Xr(a,d)}catch{return!0}}function y_(a){var l=io(a,1);l!==null&&ei(l,a,1,-1)}function __(a){var l=Si();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ql,lastRenderedState:a},l.queue=a,a=a.dispatch=R4.bind(null,Dt,a),[l.memoizedState,a]}function Zl(a,l,d,g){return a={tag:a,create:l,destroy:d,deps:g,next:null},l=Dt.updateQueue,l===null?(l={lastEffect:null,stores:null},Dt.updateQueue=l,l.lastEffect=a.next=a):(d=l.lastEffect,d===null?l.lastEffect=a.next=a:(g=d.next,d.next=a,a.next=g,l.lastEffect=a)),a}function x_(){return Or().memoizedState}function mh(a,l,d,g){var _=Si();Dt.flags|=a,_.memoizedState=Zl(1|l,d,void 0,g===void 0?null:g)}function gh(a,l,d,g){var _=Or();g=g===void 0?null:g;var x=void 0;if(en!==null){var b=en.memoizedState;if(x=b.destroy,g!==null&&w0(g,b.deps)){_.memoizedState=Zl(l,d,x,g);return}}Dt.flags|=a,_.memoizedState=Zl(1|l,d,x,g)}function w_(a,l){return mh(8390656,8,a,l)}function I0(a,l){return gh(2048,8,a,l)}function E_(a,l){return gh(4,2,a,l)}function A_(a,l){return gh(4,4,a,l)}function T_(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function C_(a,l,d){return d=d!=null?d.concat([a]):null,gh(4,4,T_.bind(null,l,a),d)}function S0(){}function I_(a,l){var d=Or();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&w0(l,g[1])?g[0]:(d.memoizedState=[a,l],a)}function S_(a,l){var d=Or();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&w0(l,g[1])?g[0]:(a=a(),d.memoizedState=[a,l],a)}function b_(a,l,d){return(Ys&21)===0?(a.baseState&&(a.baseState=!1,tr=!0),a.memoizedState=d):(Xr(d,l)||(d=Tl(),Dt.lanes|=d,Qs|=d,a.baseState=!0),l)}function S4(a,l){var d=tt;tt=d!==0&&4>d?d:4,a(!0);var g=x0.transition;x0.transition={};try{a(!1),l()}finally{tt=d,x0.transition=g}}function R_(){return Or().memoizedState}function b4(a,l,d){var g=qo(a);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},P_(a))N_(l,d);else if(d=a_(a,l,d,g),d!==null){var _=$n();ei(d,a,g,_),D_(d,l,g)}}function R4(a,l,d){var g=qo(a),_={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(P_(a))N_(l,_);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=l.lastRenderedReducer,x!==null))try{var b=l.lastRenderedState,z=x(b,d);if(_.hasEagerState=!0,_.eagerState=z,Xr(z,b)){var G=l.interleaved;G===null?(_.next=_,p0(l)):(_.next=G.next,G.next=_),l.interleaved=_;return}}catch{}finally{}d=a_(a,l,_,g),d!==null&&(_=$n(),ei(d,a,g,_),D_(d,l,g))}}function P_(a){var l=a.alternate;return a===Dt||l!==null&&l===Dt}function N_(a,l){Xl=ph=!0;var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}function D_(a,l,d){if((d&4194240)!==0){var g=l.lanes;g&=a.pendingLanes,d|=g,l.lanes=d,Il(a,d)}}var vh={readContext:Dr,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useInsertionEffect:Mn,useLayoutEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useMutableSource:Mn,useSyncExternalStore:Mn,useId:Mn,unstable_isNewReconciler:!1},P4={readContext:Dr,useCallback:function(a,l){return Si().memoizedState=[a,l===void 0?null:l],a},useContext:Dr,useEffect:w_,useImperativeHandle:function(a,l,d){return d=d!=null?d.concat([a]):null,mh(4194308,4,T_.bind(null,l,a),d)},useLayoutEffect:function(a,l){return mh(4194308,4,a,l)},useInsertionEffect:function(a,l){return mh(4,2,a,l)},useMemo:function(a,l){var d=Si();return l=l===void 0?null:l,a=a(),d.memoizedState=[a,l],a},useReducer:function(a,l,d){var g=Si();return l=d!==void 0?d(l):l,g.memoizedState=g.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},g.queue=a,a=a.dispatch=b4.bind(null,Dt,a),[g.memoizedState,a]},useRef:function(a){var l=Si();return a={current:a},l.memoizedState=a},useState:__,useDebugValue:S0,useDeferredValue:function(a){return Si().memoizedState=a},useTransition:function(){var a=__(!1),l=a[0];return a=S4.bind(null,a[1]),Si().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,d){var g=Dt,_=Si();if(Rt){if(d===void 0)throw Error(t(407));d=d()}else{if(d=l(),dn===null)throw Error(t(349));(Ys&30)!==0||p_(g,l,d)}_.memoizedState=d;var x={value:d,getSnapshot:l};return _.queue=x,w_(g_.bind(null,g,x,a),[a]),g.flags|=2048,Zl(9,m_.bind(null,g,x,d,l),void 0,null),d},useId:function(){var a=Si(),l=dn.identifierPrefix;if(Rt){var d=ro,g=no;d=(g&~(1<<32-dr(g)-1)).toString(32)+d,l=":"+l+"R"+d,d=Yl++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=I4++,l=":"+l+"r"+d.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},N4={readContext:Dr,useCallback:I_,useContext:Dr,useEffect:I0,useImperativeHandle:C_,useInsertionEffect:E_,useLayoutEffect:A_,useMemo:S_,useReducer:T0,useRef:x_,useState:function(){return T0(Ql)},useDebugValue:S0,useDeferredValue:function(a){var l=Or();return b_(l,en.memoizedState,a)},useTransition:function(){var a=T0(Ql)[0],l=Or().memoizedState;return[a,l]},useMutableSource:h_,useSyncExternalStore:d_,useId:R_,unstable_isNewReconciler:!1},D4={readContext:Dr,useCallback:I_,useContext:Dr,useEffect:I0,useImperativeHandle:C_,useInsertionEffect:E_,useLayoutEffect:A_,useMemo:S_,useReducer:C0,useRef:x_,useState:function(){return C0(Ql)},useDebugValue:S0,useDeferredValue:function(a){var l=Or();return en===null?l.memoizedState=a:b_(l,en.memoizedState,a)},useTransition:function(){var a=C0(Ql)[0],l=Or().memoizedState;return[a,l]},useMutableSource:h_,useSyncExternalStore:d_,useId:R_,unstable_isNewReconciler:!1};function Qr(a,l){if(a&&a.defaultProps){l=de({},l),a=a.defaultProps;for(var d in a)l[d]===void 0&&(l[d]=a[d]);return l}return l}function b0(a,l,d,g){l=a.memoizedState,d=d(g,l),d=d==null?l:de({},l,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var yh={isMounted:function(a){return(a=a._reactInternals)?qr(a)===a:!1},enqueueSetState:function(a,l,d){a=a._reactInternals;var g=$n(),_=qo(a),x=oo(g,_);x.payload=l,d!=null&&(x.callback=d),l=Ho(a,x,_),l!==null&&(ei(l,a,_,g),ch(l,a,_))},enqueueReplaceState:function(a,l,d){a=a._reactInternals;var g=$n(),_=qo(a),x=oo(g,_);x.tag=1,x.payload=l,d!=null&&(x.callback=d),l=Ho(a,x,_),l!==null&&(ei(l,a,_,g),ch(l,a,_))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var d=$n(),g=qo(a),_=oo(d,g);_.tag=2,l!=null&&(_.callback=l),l=Ho(a,_,g),l!==null&&(ei(l,a,g,d),ch(l,a,g))}};function O_(a,l,d,g,_,x,b){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,x,b):l.prototype&&l.prototype.isPureReactComponent?!Fl(d,g)||!Fl(_,x):!0}function k_(a,l,d){var g=!1,_=Uo,x=l.contextType;return typeof x=="object"&&x!==null?x=Dr(x):(_=er(l)?Ws:kn.current,g=l.contextTypes,x=(g=g!=null)?nu(a,_):Uo),l=new l(d,x),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=yh,a.stateNode=l,l._reactInternals=a,g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=_,a.__reactInternalMemoizedMaskedChildContext=x),l}function M_(a,l,d,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==a&&yh.enqueueReplaceState(l,l.state,null)}function R0(a,l,d,g){var _=a.stateNode;_.props=d,_.state=a.memoizedState,_.refs={},m0(a);var x=l.contextType;typeof x=="object"&&x!==null?_.context=Dr(x):(x=er(l)?Ws:kn.current,_.context=nu(a,x)),_.state=a.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(b0(a,l,x,d),_.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(l=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),l!==_.state&&yh.enqueueReplaceState(_,_.state,null),fh(a,d,_,g),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308)}function cu(a,l){try{var d="",g=l;do d+=Ge(g),g=g.return;while(g);var _=d}catch(x){_=`
Error generating stack: `+x.message+`
`+x.stack}return{value:a,source:l,stack:_,digest:null}}function P0(a,l,d){return{value:a,source:null,stack:d??null,digest:l??null}}function N0(a,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var O4=typeof WeakMap=="function"?WeakMap:Map;function L_(a,l,d){d=oo(-1,d),d.tag=3,d.payload={element:null};var g=l.value;return d.callback=function(){Ch||(Ch=!0,$0=g),N0(a,l)},d}function V_(a,l,d){d=oo(-1,d),d.tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var _=l.value;d.payload=function(){return g(_)},d.callback=function(){N0(a,l)}}var x=a.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(d.callback=function(){N0(a,l),typeof g!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})}),d}function F_(a,l,d){var g=a.pingCache;if(g===null){g=a.pingCache=new O4;var _=new Set;g.set(l,_)}else _=g.get(l),_===void 0&&(_=new Set,g.set(l,_));_.has(d)||(_.add(d),a=q4.bind(null,a,l,d),l.then(a,a))}function B_(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function U_(a,l,d,g,_){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=oo(-1,1),l.tag=2,Ho(d,l,1))),d.lanes|=1),a):(a.flags|=65536,a.lanes=_,a)}var k4=j.ReactCurrentOwner,tr=!1;function Wn(a,l,d,g){l.child=a===null?s_(l,null,d,g):su(l,a.child,d,g)}function j_(a,l,d,g,_){d=d.render;var x=l.ref;return uu(l,_),g=E0(a,l,d,g,x,_),d=A0(),a!==null&&!tr?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~_,so(a,l,_)):(Rt&&d&&o0(l),l.flags|=1,Wn(a,l,g,_),l.child)}function z_(a,l,d,g,_){if(a===null){var x=d.type;return typeof x=="function"&&!J0(x)&&x.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=x,H_(a,l,x,g,_)):(a=Nh(d.type,null,g,l,l.mode,_),a.ref=l.ref,a.return=l,l.child=a)}if(x=a.child,(a.lanes&_)===0){var b=x.memoizedProps;if(d=d.compare,d=d!==null?d:Fl,d(b,g)&&a.ref===l.ref)return so(a,l,_)}return l.flags|=1,a=Xo(x,g),a.ref=l.ref,a.return=l,l.child=a}function H_(a,l,d,g,_){if(a!==null){var x=a.memoizedProps;if(Fl(x,g)&&a.ref===l.ref)if(tr=!1,l.pendingProps=g=x,(a.lanes&_)!==0)(a.flags&131072)!==0&&(tr=!0);else return l.lanes=a.lanes,so(a,l,_)}return D0(a,l,d,g,_)}function G_(a,l,d){var g=l.pendingProps,_=g.children,x=a!==null?a.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(hu,xr),xr|=d;else{if((d&1073741824)===0)return a=x!==null?x.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,xt(hu,xr),xr|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=x!==null?x.baseLanes:d,xt(hu,xr),xr|=g}else x!==null?(g=x.baseLanes|d,l.memoizedState=null):g=d,xt(hu,xr),xr|=g;return Wn(a,l,_,d),l.child}function W_(a,l){var d=l.ref;(a===null&&d!==null||a!==null&&a.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function D0(a,l,d,g,_){var x=er(d)?Ws:kn.current;return x=nu(l,x),uu(l,_),d=E0(a,l,d,g,x,_),g=A0(),a!==null&&!tr?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~_,so(a,l,_)):(Rt&&g&&o0(l),l.flags|=1,Wn(a,l,d,_),l.child)}function $_(a,l,d,g,_){if(er(d)){var x=!0;nh(l)}else x=!1;if(uu(l,_),l.stateNode===null)xh(a,l),k_(l,d,g),R0(l,d,g,_),g=!0;else if(a===null){var b=l.stateNode,z=l.memoizedProps;b.props=z;var G=b.context,J=d.contextType;typeof J=="object"&&J!==null?J=Dr(J):(J=er(d)?Ws:kn.current,J=nu(l,J));var ue=d.getDerivedStateFromProps,le=typeof ue=="function"||typeof b.getSnapshotBeforeUpdate=="function";le||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(z!==g||G!==J)&&M_(l,b,g,J),zo=!1;var ae=l.memoizedState;b.state=ae,fh(l,g,b,_),G=l.memoizedState,z!==g||ae!==G||Jn.current||zo?(typeof ue=="function"&&(b0(l,d,ue,g),G=l.memoizedState),(z=zo||O_(l,d,z,g,ae,G,J))?(le||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(l.flags|=4194308)):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=G),b.props=g,b.state=G,b.context=J,g=z):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{b=l.stateNode,u_(a,l),z=l.memoizedProps,J=l.type===l.elementType?z:Qr(l.type,z),b.props=J,le=l.pendingProps,ae=b.context,G=d.contextType,typeof G=="object"&&G!==null?G=Dr(G):(G=er(d)?Ws:kn.current,G=nu(l,G));var ge=d.getDerivedStateFromProps;(ue=typeof ge=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(z!==le||ae!==G)&&M_(l,b,g,G),zo=!1,ae=l.memoizedState,b.state=ae,fh(l,g,b,_);var we=l.memoizedState;z!==le||ae!==we||Jn.current||zo?(typeof ge=="function"&&(b0(l,d,ge,g),we=l.memoizedState),(J=zo||O_(l,d,J,g,ae,we,G)||!1)?(ue||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(g,we,G),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(g,we,G)),typeof b.componentDidUpdate=="function"&&(l.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof b.componentDidUpdate!="function"||z===a.memoizedProps&&ae===a.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||z===a.memoizedProps&&ae===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=we),b.props=g,b.state=we,b.context=G,g=J):(typeof b.componentDidUpdate!="function"||z===a.memoizedProps&&ae===a.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||z===a.memoizedProps&&ae===a.memoizedState||(l.flags|=1024),g=!1)}return O0(a,l,d,g,x,_)}function O0(a,l,d,g,_,x){W_(a,l);var b=(l.flags&128)!==0;if(!g&&!b)return _&&Qy(l,d,!1),so(a,l,x);g=l.stateNode,k4.current=l;var z=b&&typeof d.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,a!==null&&b?(l.child=su(l,a.child,null,x),l.child=su(l,null,z,x)):Wn(a,l,z,x),l.memoizedState=g.state,_&&Qy(l,d,!0),l.child}function q_(a){var l=a.stateNode;l.pendingContext?Xy(a,l.pendingContext,l.pendingContext!==l.context):l.context&&Xy(a,l.context,!1),g0(a,l.containerInfo)}function K_(a,l,d,g,_){return ou(),l0(_),l.flags|=256,Wn(a,l,d,g),l.child}var k0={dehydrated:null,treeContext:null,retryLane:0};function M0(a){return{baseLanes:a,cachePool:null,transitions:null}}function X_(a,l,d){var g=l.pendingProps,_=Nt.current,x=!1,b=(l.flags&128)!==0,z;if((z=b)||(z=a!==null&&a.memoizedState===null?!1:(_&2)!==0),z?(x=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(_|=1),xt(Nt,_&1),a===null)return u0(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(b=g.children,a=g.fallback,x?(g=l.mode,x=l.child,b={mode:"hidden",children:b},(g&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=b):x=Dh(b,g,0,null),a=ta(a,g,d,null),x.return=l,a.return=l,x.sibling=a,l.child=x,l.child.memoizedState=M0(d),l.memoizedState=k0,a):L0(l,b));if(_=a.memoizedState,_!==null&&(z=_.dehydrated,z!==null))return M4(a,l,b,g,z,_,d);if(x){x=g.fallback,b=l.mode,_=a.child,z=_.sibling;var G={mode:"hidden",children:g.children};return(b&1)===0&&l.child!==_?(g=l.child,g.childLanes=0,g.pendingProps=G,l.deletions=null):(g=Xo(_,G),g.subtreeFlags=_.subtreeFlags&14680064),z!==null?x=Xo(z,x):(x=ta(x,b,d,null),x.flags|=2),x.return=l,g.return=l,g.sibling=x,l.child=g,g=x,x=l.child,b=a.child.memoizedState,b=b===null?M0(d):{baseLanes:b.baseLanes|d,cachePool:null,transitions:b.transitions},x.memoizedState=b,x.childLanes=a.childLanes&~d,l.memoizedState=k0,g}return x=a.child,a=x.sibling,g=Xo(x,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=d),g.return=l,g.sibling=null,a!==null&&(d=l.deletions,d===null?(l.deletions=[a],l.flags|=16):d.push(a)),l.child=g,l.memoizedState=null,g}function L0(a,l){return l=Dh({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function _h(a,l,d,g){return g!==null&&l0(g),su(l,a.child,null,d),a=L0(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function M4(a,l,d,g,_,x,b){if(d)return l.flags&256?(l.flags&=-257,g=P0(Error(t(422))),_h(a,l,b,g)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(x=g.fallback,_=l.mode,g=Dh({mode:"visible",children:g.children},_,0,null),x=ta(x,_,b,null),x.flags|=2,g.return=l,x.return=l,g.sibling=x,l.child=g,(l.mode&1)!==0&&su(l,a.child,null,b),l.child.memoizedState=M0(b),l.memoizedState=k0,x);if((l.mode&1)===0)return _h(a,l,b,null);if(_.data==="$!"){if(g=_.nextSibling&&_.nextSibling.dataset,g)var z=g.dgst;return g=z,x=Error(t(419)),g=P0(x,g,void 0),_h(a,l,b,g)}if(z=(b&a.childLanes)!==0,tr||z){if(g=dn,g!==null){switch(b&-b){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(g.suspendedLanes|b))!==0?0:_,_!==0&&_!==x.retryLane&&(x.retryLane=_,io(a,_),ei(g,a,_,-1))}return Z0(),g=P0(Error(t(421))),_h(a,l,b,g)}return _.data==="$?"?(l.flags|=128,l.child=a.child,l=K4.bind(null,a),_._reactRetry=l,null):(a=x.treeContext,_r=Fo(_.nextSibling),yr=l,Rt=!0,Yr=null,a!==null&&(Pr[Nr++]=no,Pr[Nr++]=ro,Pr[Nr++]=$s,no=a.id,ro=a.overflow,$s=l),l=L0(l,g.children),l.flags|=4096,l)}function Y_(a,l,d){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),d0(a.return,l,d)}function V0(a,l,d,g,_){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:_}:(x.isBackwards=l,x.rendering=null,x.renderingStartTime=0,x.last=g,x.tail=d,x.tailMode=_)}function Q_(a,l,d){var g=l.pendingProps,_=g.revealOrder,x=g.tail;if(Wn(a,l,g.children,d),g=Nt.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Y_(a,d,l);else if(a.tag===19)Y_(a,d,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(xt(Nt,g),(l.mode&1)===0)l.memoizedState=null;else switch(_){case"forwards":for(d=l.child,_=null;d!==null;)a=d.alternate,a!==null&&hh(a)===null&&(_=d),d=d.sibling;d=_,d===null?(_=l.child,l.child=null):(_=d.sibling,d.sibling=null),V0(l,!1,_,d,x);break;case"backwards":for(d=null,_=l.child,l.child=null;_!==null;){if(a=_.alternate,a!==null&&hh(a)===null){l.child=_;break}a=_.sibling,_.sibling=d,d=_,_=a}V0(l,!0,d,null,x);break;case"together":V0(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function xh(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function so(a,l,d){if(a!==null&&(l.dependencies=a.dependencies),Qs|=l.lanes,(d&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(t(153));if(l.child!==null){for(a=l.child,d=Xo(a,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,d=d.sibling=Xo(a,a.pendingProps),d.return=l;d.sibling=null}return l.child}function L4(a,l,d){switch(l.tag){case 3:q_(l),ou();break;case 5:f_(l);break;case 1:er(l.type)&&nh(l);break;case 4:g0(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,_=l.memoizedProps.value;xt(uh,g._currentValue),g._currentValue=_;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(xt(Nt,Nt.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?X_(a,l,d):(xt(Nt,Nt.current&1),a=so(a,l,d),a!==null?a.sibling:null);xt(Nt,Nt.current&1);break;case 19:if(g=(d&l.childLanes)!==0,(a.flags&128)!==0){if(g)return Q_(a,l,d);l.flags|=128}if(_=l.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),xt(Nt,Nt.current),g)break;return null;case 22:case 23:return l.lanes=0,G_(a,l,d)}return so(a,l,d)}var Z_,F0,J_,ex;Z_=function(a,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)a.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},F0=function(){},J_=function(a,l,d,g){var _=a.memoizedProps;if(_!==g){a=l.stateNode,Xs(Ii.current);var x=null;switch(d){case"input":_=ci(a,_),g=ci(a,g),x=[];break;case"select":_=de({},_,{value:void 0}),g=de({},g,{value:void 0}),x=[];break;case"textarea":_=dl(a,_),g=dl(a,g),x=[];break;default:typeof _.onClick!="function"&&typeof g.onClick=="function"&&(a.onclick=Jf)}$r(d,g);var b;d=null;for(J in _)if(!g.hasOwnProperty(J)&&_.hasOwnProperty(J)&&_[J]!=null)if(J==="style"){var z=_[J];for(b in z)z.hasOwnProperty(b)&&(d||(d={}),d[b]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(i.hasOwnProperty(J)?x||(x=[]):(x=x||[]).push(J,null));for(J in g){var G=g[J];if(z=_?.[J],g.hasOwnProperty(J)&&G!==z&&(G!=null||z!=null))if(J==="style")if(z){for(b in z)!z.hasOwnProperty(b)||G&&G.hasOwnProperty(b)||(d||(d={}),d[b]="");for(b in G)G.hasOwnProperty(b)&&z[b]!==G[b]&&(d||(d={}),d[b]=G[b])}else d||(x||(x=[]),x.push(J,d)),d=G;else J==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,z=z?z.__html:void 0,G!=null&&z!==G&&(x=x||[]).push(J,G)):J==="children"?typeof G!="string"&&typeof G!="number"||(x=x||[]).push(J,""+G):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(i.hasOwnProperty(J)?(G!=null&&J==="onScroll"&&At("scroll",a),x||z===G||(x=[])):(x=x||[]).push(J,G))}d&&(x=x||[]).push("style",d);var J=x;(l.updateQueue=J)&&(l.flags|=4)}},ex=function(a,l,d,g){d!==g&&(l.flags|=4)};function Jl(a,l){if(!Rt)switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Ln(a){var l=a.alternate!==null&&a.alternate.child===a.child,d=0,g=0;if(l)for(var _=a.child;_!==null;)d|=_.lanes|_.childLanes,g|=_.subtreeFlags&14680064,g|=_.flags&14680064,_.return=a,_=_.sibling;else for(_=a.child;_!==null;)d|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=a,_=_.sibling;return a.subtreeFlags|=g,a.childLanes=d,l}function V4(a,l,d){var g=l.pendingProps;switch(s0(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(l),null;case 1:return er(l.type)&&th(),Ln(l),null;case 3:return g=l.stateNode,lu(),Tt(Jn),Tt(kn),_0(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(a===null||a.child===null)&&(sh(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Yr!==null&&(X0(Yr),Yr=null))),F0(a,l),Ln(l),null;case 5:v0(l);var _=Xs(Kl.current);if(d=l.type,a!==null&&l.stateNode!=null)J_(a,l,d,g,_),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(t(166));return Ln(l),null}if(a=Xs(Ii.current),sh(l)){g=l.stateNode,d=l.type;var x=l.memoizedProps;switch(g[Ci]=l,g[Hl]=x,a=(l.mode&1)!==0,d){case"dialog":At("cancel",g),At("close",g);break;case"iframe":case"object":case"embed":At("load",g);break;case"video":case"audio":for(_=0;_<Ul.length;_++)At(Ul[_],g);break;case"source":At("error",g);break;case"img":case"image":case"link":At("error",g),At("load",g);break;case"details":At("toggle",g);break;case"input":Tf(g,x),At("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!x.multiple},At("invalid",g);break;case"textarea":pl(g,x),At("invalid",g)}$r(d,x),_=null;for(var b in x)if(x.hasOwnProperty(b)){var z=x[b];b==="children"?typeof z=="string"?g.textContent!==z&&(x.suppressHydrationWarning!==!0&&Zf(g.textContent,z,a),_=["children",z]):typeof z=="number"&&g.textContent!==""+z&&(x.suppressHydrationWarning!==!0&&Zf(g.textContent,z,a),_=["children",""+z]):i.hasOwnProperty(b)&&z!=null&&b==="onScroll"&&At("scroll",g)}switch(d){case"input":et(g),hl(g,x,!0);break;case"textarea":et(g),Eo(g);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(g.onclick=Jf)}g=_,l.updateQueue=g,g!==null&&(l.flags|=4)}else{b=_.nodeType===9?_:_.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=ml(d)),a==="http://www.w3.org/1999/xhtml"?d==="script"?(a=b.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof g.is=="string"?a=b.createElement(d,{is:g.is}):(a=b.createElement(d),d==="select"&&(b=a,g.multiple?b.multiple=!0:g.size&&(b.size=g.size))):a=b.createElementNS(a,d),a[Ci]=l,a[Hl]=g,Z_(a,l,!1,!1),l.stateNode=a;e:{switch(b=Da(d,g),d){case"dialog":At("cancel",a),At("close",a),_=g;break;case"iframe":case"object":case"embed":At("load",a),_=g;break;case"video":case"audio":for(_=0;_<Ul.length;_++)At(Ul[_],a);_=g;break;case"source":At("error",a),_=g;break;case"img":case"image":case"link":At("error",a),At("load",a),_=g;break;case"details":At("toggle",a),_=g;break;case"input":Tf(a,g),_=ci(a,g),At("invalid",a);break;case"option":_=g;break;case"select":a._wrapperState={wasMultiple:!!g.multiple},_=de({},g,{value:void 0}),At("invalid",a);break;case"textarea":pl(a,g),_=dl(a,g),At("invalid",a);break;default:_=g}$r(d,_),z=_;for(x in z)if(z.hasOwnProperty(x)){var G=z[x];x==="style"?Na(a,G):x==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&If(a,G)):x==="children"?typeof G=="string"?(d!=="textarea"||G!=="")&&Ps(a,G):typeof G=="number"&&Ps(a,""+G):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(i.hasOwnProperty(x)?G!=null&&x==="onScroll"&&At("scroll",a):G!=null&&M(a,x,G,b))}switch(d){case"input":et(a),hl(a,g,!1);break;case"textarea":et(a),Eo(a);break;case"option":g.value!=null&&a.setAttribute("value",""+Ke(g.value));break;case"select":a.multiple=!!g.multiple,x=g.value,x!=null?Wr(a,!!g.multiple,x,!1):g.defaultValue!=null&&Wr(a,!!g.multiple,g.defaultValue,!0);break;default:typeof _.onClick=="function"&&(a.onclick=Jf)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Ln(l),null;case 6:if(a&&l.stateNode!=null)ex(a,l,a.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(t(166));if(d=Xs(Kl.current),Xs(Ii.current),sh(l)){if(g=l.stateNode,d=l.memoizedProps,g[Ci]=l,(x=g.nodeValue!==d)&&(a=yr,a!==null))switch(a.tag){case 3:Zf(g.nodeValue,d,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Zf(g.nodeValue,d,(a.mode&1)!==0)}x&&(l.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[Ci]=l,l.stateNode=g}return Ln(l),null;case 13:if(Tt(Nt),g=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Rt&&_r!==null&&(l.mode&1)!==0&&(l.flags&128)===0)r_(),ou(),l.flags|=98560,x=!1;else if(x=sh(l),g!==null&&g.dehydrated!==null){if(a===null){if(!x)throw Error(t(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[Ci]=l}else ou(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ln(l),x=!1}else Yr!==null&&(X0(Yr),Yr=null),x=!0;if(!x)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(g=g!==null,g!==(a!==null&&a.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(Nt.current&1)!==0?tn===0&&(tn=3):Z0())),l.updateQueue!==null&&(l.flags|=4),Ln(l),null);case 4:return lu(),F0(a,l),a===null&&jl(l.stateNode.containerInfo),Ln(l),null;case 10:return h0(l.type._context),Ln(l),null;case 17:return er(l.type)&&th(),Ln(l),null;case 19:if(Tt(Nt),x=l.memoizedState,x===null)return Ln(l),null;if(g=(l.flags&128)!==0,b=x.rendering,b===null)if(g)Jl(x,!1);else{if(tn!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(b=hh(a),b!==null){for(l.flags|=128,Jl(x,!1),g=b.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=d,d=l.child;d!==null;)x=d,a=g,x.flags&=14680066,b=x.alternate,b===null?(x.childLanes=0,x.lanes=a,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=b.childLanes,x.lanes=b.lanes,x.child=b.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=b.memoizedProps,x.memoizedState=b.memoizedState,x.updateQueue=b.updateQueue,x.type=b.type,a=b.dependencies,x.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),d=d.sibling;return xt(Nt,Nt.current&1|2),l.child}a=a.sibling}x.tail!==null&&Et()>du&&(l.flags|=128,g=!0,Jl(x,!1),l.lanes=4194304)}else{if(!g)if(a=hh(b),a!==null){if(l.flags|=128,g=!0,d=a.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),Jl(x,!0),x.tail===null&&x.tailMode==="hidden"&&!b.alternate&&!Rt)return Ln(l),null}else 2*Et()-x.renderingStartTime>du&&d!==1073741824&&(l.flags|=128,g=!0,Jl(x,!1),l.lanes=4194304);x.isBackwards?(b.sibling=l.child,l.child=b):(d=x.last,d!==null?d.sibling=b:l.child=b,x.last=b)}return x.tail!==null?(l=x.tail,x.rendering=l,x.tail=l.sibling,x.renderingStartTime=Et(),l.sibling=null,d=Nt.current,xt(Nt,g?d&1|2:d&1),l):(Ln(l),null);case 22:case 23:return Q0(),g=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(xr&1073741824)!==0&&(Ln(l),l.subtreeFlags&6&&(l.flags|=8192)):Ln(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function F4(a,l){switch(s0(l),l.tag){case 1:return er(l.type)&&th(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return lu(),Tt(Jn),Tt(kn),_0(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return v0(l),null;case 13:if(Tt(Nt),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(t(340));ou()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Tt(Nt),null;case 4:return lu(),null;case 10:return h0(l.type._context),null;case 22:case 23:return Q0(),null;case 24:return null;default:return null}}var wh=!1,Vn=!1,B4=typeof WeakSet=="function"?WeakSet:Set,ye=null;function fu(a,l){var d=a.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){Ft(a,l,g)}else d.current=null}function B0(a,l,d){try{d()}catch(g){Ft(a,l,g)}}var tx=!1;function U4(a,l){if(Qp=Qi,a=Oy(),Hp(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var _=g.anchorOffset,x=g.focusNode;g=g.focusOffset;try{d.nodeType,x.nodeType}catch{d=null;break e}var b=0,z=-1,G=-1,J=0,ue=0,le=a,ae=null;t:for(;;){for(var ge;le!==d||_!==0&&le.nodeType!==3||(z=b+_),le!==x||g!==0&&le.nodeType!==3||(G=b+g),le.nodeType===3&&(b+=le.nodeValue.length),(ge=le.firstChild)!==null;)ae=le,le=ge;for(;;){if(le===a)break t;if(ae===d&&++J===_&&(z=b),ae===x&&++ue===g&&(G=b),(ge=le.nextSibling)!==null)break;le=ae,ae=le.parentNode}le=ge}d=z===-1||G===-1?null:{start:z,end:G}}else d=null}d=d||{start:0,end:0}}else d=null;for(Zp={focusedElem:a,selectionRange:d},Qi=!1,ye=l;ye!==null;)if(l=ye,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,ye=a;else for(;ye!==null;){l=ye;try{var we=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var Te=we.memoizedProps,Ht=we.memoizedState,K=l.stateNode,$=K.getSnapshotBeforeUpdate(l.elementType===l.type?Te:Qr(l.type,Te),Ht);K.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var Q=l.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){Ft(l,l.return,ce)}if(a=l.sibling,a!==null){a.return=l.return,ye=a;break}ye=l.return}return we=tx,tx=!1,we}function ec(a,l,d){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var _=g=g.next;do{if((_.tag&a)===a){var x=_.destroy;_.destroy=void 0,x!==void 0&&B0(l,d,x)}_=_.next}while(_!==g)}}function Eh(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&a)===a){var g=d.create;d.destroy=g()}d=d.next}while(d!==l)}}function U0(a){var l=a.ref;if(l!==null){var d=a.stateNode;switch(a.tag){case 5:a=d;break;default:a=d}typeof l=="function"?l(a):l.current=a}}function nx(a){var l=a.alternate;l!==null&&(a.alternate=null,nx(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[Ci],delete l[Hl],delete l[n0],delete l[E4],delete l[A4])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function rx(a){return a.tag===5||a.tag===3||a.tag===4}function ix(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||rx(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function j0(a,l,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(a,l):d.insertBefore(a,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(a,d)):(l=d,l.appendChild(a)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Jf));else if(g!==4&&(a=a.child,a!==null))for(j0(a,l,d),a=a.sibling;a!==null;)j0(a,l,d),a=a.sibling}function z0(a,l,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?d.insertBefore(a,l):d.appendChild(a);else if(g!==4&&(a=a.child,a!==null))for(z0(a,l,d),a=a.sibling;a!==null;)z0(a,l,d),a=a.sibling}var An=null,Zr=!1;function Go(a,l,d){for(d=d.child;d!==null;)ox(a,l,d),d=d.sibling}function ox(a,l,d){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(Ms,d)}catch{}switch(d.tag){case 5:Vn||fu(d,l);case 6:var g=An,_=Zr;An=null,Go(a,l,d),An=g,Zr=_,An!==null&&(Zr?(a=An,d=d.stateNode,a.nodeType===8?a.parentNode.removeChild(d):a.removeChild(d)):An.removeChild(d.stateNode));break;case 18:An!==null&&(Zr?(a=An,d=d.stateNode,a.nodeType===8?t0(a.parentNode,d):a.nodeType===1&&t0(a,d),ko(a)):t0(An,d.stateNode));break;case 4:g=An,_=Zr,An=d.stateNode.containerInfo,Zr=!0,Go(a,l,d),An=g,Zr=_;break;case 0:case 11:case 14:case 15:if(!Vn&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){_=g=g.next;do{var x=_,b=x.destroy;x=x.tag,b!==void 0&&((x&2)!==0||(x&4)!==0)&&B0(d,l,b),_=_.next}while(_!==g)}Go(a,l,d);break;case 1:if(!Vn&&(fu(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(z){Ft(d,l,z)}Go(a,l,d);break;case 21:Go(a,l,d);break;case 22:d.mode&1?(Vn=(g=Vn)||d.memoizedState!==null,Go(a,l,d),Vn=g):Go(a,l,d);break;default:Go(a,l,d)}}function sx(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var d=a.stateNode;d===null&&(d=a.stateNode=new B4),l.forEach(function(g){var _=X4.bind(null,a,g);d.has(g)||(d.add(g),g.then(_,_))})}}function Jr(a,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var _=d[g];try{var x=a,b=l,z=b;e:for(;z!==null;){switch(z.tag){case 5:An=z.stateNode,Zr=!1;break e;case 3:An=z.stateNode.containerInfo,Zr=!0;break e;case 4:An=z.stateNode.containerInfo,Zr=!0;break e}z=z.return}if(An===null)throw Error(t(160));ox(x,b,_),An=null,Zr=!1;var G=_.alternate;G!==null&&(G.return=null),_.return=null}catch(J){Ft(_,l,J)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)ax(l,a),l=l.sibling}function ax(a,l){var d=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Jr(l,a),bi(a),g&4){try{ec(3,a,a.return),Eh(3,a)}catch(Te){Ft(a,a.return,Te)}try{ec(5,a,a.return)}catch(Te){Ft(a,a.return,Te)}}break;case 1:Jr(l,a),bi(a),g&512&&d!==null&&fu(d,d.return);break;case 5:if(Jr(l,a),bi(a),g&512&&d!==null&&fu(d,d.return),a.flags&32){var _=a.stateNode;try{Ps(_,"")}catch(Te){Ft(a,a.return,Te)}}if(g&4&&(_=a.stateNode,_!=null)){var x=a.memoizedProps,b=d!==null?d.memoizedProps:x,z=a.type,G=a.updateQueue;if(a.updateQueue=null,G!==null)try{z==="input"&&x.type==="radio"&&x.name!=null&&Ra(_,x),Da(z,b);var J=Da(z,x);for(b=0;b<G.length;b+=2){var ue=G[b],le=G[b+1];ue==="style"?Na(_,le):ue==="dangerouslySetInnerHTML"?If(_,le):ue==="children"?Ps(_,le):M(_,ue,le,J)}switch(z){case"input":Rs(_,x);break;case"textarea":Cf(_,x);break;case"select":var ae=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!x.multiple;var ge=x.value;ge!=null?Wr(_,!!x.multiple,ge,!1):ae!==!!x.multiple&&(x.defaultValue!=null?Wr(_,!!x.multiple,x.defaultValue,!0):Wr(_,!!x.multiple,x.multiple?[]:"",!1))}_[Hl]=x}catch(Te){Ft(a,a.return,Te)}}break;case 6:if(Jr(l,a),bi(a),g&4){if(a.stateNode===null)throw Error(t(162));_=a.stateNode,x=a.memoizedProps;try{_.nodeValue=x}catch(Te){Ft(a,a.return,Te)}}break;case 3:if(Jr(l,a),bi(a),g&4&&d!==null&&d.memoizedState.isDehydrated)try{ko(l.containerInfo)}catch(Te){Ft(a,a.return,Te)}break;case 4:Jr(l,a),bi(a);break;case 13:Jr(l,a),bi(a),_=a.child,_.flags&8192&&(x=_.memoizedState!==null,_.stateNode.isHidden=x,!x||_.alternate!==null&&_.alternate.memoizedState!==null||(W0=Et())),g&4&&sx(a);break;case 22:if(ue=d!==null&&d.memoizedState!==null,a.mode&1?(Vn=(J=Vn)||ue,Jr(l,a),Vn=J):Jr(l,a),bi(a),g&8192){if(J=a.memoizedState!==null,(a.stateNode.isHidden=J)&&!ue&&(a.mode&1)!==0)for(ye=a,ue=a.child;ue!==null;){for(le=ye=ue;ye!==null;){switch(ae=ye,ge=ae.child,ae.tag){case 0:case 11:case 14:case 15:ec(4,ae,ae.return);break;case 1:fu(ae,ae.return);var we=ae.stateNode;if(typeof we.componentWillUnmount=="function"){g=ae,d=ae.return;try{l=g,we.props=l.memoizedProps,we.state=l.memoizedState,we.componentWillUnmount()}catch(Te){Ft(g,d,Te)}}break;case 5:fu(ae,ae.return);break;case 22:if(ae.memoizedState!==null){cx(le);continue}}ge!==null?(ge.return=ae,ye=ge):cx(le)}ue=ue.sibling}e:for(ue=null,le=a;;){if(le.tag===5){if(ue===null){ue=le;try{_=le.stateNode,J?(x=_.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(z=le.stateNode,G=le.memoizedProps.style,b=G!=null&&G.hasOwnProperty("display")?G.display:null,z.style.display=Co("display",b))}catch(Te){Ft(a,a.return,Te)}}}else if(le.tag===6){if(ue===null)try{le.stateNode.nodeValue=J?"":le.memoizedProps}catch(Te){Ft(a,a.return,Te)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===a)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===a)break e;for(;le.sibling===null;){if(le.return===null||le.return===a)break e;ue===le&&(ue=null),le=le.return}ue===le&&(ue=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Jr(l,a),bi(a),g&4&&sx(a);break;case 21:break;default:Jr(l,a),bi(a)}}function bi(a){var l=a.flags;if(l&2){try{e:{for(var d=a.return;d!==null;){if(rx(d)){var g=d;break e}d=d.return}throw Error(t(160))}switch(g.tag){case 5:var _=g.stateNode;g.flags&32&&(Ps(_,""),g.flags&=-33);var x=ix(a);z0(a,x,_);break;case 3:case 4:var b=g.stateNode.containerInfo,z=ix(a);j0(a,z,b);break;default:throw Error(t(161))}}catch(G){Ft(a,a.return,G)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function j4(a,l,d){ye=a,ux(a)}function ux(a,l,d){for(var g=(a.mode&1)!==0;ye!==null;){var _=ye,x=_.child;if(_.tag===22&&g){var b=_.memoizedState!==null||wh;if(!b){var z=_.alternate,G=z!==null&&z.memoizedState!==null||Vn;z=wh;var J=Vn;if(wh=b,(Vn=G)&&!J)for(ye=_;ye!==null;)b=ye,G=b.child,b.tag===22&&b.memoizedState!==null?fx(_):G!==null?(G.return=b,ye=G):fx(_);for(;x!==null;)ye=x,ux(x),x=x.sibling;ye=_,wh=z,Vn=J}lx(a)}else(_.subtreeFlags&8772)!==0&&x!==null?(x.return=_,ye=x):lx(a)}}function lx(a){for(;ye!==null;){var l=ye;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Vn||Eh(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!Vn)if(d===null)g.componentDidMount();else{var _=l.elementType===l.type?d.memoizedProps:Qr(l.type,d.memoizedProps);g.componentDidUpdate(_,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var x=l.updateQueue;x!==null&&c_(l,x,g);break;case 3:var b=l.updateQueue;if(b!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}c_(l,b,d)}break;case 5:var z=l.stateNode;if(d===null&&l.flags&4){d=z;var G=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&d.focus();break;case"img":G.src&&(d.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var J=l.alternate;if(J!==null){var ue=J.memoizedState;if(ue!==null){var le=ue.dehydrated;le!==null&&ko(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Vn||l.flags&512&&U0(l)}catch(ae){Ft(l,l.return,ae)}}if(l===a){ye=null;break}if(d=l.sibling,d!==null){d.return=l.return,ye=d;break}ye=l.return}}function cx(a){for(;ye!==null;){var l=ye;if(l===a){ye=null;break}var d=l.sibling;if(d!==null){d.return=l.return,ye=d;break}ye=l.return}}function fx(a){for(;ye!==null;){var l=ye;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{Eh(4,l)}catch(G){Ft(l,d,G)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var _=l.return;try{g.componentDidMount()}catch(G){Ft(l,_,G)}}var x=l.return;try{U0(l)}catch(G){Ft(l,x,G)}break;case 5:var b=l.return;try{U0(l)}catch(G){Ft(l,b,G)}}}catch(G){Ft(l,l.return,G)}if(l===a){ye=null;break}var z=l.sibling;if(z!==null){z.return=l.return,ye=z;break}ye=l.return}}var z4=Math.ceil,Ah=j.ReactCurrentDispatcher,H0=j.ReactCurrentOwner,kr=j.ReactCurrentBatchConfig,ot=0,dn=null,Xt=null,Tn=0,xr=0,hu=Bo(0),tn=0,tc=null,Qs=0,Th=0,G0=0,nc=null,nr=null,W0=0,du=1/0,ao=null,Ch=!1,$0=null,Wo=null,Ih=!1,$o=null,Sh=0,rc=0,q0=null,bh=-1,Rh=0;function $n(){return(ot&6)!==0?Et():bh!==-1?bh:bh=Et()}function qo(a){return(a.mode&1)===0?1:(ot&2)!==0&&Tn!==0?Tn&-Tn:C4.transition!==null?(Rh===0&&(Rh=Tl()),Rh):(a=tt,a!==0||(a=window.event,a=a===void 0?16:za(a.type)),a)}function ei(a,l,d,g){if(50<rc)throw rc=0,q0=null,Error(t(185));Bs(a,d,g),((ot&2)===0||a!==dn)&&(a===dn&&((ot&2)===0&&(Th|=d),tn===4&&Ko(a,Tn)),rr(a,g),d===1&&ot===0&&(l.mode&1)===0&&(du=Et()+500,rh&&jo()))}function rr(a,l){var d=a.callbackNode;Fs(a,l);var g=Ki(a,a===dn?Tn:0);if(g===0)d!==null&&Ma(d),a.callbackNode=null,a.callbackPriority=0;else if(l=g&-g,a.callbackPriority!==l){if(d!=null&&Ma(d),l===1)a.tag===0?T4(dx.bind(null,a)):Zy(dx.bind(null,a)),x4(function(){(ot&6)===0&&jo()}),d=null;else{switch(mi(g)){case 1:d=La;break;case 4:d=wl;break;case 16:d=ks;break;case 536870912:d=Va;break;default:d=ks}d=wx(d,hx.bind(null,a))}a.callbackPriority=l,a.callbackNode=d}}function hx(a,l){if(bh=-1,Rh=0,(ot&6)!==0)throw Error(t(327));var d=a.callbackNode;if(pu()&&a.callbackNode!==d)return null;var g=Ki(a,a===dn?Tn:0);if(g===0)return null;if((g&30)!==0||(g&a.expiredLanes)!==0||l)l=Ph(a,g);else{l=g;var _=ot;ot|=2;var x=mx();(dn!==a||Tn!==l)&&(ao=null,du=Et()+500,Js(a,l));do try{W4();break}catch(z){px(a,z)}while(!0);f0(),Ah.current=x,ot=_,Xt!==null?l=0:(dn=null,Tn=0,l=tn)}if(l!==0){if(l===2&&(_=Al(a),_!==0&&(g=_,l=K0(a,_))),l===1)throw d=tc,Js(a,0),Ko(a,g),rr(a,Et()),d;if(l===6)Ko(a,g);else{if(_=a.current.alternate,(g&30)===0&&!H4(_)&&(l=Ph(a,g),l===2&&(x=Al(a),x!==0&&(g=x,l=K0(a,x))),l===1))throw d=tc,Js(a,0),Ko(a,g),rr(a,Et()),d;switch(a.finishedWork=_,a.finishedLanes=g,l){case 0:case 1:throw Error(t(345));case 2:ea(a,nr,ao);break;case 3:if(Ko(a,g),(g&130023424)===g&&(l=W0+500-Et(),10<l)){if(Ki(a,0)!==0)break;if(_=a.suspendedLanes,(_&g)!==g){$n(),a.pingedLanes|=a.suspendedLanes&_;break}a.timeoutHandle=e0(ea.bind(null,a,nr,ao),l);break}ea(a,nr,ao);break;case 4:if(Ko(a,g),(g&4194240)===g)break;for(l=a.eventTimes,_=-1;0<g;){var b=31-dr(g);x=1<<b,b=l[b],b>_&&(_=b),g&=~x}if(g=_,g=Et()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*z4(g/1960))-g,10<g){a.timeoutHandle=e0(ea.bind(null,a,nr,ao),g);break}ea(a,nr,ao);break;case 5:ea(a,nr,ao);break;default:throw Error(t(329))}}}return rr(a,Et()),a.callbackNode===d?hx.bind(null,a):null}function K0(a,l){var d=nc;return a.current.memoizedState.isDehydrated&&(Js(a,l).flags|=256),a=Ph(a,l),a!==2&&(l=nr,nr=d,l!==null&&X0(l)),a}function X0(a){nr===null?nr=a:nr.push.apply(nr,a)}function H4(a){for(var l=a;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var _=d[g],x=_.getSnapshot;_=_.value;try{if(!Xr(x(),_))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ko(a,l){for(l&=~G0,l&=~Th,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var d=31-dr(l),g=1<<d;a[d]=-1,l&=~g}}function dx(a){if((ot&6)!==0)throw Error(t(327));pu();var l=Ki(a,0);if((l&1)===0)return rr(a,Et()),null;var d=Ph(a,l);if(a.tag!==0&&d===2){var g=Al(a);g!==0&&(l=g,d=K0(a,g))}if(d===1)throw d=tc,Js(a,0),Ko(a,l),rr(a,Et()),d;if(d===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,ea(a,nr,ao),rr(a,Et()),null}function Y0(a,l){var d=ot;ot|=1;try{return a(l)}finally{ot=d,ot===0&&(du=Et()+500,rh&&jo())}}function Zs(a){$o!==null&&$o.tag===0&&(ot&6)===0&&pu();var l=ot;ot|=1;var d=kr.transition,g=tt;try{if(kr.transition=null,tt=1,a)return a()}finally{tt=g,kr.transition=d,ot=l,(ot&6)===0&&jo()}}function Q0(){xr=hu.current,Tt(hu)}function Js(a,l){a.finishedWork=null,a.finishedLanes=0;var d=a.timeoutHandle;if(d!==-1&&(a.timeoutHandle=-1,_4(d)),Xt!==null)for(d=Xt.return;d!==null;){var g=d;switch(s0(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&th();break;case 3:lu(),Tt(Jn),Tt(kn),_0();break;case 5:v0(g);break;case 4:lu();break;case 13:Tt(Nt);break;case 19:Tt(Nt);break;case 10:h0(g.type._context);break;case 22:case 23:Q0()}d=d.return}if(dn=a,Xt=a=Xo(a.current,null),Tn=xr=l,tn=0,tc=null,G0=Th=Qs=0,nr=nc=null,Ks!==null){for(l=0;l<Ks.length;l++)if(d=Ks[l],g=d.interleaved,g!==null){d.interleaved=null;var _=g.next,x=d.pending;if(x!==null){var b=x.next;x.next=_,g.next=b}d.pending=g}Ks=null}return a}function px(a,l){do{var d=Xt;try{if(f0(),dh.current=vh,ph){for(var g=Dt.memoizedState;g!==null;){var _=g.queue;_!==null&&(_.pending=null),g=g.next}ph=!1}if(Ys=0,hn=en=Dt=null,Xl=!1,Yl=0,H0.current=null,d===null||d.return===null){tn=1,tc=l,Xt=null;break}e:{var x=a,b=d.return,z=d,G=l;if(l=Tn,z.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var J=G,ue=z,le=ue.tag;if((ue.mode&1)===0&&(le===0||le===11||le===15)){var ae=ue.alternate;ae?(ue.updateQueue=ae.updateQueue,ue.memoizedState=ae.memoizedState,ue.lanes=ae.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var ge=B_(b);if(ge!==null){ge.flags&=-257,U_(ge,b,z,x,l),ge.mode&1&&F_(x,J,l),l=ge,G=J;var we=l.updateQueue;if(we===null){var Te=new Set;Te.add(G),l.updateQueue=Te}else we.add(G);break e}else{if((l&1)===0){F_(x,J,l),Z0();break e}G=Error(t(426))}}else if(Rt&&z.mode&1){var Ht=B_(b);if(Ht!==null){(Ht.flags&65536)===0&&(Ht.flags|=256),U_(Ht,b,z,x,l),l0(cu(G,z));break e}}x=G=cu(G,z),tn!==4&&(tn=2),nc===null?nc=[x]:nc.push(x),x=b;do{switch(x.tag){case 3:x.flags|=65536,l&=-l,x.lanes|=l;var K=L_(x,G,l);l_(x,K);break e;case 1:z=G;var $=x.type,Q=x.stateNode;if((x.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Wo===null||!Wo.has(Q)))){x.flags|=65536,l&=-l,x.lanes|=l;var ce=V_(x,z,l);l_(x,ce);break e}}x=x.return}while(x!==null)}vx(d)}catch(Se){l=Se,Xt===d&&d!==null&&(Xt=d=d.return);continue}break}while(!0)}function mx(){var a=Ah.current;return Ah.current=vh,a===null?vh:a}function Z0(){(tn===0||tn===3||tn===2)&&(tn=4),dn===null||(Qs&268435455)===0&&(Th&268435455)===0||Ko(dn,Tn)}function Ph(a,l){var d=ot;ot|=2;var g=mx();(dn!==a||Tn!==l)&&(ao=null,Js(a,l));do try{G4();break}catch(_){px(a,_)}while(!0);if(f0(),ot=d,Ah.current=g,Xt!==null)throw Error(t(261));return dn=null,Tn=0,tn}function G4(){for(;Xt!==null;)gx(Xt)}function W4(){for(;Xt!==null&&!Os();)gx(Xt)}function gx(a){var l=xx(a.alternate,a,xr);a.memoizedProps=a.pendingProps,l===null?vx(a):Xt=l,H0.current=null}function vx(a){var l=a;do{var d=l.alternate;if(a=l.return,(l.flags&32768)===0){if(d=V4(d,l,xr),d!==null){Xt=d;return}}else{if(d=F4(d,l),d!==null){d.flags&=32767,Xt=d;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{tn=6,Xt=null;return}}if(l=l.sibling,l!==null){Xt=l;return}Xt=l=a}while(l!==null);tn===0&&(tn=5)}function ea(a,l,d){var g=tt,_=kr.transition;try{kr.transition=null,tt=1,$4(a,l,d,g)}finally{kr.transition=_,tt=g}return null}function $4(a,l,d,g){do pu();while($o!==null);if((ot&6)!==0)throw Error(t(327));d=a.finishedWork;var _=a.finishedLanes;if(d===null)return null;if(a.finishedWork=null,a.finishedLanes=0,d===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var x=d.lanes|d.childLanes;if(Fp(a,x),a===dn&&(Xt=dn=null,Tn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Ih||(Ih=!0,wx(ks,function(){return pu(),null})),x=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||x){x=kr.transition,kr.transition=null;var b=tt;tt=1;var z=ot;ot|=4,H0.current=null,U4(a,d),ax(d,a),h4(Zp),Qi=!!Qp,Zp=Qp=null,a.current=d,j4(d),qi(),ot=z,tt=b,kr.transition=x}else a.current=d;if(Ih&&(Ih=!1,$o=a,Sh=_),x=a.pendingLanes,x===0&&(Wo=null),Vf(d.stateNode),rr(a,Et()),l!==null)for(g=a.onRecoverableError,d=0;d<l.length;d++)_=l[d],g(_.value,{componentStack:_.stack,digest:_.digest});if(Ch)throw Ch=!1,a=$0,$0=null,a;return(Sh&1)!==0&&a.tag!==0&&pu(),x=a.pendingLanes,(x&1)!==0?a===q0?rc++:(rc=0,q0=a):rc=0,jo(),null}function pu(){if($o!==null){var a=mi(Sh),l=kr.transition,d=tt;try{if(kr.transition=null,tt=16>a?16:a,$o===null)var g=!1;else{if(a=$o,$o=null,Sh=0,(ot&6)!==0)throw Error(t(331));var _=ot;for(ot|=4,ye=a.current;ye!==null;){var x=ye,b=x.child;if((ye.flags&16)!==0){var z=x.deletions;if(z!==null){for(var G=0;G<z.length;G++){var J=z[G];for(ye=J;ye!==null;){var ue=ye;switch(ue.tag){case 0:case 11:case 15:ec(8,ue,x)}var le=ue.child;if(le!==null)le.return=ue,ye=le;else for(;ye!==null;){ue=ye;var ae=ue.sibling,ge=ue.return;if(nx(ue),ue===J){ye=null;break}if(ae!==null){ae.return=ge,ye=ae;break}ye=ge}}}var we=x.alternate;if(we!==null){var Te=we.child;if(Te!==null){we.child=null;do{var Ht=Te.sibling;Te.sibling=null,Te=Ht}while(Te!==null)}}ye=x}}if((x.subtreeFlags&2064)!==0&&b!==null)b.return=x,ye=b;else e:for(;ye!==null;){if(x=ye,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:ec(9,x,x.return)}var K=x.sibling;if(K!==null){K.return=x.return,ye=K;break e}ye=x.return}}var $=a.current;for(ye=$;ye!==null;){b=ye;var Q=b.child;if((b.subtreeFlags&2064)!==0&&Q!==null)Q.return=b,ye=Q;else e:for(b=$;ye!==null;){if(z=ye,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:Eh(9,z)}}catch(Se){Ft(z,z.return,Se)}if(z===b){ye=null;break e}var ce=z.sibling;if(ce!==null){ce.return=z.return,ye=ce;break e}ye=z.return}}if(ot=_,jo(),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(Ms,a)}catch{}g=!0}return g}finally{tt=d,kr.transition=l}}return!1}function yx(a,l,d){l=cu(d,l),l=L_(a,l,1),a=Ho(a,l,1),l=$n(),a!==null&&(Bs(a,1,l),rr(a,l))}function Ft(a,l,d){if(a.tag===3)yx(a,a,d);else for(;l!==null;){if(l.tag===3){yx(l,a,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Wo===null||!Wo.has(g))){a=cu(d,a),a=V_(l,a,1),l=Ho(l,a,1),a=$n(),l!==null&&(Bs(l,1,a),rr(l,a));break}}l=l.return}}function q4(a,l,d){var g=a.pingCache;g!==null&&g.delete(l),l=$n(),a.pingedLanes|=a.suspendedLanes&d,dn===a&&(Tn&d)===d&&(tn===4||tn===3&&(Tn&130023424)===Tn&&500>Et()-W0?Js(a,0):G0|=d),rr(a,l)}function _x(a,l){l===0&&((a.mode&1)===0?l=1:(l=No,No<<=1,(No&130023424)===0&&(No=4194304)));var d=$n();a=io(a,l),a!==null&&(Bs(a,l,d),rr(a,d))}function K4(a){var l=a.memoizedState,d=0;l!==null&&(d=l.retryLane),_x(a,d)}function X4(a,l){var d=0;switch(a.tag){case 13:var g=a.stateNode,_=a.memoizedState;_!==null&&(d=_.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(l),_x(a,d)}var xx;xx=function(a,l,d){if(a!==null)if(a.memoizedProps!==l.pendingProps||Jn.current)tr=!0;else{if((a.lanes&d)===0&&(l.flags&128)===0)return tr=!1,L4(a,l,d);tr=(a.flags&131072)!==0}else tr=!1,Rt&&(l.flags&1048576)!==0&&Jy(l,oh,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;xh(a,l),a=l.pendingProps;var _=nu(l,kn.current);uu(l,d),_=E0(null,l,g,a,_,d);var x=A0();return l.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,er(g)?(x=!0,nh(l)):x=!1,l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,m0(l),_.updater=yh,l.stateNode=_,_._reactInternals=l,R0(l,g,a,d),l=O0(null,l,g,!0,x,d)):(l.tag=0,Rt&&x&&o0(l),Wn(null,l,_,d),l=l.child),l;case 16:g=l.elementType;e:{switch(xh(a,l),a=l.pendingProps,_=g._init,g=_(g._payload),l.type=g,_=l.tag=Q4(g),a=Qr(g,a),_){case 0:l=D0(null,l,g,a,d);break e;case 1:l=$_(null,l,g,a,d);break e;case 11:l=j_(null,l,g,a,d);break e;case 14:l=z_(null,l,g,Qr(g.type,a),d);break e}throw Error(t(306,g,""))}return l;case 0:return g=l.type,_=l.pendingProps,_=l.elementType===g?_:Qr(g,_),D0(a,l,g,_,d);case 1:return g=l.type,_=l.pendingProps,_=l.elementType===g?_:Qr(g,_),$_(a,l,g,_,d);case 3:e:{if(q_(l),a===null)throw Error(t(387));g=l.pendingProps,x=l.memoizedState,_=x.element,u_(a,l),fh(l,g,null,d);var b=l.memoizedState;if(g=b.element,x.isDehydrated)if(x={element:g,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},l.updateQueue.baseState=x,l.memoizedState=x,l.flags&256){_=cu(Error(t(423)),l),l=K_(a,l,g,d,_);break e}else if(g!==_){_=cu(Error(t(424)),l),l=K_(a,l,g,d,_);break e}else for(_r=Fo(l.stateNode.containerInfo.firstChild),yr=l,Rt=!0,Yr=null,d=s_(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(ou(),g===_){l=so(a,l,d);break e}Wn(a,l,g,d)}l=l.child}return l;case 5:return f_(l),a===null&&u0(l),g=l.type,_=l.pendingProps,x=a!==null?a.memoizedProps:null,b=_.children,Jp(g,_)?b=null:x!==null&&Jp(g,x)&&(l.flags|=32),W_(a,l),Wn(a,l,b,d),l.child;case 6:return a===null&&u0(l),null;case 13:return X_(a,l,d);case 4:return g0(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=su(l,null,g,d):Wn(a,l,g,d),l.child;case 11:return g=l.type,_=l.pendingProps,_=l.elementType===g?_:Qr(g,_),j_(a,l,g,_,d);case 7:return Wn(a,l,l.pendingProps,d),l.child;case 8:return Wn(a,l,l.pendingProps.children,d),l.child;case 12:return Wn(a,l,l.pendingProps.children,d),l.child;case 10:e:{if(g=l.type._context,_=l.pendingProps,x=l.memoizedProps,b=_.value,xt(uh,g._currentValue),g._currentValue=b,x!==null)if(Xr(x.value,b)){if(x.children===_.children&&!Jn.current){l=so(a,l,d);break e}}else for(x=l.child,x!==null&&(x.return=l);x!==null;){var z=x.dependencies;if(z!==null){b=x.child;for(var G=z.firstContext;G!==null;){if(G.context===g){if(x.tag===1){G=oo(-1,d&-d),G.tag=2;var J=x.updateQueue;if(J!==null){J=J.shared;var ue=J.pending;ue===null?G.next=G:(G.next=ue.next,ue.next=G),J.pending=G}}x.lanes|=d,G=x.alternate,G!==null&&(G.lanes|=d),d0(x.return,d,l),z.lanes|=d;break}G=G.next}}else if(x.tag===10)b=x.type===l.type?null:x.child;else if(x.tag===18){if(b=x.return,b===null)throw Error(t(341));b.lanes|=d,z=b.alternate,z!==null&&(z.lanes|=d),d0(b,d,l),b=x.sibling}else b=x.child;if(b!==null)b.return=x;else for(b=x;b!==null;){if(b===l){b=null;break}if(x=b.sibling,x!==null){x.return=b.return,b=x;break}b=b.return}x=b}Wn(a,l,_.children,d),l=l.child}return l;case 9:return _=l.type,g=l.pendingProps.children,uu(l,d),_=Dr(_),g=g(_),l.flags|=1,Wn(a,l,g,d),l.child;case 14:return g=l.type,_=Qr(g,l.pendingProps),_=Qr(g.type,_),z_(a,l,g,_,d);case 15:return H_(a,l,l.type,l.pendingProps,d);case 17:return g=l.type,_=l.pendingProps,_=l.elementType===g?_:Qr(g,_),xh(a,l),l.tag=1,er(g)?(a=!0,nh(l)):a=!1,uu(l,d),k_(l,g,_),R0(l,g,_,d),O0(null,l,g,!0,a,d);case 19:return Q_(a,l,d);case 22:return G_(a,l,d)}throw Error(t(156,l.tag))};function wx(a,l){return xl(a,l)}function Y4(a,l,d,g){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(a,l,d,g){return new Y4(a,l,d,g)}function J0(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Q4(a){if(typeof a=="function")return J0(a)?1:0;if(a!=null){if(a=a.$$typeof,a===U)return 11;if(a===Pe)return 14}return 2}function Xo(a,l){var d=a.alternate;return d===null?(d=Mr(a.tag,l,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&14680064,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d}function Nh(a,l,d,g,_,x){var b=2;if(g=a,typeof a=="function")J0(a)&&(b=1);else if(typeof a=="string")b=5;else e:switch(a){case R:return ta(d.children,_,x,l);case I:b=8,_|=8;break;case D:return a=Mr(12,d,l,_|2),a.elementType=D,a.lanes=x,a;case V:return a=Mr(13,d,l,_),a.elementType=V,a.lanes=x,a;case te:return a=Mr(19,d,l,_),a.elementType=te,a.lanes=x,a;case _e:return Dh(d,_,x,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case O:b=10;break e;case F:b=9;break e;case U:b=11;break e;case Pe:b=14;break e;case Oe:b=16,g=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return l=Mr(b,d,l,_),l.elementType=a,l.type=g,l.lanes=x,l}function ta(a,l,d,g){return a=Mr(7,a,g,l),a.lanes=d,a}function Dh(a,l,d,g){return a=Mr(22,a,g,l),a.elementType=_e,a.lanes=d,a.stateNode={isHidden:!1},a}function e1(a,l,d){return a=Mr(6,a,null,l),a.lanes=d,a}function t1(a,l,d){return l=Mr(4,a.children!==null?a.children:[],a.key,l),l.lanes=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function Z4(a,l,d,g,_){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cl(0),this.expirationTimes=Cl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cl(0),this.identifierPrefix=g,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function n1(a,l,d,g,_,x,b,z,G){return a=new Z4(a,l,d,z,G),l===1?(l=1,x===!0&&(l|=8)):l=0,x=Mr(3,null,null,l),a.current=x,x.stateNode=a,x.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},m0(x),a}function J4(a,l,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:g==null?null:""+g,children:a,containerInfo:l,implementation:d}}function Ex(a){if(!a)return Uo;a=a._reactInternals;e:{if(qr(a)!==a||a.tag!==1)throw Error(t(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(er(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(a.tag===1){var d=a.type;if(er(d))return Yy(a,d,l)}return l}function Ax(a,l,d,g,_,x,b,z,G){return a=n1(d,g,!0,a,_,x,b,z,G),a.context=Ex(null),d=a.current,g=$n(),_=qo(d),x=oo(g,_),x.callback=l??null,Ho(d,x,_),a.current.lanes=_,Bs(a,_,g),rr(a,g),a}function Oh(a,l,d,g){var _=l.current,x=$n(),b=qo(_);return d=Ex(d),l.context===null?l.context=d:l.pendingContext=d,l=oo(x,b),l.payload={element:a},g=g===void 0?null:g,g!==null&&(l.callback=g),a=Ho(_,l,b),a!==null&&(ei(a,_,b,x),ch(a,_,b)),b}function kh(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Tx(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<l?d:l}}function r1(a,l){Tx(a,l),(a=a.alternate)&&Tx(a,l)}function eb(){return null}var Cx=typeof reportError=="function"?reportError:function(a){console.error(a)};function i1(a){this._internalRoot=a}Mh.prototype.render=i1.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(t(409));Oh(a,l,null,null)},Mh.prototype.unmount=i1.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;Zs(function(){Oh(null,a,null,null)}),l[eo]=null}};function Mh(a){this._internalRoot=a}Mh.prototype.unstable_scheduleHydration=function(a){if(a){var l=Rl();a={blockedOn:null,target:a,priority:l};for(var d=0;d<pr.length&&l!==0&&l<pr[d].priority;d++);pr.splice(d,0,a),d===0&&Ua(a)}};function o1(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Lh(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Ix(){}function tb(a,l,d,g,_){if(_){if(typeof g=="function"){var x=g;g=function(){var J=kh(b);x.call(J)}}var b=Ax(l,g,a,0,null,!1,!1,"",Ix);return a._reactRootContainer=b,a[eo]=b.current,jl(a.nodeType===8?a.parentNode:a),Zs(),b}for(;_=a.lastChild;)a.removeChild(_);if(typeof g=="function"){var z=g;g=function(){var J=kh(G);z.call(J)}}var G=n1(a,0,!1,null,null,!1,!1,"",Ix);return a._reactRootContainer=G,a[eo]=G.current,jl(a.nodeType===8?a.parentNode:a),Zs(function(){Oh(l,G,d,g)}),G}function Vh(a,l,d,g,_){var x=d._reactRootContainer;if(x){var b=x;if(typeof _=="function"){var z=_;_=function(){var G=kh(b);z.call(G)}}Oh(l,b,a,_)}else b=tb(d,l,a,_,g);return kh(b)}Sl=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var d=lt(l.pendingLanes);d!==0&&(Il(l,d|1),rr(l,Et()),(ot&6)===0&&(du=Et()+500,jo()))}break;case 13:Zs(function(){var g=io(a,1);if(g!==null){var _=$n();ei(g,a,1,_)}}),r1(a,1)}},Fa=function(a){if(a.tag===13){var l=io(a,134217728);if(l!==null){var d=$n();ei(l,a,134217728,d)}r1(a,134217728)}},bl=function(a){if(a.tag===13){var l=qo(a),d=io(a,l);if(d!==null){var g=$n();ei(d,a,l,g)}r1(a,l)}},Rl=function(){return tt},Pl=function(a,l){var d=tt;try{return tt=a,l()}finally{tt=d}},Gi=function(a,l,d){switch(l){case"input":if(Rs(a,d),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==a&&g.form===a.form){var _=eh(g);if(!_)throw Error(t(90));bt(g),Rs(g,_)}}}break;case"textarea":Cf(a,d);break;case"select":l=d.value,l!=null&&Wr(a,!!d.multiple,l,!1)}},bf=Y0,Rf=Zs;var nb={usingClientEntryPoint:!1,Events:[Gl,eu,eh,So,bo,Y0]},ic={findFiberByHostInstance:Gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rb={bundleType:ic.bundleType,version:ic.version,rendererPackageName:ic.rendererPackageName,rendererConfig:ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Lf(a),a===null?null:a.stateNode},findFiberByHostInstance:ic.findFiberByHostInstance||eb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fh.isDisabled&&Fh.supportsFiber)try{Ms=Fh.inject(rb),hr=Fh}catch{}}return ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nb,ir.createPortal=function(a,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!o1(l))throw Error(t(200));return J4(a,l,null,d)},ir.createRoot=function(a,l){if(!o1(a))throw Error(t(299));var d=!1,g="",_=Cx;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(_=l.onRecoverableError)),l=n1(a,1,!1,null,null,d,!1,g,_),a[eo]=l.current,jl(a.nodeType===8?a.parentNode:a),new i1(l)},ir.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Lf(l),a=a===null?null:a.stateNode,a},ir.flushSync=function(a){return Zs(a)},ir.hydrate=function(a,l,d){if(!Lh(l))throw Error(t(200));return Vh(null,a,l,!0,d)},ir.hydrateRoot=function(a,l,d){if(!o1(a))throw Error(t(405));var g=d!=null&&d.hydratedSources||null,_=!1,x="",b=Cx;if(d!=null&&(d.unstable_strictMode===!0&&(_=!0),d.identifierPrefix!==void 0&&(x=d.identifierPrefix),d.onRecoverableError!==void 0&&(b=d.onRecoverableError)),l=Ax(l,null,a,1,d??null,_,!1,x,b),a[eo]=l.current,jl(a),g)for(a=0;a<g.length;a++)d=g[a],_=d._getVersion,_=_(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,_]:l.mutableSourceEagerHydrationData.push(d,_);return new Mh(l)},ir.render=function(a,l,d){if(!Lh(l))throw Error(t(200));return Vh(null,a,l,!1,d)},ir.unmountComponentAtNode=function(a){if(!Lh(a))throw Error(t(40));return a._reactRootContainer?(Zs(function(){Vh(null,null,a,!1,function(){a._reactRootContainer=null,a[eo]=null})}),!0):!1},ir.unstable_batchedUpdates=Y0,ir.unstable_renderSubtreeIntoContainer=function(a,l,d,g){if(!Lh(d))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Vh(a,l,d,!1,g)},ir.version="18.3.1-next-f1338f8080-20240426",ir}var kx;function RA(){if(kx)return u1.exports;kx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),u1.exports=hb(),u1.exports}var Mx;function db(){if(Mx)return Bh;Mx=1;var n=RA();return Bh.createRoot=n.createRoot,Bh.hydrateRoot=n.hydrateRoot,Bh}var pb=db();const mb=Qu(pb);var f1,Lx;function gb(){if(Lx)return f1;Lx=1;var n=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(o,s){if(o===s)return!0;if(o&&s&&typeof o=="object"&&typeof s=="object"){if(o.constructor!==s.constructor)return!1;var u,c,f;if(Array.isArray(o)){if(u=o.length,u!=s.length)return!1;for(c=u;c--!==0;)if(!i(o[c],s[c]))return!1;return!0}var h;if(e&&o instanceof Map&&s instanceof Map){if(o.size!==s.size)return!1;for(h=o.entries();!(c=h.next()).done;)if(!s.has(c.value[0]))return!1;for(h=o.entries();!(c=h.next()).done;)if(!i(c.value[1],s.get(c.value[0])))return!1;return!0}if(t&&o instanceof Set&&s instanceof Set){if(o.size!==s.size)return!1;for(h=o.entries();!(c=h.next()).done;)if(!s.has(c.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(s)){if(u=o.length,u!=s.length)return!1;for(c=u;c--!==0;)if(o[c]!==s[c])return!1;return!0}if(o.constructor===RegExp)return o.source===s.source&&o.flags===s.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof s.valueOf=="function")return o.valueOf()===s.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof s.toString=="function")return o.toString()===s.toString();if(f=Object.keys(o),u=f.length,u!==Object.keys(s).length)return!1;for(c=u;c--!==0;)if(!Object.prototype.hasOwnProperty.call(s,f[c]))return!1;if(n&&o instanceof Element)return!1;for(c=u;c--!==0;)if(!((f[c]==="_owner"||f[c]==="__v"||f[c]==="__o")&&o.$$typeof)&&!i(o[f[c]],s[f[c]]))return!1;return!0}return o!==o&&s!==s}return f1=function(s,u){try{return i(s,u)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},f1}var vb=gb();const yb=Qu(vb);var h1,Vx;function _b(){if(Vx)return h1;Vx=1;var n=function(e,t,r,i,o,s,u,c){if(!e){var f;if(t===void 0)f=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[r,i,o,s,u,c],p=0;f=new Error(t.replace(/%s/g,function(){return h[p++]})),f.name="Invariant Violation"}throw f.framesToPop=1,f}};return h1=n,h1}var xb=_b();const Fx=Qu(xb);var d1,Bx;function wb(){return Bx||(Bx=1,d1=function(e,t,r,i){var o=r?r.call(i,e,t):void 0;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var s=Object.keys(e),u=Object.keys(t);if(s.length!==u.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(t),f=0;f<s.length;f++){var h=s[f];if(!c(h))return!1;var p=e[h],v=t[h];if(o=r?r.call(i,p,v,h):void 0,o===!1||o===void 0&&p!==v)return!1}return!0}),d1}var Eb=wb();const Ab=Qu(Eb);var PA=(n=>(n.BASE="base",n.BODY="body",n.HEAD="head",n.HTML="html",n.LINK="link",n.META="meta",n.NOSCRIPT="noscript",n.SCRIPT="script",n.STYLE="style",n.TITLE="title",n.FRAGMENT="Symbol(react.fragment)",n))(PA||{}),p1={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Ux=Object.values(PA),Ag={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Tb=Object.entries(Ag).reduce((n,[e,t])=>(n[t]=e,n),{}),si="data-rh",Nu={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Du=(n,e)=>{for(let t=n.length-1;t>=0;t-=1){const r=n[t];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},Cb=n=>{let e=Du(n,"title");const t=Du(n,Nu.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),t&&e)return t.replace(/%s/g,()=>e);const r=Du(n,Nu.DEFAULT_TITLE);return e||r||void 0},Ib=n=>Du(n,Nu.ON_CHANGE_CLIENT_STATE)||(()=>{}),m1=(n,e)=>e.filter(t=>typeof t[n]<"u").map(t=>t[n]).reduce((t,r)=>({...t,...r}),{}),Sb=(n,e)=>e.filter(t=>typeof t.base<"u").map(t=>t.base).reverse().reduce((t,r)=>{if(!t.length){const i=Object.keys(r);for(let o=0;o<i.length;o+=1){const u=i[o].toLowerCase();if(n.indexOf(u)!==-1&&r[u])return t.concat(r)}}return t},[]),bb=n=>console&&typeof console.warn=="function"&&console.warn(n),sc=(n,e,t)=>{const r={};return t.filter(i=>Array.isArray(i[n])?!0:(typeof i[n]<"u"&&bb(`Helmet: ${n} should be of type "Array". Instead found type "${typeof i[n]}"`),!1)).map(i=>i[n]).reverse().reduce((i,o)=>{const s={};o.filter(c=>{let f;const h=Object.keys(c);for(let v=0;v<h.length;v+=1){const y=h[v],E=y.toLowerCase();e.indexOf(E)!==-1&&!(f==="rel"&&c[f].toLowerCase()==="canonical")&&!(E==="rel"&&c[E].toLowerCase()==="stylesheet")&&(f=E),e.indexOf(y)!==-1&&(y==="innerHTML"||y==="cssText"||y==="itemprop")&&(f=y)}if(!f||!c[f])return!1;const p=c[f].toLowerCase();return r[f]||(r[f]={}),s[f]||(s[f]={}),r[f][p]?!1:(s[f][p]=!0,!0)}).reverse().forEach(c=>i.push(c));const u=Object.keys(s);for(let c=0;c<u.length;c+=1){const f=u[c],h={...r[f],...s[f]};r[f]=h}return i},[]).reverse()},Rb=(n,e)=>{if(Array.isArray(n)&&n.length){for(let t=0;t<n.length;t+=1)if(n[t][e])return!0}return!1},Pb=n=>({baseTag:Sb(["href"],n),bodyAttributes:m1("bodyAttributes",n),defer:Du(n,Nu.DEFER),encode:Du(n,Nu.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:m1("htmlAttributes",n),linkTags:sc("link",["rel","href"],n),metaTags:sc("meta",["name","charset","http-equiv","property","itemprop"],n),noscriptTags:sc("noscript",["innerHTML"],n),onChangeClientState:Ib(n),scriptTags:sc("script",["src","innerHTML"],n),styleTags:sc("style",["cssText"],n),title:Cb(n),titleAttributes:m1("titleAttributes",n),prioritizeSeoTags:Rb(n,Nu.PRIORITIZE_SEO_TAGS)}),NA=n=>Array.isArray(n)?n.join(""):n,Nb=(n,e)=>{const t=Object.keys(n);for(let r=0;r<t.length;r+=1)if(e[t[r]]&&e[t[r]].includes(n[t[r]]))return!0;return!1},g1=(n,e)=>Array.isArray(n)?n.reduce((t,r)=>(Nb(r,e)?t.priority.push(r):t.default.push(r),t),{priority:[],default:[]}):{default:n,priority:[]},jx=(n,e)=>({...n,[e]:void 0}),Db=["noscript","script","style"],im=(n,e=!0)=>e===!1?String(n):String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),DA=n=>Object.keys(n).reduce((e,t)=>{const r=typeof n[t]<"u"?`${t}="${n[t]}"`:`${t}`;return e?`${e} ${r}`:r},""),Ob=(n,e,t,r)=>{const i=DA(t),o=NA(e);return i?`<${n} ${si}="true" ${i}>${im(o,r)}</${n}>`:`<${n} ${si}="true">${im(o,r)}</${n}>`},kb=(n,e,t=!0)=>e.reduce((r,i)=>{const o=i,s=Object.keys(o).filter(f=>!(f==="innerHTML"||f==="cssText")).reduce((f,h)=>{const p=typeof o[h]>"u"?h:`${h}="${im(o[h],t)}"`;return f?`${f} ${p}`:p},""),u=o.innerHTML||o.cssText||"",c=Db.indexOf(n)===-1;return`${r}<${n} ${si}="true" ${s}${c?"/>":`>${u}</${n}>`}`},""),OA=(n,e={})=>Object.keys(n).reduce((t,r)=>{const i=Ag[r];return t[i||r]=n[r],t},e),Mb=(n,e,t)=>{const r={key:e,[si]:!0},i=OA(t,r);return[Rn.createElement("title",i,e)]},sd=(n,e)=>e.map((t,r)=>{const i={key:r,[si]:!0};return Object.keys(t).forEach(o=>{const u=Ag[o]||o;if(u==="innerHTML"||u==="cssText"){const c=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:c}}else i[u]=t[o]}),Rn.createElement(n,i)}),Br=(n,e,t=!0)=>{switch(n){case"title":return{toComponent:()=>Mb(n,e.title,e.titleAttributes),toString:()=>Ob(n,e.title,e.titleAttributes,t)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>OA(e),toString:()=>DA(e)};default:return{toComponent:()=>sd(n,e),toString:()=>kb(n,e,t)}}},Lb=({metaTags:n,linkTags:e,scriptTags:t,encode:r})=>{const i=g1(n,p1.meta),o=g1(e,p1.link),s=g1(t,p1.script);return{priorityMethods:{toComponent:()=>[...sd("meta",i.priority),...sd("link",o.priority),...sd("script",s.priority)],toString:()=>`${Br("meta",i.priority,r)} ${Br("link",o.priority,r)} ${Br("script",s.priority,r)}`},metaTags:i.default,linkTags:o.default,scriptTags:s.default}},Vb=n=>{const{baseTag:e,bodyAttributes:t,encode:r=!0,htmlAttributes:i,noscriptTags:o,styleTags:s,title:u="",titleAttributes:c,prioritizeSeoTags:f}=n;let{linkTags:h,metaTags:p,scriptTags:v}=n,y={toComponent:()=>{},toString:()=>""};return f&&({priorityMethods:y,linkTags:h,metaTags:p,scriptTags:v}=Lb(n)),{priority:y,base:Br("base",e,r),bodyAttributes:Br("bodyAttributes",t,r),htmlAttributes:Br("htmlAttributes",i,r),link:Br("link",h,r),meta:Br("meta",p,r),noscript:Br("noscript",o,r),script:Br("script",v,r),style:Br("style",s,r),title:Br("title",{title:u,titleAttributes:c},r)}},om=Vb,Uh=[],kA=!!(typeof window<"u"&&window.document&&window.document.createElement),sm=class{instances=[];canUseDOM=kA;context;value={setHelmet:n=>{this.context.helmet=n},helmetInstances:{get:()=>this.canUseDOM?Uh:this.instances,add:n=>{(this.canUseDOM?Uh:this.instances).push(n)},remove:n=>{const e=(this.canUseDOM?Uh:this.instances).indexOf(n);(this.canUseDOM?Uh:this.instances).splice(e,1)}}};constructor(n,e){this.context=n,this.canUseDOM=e||!1,e||(n.helmet=om({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Fb={},MA=Rn.createContext(Fb),LA=class VA extends B.Component{static canUseDOM=kA;helmetData;constructor(e){super(e),this.helmetData=new sm(this.props.context||{},VA.canUseDOM)}render(){return Rn.createElement(MA.Provider,{value:this.helmetData.value},this.props.children)}},mu=(n,e)=>{const t=document.head||document.querySelector("head"),r=t.querySelectorAll(`${n}[${si}]`),i=[].slice.call(r),o=[];let s;return e&&e.length&&e.forEach(u=>{const c=document.createElement(n);for(const f in u)if(Object.prototype.hasOwnProperty.call(u,f))if(f==="innerHTML")c.innerHTML=u.innerHTML;else if(f==="cssText")c.styleSheet?c.styleSheet.cssText=u.cssText:c.appendChild(document.createTextNode(u.cssText));else{const h=f,p=typeof u[h]>"u"?"":u[h];c.setAttribute(f,p)}c.setAttribute(si,"true"),i.some((f,h)=>(s=h,c.isEqualNode(f)))?i.splice(s,1):o.push(c)}),i.forEach(u=>u.parentNode?.removeChild(u)),o.forEach(u=>t.appendChild(u)),{oldTags:i,newTags:o}},am=(n,e)=>{const t=document.getElementsByTagName(n)[0];if(!t)return;const r=t.getAttribute(si),i=r?r.split(","):[],o=[...i],s=Object.keys(e);for(const u of s){const c=e[u]||"";t.getAttribute(u)!==c&&t.setAttribute(u,c),i.indexOf(u)===-1&&i.push(u);const f=o.indexOf(u);f!==-1&&o.splice(f,1)}for(let u=o.length-1;u>=0;u-=1)t.removeAttribute(o[u]);i.length===o.length?t.removeAttribute(si):t.getAttribute(si)!==s.join(",")&&t.setAttribute(si,s.join(","))},Bb=(n,e)=>{typeof n<"u"&&document.title!==n&&(document.title=NA(n)),am("title",e)},zx=(n,e)=>{const{baseTag:t,bodyAttributes:r,htmlAttributes:i,linkTags:o,metaTags:s,noscriptTags:u,onChangeClientState:c,scriptTags:f,styleTags:h,title:p,titleAttributes:v}=n;am("body",r),am("html",i),Bb(p,v);const y={baseTag:mu("base",t),linkTags:mu("link",o),metaTags:mu("meta",s),noscriptTags:mu("noscript",u),scriptTags:mu("script",f),styleTags:mu("style",h)},E={},A={};Object.keys(y).forEach(T=>{const{newTags:N,oldTags:P}=y[T];N.length&&(E[T]=N),P.length&&(A[T]=y[T].oldTags)}),e&&e(),c(n,E,A)},ac=null,Ub=n=>{ac&&cancelAnimationFrame(ac),n.defer?ac=requestAnimationFrame(()=>{zx(n,()=>{ac=null})}):(zx(n),ac=null)},jb=Ub,Hx=class extends B.Component{rendered=!1;shouldComponentUpdate(n){return!Ab(n,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:n}=this.props.context;n.remove(this),this.emitChange()}emitChange(){const{helmetInstances:n,setHelmet:e}=this.props.context;let t=null;const r=Pb(n.get().map(i=>{const o={...i.props};return delete o.context,o}));LA.canUseDOM?jb(r):om&&(t=om(r)),e(t)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:n}=this.props.context;n.add(this),this.emitChange()}render(){return this.init(),null}},Tg=class extends B.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(n){return!yb(jx(this.props,"helmetData"),jx(n,"helmetData"))}mapNestedChildrenToProps(n,e){if(!e)return null;switch(n.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${n.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(n,e,t,r){return{...e,[n.type]:[...e[n.type]||[],{...t,...this.mapNestedChildrenToProps(n,r)}]}}mapObjectTypeChildren(n,e,t,r){switch(n.type){case"title":return{...e,[n.type]:r,titleAttributes:{...t}};case"body":return{...e,bodyAttributes:{...t}};case"html":return{...e,htmlAttributes:{...t}};default:return{...e,[n.type]:{...t}}}}mapArrayTypeChildrenToProps(n,e){let t={...e};return Object.keys(n).forEach(r=>{t={...t,[r]:n[r]}}),t}warnOnInvalidChildren(n,e){return Fx(Ux.some(t=>n.type===t),typeof n.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Ux.join(", ")} are allowed. Helmet does not support rendering <${n.type}> elements. Refer to our API for more information.`),Fx(!e||typeof e=="string"||Array.isArray(e)&&!e.some(t=>typeof t!="string"),`Helmet expects a string as a child of <${n.type}>. Did you forget to wrap your children in braces? ( <${n.type}>{\`\`}</${n.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(n,e){let t={};return Rn.Children.forEach(n,r=>{if(!r||!r.props)return;const{children:i,...o}=r.props,s=Object.keys(o).reduce((c,f)=>(c[Tb[f]||f]=o[f],c),{});let{type:u}=r;switch(typeof u=="symbol"?u=u.toString():this.warnOnInvalidChildren(r,i),u){case"Symbol(react.fragment)":e=this.mapChildrenToProps(i,e);break;case"link":case"meta":case"noscript":case"script":case"style":t=this.flattenArrayTypeChildren(r,t,s,i);break;default:e=this.mapObjectTypeChildren(r,e,s,i);break}}),this.mapArrayTypeChildrenToProps(t,e)}render(){const{children:n,...e}=this.props;let t={...e},{helmetData:r}=e;if(n&&(t=this.mapChildrenToProps(n,t)),r&&!(r instanceof sm)){const i=r;r=new sm(i.context,!0),delete t.helmetData}return r?Rn.createElement(Hx,{...t,context:r.value}):Rn.createElement(MA.Consumer,null,i=>Rn.createElement(Hx,{...t,context:i}))}};const Cg=B.createContext({});function Ig(n){const e=B.useRef(null);return e.current===null&&(e.current=n()),e.current}const Sg=typeof window<"u",FA=Sg?B.useLayoutEffect:B.useEffect,rp=B.createContext(null);function bg(n,e){n.indexOf(e)===-1&&n.push(e)}function Rg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ho=(n,e,t)=>t>e?e:t<n?n:t;let Pg=()=>{};const po={},BA=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function UA(n){return typeof n=="object"&&n!==null}const jA=n=>/^0[^.\s]+$/u.test(n);function Ng(n){let e;return()=>(e===void 0&&(e=n()),e)}const Hr=n=>n,zb=(n,e)=>t=>e(n(t)),tf=(...n)=>n.reduce(zb),Lc=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class Dg{constructor(){this.subscriptions=[]}add(e){return bg(this.subscriptions,e),()=>Rg(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ni=n=>n*1e3,jr=n=>n/1e3;function zA(n,e){return e?n*(1e3/e):0}const HA=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Hb=1e-7,Gb=12;function Wb(n,e,t,r,i){let o,s,u=0;do s=e+(t-e)/2,o=HA(s,r,i)-n,o>0?t=s:e=s;while(Math.abs(o)>Hb&&++u<Gb);return s}function nf(n,e,t,r){if(n===e&&t===r)return Hr;const i=o=>Wb(o,0,1,n,t);return o=>o===0||o===1?o:HA(i(o),e,r)}const GA=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,WA=n=>e=>1-n(1-e),$A=nf(.33,1.53,.69,.99),Og=WA($A),qA=GA(Og),KA=n=>(n*=2)<1?.5*Og(n):.5*(2-Math.pow(2,-10*(n-1))),kg=n=>1-Math.sin(Math.acos(n)),XA=WA(kg),YA=GA(kg),$b=nf(.42,0,1,1),qb=nf(0,0,.58,1),QA=nf(.42,0,.58,1),Kb=n=>Array.isArray(n)&&typeof n[0]!="number",ZA=n=>Array.isArray(n)&&typeof n[0]=="number",Xb={linear:Hr,easeIn:$b,easeInOut:QA,easeOut:qb,circIn:kg,circInOut:YA,circOut:XA,backIn:Og,backInOut:qA,backOut:$A,anticipate:KA},Yb=n=>typeof n=="string",Gx=n=>{if(ZA(n)){Pg(n.length===4);const[e,t,r,i]=n;return nf(e,t,r,i)}else if(Yb(n))return Xb[n];return n},jh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Qb(n,e){let t=new Set,r=new Set,i=!1,o=!1;const s=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function c(h){s.has(h)&&(f.schedule(h),n()),h(u)}const f={schedule:(h,p=!1,v=!1)=>{const E=v&&i?t:r;return p&&s.add(h),E.has(h)||E.add(h),h},cancel:h=>{r.delete(h),s.delete(h)},process:h=>{if(u=h,i){o=!0;return}i=!0,[t,r]=[r,t],t.forEach(c),t.clear(),i=!1,o&&(o=!1,f.process(h))}};return f}const Zb=40;function JA(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,s=jh.reduce((M,j)=>(M[j]=Qb(o),M),{}),{setup:u,read:c,resolveKeyframes:f,preUpdate:h,update:p,preRender:v,render:y,postRender:E}=s,A=()=>{const M=po.useManualTiming?i.timestamp:performance.now();t=!1,po.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(M-i.timestamp,Zb),1)),i.timestamp=M,i.isProcessing=!0,u.process(i),c.process(i),f.process(i),h.process(i),p.process(i),v.process(i),y.process(i),E.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(A))},T=()=>{t=!0,r=!0,i.isProcessing||n(A)};return{schedule:jh.reduce((M,j)=>{const H=s[j];return M[j]=(W,R=!1,I=!1)=>(t||T(),H.schedule(W,R,I)),M},{}),cancel:M=>{for(let j=0;j<jh.length;j++)s[jh[j]].cancel(M)},state:i,steps:s}}const{schedule:Pt,cancel:gs,state:Sn,steps:v1}=JA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Hr,!0);let ad;function Jb(){ad=void 0}const lr={now:()=>(ad===void 0&&lr.set(Sn.isProcessing||po.useManualTiming?Sn.timestamp:performance.now()),ad),set:n=>{ad=n,queueMicrotask(Jb)}},eT=n=>e=>typeof e=="string"&&e.startsWith(n),Mg=eT("--"),eR=eT("var(--"),Lg=n=>eR(n)?tR.test(n.split("/*")[0].trim()):!1,tR=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Zu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Vc={...Zu,transform:n=>ho(0,1,n)},zh={...Zu,default:1},Ec=n=>Math.round(n*1e5)/1e5,Vg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function nR(n){return n==null}const rR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Fg=(n,e)=>t=>!!(typeof t=="string"&&rR.test(t)&&t.startsWith(n)||e&&!nR(t)&&Object.prototype.hasOwnProperty.call(t,e)),tT=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,o,s,u]=r.match(Vg);return{[n]:parseFloat(i),[e]:parseFloat(o),[t]:parseFloat(s),alpha:u!==void 0?parseFloat(u):1}},iR=n=>ho(0,255,n),y1={...Zu,transform:n=>Math.round(iR(n))},la={test:Fg("rgb","red"),parse:tT("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+y1.transform(n)+", "+y1.transform(e)+", "+y1.transform(t)+", "+Ec(Vc.transform(r))+")"};function oR(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const um={test:Fg("#"),parse:oR,transform:la.transform},rf=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ts=rf("deg"),Di=rf("%"),Be=rf("px"),sR=rf("vh"),aR=rf("vw"),Wx={...Di,parse:n=>Di.parse(n)/100,transform:n=>Di.transform(n*100)},Eu={test:Fg("hsl","hue"),parse:tT("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Di.transform(Ec(e))+", "+Di.transform(Ec(t))+", "+Ec(Vc.transform(r))+")"},Qt={test:n=>la.test(n)||um.test(n)||Eu.test(n),parse:n=>la.test(n)?la.parse(n):Eu.test(n)?Eu.parse(n):um.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?la.transform(n):Eu.transform(n),getAnimatableNone:n=>{const e=Qt.parse(n);return e.alpha=0,Qt.transform(e)}},uR=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function lR(n){return isNaN(n)&&typeof n=="string"&&(n.match(Vg)?.length||0)+(n.match(uR)?.length||0)>0}const nT="number",rT="color",cR="var",fR="var(",$x="${}",hR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Fc(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let o=0;const u=e.replace(hR,c=>(Qt.test(c)?(r.color.push(o),i.push(rT),t.push(Qt.parse(c))):c.startsWith(fR)?(r.var.push(o),i.push(cR),t.push(c)):(r.number.push(o),i.push(nT),t.push(parseFloat(c))),++o,$x)).split($x);return{values:t,split:u,indexes:r,types:i}}function iT(n){return Fc(n).values}function oT(n){const{split:e,types:t}=Fc(n),r=e.length;return i=>{let o="";for(let s=0;s<r;s++)if(o+=e[s],i[s]!==void 0){const u=t[s];u===nT?o+=Ec(i[s]):u===rT?o+=Qt.transform(i[s]):o+=i[s]}return o}}const dR=n=>typeof n=="number"?0:Qt.test(n)?Qt.getAnimatableNone(n):n;function pR(n){const e=iT(n);return oT(n)(e.map(dR))}const vs={test:lR,parse:iT,createTransformer:oT,getAnimatableNone:pR};function _1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function mR({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,o=0,s=0;if(!e)i=o=s=t;else{const u=t<.5?t*(1+e):t+e-t*e,c=2*t-u;i=_1(c,u,n+1/3),o=_1(c,u,n),s=_1(c,u,n-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}function Sd(n,e){return t=>t>0?e:n}const Ot=(n,e,t)=>n+(e-n)*t,x1=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},gR=[um,la,Eu],vR=n=>gR.find(e=>e.test(n));function qx(n){const e=vR(n);if(!e)return!1;let t=e.parse(n);return e===Eu&&(t=mR(t)),t}const Kx=(n,e)=>{const t=qx(n),r=qx(e);if(!t||!r)return Sd(n,e);const i={...t};return o=>(i.red=x1(t.red,r.red,o),i.green=x1(t.green,r.green,o),i.blue=x1(t.blue,r.blue,o),i.alpha=Ot(t.alpha,r.alpha,o),la.transform(i))},lm=new Set(["none","hidden"]);function yR(n,e){return lm.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function _R(n,e){return t=>Ot(n,e,t)}function Bg(n){return typeof n=="number"?_R:typeof n=="string"?Lg(n)?Sd:Qt.test(n)?Kx:ER:Array.isArray(n)?sT:typeof n=="object"?Qt.test(n)?Kx:xR:Sd}function sT(n,e){const t=[...n],r=t.length,i=n.map((o,s)=>Bg(o)(o,e[s]));return o=>{for(let s=0;s<r;s++)t[s]=i[s](o);return t}}function xR(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=Bg(n[i])(n[i],e[i]));return i=>{for(const o in r)t[o]=r[o](i);return t}}function wR(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],s=n.indexes[o][r[o]],u=n.values[s]??0;t[i]=u,r[o]++}return t}const ER=(n,e)=>{const t=vs.createTransformer(e),r=Fc(n),i=Fc(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?lm.has(n)&&!i.values.length||lm.has(e)&&!r.values.length?yR(n,e):tf(sT(wR(r,i),i.values),t):Sd(n,e)};function aT(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Ot(n,e,t):Bg(n)(n,e)}const AR=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Pt.update(e,t),stop:()=>gs(e),now:()=>Sn.isProcessing?Sn.timestamp:lr.now()}},uT=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let o=0;o<i;o++)r+=Math.round(n(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},bd=2e4;function Ug(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<bd;)e+=t,r=n.next(e);return e>=bd?1/0:e}function TR(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(Ug(r),bd);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:jr(i)}}const CR=5;function lT(n,e,t){const r=Math.max(e-CR,0);return zA(t-n(r),e-r)}const Bt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},w1=.001;function IR({duration:n=Bt.duration,bounce:e=Bt.bounce,velocity:t=Bt.velocity,mass:r=Bt.mass}){let i,o,s=1-e;s=ho(Bt.minDamping,Bt.maxDamping,s),n=ho(Bt.minDuration,Bt.maxDuration,jr(n)),s<1?(i=f=>{const h=f*s,p=h*n,v=h-t,y=cm(f,s),E=Math.exp(-p);return w1-v/y*E},o=f=>{const p=f*s*n,v=p*t+t,y=Math.pow(s,2)*Math.pow(f,2)*n,E=Math.exp(-p),A=cm(Math.pow(f,2),s);return(-i(f)+w1>0?-1:1)*((v-y)*E)/A}):(i=f=>{const h=Math.exp(-f*n),p=(f-t)*n+1;return-w1+h*p},o=f=>{const h=Math.exp(-f*n),p=(t-f)*(n*n);return h*p});const u=5/n,c=bR(i,o,u);if(n=Ni(n),isNaN(c))return{stiffness:Bt.stiffness,damping:Bt.damping,duration:n};{const f=Math.pow(c,2)*r;return{stiffness:f,damping:s*2*Math.sqrt(r*f),duration:n}}}const SR=12;function bR(n,e,t){let r=t;for(let i=1;i<SR;i++)r=r-n(r)/e(r);return r}function cm(n,e){return n*Math.sqrt(1-e*e)}const RR=["duration","bounce"],PR=["stiffness","damping","mass"];function Xx(n,e){return e.some(t=>n[t]!==void 0)}function NR(n){let e={velocity:Bt.velocity,stiffness:Bt.stiffness,damping:Bt.damping,mass:Bt.mass,isResolvedFromDuration:!1,...n};if(!Xx(n,PR)&&Xx(n,RR))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,o=2*ho(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Bt.mass,stiffness:i,damping:o}}else{const t=IR(n);e={...e,...t,mass:Bt.mass},e.isResolvedFromDuration=!0}return e}function Rd(n=Bt.visualDuration,e=Bt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const o=t.keyframes[0],s=t.keyframes[t.keyframes.length-1],u={done:!1,value:o},{stiffness:c,damping:f,mass:h,duration:p,velocity:v,isResolvedFromDuration:y}=NR({...t,velocity:-jr(t.velocity||0)}),E=v||0,A=f/(2*Math.sqrt(c*h)),T=s-o,N=jr(Math.sqrt(c/h)),P=Math.abs(T)<5;r||(r=P?Bt.restSpeed.granular:Bt.restSpeed.default),i||(i=P?Bt.restDelta.granular:Bt.restDelta.default);let M;if(A<1){const H=cm(N,A);M=W=>{const R=Math.exp(-A*N*W);return s-R*((E+A*N*T)/H*Math.sin(H*W)+T*Math.cos(H*W))}}else if(A===1)M=H=>s-Math.exp(-N*H)*(T+(E+N*T)*H);else{const H=N*Math.sqrt(A*A-1);M=W=>{const R=Math.exp(-A*N*W),I=Math.min(H*W,300);return s-R*((E+A*N*T)*Math.sinh(I)+H*T*Math.cosh(I))/H}}const j={calculatedDuration:y&&p||null,next:H=>{const W=M(H);if(y)u.done=H>=p;else{let R=H===0?E:0;A<1&&(R=H===0?Ni(E):lT(M,H,W));const I=Math.abs(R)<=r,D=Math.abs(s-W)<=i;u.done=I&&D}return u.value=u.done?s:W,u},toString:()=>{const H=Math.min(Ug(j),bd),W=uT(R=>j.next(H*R).value,H,30);return H+"ms "+W},toTransition:()=>{}};return j}Rd.applyToOptions=n=>{const e=TR(n,100,Rd);return n.ease=e.ease,n.duration=Ni(e.duration),n.type="keyframes",n};function fm({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:u,max:c,restDelta:f=.5,restSpeed:h}){const p=n[0],v={done:!1,value:p},y=I=>u!==void 0&&I<u||c!==void 0&&I>c,E=I=>u===void 0?c:c===void 0||Math.abs(u-I)<Math.abs(c-I)?u:c;let A=t*e;const T=p+A,N=s===void 0?T:s(T);N!==T&&(A=N-p);const P=I=>-A*Math.exp(-I/r),M=I=>N+P(I),j=I=>{const D=P(I),O=M(I);v.done=Math.abs(D)<=f,v.value=v.done?N:O};let H,W;const R=I=>{y(v.value)&&(H=I,W=Rd({keyframes:[v.value,E(v.value)],velocity:lT(M,I,v.value),damping:i,stiffness:o,restDelta:f,restSpeed:h}))};return R(0),{calculatedDuration:null,next:I=>{let D=!1;return!W&&H===void 0&&(D=!0,j(I),R(I)),H!==void 0&&I>=H?W.next(I-H):(!D&&j(I),v)}}}function DR(n,e,t){const r=[],i=t||po.mix||aT,o=n.length-1;for(let s=0;s<o;s++){let u=i(n[s],n[s+1]);if(e){const c=Array.isArray(e)?e[s]||Hr:e;u=tf(c,u)}r.push(u)}return r}function OR(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const o=n.length;if(Pg(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const s=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=DR(e,r,i),c=u.length,f=h=>{if(s&&h<n[0])return e[0];let p=0;if(c>1)for(;p<n.length-2&&!(h<n[p+1]);p++);const v=Lc(n[p],n[p+1],h);return u[p](v)};return t?h=>f(ho(n[0],n[o-1],h)):f}function kR(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Lc(0,e,r);n.push(Ot(t,1,i))}}function MR(n){const e=[0];return kR(e,n.length-1),e}function LR(n,e){return n.map(t=>t*e)}function VR(n,e){return n.map(()=>e||QA).splice(0,n.length-1)}function Ac({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=Kb(r)?r.map(Gx):Gx(r),o={done:!1,value:e[0]},s=LR(t&&t.length===e.length?t:MR(e),n),u=OR(s,e,{ease:Array.isArray(i)?i:VR(e,i)});return{calculatedDuration:n,next:c=>(o.value=u(c),o.done=c>=n,o)}}const FR=n=>n!==null;function jg(n,{repeat:e,repeatType:t="loop"},r,i=1){const o=n.filter(FR),u=i<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!u||r===void 0?o[u]:r}const BR={decay:fm,inertia:fm,tween:Ac,keyframes:Ac,spring:Rd};function cT(n){typeof n.type=="string"&&(n.type=BR[n.type])}class zg{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const UR=n=>n/100;class Hg extends zg{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==lr.now()&&this.tick(lr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;cT(e);const{type:t=Ac,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:s=0}=e;let{keyframes:u}=e;const c=t||Ac;c!==Ac&&typeof u[0]!="number"&&(this.mixKeyframes=tf(UR,aT(u[0],u[1])),u=[0,100]);const f=c({...e,keyframes:u});o==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...u].reverse(),velocity:-s})),f.calculatedDuration===null&&(f.calculatedDuration=Ug(f));const{calculatedDuration:h}=f;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:s,resolvedDuration:u,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:h,repeat:p,repeatType:v,repeatDelay:y,type:E,onUpdate:A,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const N=this.currentTime-f*(this.playbackSpeed>=0?1:-1),P=this.playbackSpeed>=0?N<0:N>i;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let M=this.currentTime,j=r;if(p){const I=Math.min(this.currentTime,i)/u;let D=Math.floor(I),O=I%1;!O&&I>=1&&(O=1),O===1&&D--,D=Math.min(D,p+1),!!(D%2)&&(v==="reverse"?(O=1-O,y&&(O-=y/u)):v==="mirror"&&(j=s)),M=ho(0,1,O)*u}const H=P?{done:!1,value:h[0]}:j.next(M);o&&(H.value=o(H.value));let{done:W}=H;!P&&c!==null&&(W=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&W);return R&&E!==fm&&(H.value=jg(h,this.options,T,this.speed)),A&&A(H.value),R&&this.finish(),H}then(e,t){return this.finished.then(e,t)}get duration(){return jr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+jr(e)}get time(){return jr(this.currentTime)}set time(e){e=Ni(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(lr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=jr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=AR,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(lr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function jR(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const ca=n=>n*180/Math.PI,hm=n=>{const e=ca(Math.atan2(n[1],n[0]));return dm(e)},zR={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:hm,rotateZ:hm,skewX:n=>ca(Math.atan(n[1])),skewY:n=>ca(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},dm=n=>(n=n%360,n<0&&(n+=360),n),Yx=hm,Qx=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Zx=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),HR={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Qx,scaleY:Zx,scale:n=>(Qx(n)+Zx(n))/2,rotateX:n=>dm(ca(Math.atan2(n[6],n[5]))),rotateY:n=>dm(ca(Math.atan2(-n[2],n[0]))),rotateZ:Yx,rotate:Yx,skewX:n=>ca(Math.atan(n[4])),skewY:n=>ca(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function pm(n){return n.includes("scale")?1:0}function mm(n,e){if(!n||n==="none")return pm(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=HR,i=t;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=zR,i=u}if(!i)return pm(e);const o=r[e],s=i[1].split(",").map(WR);return typeof o=="function"?o(s):s[o]}const GR=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return mm(t,e)};function WR(n){return parseFloat(n.trim())}const Ju=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],el=new Set(Ju),Jx=n=>n===Zu||n===Be,$R=new Set(["x","y","z"]),qR=Ju.filter(n=>!$R.has(n));function KR(n){const e=[];return qR.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const pa={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>mm(e,"x"),y:(n,{transform:e})=>mm(e,"y")};pa.translateX=pa.x;pa.translateY=pa.y;const ma=new Set;let gm=!1,vm=!1,ym=!1;function fT(){if(vm){const n=Array.from(ma).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=KR(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([o,s])=>{r.getValue(o)?.set(s)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}vm=!1,gm=!1,ma.forEach(n=>n.complete(ym)),ma.clear()}function hT(){ma.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(vm=!0)})}function XR(){ym=!0,hT(),fT(),ym=!1}class Gg{constructor(e,t,r,i,o,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=o,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(ma.add(this),gm||(gm=!0,Pt.read(hT),Pt.resolveKeyframes(fT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const o=i?.get(),s=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const u=r.readValue(t,s);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=s),i&&o===void 0&&i.set(e[0])}jR(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ma.delete(this)}cancel(){this.state==="scheduled"&&(ma.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const YR=n=>n.startsWith("--");function QR(n,e,t){YR(e)?n.style.setProperty(e,t):n.style[e]=t}const ZR=Ng(()=>window.ScrollTimeline!==void 0),JR={};function eP(n,e){const t=Ng(n);return()=>JR[e]??t()}const dT=eP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),dc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,e2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:dc([0,.65,.55,1]),circOut:dc([.55,0,1,.45]),backIn:dc([.31,.01,.66,-.59]),backOut:dc([.33,1.53,.69,.99])};function pT(n,e){if(n)return typeof n=="function"?dT()?uT(n,e):"ease-out":ZA(n)?dc(n):Array.isArray(n)?n.map(t=>pT(t,e)||e2.easeOut):e2[n]}function tP(n,e,t,{delay:r=0,duration:i=300,repeat:o=0,repeatType:s="loop",ease:u="easeOut",times:c}={},f=void 0){const h={[e]:t};c&&(h.offset=c);const p=pT(u,i);Array.isArray(p)&&(h.easing=p);const v={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),n.animate(h,v)}function mT(n){return typeof n=="function"&&"applyToOptions"in n}function nP({type:n,...e}){return mT(n)&&dT()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class rP extends zg{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:o,allowFlatten:s=!1,finalKeyframe:u,onComplete:c}=e;this.isPseudoElement=!!o,this.allowFlatten=s,this.options=e,Pg(typeof e.type!="string");const f=nP(e);this.animation=tP(t,r,i,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const h=jg(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(h):QR(t,r,h),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return jr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+jr(e)}get time(){return jr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ni(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&ZR()?(this.animation.timeline=e,Hr):t(this)}}const gT={anticipate:KA,backInOut:qA,circInOut:YA};function iP(n){return n in gT}function oP(n){typeof n.ease=="string"&&iP(n.ease)&&(n.ease=gT[n.ease])}const t2=10;class sP extends rP{constructor(e){oP(e),cT(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:o,...s}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const u=new Hg({...s,autoplay:!1}),c=Ni(this.finishedTime??this.time);t.setWithVelocity(u.sample(c-t2).value,u.sample(c).value,t2),u.stop()}}const n2=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(vs.test(n)||n==="0")&&!n.startsWith("url("));function aP(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function uP(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],s=n2(i,e),u=n2(o,e);return!s||!u?!1:aP(n)||(t==="spring"||mT(t))&&r}function _m(n){n.duration=0,n.type="keyframes"}const lP=new Set(["opacity","clipPath","filter","transform"]),cP=Ng(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function fP(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:o,type:s}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:f}=e.owner.getProps();return cP()&&t&&lP.has(t)&&(t!=="transform"||!f)&&!c&&!r&&i!=="mirror"&&o!==0&&s!=="inertia"}const hP=40;class dP extends zg{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:s="loop",keyframes:u,name:c,motionValue:f,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=lr.now();const v={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:o,repeatType:s,name:c,motionValue:f,element:h,...p},y=h?.KeyframeResolver||Gg;this.keyframeResolver=new y(u,(E,A,T)=>this.onKeyframesResolved(E,A,v,!T),c,f,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:o,type:s,velocity:u,delay:c,isHandoff:f,onUpdate:h}=r;this.resolvedAt=lr.now(),uP(e,o,s,u)||((po.instantAnimations||!c)&&h?.(jg(e,r,t)),e[0]=e[e.length-1],_m(r),r.repeat=0);const v={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>hP?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},y=!f&&fP(v)?new sP({...v,element:v.motionValue.owner.current}):new Hg(v);y.finished.then(()=>this.notifyFinished()).catch(Hr),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),XR()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const pP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function mP(n){const e=pP.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function vT(n,e,t=1){const[r,i]=mP(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const s=o.trim();return BA(s)?parseFloat(s):s}return Lg(i)?vT(i,e,t+1):i}function Wg(n,e){return n?.[e]??n?.default??n}const yT=new Set(["width","height","top","left","right","bottom",...Ju]),gP={test:n=>n==="auto",parse:n=>n},_T=n=>e=>e.test(n),xT=[Zu,Be,Di,ts,aR,sR,gP],r2=n=>xT.find(_T(n));function vP(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||jA(n):!0}const yP=new Set(["brightness","contrast","saturate","opacity"]);function _P(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Vg)||[];if(!r)return n;const i=t.replace(r,"");let o=yP.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+i+")"}const xP=/\b([a-z-]*)\(.*?\)/gu,xm={...vs,getAnimatableNone:n=>{const e=n.match(xP);return e?e.map(_P).join(" "):n}},i2={...Zu,transform:Math.round},wP={rotate:ts,rotateX:ts,rotateY:ts,rotateZ:ts,scale:zh,scaleX:zh,scaleY:zh,scaleZ:zh,skew:ts,skewX:ts,skewY:ts,distance:Be,translateX:Be,translateY:Be,translateZ:Be,x:Be,y:Be,z:Be,perspective:Be,transformPerspective:Be,opacity:Vc,originX:Wx,originY:Wx,originZ:Be},$g={borderWidth:Be,borderTopWidth:Be,borderRightWidth:Be,borderBottomWidth:Be,borderLeftWidth:Be,borderRadius:Be,radius:Be,borderTopLeftRadius:Be,borderTopRightRadius:Be,borderBottomRightRadius:Be,borderBottomLeftRadius:Be,width:Be,maxWidth:Be,height:Be,maxHeight:Be,top:Be,right:Be,bottom:Be,left:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,backgroundPositionX:Be,backgroundPositionY:Be,...wP,zIndex:i2,fillOpacity:Vc,strokeOpacity:Vc,numOctaves:i2},EP={...$g,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:xm,WebkitFilter:xm},wT=n=>EP[n];function ET(n,e){let t=wT(n);return t!==xm&&(t=vs),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const AP=new Set(["auto","none","0"]);function TP(n,e,t){let r=0,i;for(;r<n.length&&!i;){const o=n[r];typeof o=="string"&&!AP.has(o)&&Fc(o).values.length&&(i=n[r]),r++}if(i&&t)for(const o of e)n[o]=ET(t,i)}class CP extends Gg{constructor(e,t,r,i,o){super(e,t,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let f=e[c];if(typeof f=="string"&&(f=f.trim(),Lg(f))){const h=vT(f,t.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!yT.has(r)||e.length!==2)return;const[i,o]=e,s=r2(i),u=r2(o);if(s!==u)if(Jx(s)&&Jx(u))for(let c=0;c<e.length;c++){const f=e[c];typeof f=="string"&&(e[c]=parseFloat(f))}else pa[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||vP(e[i]))&&r.push(i);r.length&&TP(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=pa[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,s=r[o];r[o]=pa[t](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,c])=>{e.getValue(u).set(c)}),this.resolveNoneKeyframes()}}function IP(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=t?.[n]??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const AT=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function TT(n){return UA(n)&&"offsetHeight"in n}const o2=30,SP=n=>!isNaN(parseFloat(n));class bP{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=lr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=lr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=SP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Dg);const r=this.events[e].add(t);return e==="change"?()=>{r(),Pt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=lr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>o2)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,o2);return zA(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bu(n,e){return new bP(n,e)}const{schedule:qg}=JA(queueMicrotask,!1),ri={x:!1,y:!1};function CT(){return ri.x||ri.y}function RP(n){return n==="x"||n==="y"?ri[n]?null:(ri[n]=!0,()=>{ri[n]=!1}):ri.x||ri.y?null:(ri.x=ri.y=!0,()=>{ri.x=ri.y=!1})}function IT(n,e){const t=IP(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function s2(n){return!(n.pointerType==="touch"||CT())}function PP(n,e,t={}){const[r,i,o]=IT(n,t),s=u=>{if(!s2(u))return;const{target:c}=u,f=e(c,u);if(typeof f!="function"||!c)return;const h=p=>{s2(p)&&(f(p),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,i)};return r.forEach(u=>{u.addEventListener("pointerenter",s,i)}),o}const ST=(n,e)=>e?n===e?!0:ST(n,e.parentElement):!1,Kg=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,NP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function DP(n){return NP.has(n.tagName)||n.tabIndex!==-1}const ud=new WeakSet;function a2(n){return e=>{e.key==="Enter"&&n(e)}}function E1(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const OP=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=a2(()=>{if(ud.has(t))return;E1(t,"down");const i=a2(()=>{E1(t,"up")}),o=()=>E1(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function u2(n){return Kg(n)&&!CT()}function kP(n,e,t={}){const[r,i,o]=IT(n,t),s=u=>{const c=u.currentTarget;if(!u2(u))return;ud.add(c);const f=e(c,u),h=(y,E)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",v),ud.has(c)&&ud.delete(c),u2(y)&&typeof f=="function"&&f(y,{success:E})},p=y=>{h(y,c===window||c===document||t.useGlobalTarget||ST(c,y.target))},v=y=>{h(y,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",v,i)};return r.forEach(u=>{(t.useGlobalTarget?window:u).addEventListener("pointerdown",s,i),TT(u)&&(u.addEventListener("focus",f=>OP(f,i)),!DP(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function bT(n){return UA(n)&&"ownerSVGElement"in n}function MP(n){return bT(n)&&n.tagName==="svg"}const zn=n=>!!(n&&n.getVelocity),LP=[...xT,Qt,vs],VP=n=>LP.find(_T(n)),Xg=B.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function l2(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function FP(...n){return e=>{let t=!1;const r=n.map(i=>{const o=l2(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():l2(n[i],null)}}}}function BP(...n){return B.useCallback(FP(...n),n)}class UP extends B.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=TT(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function jP({children:n,isPresent:e,anchorX:t,root:r}){const i=B.useId(),o=B.useRef(null),s=B.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=B.useContext(Xg),c=BP(o,n?.ref);return B.useInsertionEffect(()=>{const{width:f,height:h,top:p,left:v,right:y}=s.current;if(e||!o.current||!f||!h)return;const E=t==="left"?`left: ${v}`:`right: ${y}`;o.current.dataset.motionPopId=i;const A=document.createElement("style");u&&(A.nonce=u);const T=r??document.head;return T.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${h}px !important;
            ${E}px !important;
            top: ${p}px !important;
          }
        `),()=>{T.contains(A)&&T.removeChild(A)}},[e]),S.jsx(UP,{isPresent:e,childRef:o,sizeRef:s,children:B.cloneElement(n,{ref:c})})}const zP=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:s,anchorX:u,root:c})=>{const f=Ig(HP),h=B.useId();let p=!0,v=B.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:t,custom:i,onExitComplete:y=>{f.set(y,!0);for(const E of f.values())if(!E)return;r&&r()},register:y=>(f.set(y,!1),()=>f.delete(y))}),[t,f,r]);return o&&p&&(v={...v}),B.useMemo(()=>{f.forEach((y,E)=>f.set(E,!1))},[t]),B.useEffect(()=>{!t&&!f.size&&r&&r()},[t]),s==="popLayout"&&(n=S.jsx(jP,{isPresent:t,anchorX:u,root:c,children:n})),S.jsx(rp.Provider,{value:v,children:n})};function HP(){return new Map}function RT(n=!0){const e=B.useContext(rp);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,o=B.useId();B.useEffect(()=>{if(n)return i(o)},[n]);const s=B.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,s]:[!0]}const Hh=n=>n.key||"";function c2(n){const e=[];return B.Children.forEach(n,t=>{B.isValidElement(t)&&e.push(t)}),e}const ip=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:s=!1,anchorX:u="left",root:c})=>{const[f,h]=RT(s),p=B.useMemo(()=>c2(n),[n]),v=s&&!f?[]:p.map(Hh),y=B.useRef(!0),E=B.useRef(p),A=Ig(()=>new Map),[T,N]=B.useState(p),[P,M]=B.useState(p);FA(()=>{y.current=!1,E.current=p;for(let W=0;W<P.length;W++){const R=Hh(P[W]);v.includes(R)?A.delete(R):A.get(R)!==!0&&A.set(R,!1)}},[P,v.length,v.join("-")]);const j=[];if(p!==T){let W=[...p];for(let R=0;R<P.length;R++){const I=P[R],D=Hh(I);v.includes(D)||(W.splice(R,0,I),j.push(I))}return o==="wait"&&j.length&&(W=j),M(c2(W)),N(p),null}const{forceRender:H}=B.useContext(Cg);return S.jsx(S.Fragment,{children:P.map(W=>{const R=Hh(W),I=s&&!f?!1:p===P||v.includes(R),D=()=>{if(A.has(R))A.set(R,!0);else return;let O=!0;A.forEach(F=>{F||(O=!1)}),O&&(H?.(),M(E.current),s&&h?.(),r&&r())};return S.jsx(zP,{isPresent:I,initial:!y.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:c,onExitComplete:I?void 0:D,anchorX:u,children:W},R)})})},PT=B.createContext({strict:!1}),f2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Uu={};for(const n in f2)Uu[n]={isEnabled:e=>f2[n].some(t=>!!e[t])};function GP(n){for(const e in n)Uu[e]={...Uu[e],...n[e]}}const WP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Pd(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||WP.has(n)}let NT=n=>!Pd(n);function $P(n){typeof n=="function"&&(NT=e=>e.startsWith("on")?!Pd(e):n(e))}try{$P(require("@emotion/is-prop-valid").default)}catch{}function qP(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(NT(i)||t===!0&&Pd(i)||!e&&!Pd(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const op=B.createContext({});function sp(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Bc(n){return typeof n=="string"||Array.isArray(n)}const Yg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Qg=["initial",...Yg];function ap(n){return sp(n.animate)||Qg.some(e=>Bc(n[e]))}function DT(n){return!!(ap(n)||n.variants)}function KP(n,e){if(ap(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Bc(t)?t:void 0,animate:Bc(r)?r:void 0}}return n.inherit!==!1?e:{}}function XP(n){const{initial:e,animate:t}=KP(n,B.useContext(op));return B.useMemo(()=>({initial:e,animate:t}),[h2(e),h2(t)])}function h2(n){return Array.isArray(n)?n.join(" "):n}const Uc={};function YP(n){for(const e in n)Uc[e]=n[e],Mg(e)&&(Uc[e].isCSSVariable=!0)}function OT(n,{layout:e,layoutId:t}){return el.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Uc[n]||n==="opacity")}const QP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ZP=Ju.length;function JP(n,e,t){let r="",i=!0;for(let o=0;o<ZP;o++){const s=Ju[o],u=n[s];if(u===void 0)continue;let c=!0;if(typeof u=="number"?c=u===(s.startsWith("scale")?1:0):c=parseFloat(u)===0,!c||t){const f=AT(u,$g[s]);if(!c){i=!1;const h=QP[s]||s;r+=`${h}(${f}) `}t&&(e[s]=f)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function Zg(n,e,t){const{style:r,vars:i,transformOrigin:o}=n;let s=!1,u=!1;for(const c in e){const f=e[c];if(el.has(c)){s=!0;continue}else if(Mg(c)){i[c]=f;continue}else{const h=AT(f,$g[c]);c.startsWith("origin")?(u=!0,o[c]=h):r[c]=h}}if(e.transform||(s||t?r.transform=JP(e,n.transform,t):r.transform&&(r.transform="none")),u){const{originX:c="50%",originY:f="50%",originZ:h=0}=o;r.transformOrigin=`${c} ${f} ${h}`}}const Jg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function kT(n,e,t){for(const r in e)!zn(e[r])&&!OT(r,t)&&(n[r]=e[r])}function e8({transformTemplate:n},e){return B.useMemo(()=>{const t=Jg();return Zg(t,e,n),Object.assign({},t.vars,t.style)},[e])}function t8(n,e){const t=n.style||{},r={};return kT(r,t,n),Object.assign(r,e8(n,e)),r}function n8(n,e){const t={},r=t8(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const r8={offset:"stroke-dashoffset",array:"stroke-dasharray"},i8={offset:"strokeDashoffset",array:"strokeDasharray"};function o8(n,e,t=1,r=0,i=!0){n.pathLength=1;const o=i?r8:i8;n[o.offset]=Be.transform(-r);const s=Be.transform(e),u=Be.transform(t);n[o.array]=`${s} ${u}`}function MT(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:s=0,...u},c,f,h){if(Zg(n,u,f),c){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:v}=n;p.transform&&(v.transform=p.transform,delete p.transform),(v.transform||p.transformOrigin)&&(v.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),v.transform&&(v.transformBox=h?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),r!==void 0&&(p.scale=r),i!==void 0&&o8(p,i,o,s,!1)}const LT=()=>({...Jg(),attrs:{}}),VT=n=>typeof n=="string"&&n.toLowerCase()==="svg";function s8(n,e,t,r){const i=B.useMemo(()=>{const o=LT();return MT(o,e,VT(r),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};kT(o,n.style,n),i.style={...o,...i.style}}return i}const a8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ev(n){return typeof n!="string"||n.includes("-")?!1:!!(a8.indexOf(n)>-1||/[A-Z]/u.test(n))}function u8(n,e,t,{latestValues:r},i,o=!1){const u=(ev(n)?s8:n8)(e,r,i,n),c=qP(e,typeof n=="string",o),f=n!==B.Fragment?{...c,...u,ref:t}:{},{children:h}=e,p=B.useMemo(()=>zn(h)?h.get():h,[h]);return B.createElement(n,{...f,children:p})}function d2(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function tv(n,e,t,r){if(typeof e=="function"){const[i,o]=d2(r);e=e(t!==void 0?t:n.custom,i,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,o]=d2(r);e=e(t!==void 0?t:n.custom,i,o)}return e}function ld(n){return zn(n)?n.get():n}function l8({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:c8(t,r,i,n),renderState:e()}}function c8(n,e,t,r){const i={},o=r(n,{});for(const v in o)i[v]=ld(o[v]);let{initial:s,animate:u}=n;const c=ap(n),f=DT(n);e&&f&&!c&&n.inherit!==!1&&(s===void 0&&(s=e.initial),u===void 0&&(u=e.animate));let h=t?t.initial===!1:!1;h=h||s===!1;const p=h?u:s;if(p&&typeof p!="boolean"&&!sp(p)){const v=Array.isArray(p)?p:[p];for(let y=0;y<v.length;y++){const E=tv(n,v[y]);if(E){const{transitionEnd:A,transition:T,...N}=E;for(const P in N){let M=N[P];if(Array.isArray(M)){const j=h?M.length-1:0;M=M[j]}M!==null&&(i[P]=M)}for(const P in A)i[P]=A[P]}}}return i}const FT=n=>(e,t)=>{const r=B.useContext(op),i=B.useContext(rp),o=()=>l8(n,e,r,i);return t?o():Ig(o)};function nv(n,e,t){const{style:r}=n,i={};for(const o in r)(zn(r[o])||e.style&&zn(e.style[o])||OT(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(i[o]=r[o]);return i}const f8=FT({scrapeMotionValuesFromProps:nv,createRenderState:Jg});function BT(n,e,t){const r=nv(n,e,t);for(const i in n)if(zn(n[i])||zn(e[i])){const o=Ju.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=n[i]}return r}const h8=FT({scrapeMotionValuesFromProps:BT,createRenderState:LT}),d8=Symbol.for("motionComponentSymbol");function Au(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function p8(n,e,t){return B.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Au(t)&&(t.current=r))},[e])}const rv=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),m8="framerAppearId",UT="data-"+rv(m8),jT=B.createContext({});function g8(n,e,t,r,i){const{visualElement:o}=B.useContext(op),s=B.useContext(PT),u=B.useContext(rp),c=B.useContext(Xg).reducedMotion,f=B.useRef(null);r=r||s.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const h=f.current,p=B.useContext(jT);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&v8(f.current,t,i,p);const v=B.useRef(!1);B.useInsertionEffect(()=>{h&&v.current&&h.update(t,u)});const y=t[UT],E=B.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return FA(()=>{h&&(v.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),E.current&&h.animationState&&h.animationState.animateChanges())}),B.useEffect(()=>{h&&(!E.current&&h.animationState&&h.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),E.current=!1),h.enteringChildren=void 0)}),h}function v8(n,e,t,r){const{layoutId:i,layout:o,drag:s,dragConstraints:u,layoutScroll:c,layoutRoot:f,layoutCrossfade:h}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:zT(n.parent)),n.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!s||u&&Au(u),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:c,layoutRoot:f})}function zT(n){if(n)return n.options.allowProjection!==!1?n.projection:zT(n.parent)}function A1(n,{forwardMotionProps:e=!1}={},t,r){t&&GP(t);const i=ev(n)?h8:f8;function o(u,c){let f;const h={...B.useContext(Xg),...u,layoutId:y8(u)},{isStatic:p}=h,v=XP(u),y=i(u,p);if(!p&&Sg){_8();const E=x8(h);f=E.MeasureLayout,v.visualElement=g8(n,y,h,r,E.ProjectionNode)}return S.jsxs(op.Provider,{value:v,children:[f&&v.visualElement?S.jsx(f,{visualElement:v.visualElement,...h}):null,u8(n,u,p8(y,v.visualElement,c),y,p,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const s=B.forwardRef(o);return s[d8]=n,s}function y8({layoutId:n}){const e=B.useContext(Cg).id;return e&&n!==void 0?e+"-"+n:n}function _8(n,e){B.useContext(PT).strict}function x8(n){const{drag:e,layout:t}=Uu;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function w8(n,e){if(typeof Proxy>"u")return A1;const t=new Map,r=(o,s)=>A1(o,s,n,e),i=(o,s)=>r(o,s);return new Proxy(i,{get:(o,s)=>s==="create"?r:(t.has(s)||t.set(s,A1(s,void 0,n,e)),t.get(s))})}function HT({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function E8({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function A8(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function T1(n){return n===void 0||n===1}function wm({scale:n,scaleX:e,scaleY:t}){return!T1(n)||!T1(e)||!T1(t)}function sa(n){return wm(n)||GT(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function GT(n){return p2(n.x)||p2(n.y)}function p2(n){return n&&n!=="0%"}function Nd(n,e,t){const r=n-t,i=e*r;return t+i}function m2(n,e,t,r,i){return i!==void 0&&(n=Nd(n,i,r)),Nd(n,t,r)+e}function Em(n,e=0,t=1,r,i){n.min=m2(n.min,e,t,r,i),n.max=m2(n.max,e,t,r,i)}function WT(n,{x:e,y:t}){Em(n.x,e.translate,e.scale,e.originPoint),Em(n.y,t.translate,t.scale,t.originPoint)}const g2=.999999999999,v2=1.0000000000001;function T8(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let o,s;for(let u=0;u<i;u++){o=t[u],s=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Cu(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,WT(n,s)),r&&sa(o.latestValues)&&Cu(n,o.latestValues))}e.x<v2&&e.x>g2&&(e.x=1),e.y<v2&&e.y>g2&&(e.y=1)}function Tu(n,e){n.min=n.min+e,n.max=n.max+e}function y2(n,e,t,r,i=.5){const o=Ot(n.min,n.max,i);Em(n,e,t,o,r)}function Cu(n,e){y2(n.x,e.x,e.scaleX,e.scale,e.originX),y2(n.y,e.y,e.scaleY,e.scale,e.originY)}function $T(n,e){return HT(A8(n.getBoundingClientRect(),e))}function C8(n,e,t){const r=$T(n,t),{scroll:i}=e;return i&&(Tu(r.x,i.offset.x),Tu(r.y,i.offset.y)),r}const _2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Iu=()=>({x:_2(),y:_2()}),x2=()=>({min:0,max:0}),Gt=()=>({x:x2(),y:x2()}),Am={current:null},qT={current:!1};function I8(){if(qT.current=!0,!!Sg)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Am.current=n.matches;n.addEventListener("change",e),e()}else Am.current=!1}const S8=new WeakMap;function b8(n,e,t){for(const r in e){const i=e[r],o=t[r];if(zn(i))n.addValue(r,i);else if(zn(o))n.addValue(r,Bu(i,{owner:n}));else if(o!==i)if(n.hasValue(r)){const s=n.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=n.getStaticValue(r);n.addValue(r,Bu(s!==void 0?s:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const w2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class R8{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:s},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Gg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=lr.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Pt.render(this.render,!1,!0))};const{latestValues:c,renderState:f}=s;this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=ap(t),this.isVariantNode=DT(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in p){const y=p[v];c[v]!==void 0&&zn(y)&&y.set(c[v])}}mount(e){this.current=e,S8.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),qT.current||I8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Am.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),gs(this.notifyUpdate),gs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=el.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&Pt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Uu){const t=Uu[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Gt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<w2.length;r++){const i=w2[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,s=e[o];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=b8(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Bu(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(BA(r)||jA(r))?r=parseFloat(r):!VP(r)&&vs.test(t)&&(r=ET(e,t)),this.setBaseTarget(e,zn(r)?r.get():r)),zn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const o=tv(this.props,t,this.presenceContext?.custom);o&&(r=o[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!zn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Dg),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){qg.render(this.render)}}class KT extends R8{constructor(){super(...arguments),this.KeyframeResolver=CP}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;zn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function XT(n,{style:e,vars:t},r,i){const o=n.style;let s;for(s in e)o[s]=e[s];i?.applyProjectionStyles(o,r);for(s in t)o.setProperty(s,t[s])}function P8(n){return window.getComputedStyle(n)}class N8 extends KT{constructor(){super(...arguments),this.type="html",this.renderInstance=XT}readValueFromInstance(e,t){if(el.has(t))return this.projection?.isProjecting?pm(t):GR(e,t);{const r=P8(e),i=(Mg(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return $T(e,t)}build(e,t,r){Zg(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return nv(e,t,r)}}const YT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function D8(n,e,t,r){XT(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(YT.has(i)?i:rv(i),e.attrs[i])}class O8 extends KT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Gt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(el.has(t)){const r=wT(t);return r&&r.default||0}return t=YT.has(t)?t:rv(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return BT(e,t,r)}build(e,t,r){MT(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){D8(e,t,r,i)}mount(e){this.isSVGTag=VT(e.tagName),super.mount(e)}}const k8=(n,e)=>ev(n)?new O8(e):new N8(e,{allowProjection:n!==B.Fragment});function Ou(n,e,t){const r=n.getProps();return tv(r,e,t!==void 0?t:r.custom,n)}const Tm=n=>Array.isArray(n);function M8(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Bu(t))}function L8(n){return Tm(n)?n[n.length-1]||0:n}function V8(n,e){const t=Ou(n,e);let{transitionEnd:r={},transition:i={},...o}=t||{};o={...o,...r};for(const s in o){const u=L8(o[s]);M8(n,s,u)}}function F8(n){return!!(zn(n)&&n.add)}function Cm(n,e){const t=n.getValue("willChange");if(F8(t))return t.add(e);if(!t&&po.WillChange){const r=new po.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function QT(n){return n.props[UT]}const B8=n=>n!==null;function U8(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(B8),o=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[o]}const j8={type:"spring",stiffness:500,damping:25,restSpeed:10},z8=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),H8={type:"keyframes",duration:.8},G8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},W8=(n,{keyframes:e})=>e.length>2?H8:el.has(n)?n.startsWith("scale")?z8(e[1]):j8:G8;function $8({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:u,from:c,elapsed:f,...h}){return!!Object.keys(h).length}const iv=(n,e,t,r={},i,o)=>s=>{const u=Wg(r,n)||{},c=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Ni(c);const h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:v=>{e.set(v),u.onUpdate&&u.onUpdate(v)},onComplete:()=>{s(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:o?void 0:i};$8(u)||Object.assign(h,W8(n,h)),h.duration&&(h.duration=Ni(h.duration)),h.repeatDelay&&(h.repeatDelay=Ni(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(_m(h),h.delay===0&&(p=!0)),(po.instantAnimations||po.skipAnimations)&&(p=!0,_m(h),h.delay=0),h.allowFlatten=!u.type&&!u.ease,p&&!o&&e.get()!==void 0){const v=U8(h.keyframes,u);if(v!==void 0){Pt.update(()=>{h.onUpdate(v),h.onComplete()});return}}return u.isSync?new Hg(h):new dP(h)};function q8({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function ZT(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:s,...u}=e;r&&(o=r);const c=[],f=i&&n.animationState&&n.animationState.getState()[i];for(const h in u){const p=n.getValue(h,n.latestValues[h]??null),v=u[h];if(v===void 0||f&&q8(f,h))continue;const y={delay:t,...Wg(o||{},h)},E=p.get();if(E!==void 0&&!p.isAnimating&&!Array.isArray(v)&&v===E&&!y.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const N=QT(n);if(N){const P=window.MotionHandoffAnimation(N,h,Pt);P!==null&&(y.startTime=P,A=!0)}}Cm(n,h),p.start(iv(h,p,v,n.shouldReduceMotion&&yT.has(h)?{type:!1}:y,n,A));const T=p.animation;T&&c.push(T)}return s&&Promise.all(c).then(()=>{Pt.update(()=>{s&&V8(n,s)})}),c}function JT(n,e,t,r=0,i=1){const o=Array.from(n).sort((f,h)=>f.sortNodePosition(h)).indexOf(e),s=n.size,u=(s-1)*r;return typeof t=="function"?t(o,s):i===1?o*r:u-o*r}function Im(n,e,t={}){const r=Ou(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const o=r?()=>Promise.all(ZT(n,r,t)):()=>Promise.resolve(),s=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:h,staggerDirection:p}=i;return K8(n,e,c,f,h,p,t)}:()=>Promise.resolve(),{when:u}=i;if(u){const[c,f]=u==="beforeChildren"?[o,s]:[s,o];return c().then(()=>f())}else return Promise.all([o(),s(t.delay)])}function K8(n,e,t=0,r=0,i=0,o=1,s){const u=[];for(const c of n.variantChildren)c.notify("AnimationStart",e),u.push(Im(c,e,{...s,delay:t+(typeof r=="function"?0:r)+JT(n.variantChildren,c,r,i,o)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(u)}function X8(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>Im(n,o,t));r=Promise.all(i)}else if(typeof e=="string")r=Im(n,e,t);else{const i=typeof e=="function"?Ou(n,e,t.custom):e;r=Promise.all(ZT(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function eC(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const Y8=Qg.length;function tC(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?tC(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<Y8;t++){const r=Qg[t],i=n.props[r];(Bc(i)||i===!1)&&(e[r]=i)}return e}const Q8=[...Yg].reverse(),Z8=Yg.length;function J8(n){return e=>Promise.all(e.map(({animation:t,options:r})=>X8(n,t,r)))}function eN(n){let e=J8(n),t=E2(),r=!0;const i=c=>(f,h)=>{const p=Ou(n,h,c==="exit"?n.presenceContext?.custom:void 0);if(p){const{transition:v,transitionEnd:y,...E}=p;f={...f,...E,...y}}return f};function o(c){e=c(n)}function s(c){const{props:f}=n,h=tC(n.parent)||{},p=[],v=new Set;let y={},E=1/0;for(let T=0;T<Z8;T++){const N=Q8[T],P=t[N],M=f[N]!==void 0?f[N]:h[N],j=Bc(M),H=N===c?P.isActive:null;H===!1&&(E=T);let W=M===h[N]&&M!==f[N]&&j;if(W&&r&&n.manuallyAnimateOnMount&&(W=!1),P.protectedKeys={...y},!P.isActive&&H===null||!M&&!P.prevProp||sp(M)||typeof M=="boolean")continue;const R=tN(P.prevProp,M);let I=R||N===c&&P.isActive&&!W&&j||T>E&&j,D=!1;const O=Array.isArray(M)?M:[M];let F=O.reduce(i(N),{});H===!1&&(F={});const{prevResolvedValues:U={}}=P,V={...U,...F},te=_e=>{I=!0,v.has(_e)&&(D=!0,v.delete(_e)),P.needsAnimating[_e]=!0;const Z=n.getValue(_e);Z&&(Z.liveStyle=!1)};for(const _e in V){const Z=F[_e],me=U[_e];if(y.hasOwnProperty(_e))continue;let de=!1;Tm(Z)&&Tm(me)?de=!eC(Z,me):de=Z!==me,de?Z!=null?te(_e):v.add(_e):Z!==void 0&&v.has(_e)?te(_e):P.protectedKeys[_e]=!0}P.prevProp=M,P.prevResolvedValues=F,P.isActive&&(y={...y,...F}),r&&n.blockInitialAnimation&&(I=!1);const Pe=W&&R;I&&(!Pe||D)&&p.push(...O.map(_e=>{const Z={type:N};if(typeof _e=="string"&&r&&!Pe&&n.manuallyAnimateOnMount&&n.parent){const{parent:me}=n,de=Ou(me,_e);if(me.enteringChildren&&de){const{delayChildren:q}=de.transition||{};Z.delay=JT(me.enteringChildren,n,q)}}return{animation:_e,options:Z}}))}if(v.size){const T={};if(typeof f.initial!="boolean"){const N=Ou(n,Array.isArray(f.initial)?f.initial[0]:f.initial);N&&N.transition&&(T.transition=N.transition)}v.forEach(N=>{const P=n.getBaseTarget(N),M=n.getValue(N);M&&(M.liveStyle=!0),T[N]=P??null}),p.push({animation:T})}let A=!!p.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(A=!1),r=!1,A?e(p):Promise.resolve()}function u(c,f){if(t[c].isActive===f)return Promise.resolve();n.variantChildren?.forEach(p=>p.animationState?.setActive(c,f)),t[c].isActive=f;const h=s(c);for(const p in t)t[p].protectedKeys={};return h}return{animateChanges:s,setActive:u,setAnimateFunction:o,getState:()=>t,reset:()=>{t=E2()}}}function tN(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!eC(e,n):!1}function na(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function E2(){return{animate:na(!0),whileInView:na(),whileHover:na(),whileTap:na(),whileDrag:na(),whileFocus:na(),exit:na()}}class Cs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class nN extends Cs{constructor(e){super(e),e.animationState||(e.animationState=eN(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();sp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let rN=0;class iN extends Cs{constructor(){super(...arguments),this.id=rN++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const oN={animation:{Feature:nN},exit:{Feature:iN}};function jc(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function of(n){return{point:{x:n.pageX,y:n.pageY}}}const sN=n=>e=>Kg(e)&&n(e,of(e));function Tc(n,e,t,r){return jc(n,e,sN(t),r)}const nC=1e-4,aN=1-nC,uN=1+nC,rC=.01,lN=0-rC,cN=0+rC;function Qn(n){return n.max-n.min}function fN(n,e,t){return Math.abs(n-e)<=t}function A2(n,e,t,r=.5){n.origin=r,n.originPoint=Ot(e.min,e.max,n.origin),n.scale=Qn(t)/Qn(e),n.translate=Ot(t.min,t.max,n.origin)-n.originPoint,(n.scale>=aN&&n.scale<=uN||isNaN(n.scale))&&(n.scale=1),(n.translate>=lN&&n.translate<=cN||isNaN(n.translate))&&(n.translate=0)}function Cc(n,e,t,r){A2(n.x,e.x,t.x,r?r.originX:void 0),A2(n.y,e.y,t.y,r?r.originY:void 0)}function T2(n,e,t){n.min=t.min+e.min,n.max=n.min+Qn(e)}function hN(n,e,t){T2(n.x,e.x,t.x),T2(n.y,e.y,t.y)}function C2(n,e,t){n.min=e.min-t.min,n.max=n.min+Qn(e)}function Ic(n,e,t){C2(n.x,e.x,t.x),C2(n.y,e.y,t.y)}function Vr(n){return[n("x"),n("y")]}const iC=({current:n})=>n?n.ownerDocument.defaultView:null,I2=(n,e)=>Math.abs(n-e);function dN(n,e){const t=I2(n.x,e.x),r=I2(n.y,e.y);return Math.sqrt(t**2+r**2)}class oC{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=I1(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,E=dN(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!E)return;const{point:A}=v,{timestamp:T}=Sn;this.history.push({...A,timestamp:T});const{onStart:N,onMove:P}=this.handlers;y||(N&&N(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,v)},this.handlePointerMove=(v,y)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=C1(y,this.transformPagePoint),Pt.update(this.updatePoint,!0)},this.handlePointerUp=(v,y)=>{this.end();const{onEnd:E,onSessionEnd:A,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=I1(v.type==="pointercancel"?this.lastMoveEventInfo:C1(y,this.transformPagePoint),this.history);this.startEvent&&E&&E(v,N),A&&A(v,N)},!Kg(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const u=of(e),c=C1(u,this.transformPagePoint),{point:f}=c,{timestamp:h}=Sn;this.history=[{...f,timestamp:h}];const{onSessionStart:p}=t;p&&p(e,I1(c,this.history)),this.removeListeners=tf(Tc(this.contextWindow,"pointermove",this.handlePointerMove),Tc(this.contextWindow,"pointerup",this.handlePointerUp),Tc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),gs(this.updatePoint)}}function C1(n,e){return e?{point:e(n.point)}:n}function S2(n,e){return{x:n.x-e.x,y:n.y-e.y}}function I1({point:n},e){return{point:n,delta:S2(n,sC(e)),offset:S2(n,pN(e)),velocity:mN(e,.1)}}function pN(n){return n[0]}function sC(n){return n[n.length-1]}function mN(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=sC(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Ni(e)));)t--;if(!r)return{x:0,y:0};const o=jr(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function gN(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Ot(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Ot(t,n,r.max):Math.min(n,t)),n}function b2(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function vN(n,{top:e,left:t,bottom:r,right:i}){return{x:b2(n.x,t,i),y:b2(n.y,e,r)}}function R2(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function yN(n,e){return{x:R2(n.x,e.x),y:R2(n.y,e.y)}}function _N(n,e){let t=.5;const r=Qn(n),i=Qn(e);return i>r?t=Lc(e.min,e.max-r,n.min):r>i&&(t=Lc(n.min,n.max-i,e.min)),ho(0,1,t)}function xN(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Sm=.35;function wN(n=Sm){return n===!1?n=0:n===!0&&(n=Sm),{x:P2(n,"left","right"),y:P2(n,"top","bottom")}}function P2(n,e,t){return{min:N2(n,e),max:N2(n,t)}}function N2(n,e){return typeof n=="number"?n:n[e]||0}const EN=new WeakMap;class AN{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Gt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=p=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(of(p).point)},s=(p,v)=>{const{drag:y,dragPropagation:E,onDragStart:A}=this.getProps();if(y&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=RP(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vr(N=>{let P=this.getAxisMotionValue(N).get()||0;if(Di.test(P)){const{projection:M}=this.visualElement;if(M&&M.layout){const j=M.layout.layoutBox[N];j&&(P=Qn(j)*(parseFloat(P)/100))}}this.originPoint[N]=P}),A&&Pt.postRender(()=>A(p,v)),Cm(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},u=(p,v)=>{this.latestPointerEvent=p,this.latestPanInfo=v;const{dragPropagation:y,dragDirectionLock:E,onDirectionLock:A,onDrag:T}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:N}=v;if(E&&this.currentDirection===null){this.currentDirection=TN(N),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",v.point,N),this.updateAxis("y",v.point,N),this.visualElement.render(),T&&T(p,v)},c=(p,v)=>{this.latestPointerEvent=p,this.latestPanInfo=v,this.stop(p,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Vr(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new oC(e,{onSessionStart:o,onStart:s,onMove:u,onSessionEnd:c,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:iC(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:u}=this.getProps();u&&Pt.postRender(()=>u(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Gh(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=gN(s,this.constraints[e],this.elastic[e])),o.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Au(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=vN(r.layoutBox,e):this.constraints=!1,this.elastic=wN(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Vr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=xN(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Au(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=C8(r,i.root,this.visualElement.getTransformPagePoint());let s=yN(i.layout.layoutBox,o);if(t){const u=t(E8(s));this.hasMutatedConstraints=!!u,u&&(s=HT(u))}return s}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},f=Vr(h=>{if(!Gh(h,t,this.currentDirection))return;let p=c&&c[h]||{};s&&(p={min:0,max:0});const v=i?200:1e6,y=i?40:1e7,E={type:"inertia",velocity:r?e[h]:0,bounceStiffness:v,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...o,...p};return this.startAxisValueAnimation(h,E)});return Promise.all(f).then(u)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Cm(this.visualElement,e),r.start(iv(e,r,0,t,this.visualElement,!1))}stopAnimation(){Vr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Vr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Vr(t=>{const{drag:r}=this.getProps();if(!Gh(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(t);if(i&&i.layout){const{min:s,max:u}=i.layout.layoutBox[t];o.set(e[t]-Ot(s,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Au(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Vr(s=>{const u=this.getAxisMotionValue(s);if(u&&this.constraints!==!1){const c=u.get();i[s]=_N({min:c,max:c},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Vr(s=>{if(!Gh(s,e,null))return;const u=this.getAxisMotionValue(s),{min:c,max:f}=this.constraints[s];u.set(Ot(c,f,i[s]))})}addListeners(){if(!this.visualElement.current)return;EN.set(this.visualElement,this);const e=this.visualElement.current,t=Tc(e,"pointerdown",c=>{const{drag:f,dragListener:h=!0}=this.getProps();f&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Au(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Pt.read(r);const s=jc(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(Vr(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=c[h].translate,p.set(p.get()+c[h].translate))}),this.visualElement.render())}));return()=>{s(),t(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=Sm,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:u}}}function Gh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function TN(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class CN extends Cs{constructor(e){super(e),this.removeGroupControls=Hr,this.removeListeners=Hr,this.controls=new AN(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Hr}unmount(){this.removeGroupControls(),this.removeListeners()}}const D2=n=>(e,t)=>{n&&Pt.postRender(()=>n(e,t))};class IN extends Cs{constructor(){super(...arguments),this.removePointerDownListener=Hr}onPointerDown(e){this.session=new oC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:iC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:D2(e),onStart:D2(t),onMove:r,onEnd:(o,s)=>{delete this.session,i&&Pt.postRender(()=>i(o,s))}}}mount(){this.removePointerDownListener=Tc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const cd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function O2(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const uc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Be.test(n))n=parseFloat(n);else return n;const t=O2(n,e.target.x),r=O2(n,e.target.y);return`${t}% ${r}%`}},SN={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=vs.parse(n);if(i.length>5)return r;const o=vs.createTransformer(n),s=typeof i[0]!="number"?1:0,u=t.x.scale*e.x,c=t.y.scale*e.y;i[0+s]/=u,i[1+s]/=c;const f=Ot(u,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=f),typeof i[3+s]=="number"&&(i[3+s]/=f),o(i)}};let S1=!1;class bN extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;YP(RN),o&&(t.group&&t.group.add(o),r&&r.register&&i&&r.register(o),S1&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),cd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:o}=this.props,{projection:s}=r;return s&&(s.isPresent=o,S1=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==o?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||Pt.postRender(()=>{const u=s.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),qg.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;S1=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function aC(n){const[e,t]=RT(),r=B.useContext(Cg);return S.jsx(bN,{...n,layoutGroup:r,switchLayoutGroup:B.useContext(jT),isPresent:e,safeToRemove:t})}const RN={borderRadius:{...uc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:uc,borderTopRightRadius:uc,borderBottomLeftRadius:uc,borderBottomRightRadius:uc,boxShadow:SN};function PN(n,e,t){const r=zn(n)?n:Bu(n);return r.start(iv("",r,e,t)),r.animation}const NN=(n,e)=>n.depth-e.depth;class DN{constructor(){this.children=[],this.isDirty=!1}add(e){bg(this.children,e),this.isDirty=!0}remove(e){Rg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(NN),this.isDirty=!1,this.children.forEach(e)}}function ON(n,e){const t=lr.now(),r=({timestamp:i})=>{const o=i-t;o>=e&&(gs(r),n(o-e))};return Pt.setup(r,!0),()=>gs(r)}const uC=["TopLeft","TopRight","BottomLeft","BottomRight"],kN=uC.length,k2=n=>typeof n=="string"?parseFloat(n):n,M2=n=>typeof n=="number"||Be.test(n);function MN(n,e,t,r,i,o){i?(n.opacity=Ot(0,t.opacity??1,LN(r)),n.opacityExit=Ot(e.opacity??1,0,VN(r))):o&&(n.opacity=Ot(e.opacity??1,t.opacity??1,r));for(let s=0;s<kN;s++){const u=`border${uC[s]}Radius`;let c=L2(e,u),f=L2(t,u);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||M2(c)===M2(f)?(n[u]=Math.max(Ot(k2(c),k2(f),r),0),(Di.test(f)||Di.test(c))&&(n[u]+="%")):n[u]=f}(e.rotate||t.rotate)&&(n.rotate=Ot(e.rotate||0,t.rotate||0,r))}function L2(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const LN=lC(0,.5,XA),VN=lC(.5,.95,Hr);function lC(n,e,t){return r=>r<n?0:r>e?1:t(Lc(n,e,r))}function V2(n,e){n.min=e.min,n.max=e.max}function Lr(n,e){V2(n.x,e.x),V2(n.y,e.y)}function F2(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function B2(n,e,t,r,i){return n-=e,n=Nd(n,1/t,r),i!==void 0&&(n=Nd(n,1/i,r)),n}function FN(n,e=0,t=1,r=.5,i,o=n,s=n){if(Di.test(e)&&(e=parseFloat(e),e=Ot(s.min,s.max,e/100)-s.min),typeof e!="number")return;let u=Ot(o.min,o.max,r);n===o&&(u-=e),n.min=B2(n.min,e,t,u,i),n.max=B2(n.max,e,t,u,i)}function U2(n,e,[t,r,i],o,s){FN(n,e[t],e[r],e[i],e.scale,o,s)}const BN=["x","scaleX","originX"],UN=["y","scaleY","originY"];function j2(n,e,t,r){U2(n.x,e,BN,t?t.x:void 0,r?r.x:void 0),U2(n.y,e,UN,t?t.y:void 0,r?r.y:void 0)}function z2(n){return n.translate===0&&n.scale===1}function cC(n){return z2(n.x)&&z2(n.y)}function H2(n,e){return n.min===e.min&&n.max===e.max}function jN(n,e){return H2(n.x,e.x)&&H2(n.y,e.y)}function G2(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function fC(n,e){return G2(n.x,e.x)&&G2(n.y,e.y)}function W2(n){return Qn(n.x)/Qn(n.y)}function $2(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class zN{constructor(){this.members=[]}add(e){bg(this.members,e),e.scheduleRender()}remove(e){if(Rg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function HN(n,e,t){let r="";const i=n.x.translate/e.x,o=n.y.translate/e.y,s=t?.z||0;if((i||o||s)&&(r=`translate3d(${i}px, ${o}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:h,rotateX:p,rotateY:v,skewX:y,skewY:E}=t;f&&(r=`perspective(${f}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),v&&(r+=`rotateY(${v}deg) `),y&&(r+=`skewX(${y}deg) `),E&&(r+=`skewY(${E}deg) `)}const u=n.x.scale*e.x,c=n.y.scale*e.y;return(u!==1||c!==1)&&(r+=`scale(${u}, ${c})`),r||"none"}const b1=["","X","Y","Z"],GN=1e3;let WN=0;function R1(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function hC(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=QT(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Pt,!(i||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&hC(r)}function dC({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},u=e?.()){this.id=WN++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(KN),this.nodes.forEach(ZN),this.nodes.forEach(JN),this.nodes.forEach(XN)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new DN)}addEventListener(s,u){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new Dg),this.eventHandlers.get(s).add(u)}notifyListeners(s,...u){const c=this.eventHandlers.get(s);c&&c.notify(...u)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=bT(s)&&!MP(s),this.instance=s;const{layoutId:u,layout:c,visualElement:f}=this.options;if(f&&!f.current&&f.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||u)&&(this.isLayoutDirty=!0),n){let h,p=0;const v=()=>this.root.updateBlockedByResize=!1;Pt.read(()=>{p=window.innerWidth}),n(s,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,h&&h(),h=ON(v,250),cd.hasAnimatedSinceResize&&(cd.hasAnimatedSinceResize=!1,this.nodes.forEach(X2)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:v,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||f.getDefaultTransition()||i6,{onLayoutAnimationStart:A,onLayoutAnimationComplete:T}=f.getProps(),N=!this.targetLayout||!fC(this.targetLayout,y),P=!p&&v;if(this.options.layoutRoot||this.resumeFrom||P||p&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...Wg(E,"layout"),onPlay:A,onComplete:T};(f.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(h,P)}else p||X2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),gs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(e6),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&hC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(q2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(K2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(QN),this.nodes.forEach($N),this.nodes.forEach(qN)):this.nodes.forEach(K2),this.clearAllSnapshots();const u=lr.now();Sn.delta=ho(0,1e3/60,u-Sn.timestamp),Sn.timestamp=u,Sn.isProcessing=!0,v1.update.process(Sn),v1.preRender.process(Sn),v1.render.process(Sn),Sn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YN),this.sharedNodes.forEach(t6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Qn(this.snapshot.measuredBox.x)&&!Qn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Gt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(u=!1),u&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!cC(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,h=f!==this.prevTransformTemplateValue;s&&this.instance&&(u||sa(this.latestValues)||h)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return s&&(c=this.removeTransform(c)),o6(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return Gt();const u=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(s6))){const{scroll:f}=this.root;f&&(Tu(u.x,f.offset.x),Tu(u.y,f.offset.y))}return u}removeElementScroll(s){const u=Gt();if(Lr(u,s),this.scroll?.wasRoot)return u;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:h,options:p}=f;f!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Lr(u,s),Tu(u.x,h.offset.x),Tu(u.y,h.offset.y))}return u}applyTransform(s,u=!1){const c=Gt();Lr(c,s);for(let f=0;f<this.path.length;f++){const h=this.path[f];!u&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Cu(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),sa(h.latestValues)&&Cu(c,h.latestValues)}return sa(this.latestValues)&&Cu(c,this.latestValues),c}removeTransform(s){const u=Gt();Lr(u,s);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!sa(f.latestValues))continue;wm(f.latestValues)&&f.updateSnapshot();const h=Gt(),p=f.measurePageBox();Lr(h,p),j2(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,h)}return sa(this.latestValues)&&j2(u,this.latestValues),u}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Sn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=Sn.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gt(),this.relativeTargetOrigin=Gt(),Ic(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Gt(),this.targetWithTransforms=Gt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Lr(this.target,this.layout.layoutBox),WT(this.target,this.targetDelta)):Lr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gt(),this.relativeTargetOrigin=Gt(),Ic(this.relativeTargetOrigin,this.target,v.target),Lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||wm(this.parent.latestValues)||GT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const s=this.getLead(),u=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Sn.timestamp&&(c=!1),c)return;const{layout:f,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||h))return;Lr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,v=this.treeScale.y;T8(this.layoutCorrected,this.treeScale,this.path,u),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Gt());const{target:y}=s;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(F2(this.prevProjectionDelta.x,this.projectionDelta.x),F2(this.prevProjectionDelta.y,this.projectionDelta.y)),Cc(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==v||!$2(this.projectionDelta.x,this.prevProjectionDelta.x)||!$2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Iu(),this.projectionDelta=Iu(),this.projectionDeltaWithTransform=Iu()}setAnimationOrigin(s,u=!1){const c=this.snapshot,f=c?c.latestValues:{},h={...this.latestValues},p=Iu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=Gt(),y=c?c.source:void 0,E=this.layout?this.layout.source:void 0,A=y!==E,T=this.getStack(),N=!T||T.members.length<=1,P=!!(A&&!N&&this.options.crossfade===!0&&!this.path.some(r6));this.animationProgress=0;let M;this.mixTargetDelta=j=>{const H=j/1e3;Y2(p.x,s.x,H),Y2(p.y,s.y,H),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ic(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),n6(this.relativeTarget,this.relativeTargetOrigin,v,H),M&&jN(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Gt()),Lr(M,this.relativeTarget)),A&&(this.animationValues=h,MN(h,f,this.latestValues,H,P,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(gs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pt.update(()=>{cd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Bu(0)),this.currentAnimation=PN(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),s.onUpdate&&s.onUpdate(u)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(GN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:u,target:c,layout:f,latestValues:h}=s;if(!(!u||!c||!f)){if(this!==s&&this.layout&&f&&pC(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||Gt();const p=Qn(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+p;const v=Qn(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+v}Lr(u,c),Cu(u,h),Cc(this.projectionDeltaWithTransform,this.layoutCorrected,u,h)}}registerSharedNode(s,u){this.sharedNodes.has(s)||this.sharedNodes.set(s,new zN),this.sharedNodes.get(s).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:u,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let u=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(u=!0),!u)return;const f={};c.z&&R1("z",s,f,this.animationValues);for(let h=0;h<b1.length;h++)R1(`rotate${b1[h]}`,s,f,this.animationValues),R1(`skew${b1[h]}`,s,f,this.animationValues);s.render();for(const h in f)s.setStaticValue(h,f[h]),this.animationValues&&(this.animationValues[h]=f[h]);s.scheduleRender()}applyProjectionStyles(s,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=ld(u?.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=ld(u?.pointerEvents)||""),this.hasProjected&&!sa(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const h=f.animationValues||f.latestValues;this.applyTransformsToTarget();let p=HN(this.projectionDeltaWithTransform,this.treeScale,h);c&&(p=c(h,p)),s.transform=p;const{x:v,y}=this.projectionDelta;s.transformOrigin=`${v.origin*100}% ${y.origin*100}% 0`,f.animationValues?s.opacity=f===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:s.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const E in Uc){if(h[E]===void 0)continue;const{correct:A,applyTo:T,isCSSVariable:N}=Uc[E],P=p==="none"?h[E]:A(h[E],f);if(T){const M=T.length;for(let j=0;j<M;j++)s[T[j]]=P}else N?this.options.visualElement.renderState.vars[E]=P:s[E]=P}this.options.layoutId&&(s.pointerEvents=f===this?ld(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(q2),this.root.sharedNodes.clear()}}}function $N(n){n.updateLayout()}function qN(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:i}=n.options,o=e.source!==n.layout.source;i==="size"?Vr(h=>{const p=o?e.measuredBox[h]:e.layoutBox[h],v=Qn(p);p.min=t[h].min,p.max=p.min+v}):pC(i,e.layoutBox,t)&&Vr(h=>{const p=o?e.measuredBox[h]:e.layoutBox[h],v=Qn(t[h]);p.max=p.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+v)});const s=Iu();Cc(s,t,e.layoutBox);const u=Iu();o?Cc(u,n.applyTransform(r,!0),e.measuredBox):Cc(u,t,e.layoutBox);const c=!cC(s);let f=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:v}=h;if(p&&v){const y=Gt();Ic(y,e.layoutBox,p.layoutBox);const E=Gt();Ic(E,t,v.layoutBox),fC(y,E)||(f=!0),h.options.layoutRoot&&(n.relativeTarget=E,n.relativeTargetOrigin=y,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:u,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function KN(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function XN(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function YN(n){n.clearSnapshot()}function q2(n){n.clearMeasurements()}function K2(n){n.isLayoutDirty=!1}function QN(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function X2(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function ZN(n){n.resolveTargetDelta()}function JN(n){n.calcProjection()}function e6(n){n.resetSkewAndRotation()}function t6(n){n.removeLeadSnapshot()}function Y2(n,e,t){n.translate=Ot(e.translate,0,t),n.scale=Ot(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Q2(n,e,t,r){n.min=Ot(e.min,t.min,r),n.max=Ot(e.max,t.max,r)}function n6(n,e,t,r){Q2(n.x,e.x,t.x,r),Q2(n.y,e.y,t.y,r)}function r6(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const i6={duration:.45,ease:[.4,0,.1,1]},Z2=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),J2=Z2("applewebkit/")&&!Z2("chrome/")?Math.round:Hr;function ew(n){n.min=J2(n.min),n.max=J2(n.max)}function o6(n){ew(n.x),ew(n.y)}function pC(n,e,t){return n==="position"||n==="preserve-aspect"&&!fN(W2(e),W2(t),.2)}function s6(n){return n!==n.root&&n.scroll?.wasRoot}const a6=dC({attachResizeListener:(n,e)=>jc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),P1={current:void 0},mC=dC({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!P1.current){const n=new a6({});n.mount(window),n.setOptions({layoutScroll:!0}),P1.current=n}return P1.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),u6={pan:{Feature:IN},drag:{Feature:CN,ProjectionNode:mC,MeasureLayout:aC}};function tw(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,o=r[i];o&&Pt.postRender(()=>o(e,of(e)))}class l6 extends Cs{mount(){const{current:e}=this.node;e&&(this.unmount=PP(e,(t,r)=>(tw(this.node,r,"Start"),i=>tw(this.node,i,"End"))))}unmount(){}}class c6 extends Cs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=tf(jc(this.node.current,"focus",()=>this.onFocus()),jc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function nw(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),o=r[i];o&&Pt.postRender(()=>o(e,of(e)))}class f6 extends Cs{mount(){const{current:e}=this.node;e&&(this.unmount=kP(e,(t,r)=>(nw(this.node,r,"Start"),(i,{success:o})=>nw(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const bm=new WeakMap,N1=new WeakMap,h6=n=>{const e=bm.get(n.target);e&&e(n)},d6=n=>{n.forEach(h6)};function p6({root:n,...e}){const t=n||document;N1.has(t)||N1.set(t,{});const r=N1.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(d6,{root:n,...e})),r[i]}function m6(n,e,t){const r=p6(e);return bm.set(n,t),r.observe(n),()=>{bm.delete(n),r.unobserve(n)}}const g6={some:0,all:1};class v6 extends Cs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:o}=e,s={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:g6[i]},u=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),v=f?h:p;v&&v(c)};return m6(this.node.current,s,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(y6(e,t))&&this.startObserver()}unmount(){}}function y6({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const _6={inView:{Feature:v6},tap:{Feature:f6},focus:{Feature:c6},hover:{Feature:l6}},x6={layout:{ProjectionNode:mC,MeasureLayout:aC}},w6={...oN,..._6,...u6,...x6},Tr=w8(w6,k8),E6=()=>{};var rw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},A6=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],s=n[t++],u=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},vC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],s=i+1<n.length,u=s?n[i+1]:0,c=i+2<n.length,f=c?n[i+2]:0,h=o>>2,p=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,y=f&63;c||(y=64,s||(v=64)),r.push(t[h],t[p],t[v],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(gC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):A6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||u==null||f==null||p==null)throw new T6;const v=o<<2|u>>4;if(r.push(v),f!==64){const y=u<<4&240|f>>2;if(r.push(y),p!==64){const E=f<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class T6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const C6=function(n){const e=gC(n);return vC.encodeByteArray(e,!0)},Dd=function(n){return C6(n).replace(/\./g,"")},yC=function(n){try{return vC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=()=>I6().__FIREBASE_DEFAULTS__,b6=()=>{if(typeof process>"u"||typeof rw>"u")return;const n=rw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},R6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&yC(n[1]);return e&&JSON.parse(e)},up=()=>{try{return E6()||S6()||b6()||R6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_C=n=>up()?.emulatorHosts?.[n],P6=n=>{const e=_C(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},xC=()=>up()?.config,wC=n=>up()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function EC(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D6(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Dd(JSON.stringify(t)),Dd(JSON.stringify(s)),""].join(".")}const Sc={};function O6(){const n={prod:[],emulator:[]};for(const e of Object.keys(Sc))Sc[e]?n.emulator.push(e):n.prod.push(e);return n}function k6(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let iw=!1;function AC(n,e){if(typeof window>"u"||typeof document>"u"||!tl(window.location.host)||Sc[n]===e||Sc[n]||iw)return;Sc[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=O6().prod.length>0;function s(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,y){v.setAttribute("width","24"),v.setAttribute("id",y),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{iw=!0,s()},v}function h(v,y){v.setAttribute("id",y),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function p(){const v=k6(r),y=t("text"),E=document.getElementById(y)||document.createElement("span"),A=t("learnmore"),T=document.getElementById(A)||document.createElement("a"),N=t("preprendIcon"),P=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const M=v.element;u(M),h(T,A);const j=f();c(P,N),M.append(P,E,T,j),document.body.appendChild(M)}o?(E.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function M6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hn())}function L6(){const n=up()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function V6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function F6(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function B6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function U6(){const n=Hn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function j6(){return!L6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z6(){try{return typeof indexedDB=="object"}catch{return!1}}function H6(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6="FirebaseError";class xo extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=G6,Object.setPrototypeOf(this,xo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sf.prototype.create)}}class sf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?W6(o,r):"Error",u=`${this.serviceName}: ${s} (${i}).`;return new xo(i,u,r)}}function W6(n,e){return n.replace($6,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const $6=/\{\$([^}]+)}/g;function q6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ya(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],s=e[i];if(ow(o)&&ow(s)){if(!ya(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function ow(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function K6(n,e){const t=new X6(n,e);return t.subscribe.bind(t)}class X6{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Y6(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=D1),i.error===void 0&&(i.error=D1),i.complete===void 0&&(i.complete=D1);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Y6(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function D1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(n){return n&&n._delegate?n._delegate:n}class _a{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q6=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new N6;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(J6(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,s]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&s.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Z6(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Z6(n){return n===aa?void 0:n}function J6(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Q6(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Qe||(Qe={}));const tD={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},nD=Qe.INFO,rD={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},iD=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=rD[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ov{constructor(e){this.name=e,this._logLevel=nD,this._logHandler=iD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const oD=(n,e)=>e.some(t=>n instanceof t);let sw,aw;function sD(){return sw||(sw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aD(){return aw||(aw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TC=new WeakMap,Rm=new WeakMap,CC=new WeakMap,O1=new WeakMap,sv=new WeakMap;function uD(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(as(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&TC.set(t,n)}).catch(()=>{}),sv.set(e,n),e}function lD(n){if(Rm.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Rm.set(n,e)}let Pm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Rm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||CC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return as(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function cD(n){Pm=n(Pm)}function fD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(k1(this),e,...t);return CC.set(r,e.sort?e.sort():[e]),as(r)}:aD().includes(n)?function(...e){return n.apply(k1(this),e),as(TC.get(this))}:function(...e){return as(n.apply(k1(this),e))}}function hD(n){return typeof n=="function"?fD(n):(n instanceof IDBTransaction&&lD(n),oD(n,sD())?new Proxy(n,Pm):n)}function as(n){if(n instanceof IDBRequest)return uD(n);if(O1.has(n))return O1.get(n);const e=hD(n);return e!==n&&(O1.set(n,e),sv.set(e,n)),e}const k1=n=>sv.get(n);function dD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,e),u=as(s);return r&&s.addEventListener("upgradeneeded",c=>{r(as(s.result),c.oldVersion,c.newVersion,as(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const pD=["get","getKey","getAll","getAllKeys","count"],mD=["put","add","delete","clear"],M1=new Map;function uw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(M1.get(e))return M1.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=mD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||pD.includes(t)))return;const o=async function(s,...u){const c=this.transaction(s,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),i&&c.done]))[0]};return M1.set(e,o),o}cD(n=>({...n,get:(e,t,r)=>uw(e,t)||n.get(e,t,r),has:(e,t)=>!!uw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function vD(n){return n.getComponent()?.type==="VERSION"}const Nm="@firebase/app",lw="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new ov("@firebase/app"),yD="@firebase/app-compat",_D="@firebase/analytics-compat",xD="@firebase/analytics",wD="@firebase/app-check-compat",ED="@firebase/app-check",AD="@firebase/auth",TD="@firebase/auth-compat",CD="@firebase/database",ID="@firebase/data-connect",SD="@firebase/database-compat",bD="@firebase/functions",RD="@firebase/functions-compat",PD="@firebase/installations",ND="@firebase/installations-compat",DD="@firebase/messaging",OD="@firebase/messaging-compat",kD="@firebase/performance",MD="@firebase/performance-compat",LD="@firebase/remote-config",VD="@firebase/remote-config-compat",FD="@firebase/storage",BD="@firebase/storage-compat",UD="@firebase/firestore",jD="@firebase/ai",zD="@firebase/firestore-compat",HD="firebase",GD="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="[DEFAULT]",WD={[Nm]:"fire-core",[yD]:"fire-core-compat",[xD]:"fire-analytics",[_D]:"fire-analytics-compat",[ED]:"fire-app-check",[wD]:"fire-app-check-compat",[AD]:"fire-auth",[TD]:"fire-auth-compat",[CD]:"fire-rtdb",[ID]:"fire-data-connect",[SD]:"fire-rtdb-compat",[bD]:"fire-fn",[RD]:"fire-fn-compat",[PD]:"fire-iid",[ND]:"fire-iid-compat",[DD]:"fire-fcm",[OD]:"fire-fcm-compat",[kD]:"fire-perf",[MD]:"fire-perf-compat",[LD]:"fire-rc",[VD]:"fire-rc-compat",[FD]:"fire-gcs",[BD]:"fire-gcs-compat",[UD]:"fire-fst",[zD]:"fire-fst-compat",[jD]:"fire-vertex","fire-js":"fire-js",[HD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=new Map,$D=new Map,Om=new Map;function cw(n,e){try{n.container.addComponent(e)}catch(t){mo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ju(n){const e=n.name;if(Om.has(e))return mo.debug(`There were multiple attempts to register component ${e}.`),!1;Om.set(e,n);for(const t of Od.values())cw(t,n);for(const t of $D.values())cw(t,n);return!0}function av(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ur(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new sf("app","Firebase",qD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=GD;function IC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Dm,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw us.create("bad-app-name",{appName:String(i)});if(t||(t=xC()),!t)throw us.create("no-options");const o=Od.get(i);if(o){if(ya(t,o.options)&&ya(r,o.config))return o;throw us.create("duplicate-app",{appName:i})}const s=new eD(i);for(const c of Om.values())s.addComponent(c);const u=new KD(t,r,s);return Od.set(i,u),u}function SC(n=Dm){const e=Od.get(n);if(!e&&n===Dm&&xC())return IC();if(!e)throw us.create("no-app",{appName:n});return e}function ls(n,e,t){let r=WD[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mo.warn(s.join(" "));return}ju(new _a(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="firebase-heartbeat-database",YD=1,zc="firebase-heartbeat-store";let L1=null;function bC(){return L1||(L1=dD(XD,YD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(zc)}catch(t){console.warn(t)}}}}).catch(n=>{throw us.create("idb-open",{originalErrorMessage:n.message})})),L1}async function QD(n){try{const t=(await bC()).transaction(zc),r=await t.objectStore(zc).get(RC(n));return await t.done,r}catch(e){if(e instanceof xo)mo.warn(e.message);else{const t=us.create("idb-get",{originalErrorMessage:e?.message});mo.warn(t.message)}}}async function fw(n,e){try{const r=(await bC()).transaction(zc,"readwrite");await r.objectStore(zc).put(e,RC(n)),await r.done}catch(t){if(t instanceof xo)mo.warn(t.message);else{const r=us.create("idb-set",{originalErrorMessage:t?.message});mo.warn(r.message)}}}function RC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=1024,JD=30;class eO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=hw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>JD){const i=rO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){mo.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=hw(),{heartbeatsToSend:t,unsentEntries:r}=tO(this._heartbeatsCache.heartbeats),i=Dd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return mo.warn(e),""}}}function hw(){return new Date().toISOString().substring(0,10)}function tO(n,e=ZD){const t=[];let r=n.slice();for(const i of n){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),dw(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),dw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class nO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return z6()?H6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await QD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return fw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return fw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function dw(n){return Dd(JSON.stringify({version:2,heartbeats:n})).length}function rO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(n){ju(new _a("platform-logger",e=>new gD(e),"PRIVATE")),ju(new _a("heartbeat",e=>new eO(e),"PRIVATE")),ls(Nm,lw,n),ls(Nm,lw,"esm2020"),ls("fire-js","")}iO("");function PC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oO=PC,NC=new sf("auth","Firebase",PC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new ov("@firebase/auth");function sO(n,...e){kd.logLevel<=Qe.WARN&&kd.warn(`Auth (${nl}): ${n}`,...e)}function fd(n,...e){kd.logLevel<=Qe.ERROR&&kd.error(`Auth (${nl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(n,...e){throw lv(n,...e)}function ui(n,...e){return lv(n,...e)}function uv(n,e,t){const r={...oO(),[e]:t};return new sf("auth","Firebase",r).create(e,{appName:n.name})}function cs(n){return uv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function DC(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fi(n,"argument-error"),uv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return NC.create(n,...e)}function je(n,e,...t){if(!n)throw lv(e,...t)}function co(n){const e="INTERNAL ASSERTION FAILED: "+n;throw fd(e),new Error(e)}function go(n,e){n||co(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(){return typeof self<"u"&&self.location?.href||""}function aO(){return pw()==="http:"||pw()==="https:"}function pw(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aO()||F6()||"connection"in navigator)?navigator.onLine:!0}function lO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,t){this.shortDelay=e,this.longDelay=t,go(t>e,"Short delay should be less than long delay!"),this.isMobile=M6()||B6()}get(){return uO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(n,e){go(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;co("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;co("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;co("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hO=new uf(3e4,6e4);function fv(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function rl(n,e,t,r,i={}){return kC(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const u=af({key:n.config.apiKey,...s}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:c,...o};return V6()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&tl(n.emulatorConfig.host)&&(f.credentials="include"),OC.fetch()(await MC(n,n.config.apiHost,t,u),f)})}async function kC(n,e,t){n._canInitEmulator=!1;const r={...cO,...e};try{const i=new pO(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Wh(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const u=o.ok?s.errorMessage:s.error.message,[c,f]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wh(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Wh(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Wh(n,"user-disabled",s);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw uv(n,h,f);Fi(n,h)}}catch(i){if(i instanceof xo)throw i;Fi(n,"network-request-failed",{message:String(i)})}}async function dO(n,e,t,r,i={}){const o=await rl(n,e,t,r,i);return"mfaPendingCredential"in o&&Fi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function MC(n,e,t,r){const i=`${e}${t}?${r}`,o=n,s=o.config.emulator?cv(n.config,i):`${n.config.apiScheme}://${i}`;return fO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}class pO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ui(this.auth,"network-request-failed")),hO.get())})}}function Wh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ui(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mO(n,e){return rl(n,"POST","/v1/accounts:delete",e)}async function Md(n,e){return rl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gO(n,e=!1){const t=fn(n),r=await t.getIdToken(e),i=hv(r);je(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:bc(V1(i.auth_time)),issuedAtTime:bc(V1(i.iat)),expirationTime:bc(V1(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function V1(n){return Number(n)*1e3}function hv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return fd("JWT malformed, contained fewer than 3 sections"),null;try{const i=yC(t);return i?JSON.parse(i):(fd("Failed to decode base64 JWT payload"),null)}catch(i){return fd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function mw(n){const e=hv(n);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof xo&&vO(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function vO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bc(this.lastLoginAt),this.creationTime=bc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ld(n){const e=n.auth,t=await n.getIdToken(),r=await Hc(n,Md(e,{idToken:t}));je(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=i.providerUserInfo?.length?LC(i.providerUserInfo):[],s=xO(n.providerData,o),u=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!s?.length,f=u?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Mm(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(n,h)}async function _O(n){const e=fn(n);await Ld(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xO(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function LC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO(n,e){const t=await kC(n,{},async()=>{const r=af({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await MC(n,i,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:u,body:r};return n.emulatorConfig&&tl(n.emulatorConfig.host)&&(c.credentials="include"),OC.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function EO(n,e){return rl(n,"POST","/v2/accounts:revokeToken",fv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=mw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await wO(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new ku;return r&&(je(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(je(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(je(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ku,this.toJSON())}_performRefresh(){return co("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(n,e){je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ai{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new yO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Mm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Hc(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return gO(this,e)}reload(){return _O(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ai({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ld(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ur(this.auth.app))return Promise.reject(cs(this.auth));const e=await this.getIdToken();return await Hc(this,mO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,u=t.tenantId??void 0,c=t._redirectEventId??void 0,f=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:v,isAnonymous:y,providerData:E,stsTokenManager:A}=t;je(p&&A,e,"internal-error");const T=ku.fromJSON(this.name,A);je(typeof p=="string",e,"internal-error"),Qo(r,e.name),Qo(i,e.name),je(typeof v=="boolean",e,"internal-error"),je(typeof y=="boolean",e,"internal-error"),Qo(o,e.name),Qo(s,e.name),Qo(u,e.name),Qo(c,e.name),Qo(f,e.name),Qo(h,e.name);const N=new ai({uid:p,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:u,stsTokenManager:T,createdAt:f,lastLoginAt:h});return E&&Array.isArray(E)&&(N.providerData=E.map(P=>({...P}))),c&&(N._redirectEventId=c),N}static async _fromIdTokenResponse(e,t,r=!1){const i=new ku;i.updateFromServerResponse(t);const o=new ai({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ld(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];je(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?LC(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,u=new ku;u.updateFromIdToken(r);const c=new ai({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:s}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Mm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=new Map;function fo(n){go(n instanceof Function,"Expected a class definition");let e=gw.get(n);return e?(go(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,gw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}VC.type="NONE";const vw=VC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(n,e,t){return`firebase:${n}:${e}:${t}`}class Mu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=hd(this.userKey,i.apiKey,o),this.fullPersistenceKey=hd("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Md(this.auth,{idToken:e}).catch(()=>{});return t?ai._fromGetAccountInfoResponse(this.auth,t,e):null}return ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Mu(fo(vw),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||fo(vw);const s=hd(r,e.config.apiKey,e.name);let u=null;for(const f of t)try{const h=await f._get(s);if(h){let p;if(typeof h=="string"){const v=await Md(e,{idToken:h}).catch(()=>{});if(!v)break;p=await ai._fromGetAccountInfoResponse(e,v,h)}else p=ai._fromJSON(e,h);f!==o&&(u=p),o=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Mu(o,e,r):(o=c[0],u&&await o._set(s,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(s)}catch{}})),new Mu(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HC(e))return"Blackberry";if(GC(e))return"Webos";if(BC(e))return"Safari";if((e.includes("chrome/")||UC(e))&&!e.includes("edge/"))return"Chrome";if(zC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function FC(n=Hn()){return/firefox\//i.test(n)}function BC(n=Hn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UC(n=Hn()){return/crios\//i.test(n)}function jC(n=Hn()){return/iemobile/i.test(n)}function zC(n=Hn()){return/android/i.test(n)}function HC(n=Hn()){return/blackberry/i.test(n)}function GC(n=Hn()){return/webos/i.test(n)}function dv(n=Hn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function AO(n=Hn()){return dv(n)&&!!window.navigator?.standalone}function TO(){return U6()&&document.documentMode===10}function WC(n=Hn()){return dv(n)||zC(n)||GC(n)||HC(n)||/windows phone/i.test(n)||jC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(n,e=[]){let t;switch(n){case"Browser":t=yw(Hn());break;case"Worker":t=`${yw(Hn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${nl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((s,u)=>{try{const c=e(o);s(c)}catch(c){u(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(n,e={}){return rl(n,"GET","/v2/passwordPolicy",fv(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=6;class bO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??SO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _w(this),this.idTokenSubscription=new _w(this),this.beforeStateQueue=new CO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fo(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Mu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Md(this,{idToken:e}),r=await ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ur(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===s)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ld(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ur(this.app))return Promise.reject(cs(this));const t=e?fn(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ur(this.app)?Promise.reject(cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ur(this.app)?Promise.reject(cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IO(this),t=new bO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await EO(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fo(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await Mu.create(this,[fo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let s=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(u,this,"internal-error"),u.then(()=>{s||o(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$C(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&sO(`Error while retrieving App Check token: ${e.error}`),e?.token}}function lf(n){return fn(n)}class _w{constructor(e){this.auth=e,this.observer=null,this.addObserver=K6(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PO(n){pv=n}function NO(n){return pv.loadJS(n)}function DO(){return pv.gapiScript}function OO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(n,e){const t=av(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(ya(o,e??{}))return i;Fi(i,"already-initialized")}return t.initialize({options:e})}function MO(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(fo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function LO(n,e,t){const r=lf(n);je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=qC(e),{host:s,port:u}=VO(e),c=u===null?"":`:${u}`,f={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){je(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),je(ya(f,r.config.emulator)&&ya(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,tl(s)?(EC(`${o}//${s}${c}`),AC("Auth",!0)):FO()}function qC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function VO(n){const e=qC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:xw(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:xw(s)}}}function xw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function FO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return co("not implemented")}_getIdTokenResponse(e){return co("not implemented")}_linkToIdToken(e,t){return co("not implemented")}_getReauthenticationResolver(e){return co("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lu(n,e){return dO(n,"POST","/v1/accounts:signInWithIdp",fv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO="http://localhost";class xa extends KC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const s=new xa(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return Lu(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Lu(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lu(e,t)}buildRequest(){const e={requestUri:BO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=af(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf extends lp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends cf{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends cf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xa._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return lo.credential(t,r)}catch{return null}}}lo.GOOGLE_SIGN_IN_METHOD="google.com";lo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends cf{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.GITHUB_SIGN_IN_METHOD="github.com";is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends cf{constructor(){super("twitter.com")}static credential(e,t){return xa._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return os.credential(t,r)}catch{return null}}}os.TWITTER_SIGN_IN_METHOD="twitter.com";os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await ai._fromIdTokenResponse(e,r,i),s=ww(r);return new zu({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=ww(r);return new zu({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function ww(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends xo{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Vd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Vd(e,t,r,i)}}function XC(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Vd._fromErrorAndOperation(n,o,e,r):o})}async function UO(n,e,t=!1){const r=await Hc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return zu._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(n,e,t=!1){const{auth:r}=n;if(Ur(r.app))return Promise.reject(cs(r));const i="reauthenticate";try{const o=await Hc(n,XC(r,i,e,n),t);je(o.idToken,r,"internal-error");const s=hv(o.idToken);je(s,r,"internal-error");const{sub:u}=s;return je(n.uid===u,r,"user-mismatch"),zu._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Fi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zO(n,e,t=!1){if(Ur(n.app))return Promise.reject(cs(n));const r="signIn",i=await XC(n,r,e),o=await zu._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}function HO(n,e,t,r){return fn(n).onIdTokenChanged(e,t,r)}function GO(n,e,t){return fn(n).beforeAuthStateChanged(e,t)}function WO(n,e,t,r){return fn(n).onAuthStateChanged(e,t,r)}const Fd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fd,"1"),this.storage.removeItem(Fd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=1e3,qO=10;class QC extends YC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,u,c)=>{this.notifyListeners(s,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!t&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);TO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,qO):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},$O)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}QC.type="LOCAL";const KO=QC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC extends YC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ZC.type="SESSION";const JC=ZC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new cp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,s=this.handlersMap[i];if(!s?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(s).map(async f=>f(t.origin,o)),c=await XO(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((u,c)=>{const f=mv("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const v=p;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function QO(n){Oi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function ZO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JO(){return navigator?.serviceWorker?.controller||null}function ek(){return eI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="firebaseLocalStorageDb",tk=1,Bd="firebaseLocalStorage",nI="fbase_key";class ff{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function fp(n,e){return n.transaction([Bd],e?"readwrite":"readonly").objectStore(Bd)}function nk(){const n=indexedDB.deleteDatabase(tI);return new ff(n).toPromise()}function Lm(){const n=indexedDB.open(tI,tk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Bd,{keyPath:nI})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Bd)?e(r):(r.close(),await nk(),e(await Lm()))})})}async function Ew(n,e,t){const r=fp(n,!0).put({[nI]:e,value:t});return new ff(r).toPromise()}async function rk(n,e){const t=fp(n,!1).get(e),r=await new ff(t).toPromise();return r===void 0?null:r.value}function Aw(n,e){const t=fp(n,!0).delete(e);return new ff(t).toPromise()}const ik=800,ok=3;class rI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>ok)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cp._getInstance(ek()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ZO(),!this.activeServiceWorker)return;this.sender=new YO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lm();return await Ew(e,Fd,"1"),await Aw(e,Fd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ew(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>rk(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Aw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=fp(i,!1).getAll();return new ff(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ik)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rI.type="LOCAL";const sk=rI;new uf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(n,e){return e?fo(e):(je(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv extends KC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ak(n){return zO(n.auth,new vv(n),n.bypassAuthState)}function uk(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),jO(t,new vv(n),n.bypassAuthState)}async function lk(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),UO(t,new vv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:u}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ak;case"linkViaPopup":case"linkViaRedirect":return lk;case"reauthViaPopup":case"reauthViaRedirect":return uk;default:Fi(this.auth,"internal-error")}}resolve(e){go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=new uf(2e3,1e4);async function fk(n,e,t){if(Ur(n.app))return Promise.reject(ui(n,"operation-not-supported-in-this-environment"));const r=lf(n);DC(n,e,lp);const i=gv(r,t);return new fa(r,"signInViaPopup",e,i).executeNotNull()}class fa extends iI{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,fa.currentPopupAction&&fa.currentPopupAction.cancel(),fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){go(this.filter.length===1,"Popup operations only handle one event");const e=mv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ck.get())};e()}}fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="pendingRedirect",dd=new Map;class dk extends iI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=dd.get(this.auth._key());if(!e){try{const r=await pk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}dd.set(this.auth._key(),e)}return this.bypassAuthState||dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pk(n,e){const t=sI(e),r=oI(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function mk(n,e){return oI(n)._set(sI(e),"true")}function gk(n,e){dd.set(n._key(),e)}function oI(n){return fo(n._redirectPersistence)}function sI(n){return hd(hk,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(n,e,t){return yk(n,e,t)}async function yk(n,e,t){if(Ur(n.app))return Promise.reject(cs(n));const r=lf(n);DC(n,e,lp),await r._initializationPromise;const i=gv(r,t);return await mk(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function _k(n,e,t=!1){if(Ur(n.app))return Promise.reject(cs(n));const r=lf(n),i=gv(r,e),s=await new dk(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=600*1e3;class wk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ek(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!aI(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ui(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tw(e))}saveEventToCache(e){this.cachedEventUids.add(Tw(e)),this.lastProcessedEventTime=Date.now()}}function Tw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function aI({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Ek(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ak(n,e={}){return rl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ck=/^https?/;async function Ik(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Ak(n);for(const t of e)try{if(Sk(t))return}catch{}Fi(n,"unauthorized-domain")}function Sk(n){const e=km(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!Ck.test(t))return!1;if(Tk.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=new uf(3e4,6e4);function Cw(){const n=Oi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Rk(n){return new Promise((e,t)=>{function r(){Cw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cw(),t(ui(n,"network-request-failed"))},timeout:bk.get()})}if(Oi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Oi().gapi?.load)r();else{const i=OO("iframefcb");return Oi()[i]=()=>{gapi.load?r():t(ui(n,"network-request-failed"))},NO(`${DO()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw pd=null,e})}let pd=null;function Pk(n){return pd=pd||Rk(n),pd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=new uf(5e3,15e3),Dk="__/auth/iframe",Ok="emulator/auth/iframe",kk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lk(n){const e=n.config;je(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?cv(e,Ok):`https://${n.config.authDomain}/${Dk}`,r={apiKey:e.apiKey,appName:n.name,v:nl},i=Mk.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${af(r).slice(1)}`}async function Vk(n){const e=await Pk(n),t=Oi().gapi;return je(t,n,"internal-error"),e.open({where:document.body,url:Lk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kk,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=ui(n,"network-request-failed"),u=Oi().setTimeout(()=>{o(s)},Nk.get());function c(){Oi().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Bk=500,Uk=600,jk="_blank",zk="http://localhost";class Iw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Hk(n,e,t,r=Bk,i=Uk){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c={...Fk,width:r.toString(),height:i.toString(),top:o,left:s},f=Hn().toLowerCase();t&&(u=UC(f)?jk:t),FC(f)&&(e=e||zk,c.scrollbars="yes");const h=Object.entries(c).reduce((v,[y,E])=>`${v}${y}=${E},`,"");if(AO(f)&&u!=="_self")return Gk(e||"",u),new Iw(null);const p=window.open(e||"",u,h);je(p,n,"popup-blocked");try{p.focus()}catch{}return new Iw(p)}function Gk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="__/auth/handler",$k="emulator/auth/handler",qk=encodeURIComponent("fac");async function Sw(n,e,t,r,i,o){je(n.config.authDomain,n,"auth-domain-config-required"),je(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:nl,eventId:i};if(e instanceof lp){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",q6(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))s[h]=p}if(e instanceof cf){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);const u=s;for(const h of Object.keys(u))u[h]===void 0&&delete u[h];const c=await n._getAppCheckToken(),f=c?`#${qk}=${encodeURIComponent(c)}`:"";return`${Kk(n)}?${af(u).slice(1)}${f}`}function Kk({config:n}){return n.emulator?cv(n,$k):`https://${n.authDomain}/${Wk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="webStorageSupport";class Xk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JC,this._completeRedirectFn=_k,this._overrideRedirectResult=gk}async _openPopup(e,t,r,i){go(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Sw(e,t,r,km(),i);return Hk(e,o,mv())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await Sw(e,t,r,km(),i);return QO(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(go(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Vk(e),r=new wk(e);return t.register("authEvent",i=>(je(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(F1,{type:F1},i=>{const o=i?.[0]?.[F1];o!==void 0&&t(!!o),Fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ik(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return WC()||BC()||dv()}}const Yk=Xk;var bw="@firebase/auth",Rw="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Jk(n){ju(new _a("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:u}=r.options;je(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$C(n)},f=new RO(r,i,o,c);return MO(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ju(new _a("auth-internal",e=>{const t=lf(e.getProvider("auth").getImmediate());return(r=>new Qk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ls(bw,Rw,Zk(n)),ls(bw,Rw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=300,t5=wC("authIdTokenMaxAge")||e5;let Pw=null;const n5=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>t5)return;const i=t?.token;Pw!==i&&(Pw=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function r5(n=SC()){const e=av(n,"auth");if(e.isInitialized())return e.getImmediate();const t=kO(n,{popupRedirectResolver:Yk,persistence:[sk,KO,JC]}),r=wC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=n5(o.toString());GO(t,s,()=>s(t.currentUser)),HO(t,u=>s(u))}}const i=_C("auth");return i&&LO(t,`http://${i}`),t}function i5(){return document.getElementsByTagName("head")?.[0]??document}PO({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=ui("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",i5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Jk("Browser");var o5="firebase",s5="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ls(o5,s5,"app");var Nw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fs,uI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function D(){}D.prototype=I.prototype,R.F=I.prototype,R.prototype=new D,R.prototype.constructor=R,R.D=function(O,F,U){for(var V=Array(arguments.length-2),te=2;te<arguments.length;te++)V[te-2]=arguments[te];return I.prototype[F].apply(O,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,I,D){D||(D=0);const O=Array(16);if(typeof I=="string")for(var F=0;F<16;++F)O[F]=I.charCodeAt(D++)|I.charCodeAt(D++)<<8|I.charCodeAt(D++)<<16|I.charCodeAt(D++)<<24;else for(F=0;F<16;++F)O[F]=I[D++]|I[D++]<<8|I[D++]<<16|I[D++]<<24;I=R.g[0],D=R.g[1],F=R.g[2];let U=R.g[3],V;V=I+(U^D&(F^U))+O[0]+3614090360&4294967295,I=D+(V<<7&4294967295|V>>>25),V=U+(F^I&(D^F))+O[1]+3905402710&4294967295,U=I+(V<<12&4294967295|V>>>20),V=F+(D^U&(I^D))+O[2]+606105819&4294967295,F=U+(V<<17&4294967295|V>>>15),V=D+(I^F&(U^I))+O[3]+3250441966&4294967295,D=F+(V<<22&4294967295|V>>>10),V=I+(U^D&(F^U))+O[4]+4118548399&4294967295,I=D+(V<<7&4294967295|V>>>25),V=U+(F^I&(D^F))+O[5]+1200080426&4294967295,U=I+(V<<12&4294967295|V>>>20),V=F+(D^U&(I^D))+O[6]+2821735955&4294967295,F=U+(V<<17&4294967295|V>>>15),V=D+(I^F&(U^I))+O[7]+4249261313&4294967295,D=F+(V<<22&4294967295|V>>>10),V=I+(U^D&(F^U))+O[8]+1770035416&4294967295,I=D+(V<<7&4294967295|V>>>25),V=U+(F^I&(D^F))+O[9]+2336552879&4294967295,U=I+(V<<12&4294967295|V>>>20),V=F+(D^U&(I^D))+O[10]+4294925233&4294967295,F=U+(V<<17&4294967295|V>>>15),V=D+(I^F&(U^I))+O[11]+2304563134&4294967295,D=F+(V<<22&4294967295|V>>>10),V=I+(U^D&(F^U))+O[12]+1804603682&4294967295,I=D+(V<<7&4294967295|V>>>25),V=U+(F^I&(D^F))+O[13]+4254626195&4294967295,U=I+(V<<12&4294967295|V>>>20),V=F+(D^U&(I^D))+O[14]+2792965006&4294967295,F=U+(V<<17&4294967295|V>>>15),V=D+(I^F&(U^I))+O[15]+1236535329&4294967295,D=F+(V<<22&4294967295|V>>>10),V=I+(F^U&(D^F))+O[1]+4129170786&4294967295,I=D+(V<<5&4294967295|V>>>27),V=U+(D^F&(I^D))+O[6]+3225465664&4294967295,U=I+(V<<9&4294967295|V>>>23),V=F+(I^D&(U^I))+O[11]+643717713&4294967295,F=U+(V<<14&4294967295|V>>>18),V=D+(U^I&(F^U))+O[0]+3921069994&4294967295,D=F+(V<<20&4294967295|V>>>12),V=I+(F^U&(D^F))+O[5]+3593408605&4294967295,I=D+(V<<5&4294967295|V>>>27),V=U+(D^F&(I^D))+O[10]+38016083&4294967295,U=I+(V<<9&4294967295|V>>>23),V=F+(I^D&(U^I))+O[15]+3634488961&4294967295,F=U+(V<<14&4294967295|V>>>18),V=D+(U^I&(F^U))+O[4]+3889429448&4294967295,D=F+(V<<20&4294967295|V>>>12),V=I+(F^U&(D^F))+O[9]+568446438&4294967295,I=D+(V<<5&4294967295|V>>>27),V=U+(D^F&(I^D))+O[14]+3275163606&4294967295,U=I+(V<<9&4294967295|V>>>23),V=F+(I^D&(U^I))+O[3]+4107603335&4294967295,F=U+(V<<14&4294967295|V>>>18),V=D+(U^I&(F^U))+O[8]+1163531501&4294967295,D=F+(V<<20&4294967295|V>>>12),V=I+(F^U&(D^F))+O[13]+2850285829&4294967295,I=D+(V<<5&4294967295|V>>>27),V=U+(D^F&(I^D))+O[2]+4243563512&4294967295,U=I+(V<<9&4294967295|V>>>23),V=F+(I^D&(U^I))+O[7]+1735328473&4294967295,F=U+(V<<14&4294967295|V>>>18),V=D+(U^I&(F^U))+O[12]+2368359562&4294967295,D=F+(V<<20&4294967295|V>>>12),V=I+(D^F^U)+O[5]+4294588738&4294967295,I=D+(V<<4&4294967295|V>>>28),V=U+(I^D^F)+O[8]+2272392833&4294967295,U=I+(V<<11&4294967295|V>>>21),V=F+(U^I^D)+O[11]+1839030562&4294967295,F=U+(V<<16&4294967295|V>>>16),V=D+(F^U^I)+O[14]+4259657740&4294967295,D=F+(V<<23&4294967295|V>>>9),V=I+(D^F^U)+O[1]+2763975236&4294967295,I=D+(V<<4&4294967295|V>>>28),V=U+(I^D^F)+O[4]+1272893353&4294967295,U=I+(V<<11&4294967295|V>>>21),V=F+(U^I^D)+O[7]+4139469664&4294967295,F=U+(V<<16&4294967295|V>>>16),V=D+(F^U^I)+O[10]+3200236656&4294967295,D=F+(V<<23&4294967295|V>>>9),V=I+(D^F^U)+O[13]+681279174&4294967295,I=D+(V<<4&4294967295|V>>>28),V=U+(I^D^F)+O[0]+3936430074&4294967295,U=I+(V<<11&4294967295|V>>>21),V=F+(U^I^D)+O[3]+3572445317&4294967295,F=U+(V<<16&4294967295|V>>>16),V=D+(F^U^I)+O[6]+76029189&4294967295,D=F+(V<<23&4294967295|V>>>9),V=I+(D^F^U)+O[9]+3654602809&4294967295,I=D+(V<<4&4294967295|V>>>28),V=U+(I^D^F)+O[12]+3873151461&4294967295,U=I+(V<<11&4294967295|V>>>21),V=F+(U^I^D)+O[15]+530742520&4294967295,F=U+(V<<16&4294967295|V>>>16),V=D+(F^U^I)+O[2]+3299628645&4294967295,D=F+(V<<23&4294967295|V>>>9),V=I+(F^(D|~U))+O[0]+4096336452&4294967295,I=D+(V<<6&4294967295|V>>>26),V=U+(D^(I|~F))+O[7]+1126891415&4294967295,U=I+(V<<10&4294967295|V>>>22),V=F+(I^(U|~D))+O[14]+2878612391&4294967295,F=U+(V<<15&4294967295|V>>>17),V=D+(U^(F|~I))+O[5]+4237533241&4294967295,D=F+(V<<21&4294967295|V>>>11),V=I+(F^(D|~U))+O[12]+1700485571&4294967295,I=D+(V<<6&4294967295|V>>>26),V=U+(D^(I|~F))+O[3]+2399980690&4294967295,U=I+(V<<10&4294967295|V>>>22),V=F+(I^(U|~D))+O[10]+4293915773&4294967295,F=U+(V<<15&4294967295|V>>>17),V=D+(U^(F|~I))+O[1]+2240044497&4294967295,D=F+(V<<21&4294967295|V>>>11),V=I+(F^(D|~U))+O[8]+1873313359&4294967295,I=D+(V<<6&4294967295|V>>>26),V=U+(D^(I|~F))+O[15]+4264355552&4294967295,U=I+(V<<10&4294967295|V>>>22),V=F+(I^(U|~D))+O[6]+2734768916&4294967295,F=U+(V<<15&4294967295|V>>>17),V=D+(U^(F|~I))+O[13]+1309151649&4294967295,D=F+(V<<21&4294967295|V>>>11),V=I+(F^(D|~U))+O[4]+4149444226&4294967295,I=D+(V<<6&4294967295|V>>>26),V=U+(D^(I|~F))+O[11]+3174756917&4294967295,U=I+(V<<10&4294967295|V>>>22),V=F+(I^(U|~D))+O[2]+718787259&4294967295,F=U+(V<<15&4294967295|V>>>17),V=D+(U^(F|~I))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(F+(V<<21&4294967295|V>>>11))&4294967295,R.g[2]=R.g[2]+F&4294967295,R.g[3]=R.g[3]+U&4294967295}r.prototype.v=function(R,I){I===void 0&&(I=R.length);const D=I-this.blockSize,O=this.C;let F=this.h,U=0;for(;U<I;){if(F==0)for(;U<=D;)i(this,R,U),U+=this.blockSize;if(typeof R=="string"){for(;U<I;)if(O[F++]=R.charCodeAt(U++),F==this.blockSize){i(this,O),F=0;break}}else for(;U<I;)if(O[F++]=R[U++],F==this.blockSize){i(this,O),F=0;break}}this.h=F,this.o+=I},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;I=this.o*8;for(var D=R.length-8;D<R.length;++D)R[D]=I&255,I/=256;for(this.v(R),R=Array(16),I=0,D=0;D<4;++D)for(let O=0;O<32;O+=8)R[I++]=this.g[D]>>>O&255;return R};function o(R,I){var D=u;return Object.prototype.hasOwnProperty.call(D,R)?D[R]:D[R]=I(R)}function s(R,I){this.h=I;const D=[];let O=!0;for(let F=R.length-1;F>=0;F--){const U=R[F]|0;O&&U==I||(D[F]=U,O=!1)}this.g=D}var u={};function c(R){return-128<=R&&R<128?o(R,function(I){return new s([I|0],I<0?-1:0)}):new s([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return p;if(R<0)return T(f(-R));const I=[];let D=1;for(let O=0;R>=D;O++)I[O]=R/D|0,D*=4294967296;return new s(I,0)}function h(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return T(h(R.substring(1),I));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=f(Math.pow(I,8));let O=p;for(let U=0;U<R.length;U+=8){var F=Math.min(8,R.length-U);const V=parseInt(R.substring(U,U+F),I);F<8?(F=f(Math.pow(I,F)),O=O.j(F).add(f(V))):(O=O.j(D),O=O.add(f(V)))}return O}var p=c(0),v=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(A(this))return-T(this).m();let R=0,I=1;for(let D=0;D<this.g.length;D++){const O=this.i(D);R+=(O>=0?O:4294967296+O)*I,I*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(E(this))return"0";if(A(this))return"-"+T(this).toString(R);const I=f(Math.pow(R,6));var D=this;let O="";for(;;){const F=j(D,I).g;D=N(D,F.j(I));let U=((D.g.length>0?D.g[0]:D.h)>>>0).toString(R);if(D=F,E(D))return U+O;for(;U.length<6;)U="0"+U;O=U+O}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function E(R){if(R.h!=0)return!1;for(let I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function A(R){return R.h==-1}n.l=function(R){return R=N(this,R),A(R)?-1:E(R)?0:1};function T(R){const I=R.g.length,D=[];for(let O=0;O<I;O++)D[O]=~R.g[O];return new s(D,~R.h).add(v)}n.abs=function(){return A(this)?T(this):this},n.add=function(R){const I=Math.max(this.g.length,R.g.length),D=[];let O=0;for(let F=0;F<=I;F++){let U=O+(this.i(F)&65535)+(R.i(F)&65535),V=(U>>>16)+(this.i(F)>>>16)+(R.i(F)>>>16);O=V>>>16,U&=65535,V&=65535,D[F]=V<<16|U}return new s(D,D[D.length-1]&-2147483648?-1:0)};function N(R,I){return R.add(T(I))}n.j=function(R){if(E(this)||E(R))return p;if(A(this))return A(R)?T(this).j(T(R)):T(T(this).j(R));if(A(R))return T(this.j(T(R)));if(this.l(y)<0&&R.l(y)<0)return f(this.m()*R.m());const I=this.g.length+R.g.length,D=[];for(var O=0;O<2*I;O++)D[O]=0;for(O=0;O<this.g.length;O++)for(let F=0;F<R.g.length;F++){const U=this.i(O)>>>16,V=this.i(O)&65535,te=R.i(F)>>>16,Pe=R.i(F)&65535;D[2*O+2*F]+=V*Pe,P(D,2*O+2*F),D[2*O+2*F+1]+=U*Pe,P(D,2*O+2*F+1),D[2*O+2*F+1]+=V*te,P(D,2*O+2*F+1),D[2*O+2*F+2]+=U*te,P(D,2*O+2*F+2)}for(R=0;R<I;R++)D[R]=D[2*R+1]<<16|D[2*R];for(R=I;R<2*I;R++)D[R]=0;return new s(D,0)};function P(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function M(R,I){this.g=R,this.h=I}function j(R,I){if(E(I))throw Error("division by zero");if(E(R))return new M(p,p);if(A(R))return I=j(T(R),I),new M(T(I.g),T(I.h));if(A(I))return I=j(R,T(I)),new M(T(I.g),I.h);if(R.g.length>30){if(A(R)||A(I))throw Error("slowDivide_ only works with positive integers.");for(var D=v,O=I;O.l(R)<=0;)D=H(D),O=H(O);var F=W(D,1),U=W(O,1);for(O=W(O,2),D=W(D,2);!E(O);){var V=U.add(O);V.l(R)<=0&&(F=F.add(D),U=V),O=W(O,1),D=W(D,1)}return I=N(R,F.j(I)),new M(F,I)}for(F=p;R.l(I)>=0;){for(D=Math.max(1,Math.floor(R.m()/I.m())),O=Math.ceil(Math.log(D)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),U=f(D),V=U.j(I);A(V)||V.l(R)>0;)D-=O,U=f(D),V=U.j(I);E(U)&&(U=v),F=F.add(U),R=N(R,V)}return new M(F,R)}n.B=function(R){return j(this,R).h},n.and=function(R){const I=Math.max(this.g.length,R.g.length),D=[];for(let O=0;O<I;O++)D[O]=this.i(O)&R.i(O);return new s(D,this.h&R.h)},n.or=function(R){const I=Math.max(this.g.length,R.g.length),D=[];for(let O=0;O<I;O++)D[O]=this.i(O)|R.i(O);return new s(D,this.h|R.h)},n.xor=function(R){const I=Math.max(this.g.length,R.g.length),D=[];for(let O=0;O<I;O++)D[O]=this.i(O)^R.i(O);return new s(D,this.h^R.h)};function H(R){const I=R.g.length+1,D=[];for(let O=0;O<I;O++)D[O]=R.i(O)<<1|R.i(O-1)>>>31;return new s(D,R.h)}function W(R,I){const D=I>>5;I%=32;const O=R.g.length-D,F=[];for(let U=0;U<O;U++)F[U]=I>0?R.i(U+D)>>>I|R.i(U+D+1)<<32-I:R.i(U+D);return new s(F,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,uI=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=h,fs=s}).apply(typeof Nw<"u"?Nw:typeof self<"u"?self:typeof window<"u"?window:{});var $h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lI,pc,cI,md,Vm,fI,hI,dI;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof $h=="object"&&$h];for(var w=0;w<m.length;++w){var C=m[w];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=t(this);function i(m,w){if(w)e:{var C=r;m=m.split(".");for(var k=0;k<m.length-1;k++){var X=m[k];if(!(X in C))break e;C=C[X]}m=m[m.length-1],k=C[m],w=w(k),w!=k&&w!=null&&e(C,m,{configurable:!0,writable:!0,value:w})}}i("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(m){return m||function(w){var C=[],k;for(k in w)Object.prototype.hasOwnProperty.call(w,k)&&C.push([k,w[k]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function u(m){var w=typeof m;return w=="object"&&m!=null||w=="function"}function c(m,w,C){return m.call.apply(m.bind,arguments)}function f(m,w,C){return f=c,f.apply(null,arguments)}function h(m,w){var C=Array.prototype.slice.call(arguments,1);return function(){var k=C.slice();return k.push.apply(k,arguments),m.apply(this,k)}}function p(m,w){function C(){}C.prototype=w.prototype,m.Z=w.prototype,m.prototype=new C,m.prototype.constructor=m,m.Ob=function(k,X,ee){for(var fe=Array(arguments.length-2),He=2;He<arguments.length;He++)fe[He-2]=arguments[He];return w.prototype[X].apply(k,fe)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function y(m){const w=m.length;if(w>0){const C=Array(w);for(let k=0;k<w;k++)C[k]=m[k];return C}return[]}function E(m,w){for(let k=1;k<arguments.length;k++){const X=arguments[k];var C=typeof X;if(C=C!="object"?C:X?Array.isArray(X)?"array":C:"null",C=="array"||C=="object"&&typeof X.length=="number"){C=m.length||0;const ee=X.length||0;m.length=C+ee;for(let fe=0;fe<ee;fe++)m[C+fe]=X[fe]}else m.push(X)}}class A{constructor(w,C){this.i=w,this.j=C,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function T(m){s.setTimeout(()=>{throw m},0)}function N(){var m=R;let w=null;return m.g&&(w=m.g,m.g=m.g.next,m.g||(m.h=null),w.next=null),w}class P{constructor(){this.h=this.g=null}add(w,C){const k=M.get();k.set(w,C),this.h?this.h.next=k:this.g=k,this.h=k}}var M=new A(()=>new j,m=>m.reset());class j{constructor(){this.next=this.g=this.h=null}set(w,C){this.h=w,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let H,W=!1,R=new P,I=()=>{const m=Promise.resolve(void 0);H=()=>{m.then(D)}};function D(){for(var m;m=N();){try{m.h.call(m.g)}catch(C){T(C)}var w=M;w.j(m),w.h<100&&(w.h++,m.next=w.g,w.g=m)}W=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(m,w){this.type=m,this.g=this.target=w,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var m=!1,w=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};s.addEventListener("test",C,w),s.removeEventListener("test",C,w)}catch{}return m})();function V(m){return/^[\s\xa0]*$/.test(m)}function te(m,w){F.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,w)}p(te,F),te.prototype.init=function(m,w){const C=this.type=m.type,k=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=w,w=m.relatedTarget,w||(C=="mouseover"?w=m.fromElement:C=="mouseout"&&(w=m.toElement)),this.relatedTarget=w,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&te.Z.h.call(this)},te.prototype.h=function(){te.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Pe="closure_listenable_"+(Math.random()*1e6|0),Oe=0;function _e(m,w,C,k,X){this.listener=m,this.proxy=null,this.src=w,this.type=C,this.capture=!!k,this.ha=X,this.key=++Oe,this.da=this.fa=!1}function Z(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function me(m,w,C){for(const k in m)w.call(C,m[k],k,m)}function de(m,w){for(const C in m)w.call(void 0,m[C],C,m)}function q(m){const w={};for(const C in m)w[C]=m[C];return w}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(m,w){let C,k;for(let X=1;X<arguments.length;X++){k=arguments[X];for(C in k)m[C]=k[C];for(let ee=0;ee<oe.length;ee++)C=oe[ee],Object.prototype.hasOwnProperty.call(k,C)&&(m[C]=k[C])}}function Ie(m){this.src=m,this.g={},this.h=0}Ie.prototype.add=function(m,w,C,k,X){const ee=m.toString();m=this.g[ee],m||(m=this.g[ee]=[],this.h++);const fe=We(m,w,k,X);return fe>-1?(w=m[fe],C||(w.fa=!1)):(w=new _e(w,this.src,ee,!!k,X),w.fa=C,m.push(w)),w};function Ge(m,w){const C=w.type;if(C in m.g){var k=m.g[C],X=Array.prototype.indexOf.call(k,w,void 0),ee;(ee=X>=0)&&Array.prototype.splice.call(k,X,1),ee&&(Z(w),m.g[C].length==0&&(delete m.g[C],m.h--))}}function We(m,w,C,k){for(let X=0;X<m.length;++X){const ee=m[X];if(!ee.da&&ee.listener==w&&ee.capture==!!C&&ee.ha==k)return X}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),Ke={};function ie(m,w,C,k,X){if(Array.isArray(w)){for(let ee=0;ee<w.length;ee++)ie(m,w[ee],C,k,X);return null}return C=hl(C),m&&m[Pe]?m.J(w,C,u(k)?!!k.capture:!1,X):be(m,w,C,!1,k,X)}function be(m,w,C,k,X,ee){if(!w)throw Error("Invalid event type");const fe=u(X)?!!X.capture:!!X;let He=Ra(m);if(He||(m[ke]=He=new Ie(m)),C=He.add(w,C,k,fe,ee),C.proxy)return C;if(k=et(),C.proxy=k,k.src=m,k.listener=C,m.addEventListener)U||(X=fe),X===void 0&&(X=!1),m.addEventListener(w.toString(),k,X);else if(m.attachEvent)m.attachEvent(ci(w.toString()),k);else if(m.addListener&&m.removeListener)m.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return C}function et(){function m(C){return w.call(m.src,m.listener,C)}const w=Tf;return m}function bt(m,w,C,k,X){if(Array.isArray(w))for(var ee=0;ee<w.length;ee++)bt(m,w[ee],C,k,X);else k=u(k)?!!k.capture:!!k,C=hl(C),m&&m[Pe]?(m=m.i,ee=String(w).toString(),ee in m.g&&(w=m.g[ee],C=We(w,C,k,X),C>-1&&(Z(w[C]),Array.prototype.splice.call(w,C,1),w.length==0&&(delete m.g[ee],m.h--)))):m&&(m=Ra(m))&&(w=m.g[w.toString()],m=-1,w&&(m=We(w,C,k,X)),(C=m>-1?w[m]:null)&&Lt(C))}function Lt(m){if(typeof m!="number"&&m&&!m.da){var w=m.src;if(w&&w[Pe])Ge(w.i,m);else{var C=m.type,k=m.proxy;w.removeEventListener?w.removeEventListener(C,k,m.capture):w.detachEvent?w.detachEvent(ci(C),k):w.addListener&&w.removeListener&&w.removeListener(k),(C=Ra(w))?(Ge(C,m),C.h==0&&(C.src=null,w[ke]=null)):Z(m)}}}function ci(m){return m in Ke?Ke[m]:Ke[m]="on"+m}function Tf(m,w){if(m.da)m=!0;else{w=new te(w,this);const C=m.listener,k=m.ha||m.src;m.fa&&Lt(m),m=C.call(k,w)}return m}function Ra(m){return m=m[ke],m instanceof Ie?m:null}var Rs="__closure_events_fn_"+(Math.random()*1e9>>>0);function hl(m){return typeof m=="function"?m:(m[Rs]||(m[Rs]=function(w){return m.handleEvent(w)}),m[Rs])}function qt(){O.call(this),this.i=new Ie(this),this.M=this,this.G=null}p(qt,O),qt.prototype[Pe]=!0,qt.prototype.removeEventListener=function(m,w,C,k){bt(this,m,w,C,k)};function jt(m,w){var C,k=m.G;if(k)for(C=[];k;k=k.G)C.push(k);if(m=m.M,k=w.type||w,typeof w=="string")w=new F(w,m);else if(w instanceof F)w.target=w.target||m;else{var X=w;w=new F(k,m),xe(w,X)}X=!0;let ee,fe;if(C)for(fe=C.length-1;fe>=0;fe--)ee=w.g=C[fe],X=Wr(ee,k,!0,w)&&X;if(ee=w.g=m,X=Wr(ee,k,!0,w)&&X,X=Wr(ee,k,!1,w)&&X,C)for(fe=0;fe<C.length;fe++)ee=w.g=C[fe],X=Wr(ee,k,!1,w)&&X}qt.prototype.N=function(){if(qt.Z.N.call(this),this.i){var m=this.i;for(const w in m.g){const C=m.g[w];for(let k=0;k<C.length;k++)Z(C[k]);delete m.g[w],m.h--}}this.G=null},qt.prototype.J=function(m,w,C,k){return this.i.add(String(m),w,!1,C,k)},qt.prototype.K=function(m,w,C,k){return this.i.add(String(m),w,!0,C,k)};function Wr(m,w,C,k){if(w=m.i.g[String(w)],!w)return!0;w=w.concat();let X=!0;for(let ee=0;ee<w.length;++ee){const fe=w[ee];if(fe&&!fe.da&&fe.capture==C){const He=fe.listener,zt=fe.ha||fe.src;fe.fa&&Ge(m.i,fe),X=He.call(zt,k)!==!1&&X}}return X&&!k.defaultPrevented}function dl(m,w){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:s.setTimeout(m,w||0)}function pl(m){m.g=dl(()=>{m.g=null,m.i&&(m.i=!1,pl(m))},m.l);const w=m.h;m.h=null,m.m.apply(null,w)}class Cf extends O{constructor(w,C){super(),this.m=w,this.l=C,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:pl(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Eo(m){O.call(this),this.h=m,this.g={}}p(Eo,O);var ml=[];function Pa(m){me(m.g,function(w,C){this.g.hasOwnProperty(C)&&Lt(w)},m),m.g={}}Eo.prototype.N=function(){Eo.Z.N.call(this),Pa(this)},Eo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ao=s.JSON.stringify,If=s.JSON.parse,Ps=class{stringify(m){return s.JSON.stringify(m,void 0)}parse(m){return s.JSON.parse(m,void 0)}};function To(){}function Sf(){}var Co={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Na(){F.call(this,"d")}p(Na,F);function gl(){F.call(this,"c")}p(gl,F);var $r={},Da=null;function Io(){return Da=Da||new qt}$r.Ia="serverreachability";function Oa(m){F.call(this,$r.Ia,m)}p(Oa,F);function Gi(m){const w=Io();jt(w,new Oa(w))}$r.STAT_EVENT="statevent";function Wi(m,w){F.call(this,$r.STAT_EVENT,m),this.stat=w}p(Wi,F);function Vt(m){const w=Io();jt(w,new Wi(w,m))}$r.Ja="timingevent";function vl(m,w){F.call(this,$r.Ja,m),this.size=w}p(vl,F);function So(m,w){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){m()},w)}function bo(){this.g=!0}bo.prototype.ua=function(){this.g=!1};function bf(m,w,C,k,X,ee){m.info(function(){if(m.g)if(ee){var fe="",He=ee.split("&");for(let dt=0;dt<He.length;dt++){var zt=He[dt].split("=");if(zt.length>1){const Kt=zt[0];zt=zt[1];const vr=Kt.split("_");fe=vr.length>=2&&vr[1]=="type"?fe+(Kt+"="+zt+"&"):fe+(Kt+"=redacted&")}}}else fe=null;else fe=ee;return"XMLHTTP REQ ("+k+") [attempt "+X+"]: "+w+`
`+C+`
`+fe})}function Rf(m,w,C,k,X,ee,fe){m.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+X+"]: "+w+`
`+C+`
`+ee+" "+fe})}function fi(m,w,C,k){m.info(function(){return"XMLHTTP TEXT ("+w+"): "+Ns(m,C)+(k?" "+k:"")})}function Pf(m,w){m.info(function(){return"TIMEOUT: "+w})}bo.prototype.info=function(){};function Ns(m,w){if(!m.g)return w;if(!w)return null;try{const ee=JSON.parse(w);if(ee){for(m=0;m<ee.length;m++)if(Array.isArray(ee[m])){var C=ee[m];if(!(C.length<2)){var k=C[1];if(Array.isArray(k)&&!(k.length<1)){var X=k[0];if(X!="noop"&&X!="stop"&&X!="close")for(let fe=1;fe<k.length;fe++)k[fe]=""}}}}return Ao(ee)}catch{return w}}var Ro={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Po={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nf;function $i(){}p($i,To),$i.prototype.g=function(){return new XMLHttpRequest},Nf=new $i;function hi(m){return encodeURIComponent(String(m))}function ka(m){var w=1;m=m.split(":");const C=[];for(;w>0&&m.length;)C.push(m.shift()),w--;return m.length&&C.push(m.join(":")),C}function br(m,w,C,k){this.j=m,this.i=w,this.l=C,this.S=k||1,this.V=new Eo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Df}function Df(){this.i=null,this.g="",this.h=!1}var Of={},yl={};function qr(m,w,C){m.M=1,m.A=Ki(Rr(w)),m.u=C,m.R=!0,_l(m,null)}function _l(m,w){m.F=Date.now(),Ds(m),m.B=Rr(m.A);var C=m.B,k=m.S;Array.isArray(k)||(k=[String(k)]),Rl(C.i,"t",k),m.C=0,C=m.j.L,m.h=new Df,m.g=Hf(m.j,C?w:null,!m.u),m.P>0&&(m.O=new Cf(f(m.Y,m,m.g),m.P)),w=m.V,C=m.g,k=m.ba;var X="readystatechange";Array.isArray(X)||(X&&(ml[0]=X.toString()),X=ml);for(let ee=0;ee<X.length;ee++){const fe=ie(C,X[ee],k||w.handleEvent,!1,w.h||w);if(!fe)break;w.g[fe.key]=fe}w=m.J?q(m.J):{},m.u?(m.v||(m.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,w)):(m.v="GET",m.g.ea(m.B,m.v,null,w)),Gi(),bf(m.i,m.v,m.B,m.l,m.S,m.u)}br.prototype.ba=function(m){m=m.target;const w=this.O;w&&_i(m)==3?w.j():this.Y(m)},br.prototype.Y=function(m){try{if(m==this.g)e:{const He=_i(this.g),zt=this.g.ya(),dt=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||jf(this.g)))){this.K||He!=4||zt==7||(zt==8||dt<=0?Gi(3):Gi(2)),Ma(this);var w=this.g.ca();this.X=w;var C=kf(this);if(this.o=w==200,Rf(this.i,this.v,this.B,this.l,this.S,He,w),this.o){if(this.U&&!this.L){t:{if(this.g){var k,X=this.g;if((k=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(k)){var ee=k;break t}}ee=null}if(m=ee)fi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Et(this,m);else{this.o=!1,this.m=3,Vt(12),qi(this),Os(this);break e}}if(this.R){m=!0;let Kt;for(;!this.K&&this.C<C.length;)if(Kt=Lf(this,C),Kt==yl){He==4&&(this.m=4,Vt(14),m=!1),fi(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==Of){this.m=4,Vt(15),fi(this.i,this.l,C,"[Invalid Chunk]"),m=!1;break}else fi(this.i,this.l,Kt,null),Et(this,Kt);if(Mf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||C.length!=0||this.h.h||(this.m=1,Vt(16),m=!1),this.o=this.o&&m,!m)fi(this.i,this.l,C,"[Invalid Chunked Response]"),qi(this),Os(this);else if(C.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),zs(fe),fe.P=!0,Vt(11))}}else fi(this.i,this.l,C,null),Et(this,C);He==4&&qi(this),this.o&&!this.K&&(He==4?Wa(this.j,this):(this.o=!1,Ds(this)))}else Nl(this.g),w==400&&C.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),qi(this),Os(this)}}}catch{}finally{}};function kf(m){if(!Mf(m))return m.g.la();const w=jf(m.g);if(w==="")return"";let C="";const k=w.length,X=_i(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return qi(m),Os(m),"";m.h.i=new s.TextDecoder}for(let ee=0;ee<k;ee++)m.h.h=!0,C+=m.h.i.decode(w[ee],{stream:!(X&&ee==k-1)});return w.length=0,m.h.g+=C,m.C=0,m.h.g}function Mf(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Lf(m,w){var C=m.C,k=w.indexOf(`
`,C);return k==-1?yl:(C=Number(w.substring(C,k)),isNaN(C)?Of:(k+=1,k+C>w.length?yl:(w=w.slice(k,k+C),m.C=k+C,w)))}br.prototype.cancel=function(){this.K=!0,qi(this)};function Ds(m){m.T=Date.now()+m.H,xl(m,m.H)}function xl(m,w){if(m.D!=null)throw Error("WatchDog timer not null");m.D=So(f(m.aa,m),w)}function Ma(m){m.D&&(s.clearTimeout(m.D),m.D=null)}br.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Pf(this.i,this.B),this.M!=2&&(Gi(),Vt(17)),qi(this),this.m=2,Os(this)):xl(this,this.T-m)};function Os(m){m.j.I==0||m.K||Wa(m.j,m)}function qi(m){Ma(m);var w=m.O;w&&typeof w.dispose=="function"&&w.dispose(),m.O=null,Pa(m.V),m.g&&(w=m.g,m.g=null,w.abort(),w.dispose())}function Et(m,w){try{var C=m.j;if(C.I!=0&&(C.g==m||El(C.h,m))){if(!m.L&&El(C.h,m)&&C.I==3){try{var k=C.Ba.g.parse(w)}catch{k=null}if(Array.isArray(k)&&k.length==3){var X=k;if(X[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<m.F)Ga(C),mr(C);else break e;Ei(C),Vt(18)}}else C.xa=X[1],0<C.xa-C.K&&X[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=So(f(C.Va,C),6e3));ks(C.h)<=1&&C.ta&&(C.ta=void 0)}else gr(C,11)}else if((m.L||C.g==m)&&Ga(C),!V(w))for(X=C.Ba.g.parse(w),w=0;w<X.length;w++){let dt=X[w];const Kt=dt[0];if(!(Kt<=C.K))if(C.K=Kt,dt=dt[1],C.I==2)if(dt[0]=="c"){C.M=dt[1],C.ba=dt[2];const vr=dt[3];vr!=null&&(C.ka=vr,C.j.info("VER="+C.ka));const Ji=dt[4];Ji!=null&&(C.za=Ji,C.j.info("SVER="+C.za));const Ai=dt[5];Ai!=null&&typeof Ai=="number"&&Ai>0&&(k=1.5*Ai,C.O=k,C.j.info("backChannelRequestTimeoutMs_="+k)),k=C;const Ti=m.g;if(Ti){const Ka=Ti.g?Ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ka){var ee=k.h;ee.g||Ka.indexOf("spdy")==-1&&Ka.indexOf("quic")==-1&&Ka.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Va(ee,ee.h),ee.h=null))}if(k.G){const kl=Ti.g?Ti.g.getResponseHeader("X-HTTP-Session-Id"):null;kl&&(k.wa=kl,lt(k.J,k.G,kl))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-m.F,C.j.info("Handshake RTT: "+C.T+"ms")),k=C;var fe=m;if(k.na=Ol(k,k.L?k.ba:null,k.W),fe.L){Ms(k.h,fe);var He=fe,zt=k.O;zt&&(He.H=zt),He.D&&(Ma(He),Ds(He)),k.g=fe}else On(k);C.i.length>0&&Zi(C)}else dt[0]!="stop"&&dt[0]!="close"||gr(C,7);else C.I==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?gr(C,7):za(C):dt[0]!="noop"&&C.l&&C.l.qa(dt),C.A=0)}}Gi(4)}catch{}}var Vp=class{constructor(m,w){this.g=m,this.map=w}};function La(m){this.l=m||10,s.PerformanceNavigationTiming?(m=s.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wl(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ks(m){return m.h?1:m.g?m.g.size:0}function El(m,w){return m.h?m.h==w:m.g?m.g.has(w):!1}function Va(m,w){m.g?m.g.add(w):m.h=w}function Ms(m,w){m.h&&m.h==w?m.h=null:m.g&&m.g.has(w)&&m.g.delete(w)}La.prototype.cancel=function(){if(this.i=hr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function hr(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let w=m.i;for(const C of m.g.values())w=w.concat(C.G);return w}return y(m.i)}var Vf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dr(m,w){if(m){m=m.split("&");for(let C=0;C<m.length;C++){const k=m[C].indexOf("=");let X,ee=null;k>=0?(X=m[C].substring(0,k),ee=m[C].substring(k+1)):X=m[C],w(X,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function di(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;m instanceof di?(this.l=m.l,Ls(this,m.j),this.o=m.o,this.g=m.g,pi(this,m.u),this.h=m.h,No(this,Pl(m.i)),this.m=m.m):m&&(w=String(m).match(Vf))?(this.l=!1,Ls(this,w[1]||"",!0),this.o=Vs(w[2]||""),this.g=Vs(w[3]||"",!0),pi(this,w[4]),this.h=Vs(w[5]||"",!0),No(this,w[6]||"",!0),this.m=Vs(w[7]||"")):(this.l=!1,this.i=new tt(null,this.l))}di.prototype.toString=function(){const m=[];var w=this.j;w&&m.push(Fs(w,Tl,!0),":");var C=this.g;return(C||w=="file")&&(m.push("//"),(w=this.o)&&m.push(Fs(w,Tl,!0),"@"),m.push(hi(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&m.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(Fs(C,C.charAt(0)=="/"?Bs:Cl,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",Fs(C,Il)),m.join("")},di.prototype.resolve=function(m){const w=Rr(this);let C=!!m.j;C?Ls(w,m.j):C=!!m.o,C?w.o=m.o:C=!!m.g,C?w.g=m.g:C=m.u!=null;var k=m.h;if(C)pi(w,m.u);else if(C=!!m.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var X=w.h.lastIndexOf("/");X!=-1&&(k=w.h.slice(0,X+1)+k)}if(X=k,X==".."||X==".")k="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){k=X.lastIndexOf("/",0)==0,X=X.split("/");const ee=[];for(let fe=0;fe<X.length;){const He=X[fe++];He=="."?k&&fe==X.length&&ee.push(""):He==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),k&&fe==X.length&&ee.push("")):(ee.push(He),k=!0)}k=ee.join("/")}else k=X}return C?w.h=k:C=m.i.toString()!=="",C?No(w,Pl(m.i)):C=!!m.m,C&&(w.m=m.m),w};function Rr(m){return new di(m)}function Ls(m,w,C){m.j=C?Vs(w,!0):w,m.j&&(m.j=m.j.replace(/:$/,""))}function pi(m,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);m.u=w}else m.u=null}function No(m,w,C){w instanceof tt?(m.i=w,Ba(m.i,m.l)):(C||(w=Fs(w,Fp)),m.i=new tt(w,m.l))}function lt(m,w,C){m.i.set(w,C)}function Ki(m){return lt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Vs(m,w){return m?w?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Fs(m,w,C){return typeof m=="string"?(m=encodeURI(m).replace(w,Al),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Al(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Tl=/[#\/\?@]/g,Cl=/[#\?:]/g,Bs=/[#\?]/g,Fp=/[#\?@]/g,Il=/#/g;function tt(m,w){this.h=this.g=null,this.i=m||null,this.j=!!w}function mi(m){m.g||(m.g=new Map,m.h=0,m.i&&dr(m.i,function(w,C){m.add(decodeURIComponent(w.replace(/\+/g," ")),C)}))}n=tt.prototype,n.add=function(m,w){mi(this),this.i=null,m=gi(this,m);let C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(w),this.h+=1,this};function Sl(m,w){mi(m),w=gi(m,w),m.g.has(w)&&(m.i=null,m.h-=m.g.get(w).length,m.g.delete(w))}function Fa(m,w){return mi(m),w=gi(m,w),m.g.has(w)}n.forEach=function(m,w){mi(this),this.g.forEach(function(C,k){C.forEach(function(X){m.call(w,X,k,this)},this)},this)};function bl(m,w){mi(m);let C=[];if(typeof w=="string")Fa(m,w)&&(C=C.concat(m.g.get(gi(m,w))));else for(m=Array.from(m.g.values()),w=0;w<m.length;w++)C=C.concat(m[w]);return C}n.set=function(m,w){return mi(this),this.i=null,m=gi(this,m),Fa(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[w]),this.h+=1,this},n.get=function(m,w){return m?(m=bl(this,m),m.length>0?String(m[0]):w):w};function Rl(m,w,C){Sl(m,w),C.length>0&&(m.i=null,m.g.set(gi(m,w),y(C)),m.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],w=Array.from(this.g.keys());for(let k=0;k<w.length;k++){var C=w[k];const X=hi(C);C=bl(this,C);for(let ee=0;ee<C.length;ee++){let fe=X;C[ee]!==""&&(fe+="="+hi(C[ee])),m.push(fe)}}return this.i=m.join("&")};function Pl(m){const w=new tt;return w.i=m.i,m.g&&(w.g=new Map(m.g),w.h=m.h),w}function gi(m,w){return w=String(w),m.j&&(w=w.toLowerCase()),w}function Ba(m,w){w&&!m.j&&(mi(m),m.i=null,m.g.forEach(function(C,k){const X=k.toLowerCase();k!=X&&(Sl(this,k),Rl(this,X,C))},m)),m.j=w}function vi(m,w){const C=new bo;if(s.Image){const k=new Image;k.onload=h(wn,C,"TestLoadImage: loaded",!0,w,k),k.onerror=h(wn,C,"TestLoadImage: error",!1,w,k),k.onabort=h(wn,C,"TestLoadImage: abort",!1,w,k),k.ontimeout=h(wn,C,"TestLoadImage: timeout",!1,w,k),s.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=m}else w(!1)}function yi(m,w){const C=new bo,k=new AbortController,X=setTimeout(()=>{k.abort(),wn(C,"TestPingServer: timeout",!1,w)},1e4);fetch(m,{signal:k.signal}).then(ee=>{clearTimeout(X),ee.ok?wn(C,"TestPingServer: ok",!0,w):wn(C,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(X),wn(C,"TestPingServer: error",!1,w)})}function wn(m,w,C,k,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),k(C)}catch{}}function Us(){this.g=new Ps}function Xi(m){this.i=m.Sb||null,this.h=m.ab||!1}p(Xi,To),Xi.prototype.g=function(){return new pr(this.i,this.h)};function pr(m,w){qt.call(this),this.H=m,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(pr,qt),n=pr.prototype,n.open=function(m,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=w,this.readyState=1,Kr(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(w.body=m),(this.H||s).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Do(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Kr(this)),this.g&&(this.readyState=3,Kr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ff(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ff(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var w=m.value?m.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!m.done}))&&(this.response=this.responseText+=w)}m.done?Do(this):Kr(this),this.readyState==3&&Ff(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Do(this))},n.Na=function(m){this.g&&(this.response=m,Do(this))},n.ga=function(){this.g&&Do(this)};function Do(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Kr(m)}n.setRequestHeader=function(m,w){this.A.append(m,w)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],w=this.h.entries();for(var C=w.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=w.next();return m.join(`\r
`)};function Kr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(pr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Bf(m){let w="";return me(m,function(C,k){w+=k,w+=":",w+=C,w+=`\r
`}),w}function Ua(m,w,C){e:{for(k in C){var k=!1;break e}k=!0}k||(C=Bf(C),typeof m=="string"?C!=null&&hi(C):lt(m,w,C))}function _t(m){qt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(_t,qt);var Uf=/^https?$/i,Bp=["POST","PUT"];n=_t.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,w,C,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);w=w?w.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nf.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(w,String(m),!0),this.B=!1}catch(ee){Oo(this,ee);return}if(m=C||"",C=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var X in k)C.set(X,k[X]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const ee of k.keys())C.set(ee,k.get(ee));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(C.keys()).find(ee=>ee.toLowerCase()=="content-type"),X=s.FormData&&m instanceof s.FormData,!(Array.prototype.indexOf.call(Bp,w,void 0)>=0)||k||X||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,fe]of C)this.g.setRequestHeader(ee,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ee){Oo(this,ee)}};function Oo(m,w){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=w,m.o=5,ko(m),Qi(m)}function ko(m){m.A||(m.A=!0,jt(m,"complete"),jt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,jt(this,"complete"),jt(this,"abort"),Qi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qi(this,!0)),_t.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Yi(this):this.Xa())},n.Xa=function(){Yi(this)};function Yi(m){if(m.h&&typeof o<"u"){if(m.v&&_i(m)==4)setTimeout(m.Ca.bind(m),0);else if(jt(m,"readystatechange"),_i(m)==4){m.h=!1;try{const ee=m.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var C;if(!(C=w)){var k;if(k=ee===0){let fe=String(m.D).match(Vf)[1]||null;!fe&&s.self&&s.self.location&&(fe=s.self.location.protocol.slice(0,-1)),k=!Uf.test(fe?fe.toLowerCase():"")}C=k}if(C)jt(m,"complete"),jt(m,"success");else{m.o=6;try{var X=_i(m)>2?m.g.statusText:""}catch{X=""}m.l=X+" ["+m.ca()+"]",ko(m)}}finally{Qi(m)}}}}function Qi(m,w){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const C=m.g;m.g=null,w||jt(m,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function _i(m){return m.g?m.g.readyState:0}n.ca=function(){try{return _i(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var w=this.g.responseText;return m&&w.indexOf(m)==0&&(w=w.substring(m.length)),If(w)}};function jf(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Nl(m){const w={};m=(m.g&&_i(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<m.length;k++){if(V(m[k]))continue;var C=ka(m[k]);const X=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ee=w[X]||[];w[X]=ee,ee.push(C)}de(w,function(k){return k.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xi(m,w,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||w}function ja(m){this.za=0,this.i=[],this.j=new bo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xi("baseRetryDelayMs",5e3,m),this.Za=xi("retryDelaySeedMs",1e4,m),this.Ta=xi("forwardChannelMaxRetries",2,m),this.va=xi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new La(m&&m.concurrentRequestLimit),this.Ba=new Us,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ja.prototype,n.ka=8,n.I=1,n.connect=function(m,w,C,k){Vt(0),this.W=m,this.H=w||{},C&&k!==void 0&&(this.H.OSID=C,this.H.OAID=k),this.F=this.X,this.J=Ol(this,null,this.W),Zi(this)};function za(m){if(Ha(m),m.I==3){var w=m.V++,C=Rr(m.J);if(lt(C,"SID",m.M),lt(C,"RID",w),lt(C,"TYPE","terminate"),wi(m,C),w=new br(m,m.j,w),w.M=2,w.A=Ki(Rr(C)),C=!1,s.navigator&&s.navigator.sendBeacon)try{C=s.navigator.sendBeacon(w.A.toString(),"")}catch{}!C&&s.Image&&(new Image().src=w.A,C=!0),C||(w.g=Hf(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Ds(w)}Hs(m)}function mr(m){m.g&&(zs(m),m.g.cancel(),m.g=null)}function Ha(m){mr(m),m.v&&(s.clearTimeout(m.v),m.v=null),Ga(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&s.clearTimeout(m.m),m.m=null)}function Zi(m){if(!wl(m.h)&&!m.m){m.m=!0;var w=m.Ea;H||I(),W||(H(),W=!0),R.add(w,m),m.D=0}}function zf(m,w){return ks(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=w.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=So(f(m.Ea,m,w),$a(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const X=new br(this,this.j,m);let ee=this.o;if(this.U&&(ee?(ee=q(ee),xe(ee,this.U)):ee=this.U),this.u!==null||this.R||(X.J=ee,ee=null),this.S)e:{for(var w=0,C=0;C<this.i.length;C++){t:{var k=this.i[C];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(w+=k,w>4096){w=C;break e}if(w===4096||C===this.i.length-1){w=C+1;break e}}w=1e3}else w=1e3;w=Dl(this,X,w),C=Rr(this.J),lt(C,"RID",m),lt(C,"CVER",22),this.G&&lt(C,"X-HTTP-Session-Id",this.G),wi(this,C),ee&&(this.R?w="headers="+hi(Bf(ee))+"&"+w:this.u&&Ua(C,this.u,ee)),Va(this.h,X),this.Ra&&lt(C,"TYPE","init"),this.S?(lt(C,"$req",w),lt(C,"SID","null"),X.U=!0,qr(X,C,null)):qr(X,C,w),this.I=2}}else this.I==3&&(m?js(this,m):this.i.length==0||wl(this.h)||js(this))};function js(m,w){var C;w?C=w.l:C=m.V++;const k=Rr(m.J);lt(k,"SID",m.M),lt(k,"RID",C),lt(k,"AID",m.K),wi(m,k),m.u&&m.o&&Ua(k,m.u,m.o),C=new br(m,m.j,C,m.D+1),m.u===null&&(C.J=m.o),w&&(m.i=w.G.concat(m.i)),w=Dl(m,C,1e3),C.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Va(m.h,C),qr(C,k,w)}function wi(m,w){m.H&&me(m.H,function(C,k){lt(w,k,C)}),m.l&&me({},function(C,k){lt(w,k,C)})}function Dl(m,w,C){C=Math.min(m.i.length,C);const k=m.l?f(m.l.Ka,m.l,m):null;e:{var X=m.i;let He=-1;for(;;){const zt=["count="+C];He==-1?C>0?(He=X[0].g,zt.push("ofs="+He)):He=0:zt.push("ofs="+He);let dt=!0;for(let Kt=0;Kt<C;Kt++){var ee=X[Kt].g;const vr=X[Kt].map;if(ee-=He,ee<0)He=Math.max(0,X[Kt].g-100),dt=!1;else try{ee="req"+ee+"_"||"";try{var fe=vr instanceof Map?vr:Object.entries(vr);for(const[Ji,Ai]of fe){let Ti=Ai;u(Ai)&&(Ti=Ao(Ai)),zt.push(ee+Ji+"="+encodeURIComponent(Ti))}}catch(Ji){throw zt.push(ee+"type="+encodeURIComponent("_badmap")),Ji}}catch{k&&k(vr)}}if(dt){fe=zt.join("&");break e}}fe=void 0}return m=m.i.splice(0,C),w.G=m,fe}function On(m){if(!m.g&&!m.v){m.Y=1;var w=m.Da;H||I(),W||(H(),W=!0),R.add(w,m),m.A=0}}function Ei(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=So(f(m.Da,m),$a(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Mo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=So(f(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),mr(this),Mo(this))};function zs(m){m.B!=null&&(s.clearTimeout(m.B),m.B=null)}function Mo(m){m.g=new br(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var w=Rr(m.na);lt(w,"RID","rpc"),lt(w,"SID",m.M),lt(w,"AID",m.K),lt(w,"CI",m.F?"0":"1"),!m.F&&m.ia&&lt(w,"TO",m.ia),lt(w,"TYPE","xmlhttp"),wi(m,w),m.u&&m.o&&Ua(w,m.u,m.o),m.O&&(m.g.H=m.O);var C=m.g;m=m.ba,C.M=1,C.A=Ki(Rr(w)),C.u=null,C.R=!0,_l(C,m)}n.Va=function(){this.C!=null&&(this.C=null,mr(this),Ei(this),Vt(19))};function Ga(m){m.C!=null&&(s.clearTimeout(m.C),m.C=null)}function Wa(m,w){var C=null;if(m.g==w){Ga(m),zs(m),m.g=null;var k=2}else if(El(m.h,w))C=w.G,Ms(m.h,w),k=1;else return;if(m.I!=0){if(w.o)if(k==1){C=w.u?w.u.length:0,w=Date.now()-w.F;var X=m.D;k=Io(),jt(k,new vl(k,C)),Zi(m)}else On(m);else if(X=w.m,X==3||X==0&&w.X>0||!(k==1&&zf(m,w)||k==2&&Ei(m)))switch(C&&C.length>0&&(w=m.h,w.i=w.i.concat(C)),X){case 1:gr(m,5);break;case 4:gr(m,10);break;case 3:gr(m,6);break;default:gr(m,2)}}}function $a(m,w){let C=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(C*=2),C*w}function gr(m,w){if(m.j.info("Error code "+w),w==2){var C=f(m.bb,m),k=m.Ua;const X=!k;k=new di(k||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Ls(k,"https"),Ki(k),X?vi(k.toString(),C):yi(k.toString(),C)}else Vt(2);m.I=0,m.l&&m.l.pa(w),Hs(m),Ha(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Hs(m){if(m.I=0,m.ja=[],m.l){const w=hr(m.h);(w.length!=0||m.i.length!=0)&&(E(m.ja,w),E(m.ja,m.i),m.h.i.length=0,y(m.i),m.i.length=0),m.l.oa()}}function Ol(m,w,C){var k=C instanceof di?Rr(C):new di(C);if(k.g!="")w&&(k.g=w+"."+k.g),pi(k,k.u);else{var X=s.location;k=X.protocol,w=w?w+"."+X.hostname:X.hostname,X=+X.port;const ee=new di(null);k&&Ls(ee,k),w&&(ee.g=w),X&&pi(ee,X),C&&(ee.h=C),k=ee}return C=m.G,w=m.wa,C&&w&&lt(k,C,w),lt(k,"VER",m.ka),wi(m,k),k}function Hf(m,w,C){if(w&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=m.Aa&&!m.ma?new _t(new Xi({ab:C})):new _t(m.ma),w.Fa(m.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gf(){}n=Gf.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function qa(){}qa.prototype.g=function(m,w){return new En(m,w)};function En(m,w){qt.call(this),this.g=new ja(w),this.l=m,this.h=w&&w.messageUrlParams||null,m=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(m?m["X-WebChannel-Content-Type"]=w.messageContentType:m={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(m?m["X-WebChannel-Client-Profile"]=w.sa:m={"X-WebChannel-Client-Profile":w.sa}),this.g.U=m,(m=w&&w.Qb)&&!V(m)&&(this.g.u=m),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!V(w)&&(this.g.G=w,m=this.h,m!==null&&w in m&&(m=this.h,w in m&&delete m[w])),this.j=new Lo(this)}p(En,qt),En.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){za(this.g)},En.prototype.o=function(m){var w=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.v&&(C={},C.__data__=Ao(m),m=C);w.i.push(new Vp(w.Ya++,m)),w.I==3&&Zi(w)},En.prototype.N=function(){this.g.l=null,delete this.j,za(this.g),delete this.g,En.Z.N.call(this)};function Wf(m){Na.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var w=m.__sm__;if(w){e:{for(const C in w){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,w=w!==null&&m in w?w[m]:void 0),this.data=w}else this.data=m}p(Wf,Na);function $f(){gl.call(this),this.status=1}p($f,gl);function Lo(m){this.g=m}p(Lo,Gf),Lo.prototype.ra=function(){jt(this.g,"a")},Lo.prototype.qa=function(m){jt(this.g,new Wf(m))},Lo.prototype.pa=function(m){jt(this.g,new $f)},Lo.prototype.oa=function(){jt(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,dI=function(){return new qa},hI=function(){return Io()},fI=$r,Vm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,md=Ro,Po.COMPLETE="complete",cI=Po,Sf.EventType=Co,Co.OPEN="a",Co.CLOSE="b",Co.ERROR="c",Co.MESSAGE="d",qt.prototype.listen=qt.prototype.J,pc=Sf,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,lI=_t}).apply(typeof $h<"u"?$h:typeof self<"u"?self:typeof window<"u"?window:{});const Dw="@firebase/firestore",Ow="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Un.UNAUTHENTICATED=new Un(null),Un.GOOGLE_CREDENTIALS=new Un("google-credentials-uid"),Un.FIRST_PARTY=new Un("first-party-uid"),Un.MOCK_USER=new Un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let il="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=new ov("@firebase/firestore");function yu(){return wa.logLevel}function ve(n,...e){if(wa.logLevel<=Qe.DEBUG){const t=e.map(yv);wa.debug(`Firestore (${il}): ${n}`,...t)}}function vo(n,...e){if(wa.logLevel<=Qe.ERROR){const t=e.map(yv);wa.error(`Firestore (${il}): ${n}`,...t)}}function Hu(n,...e){if(wa.logLevel<=Qe.WARN){const t=e.map(yv);wa.warn(`Firestore (${il}): ${n}`,...t)}}function yv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,pI(n,r,t)}function pI(n,e,t){let r=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw vo(r),new Error(r)}function it(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||pI(e,i,r)}function ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends xo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class a5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Un.UNAUTHENTICATED)))}shutdown(){}}class u5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class l5{constructor(e){this.t=e,this.currentUser=Un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let o=new ki;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ki,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=o;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},u=c=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>u(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ki)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string",31837,{l:r}),new mI(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new Un(e)}}class c5{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class f5{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new c5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ur(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const r=o=>{o.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,ve("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new kw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new kw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=d5(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Ze(n,e){return n<e?-1:n>e?1:0}function Fm(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return B1(i)===B1(o)?Ze(i,o):B1(i)?1:-1}return Ze(n.length,e.length)}const p5=55296,m5=57343;function B1(n){const e=n.charCodeAt(0);return e>=p5&&e<=m5}function Gu(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="__name__";class Ri{constructor(e,t,r){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&De(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ri.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ri?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Ri.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Ze(e.length,t.length)}static compareSegments(e,t){const r=Ri.isNumericId(e),i=Ri.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Ri.extractNumericId(e).compare(Ri.extractNumericId(t)):Fm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fs.fromString(e.substring(4,e.length-2))}}class vt extends Ri{construct(e,t,r){return new vt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new vt(t)}static emptyPath(){return new vt([])}}const g5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends Ri{construct(e,t,r){return new Pn(e,t,r)}static isValidIdentifier(e){return g5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Mw}static keyField(){return new Pn([Mw])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new pe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new pe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(s=!s,i++):u!=="."||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new pe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(t)}static emptyPath(){return new Pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(vt.fromString(e))}static fromName(e){return new Re(vt.fromString(e).popFirst(5))}static empty(){return new Re(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(n,e,t){if(!t)throw new pe(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function v5(n,e,t,r){if(e===!0&&r===!0)throw new pe(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Lw(n){if(!Re.isDocumentKey(n))throw new pe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Vw(n){if(Re.isDocumentKey(n))throw new pe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function hp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De(12329,{type:typeof n})}function Ir(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hp(n);throw new pe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function y5(n,e){if(e<=0)throw new pe(re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(n,e){const t={typeString:n};return e&&(t.value=e),t}function hf(n,e){if(!vI(n))throw new pe(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new pe(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=-62135596800,Bw=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Bw);return new St(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Fw)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Bw}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:St._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hf(e,St._jsonSchema))return new St(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Fw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:Jt("string",St._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new St(0,0))}static max(){return new Fe(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=-1;function _5(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Fe.fromTimestamp(r===1e9?new St(t+1,0):new St(t,r));return new ys(i,Re.empty(),e)}function x5(n){return new ys(n.readTime,n.key,Gc)}class ys{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ys(Fe.min(),Re.empty(),Gc)}static max(){return new ys(Fe.max(),Re.empty(),Gc)}}function w5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Re.comparator(n.documentKey,e.documentKey),t!==0?t:Ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==E5)throw n;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,r)=>{t(e)}))}static reject(e){return new se(((t,r)=>{r(e)}))}static waitFor(e){return new se(((t,r)=>{let i=0,o=0,s=!1;e.forEach((u=>{++i,u.next((()=>{++o,s&&o===i&&t()}),(c=>r(c)))})),s=!0,o===i&&t()}))}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next((i=>i?se.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,o)=>{r.push(t.call(this,i,o))})),this.waitFor(r)}static mapArray(e,t){return new se(((r,i)=>{const o=e.length,s=new Array(o);let u=0;for(let c=0;c<o;c++){const f=c;t(e[f]).next((h=>{s[f]=h,++u,u===o&&r(s)}),(h=>i(h)))}}))}static doWhile(e,t){return new se(((r,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):r()};o()}))}}function T5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function sl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}dp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=-1;function df(n){return n==null}function Ud(n){return n===0&&1/n==-1/0}function C5(n){return typeof n=="number"&&Number.isInteger(n)&&!Ud(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="";function I5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Uw(e)),e=S5(n.get(t),e);return Uw(e)}function S5(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case yI:t+="";break;default:t+=o}}return t}function Uw(n){return n+yI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Is(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _I(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t){this.comparator=e,this.root=t||bn.EMPTY}insert(e,t){return new Mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qh(this.root,e,this.comparator,!0)}}class qh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??bn.RED,this.left=i??bn.EMPTY,this.right=o??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new bn(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return bn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zw(this.data.getIterator())}getIteratorFrom(e){return new zw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new cn(this.comparator);return t.data=e,t}}class zw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.fields=e,e.sort(Pn.comparator)}static empty(){return new Cr([])}unionWith(e){let t=new cn(Pn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Cr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gu(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xI("Invalid base64 string: "+o):o}})(e);return new Dn(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new Dn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dn.EMPTY_BYTE_STRING=new Dn("");const b5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(n){if(it(!!n,39018),typeof n=="string"){let e=0;const t=b5.exec(n);if(it(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wt(n.seconds),nanos:Wt(n.nanos)}}function Wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xs(n){return typeof n=="string"?Dn.fromBase64String(n):Dn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="server_timestamp",EI="__type__",AI="__previous_value__",TI="__local_write_time__";function wv(n){return(n?.mapValue?.fields||{})[EI]?.stringValue===wI}function pp(n){const e=n.mapValue.fields[AI];return wv(e)?pp(e):e}function Wc(n){const e=_s(n.mapValue.fields[TI].timestampValue);return new St(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,t,r,i,o,s,u,c,f,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=h}}const jd="(default)";class $c{constructor(e,t){this.projectId=e,this.database=t||jd}static empty(){return new $c("","")}get isDefaultDatabase(){return this.database===jd}isEqual(e){return e instanceof $c&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="__type__",P5="__max__",Kh={mapValue:{}},II="__vector__",zd="value";function ws(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wv(n)?4:D5(n)?9007199254740991:N5(n)?10:11:De(28295,{value:n})}function Bi(n,e){if(n===e)return!0;const t=ws(n);if(t!==ws(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wc(n).isEqual(Wc(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=_s(i.timestampValue),u=_s(o.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return xs(i.bytesValue).isEqual(xs(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Wt(i.geoPointValue.latitude)===Wt(o.geoPointValue.latitude)&&Wt(i.geoPointValue.longitude)===Wt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Wt(i.integerValue)===Wt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Wt(i.doubleValue),u=Wt(o.doubleValue);return s===u?Ud(s)===Ud(u):isNaN(s)&&isNaN(u)}return!1})(n,e);case 9:return Gu(n.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return(function(i,o){const s=i.mapValue.fields||{},u=o.mapValue.fields||{};if(jw(s)!==jw(u))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(u[c]===void 0||!Bi(s[c],u[c])))return!1;return!0})(n,e);default:return De(52216,{left:n})}}function qc(n,e){return(n.values||[]).find((t=>Bi(t,e)))!==void 0}function Wu(n,e){if(n===e)return 0;const t=ws(n),r=ws(e);if(t!==r)return Ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ze(n.booleanValue,e.booleanValue);case 2:return(function(o,s){const u=Wt(o.integerValue||o.doubleValue),c=Wt(s.integerValue||s.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1})(n,e);case 3:return Hw(n.timestampValue,e.timestampValue);case 4:return Hw(Wc(n),Wc(e));case 5:return Fm(n.stringValue,e.stringValue);case 6:return(function(o,s){const u=xs(o),c=xs(s);return u.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){const u=o.split("/"),c=s.split("/");for(let f=0;f<u.length&&f<c.length;f++){const h=Ze(u[f],c[f]);if(h!==0)return h}return Ze(u.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){const u=Ze(Wt(o.latitude),Wt(s.latitude));return u!==0?u:Ze(Wt(o.longitude),Wt(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Gw(n.arrayValue,e.arrayValue);case 10:return(function(o,s){const u=o.fields||{},c=s.fields||{},f=u[zd]?.arrayValue,h=c[zd]?.arrayValue,p=Ze(f?.values?.length||0,h?.values?.length||0);return p!==0?p:Gw(f,h)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Kh.mapValue&&s===Kh.mapValue)return 0;if(o===Kh.mapValue)return 1;if(s===Kh.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),f=s.fields||{},h=Object.keys(f);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const v=Fm(c[p],h[p]);if(v!==0)return v;const y=Wu(u[c[p]],f[h[p]]);if(y!==0)return y}return Ze(c.length,h.length)})(n.mapValue,e.mapValue);default:throw De(23264,{he:t})}}function Hw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ze(n,e);const t=_s(n),r=_s(e),i=Ze(t.seconds,r.seconds);return i!==0?i:Ze(t.nanos,r.nanos)}function Gw(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Wu(t[i],r[i]);if(o)return o}return Ze(t.length,r.length)}function $u(n){return Bm(n)}function Bm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=_s(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return xs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Re.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=Bm(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Bm(t.fields[s])}`;return i+"}"})(n.mapValue):De(61005,{value:n})}function gd(n){switch(ws(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pp(n);return e?16+gd(e):16;case 5:return 2*n.stringValue.length;case 6:return xs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+gd(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Is(r.fields,((o,s)=>{i+=o.length+gd(s)})),i})(n.mapValue);default:throw De(13486,{value:n})}}function Ww(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Um(n){return!!n&&"integerValue"in n}function Ev(n){return!!n&&"arrayValue"in n}function $w(n){return!!n&&"nullValue"in n}function qw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vd(n){return!!n&&"mapValue"in n}function N5(n){return(n?.mapValue?.fields||{})[CI]?.stringValue===II}function Rc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Is(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Rc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rc(n.arrayValue.values[t]);return e}return{...n}}function D5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===P5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.value=e}static empty(){return new Yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rc(t)}setAll(e){let t=Pn.emptyPath(),r={},i=[];e.forEach(((s,u)=>{if(!t.isImmediateParentOf(u)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=u.popLast()}s?r[u.lastSegment()]=Rc(s):i.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());vd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];vd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Is(t,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new Yn(Rc(this.value))}}function SI(n){const e=[];return Is(n.fields,((t,r)=>{const i=new Pn([t]);if(vd(r)){const o=SI(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)})),new Cr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,t,r,i,o,s,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=u}static newInvalidDocument(e){return new yn(e,0,Fe.min(),Fe.min(),Fe.min(),Yn.empty(),0)}static newFoundDocument(e,t,r,i){return new yn(e,1,t,Fe.min(),r,i,0)}static newNoDocument(e,t){return new yn(e,2,t,Fe.min(),Fe.min(),Yn.empty(),0)}static newUnknownDocument(e,t){return new yn(e,3,t,Fe.min(),Fe.min(),Yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,t){this.position=e,this.inclusive=t}}function Kw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Re.comparator(Re.fromName(s.referenceValue),t.key):r=Wu(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Xw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t="asc"){this.field=e,this.dir=t}}function O5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{}class Zt extends bI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new M5(e,t,r):t==="array-contains"?new F5(e,r):t==="in"?new B5(e,r):t==="not-in"?new U5(e,r):t==="array-contains-any"?new j5(e,r):new Zt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new L5(e,r):new V5(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wu(t,this.value)):t!==null&&ws(this.value)===ws(t)&&this.matchesComparison(Wu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class li extends bI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new li(e,t)}matches(e){return RI(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function RI(n){return n.op==="and"}function PI(n){return k5(n)&&RI(n)}function k5(n){for(const e of n.filters)if(e instanceof li)return!1;return!0}function jm(n){if(n instanceof Zt)return n.field.canonicalString()+n.op.toString()+$u(n.value);if(PI(n))return n.filters.map((e=>jm(e))).join(",");{const e=n.filters.map((t=>jm(t))).join(",");return`${n.op}(${e})`}}function NI(n,e){return n instanceof Zt?(function(r,i){return i instanceof Zt&&r.op===i.op&&r.field.isEqual(i.field)&&Bi(r.value,i.value)})(n,e):n instanceof li?(function(r,i){return i instanceof li&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,s,u)=>o&&NI(s,i.filters[u])),!0):!1})(n,e):void De(19439)}function DI(n){return n instanceof Zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${$u(t.value)}`})(n):n instanceof li?(function(t){return t.op.toString()+" {"+t.getFilters().map(DI).join(" ,")+"}"})(n):"Filter"}class M5 extends Zt{constructor(e,t,r){super(e,t,r),this.key=Re.fromName(r.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class L5 extends Zt{constructor(e,t){super(e,"in",t),this.keys=OI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class V5 extends Zt{constructor(e,t){super(e,"not-in",t),this.keys=OI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function OI(n,e){return(e.arrayValue?.values||[]).map((t=>Re.fromName(t.referenceValue)))}class F5 extends Zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ev(t)&&qc(t.arrayValue,this.value)}}class B5 extends Zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&qc(this.value.arrayValue,t)}}class U5 extends Zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!qc(this.value.arrayValue,t)}}class j5 extends Zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ev(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>qc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,t=null,r=[],i=[],o=null,s=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=u,this.Te=null}}function Yw(n,e=null,t=[],r=[],i=null,o=null,s=null){return new z5(n,e,t,r,i,o,s)}function Av(n){const e=ze(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>jm(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),df(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>$u(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>$u(r))).join(",")),e.Te=t}return e.Te}function Tv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!O5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!NI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Xw(n.startAt,e.startAt)&&Xw(n.endAt,e.endAt)}function zm(n){return Re.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,t=null,r=[],i=[],o=null,s="F",u=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function H5(n,e,t,r,i,o,s,u){return new al(n,e,t,r,i,o,s,u)}function mp(n){return new al(n)}function Qw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kI(n){return n.collectionGroup!==null}function Pc(n){const e=ze(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let u=new cn(Pn.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Kc(o,r))})),t.has(Pn.keyField().canonicalString())||e.Ie.push(new Kc(Pn.keyField(),r))}return e.Ie}function Mi(n){const e=ze(n);return e.Ee||(e.Ee=G5(e,Pc(n))),e.Ee}function G5(n,e){if(n.limitType==="F")return Yw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Kc(i.field,o)}));const t=n.endAt?new Hd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Hd(n.startAt.position,n.startAt.inclusive):null;return Yw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Hm(n,e){const t=n.filters.concat([e]);return new al(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Gd(n,e,t){return new al(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gp(n,e){return Tv(Mi(n),Mi(e))&&n.limitType===e.limitType}function MI(n){return`${Av(Mi(n))}|lt:${n.limitType}`}function _u(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>DI(i))).join(", ")}]`),df(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>$u(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>$u(i))).join(",")),`Target(${r})`})(Mi(n))}; limitType=${n.limitType})`}function vp(n,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Re.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(const o of Pc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,u,c){const f=Kw(s,u,c);return s.inclusive?f<=0:f<0})(r.startAt,Pc(r),i)||r.endAt&&!(function(s,u,c){const f=Kw(s,u,c);return s.inclusive?f>=0:f>0})(r.endAt,Pc(r),i))})(n,e)}function W5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LI(n){return(e,t)=>{let r=!1;for(const i of Pc(n)){const o=$5(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function $5(n,e,t){const r=n.field.isKeyField()?Re.comparator(e.key,t.key):(function(o,s,u){const c=s.data.field(o),f=u.data.field(o);return c!==null&&f!==null?Wu(c,f):De(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return De(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Is(this.inner,((t,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return _I(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=new Mt(Re.comparator);function yo(){return q5}const VI=new Mt(Re.comparator);function mc(...n){let e=VI;for(const t of n)e=e.insert(t.key,t);return e}function FI(n){let e=VI;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ha(){return Nc()}function BI(){return Nc()}function Nc(){return new Sa((n=>n.toString()),((n,e)=>n.isEqual(e)))}const K5=new Mt(Re.comparator),X5=new cn(Re.comparator);function Je(...n){let e=X5;for(const t of n)e=e.add(t);return e}const Y5=new cn(Ze);function Q5(){return Y5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ud(e)?"-0":e}}function UI(n){return{integerValue:""+n}}function jI(n,e){return C5(e)?UI(e):Cv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(){this._=void 0}}function Z5(n,e,t){return n instanceof Xc?(function(i,o){const s={fields:{[EI]:{stringValue:wI},[TI]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&wv(o)&&(o=pp(o)),o&&(s.fields[AI]=o),{mapValue:s}})(t,e):n instanceof Yc?HI(n,e):n instanceof Qc?GI(n,e):(function(i,o){const s=zI(i,o),u=Zw(s)+Zw(i.Ae);return Um(s)&&Um(i.Ae)?UI(u):Cv(i.serializer,u)})(n,e)}function J5(n,e,t){return n instanceof Yc?HI(n,e):n instanceof Qc?GI(n,e):t}function zI(n,e){return n instanceof Zc?(function(r){return Um(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Xc extends yp{}class Yc extends yp{constructor(e){super(),this.elements=e}}function HI(n,e){const t=WI(e);for(const r of n.elements)t.some((i=>Bi(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Qc extends yp{constructor(e){super(),this.elements=e}}function GI(n,e){let t=WI(e);for(const r of n.elements)t=t.filter((i=>!Bi(i,r)));return{arrayValue:{values:t}}}class Zc extends yp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Zw(n){return Wt(n.integerValue||n.doubleValue)}function WI(n){return Ev(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,t){this.field=e,this.transform=t}}function eM(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Yc&&i instanceof Yc||r instanceof Qc&&i instanceof Qc?Gu(r.elements,i.elements,Bi):r instanceof Zc&&i instanceof Zc?Bi(r.Ae,i.Ae):r instanceof Xc&&i instanceof Xc})(n.transform,e.transform)}class tM{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class _p{}function qI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new xp(n.key,jn.none()):new pf(n.key,n.data,jn.none());{const t=n.data,r=Yn.empty();let i=new cn(Pn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ss(n.key,r,new Cr(i.toArray()),jn.none())}}function nM(n,e,t){n instanceof pf?(function(i,o,s){const u=i.value.clone(),c=eE(i.fieldTransforms,o,s.transformResults);u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):n instanceof Ss?(function(i,o,s){if(!yd(i.precondition,o))return void o.convertToUnknownDocument(s.version);const u=eE(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(KI(i)),c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Dc(n,e,t,r){return n instanceof pf?(function(o,s,u,c){if(!yd(o.precondition,s))return u;const f=o.value.clone(),h=tE(o.fieldTransforms,c,s);return f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ss?(function(o,s,u,c){if(!yd(o.precondition,s))return u;const f=tE(o.fieldTransforms,c,s),h=s.data;return h.setAll(KI(o)),h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((p=>p.field)))})(n,e,t,r):(function(o,s,u){return yd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u})(n,e,t)}function rM(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=zI(r.transform,i||null);o!=null&&(t===null&&(t=Yn.empty()),t.set(r.field,o))}return t||null}function Jw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gu(r,i,((o,s)=>eM(o,s)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class pf extends _p{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ss extends _p{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function KI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function eE(n,e,t){const r=new Map;it(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,u=e.data.field(o.field);r.set(o.field,J5(s,u,t[i]))}return r}function tE(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,Z5(o,s,e))}return r}class xp extends _p{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XI extends _p{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&nM(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Dc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Dc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=BI();return this.mutations.forEach((i=>{const o=e.get(i.key),s=o.overlayedDocument;let u=this.applyToLocalView(s,o.mutatedFields);u=t.has(i.key)?null:u;const c=qI(s,u);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Fe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Je())}isEqual(e){return this.batchId===e.batchId&&Gu(this.mutations,e.mutations,((t,r)=>Jw(t,r)))&&Gu(this.baseMutations,e.baseMutations,((t,r)=>Jw(t,r)))}}class Iv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){it(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return K5})();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new Iv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,nt;function YI(n){switch(n){case re.OK:return De(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return De(15467,{code:n})}}function QI(n){if(n===void 0)return vo("GRPC error has no .code"),re.UNKNOWN;switch(n){case Yt.OK:return re.OK;case Yt.CANCELLED:return re.CANCELLED;case Yt.UNKNOWN:return re.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return re.INTERNAL;case Yt.UNAVAILABLE:return re.UNAVAILABLE;case Yt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Yt.NOT_FOUND:return re.NOT_FOUND;case Yt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Yt.ABORTED:return re.ABORTED;case Yt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Yt.DATA_LOSS:return re.DATA_LOSS;default:return De(39323,{code:n})}}(nt=Yt||(Yt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=new fs([4294967295,4294967295],0);function nE(n){const e=aM().encode(n),t=new uI;return t.update(e),new Uint8Array(t.digest())}function rE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new fs([t,r],0),new fs([i,o],0)]}class Sv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gc(`Invalid padding: ${t}`);if(r<0)throw new gc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new gc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=fs.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(fs.fromNumber(r)));return i.compare(uM)===1&&(i=new fs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=nE(e),[r,i]=rE(t);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new Sv(o,i,t);return r.forEach((u=>s.insert(u))),s}insert(e){if(this.ge===0)return;const t=nE(e),[r,i]=rE(t);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);this.Se(s)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,mf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new wp(Fe.min(),i,new Mt(Ze),yo(),Je())}}class mf{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new mf(r,t,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class ZI{constructor(e,t){this.targetId=e,this.Ce=t}}class JI{constructor(e,t,r=Dn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class iE{constructor(){this.ve=0,this.Fe=oE(),this.Me=Dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),t=Je(),r=Je();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:De(38017,{changeType:o})}})),new mf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=oE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lM{constructor(e){this.Ge=e,this.ze=new Map,this.je=yo(),this.Je=Xh(),this.He=Xh(),this.Ye=new Mt(Ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(zm(o))if(r===0){const s=new Re(o.path);this.et(t,s,yn.newNoDocument(s,Fe.min()))}else it(r===1,20013,{expectedCount:r});else{const s=this._t(t);if(s!==r){const u=this.ut(e),c=u?this.ct(u,e,s):1;if(c!==0){this.it(t);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,u;try{s=xs(r).toUint8Array()}catch(c){if(c instanceof xI)return Hu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Sv(s,i,o)}catch(c){return Hu(c instanceof gc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((o=>{const s=this.Ge.ht(),u=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,s)=>{const u=this.ot(s);if(u){if(o.current&&zm(u.target)){const c=new Re(u.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,yn.newNoDocument(c,e))}o.Be&&(t.set(s,o.ke()),o.qe())}}));let r=Je();this.He.forEach(((o,s)=>{let u=!0;s.forEachWhile((c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.je.forEach(((o,s)=>s.setReadTime(e)));const i=new wp(e,t,this.Ye,this.je,r);return this.je=yo(),this.Je=Xh(),this.He=Xh(),this.Ye=new Mt(Ze),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new iE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new cn(Ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new cn(Ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new iE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Xh(){return new Mt(Re.comparator)}function oE(){return new Mt(Re.comparator)}const cM={asc:"ASCENDING",desc:"DESCENDING"},fM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hM={and:"AND",or:"OR"};class dM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gm(n,e){return n.useProto3Json||df(e)?e:{value:e}}function Wd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function pM(n,e){return Wd(n,e.toTimestamp())}function Sr(n){return it(!!n,49232),Fe.fromTimestamp((function(t){const r=_s(t);return new St(r.seconds,r.nanos)})(n))}function bv(n,e){return Wm(n,e).canonicalString()}function Wm(n,e){const t=(function(i){return new vt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function tS(n){const e=vt.fromString(n);return it(aS(e),10190,{key:e.toString()}),e}function $d(n,e){return bv(n.databaseId,e.path)}function Oc(n,e){const t=tS(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Re(rS(t))}function nS(n,e){return bv(n.databaseId,e)}function mM(n){const e=tS(n);return e.length===4?vt.emptyPath():rS(e)}function $m(n){return new vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rS(n){return it(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function sE(n,e,t){return{name:$d(n,e),fields:t.value.mapValue.fields}}function gM(n,e){return"found"in e?(function(r,i){it(!!i.found,43571),i.found.name,i.found.updateTime;const o=Oc(r,i.found.name),s=Sr(i.found.updateTime),u=i.found.createTime?Sr(i.found.createTime):Fe.min(),c=new Yn({mapValue:{fields:i.found.fields}});return yn.newFoundDocument(o,s,u,c)})(n,e):"missing"in e?(function(r,i){it(!!i.missing,3894),it(!!i.readTime,22933);const o=Oc(r,i.missing),s=Sr(i.readTime);return yn.newNoDocument(o,s)})(n,e):De(7234,{result:e})}function vM(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:De(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,h){return f.useProto3Json?(it(h===void 0||typeof h=="string",58123),Dn.fromBase64String(h||"")):(it(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Dn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&(function(f){const h=f.code===void 0?re.UNKNOWN:QI(f.code);return new pe(h,f.message||"")})(s);t=new JI(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Oc(n,r.document.name),o=Sr(r.document.updateTime),s=r.document.createTime?Sr(r.document.createTime):Fe.min(),u=new Yn({mapValue:{fields:r.document.fields}}),c=yn.newFoundDocument(i,o,s,u),f=r.targetIds||[],h=r.removedTargetIds||[];t=new _d(f,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Oc(n,r.document),o=r.readTime?Sr(r.readTime):Fe.min(),s=yn.newNoDocument(i,o),u=r.removedTargetIds||[];t=new _d([],u,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Oc(n,r.document),o=r.removedTargetIds||[];t=new _d([],o,i,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new sM(i,o),u=r.targetId;t=new ZI(u,s)}}return t}function iS(n,e){let t;if(e instanceof pf)t={update:sE(n,e.key,e.value)};else if(e instanceof xp)t={delete:$d(n,e.key)};else if(e instanceof Ss)t={update:sE(n,e.key,e.data),updateMask:IM(e.fieldMask)};else{if(!(e instanceof XI))return De(16599,{Vt:e.type});t={verify:$d(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,s){const u=s.transform;if(u instanceof Xc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Yc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Qc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Zc)return{fieldPath:s.field.canonicalString(),increment:u.Ae};throw De(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:pM(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:De(27497)})(n,e.precondition)),t}function yM(n,e){return n&&n.length>0?(it(e!==void 0,14353),n.map((t=>(function(i,o){let s=i.updateTime?Sr(i.updateTime):Sr(o);return s.isEqual(Fe.min())&&(s=Sr(o)),new tM(s,i.transformResults||[])})(t,e)))):[]}function _M(n,e){return{documents:[nS(n,e.path)]}}function xM(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=nS(n,i);const o=(function(f){if(f.length!==0)return sS(li.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const s=(function(f){if(f.length!==0)return f.map((h=>(function(v){return{field:xu(v.field),direction:AM(v.dir)}})(h)))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=Gm(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:i}}function wM(n){let e=mM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){it(r===1,65062);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){const v=oS(p);return v instanceof li&&PI(v)?v.getFilters():[v]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map((v=>(function(E){return new Kc(wu(E.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(p){let v;return v=typeof p=="object"?p.value:p,df(v)?null:v})(t.limit));let c=null;t.startAt&&(c=(function(p){const v=!!p.before,y=p.values||[];return new Hd(y,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(p){const v=!p.before,y=p.values||[];return new Hd(y,v)})(t.endAt)),H5(e,i,s,o,u,"F",c,f)}function EM(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function oS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=wu(t.unaryFilter.field);return Zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=wu(t.unaryFilter.field);return Zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=wu(t.unaryFilter.field);return Zt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=wu(t.unaryFilter.field);return Zt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Zt.create(wu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return li.create(t.compositeFilter.filters.map((r=>oS(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(t.compositeFilter.op))})(n):De(30097,{filter:n})}function AM(n){return cM[n]}function TM(n){return fM[n]}function CM(n){return hM[n]}function xu(n){return{fieldPath:n.canonicalString()}}function wu(n){return Pn.fromServerFormat(n.fieldPath)}function sS(n){return n instanceof Zt?(function(t){if(t.op==="=="){if(qw(t.value))return{unaryFilter:{field:xu(t.field),op:"IS_NAN"}};if($w(t.value))return{unaryFilter:{field:xu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(qw(t.value))return{unaryFilter:{field:xu(t.field),op:"IS_NOT_NAN"}};if($w(t.value))return{unaryFilter:{field:xu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xu(t.field),op:TM(t.op),value:t.value}}})(n):n instanceof li?(function(t){const r=t.getFilters().map((i=>sS(i)));return r.length===1?r[0]:{compositeFilter:{op:CM(t.op),filters:r}}})(n):De(54877,{filter:n})}function IM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function aS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,t,r,i,o=Fe.min(),s=Fe.min(),u=Dn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.yt=e}}function bM(n){const e=wM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Gd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(){this.Cn=new PM}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(ys.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(ys.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class PM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new cn(vt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new cn(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uS=41943040;class sr{static withCacheSize(e){return new sr(e,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr.DEFAULT_COLLECTION_PERCENTILE=10,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sr.DEFAULT=new sr(uS,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sr.DISABLED=new sr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new qu(0)}static cr(){return new qu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="LruGarbageCollector",NM=1048576;function lE([n,e],[t,r]){const i=Ze(n,t);return i===0?Ze(e,r):i}class DM{constructor(e){this.Ir=e,this.buffer=new cn(lE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();lE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class OM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(uE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){sl(t)?ve(uE,"Ignoring IndexedDB error during garbage collection: ",t):await ol(t)}await this.Vr(3e5)}))}}class kM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(dp.ce);const r=new DM(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(aE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,u,c,f;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(r=p,u=Date.now(),this.removeTargets(e,r,t)))).next((p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(f=Date.now(),yu()<=Qe.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(u-s)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${p} documents in `+(f-c)+`ms
Total Duration: ${f-h}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p}))))}}function MM(n,e){return new kM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(){this.changes=new Sa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Dc(r.mutation,i,Cr.empty(),St.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Je()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Je()){const i=ha();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((o=>{let s=mc();return o.forEach(((u,c)=>{s=s.insert(u,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,t){const r=ha();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Je())))}populateOverlays(e,t,r){const i=[];return r.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((s,u)=>{t.set(s,u)}))}))}computeViews(e,t,r,i){let o=yo();const s=Nc(),u=(function(){return Nc()})();return t.forEach(((c,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof Ss)?o=o.insert(f.key,f):h!==void 0?(s.set(f.key,h.mutation.getFieldMask()),Dc(h.mutation,f,h.mutation.getFieldMask(),St.now())):s.set(f.key,Cr.empty())})),this.recalculateAndSaveOverlays(e,o).next((c=>(c.forEach(((f,h)=>s.set(f,h))),t.forEach(((f,h)=>u.set(f,new VM(h,s.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=Nc();let i=new Mt(((s,u)=>s-u)),o=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((s=>{for(const u of s)u.keys().forEach((c=>{const f=t.get(c);if(f===null)return;let h=r.get(c)||Cr.empty();h=u.applyToLocalView(f,h),r.set(c,h);const p=(i.get(u.batchId)||Je()).add(c);i=i.insert(u.batchId,p)}))})).next((()=>{const s=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),f=c.key,h=c.value,p=BI();h.forEach((v=>{if(!o.has(v)){const y=qI(t.get(v),r.get(v));y!==null&&p.set(v,y),o=o.add(v)}})),s.push(this.documentOverlayCache.saveOverlays(e,f,p))}return se.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return Re.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):se.resolve(ha());let u=Gc,c=o;return s.next((f=>se.forEach(f,((h,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),o.get(h)?se.resolve():this.remoteDocumentCache.getEntry(e,h).next((v=>{c=c.insert(h,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,c,f,Je()))).next((h=>({batchId:u,changes:FI(h)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next((r=>{let i=mc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=mc();return this.indexManager.getCollectionParents(e,o).next((u=>se.forEach(u,(c=>{const f=(function(p,v){return new al(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((h=>{h.forEach(((p,v)=>{s=s.insert(p,v)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i)))).next((s=>{o.forEach(((c,f)=>{const h=f.getKey();s.get(h)===null&&(s=s.insert(h,yn.newInvalidDocument(h)))}));let u=mc();return s.forEach(((c,f)=>{const h=o.get(c);h!==void 0&&Dc(h.mutation,f,Cr.empty(),St.now()),vp(t,f)&&(u=u.insert(c,f))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Sr(i.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:bM(i.bundledQuery),readTime:Sr(i.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this.overlays=new Mt(Re.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ha();return se.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,o)=>{this.St(e,t,o)})),se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const i=ha(),o=t.length+1,s=new Re(t.child("")),u=this.overlays.getIteratorFrom(s);for(;u.hasNext();){const c=u.getNext().value,f=c.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Mt(((f,h)=>f-h));const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let h=o.get(f.largestBatchId);h===null&&(h=ha(),o=o.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const u=ha(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,h)=>u.set(f,h))),!(u.size()>=i)););return se.resolve(u)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new oM(t,r));let o=this.qr.get(t);o===void 0&&(o=Je(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(){this.sessionToken=Dn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(){this.Qr=new cn(vn.$r),this.Ur=new cn(vn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new vn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new vn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Re(new vt([])),r=new vn(t,e),i=new vn(t,e+1),o=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),o.push(s.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Re(new vt([])),r=new vn(t,e),i=new vn(t,e+1);let o=Je();return this.Ur.forEachInRange([r,i],(s=>{o=o.add(s.key)})),o}containsKey(e){const t=new vn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class vn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Re.comparator(e.key,t.key)||Ze(e.Yr,t.Yr)}static Kr(e,t){return Ze(e.Yr,t.Yr)||Re.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new cn(vn.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new iM(o,t,r,i);this.mutationQueue.push(s);for(const u of i)this.Zr=this.Zr.add(new vn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return se.resolve(s)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?xv:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vn(t,0),i=new vn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(s=>{const u=this.Xr(s.Yr);o.push(u)})),se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cn(Ze);return t.forEach((i=>{const o=new vn(i,0),s=new vn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],(u=>{r=r.add(u.Yr)}))})),se.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Re.isDocumentKey(o)||(o=o.child(""));const s=new vn(new Re(o),0);let u=new cn(Ze);return this.Zr.forEachWhile((c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(c.Yr)),!0)}),s),se.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){it(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return se.forEach(t.mutations,(i=>{const o=new vn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new vn(t,0),i=this.Zr.firstAfterOrEqual(r);return se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.ri=e,this.docs=(function(){return new Mt(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():yn.newInvalidDocument(t))}getEntries(e,t){let r=yo();return t.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():yn.newInvalidDocument(i))})),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=yo();const s=t.path,u=new Re(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:h}}=c.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||w5(x5(h),r)<=0||(i.has(h.key)||vp(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,r,i){De(9500)}ii(e,t){return se.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new GM(this)}getSize(e){return se.resolve(this.size)}}class GM extends LM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.persistence=e,this.si=new Sa((t=>Av(t)),Tv),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.oi=0,this._i=new Rv,this.targetCount=0,this.ai=qu.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new qu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach(((s,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),se.waitFor(o).next((()=>i))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),se.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((s=>{o.push(i.markPotentiallyOrphaned(e,s))})),se.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,t){this.ui={},this.overlays={},this.ci=new dp(0),this.li=!1,this.li=!0,this.hi=new jM,this.referenceDelegate=e(this),this.Pi=new WM(this),this.indexManager=new RM,this.remoteDocumentCache=(function(i){return new HM(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new SM(t),this.Ii=new BM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new zM(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ve("MemoryPersistence","Starting transaction:",e);const i=new $M(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,t){return se.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class $M extends A5{constructor(e){super(),this.currentSequenceNumber=e}}class Pv{constructor(e){this.persistence=e,this.Ri=new Rv,this.Vi=null}static mi(e){return new Pv(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(r=>{const i=Re.fromPath(r);return this.gi(e,i).next((o=>{o||t.removeEntry(i,Fe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class qd{constructor(e,t){this.persistence=e,this.pi=new Sa((r=>I5(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=MM(this,t)}static mi(e,t){return new qd(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?se.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,t).next((u=>{u||(r++,o.removeEntry(s,Fe.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),se.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gd(e.data.value)),t}br(e,t,r){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return se.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Je(),i=Je();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Nv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return j6()?8:T5(Hn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next((s=>{o.result=s})).next((()=>{if(!o.result)return this.ws(e,t,i,r).next((s=>{o.result=s}))})).next((()=>{if(o.result)return;const s=new qM;return this.Ss(e,t,s).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,s,u.size)}))})).next((()=>o.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(yu()<=Qe.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",_u(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(yu()<=Qe.DEBUG&&ve("QueryEngine","Query:",_u(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(yu()<=Qe.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",_u(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(t))):se.resolve())}ys(e,t){if(Qw(t))return se.resolve(null);let r=Mi(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Gd(t,null,"F"),r=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const s=Je(...o);return this.ps.getDocuments(e,s).next((u=>this.indexManager.getMinOffset(e,r).next((c=>{const f=this.Ds(t,u);return this.Cs(t,f,s,c.readTime)?this.ys(e,Gd(t,null,"F")):this.vs(e,f,t,c)}))))})))))}ws(e,t,r,i){return Qw(t)||i.isEqual(Fe.min())?se.resolve(null):this.ps.getDocuments(e,r).next((o=>{const s=this.Ds(t,o);return this.Cs(t,s,r,i)?se.resolve(null):(yu()<=Qe.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_u(t)),this.vs(e,s,t,_5(i,Gc)).next((u=>u)))}))}Ds(e,t){let r=new cn(LI(e));return t.forEach(((i,o)=>{vp(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return yu()<=Qe.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",_u(t)),this.ps.getDocumentsMatchingQuery(e,t,ys.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(t.forEach((s=>{o=o.insert(s.key,s)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="LocalStore",XM=3e8;class YM{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Mt(Ze),this.xs=new Sa((o=>Av(o)),Tv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function QM(n,e,t,r){return new YM(n,e,t,r)}async function cS(n,e){const t=ze(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const s=[],u=[];let c=Je();for(const f of i){s.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}for(const f of o){u.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next((f=>({Ls:f,removedBatchIds:s,addedBatchIds:u})))}))}))}function ZM(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,c,f,h){const p=f.batch,v=p.keys();let y=se.resolve();return v.forEach((E=>{y=y.next((()=>h.getEntry(c,E))).next((A=>{const T=f.docVersions.get(E);it(T!==null,48541),A.version.compareTo(T)<0&&(p.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),h.addEntry(A)))}))})),y.next((()=>u.mutationQueue.removeMutationBatch(c,p)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let c=Je();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(c=c.add(u.batch.mutations[f].key));return c})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function fS(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function JM(n,e){const t=ze(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const u=[];e.targetChanges.forEach(((h,p)=>{const v=i.get(p);if(!v)return;u.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,p).next((()=>t.Pi.addMatchingKeys(o,h.addedDocuments,p))));let y=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Dn.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(A,T,N){return A.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=XM?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(v,y,h)&&u.push(t.Pi.updateTargetData(o,y))}));let c=yo(),f=Je();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))})),u.push(e9(o,s,e.documentUpdates).next((h=>{c=h.ks,f=h.qs}))),!r.isEqual(Fe.min())){const h=t.Pi.getLastRemoteSnapshotVersion(o).next((p=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(h)}return se.waitFor(u).next((()=>s.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,c,f))).next((()=>c))})).then((o=>(t.Ms=i,o)))}function e9(n,e,t){let r=Je(),i=Je();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let s=yo();return t.forEach(((u,c)=>{const f=o.get(u);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(Fe.min())?(e.removeEntry(u,c.readTime),s=s.insert(u,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),s=s.insert(u,c)):ve(Dv,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",c.version)})),{ks:s,qs:i}}))}function t9(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=xv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function n9(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((o=>o?(i=o,se.resolve(i)):t.Pi.allocateTargetId(r).next((s=>(i=new ss(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function qm(n,e,t){const r=ze(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!sl(s))throw s;ve(Dv,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function cE(n,e,t){const r=ze(n);let i=Fe.min(),o=Je();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,f,h){const p=ze(c),v=p.xs.get(h);return v!==void 0?se.resolve(p.Ms.get(v)):p.Pi.getTargetData(f,h)})(r,s,Mi(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,u.targetId).next((c=>{o=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:Fe.min(),t?o:Je()))).next((u=>(r9(r,W5(e),u),{documents:u,Qs:o})))))}function r9(n,e,t){let r=n.Os.get(e)||Fe.min();t.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class fE{constructor(){this.activeTargetIds=Q5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class i9{constructor(){this.Mo=new fE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new fE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="ConnectivityMonitor";class dE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(hE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(hE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yh=null;function Km(){return Yh===null?Yh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yh++,"0x"+Yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="RestConnection",s9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class a9{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===jd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const s=Km(),u=this.zo(e,t.toUriEncodedString());ve(U1,`Sending RPC '${e}' ${s}:`,u,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);const{host:f}=new URL(u),h=tl(f);return this.Jo(e,u,c,r,h).then((p=>(ve(U1,`Received RPC '${e}' ${s}: `,p),p)),(p=>{throw Hu(U1,`RPC '${e}' ${s} failed with error: `,p,"url: ",u,"request:",r),p}))}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+il})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,t){const r=s9[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="WebChannelConnection";class l9 extends a9{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const s=Km();return new Promise(((u,c)=>{const f=new lI;f.setWithCredentials(!0),f.listenOnce(cI.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case md.NO_ERROR:const p=f.getResponseJson();ve(Fn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),u(p);break;case md.TIMEOUT:ve(Fn,`RPC '${e}' ${s} timed out`),c(new pe(re.DEADLINE_EXCEEDED,"Request time out"));break;case md.HTTP_ERROR:const v=f.getStatus();if(ve(Fn,`RPC '${e}' ${s} failed with status:`,v,"response text:",f.getResponseText()),v>0){let y=f.getResponseJson();Array.isArray(y)&&(y=y[0]);const E=y?.error;if(E&&E.status&&E.message){const A=(function(N){const P=N.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(P)>=0?P:re.UNKNOWN})(E.status);c(new pe(A,E.message))}else c(new pe(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new pe(re.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:s,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ve(Fn,`RPC '${e}' ${s} completed.`)}}));const h=JSON.stringify(i);ve(Fn,`RPC '${e}' ${s} sending request:`,i),f.send(t,"POST",h,r,15)}))}T_(e,t,r){const i=Km(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=dI(),u=hI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const h=o.join("");ve(Fn,`Creating RPC '${e}' stream ${i}: ${h}`,c);const p=s.createWebChannel(h,c);this.I_(p);let v=!1,y=!1;const E=new u9({Yo:T=>{y?ve(Fn,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(v||(ve(Fn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),ve(Fn,`RPC '${e}' stream ${i} sending:`,T),p.send(T))},Zo:()=>p.close()}),A=(T,N,P)=>{T.listen(N,(M=>{try{P(M)}catch(j){setTimeout((()=>{throw j}),0)}}))};return A(p,pc.EventType.OPEN,(()=>{y||(ve(Fn,`RPC '${e}' stream ${i} transport opened.`),E.o_())})),A(p,pc.EventType.CLOSE,(()=>{y||(y=!0,ve(Fn,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(p))})),A(p,pc.EventType.ERROR,(T=>{y||(y=!0,Hu(Fn,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),E.a_(new pe(re.UNAVAILABLE,"The operation could not be completed")))})),A(p,pc.EventType.MESSAGE,(T=>{if(!y){const N=T.data[0];it(!!N,16349);const P=N,M=P?.error||P[0]?.error;if(M){ve(Fn,`RPC '${e}' stream ${i} received error:`,M);const j=M.status;let H=(function(I){const D=Yt[I];if(D!==void 0)return QI(D)})(j),W=M.message;H===void 0&&(H=re.INTERNAL,W="Unknown error status: "+j+" with message "+M.message),y=!0,E.a_(new pe(H,W)),p.close()}else ve(Fn,`RPC '${e}' stream ${i} received:`,N),E.u_(N)}})),A(u,fI.STAT_EVENT,(T=>{T.stat===Vm.PROXY?ve(Fn,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Vm.NOPROXY&&ve(Fn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function j1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(n){return new dM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="PersistentStream";class hS{constructor(e,t,r,i,o,s,u,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ov(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(vo(t.toString()),vo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new pe(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(pE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ve(pE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class c9 extends hS{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=vM(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Fe.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Fe.min():s.readTime?Sr(s.readTime):Fe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=$m(this.serializer),t.addTarget=(function(o,s){let u;const c=s.target;if(u=zm(c)?{documents:_M(o,c)}:{query:xM(o,c).ft},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=eS(o,s.resumeToken);const f=Gm(o,s.expectedCount);f!==null&&(u.expectedCount=f)}else if(s.snapshotVersion.compareTo(Fe.min())>0){u.readTime=Wd(o,s.snapshotVersion.toTimestamp());const f=Gm(o,s.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=EM(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=$m(this.serializer),t.removeTarget=e,this.q_(t)}}class f9 extends hS{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=yM(e.writeResults,e.commitTime),r=Sr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=$m(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>iS(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{}class d9 extends h9{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,s])=>this.connection.Go(e,Wm(t,r),i,o,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(re.UNKNOWN,o.toString())}))}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,u])=>this.connection.Ho(e,Wm(t,r),i,s,u,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new pe(re.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class p9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vo(t),this.aa=!1):ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="RemoteStore";class m9{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{ba(this)&&(ve(Ea,"Restarting streams for network reachability change."),await(async function(c){const f=ze(c);f.Ea.add(4),await gf(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Ap(f)})(this))}))})),this.Ra=new p9(r,i)}}async function Ap(n){if(ba(n))for(const e of n.da)await e(!0)}async function gf(n){for(const e of n.da)await e(!1)}function dS(n,e){const t=ze(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Vv(t)?Lv(t):ul(t).O_()&&Mv(t,e))}function kv(n,e){const t=ze(n),r=ul(t);t.Ia.delete(e),r.O_()&&pS(t,e),t.Ia.size===0&&(r.O_()?r.L_():ba(t)&&t.Ra.set("Unknown"))}function Mv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ul(n).Y_(e)}function pS(n,e){n.Va.Ue(e),ul(n).Z_(e)}function Lv(n){n.Va=new lM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ul(n).start(),n.Ra.ua()}function Vv(n){return ba(n)&&!ul(n).x_()&&n.Ia.size>0}function ba(n){return ze(n).Ea.size===0}function mS(n){n.Va=void 0}async function g9(n){n.Ra.set("Online")}async function v9(n){n.Ia.forEach(((e,t)=>{Mv(n,e)}))}async function y9(n,e){mS(n),Vv(n)?(n.Ra.ha(e),Lv(n)):n.Ra.set("Unknown")}async function _9(n,e,t){if(n.Ra.set("Online"),e instanceof JI&&e.state===2&&e.cause)try{await(async function(i,o){const s=o.cause;for(const u of o.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,s),i.Ia.delete(u),i.Va.removeTarget(u))})(n,e)}catch(r){ve(Ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kd(n,r)}else if(e instanceof _d?n.Va.Ze(e):e instanceof ZI?n.Va.st(e):n.Va.tt(e),!t.isEqual(Fe.min()))try{const r=await fS(n.localStore);t.compareTo(r)>=0&&await(function(o,s){const u=o.Va.Tt(s);return u.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.Ia.get(f);h&&o.Ia.set(f,h.withResumeToken(c.resumeToken,s))}})),u.targetMismatches.forEach(((c,f)=>{const h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(Dn.EMPTY_BYTE_STRING,h.snapshotVersion)),pS(o,c);const p=new ss(h.target,c,f,h.sequenceNumber);Mv(o,p)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){ve(Ea,"Failed to raise snapshot:",r),await Kd(n,r)}}async function Kd(n,e,t){if(!sl(e))throw e;n.Ea.add(1),await gf(n),n.Ra.set("Offline"),t||(t=()=>fS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ve(Ea,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ap(n)}))}function gS(n,e){return e().catch((t=>Kd(n,t,e)))}async function Tp(n){const e=ze(n),t=Es(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xv;for(;x9(e);)try{const i=await t9(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,w9(e,i)}catch(i){await Kd(e,i)}vS(e)&&yS(e)}function x9(n){return ba(n)&&n.Ta.length<10}function w9(n,e){n.Ta.push(e);const t=Es(n);t.O_()&&t.X_&&t.ea(e.mutations)}function vS(n){return ba(n)&&!Es(n).x_()&&n.Ta.length>0}function yS(n){Es(n).start()}async function E9(n){Es(n).ra()}async function A9(n){const e=Es(n);for(const t of n.Ta)e.ea(t.mutations)}async function T9(n,e,t){const r=n.Ta.shift(),i=Iv.from(r,e,t);await gS(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Tp(n)}async function C9(n,e){e&&Es(n).X_&&await(async function(r,i){if((function(s){return YI(s)&&s!==re.ABORTED})(i.code)){const o=r.Ta.shift();Es(r).B_(),await gS(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await Tp(r)}})(n,e),vS(n)&&yS(n)}async function mE(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),ve(Ea,"RemoteStore received new credentials");const r=ba(t);t.Ea.add(3),await gf(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ap(t)}async function I9(n,e){const t=ze(n);e?(t.Ea.delete(2),await Ap(t)):e||(t.Ea.add(2),await gf(t),t.Ra.set("Unknown"))}function ul(n){return n.ma||(n.ma=(function(t,r,i){const o=ze(t);return o.sa(),new c9(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:g9.bind(null,n),t_:v9.bind(null,n),r_:y9.bind(null,n),H_:_9.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Vv(n)?Lv(n):n.Ra.set("Unknown")):(await n.ma.stop(),mS(n))}))),n.ma}function Es(n){return n.fa||(n.fa=(function(t,r,i){const o=ze(t);return o.sa(),new f9(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:E9.bind(null,n),r_:C9.bind(null,n),ta:A9.bind(null,n),na:T9.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Tp(n)):(await n.fa.stop(),n.Ta.length>0&&(ve(Ea,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,u=new Fv(e,t,s,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bv(n,e){if(vo("AsyncQueue",`${e}: ${n}`),sl(n))return new pe(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{static emptySet(e){return new Vu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Re.comparator(t.key,r.key):(t,r)=>Re.comparator(t.key,r.key),this.keyedMap=mc(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Vu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.ga=new Mt(Re.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ku{constructor(e,t,r,i,o,s,u,c,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach((u=>{s.push({type:0,doc:u})})),new Ku(e,t,Vu.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class b9{constructor(){this.queries=vE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=ze(t),o=i.queries;i.queries=vE(),o.forEach(((s,u)=>{for(const c of u.Sa)c.onError(r)}))})(this,new pe(re.ABORTED,"Firestore shutting down"))}}function vE(){return new Sa((n=>MI(n)),gp)}async function Uv(n,e){const t=ze(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new S9,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const u=Bv(s,`Initialization of query '${_u(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&zv(t)}async function jv(n,e){const t=ze(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function R9(n,e){const t=ze(n);let r=!1;for(const i of e){const o=i.query,s=t.queries.get(o);if(s){for(const u of s.Sa)u.Fa(i)&&(r=!0);s.wa=i}}r&&zv(t)}function P9(n,e,t){const r=ze(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function zv(n){n.Ca.forEach((e=>{e.next()}))}var Xm,yE;(yE=Xm||(Xm={})).Ma="default",yE.Cache="cache";class Hv{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ku(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ku.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.key=e}}class xS{constructor(e){this.key=e}}class N9{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=LI(e),this.tu=new Vu(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new gE,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,p)=>{const v=i.get(h),y=vp(this.query,p)?p:null,E=!!v&&this.mutatedKeys.has(v.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let T=!1;v&&y?v.data.isEqual(y.data)?E!==A&&(r.track({type:3,doc:y}),T=!0):this.su(v,y)||(r.track({type:2,doc:y}),T=!0,(c&&this.eu(y,c)>0||f&&this.eu(y,f)<0)&&(u=!0)):!v&&y?(r.track({type:0,doc:y}),T=!0):v&&!y&&(r.track({type:1,doc:v}),T=!0,(c||f)&&(u=!0)),T&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((h,p)=>(function(y,E){const A=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:T})}};return A(y)-A(E)})(h.type,p.type)||this.eu(h.doc,p.doc))),this.ou(r),i=i??!1;const u=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,f=c!==this.Za;return this.Za=c,s.length!==0||f?{snapshot:new Ku(this.query,e.tu,o,s,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new xS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new _S(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ku.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Gv="SyncEngine";class D9{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class O9{constructor(e){this.key=e,this.hu=!1}}class k9{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Sa((u=>MI(u)),gp),this.Iu=new Map,this.Eu=new Set,this.du=new Mt(Re.comparator),this.Au=new Map,this.Ru=new Rv,this.Vu={},this.mu=new Map,this.fu=qu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function M9(n,e,t=!0){const r=IS(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await wS(r,e,t,!0),i}async function L9(n,e){const t=IS(n);await wS(t,e,!0,!1)}async function wS(n,e,t,r){const i=await n9(n.localStore,Mi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await V9(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&dS(n.remoteStore,i),u}async function V9(n,e,t,r,i){n.pu=(p,v,y)=>(async function(A,T,N,P){let M=T.view.ru(N);M.Cs&&(M=await cE(A.localStore,T.query,!1).then((({documents:R})=>T.view.ru(R,M))));const j=P&&P.targetChanges.get(T.targetId),H=P&&P.targetMismatches.get(T.targetId)!=null,W=T.view.applyChanges(M,A.isPrimaryClient,j,H);return xE(A,T.targetId,W.au),W.snapshot})(n,p,v,y);const o=await cE(n.localStore,e,!0),s=new N9(e,o.Qs),u=s.ru(o.documents),c=mf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=s.applyChanges(u,n.isPrimaryClient,c);xE(n,t,f.au);const h=new D9(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function F9(n,e,t){const r=ze(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((s=>!gp(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await qm(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&kv(r.remoteStore,i.targetId),Ym(r,i.targetId)})).catch(ol)):(Ym(r,i.targetId),await qm(r.localStore,i.targetId,!0))}async function B9(n,e){const t=ze(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),kv(t.remoteStore,r.targetId))}async function U9(n,e,t){const r=q9(n);try{const i=await(function(s,u){const c=ze(s),f=St.now(),h=u.reduce(((y,E)=>y.add(E.key)),Je());let p,v;return c.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let E=yo(),A=Je();return c.Ns.getEntries(y,h).next((T=>{E=T,E.forEach(((N,P)=>{P.isValidDocument()||(A=A.add(N))}))})).next((()=>c.localDocuments.getOverlayedDocuments(y,E))).next((T=>{p=T;const N=[];for(const P of u){const M=rM(P,p.get(P.key).overlayedDocument);M!=null&&N.push(new Ss(P.key,M,SI(M.value.mapValue),jn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,f,N,u)})).next((T=>{v=T;const N=T.applyToLocalDocumentSet(p,A);return c.documentOverlayCache.saveOverlays(y,T.batchId,N)}))})).then((()=>({batchId:v.batchId,changes:FI(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,u,c){let f=s.Vu[s.currentUser.toKey()];f||(f=new Mt(Ze)),f=f.insert(u,c),s.Vu[s.currentUser.toKey()]=f})(r,i.batchId,t),await vf(r,i.changes),await Tp(r.remoteStore)}catch(i){const o=Bv(i,"Failed to persist write");t.reject(o)}}async function ES(n,e){const t=ze(n);try{const r=await JM(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const s=t.Au.get(o);s&&(it(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?it(s.hu,14607):i.removedDocuments.size>0&&(it(s.hu,42227),s.hu=!1))})),await vf(t,r,e)}catch(r){await ol(r)}}function _E(n,e,t){const r=ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((o,s)=>{const u=s.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(s,u){const c=ze(s);c.onlineState=u;let f=!1;c.queries.forEach(((h,p)=>{for(const v of p.Sa)v.va(u)&&(f=!0)})),f&&zv(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function j9(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let s=new Mt(Re.comparator);s=s.insert(o,yn.newNoDocument(o,Fe.min()));const u=Je().add(o),c=new wp(Fe.min(),new Map,new Mt(Ze),s,u);await ES(r,c),r.du=r.du.remove(o),r.Au.delete(e),Wv(r)}else await qm(r.localStore,e,!1).then((()=>Ym(r,e,t))).catch(ol)}async function z9(n,e){const t=ze(n),r=e.batch.batchId;try{const i=await ZM(t.localStore,e);TS(t,r,null),AS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await vf(t,i)}catch(i){await ol(i)}}async function H9(n,e,t){const r=ze(n);try{const i=await(function(s,u){const c=ze(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let h;return c.mutationQueue.lookupMutationBatch(f,u).next((p=>(it(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(f,p)))).next((()=>c.mutationQueue.performConsistencyCheck(f))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(f,h,u))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h))).next((()=>c.localDocuments.getDocuments(f,h)))}))})(r.localStore,e);TS(r,e,t),AS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await vf(r,i)}catch(i){await ol(i)}}function AS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function TS(n,e,t){const r=ze(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ym(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||CS(n,r)}))}function CS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(kv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Wv(n))}function xE(n,e,t){for(const r of t)r instanceof _S?(n.Ru.addReference(r.key,e),G9(n,r)):r instanceof xS?(ve(Gv,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||CS(n,r.key)):De(19791,{wu:r})}function G9(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ve(Gv,"New document in limbo: "+t),n.Eu.add(r),Wv(n))}function Wv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Re(vt.fromString(e)),r=n.fu.next();n.Au.set(r,new O9(t)),n.du=n.du.insert(t,r),dS(n.remoteStore,new ss(Mi(mp(t.path)),r,"TargetPurposeLimboResolution",dp.ce))}}async function vf(n,e,t){const r=ze(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,c)=>{s.push(r.pu(c,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const h=f?!f.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(f){i.push(f);const h=Nv.As(c.targetId,f);o.push(h)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(c,f){const h=ze(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>se.forEach(f,(v=>se.forEach(v.Es,(y=>h.persistence.referenceDelegate.addReference(p,v.targetId,y))).next((()=>se.forEach(v.ds,(y=>h.persistence.referenceDelegate.removeReference(p,v.targetId,y)))))))))}catch(p){if(!sl(p))throw p;ve(Dv,"Failed to update sequence numbers: "+p)}for(const p of f){const v=p.targetId;if(!p.fromCache){const y=h.Ms.get(v),E=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(E);h.Ms=h.Ms.insert(v,A)}}})(r.localStore,o))}async function W9(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){ve(Gv,"User change. New user:",e.toKey());const r=await cS(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach((u=>{u.forEach((c=>{c.reject(new pe(re.CANCELLED,s))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vf(t,r.Ls)}}function $9(n,e){const t=ze(n),r=t.Au.get(e);if(r&&r.hu)return Je().add(r.key);{let i=Je();const o=t.Iu.get(e);if(!o)return i;for(const s of o){const u=t.Tu.get(s);i=i.unionWith(u.view.nu)}return i}}function IS(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ES.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j9.bind(null,e),e.Pu.H_=R9.bind(null,e.eventManager),e.Pu.yu=P9.bind(null,e.eventManager),e}function q9(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=z9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H9.bind(null,e),e}class Xd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ep(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return QM(this.persistence,new KM,e.initialUser,this.serializer)}Cu(e){return new lS(Pv.mi,this.serializer)}Du(e){return new i9}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xd.provider={build:()=>new Xd};class K9 extends Xd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){it(this.persistence.referenceDelegate instanceof qd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new OM(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?sr.withCacheSize(this.cacheSizeBytes):sr.DEFAULT;return new lS((r=>qd.mi(r,t)),this.serializer)}}class Qm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_E(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=W9.bind(null,this.syncEngine),await I9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new b9})()}createDatastore(e){const t=Ep(e.databaseInfo.databaseId),r=(function(o){return new l9(o)})(e.databaseInfo);return(function(o,s,u,c){return new d9(o,s,u,c)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,o,s,u){return new m9(r,i,o,s,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>_E(this.syncEngine,t,0)),(function(){return dE.v()?new dE:new o9})())}createSyncEngine(e,t){return(function(i,o,s,u,c,f,h){const p=new k9(i,o,s,u,c,f);return h&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ze(t);ve(Ea,"RemoteStore shutting down."),r.Ea.add(5),await gf(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Qm.provider={build:()=>new Qm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new pe(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,o){const s=ze(i),u={documents:o.map((p=>$d(s.serializer,p)))},c=await s.Ho("BatchGetDocuments",s.serializer.databaseId,vt.emptyPath(),u,o.length),f=new Map;c.forEach((p=>{const v=gM(s.serializer,p);f.set(v.key.toString(),v)}));const h=[];return o.forEach((p=>{const v=f.get(p.toString());it(!!v,55234,{key:p}),h.push(v)})),h})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new xp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=Re.fromPath(r);this.mutations.push(new XI(i,this.precondition(i)))})),await(async function(r,i){const o=ze(r),s={writes:i.map((u=>iS(o.serializer,u)))};await o.Go("Commit",o.serializer.databaseId,vt.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw De(50498,{Gu:e.constructor.name});t=Fe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new pe(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Fe.min())?jn.exists(!1):jn.updateTime(t):jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Fe.min()))throw new pe(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jn.updateTime(t)}return jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new Ov(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new X9(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!df(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!YI(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="FirestoreClient";class Q9{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Un.UNAUTHENTICATED,this.clientId=_v.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async s=>{ve(As,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(ve(As,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Bv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function z1(n,e){n.asyncQueue.verifyOperationInProgress(),ve(As,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await cS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function wE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Z9(n);ve(As,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>mE(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>mE(e.remoteStore,i))),n._onlineComponents=e}async function Z9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve(As,"Using user provided OfflineComponentProvider");try{await z1(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Hu("Error using user provided cache. Falling back to memory cache: "+t),await z1(n,new Xd)}}else ve(As,"Using default OfflineComponentProvider"),await z1(n,new K9(void 0));return n._offlineComponents}async function qv(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve(As,"Using user provided OnlineComponentProvider"),await wE(n,n._uninitializedComponentsProvider._online)):(ve(As,"Using default OnlineComponentProvider"),await wE(n,new Qm))),n._onlineComponents}function J9(n){return qv(n).then((e=>e.syncEngine))}function e7(n){return qv(n).then((e=>e.datastore))}async function Yd(n){const e=await qv(n),t=e.eventManager;return t.onListen=M9.bind(null,e.syncEngine),t.onUnlisten=F9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=L9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=B9.bind(null,e.syncEngine),t}function t7(n,e,t={}){const r=new ki;return n.asyncQueue.enqueueAndForget((async()=>(function(o,s,u,c,f){const h=new $v({next:v=>{h.Nu(),s.enqueueAndForget((()=>jv(o,p)));const y=v.docs.has(u);!y&&v.fromCache?f.reject(new pe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&v.fromCache&&c&&c.source==="server"?f.reject(new pe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),p=new Hv(mp(u.path),h,{includeMetadataChanges:!0,qa:!0});return Uv(o,p)})(await Yd(n),n.asyncQueue,e,t,r))),r.promise}function n7(n,e,t={}){const r=new ki;return n.asyncQueue.enqueueAndForget((async()=>(function(o,s,u,c,f){const h=new $v({next:v=>{h.Nu(),s.enqueueAndForget((()=>jv(o,p))),v.fromCache&&c.source==="server"?f.reject(new pe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),p=new Hv(u,h,{includeMetadataChanges:!0,qa:!0});return Uv(o,p)})(await Yd(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="firestore.googleapis.com",AE=!0;class TE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bS,this.ssl=AE}else this.host=e.host,this.ssl=e.ssl??AE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NM)throw new pe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}v5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new a5;switch(r.type){case"firstParty":return new f5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=EE.get(t);r&&(ve("ComponentProvider","Removing Datastore"),EE.delete(t),r.terminate())})(this),Promise.resolve()}}function r7(n,e,t,r={}){n=Ir(n,Cp);const i=tl(e),o=n._getSettings(),s={...o,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;i&&(EC(`https://${u}`),AC("Firestore",!0)),o.host!==bS&&o.host!==u&&Hu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:u,ssl:i,emulatorOptions:r};if(!ya(c,s)&&(n._setSettings(c),r.mockUserToken)){let f,h;if(typeof r.mockUserToken=="string")f=r.mockUserToken,h=Un.MOCK_USER;else{f=D6(r.mockUserToken,n._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new pe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Un(p)}n._authCredentials=new u5(new mI(f,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wo(this.firestore,e,this._query)}}class Ut{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}toJSON(){return{type:Ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(hf(t,Ut._jsonSchema))return new Ut(e,r||null,new Re(vt.fromString(t.referencePath)))}}Ut._jsonSchemaVersion="firestore/documentReference/1.0",Ut._jsonSchema={type:Jt("string",Ut._jsonSchemaVersion),referencePath:Jt("string")};class hs extends wo{constructor(e,t,r){super(e,t,mp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new Re(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function cr(n,e,...t){if(n=fn(n),gI("collection","path",e),n instanceof Cp){const r=vt.fromString(e,...t);return Vw(r),new hs(n,null,r)}{if(!(n instanceof Ut||n instanceof hs))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vt.fromString(e,...t));return Vw(r),new hs(n.firestore,null,r)}}function Zn(n,e,...t){if(n=fn(n),arguments.length===1&&(e=_v.newId()),gI("doc","path",e),n instanceof Cp){const r=vt.fromString(e,...t);return Lw(r),new Ut(n,null,new Re(r))}{if(!(n instanceof Ut||n instanceof hs))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vt.fromString(e,...t));return Lw(r),new Ut(n.firestore,n instanceof hs?n.converter:null,new Re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="AsyncQueue";class IE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ov(this,"async_queue_retry"),this._c=()=>{const r=j1();r&&ve(CE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=j1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=j1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ki;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sl(e))throw e;ve(CE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,vo("INTERNAL UNHANDLED ERROR: ",SE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Fv.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&De(47125,{Pc:SE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function SE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}class _o extends Cp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new IE,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new IE(e),this._firestoreClient=void 0,await e}}}function i7(n,e){const t=typeof n=="object"?n:SC(),r=typeof n=="string"?n:jd,i=av(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=P6("firestore");o&&r7(i,...o)}return i}function yf(n){if(n._terminated)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||o7(n),n._firestoreClient}function o7(n){const e=n._freezeSettings(),t=(function(i,o,s,u){return new R5(i,o,s,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,SS(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Q9(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Er(Dn.fromBase64String(e))}catch(t){throw new pe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Er(Dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Er._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hf(e,Er._jsonSchema))return Er.fromBase64String(e.bytes)}}Er._jsonSchemaVersion="firestore/bytes/1.0",Er._jsonSchema={type:Jt("string",Er._jsonSchemaVersion),bytes:Jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Li._jsonSchemaVersion}}static fromJSON(e){if(hf(e,Li._jsonSchema))return new Li(e.latitude,e.longitude)}}Li._jsonSchemaVersion="firestore/geoPoint/1.0",Li._jsonSchema={type:Jt("string",Li._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hf(e,Vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vi(e.vectorValues);throw new pe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vi._jsonSchemaVersion="firestore/vectorValue/1.0",Vi._jsonSchema={type:Jt("string",Vi._jsonSchemaVersion),vectorValues:Jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7=/^__.*__$/;class a7{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms):new pf(e,this.data,t,this.fieldTransforms)}}class RS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function PS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:n})}}class Kv{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Kv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Qd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(PS(this.Ac)&&s7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class u7{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ep(e)}Cc(e,t,r,i=!1){return new Kv({Ac:e,methodName:t,Dc:r,path:Pn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ip(n){const e=n._freezeSettings(),t=Ep(n._databaseId);return new u7(n._databaseId,!!e.ignoreUndefinedProperties,t)}function NS(n,e,t,r,i,o={}){const s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);Qv("Data must be an object, but it was:",s,r);const u=kS(r,s);let c,f;if(o.merge)c=new Cr(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const v=Zm(e,p,t);if(!s.contains(v))throw new pe(re.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);LS(h,v)||h.push(v)}c=new Cr(h),f=s.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,f=s.fieldTransforms;return new a7(new Yn(u),c,f)}class Sp extends xf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sp}}class Xv extends xf{_toFieldTransform(e){return new $I(e.path,new Xc)}isEqual(e){return e instanceof Xv}}class Yv extends xf{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Zc(e.serializer,jI(e.serializer,this.Fc));return new $I(e.path,t)}isEqual(e){return e instanceof Yv&&this.Fc===e.Fc}}function DS(n,e,t,r){const i=n.Cc(1,e,t);Qv("Data must be an object, but it was:",i,r);const o=[],s=Yn.empty();Is(r,((c,f)=>{const h=Zv(e,c,t);f=fn(f);const p=i.yc(h);if(f instanceof Sp)o.push(h);else{const v=wf(f,p);v!=null&&(o.push(h),s.set(h,v))}}));const u=new Cr(o);return new RS(s,u,i.fieldTransforms)}function OS(n,e,t,r,i,o){const s=n.Cc(1,e,t),u=[Zm(e,r,t)],c=[i];if(o.length%2!=0)throw new pe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(Zm(e,o[v])),c.push(o[v+1]);const f=[],h=Yn.empty();for(let v=u.length-1;v>=0;--v)if(!LS(f,u[v])){const y=u[v];let E=c[v];E=fn(E);const A=s.yc(y);if(E instanceof Sp)f.push(y);else{const T=wf(E,A);T!=null&&(f.push(y),h.set(y,T))}}const p=new Cr(f);return new RS(h,p,s.fieldTransforms)}function l7(n,e,t,r=!1){return wf(t,n.Cc(r?4:3,e))}function wf(n,e){if(MS(n=fn(n)))return Qv("Unsupported field value:",e,n),kS(n,e);if(n instanceof xf)return(function(r,i){if(!PS(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let s=0;for(const u of r){let c=wf(u,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=fn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=St.fromDate(r);return{timestampValue:Wd(i.serializer,o)}}if(r instanceof St){const o=new St(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wd(i.serializer,o)}}if(r instanceof Li)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Er)return{bytesValue:eS(i.serializer,r._byteString)};if(r instanceof Ut){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:bv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vi)return(function(s,u){return{mapValue:{fields:{[CI]:{stringValue:II},[zd]:{arrayValue:{values:s.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return Cv(u.serializer,f)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${hp(r)}`)})(n,e)}function kS(n,e){const t={};return _I(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Is(n,((r,i)=>{const o=wf(i,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function MS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof St||n instanceof Li||n instanceof Er||n instanceof Ut||n instanceof xf||n instanceof Vi)}function Qv(n,e,t){if(!MS(t)||!vI(t)){const r=hp(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Zm(n,e,t){if((e=fn(e))instanceof _f)return e._internalPath;if(typeof e=="string")return Zv(n,e);throw Qd("Field path arguments must be of type string or ",n,!1,void 0,t)}const c7=new RegExp("[~\\*/\\[\\]]");function Zv(n,e,t){if(e.search(c7)>=0)throw Qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _f(...e.split("."))._internalPath}catch{throw Qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qd(n,e,t,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new pe(re.INVALID_ARGUMENT,u+n+c)}function LS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new f7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class f7 extends Zd{data(){return super.data()}}function bp(n,e){return typeof e=="string"?Zv(n,e):e instanceof _f?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jv{}class ey extends Jv{}function Ui(n,e,...t){let r=[];e instanceof Jv&&r.push(e),r=r.concat(t),(function(o){const s=o.filter((c=>c instanceof ty)).length,u=o.filter((c=>c instanceof Rp)).length;if(s>1||s>0&&u>0)throw new pe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class Rp extends ey{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Rp(e,t,r)}_apply(e){const t=this._parse(e);return FS(e._query,t),new wo(e.firestore,e.converter,Hm(e._query,t))}_parse(e){const t=Ip(e.firestore);return(function(o,s,u,c,f,h,p){let v;if(f.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new pe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){PE(p,h);const E=[];for(const A of p)E.push(RE(c,o,A));v={arrayValue:{values:E}}}else v=RE(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||PE(p,h),v=l7(u,s,p,h==="in"||h==="not-in");return Zt.create(f,h,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Xu(n,e,t){const r=e,i=bp("where",n);return Rp._create(i,r,t)}class ty extends Jv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ty(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:li.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i;const u=o.getFlattenedFilters();for(const c of u)FS(s,c),s=Hm(s,c)})(e._query,t),new wo(e.firestore,e.converter,Hm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ny extends ey{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ny(e,t)}_apply(e){const t=(function(i,o,s){if(i.startAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kc(o,s)})(e._query,this._field,this._direction);return new wo(e.firestore,e.converter,(function(i,o){const s=i.explicitOrderBy.concat([o]);return new al(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function Pp(n,e="asc"){const t=e,r=bp("orderBy",n);return ny._create(r,t)}class ry extends ey{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ry(e,t,r)}_apply(e){return new wo(e.firestore,e.converter,Gd(e._query,this._limit,this._limitType))}}function Aa(n){return y5("limit",n),ry._create("limit",n,"F")}function RE(n,e,t){if(typeof(t=fn(t))=="string"){if(t==="")throw new pe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kI(e)&&t.indexOf("/")!==-1)throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(vt.fromString(t));if(!Re.isDocumentKey(r))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ww(n,new Re(r))}if(t instanceof Ut)return Ww(n,t._key);throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hp(t)}.`)}function PE(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FS(n,e){const t=(function(i,o){for(const s of i)for(const u of s.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class BS{convertValue(e,t="none"){switch(ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Is(e,((i,o)=>{r[i]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[zd].arrayValue?.values?.map((r=>Wt(r.doubleValue)));return new Vi(t)}convertGeoPoint(e){return new Li(Wt(e.latitude),Wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=pp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wc(e));default:return null}}convertTimestamp(e){const t=_s(e);return new St(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=vt.fromString(e);it(aS(r),9688,{name:e});const i=new $c(r.get(1),r.get(3)),o=new Re(r.popFirst(5));return i.isEqual(t)||vo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class h7 extends BS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Er(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}}class Su{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ds extends Zd{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(bp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ds._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ds._jsonSchemaVersion="firestore/documentSnapshot/1.0",ds._jsonSchema={type:Jt("string",ds._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class xd extends ds{data(e={}){return super.data(e)}}class ga{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Su(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new xd(this._firestore,this._userDataWriter,r.key,r,new Su(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((u=>{const c=new xd(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Su(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const c=new xd(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Su(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return u.type!==0&&(f=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),u.type!==1&&(s=s.add(u.doc),h=s.indexOf(u.doc.key)),{type:d7(u.type),doc:c,oldIndex:f,newIndex:h}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ga._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_v.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function d7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(n){n=Ir(n,Ut);const e=Ir(n.firestore,_o);return t7(yf(e),n._key).then((t=>jS(e,n,t)))}ga._jsonSchemaVersion="firestore/querySnapshot/1.0",ga._jsonSchema={type:Jt("string",ga._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class Np extends BS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Er(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}}function Jm(n){n=Ir(n,wo);const e=Ir(n.firestore,_o),t=yf(e),r=new Np(e);return VS(n._query),n7(t,n._query).then((i=>new ga(e,r,n,i)))}function m7(n,e,t,...r){n=Ir(n,Ut);const i=Ir(n.firestore,_o),o=Ip(i);let s;return s=typeof(e=fn(e))=="string"||e instanceof _f?OS(o,"updateDoc",n._key,e,t,r):DS(o,"updateDoc",n._key,e),iy(i,[s.toMutation(n._key,jn.exists(!0))])}function g7(n){return iy(Ir(n.firestore,_o),[new xp(n._key,jn.none())])}function v7(n,e){const t=Ir(n.firestore,_o),r=Zn(n),i=US(n.converter,e);return iy(t,[NS(Ip(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,jn.exists(!1))]).then((()=>r))}function Ts(n,...e){n=fn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||bE(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(bE(e[r])){const c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let o,s,u;if(n instanceof Ut)s=Ir(n.firestore,_o),u=mp(n._key.path),o={next:c=>{e[r]&&e[r](jS(s,n,c))},error:e[r+1],complete:e[r+2]};else{const c=Ir(n,wo);s=Ir(c.firestore,_o),u=c._query;const f=new Np(s);o={next:h=>{e[r]&&e[r](new ga(s,f,c,h))},error:e[r+1],complete:e[r+2]},VS(n._query)}return(function(f,h,p,v){const y=new $v(v),E=new Hv(h,y,p);return f.asyncQueue.enqueueAndForget((async()=>Uv(await Yd(f),E))),()=>{y.Nu(),f.asyncQueue.enqueueAndForget((async()=>jv(await Yd(f),E)))}})(yf(s),u,i,o)}function iy(n,e){return(function(r,i){const o=new ki;return r.asyncQueue.enqueueAndForget((async()=>U9(await J9(r),i,o))),o.promise})(yf(n),e)}function jS(n,e,t){const r=t.docs.get(e._key),i=new Np(n);return new ds(n,i,e._key,r,new Su(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7={maxAttempts:5};function vc(n,e){if((n=fn(n)).firestore!==e)throw new pe(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ip(e)}get(e){const t=vc(e,this._firestore),r=new h7(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return De(24041);const o=i[0];if(o.isFoundDocument())return new Zd(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Zd(this._firestore,r,t._key,null,t.converter);throw De(18433,{doc:o})}))}set(e,t,r){const i=vc(e,this._firestore),o=US(i.converter,t,r),s=NS(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){const o=vc(e,this._firestore);let s;return s=typeof(t=fn(t))=="string"||t instanceof _f?OS(this._dataReader,"Transaction.update",o._key,t,r,i):DS(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){const t=vc(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7 extends _7{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=vc(e,this._firestore),r=new Np(this._firestore);return super.get(e).then((i=>new ds(this._firestore,r,t._key,i._document,new Su(!1,!1),t.converter)))}}function oy(n,e,t){n=Ir(n,_o);const r={...y7,...t};return(function(o){if(o.maxAttempts<1)throw new pe(re.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,u){const c=new ki;return o.asyncQueue.enqueueAndForget((async()=>{const f=await e7(o);new Y9(o.asyncQueue,f,u,s,c).ju()})),c.promise})(yf(n),(i=>e(new x7(n,i))),r)}function ar(){return new Xv("serverTimestamp")}function Jd(n){return new Yv("increment",n)}(function(e,t=!0){(function(i){il=i})(nl),ju(new _a("firestore",((r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),u=new _o(new l5(r.getProvider("auth-internal")),new h5(s,r.getProvider("app-check-internal")),(function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new pe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $c(f.options.projectId,h)})(s,i),s);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),ls(Dw,Ow,e),ls(Dw,Ow,"esm2020")})();const eg={apiKey:"AIzaSyCEP8h9z4pW9NIV3qEd2XrrAOGkkgZGAiQ",authDomain:"borealabsweb.firebaseapp.com",projectId:"borealabsweb",storageBucket:"borealabsweb.appspot.com",messagingSenderId:"338356857449",appId:"1:338356857449:web:6e6515fa93bb8d4c1390f8"},w7=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"];let bu=w7.every(n=>typeof eg[n]=="string"&&eg[n].length>0),H1=null,Fu=null,yt=null,kc=null;try{if(bu){H1=IC(eg),Fu=r5(H1),yt=i7(H1),kc=new lo;try{kc.setCustomParameters({prompt:"select_account"})}catch{}}else console.warn("Firebase no configurado: faltan variables en .env (VITE_FIREBASE_*)")}catch(n){console.error("Error inicializando Firebase:",n),bu=!1}const E7="/assets/logo-DQzvxpvb.png";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),T7=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),NE=n=>{const e=T7(n);return e.charAt(0).toUpperCase()+e.slice(1)},zS=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),C7=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var I7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=B.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...u},c)=>B.createElement("svg",{ref:c,...I7,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:zS("lucide",i),...!o&&!C7(u)&&{"aria-hidden":"true"},...u},[...s.map(([f,h])=>B.createElement(f,h)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=(n,e)=>{const t=B.forwardRef(({className:r,...i},o)=>B.createElement(S7,{ref:o,iconNode:e,className:zS(`lucide-${A7(NE(n))}`,`lucide-${n}`,r),...i}));return t.displayName=NE(n),t};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],wd=zi("circle-check",b7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],P7=zi("download",R7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],DE=zi("file-text",N7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Jc=zi("loader-circle",D7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],k7=zi("menu",O7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["path",{d:"M5 12h14",key:"1ays0h"}]],L7=zi("minus",M7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],F7=zi("plus",V7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],U7=zi("qr-code",B7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],HS=zi("triangle-alert",j7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],GS=zi("x",z7),H7=({user:n,activeTab:e,onNavigate:t})=>{const[r,i]=B.useState(!1);return S.jsxs("header",{className:"sticky top-0 z-40 w-full glass-effect",children:[S.jsxs("nav",{className:"max-w-7xl mx-auto flex items-center justify-between px-4 py-4 md:py-5",children:[S.jsxs("a",{href:"#",className:"flex items-center gap-3",children:[S.jsx("img",{src:E7,alt:"Boreal Labs",className:"h-9 md:h-11 w-auto"}),S.jsx("span",{className:"sr-only",children:"Boreal Labs"})]}),S.jsxs("div",{className:"hidden md:flex items-center gap-7",children:[S.jsxs("button",{className:`relative pb-2 text-base transition-colors ${e==="certs"?"text-white":"text-gray-300 hover:text-white"}`,onClick:()=>t&&t("certs"),children:["Certificados",e==="certs"&&S.jsx(Tr.span,{layoutId:"nav-underline",className:"absolute left-0 right-0 -bottom-1.5 h-[3px] rounded-full bg-gradient-to-r from-boreal-blue to-boreal-purple",transition:{type:"spring",stiffness:500,damping:35}})]}),S.jsxs("button",{className:`relative pb-2 text-base transition-colors ${e==="points"?"text-white":"text-gray-300 hover:text-white"}`,onClick:()=>t&&t("points"),children:["Mis puntos",e==="points"&&S.jsx(Tr.span,{layoutId:"nav-underline",className:"absolute left-0 right-0 -bottom-1.5 h-[3px] rounded-full bg-gradient-to-r from-boreal-blue to-boreal-purple",transition:{type:"spring",stiffness:500,damping:35}})]}),S.jsxs("button",{className:`relative pb-2 text-base transition-colors ${e==="market"?"text-white":"text-gray-300 hover:text-white"}`,onClick:()=>t&&t("market"),children:["Marketplace",e==="market"&&S.jsx(Tr.span,{layoutId:"nav-underline",className:"absolute left-0 right-0 -bottom-1.5 h-[3px] rounded-full bg-gradient-to-r from-boreal-blue to-boreal-purple",transition:{type:"spring",stiffness:500,damping:35}})]}),S.jsx("a",{href:"https://borealabs.org",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-lg text-base bg-gradient-to-r from-boreal-purple to-boreal-blue text-white shadow font-bold",children:"Pgina principal"})]}),S.jsx("button",{className:"md:hidden p-2 rounded-md hover:bg-white/10","aria-label":"Abrir men",onClick:()=>i(o=>!o),children:r?S.jsx(GS,{className:"w-7 h-7 text-white"}):S.jsx(k7,{className:"w-7 h-7 text-white"})})]}),S.jsx(ip,{initial:!1,children:r&&S.jsx(Tr.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2,ease:"easeOut"},className:"md:hidden border-t border-white/10 bg-white/5 overflow-hidden",children:S.jsxs("div",{className:"max-w-7xl mx-auto p-4 flex flex-col gap-3",children:[S.jsx("button",{className:"text-left px-3 py-2 rounded-md text-sm hover:bg-white/10",onClick:()=>{t&&t("certs"),i(!1)},children:"Certificados"}),S.jsx("button",{className:"text-left px-3 py-2 rounded-md text-sm hover:bg-white/10",onClick:()=>{t&&t("points"),i(!1)},children:"Mis puntos"}),S.jsx("button",{className:"text-left px-3 py-2 rounded-md text-sm hover:bg-white/10",onClick:()=>{t&&t("market"),i(!1)},children:"Marketplace"}),S.jsx("a",{href:"https://borealabs.org",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 rounded-md text-sm bg-gradient-to-r from-boreal-purple to-boreal-blue text-white text-center font-bold",onClick:()=>i(!1),children:"Pgina principal"})]})})})]})},G7=()=>S.jsx("footer",{className:"w-full mt-12 py-6 glass-effect",children:S.jsxs("div",{className:"max-w-7xl mx-auto text-center text-gray-400 text-sm",children:[" ",new Date().getFullYear()," Borea Labs. Todos los derechos reservados."]})});function OE(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function WS(...n){return e=>{let t=!1;const r=n.map(i=>{const o=OE(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():OE(n[i],null)}}}}function Ta(...n){return B.useCallback(WS(...n),n)}function ep(n){const e=$7(n),t=B.forwardRef((r,i)=>{const{children:o,...s}=r,u=B.Children.toArray(o),c=u.find(K7);if(c){const f=c.props.children,h=u.map(p=>p===c?B.Children.count(f)>1?B.Children.only(null):B.isValidElement(f)?f.props.children:null:p);return S.jsx(e,{...s,ref:i,children:B.isValidElement(f)?B.cloneElement(f,void 0,h):null})}return S.jsx(e,{...s,ref:i,children:o})});return t.displayName=`${n}.Slot`,t}var W7=ep("Slot");function $7(n){const e=B.forwardRef((t,r)=>{const{children:i,...o}=t;if(B.isValidElement(i)){const s=Y7(i),u=X7(o,i.props);return i.type!==B.Fragment&&(u.ref=r?WS(r,s):s),B.cloneElement(i,u)}return B.Children.count(i)>1?B.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var q7=Symbol("radix.slottable");function K7(n){return B.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===q7}function X7(n,e){const t={...e};for(const r in e){const i=n[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?t[r]=(...u)=>{const c=o(...u);return i(...u),c}:i&&(t[r]=i):r==="style"?t[r]={...i,...o}:r==="className"&&(t[r]=[i,o].filter(Boolean).join(" "))}return{...n,...t}}function Y7(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function $S(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=$S(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function qS(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=$S(n))&&(r&&(r+=" "),r+=e);return r}const kE=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,ME=qS,KS=(n,e)=>t=>{var r;if(e?.variants==null)return ME(n,t?.class,t?.className);const{variants:i,defaultVariants:o}=e,s=Object.keys(i).map(f=>{const h=t?.[f],p=o?.[f];if(h===null)return null;const v=kE(h)||kE(p);return i[f][v]}),u=t&&Object.entries(t).reduce((f,h)=>{let[p,v]=h;return v===void 0||(f[p]=v),f},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,h)=>{let{class:p,className:v,...y}=h;return Object.entries(y).every(E=>{let[A,T]=E;return Array.isArray(T)?T.includes({...o,...u}[A]):{...o,...u}[A]===T})?[...f,p,v]:f},[]);return ME(n,s,c,t?.class,t?.className)},sy="-",Q7=n=>{const e=J7(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:s=>{const u=s.split(sy);return u[0]===""&&u.length!==1&&u.shift(),XS(u,e)||Z7(s)},getConflictingClassGroupIds:(s,u)=>{const c=t[s]||[];return u&&r[s]?[...c,...r[s]]:c}}},XS=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?XS(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=n.join(sy);return e.validators.find(({validator:s})=>s(o))?.classGroupId},LE=/^\[(.+)\]$/,Z7=n=>{if(LE.test(n)){const e=LE.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},J7=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)tg(t[i],r,i,e);return r},tg=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const o=i===""?e:VE(e,i);o.classGroupId=t;return}if(typeof i=="function"){if(eL(i)){tg(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([o,s])=>{tg(s,VE(e,o),t,r)})})},VE=(n,e)=>{let t=n;return e.split(sy).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},eL=n=>n.isThemeGetter,tL=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(o,s)=>{t.set(o,s),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let s=t.get(o);if(s!==void 0)return s;if((s=r.get(o))!==void 0)return i(o,s),s},set(o,s){t.has(o)?t.set(o,s):i(o,s)}}},ng="!",rg=":",nL=rg.length,rL=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const o=[];let s=0,u=0,c=0,f;for(let E=0;E<i.length;E++){let A=i[E];if(s===0&&u===0){if(A===rg){o.push(i.slice(c,E)),c=E+nL;continue}if(A==="/"){f=E;continue}}A==="["?s++:A==="]"?s--:A==="("?u++:A===")"&&u--}const h=o.length===0?i:i.substring(c),p=iL(h),v=p!==h,y=f&&f>c?f-c:void 0;return{modifiers:o,hasImportantModifier:v,baseClassName:p,maybePostfixModifierPosition:y}};if(e){const i=e+rg,o=r;r=s=>s.startsWith(i)?o(s.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=o=>t({className:o,parseClassName:i})}return r},iL=n=>n.endsWith(ng)?n.substring(0,n.length-1):n.startsWith(ng)?n.substring(1):n,oL=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(s=>{s[0]==="["||e[s]?(i.push(...o.sort(),s),o=[]):o.push(s)}),i.push(...o.sort()),i}},sL=n=>({cache:tL(n.cacheSize),parseClassName:rL(n),sortModifiers:oL(n),...Q7(n)}),aL=/\s+/,uL=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,s=[],u=n.trim().split(aL);let c="";for(let f=u.length-1;f>=0;f-=1){const h=u[f],{isExternal:p,modifiers:v,hasImportantModifier:y,baseClassName:E,maybePostfixModifierPosition:A}=t(h);if(p){c=h+(c.length>0?" "+c:c);continue}let T=!!A,N=r(T?E.substring(0,A):E);if(!N){if(!T){c=h+(c.length>0?" "+c:c);continue}if(N=r(E),!N){c=h+(c.length>0?" "+c:c);continue}T=!1}const P=o(v).join(":"),M=y?P+ng:P,j=M+N;if(s.includes(j))continue;s.push(j);const H=i(N,T);for(let W=0;W<H.length;++W){const R=H[W];s.push(M+R)}c=h+(c.length>0?" "+c:c)}return c};function lL(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=YS(e))&&(r&&(r+=" "),r+=t);return r}const YS=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=YS(n[r]))&&(t&&(t+=" "),t+=e);return t};function cL(n,...e){let t,r,i,o=s;function s(c){const f=e.reduce((h,p)=>p(h),n());return t=sL(f),r=t.cache.get,i=t.cache.set,o=u,u(c)}function u(c){const f=r(c);if(f)return f;const h=uL(c,t);return i(c,h),h}return function(){return o(lL.apply(null,arguments))}}const nn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},QS=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ZS=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fL=/^\d+\/\d+$/,hL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,pL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,mL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gu=n=>fL.test(n),$e=n=>!!n&&!Number.isNaN(Number(n)),Zo=n=>!!n&&Number.isInteger(Number(n)),G1=n=>n.endsWith("%")&&$e(n.slice(0,-1)),uo=n=>hL.test(n),vL=()=>!0,yL=n=>dL.test(n)&&!pL.test(n),JS=()=>!1,_L=n=>mL.test(n),xL=n=>gL.test(n),wL=n=>!Ee(n)&&!Ae(n),EL=n=>ll(n,n3,JS),Ee=n=>QS.test(n),ra=n=>ll(n,r3,yL),W1=n=>ll(n,SL,$e),FE=n=>ll(n,e3,JS),AL=n=>ll(n,t3,xL),Qh=n=>ll(n,i3,_L),Ae=n=>ZS.test(n),lc=n=>cl(n,r3),TL=n=>cl(n,bL),BE=n=>cl(n,e3),CL=n=>cl(n,n3),IL=n=>cl(n,t3),Zh=n=>cl(n,i3,!0),ll=(n,e,t)=>{const r=QS.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},cl=(n,e,t=!1)=>{const r=ZS.exec(n);return r?r[1]?e(r[1]):t:!1},e3=n=>n==="position"||n==="percentage",t3=n=>n==="image"||n==="url",n3=n=>n==="length"||n==="size"||n==="bg-size",r3=n=>n==="length",SL=n=>n==="number",bL=n=>n==="family-name",i3=n=>n==="shadow",RL=()=>{const n=nn("color"),e=nn("font"),t=nn("text"),r=nn("font-weight"),i=nn("tracking"),o=nn("leading"),s=nn("breakpoint"),u=nn("container"),c=nn("spacing"),f=nn("radius"),h=nn("shadow"),p=nn("inset-shadow"),v=nn("text-shadow"),y=nn("drop-shadow"),E=nn("blur"),A=nn("perspective"),T=nn("aspect"),N=nn("ease"),P=nn("animate"),M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],H=()=>[...j(),Ae,Ee],W=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],I=()=>[Ae,Ee,c],D=()=>[gu,"full","auto",...I()],O=()=>[Zo,"none","subgrid",Ae,Ee],F=()=>["auto",{span:["full",Zo,Ae,Ee]},Zo,Ae,Ee],U=()=>[Zo,"auto",Ae,Ee],V=()=>["auto","min","max","fr",Ae,Ee],te=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Pe=()=>["start","end","center","stretch","center-safe","end-safe"],Oe=()=>["auto",...I()],_e=()=>[gu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],Z=()=>[n,Ae,Ee],me=()=>[...j(),BE,FE,{position:[Ae,Ee]}],de=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",CL,EL,{size:[Ae,Ee]}],oe=()=>[G1,lc,ra],xe=()=>["","none","full",f,Ae,Ee],Ie=()=>["",$e,lc,ra],Ge=()=>["solid","dashed","dotted","double"],We=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ke=()=>[$e,G1,BE,FE],Ke=()=>["","none",E,Ae,Ee],ie=()=>["none",$e,Ae,Ee],be=()=>["none",$e,Ae,Ee],et=()=>[$e,Ae,Ee],bt=()=>[gu,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[uo],breakpoint:[uo],color:[vL],container:[uo],"drop-shadow":[uo],ease:["in","out","in-out"],font:[wL],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[uo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[uo],shadow:[uo],spacing:["px",$e],text:[uo],"text-shadow":[uo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",gu,Ee,Ae,T]}],container:["container"],columns:[{columns:[$e,Ee,Ae,u]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:H()}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:D()}],"inset-x":[{"inset-x":D()}],"inset-y":[{"inset-y":D()}],start:[{start:D()}],end:[{end:D()}],top:[{top:D()}],right:[{right:D()}],bottom:[{bottom:D()}],left:[{left:D()}],visibility:["visible","invisible","collapse"],z:[{z:[Zo,"auto",Ae,Ee]}],basis:[{basis:[gu,"full","auto",u,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[$e,gu,"auto","initial","none",Ee]}],grow:[{grow:["",$e,Ae,Ee]}],shrink:[{shrink:["",$e,Ae,Ee]}],order:[{order:[Zo,"first","last","none",Ae,Ee]}],"grid-cols":[{"grid-cols":O()}],"col-start-end":[{col:F()}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":O()}],"row-start-end":[{row:F()}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...te(),"normal"]}],"justify-items":[{"justify-items":[...Pe(),"normal"]}],"justify-self":[{"justify-self":["auto",...Pe()]}],"align-content":[{content:["normal",...te()]}],"align-items":[{items:[...Pe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Pe(),{baseline:["","last"]}]}],"place-content":[{"place-content":te()}],"place-items":[{"place-items":[...Pe(),"baseline"]}],"place-self":[{"place-self":["auto",...Pe()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:Oe()}],mx:[{mx:Oe()}],my:[{my:Oe()}],ms:[{ms:Oe()}],me:[{me:Oe()}],mt:[{mt:Oe()}],mr:[{mr:Oe()}],mb:[{mb:Oe()}],ml:[{ml:Oe()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:_e()}],w:[{w:[u,"screen",..._e()]}],"min-w":[{"min-w":[u,"screen","none",..._e()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[s]},..._e()]}],h:[{h:["screen","lh",..._e()]}],"min-h":[{"min-h":["screen","lh","none",..._e()]}],"max-h":[{"max-h":["screen","lh",..._e()]}],"font-size":[{text:["base",t,lc,ra]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ae,W1]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",G1,Ee]}],"font-family":[{font:[TL,Ee,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ae,Ee]}],"line-clamp":[{"line-clamp":[$e,"none",Ae,W1]}],leading:[{leading:[o,...I()]}],"list-image":[{"list-image":["none",Ae,Ee]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ae,Ee]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Z()}],"text-color":[{text:Z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[$e,"from-font","auto",Ae,ra]}],"text-decoration-color":[{decoration:Z()}],"underline-offset":[{"underline-offset":[$e,"auto",Ae,Ee]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ae,Ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ae,Ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:me()}],"bg-repeat":[{bg:de()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Zo,Ae,Ee],radial:["",Ae,Ee],conic:[Zo,Ae,Ee]},IL,AL]}],"bg-color":[{bg:Z()}],"gradient-from-pos":[{from:oe()}],"gradient-via-pos":[{via:oe()}],"gradient-to-pos":[{to:oe()}],"gradient-from":[{from:Z()}],"gradient-via":[{via:Z()}],"gradient-to":[{to:Z()}],rounded:[{rounded:xe()}],"rounded-s":[{"rounded-s":xe()}],"rounded-e":[{"rounded-e":xe()}],"rounded-t":[{"rounded-t":xe()}],"rounded-r":[{"rounded-r":xe()}],"rounded-b":[{"rounded-b":xe()}],"rounded-l":[{"rounded-l":xe()}],"rounded-ss":[{"rounded-ss":xe()}],"rounded-se":[{"rounded-se":xe()}],"rounded-ee":[{"rounded-ee":xe()}],"rounded-es":[{"rounded-es":xe()}],"rounded-tl":[{"rounded-tl":xe()}],"rounded-tr":[{"rounded-tr":xe()}],"rounded-br":[{"rounded-br":xe()}],"rounded-bl":[{"rounded-bl":xe()}],"border-w":[{border:Ie()}],"border-w-x":[{"border-x":Ie()}],"border-w-y":[{"border-y":Ie()}],"border-w-s":[{"border-s":Ie()}],"border-w-e":[{"border-e":Ie()}],"border-w-t":[{"border-t":Ie()}],"border-w-r":[{"border-r":Ie()}],"border-w-b":[{"border-b":Ie()}],"border-w-l":[{"border-l":Ie()}],"divide-x":[{"divide-x":Ie()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ie()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ge(),"hidden","none"]}],"divide-style":[{divide:[...Ge(),"hidden","none"]}],"border-color":[{border:Z()}],"border-color-x":[{"border-x":Z()}],"border-color-y":[{"border-y":Z()}],"border-color-s":[{"border-s":Z()}],"border-color-e":[{"border-e":Z()}],"border-color-t":[{"border-t":Z()}],"border-color-r":[{"border-r":Z()}],"border-color-b":[{"border-b":Z()}],"border-color-l":[{"border-l":Z()}],"divide-color":[{divide:Z()}],"outline-style":[{outline:[...Ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[$e,Ae,Ee]}],"outline-w":[{outline:["",$e,lc,ra]}],"outline-color":[{outline:Z()}],shadow:[{shadow:["","none",h,Zh,Qh]}],"shadow-color":[{shadow:Z()}],"inset-shadow":[{"inset-shadow":["none",p,Zh,Qh]}],"inset-shadow-color":[{"inset-shadow":Z()}],"ring-w":[{ring:Ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Z()}],"ring-offset-w":[{"ring-offset":[$e,ra]}],"ring-offset-color":[{"ring-offset":Z()}],"inset-ring-w":[{"inset-ring":Ie()}],"inset-ring-color":[{"inset-ring":Z()}],"text-shadow":[{"text-shadow":["none",v,Zh,Qh]}],"text-shadow-color":[{"text-shadow":Z()}],opacity:[{opacity:[$e,Ae,Ee]}],"mix-blend":[{"mix-blend":[...We(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":We()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[$e]}],"mask-image-linear-from-pos":[{"mask-linear-from":ke()}],"mask-image-linear-to-pos":[{"mask-linear-to":ke()}],"mask-image-linear-from-color":[{"mask-linear-from":Z()}],"mask-image-linear-to-color":[{"mask-linear-to":Z()}],"mask-image-t-from-pos":[{"mask-t-from":ke()}],"mask-image-t-to-pos":[{"mask-t-to":ke()}],"mask-image-t-from-color":[{"mask-t-from":Z()}],"mask-image-t-to-color":[{"mask-t-to":Z()}],"mask-image-r-from-pos":[{"mask-r-from":ke()}],"mask-image-r-to-pos":[{"mask-r-to":ke()}],"mask-image-r-from-color":[{"mask-r-from":Z()}],"mask-image-r-to-color":[{"mask-r-to":Z()}],"mask-image-b-from-pos":[{"mask-b-from":ke()}],"mask-image-b-to-pos":[{"mask-b-to":ke()}],"mask-image-b-from-color":[{"mask-b-from":Z()}],"mask-image-b-to-color":[{"mask-b-to":Z()}],"mask-image-l-from-pos":[{"mask-l-from":ke()}],"mask-image-l-to-pos":[{"mask-l-to":ke()}],"mask-image-l-from-color":[{"mask-l-from":Z()}],"mask-image-l-to-color":[{"mask-l-to":Z()}],"mask-image-x-from-pos":[{"mask-x-from":ke()}],"mask-image-x-to-pos":[{"mask-x-to":ke()}],"mask-image-x-from-color":[{"mask-x-from":Z()}],"mask-image-x-to-color":[{"mask-x-to":Z()}],"mask-image-y-from-pos":[{"mask-y-from":ke()}],"mask-image-y-to-pos":[{"mask-y-to":ke()}],"mask-image-y-from-color":[{"mask-y-from":Z()}],"mask-image-y-to-color":[{"mask-y-to":Z()}],"mask-image-radial":[{"mask-radial":[Ae,Ee]}],"mask-image-radial-from-pos":[{"mask-radial-from":ke()}],"mask-image-radial-to-pos":[{"mask-radial-to":ke()}],"mask-image-radial-from-color":[{"mask-radial-from":Z()}],"mask-image-radial-to-color":[{"mask-radial-to":Z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[$e]}],"mask-image-conic-from-pos":[{"mask-conic-from":ke()}],"mask-image-conic-to-pos":[{"mask-conic-to":ke()}],"mask-image-conic-from-color":[{"mask-conic-from":Z()}],"mask-image-conic-to-color":[{"mask-conic-to":Z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:me()}],"mask-repeat":[{mask:de()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ae,Ee]}],filter:[{filter:["","none",Ae,Ee]}],blur:[{blur:Ke()}],brightness:[{brightness:[$e,Ae,Ee]}],contrast:[{contrast:[$e,Ae,Ee]}],"drop-shadow":[{"drop-shadow":["","none",y,Zh,Qh]}],"drop-shadow-color":[{"drop-shadow":Z()}],grayscale:[{grayscale:["",$e,Ae,Ee]}],"hue-rotate":[{"hue-rotate":[$e,Ae,Ee]}],invert:[{invert:["",$e,Ae,Ee]}],saturate:[{saturate:[$e,Ae,Ee]}],sepia:[{sepia:["",$e,Ae,Ee]}],"backdrop-filter":[{"backdrop-filter":["","none",Ae,Ee]}],"backdrop-blur":[{"backdrop-blur":Ke()}],"backdrop-brightness":[{"backdrop-brightness":[$e,Ae,Ee]}],"backdrop-contrast":[{"backdrop-contrast":[$e,Ae,Ee]}],"backdrop-grayscale":[{"backdrop-grayscale":["",$e,Ae,Ee]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[$e,Ae,Ee]}],"backdrop-invert":[{"backdrop-invert":["",$e,Ae,Ee]}],"backdrop-opacity":[{"backdrop-opacity":[$e,Ae,Ee]}],"backdrop-saturate":[{"backdrop-saturate":[$e,Ae,Ee]}],"backdrop-sepia":[{"backdrop-sepia":["",$e,Ae,Ee]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ae,Ee]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[$e,"initial",Ae,Ee]}],ease:[{ease:["linear","initial",N,Ae,Ee]}],delay:[{delay:[$e,Ae,Ee]}],animate:[{animate:["none",P,Ae,Ee]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[A,Ae,Ee]}],"perspective-origin":[{"perspective-origin":H()}],rotate:[{rotate:ie()}],"rotate-x":[{"rotate-x":ie()}],"rotate-y":[{"rotate-y":ie()}],"rotate-z":[{"rotate-z":ie()}],scale:[{scale:be()}],"scale-x":[{"scale-x":be()}],"scale-y":[{"scale-y":be()}],"scale-z":[{"scale-z":be()}],"scale-3d":["scale-3d"],skew:[{skew:et()}],"skew-x":[{"skew-x":et()}],"skew-y":[{"skew-y":et()}],transform:[{transform:[Ae,Ee,"","none","gpu","cpu"]}],"transform-origin":[{origin:H()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:bt()}],"translate-x":[{"translate-x":bt()}],"translate-y":[{"translate-y":bt()}],"translate-z":[{"translate-z":bt()}],"translate-none":["translate-none"],accent:[{accent:Z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ae,Ee]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ae,Ee]}],fill:[{fill:["none",...Z()]}],"stroke-w":[{stroke:[$e,lc,ra,W1]}],stroke:[{stroke:["none",...Z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},PL=cL(RL);function bs(...n){return PL(qS(n))}const NL=KS("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),$t=B.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},o)=>{const s=r?W7:"button";return S.jsx(s,{className:bs(NL({variant:e,size:t,className:n})),ref:o,...i})});$t.displayName="Button";const DL=1,OL=1e6;let $1=0;function kL(){return $1=($1+1)%Number.MAX_SAFE_INTEGER,$1.toString()}const q1=new Map,UE=n=>{if(q1.has(n))return;const e=setTimeout(()=>{q1.delete(n),Mc({type:"REMOVE_TOAST",toastId:n})},OL);q1.set(n,e)},ML=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,DL)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?UE(t):n.toasts.forEach(r=>{UE(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Ed=[];let Ad={toasts:[]};function Mc(n){Ad=ML(Ad,n),Ed.forEach(e=>{e(Ad)})}function LL({...n}){const e=kL(),t=i=>Mc({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Mc({type:"DISMISS_TOAST",toastId:e});return Mc({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function Dp(){const[n,e]=B.useState(Ad);return B.useEffect(()=>(Ed.push(e),()=>{const t=Ed.indexOf(e);t>-1&&Ed.splice(t,1)}),[n]),{...n,toast:LL,dismiss:t=>Mc({type:"DISMISS_TOAST",toastId:t})}}const VL=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...n,children:S.jsx("path",{d:"M20.283 10.356h-8.327v3.451h4.792c-.446 2.193-2.313 3.453-4.792 3.453a5.27 5.27 0 0 1-5.279-5.28 5.27 5.27 0 0 1 5.279-5.279c1.259 0 2.397.447 3.29 1.178l2.6-2.599c-1.584-1.381-3.615-2.233-5.89-2.233a8.908 8.908 0 0 0-8.934 8.934 8.908 8.908 0 0 0 8.934 8.934c4.956 0 8.641-3.52 8.641-8.781 0-.593-.053-1.165-.154-1.722z"})}),FL=()=>{const[n,e]=B.useState(null),{toast:t}=Dp(),r=async()=>{e("google");try{if(!Fu||!kc)throw new Error("Firebase no est configurado o el proveedor de Google no est disponible.");await fk(Fu,kc)}catch(i){console.error(i);const o=i&&i.code?String(i.code):"";if(o==="auth/popup-blocked")try{await vk(Fu,kc);return}catch(u){console.error("Fallback a redirect fall:",u)}let s=i&&(i.message||i.code)?String(i.message||i.code):"No se pudo iniciar sesin con Google.";o==="auth/operation-not-allowed"?s="El proveedor de Google no est habilitado. Ve a Firebase Console > Authentication > Sign-in method y habilita Google (elige un Support email) y guarda.":o==="auth/unauthorized-domain"&&(s="Dominio no autorizado. En Firebase Console > Authentication > Settings > Authorized domains, agrega localhost y 127.0.0.1 (los puertos no importan)."),t({title:"Error con Google",description:s,variant:"destructive"})}e(!1)};return S.jsxs(Tr.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"flex-grow flex items-center justify-center p-4",children:[S.jsx(Tg,{children:S.jsx("title",{children:"Iniciar Sesin - Borea Wallet"})}),S.jsxs("div",{className:"w-full max-w-md sm:w-[420px] p-8 rounded-2xl glass-effect",children:[S.jsx("h2",{className:"text-3xl font-bold text-center mb-2",children:S.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-boreal-aqua to-boreal-blue",children:"Accede a tu Wallet"})}),S.jsx("p",{className:"text-center text-gray-300 mb-8",children:"Inicia sesin con tu cuenta de Google para ver tus certificados."}),S.jsxs("div",{className:"relative my-6",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("span",{className:"w-full border-t border-white/20"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"bg-boreal-dark px-2 text-gray-400",children:"o"})})]}),S.jsxs($t,{variant:"outline",className:"w-full border-white/30 text-white bg-transparent hover:bg-white/10",onClick:r,disabled:n==="google",children:[n==="google"?S.jsx(Jc,{className:"w-5 h-5 animate-spin"}):S.jsx(VL,{className:"w-5 h-5 mr-2"}),"Ingresar con Google"]})]})]})};var Ca=RA();const BL=Qu(Ca);function o3(n,e){const t=Zn(yt,"userPoints",n);return Ts(t,r=>{r.exists()?e(r.data()):e({balance:0})})}function UL(n,e,t=20){const r=cr(yt,"userPoints",n,"redemptions"),i=Ui(r,Pp("redeemedAt","desc"),Aa(t));return Ts(i,o=>{const s=[];o.forEach(u=>s.push({id:u.id,...u.data()})),e(s)})}function jL(n,e,t=20){const r=cr(yt,"userPoints",n,"purchases"),i=Ui(r,Pp("purchasedAt","desc"),Aa(t));return Ts(i,o=>{const s=[];o.forEach(u=>s.push({id:u.id,...u.data()})),e(s)})}function zL(n,e,t=20){const r=cr(yt,"userPoints",n,"adminGrants"),i=Ui(r,Pp("grantedAt","desc"),Aa(t));return Ts(i,o=>{const s=[];o.forEach(u=>s.push({id:u.id,...u.data()})),e(s)})}async function HL(n,e,t,r=""){const i=String(n||"").trim().toLowerCase(),o=Number(e);if(!i)throw new Error("Correo requerido");if(!o||o<=0)throw new Error("Monto de puntos invlido");const s=cr(yt,"userPoints"),u=Ui(s,Xu("email","==",i),Aa(1)),c=await Jm(u);if(c.empty)throw new Error("No se encontr un usuario con ese correo. Pdele que inicie sesin primero.");const h=c.docs[0].id,p=Zn(yt,"userPoints",h),v=cr(yt,"userPoints",h,"adminGrants");return await oy(yt,async y=>{(await y.get(p)).exists()?y.update(p,{balance:Jd(o),updatedAt:ar(),email:i}):y.set(p,{balance:o,updatedAt:ar(),email:i});const A=Zn(v);y.set(A,{amount:o,email:i,note:r||"",grantedAt:ar(),grantedBy:t||null,type:"manual-award"})}),{email:i,amount:o,uid:h}}async function s3(n){const e=String(n).trim();if(!e)throw new Error("Cdigo vaco");const t=Zn(yt,"pointCodes",e),r=await p7(t);if(r.exists())return{ref:t,snap:r};const i=Ui(cr(yt,"pointCodes"),Xu("code","==",e),Aa(1));let o=await Jm(i);if(!o.empty){const u=o.docs[0];return{ref:u.ref,snap:u}}const s=Ui(cr(yt,"pointCodes"),Xu("id","==",e),Aa(1));if(o=await Jm(s),!o.empty){const u=o.docs[0];return{ref:u.ref,snap:u}}throw new Error("Cdigo no vlido")}async function GL(n){const{snap:e}=await s3(n),t=e.data();let r=null;try{t.expiresAt?.toDate&&(r=t.expiresAt.toDate())}catch{}return{id:String(n).trim(),...t,expiresAt:r}}async function WL(n,e,t){if(!n)throw new Error("Usuario no autenticado");const r=String(e).trim();if(!r)throw new Error("Cdigo vaco");const{ref:i}=await s3(r),o=Zn(yt,"userPoints",n),s=Zn(cr(yt,"userPoints",n,"redemptions"),r);return oy(yt,async u=>{const[c,f]=await Promise.all([u.get(i),u.get(o)]);if(!c.exists())throw new Error("Cdigo no vlido");const h=c.data(),p=!!h.multiUse;if(!p&&(h.used||h.active===!1))throw new Error("Cdigo ya utilizado");if(p&&h.active===!1)throw new Error("Cdigo inactivo");const v=Number(h.amount||0);if(!v||Number.isNaN(v))throw new Error("Cdigo invlido (monto)");if(h.expiresAt?.toDate&&h.expiresAt.toDate()<new Date)throw new Error("El cdigo expir");let y,E;if(p){const T=cr(i,"uses");if(y=Zn(T,n),E=await u.get(y),E.exists())throw new Error("Ya usaste este cdigo")}p?(u.set(y,{uid:n,usedAt:ar(),userEmail:t||null}),u.update(i,{redeemedCount:Jd(1),lastUsedAt:ar()})):u.update(i,{used:!0,active:!1,usedBy:n,usedAt:ar(),userEmail:t||null});const A=(t||"").toLowerCase()||null;return f.exists()?u.update(o,{balance:Jd(v),updatedAt:ar(),email:A}):u.set(o,{balance:v,updatedAt:ar(),email:A}),u.set(s,{code:r,amount:v,redeemedAt:ar(),userEmail:A}),{amount:v}})}const wr=B.forwardRef(({className:n,type:e,...t},r)=>S.jsx("input",{type:e,className:bs("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));wr.displayName="Input";function $L(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function qL(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var KL=(function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),XL=(function(n){KL(e,n);function e(t,r){var i=this.constructor,o=n.call(this,t,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),$L(o,i.prototype),qL(o),o}return e})(Error),YL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),fr=(function(n){YL(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(XL),QL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ni=(function(n){QL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e})(fr),ZL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ve=(function(n){ZL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(fr),JL=(function(){function n(e){if(this.binarizer=e,e===null)throw new Ve("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var o=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(o))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n})(),eV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_n=(function(n){eV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(fr),tV=(function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n})(),wt=(function(){function n(){}return n.arraycopy=function(e,t,r,i,o){for(;o--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n})(),nV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ay=(function(n){nV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(fr),rV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jE=(function(n){rV(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(ay),iV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},un=(function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var o=t;o<r;o++)e[o]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Ve("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new jE(t);if(r>e)throw new jE(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var o=iV(e),s=o.next();!s.done;s=o.next()){var u=s.value;i=31*i+u}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,o=new Int32Array(i);return wt.arraycopy(e,t,o,0,i),o},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,u=r(t,e[s]);if(u>0)i=s+1;else if(u<0)o=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n})(),Ye=(function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),xn=(function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);wt.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=r[i]}var u=i*32+Ye.numberOfTrailingZeros(o);return u>t?t:u},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=~r[i]}var u=i*32+Ye.numberOfTrailingZeros(o);return u>t?t:u},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Ve;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,s=r;s<=i;s++){var u=s>r?0:e&31,c=s<i?31:t&31,f=(2<<c)-(1<<u);o[s]|=f}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Ve;if(t===e)return!0;t--;for(var i=Math.floor(e/32),o=Math.floor(t/32),s=this.bits,u=i;u<=o;u++){var c=u>i?0:e&31,f=u<o?31:t&31,h=(2<<f)-(1<<c)&4294967295;if((s[u]&h)!==(r?h:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Ve("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Ve("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var o=0;o<i;o++){for(var s=0,u=0;u<8;u++)this.get(e)&&(s|=1<<7-u),e++;t[r+o]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,o=0;o<r;o++){var s=i[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-o]=s}if(this.size!==r*32){for(var u=r*32-this.size,c=e[0]>>>u,o=1;o<r;o++){var f=e[o];c|=f<<32-u,e[o-1]=c,c=f>>>u}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&un.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+un.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n})(),ig;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ASSUME_GS1=7]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ig||(ig={}));const kt=ig;var oV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),he=(function(n){oV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(fr),sV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pt;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(pt||(pt={}));var an=(function(){function n(e,t,r){for(var i,o,s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,f=0,h=c.length;f!==h;f++){var p=c[f];n.VALUES_TO_ECI.set(p,this)}try{for(var v=sV(s),y=v.next();!y.done;y=v.next()){var E=y.value;n.NAME_TO_ECI.set(E,this)}}catch(A){i={error:A}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new he("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new he("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new he("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(pt.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(pt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(pt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(pt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(pt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(pt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(pt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(pt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(pt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(pt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(pt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(pt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(pt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(pt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(pt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(pt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(pt.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(pt.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(pt.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(pt.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(pt.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(pt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(pt.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(pt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(pt.Big5,28,"Big5"),n.GB18030=new n(pt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(pt.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),aV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Td=(function(n){aV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(fr),Gr=(function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof an?e:an.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",o=0,s=e.length;o<s;o++){var u=e[o].toString(16);u.length<2&&(u="0"+u),i+="%"+u}return decodeURIComponent(i)}if(r.equals(an.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Td("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(an.UTF8)||e.equals(an.ISO8859_1)||e.equals(an.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],o=0;o<r.length;o++)i.push(r[o].charCodeAt(0));return new Uint8Array(i)},n})(),rt=(function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return Gr.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(kt.CHARACTER_SET)!==void 0)return t.get(kt.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,s=!0,u=0,c=0,f=0,h=0,p=0,v=0,y=0,E=0,A=0,T=0,N=0,P=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,M=0;M<r&&(i||o||s);M++){var j=e[M]&255;s&&(u>0?(j&128)===0?s=!1:u--:(j&128)!==0&&((j&64)===0?s=!1:(u++,(j&32)===0?c++:(u++,(j&16)===0?f++:(u++,(j&8)===0?h++:s=!1))))),i&&(j>127&&j<160?i=!1:j>159&&(j<192||j===215||j===247)&&N++),o&&(p>0?j<64||j===127||j>252?o=!1:p--:j===128||j===160||j>239?o=!1:j>160&&j<224?(v++,E=0,y++,y>A&&(A=y)):j>127?(p++,y=0,E++,E>T&&(T=E)):(y=0,E=0))}return s&&u>0&&(s=!1),o&&p>0&&(o=!1),s&&(P||c+f+h>0)?n.UTF8:o&&(n.ASSUME_SHIFT_JIS||A>=3||T>=3)?n.SHIFT_JIS:i&&o?A===2&&v===2||N*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:o?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function o(u,c,f,h,p,v){if(u==="%%")return"%";if(t[++i]!==void 0){u=h?parseInt(h.substr(1)):void 0;var y=p?parseInt(p.substr(1)):void 0,E;switch(v){case"s":E=t[i];break;case"c":E=t[i][0];break;case"f":E=parseFloat(t[i]).toFixed(u);break;case"p":E=parseFloat(t[i]).toPrecision(u);break;case"e":E=parseFloat(t[i]).toExponential(u);break;case"x":E=parseInt(t[i]).toString(y||16);break;case"d":E=parseFloat(parseInt(t[i],y||10).toPrecision(u)).toFixed(0);break}E=typeof E=="object"?JSON.stringify(E):(+E).toString(y);for(var A=parseInt(f),T=f&&f[0]+""=="0"?"0":" ";E.length<A;)E=c!==void 0?E+T:T+E;return E}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)},n.getBytes=function(e,t){return Gr.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=an.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=an.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=an.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),qe=(function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=rt.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n})(),ji=(function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Ve("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),o=0;o<t;o++)for(var s=e[o],u=0;u<r;u++)s[u]&&i.set(u,o);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Ve("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,u=-1,c=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(o>s){if(u===-1)u=o-s;else if(o-s!==u)throw new Ve("row lengths do not match");s=o,c++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,i[o]=!0,o++;else if(e.substring(f,f+r.length)===r)f+=r.length,i[o]=!1,o++;else throw new Ve("illegal character encountered: "+e.substring(f));if(o>s){if(u===-1)u=o-s;else if(o-s!==u)throw new Ve("row lengths do not match");c++}for(var h=new n(u,c),p=0;p<o;p++)i[p]&&h.set(Math.floor(p%u),Math.floor(p/u));return h},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Ve("input matrix dimensions do not match");for(var t=new xn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var u=o*r,c=e.getRow(o,t).getBitArray(),f=0;f<r;f++)i[u+f]^=c[f]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Ve("Left and top must be nonnegative");if(i<1||r<1)throw new Ve("Height and width must be at least 1");var o=e+r,s=t+i;if(s>this.height||o>this.width)throw new Ve("The region must fit inside the matrix");for(var u=this.rowSize,c=this.bits,f=t;f<s;f++)for(var h=f*u,p=e;p<o;p++)c[h+Math.floor(p/32)]|=1<<(p&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new xn(this.width):t.clear();for(var r=this.rowSize,i=this.bits,o=e*r,s=0;s<r;s++)t.setBulk(s*32,i[o+s]);return t},n.prototype.setRow=function(e,t){wt.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new xn(e),i=new xn(e),o=0,s=Math.floor((t+1)/2);o<s;o++)r=this.getRow(o,r),i=this.getRow(t-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(t-1-o,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,o=e,s=t,u=-1,c=-1,f=0;f<t;f++)for(var h=0;h<r;h++){var p=i[f*r+h];if(p!==0){if(f<s&&(s=f),f>c&&(c=f),h*32<o){for(var v=0;(p<<31-v&4294967295)===0;)v++;h*32+v<o&&(o=h*32+v)}if(h*32+31>u){for(var v=31;!(p>>>v);)v--;h*32+v>u&&(u=h*32+v)}}}return u<o||c<s?null:Int32Array.from([o,s,u-o+1,c-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,o=r%e*32,s=t[r],u=0;(s<<31-u&4294967295)===0;)u++;return o+=u,Int32Array.from([o,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=Math.floor(r%e)*32,s=t[r],u=31;!(s>>>u);)u--;return o+=u,Int32Array.from([o,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&un.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+un.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new qe,o=0,s=this.height;o<s;o++){for(var u=0,c=this.width;u<c;u++)i.append(this.get(u,o)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),uV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ne=(function(n){uV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(fr),lV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),cV=(function(n){lV(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new xn(o):r.clear(),this.initArrays(o);for(var s=i.getRow(t,this.luminances),u=this.buckets,c=0;c<o;c++)u[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(u);if(o<3)for(var c=0;c<o;c++)(s[c]&255)<f&&r.set(c);else for(var h=s[0]&255,p=s[1]&255,c=1;c<o-1;c++){var v=s[c+1]&255;(p*4-h-v)/2<f&&r.set(c),h=p,p=v}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),o=new ji(r,i);this.initArrays(r);for(var s=this.buckets,u=1;u<5;u++)for(var c=Math.floor(i*u/5),f=t.getRow(c,this.luminances),h=Math.floor(r*4/5),p=Math.floor(r/5);p<h;p++){var v=f[p]&255;s[v>>e.LUMINANCE_SHIFT]++}for(var y=e.estimateBlackPoint(s),E=t.getMatrix(),u=0;u<i;u++)for(var A=u*r,p=0;p<r;p++){var v=E[A+p]&255;v<y&&o.set(p,u)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,o=0,s=0,u=0;u<r;u++)t[u]>s&&(o=u,s=t[u]),t[u]>i&&(i=t[u]);for(var c=0,f=0,u=0;u<r;u++){var h=u-o,p=t[u]*h*h;p>f&&(c=u,f=p)}if(o>c){var v=o;o=c,c=v}if(c-o<=r/16)throw new ne;for(var y=c-1,E=-1,u=c-1;u>o;u--){var A=u-o,p=A*A*(c-u)*(i-t[u]);p>E&&(y=u,E=p)}return y<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(tV),fV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),hV=(function(n){fV(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var u=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&u++;var c=e.calculateBlackPoints(o,s,u,r,i),f=new ji(r,i);e.calculateThresholdForBlock(o,s,u,r,i,c,f),this.matrix=f}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,o,s,u,c){for(var f=s-e.BLOCK_SIZE,h=o-e.BLOCK_SIZE,p=0;p<i;p++){var v=p<<e.BLOCK_SIZE_POWER;v>f&&(v=f);for(var y=e.cap(p,2,i-3),E=0;E<r;E++){var A=E<<e.BLOCK_SIZE_POWER;A>h&&(A=h);for(var T=e.cap(E,2,r-3),N=0,P=-2;P<=2;P++){var M=u[y+P];N+=M[T-2]+M[T-1]+M[T]+M[T+1]+M[T+2]}var j=N/25;e.thresholdBlock(t,A,v,j,o,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,o,s,u){for(var c=0,f=i*s+r;c<e.BLOCK_SIZE;c++,f+=s)for(var h=0;h<e.BLOCK_SIZE;h++)(t[f+h]&255)<=o&&u.set(r+h,i+c)},e.calculateBlackPoints=function(t,r,i,o,s){for(var u=s-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,f=new Array(i),h=0;h<i;h++){f[h]=new Int32Array(r);var p=h<<e.BLOCK_SIZE_POWER;p>u&&(p=u);for(var v=0;v<r;v++){var y=v<<e.BLOCK_SIZE_POWER;y>c&&(y=c);for(var E=0,A=255,T=0,N=0,P=p*o+y;N<e.BLOCK_SIZE;N++,P+=o){for(var M=0;M<e.BLOCK_SIZE;M++){var j=t[P+M]&255;E+=j,j<A&&(A=j),j>T&&(T=j)}if(T-A>e.MIN_DYNAMIC_RANGE)for(N++,P+=o;N<e.BLOCK_SIZE;N++,P+=o)for(var M=0;M<e.BLOCK_SIZE;M++)E+=t[P+M]&255}var H=E>>e.BLOCK_SIZE_POWER*2;if(T-A<=e.MIN_DYNAMIC_RANGE&&(H=A/2,h>0&&v>0)){var W=(f[h-1][v]+2*f[h][v-1]+f[h-1][v-1])/4;A<W&&(H=W)}f[h][v]=H}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(cV),Op=(function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new Td("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new Td("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new Td("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new qe,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var s=i[o]&255,u=void 0;s<64?u="#":s<128?u="+":s<192?u=".":u=" ",t.append(u)}t.append(`
`)}return t.toString()},n})(),dV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),uy=(function(n){dV(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(t[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,o){return new e(this.delegate.crop(t,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(Op),pV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mV=(function(n){pV(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(r.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX)for(var s=0,u=0,c=t.length;s<c;s+=4,u++){var f=void 0,h=t[s+3];if(h===0)f=255;else{var p=t[s],v=t[s+1],y=t[s+2];f=306*p+601*v+117*y+512>>10}o[u]=f}else for(var s=0,u=0,E=t.length;s<E;s+=4,u++){var f=void 0,h=t[s+3];if(h===0)f=255;else{var p=t[s],v=t[s+1],y=t[s+2];f=306*p+601*v+117*y+512>>10}o[u]=255-f}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ve("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return n.prototype.crop.call(this,t,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,u=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*u),f=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*u);return r.width=c,r.height=f,i.translate(c/2,f/2),i.rotate(o),i.drawImage(this.canvas,s/-2,u/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new uy(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(Op),gV=(function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n})(),qn=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{f(r.next(h))}catch(p){s(p)}}function c(h){try{f(r.throw(h))}catch(p){s(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(n,e||[])).next())})},Kn=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(h){f=[6,h],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},vV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fl=(function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return qn(this,void 0,void 0,function(){var e,t,r,i,o,s,u,c,f,h,p,v;return Kn(this,function(y){switch(y.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=y.sent(),t=[];try{for(r=vV(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(u=o.deviceId||o.id,c=o.label||"Video device "+(t.length+1),f=o.groupId,h={deviceId:u,label:c,kind:s,groupId:f},t.push(h))}catch(E){p={error:E}}finally{try{i&&!i.done&&(v=r.return)&&v.call(r)}finally{if(p)throw p.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return qn(this,void 0,void 0,function(){var e;return Kn(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new gV(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return qn(this,void 0,void 0,function(){var t;return Kn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return qn(this,void 0,void 0,function(){return Kn(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return qn(this,void 0,void 0,function(){var r,i;return Kn(this,function(o){switch(o.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return qn(this,void 0,void 0,function(){var r;return Kn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return qn(this,void 0,void 0,function(){var r,i;return Kn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=o.sent(),[4,this.decodeOnce(r)];case 2:return i=o.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return qn(this,void 0,void 0,function(){return Kn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return qn(this,void 0,void 0,function(){var i,o;return Kn(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return qn(this,void 0,void 0,function(){var i;return Kn(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,o.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return qn(this,void 0,void 0,function(){var i;return Kn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return qn(this,void 0,void 0,function(){var r;return Kn(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return qn(this,void 0,void 0,function(){return Kn(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new ni("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new ni("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new ni("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new ni("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new ni("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new ni("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new ni("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new ni("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new ni("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new ni("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return qn(this,void 0,void 0,function(){return Kn(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return qn(this,void 0,void 0,function(){return Kn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var o=function(s,u){if(i._stopAsyncDecode){u(new ne("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(v){var f=t&&v instanceof ne,h=v instanceof _n||v instanceof he,p=h&&r;if(f||p)return setTimeout(o,i._timeBetweenDecodingAttempts,s,u);u(v)}};return new Promise(function(s,u){return o(s,u)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var o=r.decode(e);t(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var s=c instanceof _n||c instanceof he,u=c instanceof ne;(s||u)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e),e instanceof HTMLVideoElement?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var t=this.getCaptureCanvas(e),r=new mV(t),i=new hV(r);return new JL(i)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n})(),Gn=(function(){function n(e,t,r,i,o,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=wt.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=o,this.resultMetadata=null,s==null?this.timestamp=wt.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);wt.arraycopy(t,0,r,0,t.length),wt.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n})(),og;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(og||(og={}));const Ne=og;var sg;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(sg||(sg={}));const Nn=sg;var kp=(function(){function n(e,t,r,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n})(),yc=(function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Ve;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n})(),ps=(function(){function n(e,t){if(t.length===0)throw new Ve;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),wt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,o=t.length;i!==o;i++){var s=t[i];r=yc.addOrSubtract(r,s)}return r}r=t[0];for(var u=t.length,c=this.field,i=1;i<u;i++)r=yc.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Ve("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;wt.arraycopy(r,0,o,0,s);for(var u=s;u<r.length;u++)o[u]=yc.addOrSubtract(t[u-s],r[u]);return new n(this.field,o)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Ve("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),u=this.field,c=0;c<r;c++)for(var f=t[c],h=0;h<o;h++)s[c+h]=yc.addOrSubtract(s[c+h],u.multiply(f,i[h]));return new n(u,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),o=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(o[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ve;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),s=this.field,u=0;u<i;u++)o[u]=s.multiply(r[u],t);return new n(s,o)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Ve("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Ve("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=t.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var u=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),s),f=e.multiplyByMonomial(u,c),h=t.buildMonomial(u,c);r=r.addOrSubtract(h),i=i.addOrSubtract(f)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n})(),yV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),a3=(function(n){yV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(fr),_V=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ur=(function(n){_V(e,n);function e(t,r,i){var o=n.call(this)||this;o.primitive=t,o.size=r,o.generatorBase=i;for(var s=new Int32Array(r),u=1,c=0;c<r;c++)s[c]=u,u*=2,u>=r&&(u^=t,u&=r-1);o.expTable=s;for(var f=new Int32Array(r),c=0;c<r-1;c++)f[s[c]]=c;return o.logTable=f,o.zero=new ps(o,Int32Array.from([0])),o.one=new ps(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Ve;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new ps(this,i)},e.prototype.inverse=function(t){if(t===0)throw new a3;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Ye.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(yc),xV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Jh=(function(n){xV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(fr),wV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ef=(function(n){wV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(fr),Mp=(function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new ps(r,e),o=new Int32Array(t),s=!0,u=0;u<t;u++){var c=i.evaluateAt(r.exp(u+r.getGeneratorBase()));o[o.length-1-u]=c,c!==0&&(s=!1)}if(!s)for(var f=new ps(r,o),h=this.runEuclideanAlgorithm(r.buildMonomial(t,1),f,t),p=h[0],v=h[1],y=this.findErrorLocations(p),E=this.findErrorMagnitudes(v,y),u=0;u<y.length;u++){var A=e.length-1-r.log(y[u]);if(A<0)throw new Jh("Bad error location");e[A]=ur.addOrSubtract(e[A],E[u])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=this.field,s=e,u=t,c=o.getZero(),f=o.getOne();u.getDegree()>=(r/2|0);){var h=s,p=c;if(s=u,c=f,s.isZero())throw new Jh("r_{i-1} was zero");u=h;for(var v=o.getZero(),y=s.getCoefficient(s.getDegree()),E=o.inverse(y);u.getDegree()>=s.getDegree()&&!u.isZero();){var A=u.getDegree()-s.getDegree(),T=o.multiply(u.getCoefficient(u.getDegree()),E);v=v.addOrSubtract(o.buildMonomial(A,T)),u=u.addOrSubtract(s.multiplyByMonomial(A,T))}if(f=v.multiply(c).addOrSubtract(p),u.getDegree()>=s.getDegree())throw new Ef("Division algorithm failed to reduce polynomial?")}var N=f.getCoefficient(0);if(N===0)throw new Jh("sigmaTilde(0) was zero");var P=o.inverse(N),M=f.multiplyScalar(P),j=u.multiplyScalar(P);return[M,j]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,o=this.field,s=1;s<o.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=o.inverse(s),i++);if(i!==t)throw new Jh("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),o=this.field,s=0;s<r;s++){for(var u=o.inverse(t[s]),c=1,f=0;f<r;f++)if(s!==f){var h=o.multiply(t[f],u),p=(h&1)===0?h|1:h&-2;c=o.multiply(c,p)}i[s]=o.multiply(e.evaluateAt(u),o.inverse(c)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],u))}return i},n})(),Cn;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Cn||(Cn={}));var zE=(function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),o=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),u=new kp(o,s,null,null);return u.setNumBits(i.length),u},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=Cn.UPPER,i=Cn.UPPER,o="",s=0;s<t;)if(i===Cn.BINARY){if(t-s<5)break;var u=n.readCode(e,s,5);if(s+=5,u===0){if(t-s<11)break;u=n.readCode(e,s,11)+31,s+=11}for(var c=0;c<u;c++){if(t-s<8){s=t;break}var f=n.readCode(e,s,8);o+=rt.castAsNonUtf8Char(f),s+=8}i=r}else{var h=i===Cn.DIGIT?4:5;if(t-s<h)break;var f=n.readCode(e,s,h);s+=h;var p=n.getCharacter(i,f);p.startsWith("CTRL_")?(r=i,i=n.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(o+=p,i=r)}return o},n.getTable=function(e){switch(e){case"L":return Cn.LOWER;case"P":return Cn.PUNCT;case"M":return Cn.MIXED;case"D":return Cn.DIGIT;case"B":return Cn.BINARY;case"U":default:return Cn.UPPER}},n.getCharacter=function(e,t){switch(e){case Cn.UPPER:return n.UPPER_TABLE[t];case Cn.LOWER:return n.LOWER_TABLE[t];case Cn.MIXED:return n.MIXED_TABLE[t];case Cn.PUNCT:return n.PUNCT_TABLE[t];case Cn.DIGIT:return n.DIGIT_TABLE[t];default:throw new Ef("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=ur.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=ur.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=ur.AZTEC_DATA_10):(r=12,t=ur.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new he;for(var s=e.length%r,u=new Int32Array(o),c=0;c<o;c++,s+=r)u[c]=n.readCode(e,s,r);try{var f=new Mp(t);f.decode(u,o-i)}catch(T){throw new he(T)}for(var h=(1<<r)-1,p=0,c=0;c<i;c++){var v=u[c];if(v===0||v===h)throw new he;(v===1||v===h-1)&&p++}for(var y=new Array(i*r-p),E=0,c=0;c<i;c++){var v=u[c];if(v===1||v===h-1)y.fill(v>1,E,E+r-1),E+=r-1;else for(var A=r-1;A>=0;--A)y[E++]=(v&1<<A)!==0}return y},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var u=0;u<o.length;u++)o[u]=u;else for(var c=i+1+2*Ye.truncDivision(Ye.truncDivision(i,2)-1,15),f=i/2,h=Ye.truncDivision(c,2),u=0;u<f;u++){var p=u+Ye.truncDivision(u,15);o[f-u-1]=h-p-1,o[f+u]=h+p+1}for(var u=0,v=0;u<r;u++){for(var y=(r-u)*4+(t?9:12),E=u*2,A=i-1-E,T=0;T<y;T++)for(var N=T*2,P=0;P<2;P++)s[v+N+P]=e.get(o[E+P],o[E+T]),s[v+2*y+N+P]=e.get(o[E+T],o[A-P]),s[v+4*y+N+P]=e.get(o[A-P],o[A-T]),s[v+6*y+N+P]=e.get(o[A-T],o[E+P]);v+=y*8}return s},n.readCode=function(e,t,r){for(var i=0,o=t;o<t+r;o++)i<<=1,e[o]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n})(),ut=(function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var o=e-r,s=t-i;return Math.sqrt(o*o+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var o=e[r];t+=o}return t},n})(),ag=(function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),Ce=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*ag.floatToIntBits(this.x)+ag.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,s,u;if(r>=t&&r>=i?(s=e[0],o=e[1],u=e[2]):i>=r&&i>=t?(s=e[1],o=e[0],u=e[2]):(s=e[2],o=e[0],u=e[1]),this.crossProductZ(o,s,u)<0){var c=o;o=u,u=c}e[0]=o,e[1]=s,e[2]=u},n.distance=function(e,t){return ut.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,o=t.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},n})(),ly=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),EV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),AV=(function(n){EV(e,n);function e(t,r,i,o,s){var u=n.call(this,t,r)||this;return u.compact=i,u.nbDatablocks=o,u.nbLayers=s,u}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(ly),ug=(function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=t/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ne}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,o=!1,s=!0,u=!1,c=!1,f=!1,h=!1,p=!1,v=this.width,y=this.height;s;){s=!1;for(var E=!0;(E||!c)&&t<v;)E=this.containsBlackPoint(r,i,t,!1),E?(t++,s=!0,c=!0):c||t++;if(t>=v){o=!0;break}for(var A=!0;(A||!f)&&i<y;)A=this.containsBlackPoint(e,t,i,!0),A?(i++,s=!0,f=!0):f||i++;if(i>=y){o=!0;break}for(var T=!0;(T||!h)&&e>=0;)T=this.containsBlackPoint(r,i,e,!1),T?(e--,s=!0,h=!0):h||e--;if(e<0){o=!0;break}for(var N=!0;(N||!p)&&r>=0;)N=this.containsBlackPoint(e,t,r,!0),N?(r--,s=!0,p=!0):p||r--;if(r<0){o=!0;break}s&&(u=!0)}if(!o&&u){for(var P=t-e,M=null,j=1;M===null&&j<P;j++)M=this.getBlackPointOnSegment(e,i-j,e+j,i);if(M==null)throw new ne;for(var H=null,j=1;H===null&&j<P;j++)H=this.getBlackPointOnSegment(e,r+j,e+j,r);if(H==null)throw new ne;for(var W=null,j=1;W===null&&j<P;j++)W=this.getBlackPointOnSegment(t,r+j,t-j,r);if(W==null)throw new ne;for(var R=null,j=1;R===null&&j<P;j++)R=this.getBlackPointOnSegment(t,i-j,t-j,i);if(R==null)throw new ne;return this.centerEdges(R,M,W,H)}else throw new ne},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var o=ut.round(ut.distance(e,t,r,i)),s=(r-e)/o,u=(i-t)/o,c=this.image,f=0;f<o;f++){var h=ut.round(e+f*s),p=ut.round(t+f*u);if(c.get(h,p))return new Ce(h,p)}return null},n.prototype.centerEdges=function(e,t,r,i){var o=e.getX(),s=e.getY(),u=t.getX(),c=t.getY(),f=r.getX(),h=r.getY(),p=i.getX(),v=i.getY(),y=n.CORR;return o<this.width/2?[new Ce(p-y,v+y),new Ce(u+y,c+y),new Ce(f-y,h-y),new Ce(o+y,s-y)]:[new Ce(p+y,v+y),new Ce(u+y,c-y),new Ce(f-y,h+y),new Ce(o-y,s-y)]},n.prototype.containsBlackPoint=function(e,t,r,i){var o=this.image;if(i){for(var s=e;s<=t;s++)if(o.get(s,r))return!0}else for(var u=e;u<=t;u++)if(o.get(r,u))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n})(),HE=(function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<t.length&&o;s+=2){var u=Math.floor(t[s]),c=Math.floor(t[s+1]);if(u<-1||u>r||c<-1||c>i)throw new ne;o=!1,u===-1?(t[s]=0,o=!0):u===r&&(t[s]=r-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}o=!0;for(var s=t.length-2;s>=0&&o;s-=2){var u=Math.floor(t[s]),c=Math.floor(t[s+1]);if(u<-1||u>r||c<-1||c>i)throw new ne;o=!1,u===-1?(t[s]=0,o=!0):u===r&&(t[s]=r-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}},n})(),u3=(function(){function n(e,t,r,i,o,s,u,c,f){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=o,this.a32=s,this.a13=u,this.a23=c,this.a33=f}return n.quadrilateralToQuadrilateral=function(e,t,r,i,o,s,u,c,f,h,p,v,y,E,A,T){var N=n.quadrilateralToSquare(e,t,r,i,o,s,u,c),P=n.squareToQuadrilateral(f,h,p,v,y,E,A,T);return P.times(N)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,o=this.a13,s=this.a21,u=this.a22,c=this.a23,f=this.a31,h=this.a32,p=this.a33,v=0;v<t;v+=2){var y=e[v],E=e[v+1],A=o*y+c*E+p;e[v]=(r*y+s*E+f)/A,e[v+1]=(i*y+u*E+h)/A}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,o=this.a13,s=this.a21,u=this.a22,c=this.a23,f=this.a31,h=this.a32,p=this.a33,v=e.length,y=0;y<v;y++){var E=e[y],A=t[y],T=o*E+c*A+p;e[y]=(r*E+s*A+f)/T,t[y]=(i*E+u*A+h)/T}},n.squareToQuadrilateral=function(e,t,r,i,o,s,u,c){var f=e-r+o-u,h=t-i+s-c;if(f===0&&h===0)return new n(r-e,o-r,e,i-t,s-i,t,0,0,1);var p=r-o,v=u-o,y=i-s,E=c-s,A=p*E-v*y,T=(f*E-v*h)/A,N=(p*h-f*y)/A;return new n(r-e+T*r,u-e+N*u,e,i-t+T*i,c-t+N*c,t,T,N,1)},n.quadrilateralToSquare=function(e,t,r,i,o,s,u,c){return n.squareToQuadrilateral(e,t,r,i,o,s,u,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n})(),TV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),CV=(function(n){TV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,o,s,u,c,f,h,p,v,y,E,A,T,N,P,M,j){var H=u3.quadrilateralToQuadrilateral(o,s,u,c,f,h,p,v,y,E,A,T,N,P,M,j);return this.sampleGridWithTransform(t,r,i,H)},e.prototype.sampleGridWithTransform=function(t,r,i,o){if(r<=0||i<=0)throw new ne;for(var s=new ji(r,i),u=new Float32Array(2*r),c=0;c<i;c++){for(var f=u.length,h=c+.5,p=0;p<f;p+=2)u[p]=p/2+.5,u[p+1]=h;o.transformPoints(u),HE.checkAndNudgePoints(t,u);try{for(var p=0;p<f;p+=2)t.get(Math.floor(u[p]),Math.floor(u[p+1]))&&s.set(p/2,c)}catch{throw new ne}}return s},e})(HE),cy=(function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new CV,n})(),or=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Ce(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n})(),IV=(function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new AV(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ne;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,o=0;o<4;o++){var s=r[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var u=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(o,s,u){var c=(o>>t-2<<1)+(o&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Ye.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ne},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var o=r-i,s=new Int32Array(r),u=r-1;u>=0;--u)s[u]=e&15,e>>=4;try{var c=new Mp(ur.AZTEC_PARAM);c.decode(s,o)}catch{throw new ne}for(var f=0,u=0;u<i;u++)f=(f<<4)+s[u];return f},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var u=this.getFirstDifferent(t,s,1,-1),c=this.getFirstDifferent(r,s,1,1),f=this.getFirstDifferent(i,s,-1,1),h=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(h,u)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(u,c,f,h))break}t=u,r=c,i=f,o=h,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ne;this.compact=this.nbCenterLayers===5;var v=new Ce(t.getX()+.5,t.getY()-.5),y=new Ce(r.getX()+.5,r.getY()+.5),E=new Ce(i.getX()-.5,i.getY()+.5),A=new Ce(o.getX()-.5,o.getY()-.5);return this.expandSquare([v,y,E,A],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var o=new ug(this.image).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{var s=this.image.getWidth()/2,u=this.image.getHeight()/2;e=this.getFirstDifferent(new or(s+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new or(s+7,u+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new or(s-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new or(s-7,u-7),!1,-1,-1).toResultPoint()}var c=ut.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=ut.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var o=new ug(this.image,15,c,f).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{e=this.getFirstDifferent(new or(c+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new or(c+7,f+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new or(c-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new or(c-7,f-7),!1,-1,-1).toResultPoint()}return c=ut.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=ut.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new or(c,f)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,o){var s=cy.getInstance(),u=this.getDimension(),c=u/2-this.nbCenterLayers,f=u/2+this.nbCenterLayers;return s.sampleGrid(e,u,u,c,c,f,c,f,f,c,f,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,o=this.distanceResultPoint(e,t),s=o/r,u=e.getX(),c=e.getY(),f=s*(t.getX()-e.getX())/o,h=s*(t.getY()-e.getY())/o,p=0;p<r;p++)this.image.get(ut.round(u+p*f),ut.round(c+p*h))&&(i|=1<<r-p-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var o=3;e=new or(e.getX()-o,e.getY()+o),t=new or(t.getX()-o,t.getY()-o),r=new or(r.getX()+o,r.getY()-o),i=new or(i.getX()+o,i.getY()+o);var s=this.getColor(i,e);if(s===0)return!1;var u=this.getColor(e,t);return u!==s||(u=this.getColor(t,r),u!==s)?!1:(u=this.getColor(r,i),u===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,o=(t.getY()-e.getY())/r,s=0,u=e.getX(),c=e.getY(),f=this.image.get(e.getX(),e.getY()),h=Math.ceil(r),p=0;p<h;p++)u+=i,c+=o,this.image.get(ut.round(u),ut.round(c))!==f&&s++;var v=s/r;return v>.1&&v<.9?0:v<=.1===f?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var o=e.getX()+r,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r,s+=i;for(o-=r,s-=i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r;for(o-=r;this.isValid(o,s)&&this.image.get(o,s)===t;)s+=i;return s-=i,new or(o,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),u=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,f=new Ce(u+i*o,c+i*s),h=new Ce(u-i*o,c-i*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),u=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new Ce(u+i*o,c+i*s),v=new Ce(u-i*o,c-i*s),y=[f,p,h,v];return y},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=ut.round(e.getX()),r=ut.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return ut.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return ut.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ye.truncDivision(this.nbLayers-4,8)+1)+15},n})(),lg=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new IV(e.getBlackMatrix()),o=null,s=null;try{var u=i.detectMirror(!1);o=u.getPoints(),this.reportFoundResultPoints(t,o),s=new zE().decode(u)}catch(p){r=p}if(s==null)try{var u=i.detectMirror(!0);o=u.getPoints(),this.reportFoundResultPoints(t,o),s=new zE().decode(u)}catch(p){throw r??p}var c=new Gn(s.getText(),s.getRawBytes(),s.getNumBits(),o,Ne.AZTEC,wt.currentTimeMillis()),f=s.getByteSegments();f!=null&&c.putMetadata(Nn.BYTE_SEGMENTS,f);var h=s.getECLevel();return h!=null&&c.putMetadata(Nn.ERROR_CORRECTION_LEVEL,h),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(kt.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,o,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n})(),SV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){SV(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new lg,t)||this}return e})(fl);var ln=(function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(kt.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,t),s=o.getResultMetadata(),u=270;s!==null&&s.get(Nn.ORIENTATION)===!0&&(u=u+s.get(Nn.ORIENTATION)%360),o.putMetadata(Nn.ORIENTATION,u);var c=o.getResultPoints();if(c!==null)for(var f=i.getHeight(),h=0;h<c.length;h++)c[h]=new Ce(f-c[h].getY()-1,c[h].getX());return o}else throw new ne}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),o=new xn(r),s=t&&t.get(kt.TRY_HARDER)===!0,u=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var f=Math.trunc(i/2),h=0;h<c;h++){var p=Math.trunc((h+1)/2),v=(h&1)===0,y=f+u*(v?p:-p);if(y<0||y>=i)break;try{o=e.getBlackRow(y,o)}catch{continue}for(var E=function(P){if(P===1&&(o.reverse(),t&&t.get(kt.NEED_RESULT_POINT_CALLBACK)===!0)){var M=new Map;t.forEach(function(W,R){return M.set(R,W)}),M.delete(kt.NEED_RESULT_POINT_CALLBACK),t=M}try{var j=A.decodeRow(y,o,t);if(P===1){j.putMetadata(Nn.ORIENTATION,180);var H=j.getResultPoints();H!==null&&(H[0]=new Ce(r-H[0].getX()-1,H[0].getY()),H[1]=new Ce(r-H[1].getX()-1,H[1].getY()))}return{value:j}}catch{}},A=this,T=0;T<2;T++){var N=E(T);if(typeof N=="object")return N.value}}throw new ne},n.recordPattern=function(e,t,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var s=e.getSize();if(t>=s)throw new ne;for(var u=!e.get(t),c=0,f=t;f<s;){if(e.get(f)!==u)r[c]++;else{if(++c===i)break;r[c]=1,u=!u}f++}if(!(c===i||c===i-1&&f===s))throw new ne},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,o=e.get(t);t>0&&i>=0;)e.get(--t)!==o&&(i--,o=!o);if(i>=0)throw new ne;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,u=0;u<i;u++)o+=e[u],s+=t[u];if(o<s)return Number.POSITIVE_INFINITY;var c=o/s;r*=c;for(var f=0,h=0;h<i;h++){var p=e[h],v=t[h]*c,y=p>v?p-v:v-p;if(y>r)return Number.POSITIVE_INFINITY;f+=y}return f/o},n})(),bV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),GE=(function(n){bV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),u=i,c=!1,f=6,h=i;h<r;h++)if(t.get(h)!==c)s[o]++;else{if(o===f-1){for(var p=e.MAX_AVG_VARIANCE,v=-1,y=e.CODE_START_A;y<=e.CODE_START_C;y++){var E=ln.patternMatchVariance(s,e.CODE_PATTERNS[y],e.MAX_INDIVIDUAL_VARIANCE);E<p&&(p=E,v=y)}if(v>=0&&t.isRange(Math.max(0,u-(h-u)/2),u,!1))return Int32Array.from([u,h,v]);u+=s[0]+s[1],s=s.slice(2,s.length-1),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,c=!c}throw new ne},e.decodeCode=function(t,r,i){ln.recordPattern(t,i,r);for(var o=e.MAX_AVG_VARIANCE,s=-1,u=0;u<e.CODE_PATTERNS.length;u++){var c=e.CODE_PATTERNS[u],f=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);f<o&&(o=f,s=u)}if(s>=0)return s;throw new ne},e.prototype.decodeRow=function(t,r,i){var o=i&&i.get(kt.ASSUME_GS1)===!0,s=e.findStartPattern(r),u=s[2],c=0,f=new Uint8Array(20);f[c++]=u;var h;switch(u){case e.CODE_START_A:h=e.CODE_CODE_A;break;case e.CODE_START_B:h=e.CODE_CODE_B;break;case e.CODE_START_C:h=e.CODE_CODE_C;break;default:throw new he}for(var p=!1,v=!1,y="",E=s[0],A=s[1],T=Int32Array.from([0,0,0,0,0,0]),N=0,P=0,M=u,j=0,H=!0,W=!1,R=!1;!p;){var I=v;switch(v=!1,N=P,P=e.decodeCode(r,T,A),f[c++]=P,P!==e.CODE_STOP&&(H=!0),P!==e.CODE_STOP&&(j++,M+=j*P),E=A,A+=T.reduce(function(_e,Z){return _e+Z},0),P){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new he}switch(h){case e.CODE_CODE_A:if(P<64)R===W?y+=String.fromCharCode(32+P):y+=String.fromCharCode(32+P+128),R=!1;else if(P<96)R===W?y+=String.fromCharCode(P-64):y+=String.fromCharCode(P+64),R=!1;else switch(P!==e.CODE_STOP&&(H=!1),P){case e.CODE_FNC_1:o&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!W&&R?(W=!0,R=!1):W&&R?(W=!1,R=!1):R=!0;break;case e.CODE_SHIFT:v=!0,h=e.CODE_CODE_B;break;case e.CODE_CODE_B:h=e.CODE_CODE_B;break;case e.CODE_CODE_C:h=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(P<96)R===W?y+=String.fromCharCode(32+P):y+=String.fromCharCode(32+P+128),R=!1;else switch(P!==e.CODE_STOP&&(H=!1),P){case e.CODE_FNC_1:o&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!W&&R?(W=!0,R=!1):W&&R?(W=!1,R=!1):R=!0;break;case e.CODE_SHIFT:v=!0,h=e.CODE_CODE_A;break;case e.CODE_CODE_A:h=e.CODE_CODE_A;break;case e.CODE_CODE_C:h=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(P<100)P<10&&(y+="0"),y+=P;else switch(P!==e.CODE_STOP&&(H=!1),P){case e.CODE_FNC_1:o&&(y.length===0?y+="]C1":y+="");break;case e.CODE_CODE_A:h=e.CODE_CODE_A;break;case e.CODE_CODE_B:h=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}I&&(h=h===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var D=A-E;if(A=r.getNextUnset(A),!r.isRange(A,Math.min(r.getSize(),A+(A-E)/2),!1))throw new ne;if(M-=j*N,M%103!==N)throw new _n;var O=y.length;if(O===0)throw new ne;O>0&&H&&(h===e.CODE_CODE_C?y=y.substring(0,O-2):y=y.substring(0,O-1));for(var F=(s[1]+s[0])/2,U=E+D/2,V=f.length,te=new Uint8Array(V),Pe=0;Pe<V;Pe++)te[Pe]=f[Pe];var Oe=[new Ce(F,t),new Ce(U,t)];return new Gn(y,te,0,Oe,Ne.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(ln),RV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),K1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WE=(function(n){RV(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var o,s,u,c,f=this.counters;f.fill(0),this.decodeRowResult="";var h=e.findAsteriskPattern(r,f),p=r.getNextSet(h[1]),v=r.getSize(),y,E;do{e.recordPattern(r,p,f);var A=e.toNarrowWidePattern(f);if(A<0)throw new ne;y=e.patternToChar(A),this.decodeRowResult+=y,E=p;try{for(var T=(o=void 0,K1(f)),N=T.next();!N.done;N=T.next()){var P=N.value;p+=P}}catch(V){o={error:V}}finally{try{N&&!N.done&&(s=T.return)&&s.call(T)}finally{if(o)throw o.error}}p=r.getNextSet(p)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var M=0;try{for(var j=K1(f),H=j.next();!H.done;H=j.next()){var P=H.value;M+=P}}catch(V){u={error:V}}finally{try{H&&!H.done&&(c=j.return)&&c.call(j)}finally{if(u)throw u.error}}var W=p-E-M;if(p!==v&&W*2<M)throw new ne;if(this.usingCheckDigit){for(var R=this.decodeRowResult.length-1,I=0,D=0;D<R;D++)I+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(D));if(this.decodeRowResult.charAt(R)!==e.ALPHABET_STRING.charAt(I%43))throw new _n;this.decodeRowResult=this.decodeRowResult.substring(0,R)}if(this.decodeRowResult.length===0)throw new ne;var O;this.extendedMode?O=e.decodeExtended(this.decodeRowResult):O=this.decodeRowResult;var F=(h[1]+h[0])/2,U=E+M/2;return new Gn(O,null,0,[new Ce(F,t),new Ce(U,t)],Ne.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),o=t.getNextSet(0),s=0,u=o,c=!1,f=r.length,h=o;h<i;h++)if(t.get(h)!==c)r[s]++;else{if(s===f-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,u-Math.floor((h-u)/2)),u,!1))return[u,h];u+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new ne},e.toNarrowWidePattern=function(t){var r,i,o=t.length,s=0,u;do{var c=2147483647;try{for(var f=(r=void 0,K1(t)),h=f.next();!h.done;h=f.next()){var p=h.value;p<c&&p>s&&(c=p)}}catch(A){r={error:A}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}s=c,u=0;for(var v=0,y=0,E=0;E<o;E++){var p=t[E];p>s&&(y|=1<<o-1-E,u++,v+=p)}if(u===3){for(var E=0;E<o&&u>0;E++){var p=t[E];if(p>s&&(u--,p*2>=v))return-1}return y}}while(u>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new ne},e.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var u=t.charAt(o+1),c="\0";switch(s){case"+":if(u>="A"&&u<="Z")c=String.fromCharCode(u.charCodeAt(0)+32);else throw new he;break;case"$":if(u>="A"&&u<="Z")c=String.fromCharCode(u.charCodeAt(0)-64);else throw new he;break;case"%":if(u>="A"&&u<="E")c=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")c=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")c=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")c=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")c="\0";else if(u==="V")c="@";else if(u==="W")c="`";else if(u==="X"||u==="Y"||u==="Z")c="";else throw new he;break;case"/":if(u>="A"&&u<="O")c=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")c=":";else throw new he;break}i+=c,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(ln),PV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),X1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$E=(function(n){PV(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var o,s,u,c,f=this.findAsteriskPattern(r),h=r.getNextSet(f[1]),p=r.getSize(),v=this.counters;v.fill(0),this.decodeRowResult="";var y,E;do{e.recordPattern(r,h,v);var A=this.toPattern(v);if(A<0)throw new ne;y=this.patternToChar(A),this.decodeRowResult+=y,E=h;try{for(var T=(o=void 0,X1(v)),N=T.next();!N.done;N=T.next()){var P=N.value;h+=P}}catch(D){o={error:D}}finally{try{N&&!N.done&&(s=T.return)&&s.call(T)}finally{if(o)throw o.error}}h=r.getNextSet(h)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var M=0;try{for(var j=X1(v),H=j.next();!H.done;H=j.next()){var P=H.value;M+=P}}catch(D){u={error:D}}finally{try{H&&!H.done&&(c=j.return)&&c.call(j)}finally{if(u)throw u.error}}if(h===p||!r.get(h))throw new ne;if(this.decodeRowResult.length<2)throw new ne;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var W=this.decodeExtended(this.decodeRowResult),R=(f[1]+f[0])/2,I=E+M/2;return new Gn(W,null,0,[new Ce(R,t),new Ce(I,t)],Ne.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,u=!1,c=o.length,f=0,h=i;h<r;h++)if(t.get(h)!==u)o[f]++;else{if(f===c-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,h]);s+=o[0]+o[1],o.copyWithin(0,2,2+f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,u=!u}throw new ne},e.prototype.toPattern=function(t){var r,i,o=0;try{for(var s=X1(t),u=s.next();!u.done;u=s.next()){var c=u.value;o+=c}}catch(E){r={error:E}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var f=0,h=t.length,p=0;p<h;p++){var v=Math.round(t[p]*9/o);if(v<1||v>4)return-1;if((p&1)===0)for(var y=0;y<v;y++)f=f<<1|1;else f<<=v}return f},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new ne},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s>="a"&&s<="d"){if(o>=r-1)throw new he;var u=t.charAt(o+1),c="\0";switch(s){case"d":if(u>="A"&&u<="Z")c=String.fromCharCode(u.charCodeAt(0)+32);else throw new he;break;case"a":if(u>="A"&&u<="Z")c=String.fromCharCode(u.charCodeAt(0)-64);else throw new he;break;case"b":if(u>="A"&&u<="E")c=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")c=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")c=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")c=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")c="\0";else if(u==="V")c="@";else if(u==="W")c="`";else if(u>="X"&&u<="Z")c="";else throw new he;break;case"c":if(u>="A"&&u<="O")c=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")c=":";else throw new he;break}i+=c,o++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var o=1,s=0,u=r-1;u>=0;u--)s+=o*e.ALPHABET_STRING.indexOf(t.charAt(u)),++o>i&&(o=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new _n},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(ln),NV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),DV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qE=(function(n){NV(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var o,s,u=this.decodeStart(r),c=this.decodeEnd(r),f=new qe;e.decodeMiddle(r,u[1],c[0],f);var h=f.toString(),p=null;i!=null&&(p=i.get(kt.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var v=h.length,y=!1,E=0;try{for(var A=DV(p),T=A.next();!T.done;T=A.next()){var N=T.value;if(v===N){y=!0;break}N>E&&(E=N)}}catch(j){o={error:j}}finally{try{T&&!T.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}if(!y&&v>E&&(y=!0),!y)throw new he;var P=[new Ce(u[1],t),new Ce(c[0],t)],M=new Gn(h,null,0,P,Ne.ITF,new Date().getTime());return M},e.decodeMiddle=function(t,r,i,o){var s=new Int32Array(10),u=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),u.fill(0),c.fill(0);r<i;){ln.recordPattern(t,r,s);for(var f=0;f<5;f++){var h=2*f;u[f]=s[h],c[f]=s[h+1]}var p=e.decodeDigit(u);o.append(p.toString()),p=this.decodeDigit(c),o.append(p.toString()),s.forEach(function(v){r+=v})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!t.get(o);o--)i--;if(i!==0)throw new ne},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new ne;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof ne&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var o=i.length,s=new Int32Array(o),u=t.getSize(),c=!1,f=0,h=r;s.fill(0);for(var p=r;p<u;p++)if(t.get(p)!==c)s[f]++;else{if(f===o-1){if(ln.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[h,p];h+=s[0]+s[1],wt.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,c=!c}throw new ne},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var u=e.PATTERNS[s],c=ln.patternMatchVariance(t,u,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new ne},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(ln),OV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Yu=(function(n){OV(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,o=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,s);var u=i[0];o=i[1];var c=u-(o-u);c>=0&&(r=t.isRange(c,u,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new he;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new he;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,o){return this.findGuardPattern(t,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(t,r,i,o,s){var u=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,f=r,h=o.length,p=i,v=r;v<u;v++)if(t.get(v)!==p)s[c]++;else{if(c===h-1){if(ln.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,v]);f+=s[0]+s[1];for(var y=s.slice(2,s.length),E=0;E<c-1;E++)s[E]=y[E];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,p=!p}throw new ne},e.decodeDigit=function(t,r,i,o){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,u=-1,c=o.length,f=0;f<c;f++){var h=o[f],p=ln.patternMatchVariance(r,h,e.MAX_INDIVIDUAL_VARIANCE);p<s&&(s=p,u=f)}if(u>=0)return u;throw new ne},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(ln),kV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MV=(function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),u=n.parseExtensionString(s),c=[new Ce((r[0]+r[1])/2,e),new Ce(o,e)],f=new Gn(s,null,0,c,Ne.UPC_EAN_EXTENSION,new Date().getTime());return u!=null&&f.putAllMetadata(u),f},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var u=e.getSize(),c=t[1],f=0,h=0;h<5&&c<u;h++){var p=Yu.decodeDigit(e,s,c,Yu.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var v=(i=void 0,kV(s)),y=v.next();!y.done;y=v.next()){var E=y.value;c+=E}}catch(T){i={error:T}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}p>=10&&(f|=1<<4-h),h!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new ne;var A=this.determineCheckDigit(f);if(n.extensionChecksum(r.toString())!==A)throw new ne;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new ne},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[Nn.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),o=r%100,s=o<10?"0"+o:o.toString();return t+i+"."+s},n})(),LV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VV=(function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),u=n.parseExtensionString(s),c=[new Ce((r[0]+r[1])/2,e),new Ce(o,e)],f=new Gn(s,null,0,c,Ne.UPC_EAN_EXTENSION,new Date().getTime());return u!=null&&f.putAllMetadata(u),f},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var u=e.getSize(),c=t[1],f=0,h=0;h<2&&c<u;h++){var p=Yu.decodeDigit(e,s,c,Yu.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var v=(i=void 0,LV(s)),y=v.next();!y.done;y=v.next()){var E=y.value;c+=E}}catch(A){i={error:A}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}p>=10&&(f|=1<<1-h),h!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new ne;if(parseInt(r.toString())%4!==f)throw new ne;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[Nn.ISSUE_NUMBER,parseInt(e)]])},n})(),FV=(function(){function n(){}return n.decodeRow=function(e,t,r){var i=Yu.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new MV;return o.decodeRow(e,t,i)}catch{var s=new VV;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n})(),BV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),sn=(function(n){BV(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(u){return Int32Array.from(u)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=o}return t}return e.prototype.decodeRow=function(t,r,i){var o=e.findStartGuardPattern(r),s=i==null?null:i.get(kt.NEED_RESULT_POINT_CALLBACK);if(s!=null){var u=new Ce((o[0]+o[1])/2,t);s.foundPossibleResultPoint(u)}var c=this.decodeMiddle(r,o,this.decodeRowStringBuffer),f=c.rowOffset,h=c.resultString;if(s!=null){var p=new Ce(f,t);s.foundPossibleResultPoint(p)}var v=e.decodeEnd(r,f);if(s!=null){var y=new Ce((v[0]+v[1])/2,t);s.foundPossibleResultPoint(y)}var E=v[1],A=E+(E-v[0]);if(A>=r.getSize()||!r.isRange(E,A,!1))throw new ne;var T=h.toString();if(T.length<8)throw new he;if(!e.checkChecksum(T))throw new _n;var N=(o[1]+o[0])/2,P=(v[1]+v[0])/2,M=this.getBarcodeFormat(),j=[new Ce(N,t),new Ce(P,t)],H=new Gn(T,null,0,j,M,new Date().getTime()),W=0;try{var R=FV.decodeRow(t,r,v[1]);H.putMetadata(Nn.UPC_EAN_EXTENSION,R.getText()),H.putAllMetadata(R.getResultMetadata()),H.addResultPoints(R.getResultPoints()),W=R.getText().length}catch{}var I=i==null?null:i.get(kt.ALLOWED_EAN_EXTENSIONS);if(I!=null){var D=!1;for(var O in I)if(W.toString()===O){D=!0;break}if(!D)throw new ne}return M===Ne.EAN_13||Ne.UPC_A,H},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new he;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new he;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Yu),UV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),KE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cg=(function(n){UV(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,u,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var h=t.getSize(),p=r[1],v=0,y=0;y<6&&p<h;y++){var E=sn.decodeDigit(t,f,p,sn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+E%10);try{for(var A=(o=void 0,KE(f)),T=A.next();!T.done;T=A.next()){var N=T.value;p+=N}}catch(H){o={error:H}}finally{try{T&&!T.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}E>=10&&(v|=1<<5-y)}i=e.determineFirstDigit(i,v);var P=sn.findGuardPattern(t,p,!0,sn.MIDDLE_PATTERN,new Int32Array(sn.MIDDLE_PATTERN.length).fill(0));p=P[1];for(var y=0;y<6&&p<h;y++){var E=sn.decodeDigit(t,f,p,sn.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var M=(u=void 0,KE(f)),j=M.next();!j.done;j=M.next()){var N=j.value;p+=N}}catch(R){u={error:R}}finally{try{j&&!j.done&&(c=M.return)&&c.call(M)}finally{if(u)throw u.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Ne.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new ne},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(sn),jV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),XE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YE=(function(n){jV(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,u,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var h=t.getSize(),p=r[1],v=0;v<4&&p<h;v++){var y=sn.decodeDigit(t,f,p,sn.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var E=(o=void 0,XE(f)),A=E.next();!A.done;A=E.next()){var T=A.value;p+=T}}catch(j){o={error:j}}finally{try{A&&!A.done&&(s=E.return)&&s.call(E)}finally{if(o)throw o.error}}}var N=sn.findGuardPattern(t,p,!0,sn.MIDDLE_PATTERN,new Int32Array(sn.MIDDLE_PATTERN.length).fill(0));p=N[1];for(var v=0;v<4&&p<h;v++){var y=sn.decodeDigit(t,f,p,sn.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var P=(u=void 0,XE(f)),M=P.next();!M.done;M=P.next()){var T=M.value;p+=T}}catch(W){u={error:W}}finally{try{M&&!M.done&&(c=P.return)&&c.call(P)}finally{if(u)throw u.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Ne.EAN_8},e})(sn),zV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),QE=(function(n){zV(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new cg,t}return e.prototype.getBarcodeFormat=function(){return Ne.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new Gn(r.substring(1),null,null,t.getResultPoints(),Ne.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new ne},e.prototype.reset=function(){this.ean13Reader.reset()},e})(sn),HV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),GV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZE=(function(n){HV(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,u=this.decodeMiddleCounters.map(function(T){return T});u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=t.getSize(),f=r[1],h=0,p=0;p<6&&f<c;p++){var v=e.decodeDigit(t,u,f,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);try{for(var y=(o=void 0,GV(u)),E=y.next();!E.done;E=y.next()){var A=E.value;f+=A}}catch(T){o={error:T}}finally{try{E&&!E.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}v>=10&&(h|=1<<5-p)}return e.determineNumSysAndCheckDigit(new qe(i),h),f},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return sn.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){t.insert(0,"0"+i),t.append("0"+o);return}throw ne.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Ne.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new qe;i.append(t.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(sn),WV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),JE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y1=(function(n){WV(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(kt.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(Ne.EAN_13)>-1&&o.push(new cg),i.indexOf(Ne.UPC_A)>-1&&o.push(new QE),i.indexOf(Ne.EAN_8)>-1&&o.push(new YE),i.indexOf(Ne.UPC_E)>-1&&o.push(new ZE)),o.length===0&&(o.push(new cg),o.push(new QE),o.push(new YE),o.push(new ZE)),r.readers=o,r}return e.prototype.decodeRow=function(t,r,i){var o,s;try{for(var u=JE(this.readers),c=u.next();!c.done;c=u.next()){var f=c.value;try{var h=f.decodeRow(t,r,i),p=h.getBarcodeFormat()===Ne.EAN_13&&h.getText().charAt(0)==="0",v=i==null?null:i.get(kt.POSSIBLE_FORMATS),y=v==null||v.includes(Ne.UPC_A);if(p&&y){var E=h.getRawBytes(),A=new Gn(h.getText().substring(1),E,E?E.length:null,h.getResultPoints(),Ne.UPC_A);return A.putAllMetadata(h.getResultMetadata()),A}return h}catch{}}}catch(T){o={error:T}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}throw new ne},e.prototype.reset=function(){var t,r;try{for(var i=JE(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;s.reset()}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e})(ln),$V=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),qV=(function(n){$V(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var o=this.getValidRowData(r);if(!o)throw new ne;var s=this.codaBarDecodeRow(o.row);if(!s)throw new ne;return new Gn(s,null,0,[new Ce(o.left,t),new Ce(o.right,t)],Ne.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var o=r.lastIndexOf(!0);if(o<=i)return null;r=r.slice(i,o+1);for(var s=[],u=r[0],c=1,f=1;f<r.length;f++)r[f]===u?c++:(u=r[f],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,f){return(c+f)/2},0));t.length>0;){var o=t.splice(0,8).splice(0,7),s=o.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var u=r.join("");return this.validCodaBarString(u)?u:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e})(ln),KV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),XV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ua=(function(n){KV(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(ln.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new ne},e.count=function(t){return ut.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]>o&&(o=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]<o&&(o=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,o=t[0]+t[1],s=o+t[2]+t[3],u=o/s;if(u>=e.MIN_FINDER_PATTERN_RATIO&&u<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var h=XV(t),p=h.next();!p.done;p=h.next()){var v=p.value;v>f&&(f=v),v<c&&(c=v)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return f<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(ln),tp=(function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n})(),l3=(function(){function n(e,t,r,i,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Ce(r,o)),this.resultPoints.push(new Ce(i,o))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n})(),YV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ru=(function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,o,s=0;try{for(var u=YV(e),c=u.next();!c.done;c=u.next()){var f=c.value;s+=f}}catch(P){i={error:P}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}for(var h=0,p=0,v=e.length,y=0;y<v-1;y++){var E=void 0;for(E=1,p|=1<<y;E<e[y];E++,p&=~(1<<y)){var A=n.combins(s-E-1,v-y-2);if(r&&p===0&&s-E-(v-y-1)>=v-y-1&&(A-=n.combins(s-E-(v-y),v-y-2)),v-y-1>1){for(var T=0,N=s-E-(v-y-2);N>t;N--)T+=n.combins(s-E-N-1,v-y-3);A-=T*(v-1-y)}else s-E>t&&A--;h+=A}s-=E}return h},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var o=1,s=1,u=e;u>r;u--)o*=u,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},n})(),QV=(function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new xn(r),o=0,s=e[0],u=s.getRightChar().getValue(),c=11;c>=0;--c)(u&1<<c)!==0&&i.set(o),o++;for(var c=1;c<e.length;++c){for(var f=e[c],h=f.getLeftChar().getValue(),p=11;p>=0;--p)(h&1<<p)!==0&&i.set(o),o++;if(f.getRightChar()!==null)for(var v=f.getRightChar().getValue(),p=11;p>=0;--p)(v&1<<p)!==0&&i.set(o),o++}return i},n})(),ia=(function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n})(),fy=(function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n})(),ZV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ti=(function(n){ZV(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(fy),JV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),oa=(function(n){JV(e,n);function e(t,r,i){var o=n.call(this,t)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(fy),eF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),vu=(function(n){eF(e,n);function e(t,r,i){var o=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new he;return o.firstDigit=r,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(fy),ed=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tF=(function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,o,s,u,c,f;if(!e)return null;if(e.length<2)throw new ne;var h=e.substring(0,2);try{for(var p=ed(n.TWO_DIGIT_DATA_LENGTH),v=p.next();!v.done;v=p.next()){var y=v.value;if(y[0]===h)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,y[2],e):n.processFixedAI(2,y[1],e)}}catch(W){t={error:W}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}if(e.length<3)throw new ne;var E=e.substring(0,3);try{for(var A=ed(n.THREE_DIGIT_DATA_LENGTH),T=A.next();!T.done;T=A.next()){var y=T.value;if(y[0]===E)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,y[2],e):n.processFixedAI(3,y[1],e)}}catch(W){i={error:W}}finally{try{T&&!T.done&&(o=A.return)&&o.call(A)}finally{if(i)throw i.error}}try{for(var N=ed(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),P=N.next();!P.done;P=N.next()){var y=P.value;if(y[0]===E)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],e):n.processFixedAI(4,y[1],e)}}catch(W){s={error:W}}finally{try{P&&!P.done&&(u=N.return)&&u.call(N)}finally{if(s)throw s.error}}if(e.length<4)throw new ne;var M=e.substring(0,4);try{for(var j=ed(n.FOUR_DIGIT_DATA_LENGTH),H=j.next();!H.done;H=j.next()){var y=H.value;if(y[0]===M)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],e):n.processFixedAI(4,y[1],e)}}catch(W){c={error:W}}finally{try{H&&!H.done&&(f=j.return)&&f.call(j)}finally{if(c)throw c.error}}throw new ne},n.processFixedAI=function(e,t,r){if(r.length<e)throw new ne;var i=r.substring(0,e);if(r.length<e+t)throw new ne;var o=r.substring(e,e+t),s=r.substring(e+t),u="("+i+")"+o,c=n.parseFieldsInGeneralPurpose(s);return c==null?u:u+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),o;r.length<e+t?o=r.length:o=e+t;var s=r.substring(e,o),u=r.substring(o),c="("+i+")"+s,f=n.parseFieldsInGeneralPurpose(u);return f==null?c:c+f},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n})(),Cd=(function(){function n(e){this.buffer=new qe,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var o=this.decodeGeneralPurposeField(r,i),s=tF.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?i=""+o.getRemainingValue():i=null,r===o.getNewPosition())break;r=o.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new vu(this.information.getSize(),vu.FNC1,vu.FNC1):new vu(this.information.getSize(),t-1,vu.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,o=(r-8)%11;return new vu(e+7,i,o)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,o=0;o<r;++o)e.get(t+o)&&(i|=1<<r-o-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new oa(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new oa(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new oa(this.current.getPosition(),this.buffer.toString()):t=new oa(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new ia(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new oa(this.current.getPosition(),this.buffer.toString());return new ia(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ia(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new oa(this.current.getPosition(),this.buffer.toString());return new ia(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ia(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new oa(this.current.getPosition(),this.buffer.toString());return new ia(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ia(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ti(e+5,ti.FNC1);if(t>=5&&t<15)return new ti(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new ti(e+7,""+(r+1));if(r>=90&&r<116)return new ti(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new he}return new ti(e+8,o)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ti(e+5,ti.FNC1);if(t>=5&&t<15)return new ti(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new ti(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Ef("Decoding invalid alphanumeric value: "+r)}return new ti(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n})(),c3=(function(){function n(e){this.information=e,this.generalDecoder=new Cd(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n})(),nF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ii=(function(n){nF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,o=0;o<13;o++){var s=t.charAt(o+r).charCodeAt(0)-48;i+=(o&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(c3),rF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),iF=(function(n){rF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new qe;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(ii),oF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),sF=(function(n){oF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new qe;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(c3),aF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Id=(function(n){aF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,o);for(var s=this.checkWeight(o),u=1e5,c=0;c<5;++c)s/u===0&&t.append("0"),u/=10;t.append(s)},e})(ii),uF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),f3=(function(n){uF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Id.GTIN_SIZE+e.WEIGHT_SIZE)throw new ne;var t=new qe;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Id.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(Id),lF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),cF=(function(n){lF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(f3),fF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),hF=(function(n){fF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(f3),dF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pF=(function(n){dF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ii.GTIN_SIZE)throw new ne;var t=new qe;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ii.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ii.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(ii),mF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),gF=(function(n){mF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ii.GTIN_SIZE)throw new ne;var t=new qe;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ii.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ii.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ii.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(ii),vF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Jo=(function(n){vF(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.dateCode=i,o.firstAIdigits=r,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new ne;var t=new qe;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var o=i%32;i/=32;var s=i%12+1;i/=12;var u=i;u/10===0&&t.append("0"),t.append(u),s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(Id);function yF(n){try{if(n.get(1))return new iF(n);if(!n.get(2))return new sF(n);var e=Cd.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new cF(n);case 5:return new hF(n)}var t=Cd.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new pF(n);case 13:return new gF(n)}var r=Cd.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Jo(n,"310","11");case 57:return new Jo(n,"320","11");case 58:return new Jo(n,"310","13");case 59:return new Jo(n,"320","13");case 60:return new Jo(n,"310","15");case 61:return new Jo(n,"320","15");case 62:return new Jo(n,"310","17");case 63:return new Jo(n,"320","17")}}catch(i){throw console.log(i),new Ef("unknown decoder: "+n)}}var eA=(function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n})(),_F=(function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,o){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n})(),xF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),es=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wF=(function(n){xF(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(u){if(u instanceof ne){if(!this.pairs.length)throw new ne;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new ne},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,o,s=r;s<this.rows.length;s++){var u=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,es(t)),f=c.next();!f.done;f=c.next()){var h=f.value;this.pairs.push(h.getPairs())}}catch(v){i={error:v}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(u.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(t);p.push(u);try{return this.checkRows(p,s+1)}catch(v){console.log(v)}}}throw new ne},e.isValidSequence=function(t){var r,i;try{for(var o=es(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var u=s.value;if(!(t.length>u.length)){for(var c=!0,f=0;f<t.length;f++)if(t[f].getFinderPattern().getValue()!==u[f]){c=!1;break}if(c)return!0}}}catch(h){r={error:h}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,o=!1,s=!1;i<this.rows.length;){var u=this.rows[i];if(u.getRowNumber()>t){s=u.isEquivalent(this.pairs);break}o=u.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new _F(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,o,s,u,c,f;try{for(var h=es(r),p=h.next();!p.done;p=h.next()){var v=p.value;if(v.getPairs().length!==t.length){var y=!0;try{for(var E=(s=void 0,es(v.getPairs())),A=E.next();!A.done;A=E.next()){var T=A.value,N=!1;try{for(var P=(c=void 0,es(t)),M=P.next();!M.done;M=P.next()){var j=M.value;if(eA.equals(T,j)){N=!0;break}}}catch(H){c={error:H}}finally{try{M&&!M.done&&(f=P.return)&&f.call(P)}finally{if(c)throw c.error}}N||(y=!1)}}catch(H){s={error:H}}finally{try{A&&!A.done&&(u=E.return)&&u.call(E)}finally{if(s)throw s.error}}}}}catch(H){i={error:H}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,o,s,u,c,f;try{for(var h=es(r),p=h.next();!p.done;p=h.next()){var v=p.value,y=!0;try{for(var E=(s=void 0,es(t)),A=E.next();!A.done;A=E.next()){var T=A.value,N=!1;try{for(var P=(c=void 0,es(v.getPairs())),M=P.next();!M.done;M=P.next()){var j=M.value;if(T.equals(j)){N=!0;break}}}catch(H){c={error:H}}finally{try{M&&!M.done&&(f=P.return)&&f.call(P)}finally{if(c)throw c.error}}if(!N){y=!1;break}}}catch(H){s={error:H}}finally{try{A&&!A.done&&(u=E.return)&&u.call(E)}finally{if(s)throw s.error}}if(y)return!0}}catch(H){i={error:H}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=QV.buildBitArray(t),i=yF(r),o=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),u=t[t.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],u[0],u[1]];return new Gn(o,null,null,c,Ne.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,u=1;u<this.pairs.size();++u){var c=this.pairs.get(u);o+=c.getLeftChar().getChecksumPortion(),s++;var f=c.getRightChar();f!=null&&(o+=f.getChecksumPortion(),s++)}o%=211;var h=211*(s-4)+o;return h===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var o=r.length%2===0;this.startFromEven&&(o=!o);var s,u=!0,c=-1;do this.findNextPair(t,r,c),s=this.parseFoundFinderPattern(t,i,o),s===null?c=e.getNextSecondBar(t,this.startEnd[0]):u=!1;while(u);var f=this.decodeDataCharacter(t,s,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ne;var h;try{h=this.decodeDataCharacter(t,s,o,!1)}catch(p){h=null,console.log(p)}return new eA(f,h,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s=t.getSize(),u;if(i>=0)u=i;else if(this.isEmptyPair(r))u=0;else{var c=r[r.length-1];u=c.getFinderPattern().getStartEnd()[1]}var f=r.length%2!==0;this.startFromEven&&(f=!f);for(var h=!1;u<s&&(h=!t.get(u),!!h);)u++;for(var p=0,v=u,y=u;y<s;y++)if(t.get(y)!==h)o[p]++;else{if(p===3){if(f&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=v,this.startEnd[1]=y;return}f&&e.reverseCounters(o),v+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,p--}else p++;o[p]=1,h=!h}throw new ne},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var o=t[i];t[i]=t[r-i-1],t[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(t,r,i){var o,s,u;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,o=this.startEnd[0]-c,s=c,u=this.startEnd[1]}else s=this.startEnd[0],u=t.getNextUnset(this.startEnd[1]+1),o=u-this.startEnd[1];var f=this.getDecodeFinderCounters();wt.arraycopy(f,0,f,1,f.length-1),f[0]=o;var h;try{h=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new l3(h,[s,u],s,u,r)},e.prototype.decodeDataCharacter=function(t,r,i,o){for(var s=this.getDataCharacterCounters(),u=0;u<s.length;u++)s[u]=0;if(o)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var c=0,f=s.length-1;c<f;c++,f--){var h=s[c];s[c]=s[f],s[f]=h}}var p=17,v=ut.sum(new Int32Array(s))/p,y=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(v-y)/y>.3)throw new ne;for(var E=this.getOddCounts(),A=this.getEvenCounts(),T=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var P=1*s[c]/v,M=P+.5;if(M<1){if(P<.3)throw new ne;M=1}else if(M>8){if(P>8.7)throw new ne;M=8}var j=c/2;(c&1)===0?(E[j]=M,T[j]=P-M):(A[j]=M,N[j]=P-M)}this.adjustOddEvenCounts(p);for(var H=4*r.getValue()+(i?0:2)+(o?0:1)-1,W=0,R=0,c=E.length-1;c>=0;c--){if(e.isNotA1left(r,i,o)){var I=e.WEIGHTS[H][2*c];R+=E[c]*I}W+=E[c]}for(var D=0,c=A.length-1;c>=0;c--)if(e.isNotA1left(r,i,o)){var I=e.WEIGHTS[H][2*c+1];D+=A[c]*I}var O=R+D;if((W&1)!==0||W>13||W<4)throw new ne;var F=(13-W)/2,U=e.SYMBOL_WIDEST[F],V=9-U,te=Ru.getRSSvalue(E,U,!0),Pe=Ru.getRSSvalue(A,V,!1),Oe=e.EVEN_TOTAL_SUBSET[F],_e=e.GSUM[F],Z=te*Oe+Pe+_e;return new tp(Z,O)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=ut.sum(new Int32Array(this.getOddCounts())),i=ut.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);var u=!1,c=!1;i>13?c=!0:i<4&&(u=!0);var f=r+i-t,h=(r&1)===1,p=(i&1)===0;if(f===1)if(h){if(p)throw new ne;s=!0}else{if(!p)throw new ne;c=!0}else if(f===-1)if(h){if(p)throw new ne;o=!0}else{if(!p)throw new ne;u=!0}else if(f===0){if(h){if(!p)throw new ne;r<i?(o=!0,c=!0):(s=!0,u=!0)}else if(p)throw new ne}else throw new ne;if(o){if(s)throw new ne;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(c)throw new ne;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(ua),EF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),AF=(function(n){EF(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(tp),TF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Q1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tA=(function(n){TF(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var o,s,u,c,f=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,f),r.reverse();var h=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,h),r.reverse();try{for(var p=Q1(this.possibleLeftPairs),v=p.next();!v.done;v=p.next()){var y=v.value;if(y.getCount()>1)try{for(var E=(u=void 0,Q1(this.possibleRightPairs)),A=E.next();!A.done;A=E.next()){var T=A.value;if(T.getCount()>1&&e.checkChecksum(y,T))return e.constructResult(y,T)}}catch(N){u={error:N}}finally{try{A&&!A.done&&(c=E.return)&&c.call(E)}finally{if(u)throw u.error}}}}catch(N){o={error:N}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}throw new ne},e.addOrTally=function(t,r){var i,o;if(r!=null){var s=!1;try{for(var u=Q1(t),c=u.next();!c.done;c=u.next()){var f=c.value;if(f.getValue()===r.getValue()){f.incrementCount(),s=!0;break}}}catch(h){i={error:h}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),o=new String(i).toString(),s=new qe,u=13-o.length;u>0;u--)s.append("0");s.append(o);for(var c=0,u=0;u<13;u++){var f=s.charAt(u).charCodeAt(0)-48;c+=(u&1)===0?3*f:f}c=10-c%10,c===10&&(c=0),s.append(c.toString());var h=t.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new Gn(s.toString(),null,0,[h[0],h[1],p[0],p[1]],Ne.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(t,r,i,o){try{var s=this.findFinderPattern(t,r),u=this.parseFoundFinderPattern(t,i,r,s),c=o==null?null:o.get(kt.NEED_RESULT_POINT_CALLBACK);if(c!=null){var f=(s[0]+s[1])/2;r&&(f=t.getSize()-1-f),c.foundPossibleResultPoint(new Ce(f,i))}var h=this.decodeDataCharacter(t,u,!0),p=this.decodeDataCharacter(t,u,!1);return new AF(1597*h.getValue()+p.getValue(),h.getChecksumPortion()+4*p.getChecksumPortion(),u)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)ln.recordPatternInReverse(t,r.getStartEnd()[0],o);else{ln.recordPattern(t,r.getStartEnd()[1]+1,o);for(var u=0,c=o.length-1;u<c;u++,c--){var f=o[u];o[u]=o[c],o[c]=f}}for(var h=i?16:15,p=ut.sum(new Int32Array(o))/h,v=this.getOddCounts(),y=this.getEvenCounts(),E=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors(),u=0;u<o.length;u++){var T=o[u]/p,N=Math.floor(T+.5);N<1?N=1:N>8&&(N=8);var P=Math.floor(u/2);(u&1)===0?(v[P]=N,E[P]=T-N):(y[P]=N,A[P]=T-N)}this.adjustOddEvenCounts(i,h);for(var M=0,j=0,u=v.length-1;u>=0;u--)j*=9,j+=v[u],M+=v[u];for(var H=0,W=0,u=y.length-1;u>=0;u--)H*=9,H+=y[u],W+=y[u];var R=j+3*H;if(i){if((M&1)!==0||M>12||M<4)throw new ne;var I=(12-M)/2,D=e.OUTSIDE_ODD_WIDEST[I],O=9-D,F=Ru.getRSSvalue(v,D,!1),U=Ru.getRSSvalue(y,O,!0),V=e.OUTSIDE_EVEN_TOTAL_SUBSET[I],te=e.OUTSIDE_GSUM[I];return new tp(F*V+U+te,R)}else{if((W&1)!==0||W>10||W<4)throw new ne;var I=(10-W)/2,D=e.INSIDE_ODD_WIDEST[I],O=9-D,F=Ru.getRSSvalue(v,D,!0),U=Ru.getRSSvalue(y,O,!1),Pe=e.INSIDE_ODD_TOTAL_SUBSET[I],te=e.INSIDE_GSUM[I];return new tp(U*Pe+F+te,R)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=t.getSize(),s=!1,u=0;u<o&&(s=!t.get(u),r!==s);)u++;for(var c=0,f=u,h=u;h<o;h++)if(t.get(h)!==s)i[c]++;else{if(c===3){if(ua.isFinderPattern(i))return[f,h];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new ne},e.prototype.parseFoundFinderPattern=function(t,r,i,o){for(var s=t.get(o[0]),u=o[0]-1;u>=0&&s!==t.get(u);)u--;u++;var c=o[0]-u,f=this.getDecodeFinderCounters(),h=new Int32Array(f.length);wt.arraycopy(f,0,h,1,f.length-1),h[0]=c;var p=this.parseFinderValue(h,e.FINDER_PATTERNS),v=u,y=o[1];return i&&(v=t.getSize()-1-v,y=t.getSize()-1-y),new l3(p,[u,o[1]],v,y,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=ut.sum(new Int32Array(this.getOddCounts())),o=ut.sum(new Int32Array(this.getEvenCounts())),s=!1,u=!1,c=!1,f=!1;t?(i>12?u=!0:i<4&&(s=!0),o>12?f=!0:o<4&&(c=!0)):(i>11?u=!0:i<5&&(s=!0),o>10?f=!0:o<4&&(c=!0));var h=i+o-r,p=(i&1)===(t?1:0),v=(o&1)===1;if(h===1)if(p){if(v)throw new ne;u=!0}else{if(!v)throw new ne;f=!0}else if(h===-1)if(p){if(v)throw new ne;s=!0}else{if(!v)throw new ne;c=!0}else if(h===0){if(p){if(!v)throw new ne;i<o?(s=!0,f=!0):(u=!0,c=!0)}else if(v)throw new ne}else throw new ne;if(s){if(u)throw new ne;ua.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&ua.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new ne;ua.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&ua.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(ua),CF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_c=(function(n){CF(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(kt.POSSIBLE_FORMATS):null,o=t&&t.get(kt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;return i&&((i.includes(Ne.EAN_13)||i.includes(Ne.UPC_A)||i.includes(Ne.EAN_8)||i.includes(Ne.UPC_E))&&r.readers.push(new Y1(t)),i.includes(Ne.CODE_39)&&r.readers.push(new WE(o)),i.includes(Ne.CODE_93)&&r.readers.push(new $E),i.includes(Ne.CODE_128)&&r.readers.push(new GE),i.includes(Ne.ITF)&&r.readers.push(new qE),i.includes(Ne.CODABAR)&&r.readers.push(new qV),i.includes(Ne.RSS_14)&&r.readers.push(new tA),i.includes(Ne.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new wF))),r.readers.length===0&&(r.readers.push(new Y1(t)),r.readers.push(new WE),r.readers.push(new $E),r.readers.push(new Y1(t)),r.readers.push(new GE),r.readers.push(new qE),r.readers.push(new tA)),r}return e.prototype.decodeRow=function(t,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,r,i)}catch{}throw new ne},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(ln),IF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){IF(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new _c(r),t,r)||this}return e})(fl);var nA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ht=(function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),ct=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),SF=(function(){function n(e,t,r,i,o,s){var u,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var f=0,h=s.getECCodewords(),p=s.getECBlocks();try{for(var v=nA(p),y=v.next();!y.done;y=v.next()){var E=y.value;f+=E.getCount()*(E.getDataCodewords()+h)}}catch(A){u={error:A}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(u)throw u.error}}this.totalCodewords=f}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new he;try{for(var o=nA(n.VERSIONS),s=o.next();!s.done;s=o.next()){var u=s.value;if(u.symbolSizeRows===e&&u.symbolSizeColumns===t)return u}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new he},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new ht(5,new ct(1,3))),new n(2,12,12,10,10,new ht(7,new ct(1,5))),new n(3,14,14,12,12,new ht(10,new ct(1,8))),new n(4,16,16,14,14,new ht(12,new ct(1,12))),new n(5,18,18,16,16,new ht(14,new ct(1,18))),new n(6,20,20,18,18,new ht(18,new ct(1,22))),new n(7,22,22,20,20,new ht(20,new ct(1,30))),new n(8,24,24,22,22,new ht(24,new ct(1,36))),new n(9,26,26,24,24,new ht(28,new ct(1,44))),new n(10,32,32,14,14,new ht(36,new ct(1,62))),new n(11,36,36,16,16,new ht(42,new ct(1,86))),new n(12,40,40,18,18,new ht(48,new ct(1,114))),new n(13,44,44,20,20,new ht(56,new ct(1,144))),new n(14,48,48,22,22,new ht(68,new ct(1,174))),new n(15,52,52,24,24,new ht(42,new ct(2,102))),new n(16,64,64,14,14,new ht(56,new ct(2,140))),new n(17,72,72,16,16,new ht(36,new ct(4,92))),new n(18,80,80,18,18,new ht(48,new ct(4,114))),new n(19,88,88,20,20,new ht(56,new ct(4,144))),new n(20,96,96,22,22,new ht(68,new ct(4,174))),new n(21,104,104,24,24,new ht(56,new ct(6,136))),new n(22,120,120,18,18,new ht(68,new ct(6,175))),new n(23,132,132,20,20,new ht(62,new ct(8,163))),new n(24,144,144,22,22,new ht(62,new ct(8,156),new ct(2,155))),new n(25,8,18,6,16,new ht(7,new ct(1,5))),new n(26,8,32,6,14,new ht(11,new ct(1,10))),new n(27,12,26,10,24,new ht(14,new ct(1,16))),new n(28,12,36,10,16,new ht(18,new ct(1,22))),new n(29,16,36,14,16,new ht(24,new ct(1,32))),new n(30,16,48,14,22,new ht(28,new ct(1,49)))]},n.VERSIONS=n.buildVersions(),n})(),bF=(function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new he;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ji(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return SF.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),u=!1,c=!1,f=!1,h=!1;do if(r===o&&i===0&&!u)e[t++]=this.readCorner1(o,s)&255,r-=2,i+=2,u=!0;else if(r===o-2&&i===0&&(s&3)!==0&&!c)e[t++]=this.readCorner2(o,s)&255,r-=2,i+=2,c=!0;else if(r===o+4&&i===2&&(s&7)===0&&!f)e[t++]=this.readCorner3(o,s)&255,r-=2,i+=2,f=!0;else if(r===o-2&&i===0&&(s&7)===4&&!h)e[t++]=this.readCorner4(o,s)&255,r-=2,i+=2,h=!0;else{do r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r+=2,i-=2;while(r<o&&i>=0);r+=3,i+=1}while(r<o||i<s);if(t!==this.version.getTotalCodewords())throw new he;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var o=0;return this.readModule(e-2,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t,r,i)&&(o|=1),o<<=1,this.readModule(e,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e,t,r,i)&&(o|=1),o},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Ve("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=t/i|0,u=r/o|0,c=s*i,f=u*o,h=new ji(f,c),p=0;p<s;++p)for(var v=p*i,y=0;y<u;++y)for(var E=y*o,A=0;A<i;++A)for(var T=p*(i+2)+1+A,N=v+A,P=0;P<o;++P){var M=y*(o+2)+1+P;if(e.get(M,T)){var j=E+P;h.set(j,N)}}return h},n})(),rA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RF=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,o,s,u=t.getECBlocks(),c=0,f=u.getECBlocks();try{for(var h=rA(f),p=h.next();!p.done;p=h.next()){var v=p.value;c+=v.getCount()}}catch(te){r={error:te}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}var y=new Array(c),E=0;try{for(var A=rA(f),T=A.next();!T.done;T=A.next())for(var v=T.value,N=0;N<v.getCount();N++){var P=v.getDataCodewords(),M=u.getECCodewords()+P;y[E++]=new n(P,new Uint8Array(M))}}catch(te){o={error:te}}finally{try{T&&!T.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}for(var j=y[0].codewords.length,H=j-u.getECCodewords(),W=H-1,R=0,N=0;N<W;N++)for(var I=0;I<E;I++)y[I].codewords[N]=e[R++];for(var D=t.getVersionNumber()===24,O=D?8:E,I=0;I<O;I++)y[I].codewords[H-1]=e[R++];for(var F=y[0].codewords.length,N=H;N<F;N++)for(var I=0;I<E;I++){var U=D?(I+8)%E:I,V=D&&U>7?N-1:N;y[U].codewords[V]=e[R++]}if(R!==e.length)throw new Ve;return y},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),h3=(function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Ve(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var s=8-r,u=e<s?e:s,c=s-u,f=255>>8-u<<c;t=(o[i]&f)>>c,e-=u,r+=u,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|o[i]&255,i++,e-=8;if(e>0){var c=8-e,f=255>>c<<c;t=t<<e|(o[i]&f)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n})(),rn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(rn||(rn={}));var PF=(function(){function n(){}return n.decode=function(e){var t=new h3(e),r=new qe,i=new qe,o=new Array,s=rn.ASCII_ENCODE;do if(s===rn.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case rn.C40_ENCODE:this.decodeC40Segment(t,r);break;case rn.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case rn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case rn.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case rn.BASE256_ENCODE:this.decodeBase256Segment(t,r,o);break;default:throw new he}s=rn.ASCII_ENCODE}while(s!==rn.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new kp(e,r.toString(),o.length===0?null:o,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var o=e.readBits(8);if(o===0)throw new he;if(o<=128)return i&&(o+=128),t.append(String.fromCharCode(o-1)),rn.ASCII_ENCODE;if(o===129)return rn.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&t.append("0"),t.append(""+s)}else switch(o){case 230:return rn.C40_ENCODE;case 231:return rn.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return rn.ANSIX12_ENCODE;case 239:return rn.TEXT_ENCODE;case 240:return rn.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new he;break}}while(e.available()>0);return rn.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var u=0;u<3;u++){var c=i[u];switch(o){case 0:if(c<3)o=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new he;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new he}o=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),o=0;break;default:throw new he}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var u=0;u<3;u++){var c=i[u];switch(o){case 0:if(c<3)o=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new he;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new he}o=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f),o=0}else throw new he;break;default:throw new he}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var s=r[o];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new he;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,o=Math.floor(i/1600);r[0]=o,i-=o*1600,o=Math.floor(i/40),r[1]=o,r[2]=i-o*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new he;for(var u=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new he;u[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(u);try{t.append(Gr.decode(u,rt.ISO88591))}catch(f){throw new Ef("Platform does not support required encoding: "+f.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n})(),NF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DF=(function(){function n(){this.rsDecoder=new Mp(ur.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new bF(e),o=i.getVersion(),s=i.readCodewords(),u=RF.getDataBlocks(s,o),c=0;try{for(var f=NF(u),h=f.next();!h.done;h=f.next()){var p=h.value;c+=p.getNumDataCodewords()}}catch(M){t={error:M}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}for(var v=new Uint8Array(c),y=u.length,E=0;E<y;E++){var A=u[E],T=A.getCodewords(),N=A.getNumDataCodewords();this.correctErrors(T,N);for(var P=0;P<N;P++)v[P*y+E]=T[P]}return PF.decode(v)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new _n}for(var i=0;i<t;i++)e[i]=r[i]},n})(),OF=(function(){function n(e){this.image=e,this.rectangleDetector=new ug(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new ne;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],o=t[2],s=t[3],u=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(o,s)+1;(u&1)===1&&(u+=1),(c&1)===1&&(c+=1),4*u<7*c&&4*c<7*u&&(u=c=Math.max(u,c));var f=n.sampleGrid(this.image,r,i,o,s,u,c);return new ly(f,[r,i,o,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),o=(t.getY()-e.getY())/(r+1);return new Ce(e.getX()+i,e.getY()+o)},n.moveAway=function(e,t,r){var i=e.getX(),o=e.getY();return i<t?i-=1:i+=1,o<r?o-=1:o+=1,new Ce(i,o)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],o=e[2],s=this.transitionsBetween(t,r),u=this.transitionsBetween(r,i),c=this.transitionsBetween(i,o),f=this.transitionsBetween(o,t),h=s,p=[o,t,r,i];return h>u&&(h=u,p[0]=t,p[1]=r,p[2]=i,p[3]=o),h>c&&(h=c,p[0]=r,p[1]=i,p[2]=o,p[3]=t),h>f&&(p[0]=i,p[1]=o,p[2]=t,p[3]=r),p},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),u=n.shiftPoint(r,i,(s+1)*4),c=n.shiftPoint(i,r,(s+1)*4),f=this.transitionsBetween(u,t),h=this.transitionsBetween(c,o);return f<h?(e[0]=t,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),u=this.transitionsBetween(r,o),c=n.shiftPoint(t,r,(u+1)*4),f=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,o),u=this.transitionsBetween(f,o);var h=new Ce(o.getX()+(i.getX()-r.getX())/(s+1),o.getY()+(i.getY()-r.getY())/(s+1)),p=new Ce(o.getX()+(t.getX()-r.getX())/(u+1),o.getY()+(t.getY()-r.getY())/(u+1));if(!this.isValid(h))return this.isValid(p)?p:null;if(!this.isValid(p))return h;var v=this.transitionsBetween(c,h)+this.transitionsBetween(f,h),y=this.transitionsBetween(c,p)+this.transitionsBetween(f,p);return v>y?h:p},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o)+1,u=this.transitionsBetween(i,o)+1,c=n.shiftPoint(t,r,u*4),f=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,o)+1,u=this.transitionsBetween(f,o)+1,(s&1)===1&&(s+=1),(u&1)===1&&(u+=1);var h=(t.getX()+r.getX()+i.getX()+o.getX())/4,p=(t.getY()+r.getY()+i.getY()+o.getY())/4;t=n.moveAway(t,h,p),r=n.moveAway(r,h,p),i=n.moveAway(i,h,p),o=n.moveAway(o,h,p);var v,y;return c=n.shiftPoint(t,r,u*4),c=n.shiftPoint(c,o,s*4),v=n.shiftPoint(r,t,u*4),v=n.shiftPoint(v,i,s*4),f=n.shiftPoint(i,o,u*4),f=n.shiftPoint(f,r,s*4),y=n.shiftPoint(o,i,u*4),y=n.shiftPoint(y,t,s*4),[c,v,f,y]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,o,s,u){var c=cy.getInstance();return c.sampleGrid(e,s,u,.5,.5,s-.5,.5,s-.5,u-.5,.5,u-.5,t.getX(),t.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(t.getX()),s=Math.trunc(t.getY()),u=Math.abs(s-i)>Math.abs(o-r);if(u){var c=r;r=i,i=c,c=o,o=s,s=c}for(var f=Math.abs(o-r),h=Math.abs(s-i),p=-f/2,v=i<s?1:-1,y=r<o?1:-1,E=0,A=this.image.get(u?i:r,u?r:i),T=r,N=i;T!==o;T+=y){var P=this.image.get(u?N:T,u?T:N);if(P!==A&&(E++,A=P),p+=h,p>0){if(N===s)break;N+=v,p-=f}}return E},n})(),fg=(function(){function n(){this.decoder=new DF}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(kt.PURE_BARCODE)){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=n.NO_POINTS}else{var s=new OF(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var u=r.getRawBytes(),c=new Gn(r.getText(),u,8*u.length,i,Ne.DATA_MATRIX,wt.currentTimeMillis()),f=r.getByteSegments();f!=null&&c.putMetadata(Nn.BYTE_SEGMENTS,f);var h=r.getECLevel();return h!=null&&c.putMetadata(Nn.ERROR_CORRECTION_LEVEL,h),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new ne;var i=this.moduleSize(t,e),o=t[1],s=r[1],u=t[0],c=r[0],f=(c-u+1)/i,h=(s-o+1)/i;if(f<=0||h<=0)throw new ne;var p=i/2;o+=p,u+=p;for(var v=new ji(f,h),y=0;y<h;y++)for(var E=o+y*i,A=0;A<f;A++)e.get(u+A*i,E)&&v.set(A,y);return v},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],o=e[1];i<r&&t.get(i,o);)i++;if(i===r)throw new ne;var s=i-e[0];if(s===0)throw new ne;return s},n.NO_POINTS=[],n})(),kF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){kF(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new fg,t)||this}return e})(fl);var Pu;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(Pu||(Pu={}));var MF=(function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new ni(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Ve;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(Pu.L,"L",1),n.M=new n(Pu.M,"M",0),n.Q=new n(Pu.Q,"Q",3),n.H=new n(Pu.H,"H",2),n})(),LF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d3=(function(){function n(e){this.errorCorrectionLevel=MF.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return Ye.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var u=LF(n.FORMAT_INFO_DECODE_LOOKUP),c=u.next();!c.done;c=u.next()){var f=c.value,h=f[0];if(h===e||h===t)return new n(f[1]);var p=n.numBitsDiffering(e,h);p<o&&(s=f[1],o=p),e!==t&&(p=n.numBitsDiffering(t,h),p<o&&(s=f[1],o=p))}}catch(v){r={error:v}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return o<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),VF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=(function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var o=VF(i),s=o.next();!s.done;s=o.next()){var u=s.value;r+=u.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),L=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),FF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},va=(function(){function n(e,t){for(var r,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var u=0,c=o[0].getECCodewordsPerBlock(),f=o[0].getECBlocks();try{for(var h=FF(f),p=h.next();!p.done;p=h.next()){var v=p.value;u+=v.getCount()*(v.getDataCodewords()+c)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}this.totalCodewords=u}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new he;try{return this.getVersionForNumber((e-17)/4)}catch{throw new he}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Ve;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var o=n.VERSION_DECODE_INFO[i];if(o===e)return n.getVersionForNumber(i+7);var s=d3.numBitsDiffering(e,o);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new ji(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Y(7,new L(1,19)),new Y(10,new L(1,16)),new Y(13,new L(1,13)),new Y(17,new L(1,9))),new n(2,Int32Array.from([6,18]),new Y(10,new L(1,34)),new Y(16,new L(1,28)),new Y(22,new L(1,22)),new Y(28,new L(1,16))),new n(3,Int32Array.from([6,22]),new Y(15,new L(1,55)),new Y(26,new L(1,44)),new Y(18,new L(2,17)),new Y(22,new L(2,13))),new n(4,Int32Array.from([6,26]),new Y(20,new L(1,80)),new Y(18,new L(2,32)),new Y(26,new L(2,24)),new Y(16,new L(4,9))),new n(5,Int32Array.from([6,30]),new Y(26,new L(1,108)),new Y(24,new L(2,43)),new Y(18,new L(2,15),new L(2,16)),new Y(22,new L(2,11),new L(2,12))),new n(6,Int32Array.from([6,34]),new Y(18,new L(2,68)),new Y(16,new L(4,27)),new Y(24,new L(4,19)),new Y(28,new L(4,15))),new n(7,Int32Array.from([6,22,38]),new Y(20,new L(2,78)),new Y(18,new L(4,31)),new Y(18,new L(2,14),new L(4,15)),new Y(26,new L(4,13),new L(1,14))),new n(8,Int32Array.from([6,24,42]),new Y(24,new L(2,97)),new Y(22,new L(2,38),new L(2,39)),new Y(22,new L(4,18),new L(2,19)),new Y(26,new L(4,14),new L(2,15))),new n(9,Int32Array.from([6,26,46]),new Y(30,new L(2,116)),new Y(22,new L(3,36),new L(2,37)),new Y(20,new L(4,16),new L(4,17)),new Y(24,new L(4,12),new L(4,13))),new n(10,Int32Array.from([6,28,50]),new Y(18,new L(2,68),new L(2,69)),new Y(26,new L(4,43),new L(1,44)),new Y(24,new L(6,19),new L(2,20)),new Y(28,new L(6,15),new L(2,16))),new n(11,Int32Array.from([6,30,54]),new Y(20,new L(4,81)),new Y(30,new L(1,50),new L(4,51)),new Y(28,new L(4,22),new L(4,23)),new Y(24,new L(3,12),new L(8,13))),new n(12,Int32Array.from([6,32,58]),new Y(24,new L(2,92),new L(2,93)),new Y(22,new L(6,36),new L(2,37)),new Y(26,new L(4,20),new L(6,21)),new Y(28,new L(7,14),new L(4,15))),new n(13,Int32Array.from([6,34,62]),new Y(26,new L(4,107)),new Y(22,new L(8,37),new L(1,38)),new Y(24,new L(8,20),new L(4,21)),new Y(22,new L(12,11),new L(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Y(30,new L(3,115),new L(1,116)),new Y(24,new L(4,40),new L(5,41)),new Y(20,new L(11,16),new L(5,17)),new Y(24,new L(11,12),new L(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Y(22,new L(5,87),new L(1,88)),new Y(24,new L(5,41),new L(5,42)),new Y(30,new L(5,24),new L(7,25)),new Y(24,new L(11,12),new L(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Y(24,new L(5,98),new L(1,99)),new Y(28,new L(7,45),new L(3,46)),new Y(24,new L(15,19),new L(2,20)),new Y(30,new L(3,15),new L(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Y(28,new L(1,107),new L(5,108)),new Y(28,new L(10,46),new L(1,47)),new Y(28,new L(1,22),new L(15,23)),new Y(28,new L(2,14),new L(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Y(30,new L(5,120),new L(1,121)),new Y(26,new L(9,43),new L(4,44)),new Y(28,new L(17,22),new L(1,23)),new Y(28,new L(2,14),new L(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Y(28,new L(3,113),new L(4,114)),new Y(26,new L(3,44),new L(11,45)),new Y(26,new L(17,21),new L(4,22)),new Y(26,new L(9,13),new L(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Y(28,new L(3,107),new L(5,108)),new Y(26,new L(3,41),new L(13,42)),new Y(30,new L(15,24),new L(5,25)),new Y(28,new L(15,15),new L(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Y(28,new L(4,116),new L(4,117)),new Y(26,new L(17,42)),new Y(28,new L(17,22),new L(6,23)),new Y(30,new L(19,16),new L(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Y(28,new L(2,111),new L(7,112)),new Y(28,new L(17,46)),new Y(30,new L(7,24),new L(16,25)),new Y(24,new L(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Y(30,new L(4,121),new L(5,122)),new Y(28,new L(4,47),new L(14,48)),new Y(30,new L(11,24),new L(14,25)),new Y(30,new L(16,15),new L(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Y(30,new L(6,117),new L(4,118)),new Y(28,new L(6,45),new L(14,46)),new Y(30,new L(11,24),new L(16,25)),new Y(30,new L(30,16),new L(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Y(26,new L(8,106),new L(4,107)),new Y(28,new L(8,47),new L(13,48)),new Y(30,new L(7,24),new L(22,25)),new Y(30,new L(22,15),new L(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Y(28,new L(10,114),new L(2,115)),new Y(28,new L(19,46),new L(4,47)),new Y(28,new L(28,22),new L(6,23)),new Y(30,new L(33,16),new L(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Y(30,new L(8,122),new L(4,123)),new Y(28,new L(22,45),new L(3,46)),new Y(30,new L(8,23),new L(26,24)),new Y(30,new L(12,15),new L(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Y(30,new L(3,117),new L(10,118)),new Y(28,new L(3,45),new L(23,46)),new Y(30,new L(4,24),new L(31,25)),new Y(30,new L(11,15),new L(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Y(30,new L(7,116),new L(7,117)),new Y(28,new L(21,45),new L(7,46)),new Y(30,new L(1,23),new L(37,24)),new Y(30,new L(19,15),new L(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Y(30,new L(5,115),new L(10,116)),new Y(28,new L(19,47),new L(10,48)),new Y(30,new L(15,24),new L(25,25)),new Y(30,new L(23,15),new L(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Y(30,new L(13,115),new L(3,116)),new Y(28,new L(2,46),new L(29,47)),new Y(30,new L(42,24),new L(1,25)),new Y(30,new L(23,15),new L(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Y(30,new L(17,115)),new Y(28,new L(10,46),new L(23,47)),new Y(30,new L(10,24),new L(35,25)),new Y(30,new L(19,15),new L(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Y(30,new L(17,115),new L(1,116)),new Y(28,new L(14,46),new L(21,47)),new Y(30,new L(29,24),new L(19,25)),new Y(30,new L(11,15),new L(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Y(30,new L(13,115),new L(6,116)),new Y(28,new L(14,46),new L(23,47)),new Y(30,new L(44,24),new L(7,25)),new Y(30,new L(59,16),new L(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Y(30,new L(12,121),new L(7,122)),new Y(28,new L(12,47),new L(26,48)),new Y(30,new L(39,24),new L(14,25)),new Y(30,new L(22,15),new L(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Y(30,new L(6,121),new L(14,122)),new Y(28,new L(6,47),new L(34,48)),new Y(30,new L(46,24),new L(10,25)),new Y(30,new L(2,15),new L(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Y(30,new L(17,122),new L(4,123)),new Y(28,new L(29,46),new L(14,47)),new Y(30,new L(49,24),new L(10,25)),new Y(30,new L(24,15),new L(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Y(30,new L(4,122),new L(18,123)),new Y(28,new L(13,46),new L(32,47)),new Y(30,new L(48,24),new L(14,25)),new Y(30,new L(42,15),new L(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Y(30,new L(20,117),new L(4,118)),new Y(28,new L(40,47),new L(7,48)),new Y(30,new L(43,24),new L(22,25)),new Y(30,new L(10,15),new L(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Y(30,new L(19,118),new L(6,119)),new Y(28,new L(18,47),new L(31,48)),new Y(30,new L(34,24),new L(34,25)),new Y(30,new L(20,15),new L(61,16)))],n})(),mn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(mn||(mn={}));var iA=(function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[mn.DATA_MASK_000,new n(mn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[mn.DATA_MASK_001,new n(mn.DATA_MASK_001,function(e,t){return(e&1)===0})],[mn.DATA_MASK_010,new n(mn.DATA_MASK_010,function(e,t){return t%3===0})],[mn.DATA_MASK_011,new n(mn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[mn.DATA_MASK_100,new n(mn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[mn.DATA_MASK_101,new n(mn.DATA_MASK_101,function(e,t){return e*t%6===0})],[mn.DATA_MASK_110,new n(mn.DATA_MASK_110,function(e,t){return e*t%6<3})],[mn.DATA_MASK_111,new n(mn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n})(),BF=(function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new he;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),o=0,s=i-7,r=i-1;r>=s;r--)o=this.copyBit(8,r,o);for(var t=i-8;t<i;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=d3.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new he},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return va.getVersionForNumber(t);for(var r=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,o,r);var u=va.decodeVersionInformation(r);if(u!==null&&u.getDimensionForVersion()===e)return this.parsedVersion=u,u;r=0;for(var s=5;s>=0;s--)for(var o=e-9;o>=i;o--)r=this.copyBit(s,o,r);if(u=va.decodeVersionInformation(r),u!==null&&u.getDimensionForVersion()===e)return this.parsedVersion=u,u;throw new he},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=iA.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=t.buildFunctionPattern(),s=!0,u=new Uint8Array(t.getTotalCodewords()),c=0,f=0,h=0,p=i-1;p>0;p-=2){p===6&&p--;for(var v=0;v<i;v++)for(var y=s?i-1-v:v,E=0;E<2;E++)o.get(p-E,y)||(h++,f<<=1,this.bitMatrix.get(p-E,y)&&(f|=1),h===8&&(u[c++]=f,h=0,f=0));s=!s}if(c!==t.getTotalCodewords())throw new he;return u},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=iA.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,o=e.getHeight();i<o;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n})(),oA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UF=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,o,s,u;if(e.length!==t.getTotalCodewords())throw new Ve;var c=t.getECBlocksForLevel(r),f=0,h=c.getECBlocks();try{for(var p=oA(h),v=p.next();!v.done;v=p.next()){var y=v.value;f+=y.getCount()}}catch(V){i={error:V}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}var E=new Array(f),A=0;try{for(var T=oA(h),N=T.next();!N.done;N=T.next())for(var y=N.value,P=0;P<y.getCount();P++){var M=y.getDataCodewords(),j=c.getECCodewordsPerBlock()+M;E[A++]=new n(M,new Uint8Array(j))}}catch(V){s={error:V}}finally{try{N&&!N.done&&(u=T.return)&&u.call(T)}finally{if(s)throw s.error}}for(var H=E[0].codewords.length,W=E.length-1;W>=0;){var R=E[W].codewords.length;if(R===H)break;W--}W++;for(var I=H-c.getECCodewordsPerBlock(),D=0,P=0;P<I;P++)for(var O=0;O<A;O++)E[O].codewords[P]=e[D++];for(var O=W;O<A;O++)E[O].codewords[I]=e[D++];for(var F=E[0].codewords.length,P=I;P<F;P++)for(var O=0;O<A;O++){var U=O<W?P:P+1;E[O].codewords[U]=e[D++]}return E},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),Fr;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(Fr||(Fr={}));var It=(function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Ve;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(Fr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(Fr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(Fr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(Fr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(Fr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(Fr.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(Fr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(Fr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(Fr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(Fr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n})(),jF=(function(){function n(){}return n.decode=function(e,t,r,i){var o=new h3(e),s=new qe,u=new Array,c=-1,f=-1;try{var h=null,p=!1,v=void 0;do{if(o.available()<4)v=It.TERMINATOR;else{var y=o.readBits(4);v=It.forBits(y)}switch(v){case It.TERMINATOR:break;case It.FNC1_FIRST_POSITION:case It.FNC1_SECOND_POSITION:p=!0;break;case It.STRUCTURED_APPEND:if(o.available()<16)throw new he;c=o.readBits(8),f=o.readBits(8);break;case It.ECI:var E=n.parseECIValue(o);if(h=an.getCharacterSetECIByValue(E),h===null)throw new he;break;case It.HANZI:var A=o.readBits(4),T=o.readBits(v.getCharacterCountBits(t));A===n.GB2312_SUBSET&&n.decodeHanziSegment(o,s,T);break;default:var N=o.readBits(v.getCharacterCountBits(t));switch(v){case It.NUMERIC:n.decodeNumericSegment(o,s,N);break;case It.ALPHANUMERIC:n.decodeAlphanumericSegment(o,s,N,p);break;case It.BYTE:n.decodeByteSegment(o,s,N,h,u,i);break;case It.KANJI:n.decodeKanjiSegment(o,s,N);break;default:throw new he}break}}while(v!==It.TERMINATOR)}catch{throw new he}return new kp(e,s.toString(),u.length===0?null:u,r===null?null:r.toString(),c,f)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new he;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),u=s/96<<8&4294967295|s%96;u<959?u+=41377:u+=42657,i[o]=u>>8&255,i[o+1]=u&255,o+=2,r--}try{t.append(Gr.decode(i,rt.GB2312))}catch(c){throw new he(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new he;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),u=s/192<<8&4294967295|s%192;u<7936?u+=33088:u+=49472,i[o]=u>>8,i[o+1]=u,o+=2,r--}try{t.append(Gr.decode(i,rt.SHIFT_JIS))}catch(c){throw new he(c)}},n.decodeByteSegment=function(e,t,r,i,o,s){if(8*r>e.available())throw new he;for(var u=new Uint8Array(r),c=0;c<r;c++)u[c]=e.readBits(8);var f;i===null?f=rt.guessEncoding(u,s):f=i.getName();try{t.append(Gr.decode(u,f))}catch(h){throw new he(h)}o.push(u)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new he;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var o=t.length();r>1;){if(e.available()<11)throw new he;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new he;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var u=o;u<t.length();u++)t.charAt(u)==="%"&&(u<t.length()-1&&t.charAt(u+1)==="%"?t.deleteCharAt(u+1):t.setCharAt(u,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new he;var i=e.readBits(10);if(i>=1e3)throw new he;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new he;var o=e.readBits(7);if(o>=100)throw new he;t.append(n.toAlphaNumericChar(Math.floor(o/10))),t.append(n.toAlphaNumericChar(o%10))}else if(r===1){if(e.available()<4)throw new he;var s=e.readBits(4);if(s>=10)throw new he;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new he},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n})(),p3=(function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n})(),sA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zF=(function(){function n(){this.rsDecoder=new Mp(ur.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(ji.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new BF(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,t);return o.setOther(new p3(!0)),o}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,o,s,u=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),h=UF.getDataBlocks(f,u,c),p=0;try{for(var v=sA(h),y=v.next();!y.done;y=v.next()){var E=y.value;p+=E.getNumDataCodewords()}}catch(W){r={error:W}}finally{try{y&&!y.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}var A=new Uint8Array(p),T=0;try{for(var N=sA(h),P=N.next();!P.done;P=N.next()){var E=P.value,M=E.getCodewords(),j=E.getNumDataCodewords();this.correctErrors(M,j);for(var H=0;H<j;H++)A[T++]=M[H]}}catch(W){o={error:W}}finally{try{P&&!P.done&&(s=N.return)&&s.call(N)}finally{if(o)throw o.error}}return jF.decode(A,u,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new _n}for(var i=0;i<t;i++)e[i]=r[i]},n})(),HF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),GF=(function(n){HF(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=(this.getX()+r)/2,s=(this.getY()+t)/2,u=(this.estimatedModuleSize+i)/2;return new e(o,s,u)},e})(Ce),WF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$F=(function(){function n(e,t,r,i,o,s,u){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,o=this.startY+t/2,s=new Int32Array(3),u=this.image,c=0;c<t;c++){var f=o+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var h=e;h<i&&!u.get(h,f);)h++;for(var p=0;h<i;){if(u.get(h,f))if(p===1)s[1]++;else if(p===2){if(this.foundPatternCross(s)){var v=this.handlePossibleCenter(s,f,h);if(v!==null)return v}s[0]=s[2],s[1]=1,s[2]=0,p=1}else s[++p]++;else p===1&&p++,s[p]++;h++}if(this.foundPatternCross(s)){var v=this.handlePossibleCenter(s,f,i);if(v!==null)return v}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ne},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var o=this.image,s=o.getHeight(),u=this.crossCheckStateCount;u[0]=0,u[1]=0,u[2]=0;for(var c=e;c>=0&&o.get(t,c)&&u[1]<=r;)u[1]++,c--;if(c<0||u[1]>r)return NaN;for(;c>=0&&!o.get(t,c)&&u[0]<=r;)u[0]++,c--;if(u[0]>r)return NaN;for(c=e+1;c<s&&o.get(t,c)&&u[1]<=r;)u[1]++,c++;if(c===s||u[1]>r)return NaN;for(;c<s&&!o.get(t,c)&&u[2]<=r;)u[2]++,c++;if(u[2]>r)return NaN;var f=u[0]+u[1]+u[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(u)?n.centerFromEnd(u,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,o,s=e[0]+e[1]+e[2],u=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,u,2*e[1],s);if(!isNaN(c)){var f=(e[0]+e[1]+e[2])/3;try{for(var h=WF(this.possibleCenters),p=h.next();!p.done;p=h.next()){var v=p.value;if(v.aboutEquals(f,c,u))return v.combineEstimate(c,u,f)}}catch(E){i={error:E}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}var y=new GF(u,c,f);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null},n})(),qF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),KF=(function(n){qF(e,n);function e(t,r,i,o){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=this.count+1,s=(this.count*this.getX()+r)/o,u=(this.count*this.getY()+t)/o,c=(this.count*this.estimatedModuleSize+i)/o;return new e(s,u,c,o)},e})(Ce),XF=(function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),cc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YF=(function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(kt.TRY_HARDER)!==void 0,r=e!=null&&e.get(kt.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),u=Math.floor(3*o/(4*n.MAX_MODULES));(u<n.MIN_SKIP||t)&&(u=n.MIN_SKIP);for(var c=!1,f=new Int32Array(5),h=u-1;h<o&&!c;h+=u){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var p=0,v=0;v<s;v++)if(i.get(v,h))(p&1)===1&&p++,f[p]++;else if((p&1)===0)if(p===4)if(n.foundPatternCross(f)){var y=this.handlePossibleCenter(f,h,v,r);if(y===!0)if(u=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var E=this.findRowSkip();E>f[2]&&(h+=E-f[2]-u,v=s-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;continue}p=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;else f[++p]++;else f[p]++;if(n.foundPatternCross(f)){var y=this.handlePossibleCenter(f,h,s,r);y===!0&&(u=f[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var A=this.selectBestPatterns();return Ce.orderBestPatterns(A),new XF(A)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var o=t/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var o=this.getCrossCheckStateCount(),s=0,u=this.image;e>=s&&t>=s&&u.get(t-s,e-s);)o[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!u.get(t-s,e-s)&&o[1]<=r;)o[1]++,s++;if(e<s||t<s||o[1]>r)return!1;for(;e>=s&&t>=s&&u.get(t-s,e-s)&&o[0]<=r;)o[0]++,s++;if(o[0]>r)return!1;var c=u.getHeight(),f=u.getWidth();for(s=1;e+s<c&&t+s<f&&u.get(t+s,e+s);)o[2]++,s++;if(e+s>=c||t+s>=f)return!1;for(;e+s<c&&t+s<f&&!u.get(t+s,e+s)&&o[3]<r;)o[3]++,s++;if(e+s>=c||t+s>=f||o[3]>=r)return!1;for(;e+s<c&&t+s<f&&u.get(t+s,e+s)&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return!1;var h=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(h-i)<2*i&&n.foundPatternCross(o)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var o=this.image,s=o.getHeight(),u=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(t,c);)u[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(t,c)&&u[1]<=r;)u[1]++,c--;if(c<0||u[1]>r)return NaN;for(;c>=0&&o.get(t,c)&&u[0]<=r;)u[0]++,c--;if(u[0]>r)return NaN;for(c=e+1;c<s&&o.get(t,c);)u[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(t,c)&&u[3]<r;)u[3]++,c++;if(c===s||u[3]>=r)return NaN;for(;c<s&&o.get(t,c)&&u[4]<r;)u[4]++,c++;if(u[4]>=r)return NaN;var f=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(f-i)>=2*i?NaN:n.foundPatternCross(u)?n.centerFromEnd(u,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var o=this.image,s=o.getWidth(),u=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(c,t);)u[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(c,t)&&u[1]<=r;)u[1]++,c--;if(c<0||u[1]>r)return NaN;for(;c>=0&&o.get(c,t)&&u[0]<=r;)u[0]++,c--;if(u[0]>r)return NaN;for(c=e+1;c<s&&o.get(c,t);)u[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(c,t)&&u[3]<r;)u[3]++,c++;if(c===s||u[3]>=r)return NaN;for(;c<s&&o.get(c,t)&&u[4]<r;)u[4]++,c++;if(u[4]>=r)return NaN;var f=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(f-i)>=i?NaN:n.foundPatternCross(u)?n.centerFromEnd(u,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),u=this.crossCheckVertical(t,Math.floor(s),e[2],o);if(!isNaN(u)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(u),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(u),Math.floor(s),e[2],o)))){for(var c=o/7,f=!1,h=this.possibleCenters,p=0,v=h.length;p<v;p++){var y=h[p];if(y.aboutEquals(c,u,s)){h[p]=y.combineEstimate(u,s,c),f=!0;break}}if(!f){var E=new KF(s,u,c);h.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var o=cc(this.possibleCenters),s=o.next();!s.done;s=o.next()){var u=s.value;if(u.getCount()>=n.CENTER_QUORUM)if(i==null)i=u;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-u.getX())-Math.abs(i.getY()-u.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,o=0,s=0,u=this.possibleCenters.length;try{for(var c=cc(this.possibleCenters),f=c.next();!f.done;f=c.next()){var h=f.value;h.getCount()>=n.CENTER_QUORUM&&(o++,s+=h.getEstimatedModuleSize())}}catch(A){e={error:A}}finally{try{f&&!f.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(o<3)return!1;var p=s/u,v=0;try{for(var y=cc(this.possibleCenters),E=y.next();!E.done;E=y.next()){var h=E.value;v+=Math.abs(h.getEstimatedModuleSize()-p)}}catch(A){r={error:A}}finally{try{E&&!E.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}return v<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,o=this.possibleCenters.length;if(o<3)throw new ne;var s=this.possibleCenters,u;if(o>3){var c=0,f=0;try{for(var h=cc(this.possibleCenters),p=h.next();!p.done;p=h.next()){var v=p.value,y=v.getEstimatedModuleSize();c+=y,f+=y*y}}catch(H){e={error:H}}finally{try{p&&!p.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}u=c/o;var E=Math.sqrt(f/o-u*u);s.sort(function(H,W){var R=Math.abs(W.getEstimatedModuleSize()-u),I=Math.abs(H.getEstimatedModuleSize()-u);return R<I?-1:R>I?1:0});for(var A=Math.max(.2*u,E),T=0;T<s.length&&s.length>3;T++){var N=s[T];Math.abs(N.getEstimatedModuleSize()-u)>A&&(s.splice(T,1),T--)}}if(s.length>3){var c=0;try{for(var P=cc(s),M=P.next();!M.done;M=P.next()){var j=M.value;c+=j.getEstimatedModuleSize()}}catch(W){r={error:W}}finally{try{M&&!M.done&&(i=P.return)&&i.call(P)}finally{if(r)throw r.error}}u=c/s.length,s.sort(function(W,R){if(R.getCount()===W.getCount()){var I=Math.abs(R.getEstimatedModuleSize()-u),D=Math.abs(W.getEstimatedModuleSize()-u);return I<D?1:I>D?-1:0}else return R.getCount()-W.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),QF=(function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(kt.NEED_RESULT_POINT_CALLBACK);var t=new YF(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(t,r,i);if(o<1)throw new ne("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,o),u=va.getProvisionalVersionForDimension(s),c=u.getDimensionForVersion()-7,f=null;if(u.getAlignmentPatternCenters().length>0)for(var h=r.getX()-t.getX()+i.getX(),p=r.getY()-t.getY()+i.getY(),v=1-3/c,y=Math.floor(t.getX()+v*(h-t.getX())),E=Math.floor(t.getY()+v*(p-t.getY())),A=4;A<=16;A<<=1)try{f=this.findAlignmentInRegion(o,y,E,A);break}catch(M){if(!(M instanceof ne))throw M}var T=n.createTransform(t,r,i,f,s),N=n.sampleGrid(this.image,T,s),P;return f===null?P=[i,t,r]:P=[i,t,r,f],new ly(N,P)},n.createTransform=function(e,t,r,i,o){var s=o-3.5,u,c,f,h;return i!==null?(u=i.getX(),c=i.getY(),f=s-3,h=f):(u=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),f=s,h=s),u3.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,f,h,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),u,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=cy.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var o=ut.round(Ce.distance(e,t)/i),s=ut.round(Ce.distance(e,r)/i),u=Math.floor((o+s)/2)+7;switch(u&3){case 0:u++;break;case 2:u--;break;case 3:throw new ne("Dimensions could be not found.")}return u},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,u=e-(r-e);u<0?(s=e/(e-u),u=0):u>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(u-e),u=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*s);return s=1,c<0?(s=t/(t-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),u=Math.floor(e+(u-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,t,u,c),o-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var o=Math.abs(i-t)>Math.abs(r-e);if(o){var s=e;e=t,t=s,s=r,r=i,i=s}for(var u=Math.abs(r-e),c=Math.abs(i-t),f=-u/2,h=e<r?1:-1,p=t<i?1:-1,v=0,y=r+h,E=e,A=t;E!==y;E+=h){var T=o?A:E,N=o?E:A;if(v===1===this.image.get(T,N)){if(v===2)return ut.distance(E,A,e,t);v++}if(f+=c,f>0){if(A===i)break;A+=p,f-=u}}return v===2?ut.distance(r+h,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var o=Math.floor(i*e),s=Math.max(0,t-o),u=Math.min(this.image.getWidth()-1,t+o);if(u-s<e*3)throw new ne("Alignment top exceeds estimated module size.");var c=Math.max(0,r-o),f=Math.min(this.image.getHeight()-1,r+o);if(f-c<e*3)throw new ne("Alignment bottom exceeds estimated module size.");var h=new $F(this.image,s,c,u-s,f-c,e,this.resultPointCallback);return h.find()},n})(),hg=(function(){function n(){this.decoder=new zF}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(kt.PURE_BARCODE)!==void 0){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,t),i=n.NO_POINTS}else{var s=new QF(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof p3&&r.getOther().applyMirroredCorrection(i);var u=new Gn(r.getText(),r.getRawBytes(),void 0,i,Ne.QR_CODE,void 0),c=r.getByteSegments();c!==null&&u.putMetadata(Nn.BYTE_SEGMENTS,c);var f=r.getECLevel();return f!==null&&u.putMetadata(Nn.ERROR_CORRECTION_LEVEL,f),r.hasStructuredAppend()&&(u.putMetadata(Nn.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),u.putMetadata(Nn.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),u},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new ne;var i=this.moduleSize(t,e),o=t[1],s=r[1],u=t[0],c=r[0];if(u>=c||o>=s)throw new ne;if(s-o!==c-u&&(c=u+(s-o),c>=e.getWidth()))throw new ne;var f=Math.round((c-u+1)/i),h=Math.round((s-o+1)/i);if(f<=0||h<=0)throw new ne;if(h!==f)throw new ne;var p=Math.floor(i/2);o+=p,u+=p;var v=u+Math.floor((f-1)*i)-c;if(v>0){if(v>p)throw new ne;u-=v}var y=o+Math.floor((h-1)*i)-s;if(y>0){if(y>p)throw new ne;o-=y}for(var E=new ji(f,h),A=0;A<h;A++)for(var T=o+Math.floor(A*i),N=0;N<f;N++)e.get(u+Math.floor(N*i),T)&&E.set(N,A);return E},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),o=e[0],s=e[1],u=!0,c=0;o<i&&s<r;){if(u!==t.get(o,s)){if(++c===5)break;u=!u}o++,s++}if(o===i||s===r)throw new ne;return(o-e[0])/7},n.NO_POINTS=new Array,n})(),ZF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},st=(function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return ut.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=ZF(e),u=s.next();!u.done;u=s.next()){var c=u.value;i[o++]=c}}catch(f){t={error:f}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=un.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n})(),JF=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),eB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tB=(function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),o=n.detect(r,i);return o.length||(i=i.clone(),i.rotate180(),o=n.detect(r,i)),new JF(i,o)},n.detect=function(e,t){for(var r,i,o=new Array,s=0,u=0,c=!1;s<t.getHeight();){var f=n.findVertices(t,s,u);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,u=0;try{for(var h=(r=void 0,eB(o)),p=h.next();!p.done;p=h.next()){var v=p.value;v[1]!=null&&(s=Math.trunc(Math.max(s,v[1].getY()))),v[3]!=null&&(s=Math.max(s,Math.trunc(v[3].getY())))}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(c=!0,o.push(f),!e)break;f[2]!=null?(u=Math.trunc(f[2].getX()),s=Math.trunc(f[2].getY())):(u=Math.trunc(f[4].getX()),s=Math.trunc(f[4].getY()))}return o},n.findVertices=function(e,t,r){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,o,s){for(var u=new Array(4),c=!1,f=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var h=n.findGuardPattern(e,o,i,r,!1,s,f);if(h!=null){for(;i>0;){var p=n.findGuardPattern(e,o,--i,r,!1,s,f);if(p!=null)h=p;else{i++;break}}u[0]=new Ce(h[0],i),u[1]=new Ce(h[1],i),c=!0;break}}var v=i+1;if(c){for(var y=0,p=Int32Array.from([Math.trunc(u[0].getX()),Math.trunc(u[1].getX())]);v<t;v++){var h=n.findGuardPattern(e,p[0],v,r,!1,s,f);if(h!=null&&Math.abs(p[0]-h[0])<n.MAX_PATTERN_DRIFT&&Math.abs(p[1]-h[1])<n.MAX_PATTERN_DRIFT)p=h,y=0;else{if(y>n.SKIPPED_ROW_COUNT_MAX)break;y++}}v-=y+1,u[2]=new Ce(p[0],v),u[3]=new Ce(p[1],v)}return v-i<n.BARCODE_MIN_HEIGHT&&un.fill(u,null),u},n.findGuardPattern=function(e,t,r,i,o,s,u){un.fillWithin(u,0,u.length,0);for(var c=t,f=0;e.get(c,r)&&c>0&&f++<n.MAX_PIXEL_DRIFT;)c--;for(var h=c,p=0,v=s.length,y=o;h<i;h++){var E=e.get(h,r);if(E!==y)u[p]++;else{if(p===v-1){if(n.patternMatchVariance(u,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,h]);c+=u[0]+u[1],wt.arraycopy(u,2,u,0,p-1),u[p-1]=0,u[p]=0,p--}else p++;u[p]=1,y=!y}}return p===v-1&&n.patternMatchVariance(u,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,h-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,u=0;u<i;u++)o+=e[u],s+=t[u];if(o<s)return 1/0;var c=o/s;r*=c;for(var f=0,h=0;h<i;h++){var p=e[h],v=t[h]*c,y=p>v?p-v:v-p;if(y>r)return 1/0;f+=y}return f/o},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n})(),nB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},da=(function(){function n(e,t){if(t.length===0)throw new Ve;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),wt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=nB(this.coefficients),s=o.next();!s.done;s=o.next()){var u=s.value;i=this.field.add(i,u)}}catch(p){t={error:p}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],f=this.coefficients.length,h=1;h<f;h++)c=this.field.add(this.field.multiply(e,c),this.coefficients[h]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Ve("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;wt.arraycopy(r,0,o,0,s);for(var u=s;u<r.length;u++)o[u]=this.field.add(t[u-s],r[u]);return new n(this.field,o)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Ve("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Ve("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),u=0;u<r;u++)for(var c=t[u],f=0;f<o;f++)s[u+f]=this.field.add(s[u+f],this.field.multiply(c,i[f]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ve;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new qe,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n})(),rB=(function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Ve;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new a3;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n})(),iB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),oB=(function(n){iB(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var o=1,s=0;s<t;s++)i.expTable[s]=o,o=o*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new da(i,new Int32Array([0])),i.one=new da(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Ve;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new da(this,i)},e.PDF417_GF=new e(st.NUMBER_OF_CODEWORDS,3),e})(rB),sB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aB=(function(){function n(){this.field=oB.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,o,s=new da(this.field,e),u=new Int32Array(t),c=!1,f=t;f>0;f--){var h=s.evaluateAt(this.field.exp(f));u[t-f]=h,h!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(r!=null)try{for(var v=sB(r),y=v.next();!y.done;y=v.next()){var E=y.value,A=this.field.exp(e.length-1-E),T=new da(this.field,new Int32Array([this.field.subtract(0,A),1]));p=p.multiply(T)}}catch(I){i={error:I}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}for(var N=new da(this.field,u),P=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),N,t),M=P[0],j=P[1],H=this.findErrorLocations(M),W=this.findErrorMagnitudes(j,M,H),f=0;f<H.length;f++){var R=e.length-1-this.field.log(H[f]);if(R<0)throw _n.getChecksumInstance();e[R]=this.field.subtract(e[R],W[f])}return H.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=e,s=t,u=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var f=o,h=u;if(o=s,u=c,o.isZero())throw _n.getChecksumInstance();s=f;for(var p=this.field.getZero(),v=o.getCoefficient(o.getDegree()),y=this.field.inverse(v);s.getDegree()>=o.getDegree()&&!s.isZero();){var E=s.getDegree()-o.getDegree(),A=this.field.multiply(s.getCoefficient(s.getDegree()),y);p=p.add(this.field.buildMonomial(E,A)),s=s.subtract(o.multiplyByMonomial(E,A))}c=p.multiply(u).subtract(h).negative()}var T=c.getCoefficient(0);if(T===0)throw _n.getChecksumInstance();var N=this.field.inverse(T),P=c.multiply(N),M=s.multiply(N);return[P,M]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,o=1;o<this.field.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=this.field.inverse(o),i++);if(i!==t)throw _n.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var u=new da(this.field,o),c=r.length,f=new Int32Array(c),s=0;s<c;s++){var h=this.field.inverse(r[s]),p=this.field.subtract(0,e.evaluateAt(h)),v=this.field.inverse(u.evaluateAt(h));f[s]=this.field.multiply(p,v)}return f},n})(),dg=(function(){function n(e,t,r,i,o){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,o)}return n.prototype.constructor_1=function(e,t,r,i,o){var s=t==null||r==null,u=i==null||o==null;if(s&&u)throw new ne;s?(t=new Ce(0,i.getY()),r=new Ce(0,o.getY())):u&&(i=new Ce(e.getWidth()-1,t.getY()),o=new Ce(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,u=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,f=Math.trunc(c.getY()-e);f<0&&(f=0);var h=new Ce(c.getX(),f);r?i=h:s=h}if(t>0){var p=r?this.bottomLeft:this.bottomRight,v=Math.trunc(p.getY()+t);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);var y=new Ce(p.getX(),v);r?o=y:u=y}return new n(this.image,i,o,s,u)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n})(),uB=(function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n})(),hy=(function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,u,c,f,h,p){if(s==="%%")return"%";if(t[++r]!==void 0){s=f?parseInt(f.substr(1)):void 0;var v=h?parseInt(h.substr(1)):void 0,y;switch(p){case"s":y=t[r];break;case"c":y=t[r][0];break;case"f":y=parseFloat(t[r]).toFixed(s);break;case"p":y=parseFloat(t[r]).toPrecision(s);break;case"e":y=parseFloat(t[r]).toExponential(s);break;case"x":y=parseInt(t[r]).toString(v||16);break;case"d":y=parseFloat(parseInt(t[r],v||10).toPrecision(s)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(v);for(var E=parseInt(c),A=c&&c[0]+""=="0"?"0":" ";y.length<E;)y=u!==void 0?y+A:A+y;return y}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n})(),lB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},m3=(function(){function n(e){this.boundingBox=new dg(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new hy,i=0;try{for(var o=lB(this.codewords),s=o.next();!s.done;s=o.next()){var u=s.value;if(u==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,u.getRowNumber(),u.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n})(),cB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fB=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},xc=(function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,o=function(p,v){var y={getKey:function(){return p},getValue:function(){return v}};y.getValue()>r?(r=y.getValue(),i=[],i.push(y.getKey())):y.getValue()===r&&i.push(y.getKey())};try{for(var s=cB(this.values.entries()),u=s.next();!u.done;u=s.next()){var c=fB(u.value,2),f=c[0],h=c[1];o(f,h)}}catch(p){e={error:p}}finally{try{u&&!u.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return st.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n})(),hB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Z1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aA=(function(n){hB(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=Z1(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),f=-1,h=1,p=0,v=u;v<c;v++)if(r[v]!=null){var y=r[v],E=y.getRowNumber()-f;if(E===0)p++;else if(E===1)h=Math.max(h,p),p=1,f=y.getRowNumber();else if(E<0||y.getRowNumber()>=t.getRowCount()||E>v)r[v]=null;else{var A=void 0;h>2?A=(h-2)*E:A=E;for(var T=A>=v,N=1;N<=A&&!T;N++)T=r[v-N]!=null;T?r[v]=null:(f=y.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=Z1(this.getCodewords()),u=s.next();!u.done;u=s.next()){var c=u.value;if(c!=null){var f=c.getRowNumber();if(f>=o.length)continue;o[f]++}}}catch(h){t={error:h}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.getCodewords(),f=-1,h=s;h<u;h++)if(c[h]!=null){var p=c[h];p.setRowNumberAsRowIndicatorColumn();var v=p.getRowNumber()-f;v===0||(v===1?f=p.getRowNumber():p.getRowNumber()>=t.getRowCount()?c[h]=null:f=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),o=new xc,s=new xc,u=new xc,c=new xc;try{for(var f=Z1(i),h=f.next();!h.done;h=f.next()){var p=h.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var v=p.getValue()%30,y=p.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:s.setValue(v*3+1);break;case 1:c.setValue(v/3),u.setValue(v%3);break;case 2:o.setValue(v+1);break}}}}catch(A){t={error:A}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}if(o.getValue().length===0||s.getValue().length===0||u.getValue().length===0||c.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+u.getValue()[0]<st.MIN_ROWS_IN_BARCODE||s.getValue()[0]+u.getValue()[0]>st.MAX_ROWS_IN_BARCODE)return null;var E=new uB(o.getValue()[0],s.getValue()[0],u.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,E),E},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var o=t[i];if(t[i]!=null){var s=o.getValue()%30,u=o.getRowNumber();if(u>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(u+=2),u%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e})(m3),dB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pB=(function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=st.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var u=this.detectionResultColumns[s].getCodewords()[r];u!=null&&(o=n.adjustRowNumberIfValid(i,o,u),u.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var u=this.detectionResultColumns[s].getCodewords()[r];u!=null&&(o=n.adjustRowNumberIfValid(i,o,u),u.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=r[t],u=this.detectionResultColumns[e-1].getCodewords(),c=u;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=u[t],f[3]=c[t],t>0&&(f[0]=r[t-1],f[4]=u[t-1],f[5]=c[t-1]),t>1&&(f[8]=r[t-2],f[10]=u[t-2],f[11]=c[t-2]),t<r.length-1&&(f[1]=r[t+1],f[6]=u[t+1],f[7]=c[t+1]),t<r.length-2&&(f[9]=r[t+2],f[12]=u[t+2],f[13]=c[t+2]);try{for(var h=dB(f),p=h.next();!p.done;p=h.next()){var v=p.value;if(n.adjustRowNumber(s,v))return}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new hy,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[r];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()},n})(),mB=(function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n})(),gB=(function(){function n(){}return n.initialize=function(){for(var e=0;e<st.SYMBOL_TABLE.length;e++)for(var t=st.SYMBOL_TABLE[e],r=t&1,i=0;i<st.BARS_IN_MODULE;i++){for(var o=0;(t&1)===r;)o+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(st.BARS_IN_MODULE)),n.RATIOS_TABLE[e][st.BARS_IN_MODULE-i-1]=Math.fround(o/st.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=ut.sum(e),r=new Int32Array(st.BARS_IN_MODULE),i=0,o=0,s=0;s<st.MODULES_IN_CODEWORD;s++){var u=t/(2*st.MODULES_IN_CODEWORD)+s*t/st.MODULES_IN_CODEWORD;o+e[i]<=u&&(o+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return st.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=ut.sum(e),r=new Array(st.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var o=ag.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var u=0;u<n.RATIOS_TABLE.length;u++){for(var c=0,f=n.RATIOS_TABLE[u],h=0;h<st.BARS_IN_MODULE;h++){var p=Math.fround(f[h]-r[h]);if(c+=Math.fround(p*p),c>=o)break}c<o&&(o=c,s=st.SYMBOL_TABLE[u])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(st.SYMBOL_TABLE.length).map(function(e){return new Array(st.BARS_IN_MODULE)}),n})(),vB=(function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n})(),uA=(function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n})(),yB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_B=(function(n){yB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e})(fr),xB=(function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new _B;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new ay;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n})(),wB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),EB=(function(n){wB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(fr),AB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),TB=(function(n){AB(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Ve("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new EB;i=Ye.MAX_VALUE}this.buf=un.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new ay;this.ensureCapacity(this.count+i),wt.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return un.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(xB),gt;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(gt||(gt={}));function g3(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var td;function ns(n){if(typeof td>"u"&&(td=g3()),td===null)throw new Error("BigInt is not supported!");return td(n)}function CB(){var n=[];n[0]=ns(1);var e=ns(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var IB=(function(){function n(){}return n.decode=function(e,t){var r=new qe(""),i=an.ISO8859_1;r.enableDecoding(i);for(var o=1,s=e[o++],u=new vB;o<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:o=n.textCompaction(e,o,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:o=n.byteCompaction(s,e,i,o,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:o=n.numericCompaction(e,o,r);break;case n.ECI_CHARSET:an.getCharacterSetECIByValue(e[o++]);break;case n.ECI_GENERAL_PURPOSE:o+=2;break;case n.ECI_USER_DEFINED:o++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=n.decodeMacroBlock(e,o,u);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new he;default:o--,o=n.textCompaction(e,o,r);break}if(o<e.length)s=e[o++];else throw he.getFormatInstance()}if(r.length()===0)throw he.getFormatInstance();var c=new kp(null,r.toString(),null,t);return c.setOther(u),c},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw he.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<n.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)i[o]=e[t];r.setSegmentIndex(Ye.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new qe;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var u=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(u=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new qe;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new qe;t=n.textCompaction(e,t+1,f),r.setSender(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var h=new qe;t=n.textCompaction(e,t+1,h),r.setAddressee(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new qe;t=n.numericCompaction(e,t+1,p),r.setSegmentCount(Ye.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var v=new qe;t=n.numericCompaction(e,t+1,v),r.setTimestamp(uA.parseLong(v.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var y=new qe;t=n.numericCompaction(e,t+1,y),r.setChecksum(Ye.parseInt(y.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var E=new qe;t=n.numericCompaction(e,t+1,E),r.setFileSize(uA.parseLong(E.toString()));break;default:throw he.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw he.getFormatInstance()}if(u!==-1){var A=t-u;r.isLastSegment()&&A--,r.setOptionalData(un.copyOfRange(e,u,u+A))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),s=0,u=!1;t<e[0]&&!u;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,u=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],o[s]=c,s++;break}}return n.decodeTextCompaction(i,o,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var o=gt.ALPHA,s=gt.ALPHA,u=0;u<r;){var c=e[u],f="";switch(o){case gt.ALPHA:if(c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.LL:o=gt.LOWER;break;case n.ML:o=gt.MIXED;break;case n.PS:s=o,o=gt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break;case gt.LOWER:if(c<26)f=String.fromCharCode(97+c);else switch(c){case 26:f=" ";break;case n.AS:s=o,o=gt.ALPHA_SHIFT;break;case n.ML:o=gt.MIXED;break;case n.PS:s=o,o=gt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break;case gt.MIXED:if(c<n.PL)f=n.MIXED_CHARS[c];else switch(c){case n.PL:o=gt.PUNCT;break;case 26:f=" ";break;case n.LL:o=gt.LOWER;break;case n.AL:o=gt.ALPHA;break;case n.PS:s=o,o=gt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break;case gt.PUNCT:if(c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:o=gt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break;case gt.ALPHA_SHIFT:if(o=s,c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break;case gt.PUNCT_SHIFT:if(o=s,c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:o=gt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=gt.ALPHA;break}break}f!==""&&i.append(f),u++}},n.byteCompaction=function(e,t,r,i,o){var s=new TB,u=0,c=0,f=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var h=new Int32Array(6),p=t[i++];i<t[0]&&!f;)switch(h[u++]=p,c=900*c+p,p=t[i++],p){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(u%5===0&&u>0){for(var v=0;v<6;++v)s.write(Number(ns(c)>>ns(8*(5-v))));c=0,u=0}break}i===t[0]&&p<n.TEXT_COMPACTION_MODE_LATCH&&(h[u++]=p);for(var y=0;y<u;y++)s.write(h[y]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!f;){var E=t[i++];if(E<n.TEXT_COMPACTION_MODE_LATCH)u++,c=900*c+E;else switch(E){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(u%5===0&&u>0){for(var v=0;v<6;++v)s.write(Number(ns(c)>>ns(8*(5-v))));c=0,u=0}}break}return o.append(Gr.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,o=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!o;){var u=e[t++];if(t===e[0]&&(o=!0),u<n.TEXT_COMPACTION_MODE_LATCH)s[i]=u,i++;else switch(u){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||u===n.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=ns(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*ns(e[i]);var o=r.toString();if(o.charAt(0)!=="1")throw new he;return o.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=g3()?CB():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n})(),fc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SB=(function(){function n(){}return n.decode=function(e,t,r,i,o,s,u){for(var c=new dg(e,t,r,i,o),f=null,h=null,p,v=!0;;v=!1){if(t!=null&&(f=n.getRowIndicatorColumn(e,c,t,!0,s,u)),i!=null&&(h=n.getRowIndicatorColumn(e,c,i,!1,s,u)),p=n.merge(f,h),p==null)throw ne.getNotFoundInstance();var y=p.getBoundingBox();if(v&&y!=null&&(y.getMinY()<c.getMinY()||y.getMaxY()>c.getMaxY()))c=y;else break}p.setBoundingBox(c);var E=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,f),p.setDetectionResultColumn(E,h);for(var A=f!=null,T=1;T<=E;T++){var N=A?T:E-T;if(p.getDetectionResultColumn(N)===void 0){var P=void 0;N===0||N===E?P=new aA(c,N===0):P=new m3(c),p.setDetectionResultColumn(N,P);for(var M=-1,j=M,H=c.getMinY();H<=c.getMaxY();H++){if(M=n.getStartColumn(p,N,H,A),M<0||M>c.getMaxX()){if(j===-1)continue;M=j}var W=n.detectCodeword(e,c.getMinX(),c.getMaxX(),A,M,H,s,u);W!=null&&(P.setCodeword(H,W),j=M,s=Math.min(s,W.getWidth()),u=Math.max(u,W.getWidth()))}}}return n.createDecoderResult(p)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=dg.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new pB(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=n.getMax(i),s=0;try{for(var u=fc(i),c=u.next();!c.done;c=u.next()){var f=c.value;if(s+=o-f,f>0)break}}catch(y){t={error:y}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}for(var h=e.getCodewords(),p=0;s>0&&h[p]==null;p++)s--;for(var v=0,p=i.length-1;p>=0&&(v+=o-i[p],!(i[p]>0));p--);for(var p=h.length-1;v>0&&h[p]==null;p--)v--;return e.getBoundingBox().addMissingRows(s,v,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var o=fc(e),s=o.next();!s.done;s=o.next()){var u=s.value;i=Math.max(i,u)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,o,s){for(var u=new aA(t,i),c=0;c<2;c++)for(var f=c===0?1:-1,h=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=f){var v=n.detectCodeword(e,0,e.getWidth(),i,h,p,o,s);v!=null&&(u.setCodeword(p,v),i?h=v.getStartX():h=v.getEndX())}return u},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>st.MAX_CODEWORDS_IN_BARCODE)throw ne.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,u=0;u<e.getBarcodeRowCount();u++)for(var c=0;c<e.getBarcodeColumnCount();c++){var f=t[u][c+1].getValue(),h=u*e.getBarcodeColumnCount()+c;f.length===0?r.push(h):f.length===1?i[h]=f[0]:(s.push(h),o.push(f))}for(var p=new Array(o.length),v=0;v<p.length;v++)p[v]=o[v];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,st.toIntArray(r),st.toIntArray(s),p)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,o){for(var s=new Int32Array(i.length),u=100;u-- >0;){for(var c=0;c<s.length;c++)t[i[c]]=o[c][s[c]];try{return n.decodeCodewords(t,e,r)}catch(h){var f=h instanceof _n;if(!f)throw h}if(s.length===0)throw _n.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<o[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw _n.getChecksumInstance()}throw _n.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),u=0;u<s.length;u++)for(var c=0;c<s[u].length;c++)s[u][c]=new xc;var f=0;try{for(var h=fc(e.getDetectionResultColumns()),p=h.next();!p.done;p=h.next()){var v=p.value;if(v!=null)try{for(var y=(i=void 0,fc(v.getCodewords())),E=y.next();!E.done;E=y.next()){var A=E.value;if(A!=null){var T=A.getRowNumber();if(T>=0){if(T>=s.length)continue;s[T][f].setValue(A.getValue())}}}}catch(N){i={error:N}}finally{try{E&&!E.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}f++}}catch(N){t={error:N}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var o,s,u=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-u)&&(c=e.getDetectionResultColumn(t-u).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-u)&&(c=e.getDetectionResultColumn(t-u).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var f=0;n.isValidBarcodeColumn(e,t-u);){t-=u;try{for(var h=(o=void 0,fc(e.getDetectionResultColumn(t).getCodewords())),p=h.next();!p.done;p=h.next()){var v=p.value;if(v!=null)return(i?v.getEndX():v.getStartX())+u*f*(v.getEndX()-v.getStartX())}}catch(y){o={error:y}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}f++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,o,s,u,c){o=n.adjustCodewordStartColumn(e,t,r,i,o,s);var f=n.getModuleBitCount(e,t,r,i,o,s);if(f==null)return null;var h,p=ut.sum(f);if(i)h=o+p;else{for(var v=0;v<f.length/2;v++){var y=f[v];f[v]=f[f.length-1-v],f[f.length-1-v]=y}h=o,o=h-p}if(!n.checkCodewordSkew(p,u,c))return null;var E=gB.getDecodedValue(f),A=st.getCodeword(E);return A===-1?null:new mB(o,h,n.getCodewordBucketNumber(E),A)},n.getModuleBitCount=function(e,t,r,i,o,s){for(var u=o,c=new Int32Array(8),f=0,h=i?1:-1,p=i;(i?u<r:u>=t)&&f<c.length;)e.get(u,s)===p?(c[f]++,u+=h):(f++,p=!p);return f===c.length||u===(i?r:t)&&f===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,o,s){for(var u=o,c=i?-1:1,f=0;f<2;f++){for(;(i?u>=t:u<r)&&i===e.get(u,s);){if(Math.abs(o-u)>n.CODEWORD_SKEW_SIZE)return o;u+=c}c=-c,i=!i}return u},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw he.getFormatInstance();var i=1<<t+1,o=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=IB.decode(e,""+t);return s.setErrorsCorrected(o),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw _n.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw he.getFormatInstance();var r=e[0];if(r>e.length)throw he.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw he.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new hy,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new aB,n})(),bB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pg=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw ne.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof he||r instanceof _n?ne.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,o,s=new Array,u=tB.detectMultiple(e,t,r);try{for(var c=bB(u.getPoints()),f=c.next();!f.done;f=c.next()){var h=f.value,p=SB.decode(u.getBits(),h[4],h[5],h[6],h[7],n.getMinCodewordWidth(h),n.getMaxCodewordWidth(h)),v=new Gn(p.getText(),p.getRawBytes(),void 0,h,Ne.PDF_417);v.putMetadata(Nn.ERROR_CORRECTION_LEVEL,p.getECLevel());var y=p.getOther();y!=null&&v.putMetadata(Nn.PDF417_EXTRA_METADATA,y),s.push(v)}}catch(E){i={error:E}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return s.map(function(E){return E})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?Ye.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n})(),RB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),lA=(function(n){RB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e})(fr),cA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PB=(function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(kt.TRY_HARDER)!==void 0,r=e==null?null:e.get(kt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var o=r.some(function(s){return s===Ne.UPC_A||s===Ne.UPC_E||s===Ne.EAN_13||s===Ne.EAN_8||s===Ne.CODABAR||s===Ne.CODE_39||s===Ne.CODE_93||s===Ne.CODE_128||s===Ne.ITF||s===Ne.RSS_14||s===Ne.RSS_EXPANDED});o&&!t&&i.push(new _c(e)),r.includes(Ne.QR_CODE)&&i.push(new hg),r.includes(Ne.DATA_MATRIX)&&i.push(new fg),r.includes(Ne.AZTEC)&&i.push(new lg),r.includes(Ne.PDF_417)&&i.push(new pg),o&&t&&i.push(new _c(e))}i.length===0&&(t||i.push(new _c(e)),i.push(new hg),i.push(new fg),i.push(new lg),i.push(new pg),t&&i.push(new _c(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=cA(this.readers),i=r.next();!i.done;i=r.next()){var o=i.value;o.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new lA("No readers where selected, nothing can be read.");try{for(var i=cA(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(u){if(u instanceof lA)continue}}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new ne("No MultiFormat Readers were able to detect the code.")},n})(),NB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),DB=(function(n){NB(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,o=new PB;return o.setHints(t),i=n.call(this,o,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(fl),OB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){OB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new pg,t)||this}return e})(fl);var kB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){kB(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new hg,t)||this}return e})(fl);var mg;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(mg||(mg={}));const nd=mg;var v3=(function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ps(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,o=t.length;o<=e;o++){var s=r.multiply(new ps(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Ve("No error correction bytes");var r=e.length-t;if(r<=0)throw new Ve("No data bytes provided");var i=this.buildGenerator(t),o=new Int32Array(r);wt.arraycopy(e,0,o,0,r);var s=new ps(this.field,o);s=s.multiplyByMonomial(t,1);for(var u=s.divide(i)[1],c=u.getCoefficients(),f=t-c.length,h=0;h<f;h++)e[r+h]=0;wt.arraycopy(c,0,e,r+f,c.length)},n})(),wc=(function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var u=r[s],c=0;c<i-1;c++){var f=u[c];f===u[c+1]&&f===r[s+1][c]&&f===r[s+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var u=0;u<i;u++){var c=r[s];u+6<i&&c[u]===1&&c[u+1]===0&&c[u+2]===1&&c[u+3]===1&&c[u+4]===1&&c[u+5]===0&&c[u+6]===1&&(n.isWhiteHorizontal(c,u-4,u)||n.isWhiteHorizontal(c,u+7,u+11))&&t++,s+6<o&&r[s][u]===1&&r[s+1][u]===0&&r[s+2][u]===1&&r[s+3][u]===1&&r[s+4][u]===1&&r[s+5][u]===0&&r[s+6][u]===1&&(n.isWhiteVertical(r,u,s-4,s)||n.isWhiteVertical(r,u,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(e[o][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var u=r[s],c=0;c<i;c++)u[c]===1&&t++;var f=e.getHeight()*e.getWidth(),h=Math.floor(Math.abs(t*2-f)*10/f);return h*n.N4},n.getDataMaskBit=function(e,t,r){var i,o;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:o=r*t,i=(o&1)+o%3;break;case 6:o=r*t,i=(o&1)+o%3&1;break;case 7:o=r*t,i=o%3+(r+t&1)&1;break;default:throw new Ve("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),s=e.getArray(),u=0;u<i;u++){for(var c=0,f=-1,h=0;h<o;h++){var p=t?s[u][h]:s[h][u];p===f?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,f=p)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n})(),MB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LB=(function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=MB(this.bytes),o=i.next();!o.done;o=i.next()){var s=o.value;un.fill(s,e)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],s=t.bytes[r],u=0,c=this.width;u<c;++u)if(o[u]!==s[u])return!1;return!0},n.prototype.toString=function(){for(var e=new qe,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],o=0,s=this.width;o<s;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n})(),gg=(function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new qe;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n})(),VB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ct=(function(n){VB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e})(fr),fA=(function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,o){n.clearMatrix(o),n.embedBasicPatterns(r,o),n.embedTypeInfo(t,i,o),n.maybeEmbedVersionInfo(r,o),n.embedDataBits(e,i,o)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new xn;n.makeTypeInfoBits(e,t,i);for(var o=0,s=i.getSize();o<s;++o){var u=i.get(i.getSize()-1-o),c=n.TYPE_INFO_COORDINATES[o],f=c[0],h=c[1];if(r.setBoolean(f,h,u),o<8){var p=r.getWidth()-o-1,v=8;r.setBoolean(p,v,u)}else{var p=8,v=r.getHeight()-7+(o-8);r.setBoolean(p,v,u)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new xn;n.makeVersionInfoBits(e,r);for(var i=17,o=0;o<6;++o)for(var s=0;s<3;++s){var u=r.get(i);i--,t.setBoolean(o,t.getHeight()-11+s,u),t.setBoolean(t.getHeight()-11+s,o,u)}}},n.embedDataBits=function(e,t,r){for(var i=0,o=-1,s=r.getWidth()-1,u=r.getHeight()-1;s>0;){for(s===6&&(s-=1);u>=0&&u<r.getHeight();){for(var c=0;c<2;++c){var f=s-c;if(n.isEmpty(r.get(f,u))){var h=void 0;i<e.getSize()?(h=e.get(i),++i):h=!1,t!==255&&wc.getDataMaskBit(t,f,u)&&(h=!h),r.setBoolean(f,u,h)}}u+=o}o=-o,u+=o,s-=2}if(i!==e.getSize())throw new Ct("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-Ye.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Ve("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!gg.isValidMaskPattern(t))throw new Ct("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var o=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(o,10);var s=new xn;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new Ct("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Ct("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Ct;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Ct;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Ct;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var o=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var o=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,s=i.length;o!==s;o++){var u=i[o];if(u>=0)for(var c=0;c!==s;c++){var f=i[c];f>=0&&n.isEmpty(t.get(f,u))&&n.embedPositionAdjustmentPattern(f-2,u-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})(),FB=(function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n})(),hA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return wc.applyMaskPenaltyRule1(e)+wc.applyMaskPenaltyRule2(e)+wc.applyMaskPenaltyRule3(e)+wc.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,o=r!==null&&r.get(nd.CHARACTER_SET)!==void 0;o&&(i=r.get(nd.CHARACTER_SET).toString());var s=this.chooseMode(e,i),u=new xn;if(s===It.BYTE&&(o||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=an.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,u)}this.appendModeInfo(s,u);var f=new xn;this.appendBytes(e,s,f,i);var h;if(r!==null&&r.get(nd.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(nd.QR_VERSION).toString(),10);h=va.getVersionForNumber(p);var v=this.calculateBitsNeeded(s,u,f,h);if(!this.willFit(v,h,t))throw new Ct("Data too big for requested version")}else h=this.recommendVersion(t,s,u,f);var y=new xn;y.appendBitArray(u);var E=s===It.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(E,h,s,y),y.appendBitArray(f);var A=h.getECBlocksForLevel(t),T=h.getTotalCodewords()-A.getTotalECCodewords();this.terminateBits(T,y);var N=this.interleaveWithECBytes(y,h.getTotalCodewords(),T,A.getNumBlocks()),P=new gg;P.setECLevel(t),P.setMode(s),P.setVersion(h);var M=h.getDimensionForVersion(),j=new LB(M,M),H=this.chooseMaskPattern(N,t,h,j);return P.setMaskPattern(H),fA.buildMatrix(N,t,h,H,j),P.setMatrix(j),P},n.recommendVersion=function(e,t,r,i){var o=this.calculateBitsNeeded(t,r,i,va.getVersionForNumber(1)),s=this.chooseVersion(o,e),u=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(u,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),an.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return It.KANJI;for(var r=!1,i=!1,o=0,s=e.length;o<s;++o){var u=e.charAt(o);if(n.isDigit(u))r=!0;else if(this.getAlphanumericCode(u.charCodeAt(0))!==-1)i=!0;else return It.BYTE}return i?It.ALPHANUMERIC:r?It.NUMERIC:It.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=Gr.encode(e,an.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var o=t[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var o=Number.MAX_SAFE_INTEGER,s=-1,u=0;u<gg.NUM_MASK_PATTERNS;u++){fA.buildMatrix(e,t,r,u,i);var c=this.calculateMaskPenalty(i);c<o&&(o=c,s=u)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=va.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Ct("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),o=t.getECBlocksForLevel(r),s=o.getTotalECCodewords(),u=i-s,c=(e+7)/8;return u>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Ct("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var o=t.getSize()&7;if(o>0)for(var i=o;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Ct("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,o,s){if(i>=r)throw new Ct("Block ID too large");var u=e%r,c=r-u,f=Math.floor(e/r),h=f+1,p=Math.floor(t/r),v=p+1,y=f-p,E=h-v;if(y!==E)throw new Ct("EC bytes mismatch");if(r!==c+u)throw new Ct("RS blocks mismatch");if(e!==(p+y)*c+(v+E)*u)throw new Ct("Total bytes mismatch");i<c?(o[0]=p,s[0]=y):(o[0]=v,s[0]=E)},n.interleaveWithECBytes=function(e,t,r,i){var o,s,u,c;if(e.getSizeInBytes()!==r)throw new Ct("Number of bits and data bytes does not match");for(var f=0,h=0,p=0,v=new Array,y=0;y<i;++y){var E=new Int32Array(1),A=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,y,E,A);var T=E[0],N=new Uint8Array(T);e.toBytes(8*f,N,0,T);var P=n.generateECBytes(N,A[0]);v.push(new FB(N,P)),h=Math.max(h,T),p=Math.max(p,P.length),f+=E[0]}if(r!==f)throw new Ct("Data bytes does not match offset");for(var M=new xn,y=0;y<h;++y)try{for(var j=(o=void 0,hA(v)),H=j.next();!H.done;H=j.next()){var W=H.value,N=W.getDataBytes();y<N.length&&M.appendBits(N[y],8)}}catch(O){o={error:O}}finally{try{H&&!H.done&&(s=j.return)&&s.call(j)}finally{if(o)throw o.error}}for(var y=0;y<p;++y)try{for(var R=(u=void 0,hA(v)),I=R.next();!I.done;I=R.next()){var W=I.value,P=W.getErrorCorrectionBytes();y<P.length&&M.appendBits(P[y],8)}}catch(O){u={error:O}}finally{try{I&&!I.done&&(c=R.return)&&c.call(R)}finally{if(u)throw u.error}}if(t!==M.getSizeInBytes())throw new Ct("Interleaving error: "+t+" and "+M.getSizeInBytes()+" differ.");return M},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),o=0;o<r;o++)i[o]=e[o]&255;new v3(ur.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),o=0;o<t;o++)s[o]=i[r+o];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var o=r.getCharacterCountBits(t);if(e>=1<<o)throw new Ct(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},n.appendBytes=function(e,t,r,i){switch(t){case It.NUMERIC:n.appendNumericBytes(e,r);break;case It.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case It.BYTE:n.append8BitBytes(e,r,i);break;case It.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Ct("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),u=n.getDigit(e.charAt(i+2));t.appendBits(o*100+s*10+u,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(o*10+s,7),i+=2}else t.appendBits(o,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new Ct;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new Ct;t.appendBits(o*45+s,11),i+=2}else t.appendBits(o,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=Gr.encode(e,r)}catch(c){throw new Ct(c)}for(var o=0,s=i.length;o!==s;o++){var u=i[o];t.appendBits(u,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=Gr.encode(e,an.SJIS)}catch(p){throw new Ct(p)}for(var i=r.length,o=0;o<i;o+=2){var s=r[o]&255,u=r[o+1]&255,c=s<<8&4294967295|u,f=-1;if(c>=33088&&c<=40956?f=c-33088:c>=57408&&c<=60351&&(f=c-49472),f===-1)throw new Ct("Invalid byte sequence");var h=(f>>8)*192+(f&255);t.appendBits(h,13)}},n.appendECI=function(e,t){t.appendBits(It.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=an.UTF8.getName(),n})();var BB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){BB(e,n);function e(t,r,i,o,s,u,c,f){var h=n.call(this,u,c)||this;if(h.yuvData=t,h.dataWidth=r,h.dataHeight=i,h.left=o,h.top=s,o+u>r||s+c>i)throw new Ve("Crop rectangle does not fit within image data.");return f&&h.reverseHorizontal(u,c),h}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ve("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return wt.arraycopy(this.yuvData,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return wt.arraycopy(this.yuvData,s,o,0,i),o;for(var u=0;u<r;u++){var c=u*t;wt.arraycopy(this.yuvData,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),o=this.yuvData,s=this.top*this.dataWidth+this.left,u=0;u<r;u++){for(var c=u*t,f=0;f<t;f++){var h=o[s+f*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+f]=4278190080|h*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<r;o++,s+=this.dataWidth)for(var u=s+t/2,c=s,f=s+t-1;c<u;c++,f--){var h=i[c];i[c]=i[f],i[f]=h}},e.prototype.invert=function(){return new uy(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Op);var UB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){UB(e,n);function e(t,r,i,o,s,u,c){var f=n.call(this,r,i)||this;if(f.dataWidth=o,f.dataHeight=s,f.left=u,f.top=c,t.BYTES_PER_ELEMENT===4){for(var h=r*i,p=new Uint8ClampedArray(h),v=0;v<h;v++){var y=t[v],E=y>>16&255,A=y>>7&510,T=y&255;p[v]=(E+A+T)/4&255}f.luminances=p}else f.luminances=t;if(o===void 0&&(f.dataWidth=r),s===void 0&&(f.dataHeight=i),u===void 0&&(f.left=0),c===void 0&&(f.top=0),f.left+r>f.dataWidth||f.top+i>f.dataHeight)throw new Ve("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ve("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return wt.arraycopy(this.luminances,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return wt.arraycopy(this.luminances,s,o,0,i),o;for(var u=0;u<r;u++){var c=u*t;wt.arraycopy(this.luminances,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new uy(this)},e})(Op);var jB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),zB=(function(n){jB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(an),HB=(function(){function n(){}return n.ISO_8859_1=an.ISO8859_1,n})(),vg,GB=301,WB=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=GB);return{LOG:n,ALOG:e}};vg=WB([],[]),vg.LOG;vg.ALOG;var dA;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(dA||(dA={}));var pA=129,y3=230,$B=231,qB=235,KB=236,XB=237,YB=238,QB=239,ZB=240,J1=254,JB=254,mA="[)>05",gA="[)>06",vA="",mt=0,In=1,Xn=2,on=3,gn=4,Bn=5,eU=(function(){function n(){}return n.prototype.getEncodingMode=function(){return mt},n.prototype.encode=function(e){var t=oi.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=oi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Bn:e.writeCodeword($B),e.signalEncoderChange(Bn);return;case In:e.writeCodeword(y3),e.signalEncoderChange(In);return;case on:e.writeCodeword(YB),e.signalEncoderChange(on);break;case Xn:e.writeCodeword(QB),e.signalEncoderChange(Xn);break;case gn:e.writeCodeword(ZB),e.signalEncoderChange(gn);break;default:throw new Error("Illegal mode: "+i)}else oi.isExtendedASCII(r)?(e.writeCodeword(qB),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(oi.isDigit(e)&&oi.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n})(),tU=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Bn},n.prototype.encode=function(e){var t=new qe;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=oi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(mt);break}}var o=t.length()-1,s=1,u=e.getCodewordCount()+o+s;e.updateSymbolInfo(u);var c=e.getSymbolInfo().getDataCapacity()-u>0;if(e.hasMoreCharacters()||c)if(o<=249)t.setCharAt(0,rt.getCharAt(o));else if(o<=1555)t.setCharAt(0,rt.getCharAt(Math.floor(o/250)+249)),t.insert(1,rt.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var f=0,r=t.length();f<r;f++)e.writeCodeword(this.randomize255State(t.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n})(),dy=(function(){function n(){}return n.prototype.getEncodingMode=function(){return In},n.prototype.encodeMaximal=function(e){for(var t=new qe,r=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,o=t.length())}if(o!==t.length()){var u=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+u+1);e.updateSymbolInfo(c);var f=e.getSymbolInfo().getDataCapacity()-c,h=Math.floor(t.length()%3);(h===2&&f!==2||h===1&&(r>3||f!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(y3),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new qe;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),o=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var u=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new qe;for(t.length()%3===2&&u!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||u!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var f=t.length();if(f%3===0){var h=oi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(h!==this.getEncodingMode()){e.signalEncoderChange(mt);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var o=t.length(),s=t.toString().substring(0,o-i);t.setLengthToZero(),t.append(s),e.pos--;var u=e.getCurrentChar();return i=this.encodeChar(u,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,o=e.getCodewordCount()+r;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(J1)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(J1),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(J1)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(mt)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,o=new qe;return o.append(r),o.append(i),o.toString()},n})(),nU=(function(){function n(){}return n.prototype.getEncodingMode=function(){return gn},n.prototype.encode=function(e){for(var t=new qe;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var o=t.toString().substring(4);t.setLengthToZero(),t.append(o);var s=oi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(mt);break}}}t.append(rt.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,u=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),f=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+u.length))}f?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(u)}finally{e.signalEncoderChange(mt)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(rt.getCharAt(e-64)):oi.illegalCharacter(rt.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,o=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,u=(r<<18)+(i<<12)+(o<<6)+s,c=u>>16&255,f=u>>8&255,h=u&255,p=new qe;return p.append(c),t>=2&&p.append(f),t>=3&&p.append(h),p.toString()},n})(),rU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),iU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ft=(function(){function n(e,t,r,i,o,s,u,c){u===void 0&&(u=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=u,this.rsBlockError=c}return n.lookup=function(e,t,r,i,o){var s,u;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var c=iU(sU),f=c.next();!f.done;f=c.next()){var h=f.value;if(!(t===1&&h.rectangular)&&!(t===2&&!h.rectangular)&&!(r!=null&&(h.getSymbolWidth()<r.getWidth()||h.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(h.getSymbolWidth()>i.getWidth()||h.getSymbolHeight()>i.getHeight()))&&e<=h.dataCapacity)return h}}catch(p){s={error:p}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n})(),oU=(function(n){rU(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(ft),sU=[new ft(!1,3,5,8,8,1),new ft(!1,5,7,10,10,1),new ft(!0,5,7,16,6,1),new ft(!1,8,10,12,12,1),new ft(!0,10,11,14,6,2),new ft(!1,12,12,14,14,1),new ft(!0,16,14,24,10,1),new ft(!1,18,14,16,16,1),new ft(!1,22,18,18,18,1),new ft(!0,22,18,16,10,2),new ft(!1,30,20,20,20,1),new ft(!0,32,24,16,14,2),new ft(!1,36,24,22,22,1),new ft(!1,44,28,24,24,1),new ft(!0,49,28,22,14,2),new ft(!1,62,36,14,14,4),new ft(!1,86,42,16,16,4),new ft(!1,114,48,18,18,4),new ft(!1,144,56,20,20,4),new ft(!1,174,68,22,22,4),new ft(!1,204,84,24,24,4,102,42),new ft(!1,280,112,14,14,16,140,56),new ft(!1,368,144,16,16,16,92,36),new ft(!1,456,192,18,18,16,114,48),new ft(!1,576,224,20,20,16,144,56),new ft(!1,696,272,22,22,16,174,68),new ft(!1,816,336,24,24,16,136,56),new ft(!1,1050,408,18,18,36,175,68),new ft(!1,1304,496,20,20,36,163,62),new oU],aU=(function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(u){return u.charCodeAt(0)}),r=new qe,i=0,o=t.length;i<o;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new qe,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ft.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n})(),uU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),lU=(function(n){uU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return on},e.prototype.encode=function(t){for(var r=new qe;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var o=r.length();if(o%3===0){this.writeNextTriplet(t,r);var s=oi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(mt);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):oi.illegalCharacter(rt.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),o=r.length();t.pos-=o,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(JB),t.getNewEncoding()<0&&t.signalEncoderChange(mt)},e})(dy),cU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),fU=(function(n){cU(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Xn},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e})(dy),oi=(function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=pA+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,o){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new dy,u=[new eU,s,new fU,new lU,new nU,new tU],c=new aU(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(mA)&&e.endsWith(vA)?(c.writeCodeword(KB),c.setSkipAtEnd(2),c.pos+=mA.length):e.startsWith(gA)&&e.endsWith(vA)&&(c.writeCodeword(XB),c.setSkipAtEnd(2),c.pos+=gA.length);var f=mt;for(o&&(s.encodeMaximal(c),f=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)u[f].encode(c),c.getNewEncoding()>=0&&(f=c.getNewEncoding(),c.resetEncoderSignal());var h=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();h<p&&f!==mt&&f!==Bn&&f!==gn&&c.writeCodeword("");var v=c.getCodewords();for(v.length()<p&&v.append(pA);v.length()<p;)v.append(this.randomize253State(v.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===on&&i===on){for(var o=Math.min(t+3,e.length),s=t;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return mt}else if(r===gn&&i===gn){for(var o=Math.min(t+4,e.length),s=t;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return mt}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===mt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var o=0,s=new Uint8Array(6),u=[];;){if(t+o===e.length){un.fill(s,0),un.fill(u,0);var c=this.findMinimums(i,u,Ye.MAX_VALUE,s),f=this.getMinimumCount(s);if(u[mt]===c)return mt;if(f===1){if(s[Bn]>0)return Bn;if(s[gn]>0)return gn;if(s[Xn]>0)return Xn;if(s[on]>0)return on}return In}var h=e.charCodeAt(t+o);if(o++,this.isDigit(h)?i[mt]+=.5:this.isExtendedASCII(h)?(i[mt]=Math.ceil(i[mt]),i[mt]+=2):(i[mt]=Math.ceil(i[mt]),i[mt]++),this.isNativeC40(h)?i[In]+=2/3:this.isExtendedASCII(h)?i[In]+=8/3:i[In]+=4/3,this.isNativeText(h)?i[Xn]+=2/3:this.isExtendedASCII(h)?i[Xn]+=8/3:i[Xn]+=4/3,this.isNativeX12(h)?i[on]+=2/3:this.isExtendedASCII(h)?i[on]+=13/3:i[on]+=10/3,this.isNativeEDIFACT(h)?i[gn]+=3/4:this.isExtendedASCII(h)?i[gn]+=17/4:i[gn]+=13/4,this.isSpecialB256(h)?i[Bn]+=4:i[Bn]++,o>=4){if(un.fill(s,0),un.fill(u,0),this.findMinimums(i,u,Ye.MAX_VALUE,s),u[mt]<this.min(u[Bn],u[In],u[Xn],u[on],u[gn]))return mt;if(u[Bn]<u[mt]||u[Bn]+1<this.min(u[In],u[Xn],u[on],u[gn]))return Bn;if(u[gn]+1<this.min(u[Bn],u[In],u[Xn],u[on],u[mt]))return gn;if(u[Xn]+1<this.min(u[Bn],u[In],u[gn],u[on],u[mt]))return Xn;if(u[on]+1<this.min(u[Bn],u[In],u[gn],u[Xn],u[mt]))return on;if(u[In]+1<this.min(u[mt],u[Bn],u[gn],u[Xn])){if(u[In]<u[on])return In;if(u[In]===u[on]){for(var p=t+o+1;p<e.length;){var v=e.charCodeAt(p);if(this.isX12TermSep(v))return on;if(!this.isNativeX12(v))break;p++}return In}}}}},n.min=function(e,t,r,i,o){var s=Math.min(e,Math.min(t,Math.min(r,i)));return o===void 0?s:Math.min(s,o)},n.findMinimums=function(e,t,r,i){for(var o=0;o<6;o++){var s=t[o]=Math.ceil(e[o]);r>s&&(r=s,un.fill(i,0)),r===s&&(i[o]=i[o]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=Ye.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n})(),em=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yA=(function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return Gr.encode(e,this.charset)!=null}catch{return!1}},n})(),hU=(function(){function n(e,t,r){var i,o,s,u,c,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(D){return new yA(zB.forName(D))}),this.encoders=[];var h=[];h.push(new yA(HB.ISO_8859_1));for(var p=t!=null&&t.name.startsWith("UTF"),v=0;v<e.length;v++){var y=!1;try{for(var E=(i=void 0,em(h)),A=E.next();!A.done;A=E.next()){var T=A.value,N=e.charAt(v),P=N.charCodeAt(0);if(P===r||T.canEncode(N)){y=!0;break}}}catch(D){i={error:D}}finally{try{A&&!A.done&&(o=E.return)&&o.call(E)}finally{if(i)throw i.error}}if(!y)try{for(var M=(s=void 0,em(this.ENCODERS)),j=M.next();!j.done;j=M.next()){var T=j.value;if(T.canEncode(e.charAt(v))){h.push(T),y=!0;break}}}catch(D){s={error:D}}finally{try{j&&!j.done&&(u=M.return)&&u.call(M)}finally{if(s)throw s.error}}y||(p=!0)}if(h.length===1&&!p)this.encoders=[h[0]];else{this.encoders=[];var H=0;try{for(var W=em(h),R=W.next();!R.done;R=W.next()){var T=R.value;this.encoders[H++]=T}}catch(D){c={error:D}}finally{try{R&&!R.done&&(f=W.return)&&f.call(W)}finally{if(c)throw c.error}}}var I=-1;if(t!=null){for(var v=0;v<this.encoders.length;v++)if(this.encoders[v]!=null&&t.name===this.encoders[v].name){I=v;break}}this.priorityEncoderIndex=I}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Gr.encode(rt.getCharAt(e),this.encoders[t].name)},n})(),dU=3,pU=(function(){function n(e,t,r){this.fnc1=r;var i=new hU(e,t,r);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new qe,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,o,s){var u=e.charAt(i).charCodeAt(0),c=0,f=t.length();t.getPriorityEncoderIndex()>=0&&(u===s||t.canEncode(u,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),f=c+1);for(var h=c;h<f;h++)(u===s||t.canEncode(u,h))&&this.addEdge(r,i+1,new _A(u,t,h,o,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,o=new _A[i+1][t.length()];this.addEdges(e,t,o,0,null,r);for(var s=1;s<=i;s++){for(var u=0;u<t.length();u++)o[s][u]!=null&&s<i&&this.addEdges(e,t,o,s,o[s][u],r);for(var u=0;u<t.length();u++)o[s-1][u]=null}for(var c=-1,f=Ye.MAX_VALUE,u=0;u<t.length();u++)if(o[i][u]!=null){var h=o[i][u];h.cachedTotalSize<f&&(f=h.cachedTotalSize,c=u)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],v=o[i][c];v!=null;){if(v.isFNC1())p.unshift(1e3);else for(var y=t.encode(v.c,v.encoderIndex),s=y.length-1;s>=0;s--)p.unshift(y[s]&255);var E=v.previous===null?0:v.previous.encoderIndex;E!==v.encoderIndex&&p.unshift(256+t.getECIValue(v.encoderIndex)),v=v.previous}for(var A=[],s=0;s<A.length;s++)A[s]=p[s];return A},n})(),_A=(function(){function n(e,t,r,i,o){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,u=i===null?0:i.encoderIndex;u!==r&&(s+=dU),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n})(),mU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();var xA;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(xA||(xA={}));(function(n){mU(e,n);function e(t,r,i,o,s){var u=n.call(this,t,r,i)||this;return u.shape=o,u.macroId=s,u}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(pU);var gU=(function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n})(),wA=(function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n})(),vU=(function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n})(),yU=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),py=(function(n){yU(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.value=r,o.bitCount=i,o}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Ye.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(vU),_U=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xU=(function(n){_U(e,n);function e(t,r,i){var o=n.call(this,t,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(py);function wU(n,e,t){return new xU(n,e,t)}function hc(n,e,t){return new py(n,e,t)}var EU=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ms=0,np=1,zr=2,_3=3,Pi=4,AU=new py(null,0,0),tm=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],TU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function CU(n){var e,t;try{for(var r=TU(n),i=r.next();!i.done;i=r.next()){var o=i.value;un.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[ms][Pi]=0,n[np][Pi]=0,n[np][ms]=28,n[_3][Pi]=0,n[zr][Pi]=0,n[zr][ms]=15,n}var x3=CU(un.createInt32Array(6,6)),IU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SU=(function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var o=tm[this.mode][e];i=hc(i,o&65535,o>>16),r+=o>>16}var s=e===zr?4:5;return i=hc(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===zr?4:5;return r=hc(r,x3[this.mode][e],i),r=hc(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Pi||this.mode===zr){var o=tm[r][ms];t=hc(t,o&65535,o>>16),i+=o>>16,r=ms}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,u=new n(t,r,this.binaryShiftByteCount+1,i+s);return u.binaryShiftByteCount===2078&&(u=u.endBinaryShift(e+1)),u},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=wU(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(tm[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var s=new xn;try{for(var u=IU(i),c=u.next();!c.done;c=u.next()){var f=c.value;f.appendTo(s,e)}}catch(h){t={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return rt.format("%s bits=%d bytes=%d",EU[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(AU,ms,0,0),n})();function bU(n){var e=rt.getCharCode(" "),t=rt.getCharCode("."),r=rt.getCharCode(",");n[ms][e]=1;for(var i=rt.getCharCode("Z"),o=rt.getCharCode("A"),s=o;s<=i;s++)n[ms][s]=s-o+2;n[np][e]=1;for(var u=rt.getCharCode("z"),c=rt.getCharCode("a"),s=c;s<=u;s++)n[np][s]=s-c+2;n[zr][e]=1;for(var f=rt.getCharCode("9"),h=rt.getCharCode("0"),s=h;s<=f;s++)n[zr][s]=s-h+2;n[zr][r]=12,n[zr][t]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],v=0;v<p.length;v++)n[_3][rt.getCharCode(p[v])]=v;for(var y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],v=0;v<y.length;v++)rt.getCharCode(y[v])>0&&(n[Pi][rt.getCharCode(y[v])]=v);return n}var nm=bU(un.createInt32Array(5,256)),rd=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RU=(function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=rt.getCharCode(" "),t=rt.getCharCode(`
`),r=wA.singletonList(SU.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case rt.getCharCode("\r"):o=s===t?2:0;break;case rt.getCharCode("."):o=s===e?3:0;break;case rt.getCharCode(","):o=s===e?4:0;break;case rt.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(r=n.updateStateListForPair(r,i,o),i++):r=this.updateStateListForChar(r,i)}var u=wA.min(r,function(c,f){return c.getBitCount()-f.getBitCount()});return u.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,o=[];try{for(var s=rd(e),u=s.next();!u.done;u=s.next()){var c=u.value;this.updateStateForChar(c,t,o)}}catch(f){r={error:f}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(o)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,o=nm[e.getMode()][i]>0,s=null,u=0;u<=Pi;u++){var c=nm[u][i];if(c>0){if(s==null&&(s=e.endBinaryShift(t)),!o||u===e.getMode()||u===zr){var f=s.latchAndAppend(u,c);r.push(f)}if(!o&&x3[e.getMode()][u]>=0){var h=s.shiftAndAppend(u,c);r.push(h)}}}if(e.getBinaryShiftByteCount()>0||nm[e.getMode()][i]===0){var p=e.addBinaryShiftChar(t);r.push(p)}},n.updateStateListForPair=function(e,t,r){var i,o,s=[];try{for(var u=rd(e),c=u.next();!c.done;c=u.next()){var f=c.value;this.updateStateForPair(f,t,r,s)}}catch(h){i={error:h}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var o=e.endBinaryShift(t);if(i.push(o.latchAndAppend(Pi,r)),e.getMode()!==Pi&&i.push(o.shiftAndAppend(Pi,r)),r===3||r===4){var s=o.latchAndAppend(zr,16-r).latchAndAppend(zr,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var u=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(u)}},n.simplifyStates=function(e){var t,r,i,o,s=[];try{for(var u=rd(e),c=u.next();!c.done;c=u.next()){var f=c.value,h=!0,p=function(T){if(T.isBetterThanOrEqualTo(f))return h=!1,"break";f.isBetterThanOrEqualTo(T)&&(s=s.filter(function(N){return N!==T}))};try{for(var v=(i=void 0,rd(s)),y=v.next();!y.done;y=v.next()){var E=y.value,A=p(E);if(A==="break")break}}catch(T){i={error:T}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}h&&s.push(f)}}catch(T){t={error:T}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return s},n})(),PU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new RU(e).encode(),o=Ye.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+o,u,c,f,h,p;if(r!==n.DEFAULT_AZTEC_LAYERS){if(u=r<0,c=Math.abs(r),c>(u?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Ve(rt.format("Illegal value %s for layers",r));f=n.totalBitsInLayer(c,u),h=n.WORD_SIZE[c];var v=f-f%h;if(p=n.stuffBits(i,h),p.getSize()+o>v)throw new Ve("Data to large for user specified layer");if(u&&p.getSize()>h*64)throw new Ve("Data to large for user specified layer")}else{h=0,p=null;for(var y=0;;y++){if(y>n.MAX_NB_BITS)throw new Ve("Data too large for an Aztec code");if(u=y<=3,c=u?y+1:y,f=n.totalBitsInLayer(c,u),!(s>f)){(p==null||h!==n.WORD_SIZE[c])&&(h=n.WORD_SIZE[c],p=n.stuffBits(i,h));var v=f-f%h;if(!(u&&p.getSize()>h*64)&&p.getSize()+o<=v)break}}}var E=n.generateCheckWords(p,f,h),A=p.getSize()/h,T=n.generateModeMessage(u,c,A),N=(u?11:14)+c*4,P=new Int32Array(N),M;if(u){M=N;for(var y=0;y<P.length;y++)P[y]=y}else{M=N+1+2*Ye.truncDivision(Ye.truncDivision(N,2)-1,15);for(var j=Ye.truncDivision(N,2),H=Ye.truncDivision(M,2),y=0;y<j;y++){var W=y+Ye.truncDivision(y,15);P[j-y-1]=H-W-1,P[j+y]=H+W+1}}for(var R=new ji(M),y=0,I=0;y<c;y++){for(var D=(c-y)*4+(u?9:12),O=0;O<D;O++)for(var F=O*2,U=0;U<2;U++)E.get(I+F+U)&&R.set(P[y*2+U],P[y*2+O]),E.get(I+D*2+F+U)&&R.set(P[y*2+O],P[N-1-y*2-U]),E.get(I+D*4+F+U)&&R.set(P[N-1-y*2-U],P[N-1-y*2-O]),E.get(I+D*6+F+U)&&R.set(P[N-1-y*2-O],P[y*2+U]);I+=D*8}if(n.drawModeMessage(R,u,M,T),u)n.drawBullsEye(R,Ye.truncDivision(M,2),5);else{n.drawBullsEye(R,Ye.truncDivision(M,2),7);for(var y=0,O=0;y<Ye.truncDivision(N,2)-1;y+=15,O+=16)for(var U=Ye.truncDivision(M,2)&1;U<M;U+=2)R.set(Ye.truncDivision(M,2)-O,U),R.set(Ye.truncDivision(M,2)+O,U),R.set(U,Ye.truncDivision(M,2)-O),R.set(U,Ye.truncDivision(M,2)+O)}var V=new gU;return V.setCompact(u),V.setSize(M),V.setLayers(c),V.setCodeWords(A),V.setMatrix(R),V},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var o=t-i;o<=t+i;o++)e.set(o,t-i),e.set(o,t+i),e.set(t-i,o),e.set(t+i,o);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new xn;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var o=Ye.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var u=o-3+s;i.get(s)&&e.set(u,o-5),i.get(s+7)&&e.set(o+5,u),i.get(20-s)&&e.set(u,o+5),i.get(27-s)&&e.set(o-5,u)}else for(var s=0;s<10;s++){var u=o-5+s+Ye.truncDivision(s,5);i.get(s)&&e.set(u,o-7),i.get(s+10)&&e.set(o+7,u),i.get(29-s)&&e.set(u,o+7),i.get(39-s)&&e.set(o-7,u)}},n.generateCheckWords=function(e,t,r){var i,o,s=e.getSize()/r,u=new v3(n.getGF(r)),c=Ye.truncDivision(t,r),f=n.bitsToWords(e,r,c);u.encode(f,c-s);var h=t%r,p=new xn;p.appendBits(0,h);try{for(var v=PU(Array.from(f)),y=v.next();!y.done;y=v.next()){var E=y.value;p.appendBits(E,r)}}catch(A){i={error:A}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}return p},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),o,s;for(o=0,s=e.getSize()/t;o<s;o++){for(var u=0,c=0;c<t;c++)u|=e.get(o*t+c)?1<<t-c-1:0;i[o]=u}return i},n.getGF=function(e){switch(e){case 4:return ur.AZTEC_PARAM;case 6:return ur.AZTEC_DATA_6;case 8:return ur.AZTEC_DATA_8;case 10:return ur.AZTEC_DATA_10;case 12:return ur.AZTEC_DATA_12;default:throw new Ve("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new xn,i=e.getSize(),o=(1<<t)-2,s=0;s<i;s+=t){for(var u=0,c=0;c<t;c++)(s+c>=i||e.get(s+c))&&(u|=1<<t-1-c);(u&o)===o?(r.appendBits(u&o,t),s--):(u&o)===0?(r.appendBits(u|1,t),s--):r.appendBits(u,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var NU={audio:!1,video:{facingMode:"environment"}},DU=300,OU=function(n){var e=n===void 0?{}:n,t=e.timeBetweenDecodingAttempts,r=t===void 0?DU:t,i=e.hints;return B.useMemo(function(){var o=new DB(i);return o.timeBetweenDecodingAttempts=r,o},[i,r])},EA=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{f(r.next(h))}catch(p){s(p)}}function c(h){try{f(r.throw(h))}catch(p){s(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(n,e||[])).next())})},AA=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(h){f=[6,h],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},kU=function(n){var e=n.resetStream,t=B.useState(!1),r=t[0],i=t[1],o=B.useState(null),s=o[0],u=o[1],c=B.useRef(null),f=B.useRef(e),h=B.useCallback(function(y){c.current=y,u(typeof y.getCapabilities=="function"?y.getCapabilities().torch!==void 0:!1)},[]),p=B.useCallback(function(){return EA(void 0,void 0,void 0,function(){return AA(this,function(y){switch(y.label){case 0:return!c.current||!s?[2]:[4,c.current.applyConstraints({advanced:[{torch:!0}]})];case 1:return y.sent(),i(!0),[2]}})})},[s]),v=B.useCallback(function(){return EA(void 0,void 0,void 0,function(){return AA(this,function(y){switch(y.label){case 0:return!c.current||!s?[2]:(c.current=null,u(null),i(!1),[4,f.current()]);case 1:return y.sent(),[2]}})})},[s]);return B.useEffect(function(){f.current=e},[e]),{init:h,isOn:r,isAvailable:s,on:p,off:v}},MU=function(n,e){return JSON.stringify(n)===JSON.stringify(e)},TA=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{f(r.next(h))}catch(p){s(p)}}function c(h){try{f(r.throw(h))}catch(p){s(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(n,e||[])).next())})},CA=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(h){f=[6,h],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},LU=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},VU=function(n){n===void 0&&(n={});var e=n.paused,t=e===void 0?!1:e,r=n.hints,i=n.timeBetweenDecodingAttempts,o=n.onDecodeResult,s=o===void 0?function(){}:o,u=n.onDecodeError,c=u===void 0?function(){}:u,f=n.onError,h=f===void 0?function(){}:f,p="deviceId"in n?n.deviceId:void 0,v=B.useState("constraints"in n?n.constraints:void 0),y=v[0],E=v[1],A=B.useRef(s),T=B.useRef(c),N=B.useRef(h),P=B.useRef(null),M=OU({hints:r,timeBetweenDecodingAttempts:i}),j=kU({resetStream:function(){return TA(void 0,void 0,void 0,function(){return CA(this,function(O){switch(O.label){case 0:return D(),[4,I()];case 1:return O.sent(),[2]}})})}}),H=j.init,W=LU(j,["init"]),R=B.useCallback(function(O,F){O&&A.current(O),F&&T.current(F)},[]),I=B.useCallback(function(){return TA(void 0,void 0,void 0,function(){var O,F,U;return CA(this,function(V){switch(V.label){case 0:if(!P.current)return[2];if(t)return[2];V.label=1;case 1:return V.trys.push([1,6,,7]),p?[4,M.decodeFromVideoDevice(p,P.current,R)]:[3,3];case 2:return V.sent(),[3,5];case 3:return[4,M.decodeFromConstraints(y??NU,P.current,R)];case 4:V.sent(),V.label=5;case 5:return[3,7];case 6:return O=V.sent(),N.current(O),[2];case 7:return P.current?(F=P.current.srcObject,U=F.getVideoTracks()[0],U&&H(U),[2]):[2]}})})},[M,p,y,t,R,H]),D=B.useCallback(function(){M.reset()},[M]);return B.useEffect(function(){A.current=s},[s]),B.useEffect(function(){T.current=c},[c]),B.useEffect(function(){N.current=h},[h]),B.useEffect(function(){var O=MU(y,n.constraints);O||E(n.constraints)},[y,n]),B.useEffect(function(){return I(),function(){D()}},[I,D]),{ref:P,torch:W}};const FU=({user:n})=>{const e=n?.uid,{toast:t}=Dp(),[r,i]=B.useState(0),[o,s]=B.useState(!1),[u,c]=B.useState(""),[f,h]=B.useState(!1),[p,v]=B.useState([]),[y,E]=B.useState(null),[A,T]=B.useState(!1),[N,P]=B.useState([]),[M,j]=B.useState([]),[H,W]=B.useState(null);B.useEffect(()=>{if(!e)return;const O=o3(e,F=>i(Number(F?.balance||0)));return()=>O&&O()},[e]),B.useEffect(()=>{if(!e)return;const O=UL(e,F=>v(F));return()=>O&&O()},[e]),B.useEffect(()=>{if(!e)return;const O=jL(e,F=>P(F));return()=>O&&O()},[e]),B.useEffect(()=>{if(!e)return;const O=zL(e,F=>j(F));return()=>O&&O()},[e]),B.useEffect(()=>{if(!!y||!!H){const F=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=F||""}}},[y,H]);const R=B.useMemo(()=>{const O=(p||[]).map(te=>({id:`in_${te.id}`,type:"in",amount:Number(te.amount||0),label:`Canje de cdigo ${te.code}`,at:te.redeemedAt?.toDate?te.redeemedAt.toDate():te.redeemedAt instanceof Date?te.redeemedAt:null,kind:"redemption"})),F=(N||[]).map(te=>({id:`out_${te.id}`,type:"out",amount:Number(te.total||(te.price||0)*(te.quantity||1)),label:`Compra: ${te.name||te.productId}`,at:te.purchasedAt?.toDate?te.purchasedAt.toDate():te.purchasedAt instanceof Date?te.purchasedAt:null,kind:"purchase",purchase:te})),U=(M||[]).map(te=>({id:`grant_${te.id}`,type:"in",amount:Number(te.amount||0),label:te.note?`Asignacin admin: ${te.note}`:"Asignacin de puntos (admin)",at:te.grantedAt?.toDate?te.grantedAt.toDate():te.grantedAt instanceof Date?te.grantedAt:null,kind:"grant"})),V=[...O,...U,...F];return V.sort((te,Pe)=>(Pe.at?.getTime?.()||0)-(te.at?.getTime?.()||0)),V},[p,N]),I=async O=>{const F=(O??u).trim();if(F){T(!0);try{const U=await GL(F),V=new Date,te=U.expiresAt?U.expiresAt<V:!1;E({...U,expired:te})}catch(U){t({title:"Cdigo invlido",description:U?.message||"No se pudo validar el cdigo",variant:"destructive"})}finally{T(!1)}}},{ref:D}=VU({onDecodeResult(O){h(!1);const F=O.getText();I(F)},paused:!f});return S.jsxs("div",{className:"rounded-2xl glass-effect p-6 w-full",children:[S.jsxs("div",{className:"flex items-end justify-between flex-wrap gap-3",children:[S.jsx("h2",{className:"font-black text-[60px] leading-[60px]",children:S.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-boreal-aqua to-boreal-blue",children:"Mis puntos"})}),S.jsx("div",{className:"text-6xl font-black text-boreal-aqua leading-none",children:r})]}),S.jsx("p",{className:"text-gray-300 mt-2",children:"Puedes ganar puntos asistiendo a eventos o participando en dinmicas de la comunidad."}),S.jsx("h3",{className:"mt-8 text-xl font-semibold",children:"Canjear puntos"}),S.jsxs("div",{className:"mt-3 grid gap-4 md:grid-cols-2",children:[S.jsxs("div",{className:"space-y-3",children:[S.jsx("label",{className:"text-sm text-gray-300",children:"Canjear con cdigo"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx(wr,{placeholder:"Ingresa tu cdigo",value:u,onChange:O=>c(O.target.value),className:"bg-white/5 border-white/20 text-white"}),S.jsxs($t,{onClick:()=>I(),disabled:A||!u.trim(),children:[A?S.jsx(Jc,{className:"w-4 h-4 animate-spin"}):S.jsx(wd,{className:"w-4 h-4"}),S.jsx("span",{className:"ml-2",children:"Verificar"})]})]})]}),S.jsxs("div",{className:"space-y-3",children:[S.jsx("label",{className:"text-sm text-gray-300",children:"Canjear escaneando QR"}),S.jsx("div",{className:"relative rounded-xl overflow-hidden border border-white/10 min-h-[220px] flex items-center justify-center",children:f?S.jsx("video",{ref:D,className:"w-full h-full object-cover"}):S.jsxs("div",{className:"p-8 text-center text-gray-300",children:[S.jsx(U7,{className:"w-10 h-10 mx-auto mb-3 text-boreal-aqua"}),S.jsx("p",{children:"Activa la cmara para escanear un cdigo QR"}),S.jsx($t,{variant:"outline",className:"mt-3 border-white/30 text-white hover:bg-white/10",onClick:()=>h(!0),children:"Usar cmara"})]})}),f&&S.jsx($t,{variant:"ghost",className:"text-gray-300",onClick:()=>h(!1),children:"Detener cmara"})]})]}),S.jsx("div",{className:"my-8 h-px bg-white/10"}),S.jsxs("div",{className:"mt-8",children:[S.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Movimientos"}),R?.length?S.jsx("ul",{className:"divide-y divide-white/10 rounded-xl border border-white/10 overflow-hidden",children:R.map(O=>{const F=O.kind==="purchase"&&O.purchase;return S.jsxs("li",{className:"flex items-center justify-between px-4 py-3 bg-white/5",children:[S.jsxs("div",{children:[S.jsx("div",{className:"text-sm text-gray-300",children:O.label}),S.jsx("div",{className:"text-xs text-gray-400",children:O.at?O.at.toLocaleString():""}),F&&S.jsx("button",{className:"mt-1 text-xs text-boreal-aqua hover:underline",onClick:()=>{const U=O.purchase||{},V=BU({id:U.receiptId||U.id,name:U.name||U.productId||"Artculo",quantity:Number(U.quantity||1),total:Number(U.total||(U.price||0)*(U.quantity||1)),price:Number(U.price||0)}),te=UU(V);W({id:U.receiptId||U.id,name:U.name||U.productId||"Artculo",quantity:Number(U.quantity||1),total:Number(U.total||(U.price||0)*(U.quantity||1)),price:Number(U.price||0),imageUrl:U.imageUrl||"",qrUrl:te})},children:"Ver comprobante"})]}),S.jsxs("div",{className:O.type==="in"?"text-boreal-aqua font-bold":"text-red-400 font-bold",children:[O.type==="in"?"+":"-",O.amount]})]},O.id)})}):S.jsx("p",{className:"text-sm text-gray-400",children:"An no tienes movimientos."})]}),y&&Ca.createPortal(S.jsxs("div",{className:"fixed inset-0 z-50",children:[S.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>E(null)}),S.jsx("div",{className:"relative z-10 overflow-y-auto overscroll-y-contain",children:S.jsx("div",{className:"min-h-screen flex items-center justify-center p-3 md:p-6",children:S.jsxs("div",{className:"glass-effect rounded-2xl p-6 w-[min(92vw,420px)] max-h-[85vh] overflow-y-auto",children:[S.jsx("h4",{className:"text-xl font-semibold mb-1",children:"Confirmar canje"}),S.jsxs("p",{className:"text-sm text-gray-300 mb-4",children:["Vas a canjear el cdigo ",S.jsx("span",{className:"font-mono",children:y.id}),"."]}),S.jsxs("div",{className:"space-y-2 text-sm",children:[S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-gray-400",children:"Monto"}),S.jsxs("span",{className:"font-medium",children:[y.amount," puntos"]})]}),S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-gray-400",children:"Estado"}),S.jsx("span",{className:"font-medium",children:y.used?"Usado":y.active===!1?"Inactivo":"Disponible"})]}),"multiUse"in y&&S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-gray-400",children:"Tipo"}),S.jsx("span",{className:"font-medium",children:y.multiUse?"Multi-uso (un uso por persona)":"Uso nico"})]}),y.expiresAt&&S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-gray-400",children:"Expira"}),S.jsx("span",{className:"font-medium",children:y.expiresAt.toLocaleString()})]}),y.expired&&S.jsx("div",{className:"text-red-400",children:"Este cdigo ya expir."})]}),S.jsxs("div",{className:"mt-5 flex gap-2 justify-end",children:[S.jsx($t,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:()=>E(null),children:"Cancelar"}),S.jsxs($t,{onClick:async()=>{s(!0);try{const O=await WL(e,y.id,n?.email||null);t({title:"Canje exitoso",description:`Se aadieron ${O.amount} puntos a tu saldo.`}),c(""),E(null)}catch(O){t({title:"No se pudo canjear",description:O?.message||"Error desconocido",variant:"destructive"})}finally{s(!1)}},disabled:o||y.used||y.active===!1||y.expired,children:[o?S.jsx(Jc,{className:"w-4 h-4 animate-spin"}):S.jsx(wd,{className:"w-4 h-4"}),S.jsx("span",{className:"ml-2",children:"Confirmar canje"})]})]})]})})})]}),document.body),H&&Ca.createPortal(S.jsxs("div",{className:"fixed inset-0 z-50",children:[S.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>W(null)}),S.jsx("div",{className:"relative z-10 overflow-y-auto overscroll-y-contain",children:S.jsx("div",{className:"min-h-screen flex items-center justify-center p-3 md:p-6",children:S.jsxs("div",{className:"glass-effect rounded-2xl w-full max-w-[560px] max-h-[85vh] overflow-y-auto p-6 md:p-8 text-center",children:[S.jsx(wd,{className:"w-14 h-14 text-boreal-aqua mx-auto mb-3"}),S.jsx("h4",{className:"text-2xl font-semibold mb-1",children:"Comprobante de compra"}),S.jsxs("p",{className:"text-gray-300",children:["Compra de ",S.jsx("span",{className:"font-medium",children:H.quantity})," x ",S.jsx("span",{className:"font-medium",children:H.name}),"."]}),S.jsxs("p",{className:"text-gray-300 mt-1",children:["Total: ",S.jsxs("span",{className:"font-semibold",children:[H.total," pts"]})]}),S.jsx("p",{className:"text-gray-300 mt-3 text-sm",children:"Para retirar tu artculo, presntate en horario de oficina y muestra el cdigo QR o el ID de compra."}),S.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 items-center",children:[H.imageUrl?S.jsx("div",{className:"w-full aspect-square rounded-xl overflow-hidden bg-white/5",children:S.jsx("img",{src:H.imageUrl,alt:H.name,className:"w-full h-full object-cover"})}):null,S.jsxs("div",{className:"flex flex-col items-center justify-center",children:[S.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"ID de compra"}),S.jsx("div",{className:"font-mono text-lg tracking-widest",children:H.id}),H.qrUrl&&S.jsx("img",{src:H.qrUrl,alt:"QR de compra",className:"mt-3 w-40 h-40 mx-auto"})]})]}),S.jsxs("div",{className:"mt-5 flex flex-col md:flex-row flex-wrap gap-2 justify-center",children:[S.jsx($t,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:()=>W(null),children:"Cerrar"}),S.jsx($t,{variant:"outline",className:"border-green-400 text-green-300 hover:bg-green-500/10",onClick:()=>window.open("https://wa.me/50576796164","_blank","noopener,noreferrer"),children:"Contactar por WhatsApp"})]})]})})})]}),document.body)]})};function BU({id:n,name:e,quantity:t,total:r,price:i}){return`ID:${n}
NAME:${e}
QTY:${t}
PRICE:${i}
TOTAL:${r}`}function UU(n){return`https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=${encodeURIComponent(n)}`}function jU(n,{includeInactive:e=!1}={}){const t=cr(yt,"productos"),r=Ui(t,Pp("name"));return Ts(r,i=>{let o=[];i.forEach(s=>o.push({id:s.id,...s.data()})),e||(o=o.filter(s=>s.active!==!1)),n(o)})}async function zU({name:n,price:e,stock:t=0,imageUrl:r="",active:i=!0,description:o="",tags:s=[]}){if(!n||!e)throw new Error("Nombre y precio son obligatorios");const u=cr(yt,"productos"),c={name:n,price:Number(e),stock:Number(t||0),imageUrl:r||"",active:i!==!1,description:o||"",tags:Array.isArray(s)?s:[],createdAt:ar()};return{id:(await v7(u,c)).id,...c}}async function HU(n,e){if(!n)throw new Error("Producto invlido");const t=Zn(yt,"productos",n),r={},i=["name","price","stock","imageUrl","description","tags","active"];for(const o of i)o in e&&e[o]!==void 0&&(o==="price"||o==="stock"?r[o]=Number(e[o]):o==="tags"?r[o]=Array.isArray(e[o])?e[o]:[]:r[o]=e[o]);await m7(t,r)}async function GU(n){if(!n)throw new Error("Producto invlido");const e=Zn(yt,"productos",n);await g7(e)}async function WU(n,e,t=1,r,i){if(!n)throw new Error("Usuario no autenticado");if(!e)throw new Error("Producto invlido");const o=Math.max(1,Number(t||1)),s=Zn(yt,"productos",e),u=Zn(yt,"userPoints",n),c=cr(yt,"userPoints",n,"purchases");return oy(yt,async f=>{const[h,p]=await Promise.all([f.get(s),f.get(u)]);if(!h.exists())throw new Error("Producto no encontrado");const v=h.data();if(v.active===!1)throw new Error("Producto inactivo");const y=Number(v.stock||0),E=Number(v.price||0);if(!E||E<0)throw new Error("Precio invlido");if(y<o)throw new Error("Stock insuficiente");const A=E*o,T=Number((p.exists()?p.data().balance:0)||0);if(T<A)throw new Error("No tienes puntos suficientes");f.update(s,{stock:y-o,lastPurchasedAt:ar()});const N=(r||"").toLowerCase()||null;p.exists()?f.update(u,{balance:Jd(-A),updatedAt:ar(),email:N}):f.set(u,{balance:T-A,updatedAt:ar(),email:N});const P=i?Zn(c,String(i)):Zn(c);return f.set(P,{receiptId:i||P.id,productId:e,name:v.name,price:E,quantity:o,total:A,imageUrl:v.imageUrl||"",purchasedAt:ar(),userEmail:r||null}),{total:A,receiptId:i||P.id}})}function $U(n,e){if(!n)return e(!1),()=>{};const t=String(n).toLowerCase(),r=cr(yt,"isAdmin"),i=Ui(r,Xu("email","==",t),Aa(1));return Ts(i,s=>{if(!s.empty){const h=(s.docs[0].data()||{}).active!==!1;e(h);return}const u=Zn(yt,"isAdmin",t),c=Ts(u,f=>{if(!f.exists())e(!1);else{const p=(f.data()||{}).active!==!1;e(p)}},()=>e(!1));return()=>c()},()=>e(!1))}const qU=({product:n,onBuy:e,disabled:t,adminMode:r=!1,onEdit:i,onDelete:o})=>{const{name:s,price:u,stock:c,imageUrl:f,description:h}=n;return S.jsxs("div",{className:"rounded-2xl glass-effect p-4 flex flex-col",children:[S.jsx("div",{className:"w-full rounded-xl overflow-hidden mb-3 aspect-square bg-white/5",children:f?S.jsx("img",{src:f,alt:s,className:"w-full h-full object-cover"}):null}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h4",{className:"text-lg font-semibold",children:s}),S.jsx("p",{className:"text-sm text-gray-300 line-clamp-4",children:h||""})]}),Array.isArray(n.tags)&&n.tags.length>0&&S.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:n.tags.map(p=>S.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-white/10 border border-white/10 text-gray-200",children:p},p))}),S.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[S.jsxs("div",{className:"text-boreal-aqua font-bold",children:[u," pts"]}),S.jsxs("div",{className:"text-xs text-gray-400",children:["Stock: ",Number(c??0)]})]}),S.jsx($t,{className:"mt-3",onClick:e,disabled:t||Number(c??0)<=0,children:"Canjear"}),r&&S.jsxs("div",{className:"mt-2 flex gap-2",children:[S.jsx($t,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:i,children:"Editar"}),S.jsx($t,{variant:"destructive",onClick:o,children:"Eliminar"})]})]})},KU=({user:n,onViewMovements:e})=>{const t=n?.uid,{toast:r}=Dp(),[i,o]=B.useState([]),[s,u]=B.useState(0),[c,f]=B.useState(null),[h,p]=B.useState(!1),[v,y]=B.useState(!1),[E,A]=B.useState("products"),[T,N]=B.useState({name:"",price:"",stock:"",imageUrl:"",description:"",tags:"",active:!0}),[P,M]=B.useState(null),[j,H]=B.useState(""),[W,R]=B.useState([]),[I,D]=B.useState(null),[O,F]=B.useState(1),[U,V]=B.useState(!1),[te,Pe]=B.useState(null),[Oe,_e]=B.useState({email:"",points:"",note:""}),[Z,me]=B.useState(!1);B.useEffect(()=>{const ie=jU(o);return()=>ie&&ie()},[]),B.useEffect(()=>{if(!!I||!!te){const be=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=be||""}}},[I,te]),B.useEffect(()=>{if(!t)return;const ie=o3(t,be=>u(Number(be?.balance||0)));return()=>ie&&ie()},[t]),B.useEffect(()=>{if(!n?.email)return;const ie=$U(n.email,p);return()=>ie&&ie()},[n?.email]),B.useEffect(()=>{h?(y(!0),A("points")):y(!1)},[h]);const de=ie=>{D(ie),F(1)},q=async()=>{if(!I)return;const ie=Math.max(1,Number(O||1));V(!0);try{const be=oe(),et=await WU(t,I.id,ie,n?.email||null,be);r({title:"Compra realizada",description:`Se descontaron ${et.total} puntos.`});const bt=xe({id:et.receiptId,name:I.name,quantity:ie,total:et.total,price:Number(I.price||0)}),Lt=Ie(bt);Pe({id:et.receiptId,name:I.name,quantity:ie,total:et.total,imageUrl:I.imageUrl||"",qrUrl:Lt}),D(null)}catch(be){r({title:"No se pudo comprar",description:be?.message||"Error desconocido",variant:"destructive"})}finally{V(!1)}};function oe(){return Math.random().toString(36).slice(2,10).toUpperCase()}function xe({id:ie,name:be,quantity:et,total:bt,price:Lt}){return`ID:${ie}
NAME:${be}
QTY:${et}
PRICE:${Lt}
TOTAL:${bt}`}function Ie(ie){return`https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=${encodeURIComponent(ie)}`}const Ge=async ie=>{ie.preventDefault();try{const be=T.tags.split(",").map(et=>et.trim()).filter(Boolean);P?(await HU(P,{name:T.name.trim(),price:Number(T.price),stock:Number(T.stock||0),imageUrl:T.imageUrl.trim(),description:T.description.trim(),tags:be,active:!!T.active}),r({title:"Producto actualizado"})):(await zU({name:T.name.trim(),price:Number(T.price),stock:Number(T.stock||0),imageUrl:T.imageUrl.trim(),description:T.description.trim(),tags:be,active:!!T.active}),r({title:"Producto agregado"})),N({name:"",price:"",stock:"",imageUrl:"",description:"",tags:"",active:!0}),M(null)}catch(be){r({title:"No se pudo agregar",description:be?.message||"Error desconocido",variant:"destructive"})}},We=B.useMemo(()=>{const ie=new Set;return i.forEach(be=>(Array.isArray(be.tags)?be.tags:[]).forEach(et=>ie.add(et))),Array.from(ie).sort((be,et)=>be.localeCompare(et))},[i]),ke=B.useMemo(()=>{const ie=j.trim().toLowerCase();return i.filter(be=>{const et=!ie||be.name?.toLowerCase().includes(ie)||be.description?.toLowerCase().includes(ie)||Array.isArray(be.tags)&&be.tags.some(Lt=>Lt.toLowerCase().includes(ie)),bt=!W.length||Array.isArray(be.tags)&&be.tags.some(Lt=>W.includes(Lt));return et&&bt})},[i,j,W]),Ke=(i?.length||0)>20;return S.jsxs("div",{className:"w-full",children:[S.jsxs("div",{className:"mb-2 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5",children:[S.jsx("h2",{className:"font-black tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-boreal-aqua to-boreal-purple text-[40px] leading-[44px] sm:text-[60px] sm:leading-[60px] break-words",children:"Marketplace"}),S.jsxs("div",{className:"text-sm text-gray-300 sm:text-right",children:["Saldo: ",S.jsx("span",{className:"text-boreal-aqua font-bold",children:s})," pts"]})]}),S.jsx("p",{className:"text-gray-300 mb-8",children:"Canjea tus puntos por productos y beneficios de la comunidad."}),S.jsxs("div",{className:"mb-6 flex flex-col items-center gap-5",children:[Ke&&S.jsx("div",{className:"w-full flex justify-center",children:S.jsx(wr,{placeholder:"Buscar por nombre, descripcin o etiqueta",value:j,onChange:ie=>H(ie.target.value),className:"w-full max-w-2xl h-12 rounded-full bg-white/5 border border-boreal-aqua/40 focus-visible:ring-0 focus-visible:border-boreal-aqua text-white placeholder:text-gray-400 px-5 text-base"})}),!!We.length&&S.jsx("div",{className:"w-full",children:S.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[S.jsx("button",{onClick:()=>R([]),className:`px-5 py-2 text-sm rounded-full border transition ${W.length===0?"bg-gradient-to-r from-boreal-purple to-boreal-blue text-white border-transparent shadow":"bg-transparent text-gray-200 border-boreal-aqua/50 hover:border-boreal-aqua"}`,children:"Todos"}),We.map(ie=>{const be=W.includes(ie);return S.jsxs("button",{onClick:()=>R(et=>be?et.filter(bt=>bt!==ie):[...et,ie]),className:`px-5 py-2 text-sm rounded-full border transition ${be?"bg-gradient-to-r from-boreal-purple to-boreal-blue text-white border-transparent shadow":"bg-transparent text-gray-200 border-boreal-aqua/50 hover:border-boreal-aqua"}`,children:["#",ie]},ie)}),W.length>0&&S.jsx("button",{onClick:()=>R([]),className:"ml-2 px-5 py-2 text-sm rounded-full border text-gray-200 border-boreal-aqua/40 hover:border-boreal-aqua",children:"Limpiar"})]})})]}),S.jsx("div",{className:"mt-8",children:ke.length?S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:S.jsx(ip,{initial:!1,children:ke.map(ie=>S.jsx(Tr.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},children:S.jsx(qU,{product:ie,onBuy:()=>de(ie),disabled:c===ie.id,adminMode:v,onEdit:()=>{y(!0),M(ie.id),N({name:ie.name||"",price:String(ie.price??""),stock:String(ie.stock??""),imageUrl:ie.imageUrl||"",description:ie.description||"",tags:Array.isArray(ie.tags)?ie.tags.join(", "):"",active:ie.active!==!1})},onDelete:async()=>{if(window.confirm("Eliminar este producto?"))try{await GU(ie.id),r({title:"Producto eliminado"})}catch(be){r({title:"No se pudo eliminar",description:be?.message||"Error desconocido",variant:"destructive"})}}})},ie.id))})}):S.jsxs("div",{className:"rounded-2xl glass-effect p-8 text-center text-gray-300",children:[S.jsx("p",{className:"text-lg font-semibold text-white",children:"No hay artculos disponibles"}),S.jsx("p",{className:"mt-1",children:"Por el momento no hay productos publicados, pero pronto habr novedades. Vuelve ms tarde."})]})}),S.jsxs("div",{className:"mt-10",children:[h&&S.jsx("div",{className:"mb-3 flex items-center justify-between",children:S.jsxs("div",{className:"inline-flex rounded-lg border border-white/10 p-1 bg-white/5",children:[S.jsx("button",{className:`px-3 py-1.5 rounded-md text-sm ${v?"text-white hover:bg-white/10":"bg-boreal-aqua text-boreal-dark"}`,onClick:()=>y(!1),children:"Usuario"}),S.jsx("button",{className:`px-3 py-1.5 rounded-md text-sm ${v?"bg-boreal-aqua text-boreal-dark":"text-white hover:bg-white/10"}`,onClick:()=>y(!0),children:"Admin"})]})}),h&&v&&S.jsxs("div",{className:"rounded-2xl glass-effect p-4",children:[S.jsxs("div",{className:"mb-4 inline-flex rounded-lg border border-white/10 p-1 bg-white/5",children:[S.jsx("button",{className:`px-3 py-1.5 rounded-md text-sm ${E==="products"?"bg-boreal-aqua text-boreal-dark":"text-white hover:bg-white/10"}`,onClick:()=>A("products"),children:"Productos"}),S.jsx("button",{className:`px-3 py-1.5 rounded-md text-sm ${E==="points"?"bg-boreal-aqua text-boreal-dark":"text-white hover:bg-white/10"}`,onClick:()=>A("points"),children:"Puntos"})]}),E==="products"&&S.jsxs("form",{onSubmit:Ge,className:"grid grid-cols-1 md:grid-cols-6 gap-3",children:[S.jsxs("div",{className:"md:col-span-3",children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Nombre"}),S.jsx(wr,{value:T.name,onChange:ie=>N({...T,name:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Precio (pts)"}),S.jsx(wr,{type:"number",min:"0",value:T.price,onChange:ie=>N({...T,price:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Stock"}),S.jsx(wr,{type:"number",min:"0",value:T.stock,onChange:ie=>N({...T,stock:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsxs("div",{className:"md:col-span-2",children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Imagen URL"}),S.jsx(wr,{value:T.imageUrl,onChange:ie=>N({...T,imageUrl:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsxs("div",{className:"md:col-span-2",children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Etiquetas (coma separadas)"}),S.jsx(wr,{value:T.tags,onChange:ie=>N({...T,tags:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsxs("div",{className:"md:col-span-4",children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Descripcin"}),S.jsx(wr,{value:T.description,onChange:ie=>N({...T,description:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("input",{id:"prod-active",type:"checkbox",checked:!!T.active,onChange:ie=>N({...T,active:ie.target.checked})}),S.jsx("label",{htmlFor:"prod-active",className:"text-sm text-gray-300",children:"Activo"})]}),S.jsx("div",{children:S.jsx($t,{type:"submit",className:"w-full",children:P?"Guardar":"Agregar"})})]}),E==="points"&&S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[S.jsxs("div",{className:"md:col-span-1",children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Correo del usuario"}),S.jsx(wr,{value:Oe.email,onChange:ie=>_e({...Oe,email:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Puntos a agregar"}),S.jsx(wr,{type:"number",min:"1",value:Oe.points,onChange:ie=>_e({...Oe,points:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsxs("div",{className:"md:col-span-1",children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Nota (opcional)"}),S.jsx(wr,{value:Oe.note,onChange:ie=>_e({...Oe,note:ie.target.value}),className:"bg-white/5 border-white/20 text-white"})]}),S.jsx("div",{className:"md:col-span-3 flex justify-end",children:S.jsx($t,{onClick:async()=>{me(!0);try{const ie=await HL(Oe.email,Number(Oe.points),n?.email||null,Oe.note);r({title:"Puntos agregados",description:`Se aadieron ${ie.amount} puntos a ${ie.email}.`}),_e({email:"",points:"",note:""})}catch(ie){r({title:"No se pudo agregar",description:ie?.message||"Error desconocido",variant:"destructive"})}finally{me(!1)}},disabled:Z||!Oe.email.trim()||!Number(Oe.points),children:Z?"Procesando...":"Agregar puntos"})})]})]})]}),I&&Ca.createPortal(S.jsxs("div",{className:"fixed inset-0 z-50",children:[S.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>D(null)}),S.jsx("div",{className:"relative z-10 overflow-y-auto overscroll-y-contain",children:S.jsx("div",{className:"min-h-screen flex items-center justify-center p-3 md:p-6",children:S.jsxs("div",{className:"glass-effect rounded-2xl w-full max-w-[420px] max-h-[80vh] overflow-y-auto",children:[S.jsxs("div",{className:"p-5 border-b border-white/10",children:[S.jsx("h4",{className:"text-2xl font-bold text-white",children:"Confirmar compra"}),S.jsxs("p",{className:"text-sm text-gray-200 mt-0.5",children:["Ests canjeando puntos por ",S.jsx("span",{className:"font-medium",children:I.name}),"."]})]}),S.jsxs("div",{className:"p-5",children:[S.jsxs("div",{className:"flex flex-col gap-4 items-start",children:[S.jsx("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-white/5 flex-shrink-0",children:I.imageUrl?S.jsx("img",{src:I.imageUrl,alt:I.name,className:"w-full h-full object-cover"}):null}),S.jsxs("div",{className:"w-full -mt-2",children:[S.jsx("div",{className:"text-base font-semibold text-white",children:I.name}),I.description?S.jsx("p",{className:"text-sm text-gray-300 mt-1",children:I.description}):null]}),S.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3 text-sm w-full",children:[S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-gray-400",children:"Precio"}),S.jsxs("span",{className:"font-medium",children:[Number(I.price||0)," pts"]})]}),S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-gray-400",children:"Saldo"}),S.jsxs("span",{className:"font-medium",children:[s," pts"]})]}),S.jsxs("div",{className:"col-span-2 flex items-center gap-3",children:[S.jsx("span",{className:"text-gray-400",children:"Cantidad"}),S.jsxs("div",{className:"inline-flex items-center rounded-full border border-boreal-aqua/40 overflow-hidden",children:[S.jsx("button",{type:"button",className:"px-2 py-1 text-white/80 hover:bg-white/10",onClick:()=>F(ie=>Math.max(1,Number(ie||1)-1)),children:S.jsx(L7,{className:"w-4 h-4"})}),S.jsx(wr,{type:"number",min:"1",max:Number(I.stock||0),value:O,onChange:ie=>F(ie.target.value),className:"bg-transparent border-0 w-16 text-center focus-visible:ring-0"}),S.jsx("button",{type:"button",className:"px-2 py-1 text-white/80 hover:bg-white/10",onClick:()=>F(ie=>{const be=Number(I.stock||0);return Math.min(be||9999,Math.max(1,Number(ie||1)+1))}),children:S.jsx(F7,{className:"w-4 h-4"})})]}),S.jsxs("span",{className:"text-gray-400",children:["Stock: ",Number(I.stock||0)]})]})]})]}),(()=>{const ie=Number(I.stock||0),be=Number(I.price||0),et=Math.max(1,Number(O||1)),bt=be*et,Lt=et>ie,ci=bt>s;return S.jsxs("div",{className:"mt-4",children:[S.jsxs("div",{className:"flex justify-between text-sm",children:[S.jsx("span",{className:"text-gray-400",children:"Total"}),S.jsxs("span",{className:"font-semibold",children:[bt," pts"]})]}),(Lt||ci)&&S.jsxs("div",{className:"mt-2 flex items-center gap-2 text-amber-300 text-xs",children:[S.jsx(HS,{className:"w-4 h-4"}),S.jsxs("span",{children:[Lt?"Cantidad supera el stock disponible.":"",Lt&&ci?" ":"",ci?"No tienes puntos suficientes.":""]})]})]})})(),S.jsxs("div",{className:"mt-5 flex flex-col-reverse md:flex-row gap-2 justify-end",children:[S.jsx($t,{variant:"outline",className:"rounded-full border-white/30 text-white hover:bg-white/10 w-full md:w-auto",onClick:()=>D(null),children:"Cancelar"}),(()=>{const ie=Number(I.stock||0),be=Number(I.price||0),et=Math.max(1,Number(O||1)),bt=be*et,Lt=U||et>ie||bt>s;return S.jsx($t,{onClick:q,disabled:Lt,className:"rounded-full w-full md:w-auto bg-gradient-to-r from-boreal-purple to-boreal-blue text-white font-bold",children:U?"Procesando...":`Confirmar (${bt} pts)`})})()]})]})]})})})]}),document.body),te&&Ca.createPortal(S.jsxs("div",{className:"fixed inset-0 z-50",children:[S.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>Pe(null)}),S.jsx("div",{className:"relative z-10 overflow-y-auto overscroll-y-contain",children:S.jsx("div",{className:"min-h-screen flex items-center justify-center p-3 md:p-6",children:S.jsxs("div",{className:"glass-effect rounded-2xl w-full max-w-[560px] max-h-[85vh] overflow-y-auto p-6 md:p-8 text-center",children:[S.jsx(wd,{className:"w-14 h-14 text-boreal-aqua mx-auto mb-3"}),S.jsx("h4",{className:"text-2xl font-semibold mb-1",children:"Compra confirmada!"}),S.jsxs("p",{className:"text-gray-300",children:["Canjeaste ",S.jsx("span",{className:"font-medium",children:te.quantity})," x ",S.jsx("span",{className:"font-medium",children:te.name}),"."]}),S.jsxs("p",{className:"text-gray-300 mt-1",children:["Total: ",S.jsxs("span",{className:"font-semibold",children:[te.total," pts"]})]}),S.jsx("p",{className:"text-gray-300 mt-3 text-sm",children:"Para retirar tu artculo, presntate en horario de oficina y muestra el cdigo QR o el ID de compra."}),S.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 items-center",children:[te.imageUrl?S.jsx("div",{className:"rounded-xl overflow-hidden bg-white/5 mx-auto w-40 h-40 md:w-full md:aspect-square",children:S.jsx("img",{src:te.imageUrl,alt:te.name,className:"w-full h-full object-cover"})}):null,S.jsxs("div",{className:"flex flex-col items-center justify-center",children:[S.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"ID de compra"}),S.jsx("div",{className:"font-mono text-lg tracking-widest",children:te.id}),te.qrUrl&&S.jsx("img",{src:te.qrUrl,alt:"QR de compra",className:"mt-3 w-40 h-40 mx-auto"})]})]}),S.jsxs("div",{className:"mt-5 flex flex-col md:flex-row flex-wrap gap-2 justify-center",children:[S.jsx($t,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:()=>Pe(null),children:"Cerrar"}),S.jsx($t,{className:"w-full md:w-auto",onClick:()=>{Pe(null),typeof e=="function"&&e()},children:"Ver mis movimientos"}),S.jsx($t,{variant:"outline",className:"border-green-400 text-green-300 hover:bg-green-500/10",onClick:()=>window.open("https://wa.me/50576796164","_blank","noopener,noreferrer"),children:"Contactar por WhatsApp"})]})]})})})]}),document.body)]})},XU=({cert:n})=>{const e=o=>{if(!o)return"Fecha desconocida";try{return(o.toDate?o.toDate():new Date(o)).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}catch{return"Fecha invlida"}},t=()=>{n?.idValidacion&&window.open(`https://borealabs.org/validacion?id=${n.idValidacion}`,"_blank")},r=()=>Array.isArray(n?.urlPdf)&&n.urlPdf.length>0?n.urlPdf[0]?.downloadURL||n.urlPdf[0]?.url||null:n?.urlPdf?.downloadURL?n.urlPdf.downloadURL:n?.downloadURL?n.downloadURL:null,i=()=>{const o=r();o&&window.open(o,"_blank")};return S.jsxs(Tr.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"rounded-2xl p-6 glass-effect flex flex-col justify-between transition-all duration-300 hover:border-boreal-aqua/50",children:[S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[S.jsx(DE,{className:"w-8 h-8 text-boreal-aqua"}),S.jsx("h3",{className:"text-xl font-bold text-boreal-aqua truncate",children:n.nombreEvento||"Evento Desconocido"})]}),S.jsx("p",{className:"text-lg text-white mb-1",children:n.nombreUsuario||"Usuario Desconocido"}),S.jsxs("p",{className:"text-sm text-gray-300 mb-4",children:["Emitido: ",e(n.fechaEmision)]}),S.jsxs("p",{className:"text-xs text-gray-400 font-mono break-all",children:["ID: ",n.idValidacion||n.id]})]}),S.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[S.jsxs($t,{className:"w-full bg-gradient-to-r from-boreal-aqua to-boreal-blue text-boreal-dark font-bold hover:opacity-90",onClick:t,children:[S.jsx(DE,{className:"w-4 h-4 mr-2"}),"Validar"]}),S.jsxs($t,{variant:"outline",className:"w-full border-white/30 text-white hover:bg-white/10",onClick:i,disabled:!r(),children:[S.jsx(P7,{className:"w-4 h-4 mr-2"}),"Descargar PDF"]})]})]})},YU=({user:n,activeTab:e="certs",onNavigateTab:t})=>{const[r,i]=B.useState([]),[o,s]=B.useState(!0);B.useEffect(()=>{if(!n||!yt)return;s(!0);const c=cr(yt,"certificados"),f=[];n.email&&(f.push(Ui(c,Xu("userEmail","==",n.email))),f.push(Ui(c,Xu("correoUsuario","==",n.email))));const h=new Map;let p=0;const v=f.map(y=>Ts(y,E=>{E.forEach(A=>{h.set(A.id,{id:A.id,...A.data()})}),p+=1,i(Array.from(h.values())),p>=1&&s(!1)},E=>{console.error("Error al obtener certificados:",E),p+=1,p>=1&&s(!1)}));return()=>v.forEach(y=>y&&y())},[n,yt]);const u=n.displayName||n.email.split("@")[0];return S.jsxs(Tr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"max-w-7xl w-full mx-auto p-4 md:p-8",children:[S.jsx(Tg,{children:S.jsx("title",{children:"Boreal Wallet"})}),e==="certs"&&S.jsxs(S.Fragment,{children:[S.jsxs("h1",{className:"font-black mb-2 text-[60px] leading-[60px]",children:[S.jsx("span",{className:"text-white",children:"Hola, "}),S.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-boreal-aqua to-boreal-blue",children:u})]}),S.jsx("p",{className:"text-gray-300 mb-6",children:"Aqu estn tus certificados y puntos de Boreal Labs."})]}),S.jsxs(ip,{mode:"wait",children:[e==="certs"&&o&&S.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400",children:[S.jsx(Jc,{className:"w-12 h-12 mb-4 animate-spin"}),S.jsx("p",{children:"Buscando tus certificados..."})]}),e==="certs"&&!o&&r.length===0&&S.jsxs("div",{className:"flex flex-col items-center justify-center h-64 rounded-2xl glass-effect p-8",children:[S.jsx(HS,{className:"w-16 h-16 text-boreal-purple mb-4"}),S.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No se encontraron certificados"}),S.jsxs("p",{className:"text-gray-300 text-center max-w-md",children:["No pudimos encontrar certificados asociados a la cuenta ",S.jsx("span",{className:"font-medium text-white",children:n.email}),"."]})]}),e==="certs"&&!o&&r.length>0&&S.jsx(Tr.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(c=>S.jsx(XU,{cert:c},c.id))},"certs"),e==="points"&&S.jsx(Tr.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"mt-4",children:S.jsx(FU,{user:n})},"points"),e==="market"&&S.jsx(Tr.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"mt-4",children:S.jsx(KU,{user:n,onViewMovements:()=>t&&t("points")})},"market")]})]})},QU="/assets/favicon-f169e2d8-C2gxQMFy.png";function Ar(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function w3(n,e=[]){let t=[];function r(o,s){const u=B.createContext(s),c=t.length;t=[...t,s];const f=p=>{const{scope:v,children:y,...E}=p,A=v?.[n]?.[c]||u,T=B.useMemo(()=>E,Object.values(E));return S.jsx(A.Provider,{value:T,children:y})};f.displayName=o+"Provider";function h(p,v){const y=v?.[n]?.[c]||u,E=B.useContext(y);if(E)return E;if(s!==void 0)return s;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[f,h]}const i=()=>{const o=t.map(s=>B.createContext(s));return function(u){const c=u?.[n]||o;return B.useMemo(()=>({[`__scope${n}`]:{...u,[n]:c}}),[u,c])}};return i.scopeName=n,[r,ZU(i,...e)]}function ZU(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((u,{useScope:c,scopeName:f})=>{const p=c(o)[`__scope${f}`];return{...u,...p}},{});return B.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return t.scopeName=e.scopeName,t}function JU(n){const e=n+"CollectionProvider",[t,r]=w3(e),[i,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),s=A=>{const{scope:T,children:N}=A,P=Rn.useRef(null),M=Rn.useRef(new Map).current;return S.jsx(i,{scope:T,itemMap:M,collectionRef:P,children:N})};s.displayName=e;const u=n+"CollectionSlot",c=ep(u),f=Rn.forwardRef((A,T)=>{const{scope:N,children:P}=A,M=o(u,N),j=Ta(T,M.collectionRef);return S.jsx(c,{ref:j,children:P})});f.displayName=u;const h=n+"CollectionItemSlot",p="data-radix-collection-item",v=ep(h),y=Rn.forwardRef((A,T)=>{const{scope:N,children:P,...M}=A,j=Rn.useRef(null),H=Ta(T,j),W=o(h,N);return Rn.useEffect(()=>(W.itemMap.set(j,{ref:j,...M}),()=>void W.itemMap.delete(j))),S.jsx(v,{[p]:"",ref:H,children:P})});y.displayName=h;function E(A){const T=o(n+"CollectionConsumer",A);return Rn.useCallback(()=>{const P=T.collectionRef.current;if(!P)return[];const M=Array.from(P.querySelectorAll(`[${p}]`));return Array.from(T.itemMap.values()).sort((W,R)=>M.indexOf(W.ref.current)-M.indexOf(R.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:s,Slot:f,ItemSlot:y},E,r]}var ej=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Hi=ej.reduce((n,e)=>{const t=ep(`Primitive.${e}`),r=B.forwardRef((i,o)=>{const{asChild:s,...u}=i,c=s?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(c,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function E3(n,e){n&&Ca.flushSync(()=>n.dispatchEvent(e))}function Ia(n){const e=B.useRef(n);return B.useEffect(()=>{e.current=n}),B.useMemo(()=>(...t)=>e.current?.(...t),[])}function tj(n,e=globalThis?.document){const t=Ia(n);B.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var nj="DismissableLayer",yg="dismissableLayer.update",rj="dismissableLayer.pointerDownOutside",ij="dismissableLayer.focusOutside",IA,A3=B.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),T3=B.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:u,...c}=n,f=B.useContext(A3),[h,p]=B.useState(null),v=h?.ownerDocument??globalThis?.document,[,y]=B.useState({}),E=Ta(e,R=>p(R)),A=Array.from(f.layers),[T]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),N=A.indexOf(T),P=h?A.indexOf(h):-1,M=f.layersWithOutsidePointerEventsDisabled.size>0,j=P>=N,H=sj(R=>{const I=R.target,D=[...f.branches].some(O=>O.contains(I));!j||D||(i?.(R),s?.(R),R.defaultPrevented||u?.())},v),W=aj(R=>{const I=R.target;[...f.branches].some(O=>O.contains(I))||(o?.(R),s?.(R),R.defaultPrevented||u?.())},v);return tj(R=>{P===f.layers.size-1&&(r?.(R),!R.defaultPrevented&&u&&(R.preventDefault(),u()))},v),B.useEffect(()=>{if(h)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(IA=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(h)),f.layers.add(h),SA(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=IA)}},[h,v,t,f]),B.useEffect(()=>()=>{h&&(f.layers.delete(h),f.layersWithOutsidePointerEventsDisabled.delete(h),SA())},[h,f]),B.useEffect(()=>{const R=()=>y({});return document.addEventListener(yg,R),()=>document.removeEventListener(yg,R)},[]),S.jsx(Hi.div,{...c,ref:E,style:{pointerEvents:M?j?"auto":"none":void 0,...n.style},onFocusCapture:Ar(n.onFocusCapture,W.onFocusCapture),onBlurCapture:Ar(n.onBlurCapture,W.onBlurCapture),onPointerDownCapture:Ar(n.onPointerDownCapture,H.onPointerDownCapture)})});T3.displayName=nj;var oj="DismissableLayerBranch",C3=B.forwardRef((n,e)=>{const t=B.useContext(A3),r=B.useRef(null),i=Ta(e,r);return B.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),S.jsx(Hi.div,{...n,ref:i})});C3.displayName=oj;function sj(n,e=globalThis?.document){const t=Ia(n),r=B.useRef(!1),i=B.useRef(()=>{});return B.useEffect(()=>{const o=u=>{if(u.target&&!r.current){let c=function(){I3(rj,t,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function aj(n,e=globalThis?.document){const t=Ia(n),r=B.useRef(!1);return B.useEffect(()=>{const i=o=>{o.target&&!r.current&&I3(ij,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function SA(){const n=new CustomEvent(yg);document.dispatchEvent(n)}function I3(n,e,t,{discrete:r}){const i=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?E3(i,o):i.dispatchEvent(o)}var uj=T3,lj=C3,ef=globalThis?.document?B.useLayoutEffect:()=>{},cj="Portal",S3=B.forwardRef((n,e)=>{const{container:t,...r}=n,[i,o]=B.useState(!1);ef(()=>o(!0),[]);const s=t||i&&globalThis?.document?.body;return s?BL.createPortal(S.jsx(Hi.div,{...r,ref:e}),s):null});S3.displayName=cj;function fj(n,e){return B.useReducer((t,r)=>e[t][r]??t,n)}var b3=n=>{const{present:e,children:t}=n,r=hj(e),i=typeof t=="function"?t({present:r.isPresent}):B.Children.only(t),o=Ta(r.ref,dj(i));return typeof t=="function"||r.isPresent?B.cloneElement(i,{ref:o}):null};b3.displayName="Presence";function hj(n){const[e,t]=B.useState(),r=B.useRef(null),i=B.useRef(n),o=B.useRef("none"),s=n?"mounted":"unmounted",[u,c]=fj(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return B.useEffect(()=>{const f=id(r.current);o.current=u==="mounted"?f:"none"},[u]),ef(()=>{const f=r.current,h=i.current;if(h!==n){const v=o.current,y=id(f);n?c("MOUNT"):y==="none"||f?.display==="none"?c("UNMOUNT"):c(h&&v!==y?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,c]),ef(()=>{if(e){let f;const h=e.ownerDocument.defaultView??window,p=y=>{const A=id(r.current).includes(CSS.escape(y.animationName));if(y.target===e&&A&&(c("ANIMATION_END"),!i.current)){const T=e.style.animationFillMode;e.style.animationFillMode="forwards",f=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=T)})}},v=y=>{y.target===e&&(o.current=id(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{h.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:B.useCallback(f=>{r.current=f?getComputedStyle(f):null,t(f)},[])}}function id(n){return n?.animationName||"none"}function dj(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var pj=lb[" useInsertionEffect ".trim().toString()]||ef;function mj({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,o,s]=gj({defaultProp:e,onChange:t}),u=n!==void 0,c=u?n:i;{const h=B.useRef(n!==void 0);B.useEffect(()=>{const p=h.current;p!==u&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=u},[u,r])}const f=B.useCallback(h=>{if(u){const p=vj(h)?h(n):h;p!==n&&s.current?.(p)}else o(h)},[u,n,o,s]);return[c,f]}function gj({defaultProp:n,onChange:e}){const[t,r]=B.useState(n),i=B.useRef(t),o=B.useRef(e);return pj(()=>{o.current=e},[e]),B.useEffect(()=>{i.current!==t&&(o.current?.(t),i.current=t)},[t,i]),[t,r,o]}function vj(n){return typeof n=="function"}var yj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),_j="VisuallyHidden",my=B.forwardRef((n,e)=>S.jsx(Hi.span,{...n,ref:e,style:{...yj,...n.style}}));my.displayName=_j;var gy="ToastProvider",[vy,xj,wj]=JU("Toast"),[R3]=w3("Toast",[wj]),[Ej,Lp]=R3(gy),P3=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:s}=n,[u,c]=B.useState(null),[f,h]=B.useState(0),p=B.useRef(!1),v=B.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${gy}\`. Expected non-empty \`string\`.`),S.jsx(vy.Provider,{scope:e,children:S.jsx(Ej,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:f,viewport:u,onViewportChange:c,onToastAdd:B.useCallback(()=>h(y=>y+1),[]),onToastRemove:B.useCallback(()=>h(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:v,children:s})})};P3.displayName=gy;var N3="ToastViewport",Aj=["F8"],_g="toast.viewportPause",xg="toast.viewportResume",D3=B.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=Aj,label:i="Notifications ({hotkey})",...o}=n,s=Lp(N3,t),u=xj(t),c=B.useRef(null),f=B.useRef(null),h=B.useRef(null),p=B.useRef(null),v=Ta(e,p,s.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=s.toastCount>0;B.useEffect(()=>{const T=N=>{r.length!==0&&r.every(M=>N[M]||N.code===M)&&p.current?.focus()};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[r]),B.useEffect(()=>{const T=c.current,N=p.current;if(E&&T&&N){const P=()=>{if(!s.isClosePausedRef.current){const W=new CustomEvent(_g);N.dispatchEvent(W),s.isClosePausedRef.current=!0}},M=()=>{if(s.isClosePausedRef.current){const W=new CustomEvent(xg);N.dispatchEvent(W),s.isClosePausedRef.current=!1}},j=W=>{!T.contains(W.relatedTarget)&&M()},H=()=>{T.contains(document.activeElement)||M()};return T.addEventListener("focusin",P),T.addEventListener("focusout",j),T.addEventListener("pointermove",P),T.addEventListener("pointerleave",H),window.addEventListener("blur",P),window.addEventListener("focus",M),()=>{T.removeEventListener("focusin",P),T.removeEventListener("focusout",j),T.removeEventListener("pointermove",P),T.removeEventListener("pointerleave",H),window.removeEventListener("blur",P),window.removeEventListener("focus",M)}}},[E,s.isClosePausedRef]);const A=B.useCallback(({tabbingDirection:T})=>{const P=u().map(M=>{const j=M.ref.current,H=[j,...Lj(j)];return T==="forwards"?H:H.reverse()});return(T==="forwards"?P.reverse():P).flat()},[u]);return B.useEffect(()=>{const T=p.current;if(T){const N=P=>{const M=P.altKey||P.ctrlKey||P.metaKey;if(P.key==="Tab"&&!M){const H=document.activeElement,W=P.shiftKey;if(P.target===T&&W){f.current?.focus();return}const D=A({tabbingDirection:W?"backwards":"forwards"}),O=D.findIndex(F=>F===H);rm(D.slice(O+1))?P.preventDefault():W?f.current?.focus():h.current?.focus()}};return T.addEventListener("keydown",N),()=>T.removeEventListener("keydown",N)}},[u,A]),S.jsxs(lj,{ref:c,role:"region","aria-label":i.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&S.jsx(wg,{ref:f,onFocusFromOutsideViewport:()=>{const T=A({tabbingDirection:"forwards"});rm(T)}}),S.jsx(vy.Slot,{scope:t,children:S.jsx(Hi.ol,{tabIndex:-1,...o,ref:v})}),E&&S.jsx(wg,{ref:h,onFocusFromOutsideViewport:()=>{const T=A({tabbingDirection:"backwards"});rm(T)}})]})});D3.displayName=N3;var O3="ToastFocusProxy",wg=B.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,o=Lp(O3,t);return S.jsx(my,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:s=>{const u=s.relatedTarget;!o.viewport?.contains(u)&&r()}})});wg.displayName=O3;var Af="Toast",Tj="toast.swipeStart",Cj="toast.swipeMove",Ij="toast.swipeCancel",Sj="toast.swipeEnd",k3=B.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:o,...s}=n,[u,c]=mj({prop:r,defaultProp:i??!0,onChange:o,caller:Af});return S.jsx(b3,{present:t||u,children:S.jsx(Pj,{open:u,...s,ref:e,onClose:()=>c(!1),onPause:Ia(n.onPause),onResume:Ia(n.onResume),onSwipeStart:Ar(n.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ar(n.onSwipeMove,f=>{const{x:h,y:p}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:Ar(n.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ar(n.onSwipeEnd,f=>{const{x:h,y:p}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),c(!1)})})})});k3.displayName=Af;var[bj,Rj]=R3(Af,{onClose(){}}),Pj=B.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:o,onClose:s,onEscapeKeyDown:u,onPause:c,onResume:f,onSwipeStart:h,onSwipeMove:p,onSwipeCancel:v,onSwipeEnd:y,...E}=n,A=Lp(Af,t),[T,N]=B.useState(null),P=Ta(e,te=>N(te)),M=B.useRef(null),j=B.useRef(null),H=i||A.duration,W=B.useRef(0),R=B.useRef(H),I=B.useRef(0),{onToastAdd:D,onToastRemove:O}=A,F=Ia(()=>{T?.contains(document.activeElement)&&A.viewport?.focus(),s()}),U=B.useCallback(te=>{!te||te===1/0||(window.clearTimeout(I.current),W.current=new Date().getTime(),I.current=window.setTimeout(F,te))},[F]);B.useEffect(()=>{const te=A.viewport;if(te){const Pe=()=>{U(R.current),f?.()},Oe=()=>{const _e=new Date().getTime()-W.current;R.current=R.current-_e,window.clearTimeout(I.current),c?.()};return te.addEventListener(_g,Oe),te.addEventListener(xg,Pe),()=>{te.removeEventListener(_g,Oe),te.removeEventListener(xg,Pe)}}},[A.viewport,H,c,f,U]),B.useEffect(()=>{o&&!A.isClosePausedRef.current&&U(H)},[o,H,A.isClosePausedRef,U]),B.useEffect(()=>(D(),()=>O()),[D,O]);const V=B.useMemo(()=>T?j3(T):null,[T]);return A.viewport?S.jsxs(S.Fragment,{children:[V&&S.jsx(Nj,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:V}),S.jsx(bj,{scope:t,onClose:F,children:Ca.createPortal(S.jsx(vy.ItemSlot,{scope:t,children:S.jsx(uj,{asChild:!0,onEscapeKeyDown:Ar(u,()=>{A.isFocusedToastEscapeKeyDownRef.current||F(),A.isFocusedToastEscapeKeyDownRef.current=!1}),children:S.jsx(Hi.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":A.swipeDirection,...E,ref:P,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Ar(n.onKeyDown,te=>{te.key==="Escape"&&(u?.(te.nativeEvent),te.nativeEvent.defaultPrevented||(A.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:Ar(n.onPointerDown,te=>{te.button===0&&(M.current={x:te.clientX,y:te.clientY})}),onPointerMove:Ar(n.onPointerMove,te=>{if(!M.current)return;const Pe=te.clientX-M.current.x,Oe=te.clientY-M.current.y,_e=!!j.current,Z=["left","right"].includes(A.swipeDirection),me=["left","up"].includes(A.swipeDirection)?Math.min:Math.max,de=Z?me(0,Pe):0,q=Z?0:me(0,Oe),oe=te.pointerType==="touch"?10:2,xe={x:de,y:q},Ie={originalEvent:te,delta:xe};_e?(j.current=xe,od(Cj,p,Ie,{discrete:!1})):bA(xe,A.swipeDirection,oe)?(j.current=xe,od(Tj,h,Ie,{discrete:!1}),te.target.setPointerCapture(te.pointerId)):(Math.abs(Pe)>oe||Math.abs(Oe)>oe)&&(M.current=null)}),onPointerUp:Ar(n.onPointerUp,te=>{const Pe=j.current,Oe=te.target;if(Oe.hasPointerCapture(te.pointerId)&&Oe.releasePointerCapture(te.pointerId),j.current=null,M.current=null,Pe){const _e=te.currentTarget,Z={originalEvent:te,delta:Pe};bA(Pe,A.swipeDirection,A.swipeThreshold)?od(Sj,y,Z,{discrete:!0}):od(Ij,v,Z,{discrete:!0}),_e.addEventListener("click",me=>me.preventDefault(),{once:!0})}})})})}),A.viewport)})]}):null}),Nj=n=>{const{__scopeToast:e,children:t,...r}=n,i=Lp(Af,e),[o,s]=B.useState(!1),[u,c]=B.useState(!1);return kj(()=>s(!0)),B.useEffect(()=>{const f=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(f)},[]),u?null:S.jsx(S3,{asChild:!0,children:S.jsx(my,{...r,children:o&&S.jsxs(S.Fragment,{children:[i.label," ",t]})})})},Dj="ToastTitle",M3=B.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return S.jsx(Hi.div,{...r,ref:e})});M3.displayName=Dj;var Oj="ToastDescription",L3=B.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return S.jsx(Hi.div,{...r,ref:e})});L3.displayName=Oj;var V3="ToastAction",F3=B.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?S.jsx(U3,{altText:t,asChild:!0,children:S.jsx(yy,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${V3}\`. Expected non-empty \`string\`.`),null)});F3.displayName=V3;var B3="ToastClose",yy=B.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=Rj(B3,t);return S.jsx(U3,{asChild:!0,children:S.jsx(Hi.button,{type:"button",...r,ref:e,onClick:Ar(n.onClick,i.onClose)})})});yy.displayName=B3;var U3=B.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return S.jsx(Hi.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function j3(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Mj(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const s=r.dataset.radixToastAnnounceAlt;s&&e.push(s)}else e.push(...j3(r))}}),e}function od(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,o=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?E3(i,o):i.dispatchEvent(o)}var bA=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),o=r>i;return e==="left"||e==="right"?o&&r>t:!o&&i>t};function kj(n=()=>{}){const e=Ia(n);ef(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function Mj(n){return n.nodeType===n.ELEMENT_NODE}function Lj(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function rm(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var Vj=P3,z3=D3,H3=k3,G3=M3,W3=L3,$3=F3,q3=yy;const Fj=Vj,K3=B.forwardRef(({className:n,...e},t)=>S.jsx(z3,{ref:t,className:bs("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));K3.displayName=z3.displayName;const Bj=KS("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),X3=B.forwardRef(({className:n,variant:e,...t},r)=>S.jsx(H3,{ref:r,className:bs(Bj({variant:e}),n),...t}));X3.displayName=H3.displayName;const Uj=B.forwardRef(({className:n,...e},t)=>S.jsx($3,{ref:t,className:bs("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));Uj.displayName=$3.displayName;const Y3=B.forwardRef(({className:n,...e},t)=>S.jsx(q3,{ref:t,className:bs("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:S.jsx(GS,{className:"h-4 w-4"})}));Y3.displayName=q3.displayName;const Q3=B.forwardRef(({className:n,...e},t)=>S.jsx(G3,{ref:t,className:bs("text-sm font-semibold",n),...e}));Q3.displayName=G3.displayName;const Z3=B.forwardRef(({className:n,...e},t)=>S.jsx(W3,{ref:t,className:bs("text-sm opacity-90",n),...e}));Z3.displayName=W3.displayName;function jj(){const{toasts:n}=Dp();return S.jsxs(Fj,{children:[n.map(function({id:e,title:t,description:r,action:i,...o}){return S.jsxs(X3,{...o,children:[S.jsxs("div",{className:"grid gap-1",children:[t&&S.jsx(Q3,{children:t}),r&&S.jsx(Z3,{children:r})]}),i,S.jsx(Y3,{})]},e)}),S.jsx(K3,{})]})}function zj(){const[n,e]=B.useState(null),[t,r]=B.useState(!1),[i,o]=B.useState("certs");return B.useEffect(()=>{if(!bu||!Fu){r(!0);return}try{const s=WO(Fu,u=>{e(u),r(!0)});return()=>s()}catch(s){console.error("No se pudo suscribir a onAuthStateChanged:",s),r(!0)}},[]),S.jsx(LA,{children:S.jsxs("div",{className:"bg-boreal-dark text-white min-h-screen flex flex-col",style:{fontFamily:"'Montserrat', sans-serif"},children:[S.jsxs(Tg,{children:[S.jsx("title",{children:"Boreal Wallet"}),S.jsx("link",{rel:"icon",type:"image/png",href:QU}),S.jsx("style",{children:`
            :root {
              --boreal-dark: #010b1d;
              --boreal-aqua: #69e6af;
              --boreal-purple: #be58f0;
              --boreal-blue: #3162ed;
            }
          `})]}),S.jsx(H7,{user:n,activeTab:i,onNavigate:s=>o(s)}),S.jsx("main",{className:"flex-grow flex flex-col items-center w-full",children:S.jsxs(ip,{mode:"wait",children:[!bu&&S.jsx(Tr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-grow flex items-center justify-center p-6",children:S.jsxs("div",{className:"max-w-lg text-center space-y-3",children:[S.jsx("h2",{className:"text-xl font-bold",children:"Configura Firebase"}),S.jsxs("p",{className:"text-white/80",children:["Faltan variables de entorno. Crea un archivo ",S.jsx("code",{children:".env"})," en la raz con las claves",S.jsx("code",{children:" VITE_FIREBASE_API_KEY, VITE_FIREBASE_AUTH_DOMAIN, VITE_FIREBASE_PROJECT_ID, VITE_FIREBASE_STORAGE_BUCKET, VITE_FIREBASE_MESSAGING_SENDER_ID, VITE_FIREBASE_APP_ID"}),"."]}),S.jsx("p",{className:"text-white/60",children:"Tras guardarlo, reinicia el servidor de desarrollo."})]})},"config-warning"),!t&&S.jsx(Tr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-grow flex items-center justify-center",children:S.jsx(Jc,{className:"w-12 h-12 text-boreal-aqua animate-spin"})},"loader"),t&&bu&&!n&&S.jsx(FL,{},"login"),t&&bu&&n&&S.jsx(YU,{user:n,activeTab:i,onNavigateTab:s=>o(s)},"wallet")]})}),S.jsx(G7,{}),S.jsx(jj,{})]})})}mb.createRoot(document.getElementById("root")).render(S.jsx(Rn.StrictMode,{children:S.jsx(zj,{})}));
