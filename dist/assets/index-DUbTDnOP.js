function P4(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function Bu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var V0={exports:{}},$l={},B0={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i2;function b4(){if(i2)return We;i2=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function v(K){return K===null||typeof K!="object"?null:(K=p&&K[p]||K["@@iterator"],typeof K=="function"?K:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,T={};function C(K,re,xe){this.props=K,this.context=re,this.refs=T,this.updater=xe||y}C.prototype.isReactComponent={},C.prototype.setState=function(K,re){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,re,"setState")},C.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function b(){}b.prototype=C.prototype;function P(K,re,xe){this.props=K,this.context=re,this.refs=T,this.updater=xe||y}var D=P.prototype=new b;D.constructor=P,E(D,C.prototype),D.isPureReactComponent=!0;var F=Array.isArray,j=Object.prototype.hasOwnProperty,W={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(K,re,xe){var Ie,Ue={},ze=null,Ne=null;if(re!=null)for(Ie in re.ref!==void 0&&(Ne=re.ref),re.key!==void 0&&(ze=""+re.key),re)j.call(re,Ie)&&!R.hasOwnProperty(Ie)&&(Ue[Ie]=re[Ie]);var Ke=arguments.length-2;if(Ke===1)Ue.children=xe;else if(1<Ke){for(var rt=Array(Ke),jt=0;jt<Ke;jt++)rt[jt]=arguments[jt+2];Ue.children=rt}if(K&&K.defaultProps)for(Ie in Ke=K.defaultProps,Ke)Ue[Ie]===void 0&&(Ue[Ie]=Ke[Ie]);return{$$typeof:n,type:K,key:ze,ref:Ne,props:Ue,_owner:W.current}}function O(K,re){return{$$typeof:n,type:K.type,key:re,ref:K.ref,props:K.props,_owner:K._owner}}function M(K){return typeof K=="object"&&K!==null&&K.$$typeof===n}function B(K){var re={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(xe){return re[xe]})}var z=/\/+/g;function L(K,re){return typeof K=="object"&&K!==null&&K.key!=null?B(""+K.key):re.toString(36)}function fe(K,re,xe,Ie,Ue){var ze=typeof K;(ze==="undefined"||ze==="boolean")&&(K=null);var Ne=!1;if(K===null)Ne=!0;else switch(ze){case"string":case"number":Ne=!0;break;case"object":switch(K.$$typeof){case n:case e:Ne=!0}}if(Ne)return Ne=K,Ue=Ue(Ne),K=Ie===""?"."+L(Ne,0):Ie,F(Ue)?(xe="",K!=null&&(xe=K.replace(z,"$&/")+"/"),fe(Ue,re,xe,"",function(jt){return jt})):Ue!=null&&(M(Ue)&&(Ue=O(Ue,xe+(!Ue.key||Ne&&Ne.key===Ue.key?"":(""+Ue.key).replace(z,"$&/")+"/")+K)),re.push(Ue)),1;if(Ne=0,Ie=Ie===""?".":Ie+":",F(K))for(var Ke=0;Ke<K.length;Ke++){ze=K[Ke];var rt=Ie+L(ze,Ke);Ne+=fe(ze,re,xe,rt,Ue)}else if(rt=v(K),typeof rt=="function")for(K=rt.call(K),Ke=0;!(ze=K.next()).done;)ze=ze.value,rt=Ie+L(ze,Ke++),Ne+=fe(ze,re,xe,rt,Ue);else if(ze==="object")throw re=String(K),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.");return Ne}function Le(K,re,xe){if(K==null)return K;var Ie=[],Ue=0;return fe(K,Ie,"","",function(ze){return re.call(xe,ze,Ue++)}),Ie}function je(K){if(K._status===-1){var re=K._result;re=re(),re.then(function(xe){(K._status===0||K._status===-1)&&(K._status=1,K._result=xe)},function(xe){(K._status===0||K._status===-1)&&(K._status=2,K._result=xe)}),K._status===-1&&(K._status=0,K._result=re)}if(K._status===1)return K._result.default;throw K._result}var Te={current:null},Z={transition:null},pe={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:Z,ReactCurrentOwner:W};function he(){throw Error("act(...) is not supported in production builds of React.")}return We.Children={map:Le,forEach:function(K,re,xe){Le(K,function(){re.apply(this,arguments)},xe)},count:function(K){var re=0;return Le(K,function(){re++}),re},toArray:function(K){return Le(K,function(re){return re})||[]},only:function(K){if(!M(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},We.Component=C,We.Fragment=t,We.Profiler=i,We.PureComponent=P,We.StrictMode=r,We.Suspense=c,We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,We.act=he,We.cloneElement=function(K,re,xe){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var Ie=E({},K.props),Ue=K.key,ze=K.ref,Ne=K._owner;if(re!=null){if(re.ref!==void 0&&(ze=re.ref,Ne=W.current),re.key!==void 0&&(Ue=""+re.key),K.type&&K.type.defaultProps)var Ke=K.type.defaultProps;for(rt in re)j.call(re,rt)&&!R.hasOwnProperty(rt)&&(Ie[rt]=re[rt]===void 0&&Ke!==void 0?Ke[rt]:re[rt])}var rt=arguments.length-2;if(rt===1)Ie.children=xe;else if(1<rt){Ke=Array(rt);for(var jt=0;jt<rt;jt++)Ke[jt]=arguments[jt+2];Ie.children=Ke}return{$$typeof:n,type:K.type,key:Ue,ref:ze,props:Ie,_owner:Ne}},We.createContext=function(K){return K={$$typeof:s,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:o,_context:K},K.Consumer=K},We.createElement=I,We.createFactory=function(K){var re=I.bind(null,K);return re.type=K,re},We.createRef=function(){return{current:null}},We.forwardRef=function(K){return{$$typeof:u,render:K}},We.isValidElement=M,We.lazy=function(K){return{$$typeof:d,_payload:{_status:-1,_result:K},_init:je}},We.memo=function(K,re){return{$$typeof:f,type:K,compare:re===void 0?null:re}},We.startTransition=function(K){var re=Z.transition;Z.transition={};try{K()}finally{Z.transition=re}},We.unstable_act=he,We.useCallback=function(K,re){return Te.current.useCallback(K,re)},We.useContext=function(K){return Te.current.useContext(K)},We.useDebugValue=function(){},We.useDeferredValue=function(K){return Te.current.useDeferredValue(K)},We.useEffect=function(K,re){return Te.current.useEffect(K,re)},We.useId=function(){return Te.current.useId()},We.useImperativeHandle=function(K,re,xe){return Te.current.useImperativeHandle(K,re,xe)},We.useInsertionEffect=function(K,re){return Te.current.useInsertionEffect(K,re)},We.useLayoutEffect=function(K,re){return Te.current.useLayoutEffect(K,re)},We.useMemo=function(K,re){return Te.current.useMemo(K,re)},We.useReducer=function(K,re,xe){return Te.current.useReducer(K,re,xe)},We.useRef=function(K){return Te.current.useRef(K)},We.useState=function(K){return Te.current.useState(K)},We.useSyncExternalStore=function(K,re,xe){return Te.current.useSyncExternalStore(K,re,xe)},We.useTransition=function(){return Te.current.useTransition()},We.version="18.3.1",We}var o2;function nm(){return o2||(o2=1,B0.exports=b4()),B0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s2;function D4(){if(s2)return $l;s2=1;var n=nm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(u,c,f){var d,p={},v=null,y=null;f!==void 0&&(v=""+f),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(y=c.ref);for(d in c)r.call(c,d)&&!o.hasOwnProperty(d)&&(p[d]=c[d]);if(u&&u.defaultProps)for(d in c=u.defaultProps,c)p[d]===void 0&&(p[d]=c[d]);return{$$typeof:e,type:u,key:v,ref:y,props:p,_owner:i.current}}return $l.Fragment=t,$l.jsx=s,$l.jsxs=s,$l}var a2;function O4(){return a2||(a2=1,V0.exports=D4()),V0.exports}var G=O4(),U=nm();const Tn=Bu(U),N4=P4({__proto__:null,default:Tn},[U]);var Ih={},U0={exports:{}},Yn={},j0={exports:{}},z0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u2;function k4(){return u2||(u2=1,(function(n){function e(Z,pe){var he=Z.length;Z.push(pe);e:for(;0<he;){var K=he-1>>>1,re=Z[K];if(0<i(re,pe))Z[K]=pe,Z[he]=re,he=K;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var pe=Z[0],he=Z.pop();if(he!==pe){Z[0]=he;e:for(var K=0,re=Z.length,xe=re>>>1;K<xe;){var Ie=2*(K+1)-1,Ue=Z[Ie],ze=Ie+1,Ne=Z[ze];if(0>i(Ue,he))ze<re&&0>i(Ne,Ue)?(Z[K]=Ne,Z[ze]=he,K=ze):(Z[K]=Ue,Z[Ie]=he,K=Ie);else if(ze<re&&0>i(Ne,he))Z[K]=Ne,Z[ze]=he,K=ze;else break e}}return pe}function i(Z,pe){var he=Z.sortIndex-pe.sortIndex;return he!==0?he:Z.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();n.unstable_now=function(){return s.now()-u}}var c=[],f=[],d=1,p=null,v=3,y=!1,E=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(Z){for(var pe=t(f);pe!==null;){if(pe.callback===null)r(f);else if(pe.startTime<=Z)r(f),pe.sortIndex=pe.expirationTime,e(c,pe);else break;pe=t(f)}}function F(Z){if(T=!1,D(Z),!E)if(t(c)!==null)E=!0,je(j);else{var pe=t(f);pe!==null&&Te(F,pe.startTime-Z)}}function j(Z,pe){E=!1,T&&(T=!1,b(I),I=-1),y=!0;var he=v;try{for(D(pe),p=t(c);p!==null&&(!(p.expirationTime>pe)||Z&&!B());){var K=p.callback;if(typeof K=="function"){p.callback=null,v=p.priorityLevel;var re=K(p.expirationTime<=pe);pe=n.unstable_now(),typeof re=="function"?p.callback=re:p===t(c)&&r(c),D(pe)}else r(c);p=t(c)}if(p!==null)var xe=!0;else{var Ie=t(f);Ie!==null&&Te(F,Ie.startTime-pe),xe=!1}return xe}finally{p=null,v=he,y=!1}}var W=!1,R=null,I=-1,O=5,M=-1;function B(){return!(n.unstable_now()-M<O)}function z(){if(R!==null){var Z=n.unstable_now();M=Z;var pe=!0;try{pe=R(!0,Z)}finally{pe?L():(W=!1,R=null)}}else W=!1}var L;if(typeof P=="function")L=function(){P(z)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Le=fe.port2;fe.port1.onmessage=z,L=function(){Le.postMessage(null)}}else L=function(){C(z,0)};function je(Z){R=Z,W||(W=!0,L())}function Te(Z,pe){I=C(function(){Z(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){E||y||(E=!0,je(j))},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(Z){switch(v){case 1:case 2:case 3:var pe=3;break;default:pe=v}var he=v;v=pe;try{return Z()}finally{v=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,pe){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var he=v;v=Z;try{return pe()}finally{v=he}},n.unstable_scheduleCallback=function(Z,pe,he){var K=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?K+he:K):he=K,Z){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=he+re,Z={id:d++,callback:pe,priorityLevel:Z,startTime:he,expirationTime:re,sortIndex:-1},he>K?(Z.sortIndex=he,e(f,Z),t(c)===null&&Z===t(f)&&(T?(b(I),I=-1):T=!0,Te(F,he-K))):(Z.sortIndex=re,e(c,Z),E||y||(E=!0,je(j))),Z},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(Z){var pe=v;return function(){var he=v;v=pe;try{return Z.apply(this,arguments)}finally{v=he}}}})(z0)),z0}var l2;function M4(){return l2||(l2=1,j0.exports=k4()),j0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c2;function L4(){if(c2)return Yn;c2=1;var n=nm(),e=M4();function t(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(a,l){s(a,l),s(a+"Capture",l)}function s(a,l){for(i[a]=l,a=0;a<l.length;a++)r.add(l[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(a){return c.call(p,a)?!0:c.call(d,a)?!1:f.test(a)?p[a]=!0:(d[a]=!0,!1)}function y(a,l,h,m){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return m?!1:h!==null?!h.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function E(a,l,h,m){if(l===null||typeof l>"u"||y(a,l,h,m))return!0;if(m)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function T(a,l,h,m,_,w,S){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=m,this.attributeNamespace=_,this.mustUseProperty=h,this.propertyName=a,this.type=l,this.sanitizeURL=w,this.removeEmptyString=S}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){C[a]=new T(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];C[l]=new T(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){C[a]=new T(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){C[a]=new T(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){C[a]=new T(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){C[a]=new T(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){C[a]=new T(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){C[a]=new T(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){C[a]=new T(a,5,!1,a.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function P(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(b,P);C[l]=new T(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(b,P);C[l]=new T(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(b,P);C[l]=new T(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){C[a]=new T(a,1,!1,a.toLowerCase(),null,!1,!1)}),C.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){C[a]=new T(a,1,!1,a.toLowerCase(),null,!0,!0)});function D(a,l,h,m){var _=C.hasOwnProperty(l)?C[l]:null;(_!==null?_.type!==0:m||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(E(l,h,_,m)&&(h=null),m||_===null?v(l)&&(h===null?a.removeAttribute(l):a.setAttribute(l,""+h)):_.mustUseProperty?a[_.propertyName]=h===null?_.type===3?!1:"":h:(l=_.attributeName,m=_.attributeNamespace,h===null?a.removeAttribute(l):(_=_.type,h=_===3||_===4&&h===!0?"":""+h,m?a.setAttributeNS(m,l,h):a.setAttribute(l,h))))}var F=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),W=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),B=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),Le=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),Z=Symbol.iterator;function pe(a){return a===null||typeof a!="object"?null:(a=Z&&a[Z]||a["@@iterator"],typeof a=="function"?a:null)}var he=Object.assign,K;function re(a){if(K===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);K=l&&l[1]||""}return`
`+K+a}var xe=!1;function Ie(a,l){if(!a||xe)return"";xe=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(J){var m=J}Reflect.construct(a,[],l)}else{try{l.call()}catch(J){m=J}a.call(l.prototype)}else{try{throw Error()}catch(J){m=J}a()}}catch(J){if(J&&m&&typeof J.stack=="string"){for(var _=J.stack.split(`
`),w=m.stack.split(`
`),S=_.length-1,V=w.length-1;1<=S&&0<=V&&_[S]!==w[V];)V--;for(;1<=S&&0<=V;S--,V--)if(_[S]!==w[V]){if(S!==1||V!==1)do if(S--,V--,0>V||_[S]!==w[V]){var H=`
`+_[S].replace(" at new "," at ");return a.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",a.displayName)),H}while(1<=S&&0<=V);break}}}finally{xe=!1,Error.prepareStackTrace=h}return(a=a?a.displayName||a.name:"")?re(a):""}function Ue(a){switch(a.tag){case 5:return re(a.type);case 16:return re("Lazy");case 13:return re("Suspense");case 19:return re("SuspenseList");case 0:case 2:case 15:return a=Ie(a.type,!1),a;case 11:return a=Ie(a.type.render,!1),a;case 1:return a=Ie(a.type,!0),a;default:return""}}function ze(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case R:return"Fragment";case W:return"Portal";case O:return"Profiler";case I:return"StrictMode";case L:return"Suspense";case fe:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case B:return(a.displayName||"Context")+".Consumer";case M:return(a._context.displayName||"Context")+".Provider";case z:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Le:return l=a.displayName||null,l!==null?l:ze(a.type)||"Memo";case je:l=a._payload,a=a._init;try{return ze(a(l))}catch{}}return null}function Ne(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ze(l);case 8:return l===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ke(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function rt(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function jt(a){var l=rt(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),m=""+a[l];if(!a.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,w=h.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return _.call(this)},set:function(S){m=""+S,w.call(this,S)}}),Object.defineProperty(a,l,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(S){m=""+S},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Jr(a){a._valueTracker||(a._valueTracker=jt(a))}function ei(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var h=l.getValue(),m="";return a&&(m=rt(a)?a.checked?"true":"false":a.value),a=m,a!==h?(l.setValue(a),!0):!1}function ao(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function ga(a,l){var h=l.checked;return he({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??a._wrapperState.initialChecked})}function ff(a,l){var h=l.defaultValue==null?"":l.defaultValue,m=l.checked!=null?l.checked:l.defaultChecked;h=Ke(l.value!=null?l.value:h),a._wrapperState={initialChecked:m,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function ma(a,l){l=l.checked,l!=null&&D(a,"checked",l,!1)}function gs(a,l){ma(a,l);var h=Ke(l.value),m=l.type;if(h!=null)m==="number"?(h===0&&a.value===""||a.value!=h)&&(a.value=""+h):a.value!==""+h&&(a.value=""+h);else if(m==="submit"||m==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?zt(a,l.type,h):l.hasOwnProperty("defaultValue")&&zt(a,l.type,Ke(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function Ju(a,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var m=l.type;if(!(m!=="submit"&&m!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,h||l===a.value||(a.value=l),a.defaultValue=l}h=a.name,h!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,h!==""&&(a.name=h)}function zt(a,l,h){(l!=="number"||ao(a.ownerDocument)!==a)&&(h==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+h&&(a.defaultValue=""+h))}var kt=Array.isArray;function Nr(a,l,h,m){if(a=a.options,l){l={};for(var _=0;_<h.length;_++)l["$"+h[_]]=!0;for(h=0;h<a.length;h++)_=l.hasOwnProperty("$"+a[h].value),a[h].selected!==_&&(a[h].selected=_),_&&m&&(a[h].defaultSelected=!0)}else{for(h=""+Ke(h),l=null,_=0;_<a.length;_++){if(a[_].value===h){a[_].selected=!0,m&&(a[_].defaultSelected=!0);return}l!==null||a[_].disabled||(l=a[_])}l!==null&&(l.selected=!0)}}function el(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return he({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function tl(a,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(t(92));if(kt(h)){if(1<h.length)throw Error(t(93));h=h[0]}l=h}l==null&&(l=""),h=l}a._wrapperState={initialValue:Ke(h)}}function hf(a,l){var h=Ke(l.value),m=Ke(l.defaultValue);h!=null&&(h=""+h,h!==a.value&&(a.value=h),l.defaultValue==null&&a.defaultValue!==h&&(a.defaultValue=h)),m!=null&&(a.defaultValue=""+m)}function uo(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function nl(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function va(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?nl(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var lo,df=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,m,_){MSApp.execUnsafeLocalFunction(function(){return a(l,h,m,_)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(lo=lo||document.createElement("div"),lo.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=lo.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function ms(a,l){if(l){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=l;return}}a.textContent=l}var co={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pf=["Webkit","ms","Moz","O"];Object.keys(co).forEach(function(a){pf.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),co[l]=co[a]})});function fo(a,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||co.hasOwnProperty(a)&&co[a]?(""+l).trim():l+"px"}function ya(a,l){a=a.style;for(var h in l)if(l.hasOwnProperty(h)){var m=h.indexOf("--")===0,_=fo(h,l[h],m);h==="float"&&(h="cssFloat"),m?a.setProperty(h,_):a[h]=_}}var rl=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kr(a,l){if(l){if(rl[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function _a(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ho=null;function wa(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Oi=null,Ni=null,Dt=null;function il(a){if(a=Dl(a)){if(typeof Oi!="function")throw Error(t(280));var l=a.stateNode;l&&(l=jf(l),Oi(a.stateNode,a.type,l))}}function po(a){Ni?Dt?Dt.push(a):Dt=[a]:Ni=a}function go(){if(Ni){var a=Ni,l=Dt;if(Dt=Ni=null,il(a),l)for(a=0;a<l.length;a++)il(l[a])}}function gf(a,l){return a(l)}function mf(){}var ti=!1;function vf(a,l,h){if(ti)return a(l,h);ti=!0;try{return gf(a,l,h)}finally{ti=!1,(Ni!==null||Dt!==null)&&(mf(),go())}}function vs(a,l){var h=a.stateNode;if(h===null)return null;var m=jf(h);if(m===null)return null;h=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(t(231,l,typeof h));return h}var mo=!1;if(u)try{var vo={};Object.defineProperty(vo,"passive",{get:function(){mo=!0}}),window.addEventListener("test",vo,vo),window.removeEventListener("test",vo,vo)}catch{mo=!1}function yf(a,l,h,m,_,w,S,V,H){var J=Array.prototype.slice.call(arguments,3);try{l.apply(h,J)}catch(se){this.onError(se)}}var ki=!1,ni=null,xa=!1,pr=null,_f={onError:function(a){ki=!0,ni=a}};function wf(a,l,h,m,_,w,S,V,H){ki=!1,ni=null,yf.apply(_f,arguments)}function ol(a,l,h,m,_,w,S,V,H){if(wf.apply(this,arguments),ki){if(ki){var J=ni;ki=!1,ni=null}else throw Error(t(198));xa||(xa=!0,pr=J)}}function Mr(a){var l=a,h=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(h=l.return),a=l.return;while(a)}return l.tag===3?h:null}function sl(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function xf(a){if(Mr(a)!==a)throw Error(t(188))}function Ef(a){var l=a.alternate;if(!l){if(l=Mr(a),l===null)throw Error(t(188));return l!==a?null:a}for(var h=a,m=l;;){var _=h.return;if(_===null)break;var w=_.alternate;if(w===null){if(m=_.return,m!==null){h=m;continue}break}if(_.child===w.child){for(w=_.child;w;){if(w===h)return xf(_),a;if(w===m)return xf(_),l;w=w.sibling}throw Error(t(188))}if(h.return!==m.return)h=_,m=w;else{for(var S=!1,V=_.child;V;){if(V===h){S=!0,h=_,m=w;break}if(V===m){S=!0,m=_,h=w;break}V=V.sibling}if(!S){for(V=w.child;V;){if(V===h){S=!0,h=w,m=_;break}if(V===m){S=!0,m=w,h=_;break}V=V.sibling}if(!S)throw Error(t(189))}}if(h.alternate!==m)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?a:l}function Af(a){return a=Ef(a),a!==null?ys(a):null}function ys(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=ys(a);if(l!==null)return l;a=a.sibling}return null}var al=e.unstable_scheduleCallback,Ea=e.unstable_cancelCallback,_s=e.unstable_shouldYield,Mi=e.unstable_requestPaint,_t=e.unstable_now,gp=e.unstable_getCurrentPriorityLevel,Aa=e.unstable_ImmediatePriority,ul=e.unstable_UserBlockingPriority,ws=e.unstable_NormalPriority,ll=e.unstable_LowPriority,Ta=e.unstable_IdlePriority,xs=null,rr=null;function Tf(a){if(rr&&typeof rr.onCommitFiberRoot=="function")try{rr.onCommitFiberRoot(xs,a,void 0,(a.current.flags&128)===128)}catch{}}var ir=Math.clz32?Math.clz32:Es,ri=Math.log,gr=Math.LN2;function Es(a){return a>>>=0,a===0?32:31-(ri(a)/gr|0)|0}var ii=64,yo=4194304;function st(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Li(a,l){var h=a.pendingLanes;if(h===0)return 0;var m=0,_=a.suspendedLanes,w=a.pingedLanes,S=h&268435455;if(S!==0){var V=S&~_;V!==0?m=st(V):(w&=S,w!==0&&(m=st(w)))}else S=h&~_,S!==0?m=st(S):w!==0&&(m=st(w));if(m===0)return 0;if(l!==0&&l!==m&&(l&_)===0&&(_=m&-m,w=l&-l,_>=w||_===16&&(w&4194240)!==0))return l;if((m&4)!==0&&(m|=h&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=m;0<l;)h=31-ir(l),_=1<<h,m|=a[h],l&=~_;return m}function As(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ts(a,l){for(var h=a.suspendedLanes,m=a.pingedLanes,_=a.expirationTimes,w=a.pendingLanes;0<w;){var S=31-ir(w),V=1<<S,H=_[S];H===-1?((V&h)===0||(V&m)!==0)&&(_[S]=As(V,l)):H<=l&&(a.expiredLanes|=V),w&=~V}}function cl(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function fl(){var a=ii;return ii<<=1,(ii&4194240)===0&&(ii=64),a}function hl(a){for(var l=[],h=0;31>h;h++)l.push(a);return l}function Cs(a,l,h){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-ir(l),a[l]=h}function mp(a,l){var h=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var m=a.eventTimes;for(a=a.expirationTimes;0<h;){var _=31-ir(h),w=1<<_;l[_]=0,m[_]=-1,a[_]=-1,h&=~w}}function dl(a,l){var h=a.entangledLanes|=l;for(a=a.entanglements;h;){var m=31-ir(h),_=1<<m;_&l|a[m]&l&&(a[m]|=l),h&=~_}}var Ye=0;function oi(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var pl,Ca,gl,ml,vl,si=!1,Ia=[],ai=null,ui=null,mn=null,Is=new Map,Fi=new Map,or=[],Cf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _o(a,l){switch(a){case"focusin":case"focusout":ai=null;break;case"dragenter":case"dragleave":ui=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":Is.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fi.delete(l.pointerId)}}function Lr(a,l,h,m,_,w){return a===null||a.nativeEvent!==w?(a={blockedOn:l,domEventName:h,eventSystemFlags:m,nativeEvent:w,targetContainers:[_]},l!==null&&(l=Dl(l),l!==null&&Ca(l)),a):(a.eventSystemFlags|=m,l=a.targetContainers,_!==null&&l.indexOf(_)===-1&&l.push(_),a)}function If(a,l,h,m,_){switch(l){case"focusin":return ai=Lr(ai,a,l,h,m,_),!0;case"dragenter":return ui=Lr(ui,a,l,h,m,_),!0;case"mouseover":return mn=Lr(mn,a,l,h,m,_),!0;case"pointerover":var w=_.pointerId;return Is.set(w,Lr(Is.get(w)||null,a,l,h,m,_)),!0;case"gotpointercapture":return w=_.pointerId,Fi.set(w,Lr(Fi.get(w)||null,a,l,h,m,_)),!0}return!1}function Sa(a){var l=bs(a.target);if(l!==null){var h=Mr(l);if(h!==null){if(l=h.tag,l===13){if(l=sl(h),l!==null){a.blockedOn=l,vl(a.priority,function(){gl(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function gt(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var h=Ra(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(h===null){h=a.nativeEvent;var m=new h.constructor(h.type,h);ho=m,h.target.dispatchEvent(m),ho=null}else return l=Dl(h),l!==null&&Ca(l),a.blockedOn=h,!1;l.shift()}return!0}function Sf(a,l,h){gt(a)&&h.delete(l)}function vp(){si=!1,ai!==null&&gt(ai)&&(ai=null),ui!==null&&gt(ui)&&(ui=null),mn!==null&&gt(mn)&&(mn=null),Is.forEach(Sf),Fi.forEach(Sf)}function wo(a,l){a.blockedOn===l&&(a.blockedOn=null,si||(si=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vp)))}function xo(a){function l(_){return wo(_,a)}if(0<Ia.length){wo(Ia[0],a);for(var h=1;h<Ia.length;h++){var m=Ia[h];m.blockedOn===a&&(m.blockedOn=null)}}for(ai!==null&&wo(ai,a),ui!==null&&wo(ui,a),mn!==null&&wo(mn,a),Is.forEach(l),Fi.forEach(l),h=0;h<or.length;h++)m=or[h],m.blockedOn===a&&(m.blockedOn=null);for(;0<or.length&&(h=or[0],h.blockedOn===null);)Sa(h),h.blockedOn===null&&or.shift()}var Vi=F.ReactCurrentBatchConfig,Bi=!0;function li(a,l,h,m){var _=Ye,w=Vi.transition;Vi.transition=null;try{Ye=1,yl(a,l,h,m)}finally{Ye=_,Vi.transition=w}}function Rf(a,l,h,m){var _=Ye,w=Vi.transition;Vi.transition=null;try{Ye=4,yl(a,l,h,m)}finally{Ye=_,Vi.transition=w}}function yl(a,l,h,m){if(Bi){var _=Ra(a,l,h,m);if(_===null)Rp(a,l,m,ci,h),_o(a,m);else if(If(_,a,l,h,m))m.stopPropagation();else if(_o(a,m),l&4&&-1<Cf.indexOf(a)){for(;_!==null;){var w=Dl(_);if(w!==null&&pl(w),w=Ra(a,l,h,m),w===null&&Rp(a,l,m,ci,h),w===_)break;_=w}_!==null&&m.stopPropagation()}else Rp(a,l,m,null,h)}}var ci=null;function Ra(a,l,h,m){if(ci=null,a=wa(m),a=bs(a),a!==null)if(l=Mr(a),l===null)a=null;else if(h=l.tag,h===13){if(a=sl(l),a!==null)return a;a=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return ci=a,null}function Pa(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gp()){case Aa:return 1;case ul:return 4;case ws:case ll:return 16;case Ta:return 536870912;default:return 16}default:return 16}}var sr=null,ba=null,Ui=null;function Pf(){if(Ui)return Ui;var a,l=ba,h=l.length,m,_="value"in sr?sr.value:sr.textContent,w=_.length;for(a=0;a<h&&l[a]===_[a];a++);var S=h-a;for(m=1;m<=S&&l[h-m]===_[w-m];m++);return Ui=_.slice(a,1<m?1-m:void 0)}function Ss(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function fi(){return!0}function _l(){return!1}function Sn(a){function l(h,m,_,w,S){this._reactName=h,this._targetInst=_,this.type=m,this.nativeEvent=w,this.target=S,this.currentTarget=null;for(var V in a)a.hasOwnProperty(V)&&(h=a[V],this[V]=h?h(w):w[V]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?fi:_l,this.isPropagationStopped=_l,this}return he(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=fi)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=fi)},persist:function(){},isPersistent:fi}),l}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rs=Sn(hi),Eo=he({},hi,{view:0,detail:0}),Da=Sn(Eo),Oa,Na,ar,Ps=he({},Eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Be,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ar&&(ar&&a.type==="mousemove"?(Oa=a.screenX-ar.screenX,Na=a.screenY-ar.screenY):Na=Oa=0,ar=a),Oa)},movementY:function(a){return"movementY"in a?a.movementY:Na}}),wl=Sn(Ps),bf=he({},Ps,{dataTransfer:0}),Df=Sn(bf),ka=he({},Eo,{relatedTarget:0}),vn=Sn(ka),Of=he({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Nf=Sn(Of),Ao=he({},hi,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),g=Sn(Ao),x=he({},hi,{data:0}),A=Sn(x),N={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function le(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=ee[a])?!!l[a]:!1}function Be(){return le}var Mt=he({},Eo,{key:function(a){if(a.key){var l=N[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Ss(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?X[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Be,charCode:function(a){return a.type==="keypress"?Ss(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Ss(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ct=Sn(Mt),Ht=he({},Ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ur=Sn(Ht),ji=he({},Eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Be}),di=Sn(ji),pi=he({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ma=Sn(pi),xl=he({},Ps,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),A3=Sn(xl),T3=[9,13,27,32],yp=u&&"CompositionEvent"in window,El=null;u&&"documentMode"in document&&(El=document.documentMode);var C3=u&&"TextEvent"in window&&!El,Yv=u&&(!yp||El&&8<El&&11>=El),Qv=" ",Zv=!1;function Jv(a,l){switch(a){case"keyup":return T3.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ey(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var La=!1;function I3(a,l){switch(a){case"compositionend":return ey(l);case"keypress":return l.which!==32?null:(Zv=!0,Qv);case"textInput":return a=l.data,a===Qv&&Zv?null:a;default:return null}}function S3(a,l){if(La)return a==="compositionend"||!yp&&Jv(a,l)?(a=Pf(),Ui=ba=sr=null,La=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Yv&&l.locale!=="ko"?null:l.data;default:return null}}var R3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ty(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!R3[a.type]:l==="textarea"}function ny(a,l,h,m){po(m),l=Vf(l,"onChange"),0<l.length&&(h=new Rs("onChange","change",null,h,m),a.push({event:h,listeners:l}))}var Al=null,Tl=null;function P3(a){wy(a,0)}function kf(a){var l=ja(a);if(ei(l))return a}function b3(a,l){if(a==="change")return l}var ry=!1;if(u){var _p;if(u){var wp="oninput"in document;if(!wp){var iy=document.createElement("div");iy.setAttribute("oninput","return;"),wp=typeof iy.oninput=="function"}_p=wp}else _p=!1;ry=_p&&(!document.documentMode||9<document.documentMode)}function oy(){Al&&(Al.detachEvent("onpropertychange",sy),Tl=Al=null)}function sy(a){if(a.propertyName==="value"&&kf(Tl)){var l=[];ny(l,Tl,a,wa(a)),vf(P3,l)}}function D3(a,l,h){a==="focusin"?(oy(),Al=l,Tl=h,Al.attachEvent("onpropertychange",sy)):a==="focusout"&&oy()}function O3(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return kf(Tl)}function N3(a,l){if(a==="click")return kf(l)}function k3(a,l){if(a==="input"||a==="change")return kf(l)}function M3(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Fr=typeof Object.is=="function"?Object.is:M3;function Cl(a,l){if(Fr(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var h=Object.keys(a),m=Object.keys(l);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var _=h[m];if(!c.call(l,_)||!Fr(a[_],l[_]))return!1}return!0}function ay(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function uy(a,l){var h=ay(a);a=0;for(var m;h;){if(h.nodeType===3){if(m=a+h.textContent.length,a<=l&&m>=l)return{node:h,offset:l-a};a=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=ay(h)}}function ly(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?ly(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function cy(){for(var a=window,l=ao();l instanceof a.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)a=l.contentWindow;else break;l=ao(a.document)}return l}function xp(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function L3(a){var l=cy(),h=a.focusedElem,m=a.selectionRange;if(l!==h&&h&&h.ownerDocument&&ly(h.ownerDocument.documentElement,h)){if(m!==null&&xp(h)){if(l=m.start,a=m.end,a===void 0&&(a=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(a,h.value.length);else if(a=(l=h.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var _=h.textContent.length,w=Math.min(m.start,_);m=m.end===void 0?w:Math.min(m.end,_),!a.extend&&w>m&&(_=m,m=w,w=_),_=uy(h,w);var S=uy(h,m);_&&S&&(a.rangeCount!==1||a.anchorNode!==_.node||a.anchorOffset!==_.offset||a.focusNode!==S.node||a.focusOffset!==S.offset)&&(l=l.createRange(),l.setStart(_.node,_.offset),a.removeAllRanges(),w>m?(a.addRange(l),a.extend(S.node,S.offset)):(l.setEnd(S.node,S.offset),a.addRange(l)))}}for(l=[],a=h;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)a=l[h],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var F3=u&&"documentMode"in document&&11>=document.documentMode,Fa=null,Ep=null,Il=null,Ap=!1;function fy(a,l,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Ap||Fa==null||Fa!==ao(m)||(m=Fa,"selectionStart"in m&&xp(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Il&&Cl(Il,m)||(Il=m,m=Vf(Ep,"onSelect"),0<m.length&&(l=new Rs("onSelect","select",null,l,h),a.push({event:l,listeners:m}),l.target=Fa)))}function Mf(a,l){var h={};return h[a.toLowerCase()]=l.toLowerCase(),h["Webkit"+a]="webkit"+l,h["Moz"+a]="moz"+l,h}var Va={animationend:Mf("Animation","AnimationEnd"),animationiteration:Mf("Animation","AnimationIteration"),animationstart:Mf("Animation","AnimationStart"),transitionend:Mf("Transition","TransitionEnd")},Tp={},hy={};u&&(hy=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function Lf(a){if(Tp[a])return Tp[a];if(!Va[a])return a;var l=Va[a],h;for(h in l)if(l.hasOwnProperty(h)&&h in hy)return Tp[a]=l[h];return a}var dy=Lf("animationend"),py=Lf("animationiteration"),gy=Lf("animationstart"),my=Lf("transitionend"),vy=new Map,yy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function To(a,l){vy.set(a,l),o(l,[a])}for(var Cp=0;Cp<yy.length;Cp++){var Ip=yy[Cp],V3=Ip.toLowerCase(),B3=Ip[0].toUpperCase()+Ip.slice(1);To(V3,"on"+B3)}To(dy,"onAnimationEnd"),To(py,"onAnimationIteration"),To(gy,"onAnimationStart"),To("dblclick","onDoubleClick"),To("focusin","onFocus"),To("focusout","onBlur"),To(my,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function _y(a,l,h){var m=a.type||"unknown-event";a.currentTarget=h,ol(m,l,void 0,a),a.currentTarget=null}function wy(a,l){l=(l&4)!==0;for(var h=0;h<a.length;h++){var m=a[h],_=m.event;m=m.listeners;e:{var w=void 0;if(l)for(var S=m.length-1;0<=S;S--){var V=m[S],H=V.instance,J=V.currentTarget;if(V=V.listener,H!==w&&_.isPropagationStopped())break e;_y(_,V,J),w=H}else for(S=0;S<m.length;S++){if(V=m[S],H=V.instance,J=V.currentTarget,V=V.listener,H!==w&&_.isPropagationStopped())break e;_y(_,V,J),w=H}}}if(xa)throw a=pr,xa=!1,pr=null,a}function wt(a,l){var h=l[kp];h===void 0&&(h=l[kp]=new Set);var m=a+"__bubble";h.has(m)||(xy(l,a,2,!1),h.add(m))}function Sp(a,l,h){var m=0;l&&(m|=4),xy(h,a,m,l)}var Ff="_reactListening"+Math.random().toString(36).slice(2);function Rl(a){if(!a[Ff]){a[Ff]=!0,r.forEach(function(h){h!=="selectionchange"&&(U3.has(h)||Sp(h,!1,a),Sp(h,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Ff]||(l[Ff]=!0,Sp("selectionchange",!1,l))}}function xy(a,l,h,m){switch(Pa(l)){case 1:var _=li;break;case 4:_=Rf;break;default:_=yl}h=_.bind(null,l,h,a),_=void 0,!mo||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(_=!0),m?_!==void 0?a.addEventListener(l,h,{capture:!0,passive:_}):a.addEventListener(l,h,!0):_!==void 0?a.addEventListener(l,h,{passive:_}):a.addEventListener(l,h,!1)}function Rp(a,l,h,m,_){var w=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var S=m.tag;if(S===3||S===4){var V=m.stateNode.containerInfo;if(V===_||V.nodeType===8&&V.parentNode===_)break;if(S===4)for(S=m.return;S!==null;){var H=S.tag;if((H===3||H===4)&&(H=S.stateNode.containerInfo,H===_||H.nodeType===8&&H.parentNode===_))return;S=S.return}for(;V!==null;){if(S=bs(V),S===null)return;if(H=S.tag,H===5||H===6){m=w=S;continue e}V=V.parentNode}}m=m.return}vf(function(){var J=w,se=wa(h),ae=[];e:{var oe=vy.get(a);if(oe!==void 0){var ge=Rs,ye=a;switch(a){case"keypress":if(Ss(h)===0)break e;case"keydown":case"keyup":ge=ct;break;case"focusin":ye="focus",ge=vn;break;case"focusout":ye="blur",ge=vn;break;case"beforeblur":case"afterblur":ge=vn;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=wl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Df;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=di;break;case dy:case py:case gy:ge=Nf;break;case my:ge=Ma;break;case"scroll":ge=Da;break;case"wheel":ge=A3;break;case"copy":case"cut":case"paste":ge=g;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=ur}var Ee=(l&4)!==0,Lt=!Ee&&a==="scroll",q=Ee?oe!==null?oe+"Capture":null:oe;Ee=[];for(var $=J,Q;$!==null;){Q=$;var ue=Q.stateNode;if(Q.tag===5&&ue!==null&&(Q=ue,q!==null&&(ue=vs($,q),ue!=null&&Ee.push(Pl($,ue,Q)))),Lt)break;$=$.return}0<Ee.length&&(oe=new ge(oe,ye,null,h,se),ae.push({event:oe,listeners:Ee}))}}if((l&7)===0){e:{if(oe=a==="mouseover"||a==="pointerover",ge=a==="mouseout"||a==="pointerout",oe&&h!==ho&&(ye=h.relatedTarget||h.fromElement)&&(bs(ye)||ye[zi]))break e;if((ge||oe)&&(oe=se.window===se?se:(oe=se.ownerDocument)?oe.defaultView||oe.parentWindow:window,ge?(ye=h.relatedTarget||h.toElement,ge=J,ye=ye?bs(ye):null,ye!==null&&(Lt=Mr(ye),ye!==Lt||ye.tag!==5&&ye.tag!==6)&&(ye=null)):(ge=null,ye=J),ge!==ye)){if(Ee=wl,ue="onMouseLeave",q="onMouseEnter",$="mouse",(a==="pointerout"||a==="pointerover")&&(Ee=ur,ue="onPointerLeave",q="onPointerEnter",$="pointer"),Lt=ge==null?oe:ja(ge),Q=ye==null?oe:ja(ye),oe=new Ee(ue,$+"leave",ge,h,se),oe.target=Lt,oe.relatedTarget=Q,ue=null,bs(se)===J&&(Ee=new Ee(q,$+"enter",ye,h,se),Ee.target=Q,Ee.relatedTarget=Lt,ue=Ee),Lt=ue,ge&&ye)t:{for(Ee=ge,q=ye,$=0,Q=Ee;Q;Q=Ba(Q))$++;for(Q=0,ue=q;ue;ue=Ba(ue))Q++;for(;0<$-Q;)Ee=Ba(Ee),$--;for(;0<Q-$;)q=Ba(q),Q--;for(;$--;){if(Ee===q||q!==null&&Ee===q.alternate)break t;Ee=Ba(Ee),q=Ba(q)}Ee=null}else Ee=null;ge!==null&&Ey(ae,oe,ge,Ee,!1),ye!==null&&Lt!==null&&Ey(ae,Lt,ye,Ee,!0)}}e:{if(oe=J?ja(J):window,ge=oe.nodeName&&oe.nodeName.toLowerCase(),ge==="select"||ge==="input"&&oe.type==="file")var Ce=b3;else if(ty(oe))if(ry)Ce=k3;else{Ce=O3;var be=D3}else(ge=oe.nodeName)&&ge.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Ce=N3);if(Ce&&(Ce=Ce(a,J))){ny(ae,Ce,h,se);break e}be&&be(a,oe,J),a==="focusout"&&(be=oe._wrapperState)&&be.controlled&&oe.type==="number"&&zt(oe,"number",oe.value)}switch(be=J?ja(J):window,a){case"focusin":(ty(be)||be.contentEditable==="true")&&(Fa=be,Ep=J,Il=null);break;case"focusout":Il=Ep=Fa=null;break;case"mousedown":Ap=!0;break;case"contextmenu":case"mouseup":case"dragend":Ap=!1,fy(ae,h,se);break;case"selectionchange":if(F3)break;case"keydown":case"keyup":fy(ae,h,se)}var De;if(yp)e:{switch(a){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else La?Jv(a,h)&&(Fe="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(Fe="onCompositionStart");Fe&&(Yv&&h.locale!=="ko"&&(La||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&La&&(De=Pf()):(sr=se,ba="value"in sr?sr.value:sr.textContent,La=!0)),be=Vf(J,Fe),0<be.length&&(Fe=new A(Fe,a,null,h,se),ae.push({event:Fe,listeners:be}),De?Fe.data=De:(De=ey(h),De!==null&&(Fe.data=De)))),(De=C3?I3(a,h):S3(a,h))&&(J=Vf(J,"onBeforeInput"),0<J.length&&(se=new A("onBeforeInput","beforeinput",null,h,se),ae.push({event:se,listeners:J}),se.data=De))}wy(ae,l)})}function Pl(a,l,h){return{instance:a,listener:l,currentTarget:h}}function Vf(a,l){for(var h=l+"Capture",m=[];a!==null;){var _=a,w=_.stateNode;_.tag===5&&w!==null&&(_=w,w=vs(a,h),w!=null&&m.unshift(Pl(a,w,_)),w=vs(a,l),w!=null&&m.push(Pl(a,w,_))),a=a.return}return m}function Ba(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Ey(a,l,h,m,_){for(var w=l._reactName,S=[];h!==null&&h!==m;){var V=h,H=V.alternate,J=V.stateNode;if(H!==null&&H===m)break;V.tag===5&&J!==null&&(V=J,_?(H=vs(h,w),H!=null&&S.unshift(Pl(h,H,V))):_||(H=vs(h,w),H!=null&&S.push(Pl(h,H,V)))),h=h.return}S.length!==0&&a.push({event:l,listeners:S})}var j3=/\r\n?/g,z3=/\u0000|\uFFFD/g;function Ay(a){return(typeof a=="string"?a:""+a).replace(j3,`
`).replace(z3,"")}function Bf(a,l,h){if(l=Ay(l),Ay(a)!==l&&h)throw Error(t(425))}function Uf(){}var Pp=null,bp=null;function Dp(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Op=typeof setTimeout=="function"?setTimeout:void 0,H3=typeof clearTimeout=="function"?clearTimeout:void 0,Ty=typeof Promise=="function"?Promise:void 0,G3=typeof queueMicrotask=="function"?queueMicrotask:typeof Ty<"u"?function(a){return Ty.resolve(null).then(a).catch(W3)}:Op;function W3(a){setTimeout(function(){throw a})}function Np(a,l){var h=l,m=0;do{var _=h.nextSibling;if(a.removeChild(h),_&&_.nodeType===8)if(h=_.data,h==="/$"){if(m===0){a.removeChild(_),xo(l);return}m--}else h!=="$"&&h!=="$?"&&h!=="$!"||m++;h=_}while(h);xo(l)}function Co(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function Cy(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return a;l--}else h==="/$"&&l++}a=a.previousSibling}return null}var Ua=Math.random().toString(36).slice(2),gi="__reactFiber$"+Ua,bl="__reactProps$"+Ua,zi="__reactContainer$"+Ua,kp="__reactEvents$"+Ua,$3="__reactListeners$"+Ua,K3="__reactHandles$"+Ua;function bs(a){var l=a[gi];if(l)return l;for(var h=a.parentNode;h;){if(l=h[zi]||h[gi]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(a=Cy(a);a!==null;){if(h=a[gi])return h;a=Cy(a)}return l}a=h,h=a.parentNode}return null}function Dl(a){return a=a[gi]||a[zi],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function ja(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function jf(a){return a[bl]||null}var Mp=[],za=-1;function Io(a){return{current:a}}function xt(a){0>za||(a.current=Mp[za],Mp[za]=null,za--)}function vt(a,l){za++,Mp[za]=a.current,a.current=l}var So={},Rn=Io(So),Wn=Io(!1),Ds=So;function Ha(a,l){var h=a.type.contextTypes;if(!h)return So;var m=a.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===l)return m.__reactInternalMemoizedMaskedChildContext;var _={},w;for(w in h)_[w]=l[w];return m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=_),_}function $n(a){return a=a.childContextTypes,a!=null}function zf(){xt(Wn),xt(Rn)}function Iy(a,l,h){if(Rn.current!==So)throw Error(t(168));vt(Rn,l),vt(Wn,h)}function Sy(a,l,h){var m=a.stateNode;if(l=l.childContextTypes,typeof m.getChildContext!="function")return h;m=m.getChildContext();for(var _ in m)if(!(_ in l))throw Error(t(108,Ne(a)||"Unknown",_));return he({},h,m)}function Hf(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||So,Ds=Rn.current,vt(Rn,a),vt(Wn,Wn.current),!0}function Ry(a,l,h){var m=a.stateNode;if(!m)throw Error(t(169));h?(a=Sy(a,l,Ds),m.__reactInternalMemoizedMergedChildContext=a,xt(Wn),xt(Rn),vt(Rn,a)):xt(Wn),vt(Wn,h)}var Hi=null,Gf=!1,Lp=!1;function Py(a){Hi===null?Hi=[a]:Hi.push(a)}function q3(a){Gf=!0,Py(a)}function Ro(){if(!Lp&&Hi!==null){Lp=!0;var a=0,l=Ye;try{var h=Hi;for(Ye=1;a<h.length;a++){var m=h[a];do m=m(!0);while(m!==null)}Hi=null,Gf=!1}catch(_){throw Hi!==null&&(Hi=Hi.slice(a+1)),al(Aa,Ro),_}finally{Ye=l,Lp=!1}}return null}var Ga=[],Wa=0,Wf=null,$f=0,mr=[],vr=0,Os=null,Gi=1,Wi="";function Ns(a,l){Ga[Wa++]=$f,Ga[Wa++]=Wf,Wf=a,$f=l}function by(a,l,h){mr[vr++]=Gi,mr[vr++]=Wi,mr[vr++]=Os,Os=a;var m=Gi;a=Wi;var _=32-ir(m)-1;m&=~(1<<_),h+=1;var w=32-ir(l)+_;if(30<w){var S=_-_%5;w=(m&(1<<S)-1).toString(32),m>>=S,_-=S,Gi=1<<32-ir(l)+_|h<<_|m,Wi=w+a}else Gi=1<<w|h<<_|m,Wi=a}function Fp(a){a.return!==null&&(Ns(a,1),by(a,1,0))}function Vp(a){for(;a===Wf;)Wf=Ga[--Wa],Ga[Wa]=null,$f=Ga[--Wa],Ga[Wa]=null;for(;a===Os;)Os=mr[--vr],mr[vr]=null,Wi=mr[--vr],mr[vr]=null,Gi=mr[--vr],mr[vr]=null}var lr=null,cr=null,Tt=!1,Vr=null;function Dy(a,l){var h=xr(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=a,l=a.deletions,l===null?(a.deletions=[h],a.flags|=16):l.push(h)}function Oy(a,l){switch(a.tag){case 5:var h=a.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,lr=a,cr=Co(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,lr=a,cr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=Os!==null?{id:Gi,overflow:Wi}:null,a.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=xr(18,null,null,0),h.stateNode=l,h.return=a,a.child=h,lr=a,cr=null,!0):!1;default:return!1}}function Bp(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Up(a){if(Tt){var l=cr;if(l){var h=l;if(!Oy(a,l)){if(Bp(a))throw Error(t(418));l=Co(h.nextSibling);var m=lr;l&&Oy(a,l)?Dy(m,h):(a.flags=a.flags&-4097|2,Tt=!1,lr=a)}}else{if(Bp(a))throw Error(t(418));a.flags=a.flags&-4097|2,Tt=!1,lr=a}}}function Ny(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;lr=a}function Kf(a){if(a!==lr)return!1;if(!Tt)return Ny(a),Tt=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!Dp(a.type,a.memoizedProps)),l&&(l=cr)){if(Bp(a))throw ky(),Error(t(418));for(;l;)Dy(a,l),l=Co(l.nextSibling)}if(Ny(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"){if(l===0){cr=Co(a.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}a=a.nextSibling}cr=null}}else cr=lr?Co(a.stateNode.nextSibling):null;return!0}function ky(){for(var a=cr;a;)a=Co(a.nextSibling)}function $a(){cr=lr=null,Tt=!1}function jp(a){Vr===null?Vr=[a]:Vr.push(a)}var X3=F.ReactCurrentBatchConfig;function Ol(a,l,h){if(a=h.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var m=h.stateNode}if(!m)throw Error(t(147,a));var _=m,w=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===w?l.ref:(l=function(S){var V=_.refs;S===null?delete V[w]:V[w]=S},l._stringRef=w,l)}if(typeof a!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,a))}return a}function qf(a,l){throw a=Object.prototype.toString.call(l),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function My(a){var l=a._init;return l(a._payload)}function Ly(a){function l(q,$){if(a){var Q=q.deletions;Q===null?(q.deletions=[$],q.flags|=16):Q.push($)}}function h(q,$){if(!a)return null;for(;$!==null;)l(q,$),$=$.sibling;return null}function m(q,$){for(q=new Map;$!==null;)$.key!==null?q.set($.key,$):q.set($.index,$),$=$.sibling;return q}function _(q,$){return q=Lo(q,$),q.index=0,q.sibling=null,q}function w(q,$,Q){return q.index=Q,a?(Q=q.alternate,Q!==null?(Q=Q.index,Q<$?(q.flags|=2,$):Q):(q.flags|=2,$)):(q.flags|=1048576,$)}function S(q){return a&&q.alternate===null&&(q.flags|=2),q}function V(q,$,Q,ue){return $===null||$.tag!==6?($=O0(Q,q.mode,ue),$.return=q,$):($=_($,Q),$.return=q,$)}function H(q,$,Q,ue){var Ce=Q.type;return Ce===R?se(q,$,Q.props.children,ue,Q.key):$!==null&&($.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===je&&My(Ce)===$.type)?(ue=_($,Q.props),ue.ref=Ol(q,$,Q),ue.return=q,ue):(ue=yh(Q.type,Q.key,Q.props,null,q.mode,ue),ue.ref=Ol(q,$,Q),ue.return=q,ue)}function J(q,$,Q,ue){return $===null||$.tag!==4||$.stateNode.containerInfo!==Q.containerInfo||$.stateNode.implementation!==Q.implementation?($=N0(Q,q.mode,ue),$.return=q,$):($=_($,Q.children||[]),$.return=q,$)}function se(q,$,Q,ue,Ce){return $===null||$.tag!==7?($=js(Q,q.mode,ue,Ce),$.return=q,$):($=_($,Q),$.return=q,$)}function ae(q,$,Q){if(typeof $=="string"&&$!==""||typeof $=="number")return $=O0(""+$,q.mode,Q),$.return=q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case j:return Q=yh($.type,$.key,$.props,null,q.mode,Q),Q.ref=Ol(q,null,$),Q.return=q,Q;case W:return $=N0($,q.mode,Q),$.return=q,$;case je:var ue=$._init;return ae(q,ue($._payload),Q)}if(kt($)||pe($))return $=js($,q.mode,Q,null),$.return=q,$;qf(q,$)}return null}function oe(q,$,Q,ue){var Ce=$!==null?$.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Ce!==null?null:V(q,$,""+Q,ue);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case j:return Q.key===Ce?H(q,$,Q,ue):null;case W:return Q.key===Ce?J(q,$,Q,ue):null;case je:return Ce=Q._init,oe(q,$,Ce(Q._payload),ue)}if(kt(Q)||pe(Q))return Ce!==null?null:se(q,$,Q,ue,null);qf(q,Q)}return null}function ge(q,$,Q,ue,Ce){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return q=q.get(Q)||null,V($,q,""+ue,Ce);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case j:return q=q.get(ue.key===null?Q:ue.key)||null,H($,q,ue,Ce);case W:return q=q.get(ue.key===null?Q:ue.key)||null,J($,q,ue,Ce);case je:var be=ue._init;return ge(q,$,Q,be(ue._payload),Ce)}if(kt(ue)||pe(ue))return q=q.get(Q)||null,se($,q,ue,Ce,null);qf($,ue)}return null}function ye(q,$,Q,ue){for(var Ce=null,be=null,De=$,Fe=$=0,ln=null;De!==null&&Fe<Q.length;Fe++){De.index>Fe?(ln=De,De=null):ln=De.sibling;var it=oe(q,De,Q[Fe],ue);if(it===null){De===null&&(De=ln);break}a&&De&&it.alternate===null&&l(q,De),$=w(it,$,Fe),be===null?Ce=it:be.sibling=it,be=it,De=ln}if(Fe===Q.length)return h(q,De),Tt&&Ns(q,Fe),Ce;if(De===null){for(;Fe<Q.length;Fe++)De=ae(q,Q[Fe],ue),De!==null&&($=w(De,$,Fe),be===null?Ce=De:be.sibling=De,be=De);return Tt&&Ns(q,Fe),Ce}for(De=m(q,De);Fe<Q.length;Fe++)ln=ge(De,q,Fe,Q[Fe],ue),ln!==null&&(a&&ln.alternate!==null&&De.delete(ln.key===null?Fe:ln.key),$=w(ln,$,Fe),be===null?Ce=ln:be.sibling=ln,be=ln);return a&&De.forEach(function(Fo){return l(q,Fo)}),Tt&&Ns(q,Fe),Ce}function Ee(q,$,Q,ue){var Ce=pe(Q);if(typeof Ce!="function")throw Error(t(150));if(Q=Ce.call(Q),Q==null)throw Error(t(151));for(var be=Ce=null,De=$,Fe=$=0,ln=null,it=Q.next();De!==null&&!it.done;Fe++,it=Q.next()){De.index>Fe?(ln=De,De=null):ln=De.sibling;var Fo=oe(q,De,it.value,ue);if(Fo===null){De===null&&(De=ln);break}a&&De&&Fo.alternate===null&&l(q,De),$=w(Fo,$,Fe),be===null?Ce=Fo:be.sibling=Fo,be=Fo,De=ln}if(it.done)return h(q,De),Tt&&Ns(q,Fe),Ce;if(De===null){for(;!it.done;Fe++,it=Q.next())it=ae(q,it.value,ue),it!==null&&($=w(it,$,Fe),be===null?Ce=it:be.sibling=it,be=it);return Tt&&Ns(q,Fe),Ce}for(De=m(q,De);!it.done;Fe++,it=Q.next())it=ge(De,q,Fe,it.value,ue),it!==null&&(a&&it.alternate!==null&&De.delete(it.key===null?Fe:it.key),$=w(it,$,Fe),be===null?Ce=it:be.sibling=it,be=it);return a&&De.forEach(function(R4){return l(q,R4)}),Tt&&Ns(q,Fe),Ce}function Lt(q,$,Q,ue){if(typeof Q=="object"&&Q!==null&&Q.type===R&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case j:e:{for(var Ce=Q.key,be=$;be!==null;){if(be.key===Ce){if(Ce=Q.type,Ce===R){if(be.tag===7){h(q,be.sibling),$=_(be,Q.props.children),$.return=q,q=$;break e}}else if(be.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===je&&My(Ce)===be.type){h(q,be.sibling),$=_(be,Q.props),$.ref=Ol(q,be,Q),$.return=q,q=$;break e}h(q,be);break}else l(q,be);be=be.sibling}Q.type===R?($=js(Q.props.children,q.mode,ue,Q.key),$.return=q,q=$):(ue=yh(Q.type,Q.key,Q.props,null,q.mode,ue),ue.ref=Ol(q,$,Q),ue.return=q,q=ue)}return S(q);case W:e:{for(be=Q.key;$!==null;){if($.key===be)if($.tag===4&&$.stateNode.containerInfo===Q.containerInfo&&$.stateNode.implementation===Q.implementation){h(q,$.sibling),$=_($,Q.children||[]),$.return=q,q=$;break e}else{h(q,$);break}else l(q,$);$=$.sibling}$=N0(Q,q.mode,ue),$.return=q,q=$}return S(q);case je:return be=Q._init,Lt(q,$,be(Q._payload),ue)}if(kt(Q))return ye(q,$,Q,ue);if(pe(Q))return Ee(q,$,Q,ue);qf(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,$!==null&&$.tag===6?(h(q,$.sibling),$=_($,Q),$.return=q,q=$):(h(q,$),$=O0(Q,q.mode,ue),$.return=q,q=$),S(q)):h(q,$)}return Lt}var Ka=Ly(!0),Fy=Ly(!1),Xf=Io(null),Yf=null,qa=null,zp=null;function Hp(){zp=qa=Yf=null}function Gp(a){var l=Xf.current;xt(Xf),a._currentValue=l}function Wp(a,l,h){for(;a!==null;){var m=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),a===h)break;a=a.return}}function Xa(a,l){Yf=a,zp=qa=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(Kn=!0),a.firstContext=null)}function yr(a){var l=a._currentValue;if(zp!==a)if(a={context:a,memoizedValue:l,next:null},qa===null){if(Yf===null)throw Error(t(308));qa=a,Yf.dependencies={lanes:0,firstContext:a}}else qa=qa.next=a;return l}var ks=null;function $p(a){ks===null?ks=[a]:ks.push(a)}function Vy(a,l,h,m){var _=l.interleaved;return _===null?(h.next=h,$p(l)):(h.next=_.next,_.next=h),l.interleaved=h,$i(a,m)}function $i(a,l){a.lanes|=l;var h=a.alternate;for(h!==null&&(h.lanes|=l),h=a,a=a.return;a!==null;)a.childLanes|=l,h=a.alternate,h!==null&&(h.childLanes|=l),h=a,a=a.return;return h.tag===3?h.stateNode:null}var Po=!1;function Kp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function By(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Ki(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function bo(a,l,h){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(et&2)!==0){var _=m.pending;return _===null?l.next=l:(l.next=_.next,_.next=l),m.pending=l,$i(a,h)}return _=m.interleaved,_===null?(l.next=l,$p(m)):(l.next=_.next,_.next=l),m.interleaved=l,$i(a,h)}function Qf(a,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var m=l.lanes;m&=a.pendingLanes,h|=m,l.lanes=h,dl(a,h)}}function Uy(a,l){var h=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var _=null,w=null;if(h=h.firstBaseUpdate,h!==null){do{var S={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};w===null?_=w=S:w=w.next=S,h=h.next}while(h!==null);w===null?_=w=l:w=w.next=l}else _=w=l;h={baseState:m.baseState,firstBaseUpdate:_,lastBaseUpdate:w,shared:m.shared,effects:m.effects},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=l:a.next=l,h.lastBaseUpdate=l}function Zf(a,l,h,m){var _=a.updateQueue;Po=!1;var w=_.firstBaseUpdate,S=_.lastBaseUpdate,V=_.shared.pending;if(V!==null){_.shared.pending=null;var H=V,J=H.next;H.next=null,S===null?w=J:S.next=J,S=H;var se=a.alternate;se!==null&&(se=se.updateQueue,V=se.lastBaseUpdate,V!==S&&(V===null?se.firstBaseUpdate=J:V.next=J,se.lastBaseUpdate=H))}if(w!==null){var ae=_.baseState;S=0,se=J=H=null,V=w;do{var oe=V.lane,ge=V.eventTime;if((m&oe)===oe){se!==null&&(se=se.next={eventTime:ge,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var ye=a,Ee=V;switch(oe=l,ge=h,Ee.tag){case 1:if(ye=Ee.payload,typeof ye=="function"){ae=ye.call(ge,ae,oe);break e}ae=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Ee.payload,oe=typeof ye=="function"?ye.call(ge,ae,oe):ye,oe==null)break e;ae=he({},ae,oe);break e;case 2:Po=!0}}V.callback!==null&&V.lane!==0&&(a.flags|=64,oe=_.effects,oe===null?_.effects=[V]:oe.push(V))}else ge={eventTime:ge,lane:oe,tag:V.tag,payload:V.payload,callback:V.callback,next:null},se===null?(J=se=ge,H=ae):se=se.next=ge,S|=oe;if(V=V.next,V===null){if(V=_.shared.pending,V===null)break;oe=V,V=oe.next,oe.next=null,_.lastBaseUpdate=oe,_.shared.pending=null}}while(!0);if(se===null&&(H=ae),_.baseState=H,_.firstBaseUpdate=J,_.lastBaseUpdate=se,l=_.shared.interleaved,l!==null){_=l;do S|=_.lane,_=_.next;while(_!==l)}else w===null&&(_.shared.lanes=0);Fs|=S,a.lanes=S,a.memoizedState=ae}}function jy(a,l,h){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var m=a[l],_=m.callback;if(_!==null){if(m.callback=null,m=h,typeof _!="function")throw Error(t(191,_));_.call(m)}}}var Nl={},mi=Io(Nl),kl=Io(Nl),Ml=Io(Nl);function Ms(a){if(a===Nl)throw Error(t(174));return a}function qp(a,l){switch(vt(Ml,l),vt(kl,a),vt(mi,Nl),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:va(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=va(l,a)}xt(mi),vt(mi,l)}function Ya(){xt(mi),xt(kl),xt(Ml)}function zy(a){Ms(Ml.current);var l=Ms(mi.current),h=va(l,a.type);l!==h&&(vt(kl,a),vt(mi,h))}function Xp(a){kl.current===a&&(xt(mi),xt(kl))}var St=Io(0);function Jf(a){for(var l=a;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Yp=[];function Qp(){for(var a=0;a<Yp.length;a++)Yp[a]._workInProgressVersionPrimary=null;Yp.length=0}var eh=F.ReactCurrentDispatcher,Zp=F.ReactCurrentBatchConfig,Ls=0,Rt=null,Xt=null,an=null,th=!1,Ll=!1,Fl=0,Y3=0;function Pn(){throw Error(t(321))}function Jp(a,l){if(l===null)return!1;for(var h=0;h<l.length&&h<a.length;h++)if(!Fr(a[h],l[h]))return!1;return!0}function e0(a,l,h,m,_,w){if(Ls=w,Rt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,eh.current=a===null||a.memoizedState===null?e4:t4,a=h(m,_),Ll){w=0;do{if(Ll=!1,Fl=0,25<=w)throw Error(t(301));w+=1,an=Xt=null,l.updateQueue=null,eh.current=n4,a=h(m,_)}while(Ll)}if(eh.current=ih,l=Xt!==null&&Xt.next!==null,Ls=0,an=Xt=Rt=null,th=!1,l)throw Error(t(300));return a}function t0(){var a=Fl!==0;return Fl=0,a}function vi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Rt.memoizedState=an=a:an=an.next=a,an}function _r(){if(Xt===null){var a=Rt.alternate;a=a!==null?a.memoizedState:null}else a=Xt.next;var l=an===null?Rt.memoizedState:an.next;if(l!==null)an=l,Xt=a;else{if(a===null)throw Error(t(310));Xt=a,a={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},an===null?Rt.memoizedState=an=a:an=an.next=a}return an}function Vl(a,l){return typeof l=="function"?l(a):l}function n0(a){var l=_r(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=a;var m=Xt,_=m.baseQueue,w=h.pending;if(w!==null){if(_!==null){var S=_.next;_.next=w.next,w.next=S}m.baseQueue=_=w,h.pending=null}if(_!==null){w=_.next,m=m.baseState;var V=S=null,H=null,J=w;do{var se=J.lane;if((Ls&se)===se)H!==null&&(H=H.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),m=J.hasEagerState?J.eagerState:a(m,J.action);else{var ae={lane:se,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};H===null?(V=H=ae,S=m):H=H.next=ae,Rt.lanes|=se,Fs|=se}J=J.next}while(J!==null&&J!==w);H===null?S=m:H.next=V,Fr(m,l.memoizedState)||(Kn=!0),l.memoizedState=m,l.baseState=S,l.baseQueue=H,h.lastRenderedState=m}if(a=h.interleaved,a!==null){_=a;do w=_.lane,Rt.lanes|=w,Fs|=w,_=_.next;while(_!==a)}else _===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function r0(a){var l=_r(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=a;var m=h.dispatch,_=h.pending,w=l.memoizedState;if(_!==null){h.pending=null;var S=_=_.next;do w=a(w,S.action),S=S.next;while(S!==_);Fr(w,l.memoizedState)||(Kn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),h.lastRenderedState=w}return[w,m]}function Hy(){}function Gy(a,l){var h=Rt,m=_r(),_=l(),w=!Fr(m.memoizedState,_);if(w&&(m.memoizedState=_,Kn=!0),m=m.queue,i0(Ky.bind(null,h,m,a),[a]),m.getSnapshot!==l||w||an!==null&&an.memoizedState.tag&1){if(h.flags|=2048,Bl(9,$y.bind(null,h,m,_,l),void 0,null),un===null)throw Error(t(349));(Ls&30)!==0||Wy(h,l,_)}return _}function Wy(a,l,h){a.flags|=16384,a={getSnapshot:l,value:h},l=Rt.updateQueue,l===null?(l={lastEffect:null,stores:null},Rt.updateQueue=l,l.stores=[a]):(h=l.stores,h===null?l.stores=[a]:h.push(a))}function $y(a,l,h,m){l.value=h,l.getSnapshot=m,qy(l)&&Xy(a)}function Ky(a,l,h){return h(function(){qy(l)&&Xy(a)})}function qy(a){var l=a.getSnapshot;a=a.value;try{var h=l();return!Fr(a,h)}catch{return!0}}function Xy(a){var l=$i(a,1);l!==null&&zr(l,a,1,-1)}function Yy(a){var l=vi();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:a},l.queue=a,a=a.dispatch=J3.bind(null,Rt,a),[l.memoizedState,a]}function Bl(a,l,h,m){return a={tag:a,create:l,destroy:h,deps:m,next:null},l=Rt.updateQueue,l===null?(l={lastEffect:null,stores:null},Rt.updateQueue=l,l.lastEffect=a.next=a):(h=l.lastEffect,h===null?l.lastEffect=a.next=a:(m=h.next,h.next=a,a.next=m,l.lastEffect=a)),a}function Qy(){return _r().memoizedState}function nh(a,l,h,m){var _=vi();Rt.flags|=a,_.memoizedState=Bl(1|l,h,void 0,m===void 0?null:m)}function rh(a,l,h,m){var _=_r();m=m===void 0?null:m;var w=void 0;if(Xt!==null){var S=Xt.memoizedState;if(w=S.destroy,m!==null&&Jp(m,S.deps)){_.memoizedState=Bl(l,h,w,m);return}}Rt.flags|=a,_.memoizedState=Bl(1|l,h,w,m)}function Zy(a,l){return nh(8390656,8,a,l)}function i0(a,l){return rh(2048,8,a,l)}function Jy(a,l){return rh(4,2,a,l)}function e_(a,l){return rh(4,4,a,l)}function t_(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function n_(a,l,h){return h=h!=null?h.concat([a]):null,rh(4,4,t_.bind(null,l,a),h)}function o0(){}function r_(a,l){var h=_r();l=l===void 0?null:l;var m=h.memoizedState;return m!==null&&l!==null&&Jp(l,m[1])?m[0]:(h.memoizedState=[a,l],a)}function i_(a,l){var h=_r();l=l===void 0?null:l;var m=h.memoizedState;return m!==null&&l!==null&&Jp(l,m[1])?m[0]:(a=a(),h.memoizedState=[a,l],a)}function o_(a,l,h){return(Ls&21)===0?(a.baseState&&(a.baseState=!1,Kn=!0),a.memoizedState=h):(Fr(h,l)||(h=fl(),Rt.lanes|=h,Fs|=h,a.baseState=!0),l)}function Q3(a,l){var h=Ye;Ye=h!==0&&4>h?h:4,a(!0);var m=Zp.transition;Zp.transition={};try{a(!1),l()}finally{Ye=h,Zp.transition=m}}function s_(){return _r().memoizedState}function Z3(a,l,h){var m=ko(a);if(h={lane:m,action:h,hasEagerState:!1,eagerState:null,next:null},a_(a))u_(l,h);else if(h=Vy(a,l,h,m),h!==null){var _=Un();zr(h,a,m,_),l_(h,l,m)}}function J3(a,l,h){var m=ko(a),_={lane:m,action:h,hasEagerState:!1,eagerState:null,next:null};if(a_(a))u_(l,_);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var S=l.lastRenderedState,V=w(S,h);if(_.hasEagerState=!0,_.eagerState=V,Fr(V,S)){var H=l.interleaved;H===null?(_.next=_,$p(l)):(_.next=H.next,H.next=_),l.interleaved=_;return}}catch{}finally{}h=Vy(a,l,_,m),h!==null&&(_=Un(),zr(h,a,m,_),l_(h,l,m))}}function a_(a){var l=a.alternate;return a===Rt||l!==null&&l===Rt}function u_(a,l){Ll=th=!0;var h=a.pending;h===null?l.next=l:(l.next=h.next,h.next=l),a.pending=l}function l_(a,l,h){if((h&4194240)!==0){var m=l.lanes;m&=a.pendingLanes,h|=m,l.lanes=h,dl(a,h)}}var ih={readContext:yr,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},e4={readContext:yr,useCallback:function(a,l){return vi().memoizedState=[a,l===void 0?null:l],a},useContext:yr,useEffect:Zy,useImperativeHandle:function(a,l,h){return h=h!=null?h.concat([a]):null,nh(4194308,4,t_.bind(null,l,a),h)},useLayoutEffect:function(a,l){return nh(4194308,4,a,l)},useInsertionEffect:function(a,l){return nh(4,2,a,l)},useMemo:function(a,l){var h=vi();return l=l===void 0?null:l,a=a(),h.memoizedState=[a,l],a},useReducer:function(a,l,h){var m=vi();return l=h!==void 0?h(l):l,m.memoizedState=m.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},m.queue=a,a=a.dispatch=Z3.bind(null,Rt,a),[m.memoizedState,a]},useRef:function(a){var l=vi();return a={current:a},l.memoizedState=a},useState:Yy,useDebugValue:o0,useDeferredValue:function(a){return vi().memoizedState=a},useTransition:function(){var a=Yy(!1),l=a[0];return a=Q3.bind(null,a[1]),vi().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,h){var m=Rt,_=vi();if(Tt){if(h===void 0)throw Error(t(407));h=h()}else{if(h=l(),un===null)throw Error(t(349));(Ls&30)!==0||Wy(m,l,h)}_.memoizedState=h;var w={value:h,getSnapshot:l};return _.queue=w,Zy(Ky.bind(null,m,w,a),[a]),m.flags|=2048,Bl(9,$y.bind(null,m,w,h,l),void 0,null),h},useId:function(){var a=vi(),l=un.identifierPrefix;if(Tt){var h=Wi,m=Gi;h=(m&~(1<<32-ir(m)-1)).toString(32)+h,l=":"+l+"R"+h,h=Fl++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=Y3++,l=":"+l+"r"+h.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},t4={readContext:yr,useCallback:r_,useContext:yr,useEffect:i0,useImperativeHandle:n_,useInsertionEffect:Jy,useLayoutEffect:e_,useMemo:i_,useReducer:n0,useRef:Qy,useState:function(){return n0(Vl)},useDebugValue:o0,useDeferredValue:function(a){var l=_r();return o_(l,Xt.memoizedState,a)},useTransition:function(){var a=n0(Vl)[0],l=_r().memoizedState;return[a,l]},useMutableSource:Hy,useSyncExternalStore:Gy,useId:s_,unstable_isNewReconciler:!1},n4={readContext:yr,useCallback:r_,useContext:yr,useEffect:i0,useImperativeHandle:n_,useInsertionEffect:Jy,useLayoutEffect:e_,useMemo:i_,useReducer:r0,useRef:Qy,useState:function(){return r0(Vl)},useDebugValue:o0,useDeferredValue:function(a){var l=_r();return Xt===null?l.memoizedState=a:o_(l,Xt.memoizedState,a)},useTransition:function(){var a=r0(Vl)[0],l=_r().memoizedState;return[a,l]},useMutableSource:Hy,useSyncExternalStore:Gy,useId:s_,unstable_isNewReconciler:!1};function Br(a,l){if(a&&a.defaultProps){l=he({},l),a=a.defaultProps;for(var h in a)l[h]===void 0&&(l[h]=a[h]);return l}return l}function s0(a,l,h,m){l=a.memoizedState,h=h(m,l),h=h==null?l:he({},l,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var oh={isMounted:function(a){return(a=a._reactInternals)?Mr(a)===a:!1},enqueueSetState:function(a,l,h){a=a._reactInternals;var m=Un(),_=ko(a),w=Ki(m,_);w.payload=l,h!=null&&(w.callback=h),l=bo(a,w,_),l!==null&&(zr(l,a,_,m),Qf(l,a,_))},enqueueReplaceState:function(a,l,h){a=a._reactInternals;var m=Un(),_=ko(a),w=Ki(m,_);w.tag=1,w.payload=l,h!=null&&(w.callback=h),l=bo(a,w,_),l!==null&&(zr(l,a,_,m),Qf(l,a,_))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var h=Un(),m=ko(a),_=Ki(h,m);_.tag=2,l!=null&&(_.callback=l),l=bo(a,_,m),l!==null&&(zr(l,a,m,h),Qf(l,a,m))}};function c_(a,l,h,m,_,w,S){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,w,S):l.prototype&&l.prototype.isPureReactComponent?!Cl(h,m)||!Cl(_,w):!0}function f_(a,l,h){var m=!1,_=So,w=l.contextType;return typeof w=="object"&&w!==null?w=yr(w):(_=$n(l)?Ds:Rn.current,m=l.contextTypes,w=(m=m!=null)?Ha(a,_):So),l=new l(h,w),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=oh,a.stateNode=l,l._reactInternals=a,m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=_,a.__reactInternalMemoizedMaskedChildContext=w),l}function h_(a,l,h,m){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,m),l.state!==a&&oh.enqueueReplaceState(l,l.state,null)}function a0(a,l,h,m){var _=a.stateNode;_.props=h,_.state=a.memoizedState,_.refs={},Kp(a);var w=l.contextType;typeof w=="object"&&w!==null?_.context=yr(w):(w=$n(l)?Ds:Rn.current,_.context=Ha(a,w)),_.state=a.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(s0(a,l,w,h),_.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(l=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),l!==_.state&&oh.enqueueReplaceState(_,_.state,null),Zf(a,h,_,m),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308)}function Qa(a,l){try{var h="",m=l;do h+=Ue(m),m=m.return;while(m);var _=h}catch(w){_=`
Error generating stack: `+w.message+`
`+w.stack}return{value:a,source:l,stack:_,digest:null}}function u0(a,l,h){return{value:a,source:null,stack:h??null,digest:l??null}}function l0(a,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var r4=typeof WeakMap=="function"?WeakMap:Map;function d_(a,l,h){h=Ki(-1,h),h.tag=3,h.payload={element:null};var m=l.value;return h.callback=function(){hh||(hh=!0,T0=m),l0(a,l)},h}function p_(a,l,h){h=Ki(-1,h),h.tag=3;var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var _=l.value;h.payload=function(){return m(_)},h.callback=function(){l0(a,l)}}var w=a.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(h.callback=function(){l0(a,l),typeof m!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})}),h}function g_(a,l,h){var m=a.pingCache;if(m===null){m=a.pingCache=new r4;var _=new Set;m.set(l,_)}else _=m.get(l),_===void 0&&(_=new Set,m.set(l,_));_.has(h)||(_.add(h),a=v4.bind(null,a,l,h),l.then(a,a))}function m_(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function v_(a,l,h,m,_){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=Ki(-1,1),l.tag=2,bo(h,l,1))),h.lanes|=1),a):(a.flags|=65536,a.lanes=_,a)}var i4=F.ReactCurrentOwner,Kn=!1;function Bn(a,l,h,m){l.child=a===null?Fy(l,null,h,m):Ka(l,a.child,h,m)}function y_(a,l,h,m,_){h=h.render;var w=l.ref;return Xa(l,_),m=e0(a,l,h,m,w,_),h=t0(),a!==null&&!Kn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~_,qi(a,l,_)):(Tt&&h&&Fp(l),l.flags|=1,Bn(a,l,m,_),l.child)}function __(a,l,h,m,_){if(a===null){var w=h.type;return typeof w=="function"&&!D0(w)&&w.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=w,w_(a,l,w,m,_)):(a=yh(h.type,null,m,l,l.mode,_),a.ref=l.ref,a.return=l,l.child=a)}if(w=a.child,(a.lanes&_)===0){var S=w.memoizedProps;if(h=h.compare,h=h!==null?h:Cl,h(S,m)&&a.ref===l.ref)return qi(a,l,_)}return l.flags|=1,a=Lo(w,m),a.ref=l.ref,a.return=l,l.child=a}function w_(a,l,h,m,_){if(a!==null){var w=a.memoizedProps;if(Cl(w,m)&&a.ref===l.ref)if(Kn=!1,l.pendingProps=m=w,(a.lanes&_)!==0)(a.flags&131072)!==0&&(Kn=!0);else return l.lanes=a.lanes,qi(a,l,_)}return c0(a,l,h,m,_)}function x_(a,l,h){var m=l.pendingProps,_=m.children,w=a!==null?a.memoizedState:null;if(m.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(Ja,fr),fr|=h;else{if((h&1073741824)===0)return a=w!==null?w.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,vt(Ja,fr),fr|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=w!==null?w.baseLanes:h,vt(Ja,fr),fr|=m}else w!==null?(m=w.baseLanes|h,l.memoizedState=null):m=h,vt(Ja,fr),fr|=m;return Bn(a,l,_,h),l.child}function E_(a,l){var h=l.ref;(a===null&&h!==null||a!==null&&a.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function c0(a,l,h,m,_){var w=$n(h)?Ds:Rn.current;return w=Ha(l,w),Xa(l,_),h=e0(a,l,h,m,w,_),m=t0(),a!==null&&!Kn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~_,qi(a,l,_)):(Tt&&m&&Fp(l),l.flags|=1,Bn(a,l,h,_),l.child)}function A_(a,l,h,m,_){if($n(h)){var w=!0;Hf(l)}else w=!1;if(Xa(l,_),l.stateNode===null)ah(a,l),f_(l,h,m),a0(l,h,m,_),m=!0;else if(a===null){var S=l.stateNode,V=l.memoizedProps;S.props=V;var H=S.context,J=h.contextType;typeof J=="object"&&J!==null?J=yr(J):(J=$n(h)?Ds:Rn.current,J=Ha(l,J));var se=h.getDerivedStateFromProps,ae=typeof se=="function"||typeof S.getSnapshotBeforeUpdate=="function";ae||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(V!==m||H!==J)&&h_(l,S,m,J),Po=!1;var oe=l.memoizedState;S.state=oe,Zf(l,m,S,_),H=l.memoizedState,V!==m||oe!==H||Wn.current||Po?(typeof se=="function"&&(s0(l,h,se,m),H=l.memoizedState),(V=Po||c_(l,h,V,m,oe,H,J))?(ae||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(l.flags|=4194308)):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=H),S.props=m,S.state=H,S.context=J,m=V):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{S=l.stateNode,By(a,l),V=l.memoizedProps,J=l.type===l.elementType?V:Br(l.type,V),S.props=J,ae=l.pendingProps,oe=S.context,H=h.contextType,typeof H=="object"&&H!==null?H=yr(H):(H=$n(h)?Ds:Rn.current,H=Ha(l,H));var ge=h.getDerivedStateFromProps;(se=typeof ge=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(V!==ae||oe!==H)&&h_(l,S,m,H),Po=!1,oe=l.memoizedState,S.state=oe,Zf(l,m,S,_);var ye=l.memoizedState;V!==ae||oe!==ye||Wn.current||Po?(typeof ge=="function"&&(s0(l,h,ge,m),ye=l.memoizedState),(J=Po||c_(l,h,J,m,oe,ye,H)||!1)?(se||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(m,ye,H),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(m,ye,H)),typeof S.componentDidUpdate=="function"&&(l.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof S.componentDidUpdate!="function"||V===a.memoizedProps&&oe===a.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||V===a.memoizedProps&&oe===a.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=ye),S.props=m,S.state=ye,S.context=H,m=J):(typeof S.componentDidUpdate!="function"||V===a.memoizedProps&&oe===a.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||V===a.memoizedProps&&oe===a.memoizedState||(l.flags|=1024),m=!1)}return f0(a,l,h,m,w,_)}function f0(a,l,h,m,_,w){E_(a,l);var S=(l.flags&128)!==0;if(!m&&!S)return _&&Ry(l,h,!1),qi(a,l,w);m=l.stateNode,i4.current=l;var V=S&&typeof h.getDerivedStateFromError!="function"?null:m.render();return l.flags|=1,a!==null&&S?(l.child=Ka(l,a.child,null,w),l.child=Ka(l,null,V,w)):Bn(a,l,V,w),l.memoizedState=m.state,_&&Ry(l,h,!0),l.child}function T_(a){var l=a.stateNode;l.pendingContext?Iy(a,l.pendingContext,l.pendingContext!==l.context):l.context&&Iy(a,l.context,!1),qp(a,l.containerInfo)}function C_(a,l,h,m,_){return $a(),jp(_),l.flags|=256,Bn(a,l,h,m),l.child}var h0={dehydrated:null,treeContext:null,retryLane:0};function d0(a){return{baseLanes:a,cachePool:null,transitions:null}}function I_(a,l,h){var m=l.pendingProps,_=St.current,w=!1,S=(l.flags&128)!==0,V;if((V=S)||(V=a!==null&&a.memoizedState===null?!1:(_&2)!==0),V?(w=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(_|=1),vt(St,_&1),a===null)return Up(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(S=m.children,a=m.fallback,w?(m=l.mode,w=l.child,S={mode:"hidden",children:S},(m&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=S):w=_h(S,m,0,null),a=js(a,m,h,null),w.return=l,a.return=l,w.sibling=a,l.child=w,l.child.memoizedState=d0(h),l.memoizedState=h0,a):p0(l,S));if(_=a.memoizedState,_!==null&&(V=_.dehydrated,V!==null))return o4(a,l,S,m,V,_,h);if(w){w=m.fallback,S=l.mode,_=a.child,V=_.sibling;var H={mode:"hidden",children:m.children};return(S&1)===0&&l.child!==_?(m=l.child,m.childLanes=0,m.pendingProps=H,l.deletions=null):(m=Lo(_,H),m.subtreeFlags=_.subtreeFlags&14680064),V!==null?w=Lo(V,w):(w=js(w,S,h,null),w.flags|=2),w.return=l,m.return=l,m.sibling=w,l.child=m,m=w,w=l.child,S=a.child.memoizedState,S=S===null?d0(h):{baseLanes:S.baseLanes|h,cachePool:null,transitions:S.transitions},w.memoizedState=S,w.childLanes=a.childLanes&~h,l.memoizedState=h0,m}return w=a.child,a=w.sibling,m=Lo(w,{mode:"visible",children:m.children}),(l.mode&1)===0&&(m.lanes=h),m.return=l,m.sibling=null,a!==null&&(h=l.deletions,h===null?(l.deletions=[a],l.flags|=16):h.push(a)),l.child=m,l.memoizedState=null,m}function p0(a,l){return l=_h({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function sh(a,l,h,m){return m!==null&&jp(m),Ka(l,a.child,null,h),a=p0(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function o4(a,l,h,m,_,w,S){if(h)return l.flags&256?(l.flags&=-257,m=u0(Error(t(422))),sh(a,l,S,m)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(w=m.fallback,_=l.mode,m=_h({mode:"visible",children:m.children},_,0,null),w=js(w,_,S,null),w.flags|=2,m.return=l,w.return=l,m.sibling=w,l.child=m,(l.mode&1)!==0&&Ka(l,a.child,null,S),l.child.memoizedState=d0(S),l.memoizedState=h0,w);if((l.mode&1)===0)return sh(a,l,S,null);if(_.data==="$!"){if(m=_.nextSibling&&_.nextSibling.dataset,m)var V=m.dgst;return m=V,w=Error(t(419)),m=u0(w,m,void 0),sh(a,l,S,m)}if(V=(S&a.childLanes)!==0,Kn||V){if(m=un,m!==null){switch(S&-S){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(m.suspendedLanes|S))!==0?0:_,_!==0&&_!==w.retryLane&&(w.retryLane=_,$i(a,_),zr(m,a,_,-1))}return b0(),m=u0(Error(t(421))),sh(a,l,S,m)}return _.data==="$?"?(l.flags|=128,l.child=a.child,l=y4.bind(null,a),_._reactRetry=l,null):(a=w.treeContext,cr=Co(_.nextSibling),lr=l,Tt=!0,Vr=null,a!==null&&(mr[vr++]=Gi,mr[vr++]=Wi,mr[vr++]=Os,Gi=a.id,Wi=a.overflow,Os=l),l=p0(l,m.children),l.flags|=4096,l)}function S_(a,l,h){a.lanes|=l;var m=a.alternate;m!==null&&(m.lanes|=l),Wp(a.return,l,h)}function g0(a,l,h,m,_){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:_}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=m,w.tail=h,w.tailMode=_)}function R_(a,l,h){var m=l.pendingProps,_=m.revealOrder,w=m.tail;if(Bn(a,l,m.children,h),m=St.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&S_(a,h,l);else if(a.tag===19)S_(a,h,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}if(vt(St,m),(l.mode&1)===0)l.memoizedState=null;else switch(_){case"forwards":for(h=l.child,_=null;h!==null;)a=h.alternate,a!==null&&Jf(a)===null&&(_=h),h=h.sibling;h=_,h===null?(_=l.child,l.child=null):(_=h.sibling,h.sibling=null),g0(l,!1,_,h,w);break;case"backwards":for(h=null,_=l.child,l.child=null;_!==null;){if(a=_.alternate,a!==null&&Jf(a)===null){l.child=_;break}a=_.sibling,_.sibling=h,h=_,_=a}g0(l,!0,h,null,w);break;case"together":g0(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function ah(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function qi(a,l,h){if(a!==null&&(l.dependencies=a.dependencies),Fs|=l.lanes,(h&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(t(153));if(l.child!==null){for(a=l.child,h=Lo(a,a.pendingProps),l.child=h,h.return=l;a.sibling!==null;)a=a.sibling,h=h.sibling=Lo(a,a.pendingProps),h.return=l;h.sibling=null}return l.child}function s4(a,l,h){switch(l.tag){case 3:T_(l),$a();break;case 5:zy(l);break;case 1:$n(l.type)&&Hf(l);break;case 4:qp(l,l.stateNode.containerInfo);break;case 10:var m=l.type._context,_=l.memoizedProps.value;vt(Xf,m._currentValue),m._currentValue=_;break;case 13:if(m=l.memoizedState,m!==null)return m.dehydrated!==null?(vt(St,St.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?I_(a,l,h):(vt(St,St.current&1),a=qi(a,l,h),a!==null?a.sibling:null);vt(St,St.current&1);break;case 19:if(m=(h&l.childLanes)!==0,(a.flags&128)!==0){if(m)return R_(a,l,h);l.flags|=128}if(_=l.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),vt(St,St.current),m)break;return null;case 22:case 23:return l.lanes=0,x_(a,l,h)}return qi(a,l,h)}var P_,m0,b_,D_;P_=function(a,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)a.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},m0=function(){},b_=function(a,l,h,m){var _=a.memoizedProps;if(_!==m){a=l.stateNode,Ms(mi.current);var w=null;switch(h){case"input":_=ga(a,_),m=ga(a,m),w=[];break;case"select":_=he({},_,{value:void 0}),m=he({},m,{value:void 0}),w=[];break;case"textarea":_=el(a,_),m=el(a,m),w=[];break;default:typeof _.onClick!="function"&&typeof m.onClick=="function"&&(a.onclick=Uf)}kr(h,m);var S;h=null;for(J in _)if(!m.hasOwnProperty(J)&&_.hasOwnProperty(J)&&_[J]!=null)if(J==="style"){var V=_[J];for(S in V)V.hasOwnProperty(S)&&(h||(h={}),h[S]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(i.hasOwnProperty(J)?w||(w=[]):(w=w||[]).push(J,null));for(J in m){var H=m[J];if(V=_?.[J],m.hasOwnProperty(J)&&H!==V&&(H!=null||V!=null))if(J==="style")if(V){for(S in V)!V.hasOwnProperty(S)||H&&H.hasOwnProperty(S)||(h||(h={}),h[S]="");for(S in H)H.hasOwnProperty(S)&&V[S]!==H[S]&&(h||(h={}),h[S]=H[S])}else h||(w||(w=[]),w.push(J,h)),h=H;else J==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,V=V?V.__html:void 0,H!=null&&V!==H&&(w=w||[]).push(J,H)):J==="children"?typeof H!="string"&&typeof H!="number"||(w=w||[]).push(J,""+H):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(i.hasOwnProperty(J)?(H!=null&&J==="onScroll"&&wt("scroll",a),w||V===H||(w=[])):(w=w||[]).push(J,H))}h&&(w=w||[]).push("style",h);var J=w;(l.updateQueue=J)&&(l.flags|=4)}},D_=function(a,l,h,m){h!==m&&(l.flags|=4)};function Ul(a,l){if(!Tt)switch(a.tailMode){case"hidden":l=a.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function bn(a){var l=a.alternate!==null&&a.alternate.child===a.child,h=0,m=0;if(l)for(var _=a.child;_!==null;)h|=_.lanes|_.childLanes,m|=_.subtreeFlags&14680064,m|=_.flags&14680064,_.return=a,_=_.sibling;else for(_=a.child;_!==null;)h|=_.lanes|_.childLanes,m|=_.subtreeFlags,m|=_.flags,_.return=a,_=_.sibling;return a.subtreeFlags|=m,a.childLanes=h,l}function a4(a,l,h){var m=l.pendingProps;switch(Vp(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(l),null;case 1:return $n(l.type)&&zf(),bn(l),null;case 3:return m=l.stateNode,Ya(),xt(Wn),xt(Rn),Qp(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(a===null||a.child===null)&&(Kf(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Vr!==null&&(S0(Vr),Vr=null))),m0(a,l),bn(l),null;case 5:Xp(l);var _=Ms(Ml.current);if(h=l.type,a!==null&&l.stateNode!=null)b_(a,l,h,m,_),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!m){if(l.stateNode===null)throw Error(t(166));return bn(l),null}if(a=Ms(mi.current),Kf(l)){m=l.stateNode,h=l.type;var w=l.memoizedProps;switch(m[gi]=l,m[bl]=w,a=(l.mode&1)!==0,h){case"dialog":wt("cancel",m),wt("close",m);break;case"iframe":case"object":case"embed":wt("load",m);break;case"video":case"audio":for(_=0;_<Sl.length;_++)wt(Sl[_],m);break;case"source":wt("error",m);break;case"img":case"image":case"link":wt("error",m),wt("load",m);break;case"details":wt("toggle",m);break;case"input":ff(m,w),wt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!w.multiple},wt("invalid",m);break;case"textarea":tl(m,w),wt("invalid",m)}kr(h,w),_=null;for(var S in w)if(w.hasOwnProperty(S)){var V=w[S];S==="children"?typeof V=="string"?m.textContent!==V&&(w.suppressHydrationWarning!==!0&&Bf(m.textContent,V,a),_=["children",V]):typeof V=="number"&&m.textContent!==""+V&&(w.suppressHydrationWarning!==!0&&Bf(m.textContent,V,a),_=["children",""+V]):i.hasOwnProperty(S)&&V!=null&&S==="onScroll"&&wt("scroll",m)}switch(h){case"input":Jr(m),Ju(m,w,!0);break;case"textarea":Jr(m),uo(m);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(m.onclick=Uf)}m=_,l.updateQueue=m,m!==null&&(l.flags|=4)}else{S=_.nodeType===9?_:_.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=nl(h)),a==="http://www.w3.org/1999/xhtml"?h==="script"?(a=S.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof m.is=="string"?a=S.createElement(h,{is:m.is}):(a=S.createElement(h),h==="select"&&(S=a,m.multiple?S.multiple=!0:m.size&&(S.size=m.size))):a=S.createElementNS(a,h),a[gi]=l,a[bl]=m,P_(a,l,!1,!1),l.stateNode=a;e:{switch(S=_a(h,m),h){case"dialog":wt("cancel",a),wt("close",a),_=m;break;case"iframe":case"object":case"embed":wt("load",a),_=m;break;case"video":case"audio":for(_=0;_<Sl.length;_++)wt(Sl[_],a);_=m;break;case"source":wt("error",a),_=m;break;case"img":case"image":case"link":wt("error",a),wt("load",a),_=m;break;case"details":wt("toggle",a),_=m;break;case"input":ff(a,m),_=ga(a,m),wt("invalid",a);break;case"option":_=m;break;case"select":a._wrapperState={wasMultiple:!!m.multiple},_=he({},m,{value:void 0}),wt("invalid",a);break;case"textarea":tl(a,m),_=el(a,m),wt("invalid",a);break;default:_=m}kr(h,_),V=_;for(w in V)if(V.hasOwnProperty(w)){var H=V[w];w==="style"?ya(a,H):w==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&df(a,H)):w==="children"?typeof H=="string"?(h!=="textarea"||H!=="")&&ms(a,H):typeof H=="number"&&ms(a,""+H):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?H!=null&&w==="onScroll"&&wt("scroll",a):H!=null&&D(a,w,H,S))}switch(h){case"input":Jr(a),Ju(a,m,!1);break;case"textarea":Jr(a),uo(a);break;case"option":m.value!=null&&a.setAttribute("value",""+Ke(m.value));break;case"select":a.multiple=!!m.multiple,w=m.value,w!=null?Nr(a,!!m.multiple,w,!1):m.defaultValue!=null&&Nr(a,!!m.multiple,m.defaultValue,!0);break;default:typeof _.onClick=="function"&&(a.onclick=Uf)}switch(h){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return bn(l),null;case 6:if(a&&l.stateNode!=null)D_(a,l,a.memoizedProps,m);else{if(typeof m!="string"&&l.stateNode===null)throw Error(t(166));if(h=Ms(Ml.current),Ms(mi.current),Kf(l)){if(m=l.stateNode,h=l.memoizedProps,m[gi]=l,(w=m.nodeValue!==h)&&(a=lr,a!==null))switch(a.tag){case 3:Bf(m.nodeValue,h,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Bf(m.nodeValue,h,(a.mode&1)!==0)}w&&(l.flags|=4)}else m=(h.nodeType===9?h:h.ownerDocument).createTextNode(m),m[gi]=l,l.stateNode=m}return bn(l),null;case 13:if(xt(St),m=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Tt&&cr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)ky(),$a(),l.flags|=98560,w=!1;else if(w=Kf(l),m!==null&&m.dehydrated!==null){if(a===null){if(!w)throw Error(t(318));if(w=l.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[gi]=l}else $a(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;bn(l),w=!1}else Vr!==null&&(S0(Vr),Vr=null),w=!0;if(!w)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(m=m!==null,m!==(a!==null&&a.memoizedState!==null)&&m&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(St.current&1)!==0?Yt===0&&(Yt=3):b0())),l.updateQueue!==null&&(l.flags|=4),bn(l),null);case 4:return Ya(),m0(a,l),a===null&&Rl(l.stateNode.containerInfo),bn(l),null;case 10:return Gp(l.type._context),bn(l),null;case 17:return $n(l.type)&&zf(),bn(l),null;case 19:if(xt(St),w=l.memoizedState,w===null)return bn(l),null;if(m=(l.flags&128)!==0,S=w.rendering,S===null)if(m)Ul(w,!1);else{if(Yt!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(S=Jf(a),S!==null){for(l.flags|=128,Ul(w,!1),m=S.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),l.subtreeFlags=0,m=h,h=l.child;h!==null;)w=h,a=m,w.flags&=14680066,S=w.alternate,S===null?(w.childLanes=0,w.lanes=a,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=S.childLanes,w.lanes=S.lanes,w.child=S.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=S.memoizedProps,w.memoizedState=S.memoizedState,w.updateQueue=S.updateQueue,w.type=S.type,a=S.dependencies,w.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),h=h.sibling;return vt(St,St.current&1|2),l.child}a=a.sibling}w.tail!==null&&_t()>eu&&(l.flags|=128,m=!0,Ul(w,!1),l.lanes=4194304)}else{if(!m)if(a=Jf(S),a!==null){if(l.flags|=128,m=!0,h=a.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),Ul(w,!0),w.tail===null&&w.tailMode==="hidden"&&!S.alternate&&!Tt)return bn(l),null}else 2*_t()-w.renderingStartTime>eu&&h!==1073741824&&(l.flags|=128,m=!0,Ul(w,!1),l.lanes=4194304);w.isBackwards?(S.sibling=l.child,l.child=S):(h=w.last,h!==null?h.sibling=S:l.child=S,w.last=S)}return w.tail!==null?(l=w.tail,w.rendering=l,w.tail=l.sibling,w.renderingStartTime=_t(),l.sibling=null,h=St.current,vt(St,m?h&1|2:h&1),l):(bn(l),null);case 22:case 23:return P0(),m=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==m&&(l.flags|=8192),m&&(l.mode&1)!==0?(fr&1073741824)!==0&&(bn(l),l.subtreeFlags&6&&(l.flags|=8192)):bn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function u4(a,l){switch(Vp(l),l.tag){case 1:return $n(l.type)&&zf(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Ya(),xt(Wn),xt(Rn),Qp(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Xp(l),null;case 13:if(xt(St),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(t(340));$a()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return xt(St),null;case 4:return Ya(),null;case 10:return Gp(l.type._context),null;case 22:case 23:return P0(),null;case 24:return null;default:return null}}var uh=!1,Dn=!1,l4=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Za(a,l){var h=a.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(m){Ot(a,l,m)}else h.current=null}function v0(a,l,h){try{h()}catch(m){Ot(a,l,m)}}var O_=!1;function c4(a,l){if(Pp=Bi,a=cy(),xp(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var _=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{h.nodeType,w.nodeType}catch{h=null;break e}var S=0,V=-1,H=-1,J=0,se=0,ae=a,oe=null;t:for(;;){for(var ge;ae!==h||_!==0&&ae.nodeType!==3||(V=S+_),ae!==w||m!==0&&ae.nodeType!==3||(H=S+m),ae.nodeType===3&&(S+=ae.nodeValue.length),(ge=ae.firstChild)!==null;)oe=ae,ae=ge;for(;;){if(ae===a)break t;if(oe===h&&++J===_&&(V=S),oe===w&&++se===m&&(H=S),(ge=ae.nextSibling)!==null)break;ae=oe,oe=ae.parentNode}ae=ge}h=V===-1||H===-1?null:{start:V,end:H}}else h=null}h=h||{start:0,end:0}}else h=null;for(bp={focusedElem:a,selectionRange:h},Bi=!1,ve=l;ve!==null;)if(l=ve,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,ve=a;else for(;ve!==null;){l=ve;try{var ye=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(ye!==null){var Ee=ye.memoizedProps,Lt=ye.memoizedState,q=l.stateNode,$=q.getSnapshotBeforeUpdate(l.elementType===l.type?Ee:Br(l.type,Ee),Lt);q.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var Q=l.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ue){Ot(l,l.return,ue)}if(a=l.sibling,a!==null){a.return=l.return,ve=a;break}ve=l.return}return ye=O_,O_=!1,ye}function jl(a,l,h){var m=l.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var _=m=m.next;do{if((_.tag&a)===a){var w=_.destroy;_.destroy=void 0,w!==void 0&&v0(l,h,w)}_=_.next}while(_!==m)}}function lh(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&a)===a){var m=h.create;h.destroy=m()}h=h.next}while(h!==l)}}function y0(a){var l=a.ref;if(l!==null){var h=a.stateNode;switch(a.tag){case 5:a=h;break;default:a=h}typeof l=="function"?l(a):l.current=a}}function N_(a){var l=a.alternate;l!==null&&(a.alternate=null,N_(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[gi],delete l[bl],delete l[kp],delete l[$3],delete l[K3])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function k_(a){return a.tag===5||a.tag===3||a.tag===4}function M_(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||k_(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function _0(a,l,h){var m=a.tag;if(m===5||m===6)a=a.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(a,l):h.insertBefore(a,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(a,h)):(l=h,l.appendChild(a)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=Uf));else if(m!==4&&(a=a.child,a!==null))for(_0(a,l,h),a=a.sibling;a!==null;)_0(a,l,h),a=a.sibling}function w0(a,l,h){var m=a.tag;if(m===5||m===6)a=a.stateNode,l?h.insertBefore(a,l):h.appendChild(a);else if(m!==4&&(a=a.child,a!==null))for(w0(a,l,h),a=a.sibling;a!==null;)w0(a,l,h),a=a.sibling}var yn=null,Ur=!1;function Do(a,l,h){for(h=h.child;h!==null;)L_(a,l,h),h=h.sibling}function L_(a,l,h){if(rr&&typeof rr.onCommitFiberUnmount=="function")try{rr.onCommitFiberUnmount(xs,h)}catch{}switch(h.tag){case 5:Dn||Za(h,l);case 6:var m=yn,_=Ur;yn=null,Do(a,l,h),yn=m,Ur=_,yn!==null&&(Ur?(a=yn,h=h.stateNode,a.nodeType===8?a.parentNode.removeChild(h):a.removeChild(h)):yn.removeChild(h.stateNode));break;case 18:yn!==null&&(Ur?(a=yn,h=h.stateNode,a.nodeType===8?Np(a.parentNode,h):a.nodeType===1&&Np(a,h),xo(a)):Np(yn,h.stateNode));break;case 4:m=yn,_=Ur,yn=h.stateNode.containerInfo,Ur=!0,Do(a,l,h),yn=m,Ur=_;break;case 0:case 11:case 14:case 15:if(!Dn&&(m=h.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){_=m=m.next;do{var w=_,S=w.destroy;w=w.tag,S!==void 0&&((w&2)!==0||(w&4)!==0)&&v0(h,l,S),_=_.next}while(_!==m)}Do(a,l,h);break;case 1:if(!Dn&&(Za(h,l),m=h.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=h.memoizedProps,m.state=h.memoizedState,m.componentWillUnmount()}catch(V){Ot(h,l,V)}Do(a,l,h);break;case 21:Do(a,l,h);break;case 22:h.mode&1?(Dn=(m=Dn)||h.memoizedState!==null,Do(a,l,h),Dn=m):Do(a,l,h);break;default:Do(a,l,h)}}function F_(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var h=a.stateNode;h===null&&(h=a.stateNode=new l4),l.forEach(function(m){var _=_4.bind(null,a,m);h.has(m)||(h.add(m),m.then(_,_))})}}function jr(a,l){var h=l.deletions;if(h!==null)for(var m=0;m<h.length;m++){var _=h[m];try{var w=a,S=l,V=S;e:for(;V!==null;){switch(V.tag){case 5:yn=V.stateNode,Ur=!1;break e;case 3:yn=V.stateNode.containerInfo,Ur=!0;break e;case 4:yn=V.stateNode.containerInfo,Ur=!0;break e}V=V.return}if(yn===null)throw Error(t(160));L_(w,S,_),yn=null,Ur=!1;var H=_.alternate;H!==null&&(H.return=null),_.return=null}catch(J){Ot(_,l,J)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)V_(l,a),l=l.sibling}function V_(a,l){var h=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(jr(l,a),yi(a),m&4){try{jl(3,a,a.return),lh(3,a)}catch(Ee){Ot(a,a.return,Ee)}try{jl(5,a,a.return)}catch(Ee){Ot(a,a.return,Ee)}}break;case 1:jr(l,a),yi(a),m&512&&h!==null&&Za(h,h.return);break;case 5:if(jr(l,a),yi(a),m&512&&h!==null&&Za(h,h.return),a.flags&32){var _=a.stateNode;try{ms(_,"")}catch(Ee){Ot(a,a.return,Ee)}}if(m&4&&(_=a.stateNode,_!=null)){var w=a.memoizedProps,S=h!==null?h.memoizedProps:w,V=a.type,H=a.updateQueue;if(a.updateQueue=null,H!==null)try{V==="input"&&w.type==="radio"&&w.name!=null&&ma(_,w),_a(V,S);var J=_a(V,w);for(S=0;S<H.length;S+=2){var se=H[S],ae=H[S+1];se==="style"?ya(_,ae):se==="dangerouslySetInnerHTML"?df(_,ae):se==="children"?ms(_,ae):D(_,se,ae,J)}switch(V){case"input":gs(_,w);break;case"textarea":hf(_,w);break;case"select":var oe=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!w.multiple;var ge=w.value;ge!=null?Nr(_,!!w.multiple,ge,!1):oe!==!!w.multiple&&(w.defaultValue!=null?Nr(_,!!w.multiple,w.defaultValue,!0):Nr(_,!!w.multiple,w.multiple?[]:"",!1))}_[bl]=w}catch(Ee){Ot(a,a.return,Ee)}}break;case 6:if(jr(l,a),yi(a),m&4){if(a.stateNode===null)throw Error(t(162));_=a.stateNode,w=a.memoizedProps;try{_.nodeValue=w}catch(Ee){Ot(a,a.return,Ee)}}break;case 3:if(jr(l,a),yi(a),m&4&&h!==null&&h.memoizedState.isDehydrated)try{xo(l.containerInfo)}catch(Ee){Ot(a,a.return,Ee)}break;case 4:jr(l,a),yi(a);break;case 13:jr(l,a),yi(a),_=a.child,_.flags&8192&&(w=_.memoizedState!==null,_.stateNode.isHidden=w,!w||_.alternate!==null&&_.alternate.memoizedState!==null||(A0=_t())),m&4&&F_(a);break;case 22:if(se=h!==null&&h.memoizedState!==null,a.mode&1?(Dn=(J=Dn)||se,jr(l,a),Dn=J):jr(l,a),yi(a),m&8192){if(J=a.memoizedState!==null,(a.stateNode.isHidden=J)&&!se&&(a.mode&1)!==0)for(ve=a,se=a.child;se!==null;){for(ae=ve=se;ve!==null;){switch(oe=ve,ge=oe.child,oe.tag){case 0:case 11:case 14:case 15:jl(4,oe,oe.return);break;case 1:Za(oe,oe.return);var ye=oe.stateNode;if(typeof ye.componentWillUnmount=="function"){m=oe,h=oe.return;try{l=m,ye.props=l.memoizedProps,ye.state=l.memoizedState,ye.componentWillUnmount()}catch(Ee){Ot(m,h,Ee)}}break;case 5:Za(oe,oe.return);break;case 22:if(oe.memoizedState!==null){j_(ae);continue}}ge!==null?(ge.return=oe,ve=ge):j_(ae)}se=se.sibling}e:for(se=null,ae=a;;){if(ae.tag===5){if(se===null){se=ae;try{_=ae.stateNode,J?(w=_.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(V=ae.stateNode,H=ae.memoizedProps.style,S=H!=null&&H.hasOwnProperty("display")?H.display:null,V.style.display=fo("display",S))}catch(Ee){Ot(a,a.return,Ee)}}}else if(ae.tag===6){if(se===null)try{ae.stateNode.nodeValue=J?"":ae.memoizedProps}catch(Ee){Ot(a,a.return,Ee)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===a)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===a)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===a)break e;se===ae&&(se=null),ae=ae.return}se===ae&&(se=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:jr(l,a),yi(a),m&4&&F_(a);break;case 21:break;default:jr(l,a),yi(a)}}function yi(a){var l=a.flags;if(l&2){try{e:{for(var h=a.return;h!==null;){if(k_(h)){var m=h;break e}h=h.return}throw Error(t(160))}switch(m.tag){case 5:var _=m.stateNode;m.flags&32&&(ms(_,""),m.flags&=-33);var w=M_(a);w0(a,w,_);break;case 3:case 4:var S=m.stateNode.containerInfo,V=M_(a);_0(a,V,S);break;default:throw Error(t(161))}}catch(H){Ot(a,a.return,H)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function f4(a,l,h){ve=a,B_(a)}function B_(a,l,h){for(var m=(a.mode&1)!==0;ve!==null;){var _=ve,w=_.child;if(_.tag===22&&m){var S=_.memoizedState!==null||uh;if(!S){var V=_.alternate,H=V!==null&&V.memoizedState!==null||Dn;V=uh;var J=Dn;if(uh=S,(Dn=H)&&!J)for(ve=_;ve!==null;)S=ve,H=S.child,S.tag===22&&S.memoizedState!==null?z_(_):H!==null?(H.return=S,ve=H):z_(_);for(;w!==null;)ve=w,B_(w),w=w.sibling;ve=_,uh=V,Dn=J}U_(a)}else(_.subtreeFlags&8772)!==0&&w!==null?(w.return=_,ve=w):U_(a)}}function U_(a){for(;ve!==null;){var l=ve;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Dn||lh(5,l);break;case 1:var m=l.stateNode;if(l.flags&4&&!Dn)if(h===null)m.componentDidMount();else{var _=l.elementType===l.type?h.memoizedProps:Br(l.type,h.memoizedProps);m.componentDidUpdate(_,h.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var w=l.updateQueue;w!==null&&jy(l,w,m);break;case 3:var S=l.updateQueue;if(S!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}jy(l,S,h)}break;case 5:var V=l.stateNode;if(h===null&&l.flags&4){h=V;var H=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&h.focus();break;case"img":H.src&&(h.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var J=l.alternate;if(J!==null){var se=J.memoizedState;if(se!==null){var ae=se.dehydrated;ae!==null&&xo(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Dn||l.flags&512&&y0(l)}catch(oe){Ot(l,l.return,oe)}}if(l===a){ve=null;break}if(h=l.sibling,h!==null){h.return=l.return,ve=h;break}ve=l.return}}function j_(a){for(;ve!==null;){var l=ve;if(l===a){ve=null;break}var h=l.sibling;if(h!==null){h.return=l.return,ve=h;break}ve=l.return}}function z_(a){for(;ve!==null;){var l=ve;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{lh(4,l)}catch(H){Ot(l,h,H)}break;case 1:var m=l.stateNode;if(typeof m.componentDidMount=="function"){var _=l.return;try{m.componentDidMount()}catch(H){Ot(l,_,H)}}var w=l.return;try{y0(l)}catch(H){Ot(l,w,H)}break;case 5:var S=l.return;try{y0(l)}catch(H){Ot(l,S,H)}}}catch(H){Ot(l,l.return,H)}if(l===a){ve=null;break}var V=l.sibling;if(V!==null){V.return=l.return,ve=V;break}ve=l.return}}var h4=Math.ceil,ch=F.ReactCurrentDispatcher,x0=F.ReactCurrentOwner,wr=F.ReactCurrentBatchConfig,et=0,un=null,Gt=null,_n=0,fr=0,Ja=Io(0),Yt=0,zl=null,Fs=0,fh=0,E0=0,Hl=null,qn=null,A0=0,eu=1/0,Xi=null,hh=!1,T0=null,Oo=null,dh=!1,No=null,ph=0,Gl=0,C0=null,gh=-1,mh=0;function Un(){return(et&6)!==0?_t():gh!==-1?gh:gh=_t()}function ko(a){return(a.mode&1)===0?1:(et&2)!==0&&_n!==0?_n&-_n:X3.transition!==null?(mh===0&&(mh=fl()),mh):(a=Ye,a!==0||(a=window.event,a=a===void 0?16:Pa(a.type)),a)}function zr(a,l,h,m){if(50<Gl)throw Gl=0,C0=null,Error(t(185));Cs(a,h,m),((et&2)===0||a!==un)&&(a===un&&((et&2)===0&&(fh|=h),Yt===4&&Mo(a,_n)),Xn(a,m),h===1&&et===0&&(l.mode&1)===0&&(eu=_t()+500,Gf&&Ro()))}function Xn(a,l){var h=a.callbackNode;Ts(a,l);var m=Li(a,a===un?_n:0);if(m===0)h!==null&&Ea(h),a.callbackNode=null,a.callbackPriority=0;else if(l=m&-m,a.callbackPriority!==l){if(h!=null&&Ea(h),l===1)a.tag===0?q3(G_.bind(null,a)):Py(G_.bind(null,a)),G3(function(){(et&6)===0&&Ro()}),h=null;else{switch(oi(m)){case 1:h=Aa;break;case 4:h=ul;break;case 16:h=ws;break;case 536870912:h=Ta;break;default:h=ws}h=Z_(h,H_.bind(null,a))}a.callbackPriority=l,a.callbackNode=h}}function H_(a,l){if(gh=-1,mh=0,(et&6)!==0)throw Error(t(327));var h=a.callbackNode;if(tu()&&a.callbackNode!==h)return null;var m=Li(a,a===un?_n:0);if(m===0)return null;if((m&30)!==0||(m&a.expiredLanes)!==0||l)l=vh(a,m);else{l=m;var _=et;et|=2;var w=$_();(un!==a||_n!==l)&&(Xi=null,eu=_t()+500,Bs(a,l));do try{g4();break}catch(V){W_(a,V)}while(!0);Hp(),ch.current=w,et=_,Gt!==null?l=0:(un=null,_n=0,l=Yt)}if(l!==0){if(l===2&&(_=cl(a),_!==0&&(m=_,l=I0(a,_))),l===1)throw h=zl,Bs(a,0),Mo(a,m),Xn(a,_t()),h;if(l===6)Mo(a,m);else{if(_=a.current.alternate,(m&30)===0&&!d4(_)&&(l=vh(a,m),l===2&&(w=cl(a),w!==0&&(m=w,l=I0(a,w))),l===1))throw h=zl,Bs(a,0),Mo(a,m),Xn(a,_t()),h;switch(a.finishedWork=_,a.finishedLanes=m,l){case 0:case 1:throw Error(t(345));case 2:Us(a,qn,Xi);break;case 3:if(Mo(a,m),(m&130023424)===m&&(l=A0+500-_t(),10<l)){if(Li(a,0)!==0)break;if(_=a.suspendedLanes,(_&m)!==m){Un(),a.pingedLanes|=a.suspendedLanes&_;break}a.timeoutHandle=Op(Us.bind(null,a,qn,Xi),l);break}Us(a,qn,Xi);break;case 4:if(Mo(a,m),(m&4194240)===m)break;for(l=a.eventTimes,_=-1;0<m;){var S=31-ir(m);w=1<<S,S=l[S],S>_&&(_=S),m&=~w}if(m=_,m=_t()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*h4(m/1960))-m,10<m){a.timeoutHandle=Op(Us.bind(null,a,qn,Xi),m);break}Us(a,qn,Xi);break;case 5:Us(a,qn,Xi);break;default:throw Error(t(329))}}}return Xn(a,_t()),a.callbackNode===h?H_.bind(null,a):null}function I0(a,l){var h=Hl;return a.current.memoizedState.isDehydrated&&(Bs(a,l).flags|=256),a=vh(a,l),a!==2&&(l=qn,qn=h,l!==null&&S0(l)),a}function S0(a){qn===null?qn=a:qn.push.apply(qn,a)}function d4(a){for(var l=a;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var m=0;m<h.length;m++){var _=h[m],w=_.getSnapshot;_=_.value;try{if(!Fr(w(),_))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Mo(a,l){for(l&=~E0,l&=~fh,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var h=31-ir(l),m=1<<h;a[h]=-1,l&=~m}}function G_(a){if((et&6)!==0)throw Error(t(327));tu();var l=Li(a,0);if((l&1)===0)return Xn(a,_t()),null;var h=vh(a,l);if(a.tag!==0&&h===2){var m=cl(a);m!==0&&(l=m,h=I0(a,m))}if(h===1)throw h=zl,Bs(a,0),Mo(a,l),Xn(a,_t()),h;if(h===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,Us(a,qn,Xi),Xn(a,_t()),null}function R0(a,l){var h=et;et|=1;try{return a(l)}finally{et=h,et===0&&(eu=_t()+500,Gf&&Ro())}}function Vs(a){No!==null&&No.tag===0&&(et&6)===0&&tu();var l=et;et|=1;var h=wr.transition,m=Ye;try{if(wr.transition=null,Ye=1,a)return a()}finally{Ye=m,wr.transition=h,et=l,(et&6)===0&&Ro()}}function P0(){fr=Ja.current,xt(Ja)}function Bs(a,l){a.finishedWork=null,a.finishedLanes=0;var h=a.timeoutHandle;if(h!==-1&&(a.timeoutHandle=-1,H3(h)),Gt!==null)for(h=Gt.return;h!==null;){var m=h;switch(Vp(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&zf();break;case 3:Ya(),xt(Wn),xt(Rn),Qp();break;case 5:Xp(m);break;case 4:Ya();break;case 13:xt(St);break;case 19:xt(St);break;case 10:Gp(m.type._context);break;case 22:case 23:P0()}h=h.return}if(un=a,Gt=a=Lo(a.current,null),_n=fr=l,Yt=0,zl=null,E0=fh=Fs=0,qn=Hl=null,ks!==null){for(l=0;l<ks.length;l++)if(h=ks[l],m=h.interleaved,m!==null){h.interleaved=null;var _=m.next,w=h.pending;if(w!==null){var S=w.next;w.next=_,m.next=S}h.pending=m}ks=null}return a}function W_(a,l){do{var h=Gt;try{if(Hp(),eh.current=ih,th){for(var m=Rt.memoizedState;m!==null;){var _=m.queue;_!==null&&(_.pending=null),m=m.next}th=!1}if(Ls=0,an=Xt=Rt=null,Ll=!1,Fl=0,x0.current=null,h===null||h.return===null){Yt=1,zl=l,Gt=null;break}e:{var w=a,S=h.return,V=h,H=l;if(l=_n,V.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var J=H,se=V,ae=se.tag;if((se.mode&1)===0&&(ae===0||ae===11||ae===15)){var oe=se.alternate;oe?(se.updateQueue=oe.updateQueue,se.memoizedState=oe.memoizedState,se.lanes=oe.lanes):(se.updateQueue=null,se.memoizedState=null)}var ge=m_(S);if(ge!==null){ge.flags&=-257,v_(ge,S,V,w,l),ge.mode&1&&g_(w,J,l),l=ge,H=J;var ye=l.updateQueue;if(ye===null){var Ee=new Set;Ee.add(H),l.updateQueue=Ee}else ye.add(H);break e}else{if((l&1)===0){g_(w,J,l),b0();break e}H=Error(t(426))}}else if(Tt&&V.mode&1){var Lt=m_(S);if(Lt!==null){(Lt.flags&65536)===0&&(Lt.flags|=256),v_(Lt,S,V,w,l),jp(Qa(H,V));break e}}w=H=Qa(H,V),Yt!==4&&(Yt=2),Hl===null?Hl=[w]:Hl.push(w),w=S;do{switch(w.tag){case 3:w.flags|=65536,l&=-l,w.lanes|=l;var q=d_(w,H,l);Uy(w,q);break e;case 1:V=H;var $=w.type,Q=w.stateNode;if((w.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Oo===null||!Oo.has(Q)))){w.flags|=65536,l&=-l,w.lanes|=l;var ue=p_(w,V,l);Uy(w,ue);break e}}w=w.return}while(w!==null)}q_(h)}catch(Ce){l=Ce,Gt===h&&h!==null&&(Gt=h=h.return);continue}break}while(!0)}function $_(){var a=ch.current;return ch.current=ih,a===null?ih:a}function b0(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),un===null||(Fs&268435455)===0&&(fh&268435455)===0||Mo(un,_n)}function vh(a,l){var h=et;et|=2;var m=$_();(un!==a||_n!==l)&&(Xi=null,Bs(a,l));do try{p4();break}catch(_){W_(a,_)}while(!0);if(Hp(),et=h,ch.current=m,Gt!==null)throw Error(t(261));return un=null,_n=0,Yt}function p4(){for(;Gt!==null;)K_(Gt)}function g4(){for(;Gt!==null&&!_s();)K_(Gt)}function K_(a){var l=Q_(a.alternate,a,fr);a.memoizedProps=a.pendingProps,l===null?q_(a):Gt=l,x0.current=null}function q_(a){var l=a;do{var h=l.alternate;if(a=l.return,(l.flags&32768)===0){if(h=a4(h,l,fr),h!==null){Gt=h;return}}else{if(h=u4(h,l),h!==null){h.flags&=32767,Gt=h;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Yt=6,Gt=null;return}}if(l=l.sibling,l!==null){Gt=l;return}Gt=l=a}while(l!==null);Yt===0&&(Yt=5)}function Us(a,l,h){var m=Ye,_=wr.transition;try{wr.transition=null,Ye=1,m4(a,l,h,m)}finally{wr.transition=_,Ye=m}return null}function m4(a,l,h,m){do tu();while(No!==null);if((et&6)!==0)throw Error(t(327));h=a.finishedWork;var _=a.finishedLanes;if(h===null)return null;if(a.finishedWork=null,a.finishedLanes=0,h===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var w=h.lanes|h.childLanes;if(mp(a,w),a===un&&(Gt=un=null,_n=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||dh||(dh=!0,Z_(ws,function(){return tu(),null})),w=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||w){w=wr.transition,wr.transition=null;var S=Ye;Ye=1;var V=et;et|=4,x0.current=null,c4(a,h),V_(h,a),L3(bp),Bi=!!Pp,bp=Pp=null,a.current=h,f4(h),Mi(),et=V,Ye=S,wr.transition=w}else a.current=h;if(dh&&(dh=!1,No=a,ph=_),w=a.pendingLanes,w===0&&(Oo=null),Tf(h.stateNode),Xn(a,_t()),l!==null)for(m=a.onRecoverableError,h=0;h<l.length;h++)_=l[h],m(_.value,{componentStack:_.stack,digest:_.digest});if(hh)throw hh=!1,a=T0,T0=null,a;return(ph&1)!==0&&a.tag!==0&&tu(),w=a.pendingLanes,(w&1)!==0?a===C0?Gl++:(Gl=0,C0=a):Gl=0,Ro(),null}function tu(){if(No!==null){var a=oi(ph),l=wr.transition,h=Ye;try{if(wr.transition=null,Ye=16>a?16:a,No===null)var m=!1;else{if(a=No,No=null,ph=0,(et&6)!==0)throw Error(t(331));var _=et;for(et|=4,ve=a.current;ve!==null;){var w=ve,S=w.child;if((ve.flags&16)!==0){var V=w.deletions;if(V!==null){for(var H=0;H<V.length;H++){var J=V[H];for(ve=J;ve!==null;){var se=ve;switch(se.tag){case 0:case 11:case 15:jl(8,se,w)}var ae=se.child;if(ae!==null)ae.return=se,ve=ae;else for(;ve!==null;){se=ve;var oe=se.sibling,ge=se.return;if(N_(se),se===J){ve=null;break}if(oe!==null){oe.return=ge,ve=oe;break}ve=ge}}}var ye=w.alternate;if(ye!==null){var Ee=ye.child;if(Ee!==null){ye.child=null;do{var Lt=Ee.sibling;Ee.sibling=null,Ee=Lt}while(Ee!==null)}}ve=w}}if((w.subtreeFlags&2064)!==0&&S!==null)S.return=w,ve=S;else e:for(;ve!==null;){if(w=ve,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:jl(9,w,w.return)}var q=w.sibling;if(q!==null){q.return=w.return,ve=q;break e}ve=w.return}}var $=a.current;for(ve=$;ve!==null;){S=ve;var Q=S.child;if((S.subtreeFlags&2064)!==0&&Q!==null)Q.return=S,ve=Q;else e:for(S=$;ve!==null;){if(V=ve,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:lh(9,V)}}catch(Ce){Ot(V,V.return,Ce)}if(V===S){ve=null;break e}var ue=V.sibling;if(ue!==null){ue.return=V.return,ve=ue;break e}ve=V.return}}if(et=_,Ro(),rr&&typeof rr.onPostCommitFiberRoot=="function")try{rr.onPostCommitFiberRoot(xs,a)}catch{}m=!0}return m}finally{Ye=h,wr.transition=l}}return!1}function X_(a,l,h){l=Qa(h,l),l=d_(a,l,1),a=bo(a,l,1),l=Un(),a!==null&&(Cs(a,1,l),Xn(a,l))}function Ot(a,l,h){if(a.tag===3)X_(a,a,h);else for(;l!==null;){if(l.tag===3){X_(l,a,h);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Oo===null||!Oo.has(m))){a=Qa(h,a),a=p_(l,a,1),l=bo(l,a,1),a=Un(),l!==null&&(Cs(l,1,a),Xn(l,a));break}}l=l.return}}function v4(a,l,h){var m=a.pingCache;m!==null&&m.delete(l),l=Un(),a.pingedLanes|=a.suspendedLanes&h,un===a&&(_n&h)===h&&(Yt===4||Yt===3&&(_n&130023424)===_n&&500>_t()-A0?Bs(a,0):E0|=h),Xn(a,l)}function Y_(a,l){l===0&&((a.mode&1)===0?l=1:(l=yo,yo<<=1,(yo&130023424)===0&&(yo=4194304)));var h=Un();a=$i(a,l),a!==null&&(Cs(a,l,h),Xn(a,h))}function y4(a){var l=a.memoizedState,h=0;l!==null&&(h=l.retryLane),Y_(a,h)}function _4(a,l){var h=0;switch(a.tag){case 13:var m=a.stateNode,_=a.memoizedState;_!==null&&(h=_.retryLane);break;case 19:m=a.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(l),Y_(a,h)}var Q_;Q_=function(a,l,h){if(a!==null)if(a.memoizedProps!==l.pendingProps||Wn.current)Kn=!0;else{if((a.lanes&h)===0&&(l.flags&128)===0)return Kn=!1,s4(a,l,h);Kn=(a.flags&131072)!==0}else Kn=!1,Tt&&(l.flags&1048576)!==0&&by(l,$f,l.index);switch(l.lanes=0,l.tag){case 2:var m=l.type;ah(a,l),a=l.pendingProps;var _=Ha(l,Rn.current);Xa(l,h),_=e0(null,l,m,a,_,h);var w=t0();return l.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,$n(m)?(w=!0,Hf(l)):w=!1,l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Kp(l),_.updater=oh,l.stateNode=_,_._reactInternals=l,a0(l,m,a,h),l=f0(null,l,m,!0,w,h)):(l.tag=0,Tt&&w&&Fp(l),Bn(null,l,_,h),l=l.child),l;case 16:m=l.elementType;e:{switch(ah(a,l),a=l.pendingProps,_=m._init,m=_(m._payload),l.type=m,_=l.tag=x4(m),a=Br(m,a),_){case 0:l=c0(null,l,m,a,h);break e;case 1:l=A_(null,l,m,a,h);break e;case 11:l=y_(null,l,m,a,h);break e;case 14:l=__(null,l,m,Br(m.type,a),h);break e}throw Error(t(306,m,""))}return l;case 0:return m=l.type,_=l.pendingProps,_=l.elementType===m?_:Br(m,_),c0(a,l,m,_,h);case 1:return m=l.type,_=l.pendingProps,_=l.elementType===m?_:Br(m,_),A_(a,l,m,_,h);case 3:e:{if(T_(l),a===null)throw Error(t(387));m=l.pendingProps,w=l.memoizedState,_=w.element,By(a,l),Zf(l,m,null,h);var S=l.memoizedState;if(m=S.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){_=Qa(Error(t(423)),l),l=C_(a,l,m,h,_);break e}else if(m!==_){_=Qa(Error(t(424)),l),l=C_(a,l,m,h,_);break e}else for(cr=Co(l.stateNode.containerInfo.firstChild),lr=l,Tt=!0,Vr=null,h=Fy(l,null,m,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if($a(),m===_){l=qi(a,l,h);break e}Bn(a,l,m,h)}l=l.child}return l;case 5:return zy(l),a===null&&Up(l),m=l.type,_=l.pendingProps,w=a!==null?a.memoizedProps:null,S=_.children,Dp(m,_)?S=null:w!==null&&Dp(m,w)&&(l.flags|=32),E_(a,l),Bn(a,l,S,h),l.child;case 6:return a===null&&Up(l),null;case 13:return I_(a,l,h);case 4:return qp(l,l.stateNode.containerInfo),m=l.pendingProps,a===null?l.child=Ka(l,null,m,h):Bn(a,l,m,h),l.child;case 11:return m=l.type,_=l.pendingProps,_=l.elementType===m?_:Br(m,_),y_(a,l,m,_,h);case 7:return Bn(a,l,l.pendingProps,h),l.child;case 8:return Bn(a,l,l.pendingProps.children,h),l.child;case 12:return Bn(a,l,l.pendingProps.children,h),l.child;case 10:e:{if(m=l.type._context,_=l.pendingProps,w=l.memoizedProps,S=_.value,vt(Xf,m._currentValue),m._currentValue=S,w!==null)if(Fr(w.value,S)){if(w.children===_.children&&!Wn.current){l=qi(a,l,h);break e}}else for(w=l.child,w!==null&&(w.return=l);w!==null;){var V=w.dependencies;if(V!==null){S=w.child;for(var H=V.firstContext;H!==null;){if(H.context===m){if(w.tag===1){H=Ki(-1,h&-h),H.tag=2;var J=w.updateQueue;if(J!==null){J=J.shared;var se=J.pending;se===null?H.next=H:(H.next=se.next,se.next=H),J.pending=H}}w.lanes|=h,H=w.alternate,H!==null&&(H.lanes|=h),Wp(w.return,h,l),V.lanes|=h;break}H=H.next}}else if(w.tag===10)S=w.type===l.type?null:w.child;else if(w.tag===18){if(S=w.return,S===null)throw Error(t(341));S.lanes|=h,V=S.alternate,V!==null&&(V.lanes|=h),Wp(S,h,l),S=w.sibling}else S=w.child;if(S!==null)S.return=w;else for(S=w;S!==null;){if(S===l){S=null;break}if(w=S.sibling,w!==null){w.return=S.return,S=w;break}S=S.return}w=S}Bn(a,l,_.children,h),l=l.child}return l;case 9:return _=l.type,m=l.pendingProps.children,Xa(l,h),_=yr(_),m=m(_),l.flags|=1,Bn(a,l,m,h),l.child;case 14:return m=l.type,_=Br(m,l.pendingProps),_=Br(m.type,_),__(a,l,m,_,h);case 15:return w_(a,l,l.type,l.pendingProps,h);case 17:return m=l.type,_=l.pendingProps,_=l.elementType===m?_:Br(m,_),ah(a,l),l.tag=1,$n(m)?(a=!0,Hf(l)):a=!1,Xa(l,h),f_(l,m,_),a0(l,m,_,h),f0(null,l,m,!0,a,h);case 19:return R_(a,l,h);case 22:return x_(a,l,h)}throw Error(t(156,l.tag))};function Z_(a,l){return al(a,l)}function w4(a,l,h,m){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(a,l,h,m){return new w4(a,l,h,m)}function D0(a){return a=a.prototype,!(!a||!a.isReactComponent)}function x4(a){if(typeof a=="function")return D0(a)?1:0;if(a!=null){if(a=a.$$typeof,a===z)return 11;if(a===Le)return 14}return 2}function Lo(a,l){var h=a.alternate;return h===null?(h=xr(a.tag,l,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=l,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&14680064,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,l=a.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h}function yh(a,l,h,m,_,w){var S=2;if(m=a,typeof a=="function")D0(a)&&(S=1);else if(typeof a=="string")S=5;else e:switch(a){case R:return js(h.children,_,w,l);case I:S=8,_|=8;break;case O:return a=xr(12,h,l,_|2),a.elementType=O,a.lanes=w,a;case L:return a=xr(13,h,l,_),a.elementType=L,a.lanes=w,a;case fe:return a=xr(19,h,l,_),a.elementType=fe,a.lanes=w,a;case Te:return _h(h,_,w,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case M:S=10;break e;case B:S=9;break e;case z:S=11;break e;case Le:S=14;break e;case je:S=16,m=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return l=xr(S,h,l,_),l.elementType=a,l.type=m,l.lanes=w,l}function js(a,l,h,m){return a=xr(7,a,m,l),a.lanes=h,a}function _h(a,l,h,m){return a=xr(22,a,m,l),a.elementType=Te,a.lanes=h,a.stateNode={isHidden:!1},a}function O0(a,l,h){return a=xr(6,a,null,l),a.lanes=h,a}function N0(a,l,h){return l=xr(4,a.children!==null?a.children:[],a.key,l),l.lanes=h,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function E4(a,l,h,m,_){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hl(0),this.expirationTimes=hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hl(0),this.identifierPrefix=m,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function k0(a,l,h,m,_,w,S,V,H){return a=new E4(a,l,h,V,H),l===1?(l=1,w===!0&&(l|=8)):l=0,w=xr(3,null,null,l),a.current=w,w.stateNode=a,w.memoizedState={element:m,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kp(w),a}function A4(a,l,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:m==null?null:""+m,children:a,containerInfo:l,implementation:h}}function J_(a){if(!a)return So;a=a._reactInternals;e:{if(Mr(a)!==a||a.tag!==1)throw Error(t(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if($n(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(a.tag===1){var h=a.type;if($n(h))return Sy(a,h,l)}return l}function e2(a,l,h,m,_,w,S,V,H){return a=k0(h,m,!0,a,_,w,S,V,H),a.context=J_(null),h=a.current,m=Un(),_=ko(h),w=Ki(m,_),w.callback=l??null,bo(h,w,_),a.current.lanes=_,Cs(a,_,m),Xn(a,m),a}function wh(a,l,h,m){var _=l.current,w=Un(),S=ko(_);return h=J_(h),l.context===null?l.context=h:l.pendingContext=h,l=Ki(w,S),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=bo(_,l,S),a!==null&&(zr(a,_,S,w),Qf(a,_,S)),S}function xh(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function t2(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<l?h:l}}function M0(a,l){t2(a,l),(a=a.alternate)&&t2(a,l)}function T4(){return null}var n2=typeof reportError=="function"?reportError:function(a){console.error(a)};function L0(a){this._internalRoot=a}Eh.prototype.render=L0.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(t(409));wh(a,l,null,null)},Eh.prototype.unmount=L0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;Vs(function(){wh(null,a,null,null)}),l[zi]=null}};function Eh(a){this._internalRoot=a}Eh.prototype.unstable_scheduleHydration=function(a){if(a){var l=ml();a={blockedOn:null,target:a,priority:l};for(var h=0;h<or.length&&l!==0&&l<or[h].priority;h++);or.splice(h,0,a),h===0&&Sa(a)}};function F0(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Ah(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function r2(){}function C4(a,l,h,m,_){if(_){if(typeof m=="function"){var w=m;m=function(){var J=xh(S);w.call(J)}}var S=e2(l,m,a,0,null,!1,!1,"",r2);return a._reactRootContainer=S,a[zi]=S.current,Rl(a.nodeType===8?a.parentNode:a),Vs(),S}for(;_=a.lastChild;)a.removeChild(_);if(typeof m=="function"){var V=m;m=function(){var J=xh(H);V.call(J)}}var H=k0(a,0,!1,null,null,!1,!1,"",r2);return a._reactRootContainer=H,a[zi]=H.current,Rl(a.nodeType===8?a.parentNode:a),Vs(function(){wh(l,H,h,m)}),H}function Th(a,l,h,m,_){var w=h._reactRootContainer;if(w){var S=w;if(typeof _=="function"){var V=_;_=function(){var H=xh(S);V.call(H)}}wh(l,S,a,_)}else S=C4(h,l,a,_,m);return xh(S)}pl=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var h=st(l.pendingLanes);h!==0&&(dl(l,h|1),Xn(l,_t()),(et&6)===0&&(eu=_t()+500,Ro()))}break;case 13:Vs(function(){var m=$i(a,1);if(m!==null){var _=Un();zr(m,a,1,_)}}),M0(a,1)}},Ca=function(a){if(a.tag===13){var l=$i(a,134217728);if(l!==null){var h=Un();zr(l,a,134217728,h)}M0(a,134217728)}},gl=function(a){if(a.tag===13){var l=ko(a),h=$i(a,l);if(h!==null){var m=Un();zr(h,a,l,m)}M0(a,l)}},ml=function(){return Ye},vl=function(a,l){var h=Ye;try{return Ye=a,l()}finally{Ye=h}},Oi=function(a,l,h){switch(l){case"input":if(gs(a,h),l=h.name,h.type==="radio"&&l!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var m=h[l];if(m!==a&&m.form===a.form){var _=jf(m);if(!_)throw Error(t(90));ei(m),gs(m,_)}}}break;case"textarea":hf(a,h);break;case"select":l=h.value,l!=null&&Nr(a,!!h.multiple,l,!1)}},gf=R0,mf=Vs;var I4={usingClientEntryPoint:!1,Events:[Dl,ja,jf,po,go,R0]},Wl={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S4={bundleType:Wl.bundleType,version:Wl.version,rendererPackageName:Wl.rendererPackageName,rendererConfig:Wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Af(a),a===null?null:a.stateNode},findFiberByHostInstance:Wl.findFiberByHostInstance||T4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ch.isDisabled&&Ch.supportsFiber)try{xs=Ch.inject(S4),rr=Ch}catch{}}return Yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I4,Yn.createPortal=function(a,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!F0(l))throw Error(t(200));return A4(a,l,null,h)},Yn.createRoot=function(a,l){if(!F0(a))throw Error(t(299));var h=!1,m="",_=n2;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(_=l.onRecoverableError)),l=k0(a,1,!1,null,null,h,!1,m,_),a[zi]=l.current,Rl(a.nodeType===8?a.parentNode:a),new L0(l)},Yn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Af(l),a=a===null?null:a.stateNode,a},Yn.flushSync=function(a){return Vs(a)},Yn.hydrate=function(a,l,h){if(!Ah(l))throw Error(t(200));return Th(null,a,l,!0,h)},Yn.hydrateRoot=function(a,l,h){if(!F0(a))throw Error(t(405));var m=h!=null&&h.hydratedSources||null,_=!1,w="",S=n2;if(h!=null&&(h.unstable_strictMode===!0&&(_=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onRecoverableError!==void 0&&(S=h.onRecoverableError)),l=e2(l,null,a,1,h??null,_,!1,w,S),a[zi]=l.current,Rl(a),m)for(a=0;a<m.length;a++)h=m[a],_=h._getVersion,_=_(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,_]:l.mutableSourceEagerHydrationData.push(h,_);return new Eh(l)},Yn.render=function(a,l,h){if(!Ah(l))throw Error(t(200));return Th(null,a,l,!1,h)},Yn.unmountComponentAtNode=function(a){if(!Ah(a))throw Error(t(40));return a._reactRootContainer?(Vs(function(){Th(null,null,a,!1,function(){a._reactRootContainer=null,a[zi]=null})}),!0):!1},Yn.unstable_batchedUpdates=R0,Yn.unstable_renderSubtreeIntoContainer=function(a,l,h,m){if(!Ah(h))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Th(a,l,h,!1,m)},Yn.version="18.3.1-next-f1338f8080-20240426",Yn}var f2;function lA(){if(f2)return U0.exports;f2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),U0.exports=L4(),U0.exports}var h2;function F4(){if(h2)return Ih;h2=1;var n=lA();return Ih.createRoot=n.createRoot,Ih.hydrateRoot=n.hydrateRoot,Ih}var V4=F4();const B4=Bu(V4);var H0,d2;function U4(){if(d2)return H0;d2=1;var n=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(o,s){if(o===s)return!0;if(o&&s&&typeof o=="object"&&typeof s=="object"){if(o.constructor!==s.constructor)return!1;var u,c,f;if(Array.isArray(o)){if(u=o.length,u!=s.length)return!1;for(c=u;c--!==0;)if(!i(o[c],s[c]))return!1;return!0}var d;if(e&&o instanceof Map&&s instanceof Map){if(o.size!==s.size)return!1;for(d=o.entries();!(c=d.next()).done;)if(!s.has(c.value[0]))return!1;for(d=o.entries();!(c=d.next()).done;)if(!i(c.value[1],s.get(c.value[0])))return!1;return!0}if(t&&o instanceof Set&&s instanceof Set){if(o.size!==s.size)return!1;for(d=o.entries();!(c=d.next()).done;)if(!s.has(c.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(s)){if(u=o.length,u!=s.length)return!1;for(c=u;c--!==0;)if(o[c]!==s[c])return!1;return!0}if(o.constructor===RegExp)return o.source===s.source&&o.flags===s.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof s.valueOf=="function")return o.valueOf()===s.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof s.toString=="function")return o.toString()===s.toString();if(f=Object.keys(o),u=f.length,u!==Object.keys(s).length)return!1;for(c=u;c--!==0;)if(!Object.prototype.hasOwnProperty.call(s,f[c]))return!1;if(n&&o instanceof Element)return!1;for(c=u;c--!==0;)if(!((f[c]==="_owner"||f[c]==="__v"||f[c]==="__o")&&o.$$typeof)&&!i(o[f[c]],s[f[c]]))return!1;return!0}return o!==o&&s!==s}return H0=function(s,u){try{return i(s,u)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},H0}var j4=U4();const z4=Bu(j4);var G0,p2;function H4(){if(p2)return G0;p2=1;var n=function(e,t,r,i,o,s,u,c){if(!e){var f;if(t===void 0)f=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,i,o,s,u,c],p=0;f=new Error(t.replace(/%s/g,function(){return d[p++]})),f.name="Invariant Violation"}throw f.framesToPop=1,f}};return G0=n,G0}var G4=H4();const g2=Bu(G4);var W0,m2;function W4(){return m2||(m2=1,W0=function(e,t,r,i){var o=r?r.call(i,e,t):void 0;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var s=Object.keys(e),u=Object.keys(t);if(s.length!==u.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(t),f=0;f<s.length;f++){var d=s[f];if(!c(d))return!1;var p=e[d],v=t[d];if(o=r?r.call(i,p,v,d):void 0,o===!1||o===void 0&&p!==v)return!1}return!0}),W0}var $4=W4();const K4=Bu($4);var cA=(n=>(n.BASE="base",n.BODY="body",n.HEAD="head",n.HTML="html",n.LINK="link",n.META="meta",n.NOSCRIPT="noscript",n.SCRIPT="script",n.STYLE="style",n.TITLE="title",n.FRAGMENT="Symbol(react.fragment)",n))(cA||{}),$0={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},v2=Object.values(cA),rm={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},q4=Object.entries(rm).reduce((n,[e,t])=>(n[t]=e,n),{}),qr="data-rh",yu={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},_u=(n,e)=>{for(let t=n.length-1;t>=0;t-=1){const r=n[t];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},X4=n=>{let e=_u(n,"title");const t=_u(n,yu.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),t&&e)return t.replace(/%s/g,()=>e);const r=_u(n,yu.DEFAULT_TITLE);return e||r||void 0},Y4=n=>_u(n,yu.ON_CHANGE_CLIENT_STATE)||(()=>{}),K0=(n,e)=>e.filter(t=>typeof t[n]<"u").map(t=>t[n]).reduce((t,r)=>({...t,...r}),{}),Q4=(n,e)=>e.filter(t=>typeof t.base<"u").map(t=>t.base).reverse().reduce((t,r)=>{if(!t.length){const i=Object.keys(r);for(let o=0;o<i.length;o+=1){const u=i[o].toLowerCase();if(n.indexOf(u)!==-1&&r[u])return t.concat(r)}}return t},[]),Z4=n=>console&&typeof console.warn=="function"&&console.warn(n),Kl=(n,e,t)=>{const r={};return t.filter(i=>Array.isArray(i[n])?!0:(typeof i[n]<"u"&&Z4(`Helmet: ${n} should be of type "Array". Instead found type "${typeof i[n]}"`),!1)).map(i=>i[n]).reverse().reduce((i,o)=>{const s={};o.filter(c=>{let f;const d=Object.keys(c);for(let v=0;v<d.length;v+=1){const y=d[v],E=y.toLowerCase();e.indexOf(E)!==-1&&!(f==="rel"&&c[f].toLowerCase()==="canonical")&&!(E==="rel"&&c[E].toLowerCase()==="stylesheet")&&(f=E),e.indexOf(y)!==-1&&(y==="innerHTML"||y==="cssText"||y==="itemprop")&&(f=y)}if(!f||!c[f])return!1;const p=c[f].toLowerCase();return r[f]||(r[f]={}),s[f]||(s[f]={}),r[f][p]?!1:(s[f][p]=!0,!0)}).reverse().forEach(c=>i.push(c));const u=Object.keys(s);for(let c=0;c<u.length;c+=1){const f=u[c],d={...r[f],...s[f]};r[f]=d}return i},[]).reverse()},J4=(n,e)=>{if(Array.isArray(n)&&n.length){for(let t=0;t<n.length;t+=1)if(n[t][e])return!0}return!1},eR=n=>({baseTag:Q4(["href"],n),bodyAttributes:K0("bodyAttributes",n),defer:_u(n,yu.DEFER),encode:_u(n,yu.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:K0("htmlAttributes",n),linkTags:Kl("link",["rel","href"],n),metaTags:Kl("meta",["name","charset","http-equiv","property","itemprop"],n),noscriptTags:Kl("noscript",["innerHTML"],n),onChangeClientState:Y4(n),scriptTags:Kl("script",["src","innerHTML"],n),styleTags:Kl("style",["cssText"],n),title:X4(n),titleAttributes:K0("titleAttributes",n),prioritizeSeoTags:J4(n,yu.PRIORITIZE_SEO_TAGS)}),fA=n=>Array.isArray(n)?n.join(""):n,tR=(n,e)=>{const t=Object.keys(n);for(let r=0;r<t.length;r+=1)if(e[t[r]]&&e[t[r]].includes(n[t[r]]))return!0;return!1},q0=(n,e)=>Array.isArray(n)?n.reduce((t,r)=>(tR(r,e)?t.priority.push(r):t.default.push(r),t),{priority:[],default:[]}):{default:n,priority:[]},y2=(n,e)=>({...n,[e]:void 0}),nR=["noscript","script","style"],F1=(n,e=!0)=>e===!1?String(n):String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),hA=n=>Object.keys(n).reduce((e,t)=>{const r=typeof n[t]<"u"?`${t}="${n[t]}"`:`${t}`;return e?`${e} ${r}`:r},""),rR=(n,e,t,r)=>{const i=hA(t),o=fA(e);return i?`<${n} ${qr}="true" ${i}>${F1(o,r)}</${n}>`:`<${n} ${qr}="true">${F1(o,r)}</${n}>`},iR=(n,e,t=!0)=>e.reduce((r,i)=>{const o=i,s=Object.keys(o).filter(f=>!(f==="innerHTML"||f==="cssText")).reduce((f,d)=>{const p=typeof o[d]>"u"?d:`${d}="${F1(o[d],t)}"`;return f?`${f} ${p}`:p},""),u=o.innerHTML||o.cssText||"",c=nR.indexOf(n)===-1;return`${r}<${n} ${qr}="true" ${s}${c?"/>":`>${u}</${n}>`}`},""),dA=(n,e={})=>Object.keys(n).reduce((t,r)=>{const i=rm[r];return t[i||r]=n[r],t},e),oR=(n,e,t)=>{const r={key:e,[qr]:!0},i=dA(t,r);return[Tn.createElement("title",i,e)]},qh=(n,e)=>e.map((t,r)=>{const i={key:r,[qr]:!0};return Object.keys(t).forEach(o=>{const u=rm[o]||o;if(u==="innerHTML"||u==="cssText"){const c=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:c}}else i[u]=t[o]}),Tn.createElement(n,i)}),Cr=(n,e,t=!0)=>{switch(n){case"title":return{toComponent:()=>oR(n,e.title,e.titleAttributes),toString:()=>rR(n,e.title,e.titleAttributes,t)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>dA(e),toString:()=>hA(e)};default:return{toComponent:()=>qh(n,e),toString:()=>iR(n,e,t)}}},sR=({metaTags:n,linkTags:e,scriptTags:t,encode:r})=>{const i=q0(n,$0.meta),o=q0(e,$0.link),s=q0(t,$0.script);return{priorityMethods:{toComponent:()=>[...qh("meta",i.priority),...qh("link",o.priority),...qh("script",s.priority)],toString:()=>`${Cr("meta",i.priority,r)} ${Cr("link",o.priority,r)} ${Cr("script",s.priority,r)}`},metaTags:i.default,linkTags:o.default,scriptTags:s.default}},aR=n=>{const{baseTag:e,bodyAttributes:t,encode:r=!0,htmlAttributes:i,noscriptTags:o,styleTags:s,title:u="",titleAttributes:c,prioritizeSeoTags:f}=n;let{linkTags:d,metaTags:p,scriptTags:v}=n,y={toComponent:()=>{},toString:()=>""};return f&&({priorityMethods:y,linkTags:d,metaTags:p,scriptTags:v}=sR(n)),{priority:y,base:Cr("base",e,r),bodyAttributes:Cr("bodyAttributes",t,r),htmlAttributes:Cr("htmlAttributes",i,r),link:Cr("link",d,r),meta:Cr("meta",p,r),noscript:Cr("noscript",o,r),script:Cr("script",v,r),style:Cr("style",s,r),title:Cr("title",{title:u,titleAttributes:c},r)}},V1=aR,Sh=[],pA=!!(typeof window<"u"&&window.document&&window.document.createElement),B1=class{instances=[];canUseDOM=pA;context;value={setHelmet:n=>{this.context.helmet=n},helmetInstances:{get:()=>this.canUseDOM?Sh:this.instances,add:n=>{(this.canUseDOM?Sh:this.instances).push(n)},remove:n=>{const e=(this.canUseDOM?Sh:this.instances).indexOf(n);(this.canUseDOM?Sh:this.instances).splice(e,1)}}};constructor(n,e){this.context=n,this.canUseDOM=e||!1,e||(n.helmet=V1({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},uR={},gA=Tn.createContext(uR),mA=class vA extends U.Component{static canUseDOM=pA;helmetData;constructor(e){super(e),this.helmetData=new B1(this.props.context||{},vA.canUseDOM)}render(){return Tn.createElement(gA.Provider,{value:this.helmetData.value},this.props.children)}},nu=(n,e)=>{const t=document.head||document.querySelector("head"),r=t.querySelectorAll(`${n}[${qr}]`),i=[].slice.call(r),o=[];let s;return e&&e.length&&e.forEach(u=>{const c=document.createElement(n);for(const f in u)if(Object.prototype.hasOwnProperty.call(u,f))if(f==="innerHTML")c.innerHTML=u.innerHTML;else if(f==="cssText")c.styleSheet?c.styleSheet.cssText=u.cssText:c.appendChild(document.createTextNode(u.cssText));else{const d=f,p=typeof u[d]>"u"?"":u[d];c.setAttribute(f,p)}c.setAttribute(qr,"true"),i.some((f,d)=>(s=d,c.isEqualNode(f)))?i.splice(s,1):o.push(c)}),i.forEach(u=>u.parentNode?.removeChild(u)),o.forEach(u=>t.appendChild(u)),{oldTags:i,newTags:o}},U1=(n,e)=>{const t=document.getElementsByTagName(n)[0];if(!t)return;const r=t.getAttribute(qr),i=r?r.split(","):[],o=[...i],s=Object.keys(e);for(const u of s){const c=e[u]||"";t.getAttribute(u)!==c&&t.setAttribute(u,c),i.indexOf(u)===-1&&i.push(u);const f=o.indexOf(u);f!==-1&&o.splice(f,1)}for(let u=o.length-1;u>=0;u-=1)t.removeAttribute(o[u]);i.length===o.length?t.removeAttribute(qr):t.getAttribute(qr)!==s.join(",")&&t.setAttribute(qr,s.join(","))},lR=(n,e)=>{typeof n<"u"&&document.title!==n&&(document.title=fA(n)),U1("title",e)},_2=(n,e)=>{const{baseTag:t,bodyAttributes:r,htmlAttributes:i,linkTags:o,metaTags:s,noscriptTags:u,onChangeClientState:c,scriptTags:f,styleTags:d,title:p,titleAttributes:v}=n;U1("body",r),U1("html",i),lR(p,v);const y={baseTag:nu("base",t),linkTags:nu("link",o),metaTags:nu("meta",s),noscriptTags:nu("noscript",u),scriptTags:nu("script",f),styleTags:nu("style",d)},E={},T={};Object.keys(y).forEach(C=>{const{newTags:b,oldTags:P}=y[C];b.length&&(E[C]=b),P.length&&(T[C]=y[C].oldTags)}),e&&e(),c(n,E,T)},ql=null,cR=n=>{ql&&cancelAnimationFrame(ql),n.defer?ql=requestAnimationFrame(()=>{_2(n,()=>{ql=null})}):(_2(n),ql=null)},fR=cR,w2=class extends U.Component{rendered=!1;shouldComponentUpdate(n){return!K4(n,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:n}=this.props.context;n.remove(this),this.emitChange()}emitChange(){const{helmetInstances:n,setHelmet:e}=this.props.context;let t=null;const r=eR(n.get().map(i=>{const o={...i.props};return delete o.context,o}));mA.canUseDOM?fR(r):V1&&(t=V1(r)),e(t)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:n}=this.props.context;n.add(this),this.emitChange()}render(){return this.init(),null}},im=class extends U.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(n){return!z4(y2(this.props,"helmetData"),y2(n,"helmetData"))}mapNestedChildrenToProps(n,e){if(!e)return null;switch(n.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${n.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(n,e,t,r){return{...e,[n.type]:[...e[n.type]||[],{...t,...this.mapNestedChildrenToProps(n,r)}]}}mapObjectTypeChildren(n,e,t,r){switch(n.type){case"title":return{...e,[n.type]:r,titleAttributes:{...t}};case"body":return{...e,bodyAttributes:{...t}};case"html":return{...e,htmlAttributes:{...t}};default:return{...e,[n.type]:{...t}}}}mapArrayTypeChildrenToProps(n,e){let t={...e};return Object.keys(n).forEach(r=>{t={...t,[r]:n[r]}}),t}warnOnInvalidChildren(n,e){return g2(v2.some(t=>n.type===t),typeof n.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${v2.join(", ")} are allowed. Helmet does not support rendering <${n.type}> elements. Refer to our API for more information.`),g2(!e||typeof e=="string"||Array.isArray(e)&&!e.some(t=>typeof t!="string"),`Helmet expects a string as a child of <${n.type}>. Did you forget to wrap your children in braces? ( <${n.type}>{\`\`}</${n.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(n,e){let t={};return Tn.Children.forEach(n,r=>{if(!r||!r.props)return;const{children:i,...o}=r.props,s=Object.keys(o).reduce((c,f)=>(c[q4[f]||f]=o[f],c),{});let{type:u}=r;switch(typeof u=="symbol"?u=u.toString():this.warnOnInvalidChildren(r,i),u){case"Symbol(react.fragment)":e=this.mapChildrenToProps(i,e);break;case"link":case"meta":case"noscript":case"script":case"style":t=this.flattenArrayTypeChildren(r,t,s,i);break;default:e=this.mapObjectTypeChildren(r,e,s,i);break}}),this.mapArrayTypeChildrenToProps(t,e)}render(){const{children:n,...e}=this.props;let t={...e},{helmetData:r}=e;if(n&&(t=this.mapChildrenToProps(n,t)),r&&!(r instanceof B1)){const i=r;r=new B1(i.context,!0),delete t.helmetData}return r?Tn.createElement(w2,{...t,context:r.value}):Tn.createElement(gA.Consumer,null,i=>Tn.createElement(w2,{...t,context:i}))}};const om=U.createContext({});function sm(n){const e=U.useRef(null);return e.current===null&&(e.current=n()),e.current}const am=typeof window<"u",yA=am?U.useLayoutEffect:U.useEffect,Ud=U.createContext(null);function um(n,e){n.indexOf(e)===-1&&n.push(e)}function lm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const to=(n,e,t)=>t>e?e:t<n?n:t;let cm=()=>{};const no={},_A=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function wA(n){return typeof n=="object"&&n!==null}const xA=n=>/^0[^.\s]+$/u.test(n);function fm(n){let e;return()=>(e===void 0&&(e=n()),e)}const Dr=n=>n,hR=(n,e)=>t=>e(n(t)),Gc=(...n)=>n.reduce(hR),Tc=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class hm{constructor(){this.subscriptions=[]}add(e){return um(this.subscriptions,e),()=>lm(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ei=n=>n*1e3,Rr=n=>n/1e3;function EA(n,e){return e?n*(1e3/e):0}const AA=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,dR=1e-7,pR=12;function gR(n,e,t,r,i){let o,s,u=0;do s=e+(t-e)/2,o=AA(s,r,i)-n,o>0?t=s:e=s;while(Math.abs(o)>dR&&++u<pR);return s}function Wc(n,e,t,r){if(n===e&&t===r)return Dr;const i=o=>gR(o,0,1,n,t);return o=>o===0||o===1?o:AA(i(o),e,r)}const TA=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,CA=n=>e=>1-n(1-e),IA=Wc(.33,1.53,.69,.99),dm=CA(IA),SA=TA(dm),RA=n=>(n*=2)<1?.5*dm(n):.5*(2-Math.pow(2,-10*(n-1))),pm=n=>1-Math.sin(Math.acos(n)),PA=CA(pm),bA=TA(pm),mR=Wc(.42,0,1,1),vR=Wc(0,0,.58,1),DA=Wc(.42,0,.58,1),yR=n=>Array.isArray(n)&&typeof n[0]!="number",OA=n=>Array.isArray(n)&&typeof n[0]=="number",_R={linear:Dr,easeIn:mR,easeInOut:DA,easeOut:vR,circIn:pm,circInOut:bA,circOut:PA,backIn:dm,backInOut:SA,backOut:IA,anticipate:RA},wR=n=>typeof n=="string",x2=n=>{if(OA(n)){cm(n.length===4);const[e,t,r,i]=n;return Wc(e,t,r,i)}else if(wR(n))return _R[n];return n},Rh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function xR(n,e){let t=new Set,r=new Set,i=!1,o=!1;const s=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function c(d){s.has(d)&&(f.schedule(d),n()),d(u)}const f={schedule:(d,p=!1,v=!1)=>{const E=v&&i?t:r;return p&&s.add(d),E.has(d)||E.add(d),d},cancel:d=>{r.delete(d),s.delete(d)},process:d=>{if(u=d,i){o=!0;return}i=!0,[t,r]=[r,t],t.forEach(c),t.clear(),i=!1,o&&(o=!1,f.process(d))}};return f}const ER=40;function NA(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,s=Rh.reduce((D,F)=>(D[F]=xR(o),D),{}),{setup:u,read:c,resolveKeyframes:f,preUpdate:d,update:p,preRender:v,render:y,postRender:E}=s,T=()=>{const D=no.useManualTiming?i.timestamp:performance.now();t=!1,no.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(D-i.timestamp,ER),1)),i.timestamp=D,i.isProcessing=!0,u.process(i),c.process(i),f.process(i),d.process(i),p.process(i),v.process(i),y.process(i),E.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(T))},C=()=>{t=!0,r=!0,i.isProcessing||n(T)};return{schedule:Rh.reduce((D,F)=>{const j=s[F];return D[F]=(W,R=!1,I=!1)=>(t||C(),j.schedule(W,R,I)),D},{}),cancel:D=>{for(let F=0;F<Rh.length;F++)s[Rh[F]].cancel(D)},state:i,steps:s}}const{schedule:It,cancel:is,state:En,steps:X0}=NA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Dr,!0);let Xh;function AR(){Xh=void 0}const tr={now:()=>(Xh===void 0&&tr.set(En.isProcessing||no.useManualTiming?En.timestamp:performance.now()),Xh),set:n=>{Xh=n,queueMicrotask(AR)}},kA=n=>e=>typeof e=="string"&&e.startsWith(n),gm=kA("--"),TR=kA("var(--"),mm=n=>TR(n)?CR.test(n.split("/*")[0].trim()):!1,CR=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Uu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Cc={...Uu,transform:n=>to(0,1,n)},Ph={...Uu,default:1},lc=n=>Math.round(n*1e5)/1e5,vm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function IR(n){return n==null}const SR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ym=(n,e)=>t=>!!(typeof t=="string"&&SR.test(t)&&t.startsWith(n)||e&&!IR(t)&&Object.prototype.hasOwnProperty.call(t,e)),MA=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,o,s,u]=r.match(vm);return{[n]:parseFloat(i),[e]:parseFloat(o),[t]:parseFloat(s),alpha:u!==void 0?parseFloat(u):1}},RR=n=>to(0,255,n),Y0={...Uu,transform:n=>Math.round(RR(n))},Xs={test:ym("rgb","red"),parse:MA("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Y0.transform(n)+", "+Y0.transform(e)+", "+Y0.transform(t)+", "+lc(Cc.transform(r))+")"};function PR(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const j1={test:ym("#"),parse:PR,transform:Xs.transform},$c=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),zo=$c("deg"),Ai=$c("%"),ke=$c("px"),bR=$c("vh"),DR=$c("vw"),E2={...Ai,parse:n=>Ai.parse(n)/100,transform:n=>Ai.transform(n*100)},lu={test:ym("hsl","hue"),parse:MA("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Ai.transform(lc(e))+", "+Ai.transform(lc(t))+", "+lc(Cc.transform(r))+")"},$t={test:n=>Xs.test(n)||j1.test(n)||lu.test(n),parse:n=>Xs.test(n)?Xs.parse(n):lu.test(n)?lu.parse(n):j1.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Xs.transform(n):lu.transform(n),getAnimatableNone:n=>{const e=$t.parse(n);return e.alpha=0,$t.transform(e)}},OR=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function NR(n){return isNaN(n)&&typeof n=="string"&&(n.match(vm)?.length||0)+(n.match(OR)?.length||0)>0}const LA="number",FA="color",kR="var",MR="var(",A2="${}",LR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ic(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let o=0;const u=e.replace(LR,c=>($t.test(c)?(r.color.push(o),i.push(FA),t.push($t.parse(c))):c.startsWith(MR)?(r.var.push(o),i.push(kR),t.push(c)):(r.number.push(o),i.push(LA),t.push(parseFloat(c))),++o,A2)).split(A2);return{values:t,split:u,indexes:r,types:i}}function VA(n){return Ic(n).values}function BA(n){const{split:e,types:t}=Ic(n),r=e.length;return i=>{let o="";for(let s=0;s<r;s++)if(o+=e[s],i[s]!==void 0){const u=t[s];u===LA?o+=lc(i[s]):u===FA?o+=$t.transform(i[s]):o+=i[s]}return o}}const FR=n=>typeof n=="number"?0:$t.test(n)?$t.getAnimatableNone(n):n;function VR(n){const e=VA(n);return BA(n)(e.map(FR))}const os={test:NR,parse:VA,createTransformer:BA,getAnimatableNone:VR};function Q0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function BR({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,o=0,s=0;if(!e)i=o=s=t;else{const u=t<.5?t*(1+e):t+e-t*e,c=2*t-u;i=Q0(c,u,n+1/3),o=Q0(c,u,n),s=Q0(c,u,n-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}function dd(n,e){return t=>t>0?e:n}const Pt=(n,e,t)=>n+(e-n)*t,Z0=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},UR=[j1,Xs,lu],jR=n=>UR.find(e=>e.test(n));function T2(n){const e=jR(n);if(!e)return!1;let t=e.parse(n);return e===lu&&(t=BR(t)),t}const C2=(n,e)=>{const t=T2(n),r=T2(e);if(!t||!r)return dd(n,e);const i={...t};return o=>(i.red=Z0(t.red,r.red,o),i.green=Z0(t.green,r.green,o),i.blue=Z0(t.blue,r.blue,o),i.alpha=Pt(t.alpha,r.alpha,o),Xs.transform(i))},z1=new Set(["none","hidden"]);function zR(n,e){return z1.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function HR(n,e){return t=>Pt(n,e,t)}function _m(n){return typeof n=="number"?HR:typeof n=="string"?mm(n)?dd:$t.test(n)?C2:$R:Array.isArray(n)?UA:typeof n=="object"?$t.test(n)?C2:GR:dd}function UA(n,e){const t=[...n],r=t.length,i=n.map((o,s)=>_m(o)(o,e[s]));return o=>{for(let s=0;s<r;s++)t[s]=i[s](o);return t}}function GR(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=_m(n[i])(n[i],e[i]));return i=>{for(const o in r)t[o]=r[o](i);return t}}function WR(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],s=n.indexes[o][r[o]],u=n.values[s]??0;t[i]=u,r[o]++}return t}const $R=(n,e)=>{const t=os.createTransformer(e),r=Ic(n),i=Ic(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?z1.has(n)&&!i.values.length||z1.has(e)&&!r.values.length?zR(n,e):Gc(UA(WR(r,i),i.values),t):dd(n,e)};function jA(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Pt(n,e,t):_m(n)(n,e)}const KR=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>It.update(e,t),stop:()=>is(e),now:()=>En.isProcessing?En.timestamp:tr.now()}},zA=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let o=0;o<i;o++)r+=Math.round(n(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},pd=2e4;function wm(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<pd;)e+=t,r=n.next(e);return e>=pd?1/0:e}function qR(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(wm(r),pd);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:Rr(i)}}const XR=5;function HA(n,e,t){const r=Math.max(e-XR,0);return EA(t-n(r),e-r)}const Nt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},J0=.001;function YR({duration:n=Nt.duration,bounce:e=Nt.bounce,velocity:t=Nt.velocity,mass:r=Nt.mass}){let i,o,s=1-e;s=to(Nt.minDamping,Nt.maxDamping,s),n=to(Nt.minDuration,Nt.maxDuration,Rr(n)),s<1?(i=f=>{const d=f*s,p=d*n,v=d-t,y=H1(f,s),E=Math.exp(-p);return J0-v/y*E},o=f=>{const p=f*s*n,v=p*t+t,y=Math.pow(s,2)*Math.pow(f,2)*n,E=Math.exp(-p),T=H1(Math.pow(f,2),s);return(-i(f)+J0>0?-1:1)*((v-y)*E)/T}):(i=f=>{const d=Math.exp(-f*n),p=(f-t)*n+1;return-J0+d*p},o=f=>{const d=Math.exp(-f*n),p=(t-f)*(n*n);return d*p});const u=5/n,c=ZR(i,o,u);if(n=Ei(n),isNaN(c))return{stiffness:Nt.stiffness,damping:Nt.damping,duration:n};{const f=Math.pow(c,2)*r;return{stiffness:f,damping:s*2*Math.sqrt(r*f),duration:n}}}const QR=12;function ZR(n,e,t){let r=t;for(let i=1;i<QR;i++)r=r-n(r)/e(r);return r}function H1(n,e){return n*Math.sqrt(1-e*e)}const JR=["duration","bounce"],eP=["stiffness","damping","mass"];function I2(n,e){return e.some(t=>n[t]!==void 0)}function tP(n){let e={velocity:Nt.velocity,stiffness:Nt.stiffness,damping:Nt.damping,mass:Nt.mass,isResolvedFromDuration:!1,...n};if(!I2(n,eP)&&I2(n,JR))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,o=2*to(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Nt.mass,stiffness:i,damping:o}}else{const t=YR(n);e={...e,...t,mass:Nt.mass},e.isResolvedFromDuration=!0}return e}function gd(n=Nt.visualDuration,e=Nt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const o=t.keyframes[0],s=t.keyframes[t.keyframes.length-1],u={done:!1,value:o},{stiffness:c,damping:f,mass:d,duration:p,velocity:v,isResolvedFromDuration:y}=tP({...t,velocity:-Rr(t.velocity||0)}),E=v||0,T=f/(2*Math.sqrt(c*d)),C=s-o,b=Rr(Math.sqrt(c/d)),P=Math.abs(C)<5;r||(r=P?Nt.restSpeed.granular:Nt.restSpeed.default),i||(i=P?Nt.restDelta.granular:Nt.restDelta.default);let D;if(T<1){const j=H1(b,T);D=W=>{const R=Math.exp(-T*b*W);return s-R*((E+T*b*C)/j*Math.sin(j*W)+C*Math.cos(j*W))}}else if(T===1)D=j=>s-Math.exp(-b*j)*(C+(E+b*C)*j);else{const j=b*Math.sqrt(T*T-1);D=W=>{const R=Math.exp(-T*b*W),I=Math.min(j*W,300);return s-R*((E+T*b*C)*Math.sinh(I)+j*C*Math.cosh(I))/j}}const F={calculatedDuration:y&&p||null,next:j=>{const W=D(j);if(y)u.done=j>=p;else{let R=j===0?E:0;T<1&&(R=j===0?Ei(E):HA(D,j,W));const I=Math.abs(R)<=r,O=Math.abs(s-W)<=i;u.done=I&&O}return u.value=u.done?s:W,u},toString:()=>{const j=Math.min(wm(F),pd),W=zA(R=>F.next(j*R).value,j,30);return j+"ms "+W},toTransition:()=>{}};return F}gd.applyToOptions=n=>{const e=qR(n,100,gd);return n.ease=e.ease,n.duration=Ei(e.duration),n.type="keyframes",n};function G1({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:u,max:c,restDelta:f=.5,restSpeed:d}){const p=n[0],v={done:!1,value:p},y=I=>u!==void 0&&I<u||c!==void 0&&I>c,E=I=>u===void 0?c:c===void 0||Math.abs(u-I)<Math.abs(c-I)?u:c;let T=t*e;const C=p+T,b=s===void 0?C:s(C);b!==C&&(T=b-p);const P=I=>-T*Math.exp(-I/r),D=I=>b+P(I),F=I=>{const O=P(I),M=D(I);v.done=Math.abs(O)<=f,v.value=v.done?b:M};let j,W;const R=I=>{y(v.value)&&(j=I,W=gd({keyframes:[v.value,E(v.value)],velocity:HA(D,I,v.value),damping:i,stiffness:o,restDelta:f,restSpeed:d}))};return R(0),{calculatedDuration:null,next:I=>{let O=!1;return!W&&j===void 0&&(O=!0,F(I),R(I)),j!==void 0&&I>=j?W.next(I-j):(!O&&F(I),v)}}}function nP(n,e,t){const r=[],i=t||no.mix||jA,o=n.length-1;for(let s=0;s<o;s++){let u=i(n[s],n[s+1]);if(e){const c=Array.isArray(e)?e[s]||Dr:e;u=Gc(c,u)}r.push(u)}return r}function rP(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const o=n.length;if(cm(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const s=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=nP(e,r,i),c=u.length,f=d=>{if(s&&d<n[0])return e[0];let p=0;if(c>1)for(;p<n.length-2&&!(d<n[p+1]);p++);const v=Tc(n[p],n[p+1],d);return u[p](v)};return t?d=>f(to(n[0],n[o-1],d)):f}function iP(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Tc(0,e,r);n.push(Pt(t,1,i))}}function oP(n){const e=[0];return iP(e,n.length-1),e}function sP(n,e){return n.map(t=>t*e)}function aP(n,e){return n.map(()=>e||DA).splice(0,n.length-1)}function cc({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=yR(r)?r.map(x2):x2(r),o={done:!1,value:e[0]},s=sP(t&&t.length===e.length?t:oP(e),n),u=rP(s,e,{ease:Array.isArray(i)?i:aP(e,i)});return{calculatedDuration:n,next:c=>(o.value=u(c),o.done=c>=n,o)}}const uP=n=>n!==null;function xm(n,{repeat:e,repeatType:t="loop"},r,i=1){const o=n.filter(uP),u=i<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!u||r===void 0?o[u]:r}const lP={decay:G1,inertia:G1,tween:cc,keyframes:cc,spring:gd};function GA(n){typeof n.type=="string"&&(n.type=lP[n.type])}class Em{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const cP=n=>n/100;class Am extends Em{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==tr.now()&&this.tick(tr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;GA(e);const{type:t=cc,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:s=0}=e;let{keyframes:u}=e;const c=t||cc;c!==cc&&typeof u[0]!="number"&&(this.mixKeyframes=Gc(cP,jA(u[0],u[1])),u=[0,100]);const f=c({...e,keyframes:u});o==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...u].reverse(),velocity:-s})),f.calculatedDuration===null&&(f.calculatedDuration=wm(f));const{calculatedDuration:d}=f;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:s,resolvedDuration:u,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:d,repeat:p,repeatType:v,repeatDelay:y,type:E,onUpdate:T,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const b=this.currentTime-f*(this.playbackSpeed>=0?1:-1),P=this.playbackSpeed>=0?b<0:b>i;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let D=this.currentTime,F=r;if(p){const I=Math.min(this.currentTime,i)/u;let O=Math.floor(I),M=I%1;!M&&I>=1&&(M=1),M===1&&O--,O=Math.min(O,p+1),!!(O%2)&&(v==="reverse"?(M=1-M,y&&(M-=y/u)):v==="mirror"&&(F=s)),D=to(0,1,M)*u}const j=P?{done:!1,value:d[0]}:F.next(D);o&&(j.value=o(j.value));let{done:W}=j;!P&&c!==null&&(W=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&W);return R&&E!==G1&&(j.value=xm(d,this.options,C,this.speed)),T&&T(j.value),R&&this.finish(),j}then(e,t){return this.finished.then(e,t)}get duration(){return Rr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Rr(e)}get time(){return Rr(this.currentTime)}set time(e){e=Ei(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(tr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Rr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=KR,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(tr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function fP(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Ys=n=>n*180/Math.PI,W1=n=>{const e=Ys(Math.atan2(n[1],n[0]));return $1(e)},hP={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:W1,rotateZ:W1,skewX:n=>Ys(Math.atan(n[1])),skewY:n=>Ys(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},$1=n=>(n=n%360,n<0&&(n+=360),n),S2=W1,R2=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),P2=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),dP={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:R2,scaleY:P2,scale:n=>(R2(n)+P2(n))/2,rotateX:n=>$1(Ys(Math.atan2(n[6],n[5]))),rotateY:n=>$1(Ys(Math.atan2(-n[2],n[0]))),rotateZ:S2,rotate:S2,skewX:n=>Ys(Math.atan(n[4])),skewY:n=>Ys(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function K1(n){return n.includes("scale")?1:0}function q1(n,e){if(!n||n==="none")return K1(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=dP,i=t;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=hP,i=u}if(!i)return K1(e);const o=r[e],s=i[1].split(",").map(gP);return typeof o=="function"?o(s):s[o]}const pP=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return q1(t,e)};function gP(n){return parseFloat(n.trim())}const ju=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zu=new Set(ju),b2=n=>n===Uu||n===ke,mP=new Set(["x","y","z"]),vP=ju.filter(n=>!mP.has(n));function yP(n){const e=[];return vP.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const ea={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>q1(e,"x"),y:(n,{transform:e})=>q1(e,"y")};ea.translateX=ea.x;ea.translateY=ea.y;const ta=new Set;let X1=!1,Y1=!1,Q1=!1;function WA(){if(Y1){const n=Array.from(ta).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=yP(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([o,s])=>{r.getValue(o)?.set(s)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Y1=!1,X1=!1,ta.forEach(n=>n.complete(Q1)),ta.clear()}function $A(){ta.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Y1=!0)})}function _P(){Q1=!0,$A(),WA(),Q1=!1}class Tm{constructor(e,t,r,i,o,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=o,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(ta.add(this),X1||(X1=!0,It.read($A),It.resolveKeyframes(WA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const o=i?.get(),s=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const u=r.readValue(t,s);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=s),i&&o===void 0&&i.set(e[0])}fP(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ta.delete(this)}cancel(){this.state==="scheduled"&&(ta.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const wP=n=>n.startsWith("--");function xP(n,e,t){wP(e)?n.style.setProperty(e,t):n.style[e]=t}const EP=fm(()=>window.ScrollTimeline!==void 0),AP={};function TP(n,e){const t=fm(n);return()=>AP[e]??t()}const KA=TP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ec=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,D2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ec([0,.65,.55,1]),circOut:ec([.55,0,1,.45]),backIn:ec([.31,.01,.66,-.59]),backOut:ec([.33,1.53,.69,.99])};function qA(n,e){if(n)return typeof n=="function"?KA()?zA(n,e):"ease-out":OA(n)?ec(n):Array.isArray(n)?n.map(t=>qA(t,e)||D2.easeOut):D2[n]}function CP(n,e,t,{delay:r=0,duration:i=300,repeat:o=0,repeatType:s="loop",ease:u="easeOut",times:c}={},f=void 0){const d={[e]:t};c&&(d.offset=c);const p=qA(u,i);Array.isArray(p)&&(d.easing=p);const v={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),n.animate(d,v)}function XA(n){return typeof n=="function"&&"applyToOptions"in n}function IP({type:n,...e}){return XA(n)&&KA()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class SP extends Em{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:o,allowFlatten:s=!1,finalKeyframe:u,onComplete:c}=e;this.isPseudoElement=!!o,this.allowFlatten=s,this.options=e,cm(typeof e.type!="string");const f=IP(e);this.animation=CP(t,r,i,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const d=xm(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(d):xP(t,r,d),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Rr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Rr(e)}get time(){return Rr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ei(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&EP()?(this.animation.timeline=e,Dr):t(this)}}const YA={anticipate:RA,backInOut:SA,circInOut:bA};function RP(n){return n in YA}function PP(n){typeof n.ease=="string"&&RP(n.ease)&&(n.ease=YA[n.ease])}const O2=10;class bP extends SP{constructor(e){PP(e),GA(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:o,...s}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const u=new Am({...s,autoplay:!1}),c=Ei(this.finishedTime??this.time);t.setWithVelocity(u.sample(c-O2).value,u.sample(c).value,O2),u.stop()}}const N2=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(os.test(n)||n==="0")&&!n.startsWith("url("));function DP(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function OP(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],s=N2(i,e),u=N2(o,e);return!s||!u?!1:DP(n)||(t==="spring"||XA(t))&&r}function Z1(n){n.duration=0,n.type="keyframes"}const NP=new Set(["opacity","clipPath","filter","transform"]),kP=fm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function MP(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:o,type:s}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:f}=e.owner.getProps();return kP()&&t&&NP.has(t)&&(t!=="transform"||!f)&&!c&&!r&&i!=="mirror"&&o!==0&&s!=="inertia"}const LP=40;class FP extends Em{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:s="loop",keyframes:u,name:c,motionValue:f,element:d,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=tr.now();const v={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:o,repeatType:s,name:c,motionValue:f,element:d,...p},y=d?.KeyframeResolver||Tm;this.keyframeResolver=new y(u,(E,T,C)=>this.onKeyframesResolved(E,T,v,!C),c,f,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:o,type:s,velocity:u,delay:c,isHandoff:f,onUpdate:d}=r;this.resolvedAt=tr.now(),OP(e,o,s,u)||((no.instantAnimations||!c)&&d?.(xm(e,r,t)),e[0]=e[e.length-1],Z1(r),r.repeat=0);const v={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>LP?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},y=!f&&MP(v)?new bP({...v,element:v.motionValue.owner.current}):new Am(v);y.finished.then(()=>this.notifyFinished()).catch(Dr),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),_P()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const VP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function BP(n){const e=VP.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function QA(n,e,t=1){const[r,i]=BP(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const s=o.trim();return _A(s)?parseFloat(s):s}return mm(i)?QA(i,e,t+1):i}function Cm(n,e){return n?.[e]??n?.default??n}const ZA=new Set(["width","height","top","left","right","bottom",...ju]),UP={test:n=>n==="auto",parse:n=>n},JA=n=>e=>e.test(n),eT=[Uu,ke,Ai,zo,DR,bR,UP],k2=n=>eT.find(JA(n));function jP(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||xA(n):!0}const zP=new Set(["brightness","contrast","saturate","opacity"]);function HP(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(vm)||[];if(!r)return n;const i=t.replace(r,"");let o=zP.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+i+")"}const GP=/\b([a-z-]*)\(.*?\)/gu,J1={...os,getAnimatableNone:n=>{const e=n.match(GP);return e?e.map(HP).join(" "):n}},M2={...Uu,transform:Math.round},WP={rotate:zo,rotateX:zo,rotateY:zo,rotateZ:zo,scale:Ph,scaleX:Ph,scaleY:Ph,scaleZ:Ph,skew:zo,skewX:zo,skewY:zo,distance:ke,translateX:ke,translateY:ke,translateZ:ke,x:ke,y:ke,z:ke,perspective:ke,transformPerspective:ke,opacity:Cc,originX:E2,originY:E2,originZ:ke},Im={borderWidth:ke,borderTopWidth:ke,borderRightWidth:ke,borderBottomWidth:ke,borderLeftWidth:ke,borderRadius:ke,radius:ke,borderTopLeftRadius:ke,borderTopRightRadius:ke,borderBottomRightRadius:ke,borderBottomLeftRadius:ke,width:ke,maxWidth:ke,height:ke,maxHeight:ke,top:ke,right:ke,bottom:ke,left:ke,padding:ke,paddingTop:ke,paddingRight:ke,paddingBottom:ke,paddingLeft:ke,margin:ke,marginTop:ke,marginRight:ke,marginBottom:ke,marginLeft:ke,backgroundPositionX:ke,backgroundPositionY:ke,...WP,zIndex:M2,fillOpacity:Cc,strokeOpacity:Cc,numOctaves:M2},$P={...Im,color:$t,backgroundColor:$t,outlineColor:$t,fill:$t,stroke:$t,borderColor:$t,borderTopColor:$t,borderRightColor:$t,borderBottomColor:$t,borderLeftColor:$t,filter:J1,WebkitFilter:J1},tT=n=>$P[n];function nT(n,e){let t=tT(n);return t!==J1&&(t=os),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const KP=new Set(["auto","none","0"]);function qP(n,e,t){let r=0,i;for(;r<n.length&&!i;){const o=n[r];typeof o=="string"&&!KP.has(o)&&Ic(o).values.length&&(i=n[r]),r++}if(i&&t)for(const o of e)n[o]=nT(t,i)}class XP extends Tm{constructor(e,t,r,i,o){super(e,t,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let f=e[c];if(typeof f=="string"&&(f=f.trim(),mm(f))){const d=QA(f,t.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!ZA.has(r)||e.length!==2)return;const[i,o]=e,s=k2(i),u=k2(o);if(s!==u)if(b2(s)&&b2(u))for(let c=0;c<e.length;c++){const f=e[c];typeof f=="string"&&(e[c]=parseFloat(f))}else ea[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||jP(e[i]))&&r.push(i);r.length&&qP(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ea[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,s=r[o];r[o]=ea[t](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,c])=>{e.getValue(u).set(c)}),this.resolveNoneKeyframes()}}function YP(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=t?.[n]??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const rT=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function iT(n){return wA(n)&&"offsetHeight"in n}const L2=30,QP=n=>!isNaN(parseFloat(n));class ZP{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=tr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=tr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=QP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new hm);const r=this.events[e].add(t);return e==="change"?()=>{r(),It.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=tr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>L2)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,L2);return EA(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Iu(n,e){return new ZP(n,e)}const{schedule:Sm}=NA(queueMicrotask,!1),Wr={x:!1,y:!1};function oT(){return Wr.x||Wr.y}function JP(n){return n==="x"||n==="y"?Wr[n]?null:(Wr[n]=!0,()=>{Wr[n]=!1}):Wr.x||Wr.y?null:(Wr.x=Wr.y=!0,()=>{Wr.x=Wr.y=!1})}function sT(n,e){const t=YP(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function F2(n){return!(n.pointerType==="touch"||oT())}function eb(n,e,t={}){const[r,i,o]=sT(n,t),s=u=>{if(!F2(u))return;const{target:c}=u,f=e(c,u);if(typeof f!="function"||!c)return;const d=p=>{F2(p)&&(f(p),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,i)};return r.forEach(u=>{u.addEventListener("pointerenter",s,i)}),o}const aT=(n,e)=>e?n===e?!0:aT(n,e.parentElement):!1,Rm=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,tb=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nb(n){return tb.has(n.tagName)||n.tabIndex!==-1}const Yh=new WeakSet;function V2(n){return e=>{e.key==="Enter"&&n(e)}}function e1(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const rb=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=V2(()=>{if(Yh.has(t))return;e1(t,"down");const i=V2(()=>{e1(t,"up")}),o=()=>e1(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function B2(n){return Rm(n)&&!oT()}function ib(n,e,t={}){const[r,i,o]=sT(n,t),s=u=>{const c=u.currentTarget;if(!B2(u))return;Yh.add(c);const f=e(c,u),d=(y,E)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",v),Yh.has(c)&&Yh.delete(c),B2(y)&&typeof f=="function"&&f(y,{success:E})},p=y=>{d(y,c===window||c===document||t.useGlobalTarget||aT(c,y.target))},v=y=>{d(y,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",v,i)};return r.forEach(u=>{(t.useGlobalTarget?window:u).addEventListener("pointerdown",s,i),iT(u)&&(u.addEventListener("focus",f=>rb(f,i)),!nb(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function uT(n){return wA(n)&&"ownerSVGElement"in n}function ob(n){return uT(n)&&n.tagName==="svg"}const Ln=n=>!!(n&&n.getVelocity),sb=[...eT,$t,os],ab=n=>sb.find(JA(n)),Pm=U.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function U2(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function ub(...n){return e=>{let t=!1;const r=n.map(i=>{const o=U2(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():U2(n[i],null)}}}}function lb(...n){return U.useCallback(ub(...n),n)}class cb extends U.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=iT(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function fb({children:n,isPresent:e,anchorX:t,root:r}){const i=U.useId(),o=U.useRef(null),s=U.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=U.useContext(Pm),c=lb(o,n?.ref);return U.useInsertionEffect(()=>{const{width:f,height:d,top:p,left:v,right:y}=s.current;if(e||!o.current||!f||!d)return;const E=t==="left"?`left: ${v}`:`right: ${y}`;o.current.dataset.motionPopId=i;const T=document.createElement("style");u&&(T.nonce=u);const C=r??document.head;return C.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${d}px !important;
            ${E}px !important;
            top: ${p}px !important;
          }
        `),()=>{C.contains(T)&&C.removeChild(T)}},[e]),G.jsx(cb,{isPresent:e,childRef:o,sizeRef:s,children:U.cloneElement(n,{ref:c})})}const hb=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:s,anchorX:u,root:c})=>{const f=sm(db),d=U.useId();let p=!0,v=U.useMemo(()=>(p=!1,{id:d,initial:e,isPresent:t,custom:i,onExitComplete:y=>{f.set(y,!0);for(const E of f.values())if(!E)return;r&&r()},register:y=>(f.set(y,!1),()=>f.delete(y))}),[t,f,r]);return o&&p&&(v={...v}),U.useMemo(()=>{f.forEach((y,E)=>f.set(E,!1))},[t]),U.useEffect(()=>{!t&&!f.size&&r&&r()},[t]),s==="popLayout"&&(n=G.jsx(fb,{isPresent:t,anchorX:u,root:c,children:n})),G.jsx(Ud.Provider,{value:v,children:n})};function db(){return new Map}function lT(n=!0){const e=U.useContext(Ud);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,o=U.useId();U.useEffect(()=>{if(n)return i(o)},[n]);const s=U.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,s]:[!0]}const bh=n=>n.key||"";function j2(n){const e=[];return U.Children.forEach(n,t=>{U.isValidElement(t)&&e.push(t)}),e}const cT=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:s=!1,anchorX:u="left",root:c})=>{const[f,d]=lT(s),p=U.useMemo(()=>j2(n),[n]),v=s&&!f?[]:p.map(bh),y=U.useRef(!0),E=U.useRef(p),T=sm(()=>new Map),[C,b]=U.useState(p),[P,D]=U.useState(p);yA(()=>{y.current=!1,E.current=p;for(let W=0;W<P.length;W++){const R=bh(P[W]);v.includes(R)?T.delete(R):T.get(R)!==!0&&T.set(R,!1)}},[P,v.length,v.join("-")]);const F=[];if(p!==C){let W=[...p];for(let R=0;R<P.length;R++){const I=P[R],O=bh(I);v.includes(O)||(W.splice(R,0,I),F.push(I))}return o==="wait"&&F.length&&(W=F),D(j2(W)),b(p),null}const{forceRender:j}=U.useContext(om);return G.jsx(G.Fragment,{children:P.map(W=>{const R=bh(W),I=s&&!f?!1:p===P||v.includes(R),O=()=>{if(T.has(R))T.set(R,!0);else return;let M=!0;T.forEach(B=>{B||(M=!1)}),M&&(j?.(),D(E.current),s&&d?.(),r&&r())};return G.jsx(hb,{isPresent:I,initial:!y.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:c,onExitComplete:I?void 0:O,anchorX:u,children:W},R)})})},fT=U.createContext({strict:!1}),z2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Su={};for(const n in z2)Su[n]={isEnabled:e=>z2[n].some(t=>!!e[t])};function pb(n){for(const e in n)Su[e]={...Su[e],...n[e]}}const gb=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function md(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||gb.has(n)}let hT=n=>!md(n);function mb(n){typeof n=="function"&&(hT=e=>e.startsWith("on")?!md(e):n(e))}try{mb(require("@emotion/is-prop-valid").default)}catch{}function vb(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(hT(i)||t===!0&&md(i)||!e&&!md(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const jd=U.createContext({});function zd(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Sc(n){return typeof n=="string"||Array.isArray(n)}const bm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Dm=["initial",...bm];function Hd(n){return zd(n.animate)||Dm.some(e=>Sc(n[e]))}function dT(n){return!!(Hd(n)||n.variants)}function yb(n,e){if(Hd(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Sc(t)?t:void 0,animate:Sc(r)?r:void 0}}return n.inherit!==!1?e:{}}function _b(n){const{initial:e,animate:t}=yb(n,U.useContext(jd));return U.useMemo(()=>({initial:e,animate:t}),[H2(e),H2(t)])}function H2(n){return Array.isArray(n)?n.join(" "):n}const Rc={};function wb(n){for(const e in n)Rc[e]=n[e],gm(e)&&(Rc[e].isCSSVariable=!0)}function pT(n,{layout:e,layoutId:t}){return zu.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Rc[n]||n==="opacity")}const xb={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Eb=ju.length;function Ab(n,e,t){let r="",i=!0;for(let o=0;o<Eb;o++){const s=ju[o],u=n[s];if(u===void 0)continue;let c=!0;if(typeof u=="number"?c=u===(s.startsWith("scale")?1:0):c=parseFloat(u)===0,!c||t){const f=rT(u,Im[s]);if(!c){i=!1;const d=xb[s]||s;r+=`${d}(${f}) `}t&&(e[s]=f)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function Om(n,e,t){const{style:r,vars:i,transformOrigin:o}=n;let s=!1,u=!1;for(const c in e){const f=e[c];if(zu.has(c)){s=!0;continue}else if(gm(c)){i[c]=f;continue}else{const d=rT(f,Im[c]);c.startsWith("origin")?(u=!0,o[c]=d):r[c]=d}}if(e.transform||(s||t?r.transform=Ab(e,n.transform,t):r.transform&&(r.transform="none")),u){const{originX:c="50%",originY:f="50%",originZ:d=0}=o;r.transformOrigin=`${c} ${f} ${d}`}}const Nm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function gT(n,e,t){for(const r in e)!Ln(e[r])&&!pT(r,t)&&(n[r]=e[r])}function Tb({transformTemplate:n},e){return U.useMemo(()=>{const t=Nm();return Om(t,e,n),Object.assign({},t.vars,t.style)},[e])}function Cb(n,e){const t=n.style||{},r={};return gT(r,t,n),Object.assign(r,Tb(n,e)),r}function Ib(n,e){const t={},r=Cb(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const Sb={offset:"stroke-dashoffset",array:"stroke-dasharray"},Rb={offset:"strokeDashoffset",array:"strokeDasharray"};function Pb(n,e,t=1,r=0,i=!0){n.pathLength=1;const o=i?Sb:Rb;n[o.offset]=ke.transform(-r);const s=ke.transform(e),u=ke.transform(t);n[o.array]=`${s} ${u}`}function mT(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:s=0,...u},c,f,d){if(Om(n,u,f),c){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:v}=n;p.transform&&(v.transform=p.transform,delete p.transform),(v.transform||p.transformOrigin)&&(v.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),v.transform&&(v.transformBox=d?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),r!==void 0&&(p.scale=r),i!==void 0&&Pb(p,i,o,s,!1)}const vT=()=>({...Nm(),attrs:{}}),yT=n=>typeof n=="string"&&n.toLowerCase()==="svg";function bb(n,e,t,r){const i=U.useMemo(()=>{const o=vT();return mT(o,e,yT(r),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};gT(o,n.style,n),i.style={...o,...i.style}}return i}const Db=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function km(n){return typeof n!="string"||n.includes("-")?!1:!!(Db.indexOf(n)>-1||/[A-Z]/u.test(n))}function Ob(n,e,t,{latestValues:r},i,o=!1){const u=(km(n)?bb:Ib)(e,r,i,n),c=vb(e,typeof n=="string",o),f=n!==U.Fragment?{...c,...u,ref:t}:{},{children:d}=e,p=U.useMemo(()=>Ln(d)?d.get():d,[d]);return U.createElement(n,{...f,children:p})}function G2(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function Mm(n,e,t,r){if(typeof e=="function"){const[i,o]=G2(r);e=e(t!==void 0?t:n.custom,i,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,o]=G2(r);e=e(t!==void 0?t:n.custom,i,o)}return e}function Qh(n){return Ln(n)?n.get():n}function Nb({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:kb(t,r,i,n),renderState:e()}}function kb(n,e,t,r){const i={},o=r(n,{});for(const v in o)i[v]=Qh(o[v]);let{initial:s,animate:u}=n;const c=Hd(n),f=dT(n);e&&f&&!c&&n.inherit!==!1&&(s===void 0&&(s=e.initial),u===void 0&&(u=e.animate));let d=t?t.initial===!1:!1;d=d||s===!1;const p=d?u:s;if(p&&typeof p!="boolean"&&!zd(p)){const v=Array.isArray(p)?p:[p];for(let y=0;y<v.length;y++){const E=Mm(n,v[y]);if(E){const{transitionEnd:T,transition:C,...b}=E;for(const P in b){let D=b[P];if(Array.isArray(D)){const F=d?D.length-1:0;D=D[F]}D!==null&&(i[P]=D)}for(const P in T)i[P]=T[P]}}}return i}const _T=n=>(e,t)=>{const r=U.useContext(jd),i=U.useContext(Ud),o=()=>Nb(n,e,r,i);return t?o():sm(o)};function Lm(n,e,t){const{style:r}=n,i={};for(const o in r)(Ln(r[o])||e.style&&Ln(e.style[o])||pT(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(i[o]=r[o]);return i}const Mb=_T({scrapeMotionValuesFromProps:Lm,createRenderState:Nm});function wT(n,e,t){const r=Lm(n,e,t);for(const i in n)if(Ln(n[i])||Ln(e[i])){const o=ju.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=n[i]}return r}const Lb=_T({scrapeMotionValuesFromProps:wT,createRenderState:vT}),Fb=Symbol.for("motionComponentSymbol");function cu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Vb(n,e,t){return U.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):cu(t)&&(t.current=r))},[e])}const Fm=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Bb="framerAppearId",xT="data-"+Fm(Bb),ET=U.createContext({});function Ub(n,e,t,r,i){const{visualElement:o}=U.useContext(jd),s=U.useContext(fT),u=U.useContext(Ud),c=U.useContext(Pm).reducedMotion,f=U.useRef(null);r=r||s.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const d=f.current,p=U.useContext(ET);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&jb(f.current,t,i,p);const v=U.useRef(!1);U.useInsertionEffect(()=>{d&&v.current&&d.update(t,u)});const y=t[xT],E=U.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return yA(()=>{d&&(v.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),E.current&&d.animationState&&d.animationState.animateChanges())}),U.useEffect(()=>{d&&(!E.current&&d.animationState&&d.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),E.current=!1),d.enteringChildren=void 0)}),d}function jb(n,e,t,r){const{layoutId:i,layout:o,drag:s,dragConstraints:u,layoutScroll:c,layoutRoot:f,layoutCrossfade:d}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:AT(n.parent)),n.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!s||u&&cu(u),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:f})}function AT(n){if(n)return n.options.allowProjection!==!1?n.projection:AT(n.parent)}function t1(n,{forwardMotionProps:e=!1}={},t,r){t&&pb(t);const i=km(n)?Lb:Mb;function o(u,c){let f;const d={...U.useContext(Pm),...u,layoutId:zb(u)},{isStatic:p}=d,v=_b(u),y=i(u,p);if(!p&&am){Hb();const E=Gb(d);f=E.MeasureLayout,v.visualElement=Ub(n,y,d,r,E.ProjectionNode)}return G.jsxs(jd.Provider,{value:v,children:[f&&v.visualElement?G.jsx(f,{visualElement:v.visualElement,...d}):null,Ob(n,u,Vb(y,v.visualElement,c),y,p,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const s=U.forwardRef(o);return s[Fb]=n,s}function zb({layoutId:n}){const e=U.useContext(om).id;return e&&n!==void 0?e+"-"+n:n}function Hb(n,e){U.useContext(fT).strict}function Gb(n){const{drag:e,layout:t}=Su;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Wb(n,e){if(typeof Proxy>"u")return t1;const t=new Map,r=(o,s)=>t1(o,s,n,e),i=(o,s)=>r(o,s);return new Proxy(i,{get:(o,s)=>s==="create"?r:(t.has(s)||t.set(s,t1(s,void 0,n,e)),t.get(s))})}function TT({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function $b({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Kb(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function n1(n){return n===void 0||n===1}function eg({scale:n,scaleX:e,scaleY:t}){return!n1(n)||!n1(e)||!n1(t)}function $s(n){return eg(n)||CT(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function CT(n){return W2(n.x)||W2(n.y)}function W2(n){return n&&n!=="0%"}function vd(n,e,t){const r=n-t,i=e*r;return t+i}function $2(n,e,t,r,i){return i!==void 0&&(n=vd(n,i,r)),vd(n,t,r)+e}function tg(n,e=0,t=1,r,i){n.min=$2(n.min,e,t,r,i),n.max=$2(n.max,e,t,r,i)}function IT(n,{x:e,y:t}){tg(n.x,e.translate,e.scale,e.originPoint),tg(n.y,t.translate,t.scale,t.originPoint)}const K2=.999999999999,q2=1.0000000000001;function qb(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let o,s;for(let u=0;u<i;u++){o=t[u],s=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&hu(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,IT(n,s)),r&&$s(o.latestValues)&&hu(n,o.latestValues))}e.x<q2&&e.x>K2&&(e.x=1),e.y<q2&&e.y>K2&&(e.y=1)}function fu(n,e){n.min=n.min+e,n.max=n.max+e}function X2(n,e,t,r,i=.5){const o=Pt(n.min,n.max,i);tg(n,e,t,o,r)}function hu(n,e){X2(n.x,e.x,e.scaleX,e.scale,e.originX),X2(n.y,e.y,e.scaleY,e.scale,e.originY)}function ST(n,e){return TT(Kb(n.getBoundingClientRect(),e))}function Xb(n,e,t){const r=ST(n,t),{scroll:i}=e;return i&&(fu(r.x,i.offset.x),fu(r.y,i.offset.y)),r}const Y2=()=>({translate:0,scale:1,origin:0,originPoint:0}),du=()=>({x:Y2(),y:Y2()}),Q2=()=>({min:0,max:0}),Ft=()=>({x:Q2(),y:Q2()}),ng={current:null},RT={current:!1};function Yb(){if(RT.current=!0,!!am)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>ng.current=n.matches;n.addEventListener("change",e),e()}else ng.current=!1}const Qb=new WeakMap;function Zb(n,e,t){for(const r in e){const i=e[r],o=t[r];if(Ln(i))n.addValue(r,i);else if(Ln(o))n.addValue(r,Iu(i,{owner:n}));else if(o!==i)if(n.hasValue(r)){const s=n.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=n.getStaticValue(r);n.addValue(r,Iu(s!==void 0?s:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const Z2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Jb{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:s},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Tm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=tr.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,It.render(this.render,!1,!0))};const{latestValues:c,renderState:f}=s;this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=Hd(t),this.isVariantNode=dT(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in p){const y=p[v];c[v]!==void 0&&Ln(y)&&y.set(c[v])}}mount(e){this.current=e,Qb.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),RT.current||Yb(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ng.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),is(this.notifyUpdate),is(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=zu.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&It.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Su){const t=Su[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ft()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Z2.length;r++){const i=Z2[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,s=e[o];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Zb(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Iu(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(_A(r)||xA(r))?r=parseFloat(r):!ab(r)&&os.test(t)&&(r=nT(e,t)),this.setBaseTarget(e,Ln(r)?r.get():r)),Ln(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const o=Mm(this.props,t,this.presenceContext?.custom);o&&(r=o[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ln(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new hm),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Sm.render(this.render)}}class PT extends Jb{constructor(){super(...arguments),this.KeyframeResolver=XP}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ln(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function bT(n,{style:e,vars:t},r,i){const o=n.style;let s;for(s in e)o[s]=e[s];i?.applyProjectionStyles(o,r);for(s in t)o.setProperty(s,t[s])}function e8(n){return window.getComputedStyle(n)}class t8 extends PT{constructor(){super(...arguments),this.type="html",this.renderInstance=bT}readValueFromInstance(e,t){if(zu.has(t))return this.projection?.isProjecting?K1(t):pP(e,t);{const r=e8(e),i=(gm(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return ST(e,t)}build(e,t,r){Om(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return Lm(e,t,r)}}const DT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function n8(n,e,t,r){bT(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(DT.has(i)?i:Fm(i),e.attrs[i])}class r8 extends PT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ft}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(zu.has(t)){const r=tT(t);return r&&r.default||0}return t=DT.has(t)?t:Fm(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return wT(e,t,r)}build(e,t,r){mT(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){n8(e,t,r,i)}mount(e){this.isSVGTag=yT(e.tagName),super.mount(e)}}const i8=(n,e)=>km(n)?new r8(e):new t8(e,{allowProjection:n!==U.Fragment});function wu(n,e,t){const r=n.getProps();return Mm(r,e,t!==void 0?t:r.custom,n)}const rg=n=>Array.isArray(n);function o8(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Iu(t))}function s8(n){return rg(n)?n[n.length-1]||0:n}function a8(n,e){const t=wu(n,e);let{transitionEnd:r={},transition:i={},...o}=t||{};o={...o,...r};for(const s in o){const u=s8(o[s]);o8(n,s,u)}}function u8(n){return!!(Ln(n)&&n.add)}function ig(n,e){const t=n.getValue("willChange");if(u8(t))return t.add(e);if(!t&&no.WillChange){const r=new no.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function OT(n){return n.props[xT]}const l8=n=>n!==null;function c8(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(l8),o=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[o]}const f8={type:"spring",stiffness:500,damping:25,restSpeed:10},h8=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),d8={type:"keyframes",duration:.8},p8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},g8=(n,{keyframes:e})=>e.length>2?d8:zu.has(n)?n.startsWith("scale")?h8(e[1]):f8:p8;function m8({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:u,from:c,elapsed:f,...d}){return!!Object.keys(d).length}const Vm=(n,e,t,r={},i,o)=>s=>{const u=Cm(r,n)||{},c=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Ei(c);const d={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:v=>{e.set(v),u.onUpdate&&u.onUpdate(v)},onComplete:()=>{s(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:o?void 0:i};m8(u)||Object.assign(d,g8(n,d)),d.duration&&(d.duration=Ei(d.duration)),d.repeatDelay&&(d.repeatDelay=Ei(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Z1(d),d.delay===0&&(p=!0)),(no.instantAnimations||no.skipAnimations)&&(p=!0,Z1(d),d.delay=0),d.allowFlatten=!u.type&&!u.ease,p&&!o&&e.get()!==void 0){const v=c8(d.keyframes,u);if(v!==void 0){It.update(()=>{d.onUpdate(v),d.onComplete()});return}}return u.isSync?new Am(d):new FP(d)};function v8({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function NT(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:s,...u}=e;r&&(o=r);const c=[],f=i&&n.animationState&&n.animationState.getState()[i];for(const d in u){const p=n.getValue(d,n.latestValues[d]??null),v=u[d];if(v===void 0||f&&v8(f,d))continue;const y={delay:t,...Cm(o||{},d)},E=p.get();if(E!==void 0&&!p.isAnimating&&!Array.isArray(v)&&v===E&&!y.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const b=OT(n);if(b){const P=window.MotionHandoffAnimation(b,d,It);P!==null&&(y.startTime=P,T=!0)}}ig(n,d),p.start(Vm(d,p,v,n.shouldReduceMotion&&ZA.has(d)?{type:!1}:y,n,T));const C=p.animation;C&&c.push(C)}return s&&Promise.all(c).then(()=>{It.update(()=>{s&&a8(n,s)})}),c}function kT(n,e,t,r=0,i=1){const o=Array.from(n).sort((f,d)=>f.sortNodePosition(d)).indexOf(e),s=n.size,u=(s-1)*r;return typeof t=="function"?t(o,s):i===1?o*r:u-o*r}function og(n,e,t={}){const r=wu(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const o=r?()=>Promise.all(NT(n,r,t)):()=>Promise.resolve(),s=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:d,staggerDirection:p}=i;return y8(n,e,c,f,d,p,t)}:()=>Promise.resolve(),{when:u}=i;if(u){const[c,f]=u==="beforeChildren"?[o,s]:[s,o];return c().then(()=>f())}else return Promise.all([o(),s(t.delay)])}function y8(n,e,t=0,r=0,i=0,o=1,s){const u=[];for(const c of n.variantChildren)c.notify("AnimationStart",e),u.push(og(c,e,{...s,delay:t+(typeof r=="function"?0:r)+kT(n.variantChildren,c,r,i,o)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(u)}function _8(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>og(n,o,t));r=Promise.all(i)}else if(typeof e=="string")r=og(n,e,t);else{const i=typeof e=="function"?wu(n,e,t.custom):e;r=Promise.all(NT(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function MT(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const w8=Dm.length;function LT(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?LT(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<w8;t++){const r=Dm[t],i=n.props[r];(Sc(i)||i===!1)&&(e[r]=i)}return e}const x8=[...bm].reverse(),E8=bm.length;function A8(n){return e=>Promise.all(e.map(({animation:t,options:r})=>_8(n,t,r)))}function T8(n){let e=A8(n),t=J2(),r=!0;const i=c=>(f,d)=>{const p=wu(n,d,c==="exit"?n.presenceContext?.custom:void 0);if(p){const{transition:v,transitionEnd:y,...E}=p;f={...f,...E,...y}}return f};function o(c){e=c(n)}function s(c){const{props:f}=n,d=LT(n.parent)||{},p=[],v=new Set;let y={},E=1/0;for(let C=0;C<E8;C++){const b=x8[C],P=t[b],D=f[b]!==void 0?f[b]:d[b],F=Sc(D),j=b===c?P.isActive:null;j===!1&&(E=C);let W=D===d[b]&&D!==f[b]&&F;if(W&&r&&n.manuallyAnimateOnMount&&(W=!1),P.protectedKeys={...y},!P.isActive&&j===null||!D&&!P.prevProp||zd(D)||typeof D=="boolean")continue;const R=C8(P.prevProp,D);let I=R||b===c&&P.isActive&&!W&&F||C>E&&F,O=!1;const M=Array.isArray(D)?D:[D];let B=M.reduce(i(b),{});j===!1&&(B={});const{prevResolvedValues:z={}}=P,L={...z,...B},fe=Te=>{I=!0,v.has(Te)&&(O=!0,v.delete(Te)),P.needsAnimating[Te]=!0;const Z=n.getValue(Te);Z&&(Z.liveStyle=!1)};for(const Te in L){const Z=B[Te],pe=z[Te];if(y.hasOwnProperty(Te))continue;let he=!1;rg(Z)&&rg(pe)?he=!MT(Z,pe):he=Z!==pe,he?Z!=null?fe(Te):v.add(Te):Z!==void 0&&v.has(Te)?fe(Te):P.protectedKeys[Te]=!0}P.prevProp=D,P.prevResolvedValues=B,P.isActive&&(y={...y,...B}),r&&n.blockInitialAnimation&&(I=!1);const Le=W&&R;I&&(!Le||O)&&p.push(...M.map(Te=>{const Z={type:b};if(typeof Te=="string"&&r&&!Le&&n.manuallyAnimateOnMount&&n.parent){const{parent:pe}=n,he=wu(pe,Te);if(pe.enteringChildren&&he){const{delayChildren:K}=he.transition||{};Z.delay=kT(pe.enteringChildren,n,K)}}return{animation:Te,options:Z}}))}if(v.size){const C={};if(typeof f.initial!="boolean"){const b=wu(n,Array.isArray(f.initial)?f.initial[0]:f.initial);b&&b.transition&&(C.transition=b.transition)}v.forEach(b=>{const P=n.getBaseTarget(b),D=n.getValue(b);D&&(D.liveStyle=!0),C[b]=P??null}),p.push({animation:C})}let T=!!p.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(T=!1),r=!1,T?e(p):Promise.resolve()}function u(c,f){if(t[c].isActive===f)return Promise.resolve();n.variantChildren?.forEach(p=>p.animationState?.setActive(c,f)),t[c].isActive=f;const d=s(c);for(const p in t)t[p].protectedKeys={};return d}return{animateChanges:s,setActive:u,setAnimateFunction:o,getState:()=>t,reset:()=>{t=J2()}}}function C8(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!MT(e,n):!1}function zs(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function J2(){return{animate:zs(!0),whileInView:zs(),whileHover:zs(),whileTap:zs(),whileDrag:zs(),whileFocus:zs(),exit:zs()}}class hs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class I8 extends hs{constructor(e){super(e),e.animationState||(e.animationState=T8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();zd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let S8=0;class R8 extends hs{constructor(){super(...arguments),this.id=S8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const P8={animation:{Feature:I8},exit:{Feature:R8}};function Pc(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Kc(n){return{point:{x:n.pageX,y:n.pageY}}}const b8=n=>e=>Rm(e)&&n(e,Kc(e));function fc(n,e,t,r){return Pc(n,e,b8(t),r)}const FT=1e-4,D8=1-FT,O8=1+FT,VT=.01,N8=0-VT,k8=0+VT;function Gn(n){return n.max-n.min}function M8(n,e,t){return Math.abs(n-e)<=t}function ew(n,e,t,r=.5){n.origin=r,n.originPoint=Pt(e.min,e.max,n.origin),n.scale=Gn(t)/Gn(e),n.translate=Pt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=D8&&n.scale<=O8||isNaN(n.scale))&&(n.scale=1),(n.translate>=N8&&n.translate<=k8||isNaN(n.translate))&&(n.translate=0)}function hc(n,e,t,r){ew(n.x,e.x,t.x,r?r.originX:void 0),ew(n.y,e.y,t.y,r?r.originY:void 0)}function tw(n,e,t){n.min=t.min+e.min,n.max=n.min+Gn(e)}function L8(n,e,t){tw(n.x,e.x,t.x),tw(n.y,e.y,t.y)}function nw(n,e,t){n.min=e.min-t.min,n.max=n.min+Gn(e)}function dc(n,e,t){nw(n.x,e.x,t.x),nw(n.y,e.y,t.y)}function Ar(n){return[n("x"),n("y")]}const BT=({current:n})=>n?n.ownerDocument.defaultView:null,rw=(n,e)=>Math.abs(n-e);function F8(n,e){const t=rw(n.x,e.x),r=rw(n.y,e.y);return Math.sqrt(t**2+r**2)}class UT{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=i1(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,E=F8(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!E)return;const{point:T}=v,{timestamp:C}=En;this.history.push({...T,timestamp:C});const{onStart:b,onMove:P}=this.handlers;y||(b&&b(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,v)},this.handlePointerMove=(v,y)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=r1(y,this.transformPagePoint),It.update(this.updatePoint,!0)},this.handlePointerUp=(v,y)=>{this.end();const{onEnd:E,onSessionEnd:T,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=i1(v.type==="pointercancel"?this.lastMoveEventInfo:r1(y,this.transformPagePoint),this.history);this.startEvent&&E&&E(v,b),T&&T(v,b)},!Rm(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const u=Kc(e),c=r1(u,this.transformPagePoint),{point:f}=c,{timestamp:d}=En;this.history=[{...f,timestamp:d}];const{onSessionStart:p}=t;p&&p(e,i1(c,this.history)),this.removeListeners=Gc(fc(this.contextWindow,"pointermove",this.handlePointerMove),fc(this.contextWindow,"pointerup",this.handlePointerUp),fc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),is(this.updatePoint)}}function r1(n,e){return e?{point:e(n.point)}:n}function iw(n,e){return{x:n.x-e.x,y:n.y-e.y}}function i1({point:n},e){return{point:n,delta:iw(n,jT(e)),offset:iw(n,V8(e)),velocity:B8(e,.1)}}function V8(n){return n[0]}function jT(n){return n[n.length-1]}function B8(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=jT(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Ei(e)));)t--;if(!r)return{x:0,y:0};const o=Rr(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function U8(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Pt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Pt(t,n,r.max):Math.min(n,t)),n}function ow(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function j8(n,{top:e,left:t,bottom:r,right:i}){return{x:ow(n.x,t,i),y:ow(n.y,e,r)}}function sw(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function z8(n,e){return{x:sw(n.x,e.x),y:sw(n.y,e.y)}}function H8(n,e){let t=.5;const r=Gn(n),i=Gn(e);return i>r?t=Tc(e.min,e.max-r,n.min):r>i&&(t=Tc(n.min,n.max-i,e.min)),to(0,1,t)}function G8(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const sg=.35;function W8(n=sg){return n===!1?n=0:n===!0&&(n=sg),{x:aw(n,"left","right"),y:aw(n,"top","bottom")}}function aw(n,e,t){return{min:uw(n,e),max:uw(n,t)}}function uw(n,e){return typeof n=="number"?n:n[e]||0}const $8=new WeakMap;class K8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ft(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=p=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Kc(p).point)},s=(p,v)=>{const{drag:y,dragPropagation:E,onDragStart:T}=this.getProps();if(y&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=JP(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ar(b=>{let P=this.getAxisMotionValue(b).get()||0;if(Ai.test(P)){const{projection:D}=this.visualElement;if(D&&D.layout){const F=D.layout.layoutBox[b];F&&(P=Gn(F)*(parseFloat(P)/100))}}this.originPoint[b]=P}),T&&It.postRender(()=>T(p,v)),ig(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},u=(p,v)=>{this.latestPointerEvent=p,this.latestPanInfo=v;const{dragPropagation:y,dragDirectionLock:E,onDirectionLock:T,onDrag:C}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:b}=v;if(E&&this.currentDirection===null){this.currentDirection=q8(b),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",v.point,b),this.updateAxis("y",v.point,b),this.visualElement.render(),C&&C(p,v)},c=(p,v)=>{this.latestPointerEvent=p,this.latestPanInfo=v,this.stop(p,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Ar(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new UT(e,{onSessionStart:o,onStart:s,onMove:u,onSessionEnd:c,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:BT(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:u}=this.getProps();u&&It.postRender(()=>u(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Dh(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=U8(s,this.constraints[e],this.elastic[e])),o.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&cu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=j8(r.layoutBox,e):this.constraints=!1,this.elastic=W8(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ar(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=G8(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!cu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=Xb(r,i.root,this.visualElement.getTransformPagePoint());let s=z8(i.layout.layoutBox,o);if(t){const u=t($b(s));this.hasMutatedConstraints=!!u,u&&(s=TT(u))}return s}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},f=Ar(d=>{if(!Dh(d,t,this.currentDirection))return;let p=c&&c[d]||{};s&&(p={min:0,max:0});const v=i?200:1e6,y=i?40:1e7,E={type:"inertia",velocity:r?e[d]:0,bounceStiffness:v,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...o,...p};return this.startAxisValueAnimation(d,E)});return Promise.all(f).then(u)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return ig(this.visualElement,e),r.start(Vm(e,r,0,t,this.visualElement,!1))}stopAnimation(){Ar(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ar(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ar(t=>{const{drag:r}=this.getProps();if(!Dh(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(t);if(i&&i.layout){const{min:s,max:u}=i.layout.layoutBox[t];o.set(e[t]-Pt(s,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!cu(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ar(s=>{const u=this.getAxisMotionValue(s);if(u&&this.constraints!==!1){const c=u.get();i[s]=H8({min:c,max:c},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ar(s=>{if(!Dh(s,e,null))return;const u=this.getAxisMotionValue(s),{min:c,max:f}=this.constraints[s];u.set(Pt(c,f,i[s]))})}addListeners(){if(!this.visualElement.current)return;$8.set(this.visualElement,this);const e=this.visualElement.current,t=fc(e,"pointerdown",c=>{const{drag:f,dragListener:d=!0}=this.getProps();f&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();cu(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),It.read(r);const s=Pc(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(Ar(d=>{const p=this.getAxisMotionValue(d);p&&(this.originPoint[d]+=c[d].translate,p.set(p.get()+c[d].translate))}),this.visualElement.render())}));return()=>{s(),t(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=sg,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:u}}}function Dh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function q8(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class X8 extends hs{constructor(e){super(e),this.removeGroupControls=Dr,this.removeListeners=Dr,this.controls=new K8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Dr}unmount(){this.removeGroupControls(),this.removeListeners()}}const lw=n=>(e,t)=>{n&&It.postRender(()=>n(e,t))};class Y8 extends hs{constructor(){super(...arguments),this.removePointerDownListener=Dr}onPointerDown(e){this.session=new UT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:BT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:lw(e),onStart:lw(t),onMove:r,onEnd:(o,s)=>{delete this.session,i&&It.postRender(()=>i(o,s))}}}mount(){this.removePointerDownListener=fc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Zh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cw(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Xl={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ke.test(n))n=parseFloat(n);else return n;const t=cw(n,e.target.x),r=cw(n,e.target.y);return`${t}% ${r}%`}},Q8={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=os.parse(n);if(i.length>5)return r;const o=os.createTransformer(n),s=typeof i[0]!="number"?1:0,u=t.x.scale*e.x,c=t.y.scale*e.y;i[0+s]/=u,i[1+s]/=c;const f=Pt(u,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=f),typeof i[3+s]=="number"&&(i[3+s]/=f),o(i)}};let o1=!1;class Z8 extends U.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;wb(J8),o&&(t.group&&t.group.add(o),r&&r.register&&i&&r.register(o),o1&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Zh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:o}=this.props,{projection:s}=r;return s&&(s.isPresent=o,o1=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==o?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||It.postRender(()=>{const u=s.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Sm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;o1=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function zT(n){const[e,t]=lT(),r=U.useContext(om);return G.jsx(Z8,{...n,layoutGroup:r,switchLayoutGroup:U.useContext(ET),isPresent:e,safeToRemove:t})}const J8={borderRadius:{...Xl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xl,borderTopRightRadius:Xl,borderBottomLeftRadius:Xl,borderBottomRightRadius:Xl,boxShadow:Q8};function e6(n,e,t){const r=Ln(n)?n:Iu(n);return r.start(Vm("",r,e,t)),r.animation}const t6=(n,e)=>n.depth-e.depth;class n6{constructor(){this.children=[],this.isDirty=!1}add(e){um(this.children,e),this.isDirty=!0}remove(e){lm(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(t6),this.isDirty=!1,this.children.forEach(e)}}function r6(n,e){const t=tr.now(),r=({timestamp:i})=>{const o=i-t;o>=e&&(is(r),n(o-e))};return It.setup(r,!0),()=>is(r)}const HT=["TopLeft","TopRight","BottomLeft","BottomRight"],i6=HT.length,fw=n=>typeof n=="string"?parseFloat(n):n,hw=n=>typeof n=="number"||ke.test(n);function o6(n,e,t,r,i,o){i?(n.opacity=Pt(0,t.opacity??1,s6(r)),n.opacityExit=Pt(e.opacity??1,0,a6(r))):o&&(n.opacity=Pt(e.opacity??1,t.opacity??1,r));for(let s=0;s<i6;s++){const u=`border${HT[s]}Radius`;let c=dw(e,u),f=dw(t,u);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||hw(c)===hw(f)?(n[u]=Math.max(Pt(fw(c),fw(f),r),0),(Ai.test(f)||Ai.test(c))&&(n[u]+="%")):n[u]=f}(e.rotate||t.rotate)&&(n.rotate=Pt(e.rotate||0,t.rotate||0,r))}function dw(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const s6=GT(0,.5,PA),a6=GT(.5,.95,Dr);function GT(n,e,t){return r=>r<n?0:r>e?1:t(Tc(n,e,r))}function pw(n,e){n.min=e.min,n.max=e.max}function Er(n,e){pw(n.x,e.x),pw(n.y,e.y)}function gw(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function mw(n,e,t,r,i){return n-=e,n=vd(n,1/t,r),i!==void 0&&(n=vd(n,1/i,r)),n}function u6(n,e=0,t=1,r=.5,i,o=n,s=n){if(Ai.test(e)&&(e=parseFloat(e),e=Pt(s.min,s.max,e/100)-s.min),typeof e!="number")return;let u=Pt(o.min,o.max,r);n===o&&(u-=e),n.min=mw(n.min,e,t,u,i),n.max=mw(n.max,e,t,u,i)}function vw(n,e,[t,r,i],o,s){u6(n,e[t],e[r],e[i],e.scale,o,s)}const l6=["x","scaleX","originX"],c6=["y","scaleY","originY"];function yw(n,e,t,r){vw(n.x,e,l6,t?t.x:void 0,r?r.x:void 0),vw(n.y,e,c6,t?t.y:void 0,r?r.y:void 0)}function _w(n){return n.translate===0&&n.scale===1}function WT(n){return _w(n.x)&&_w(n.y)}function ww(n,e){return n.min===e.min&&n.max===e.max}function f6(n,e){return ww(n.x,e.x)&&ww(n.y,e.y)}function xw(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function $T(n,e){return xw(n.x,e.x)&&xw(n.y,e.y)}function Ew(n){return Gn(n.x)/Gn(n.y)}function Aw(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class h6{constructor(){this.members=[]}add(e){um(this.members,e),e.scheduleRender()}remove(e){if(lm(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function d6(n,e,t){let r="";const i=n.x.translate/e.x,o=n.y.translate/e.y,s=t?.z||0;if((i||o||s)&&(r=`translate3d(${i}px, ${o}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:d,rotateX:p,rotateY:v,skewX:y,skewY:E}=t;f&&(r=`perspective(${f}px) ${r}`),d&&(r+=`rotate(${d}deg) `),p&&(r+=`rotateX(${p}deg) `),v&&(r+=`rotateY(${v}deg) `),y&&(r+=`skewX(${y}deg) `),E&&(r+=`skewY(${E}deg) `)}const u=n.x.scale*e.x,c=n.y.scale*e.y;return(u!==1||c!==1)&&(r+=`scale(${u}, ${c})`),r||"none"}const s1=["","X","Y","Z"],p6=1e3;let g6=0;function a1(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function KT(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=OT(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",It,!(i||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&KT(r)}function qT({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},u=e?.()){this.id=g6++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(y6),this.nodes.forEach(E6),this.nodes.forEach(A6),this.nodes.forEach(_6)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new n6)}addEventListener(s,u){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new hm),this.eventHandlers.get(s).add(u)}notifyListeners(s,...u){const c=this.eventHandlers.get(s);c&&c.notify(...u)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=uT(s)&&!ob(s),this.instance=s;const{layoutId:u,layout:c,visualElement:f}=this.options;if(f&&!f.current&&f.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||u)&&(this.isLayoutDirty=!0),n){let d,p=0;const v=()=>this.root.updateBlockedByResize=!1;It.read(()=>{p=window.innerWidth}),n(s,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,d&&d(),d=r6(v,250),Zh.hasAnimatedSinceResize&&(Zh.hasAnimatedSinceResize=!1,this.nodes.forEach(Iw)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeLayoutChanged:v,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||f.getDefaultTransition()||R6,{onLayoutAnimationStart:T,onLayoutAnimationComplete:C}=f.getProps(),b=!this.targetLayout||!$T(this.targetLayout,y),P=!p&&v;if(this.options.layoutRoot||this.resumeFrom||P||p&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const D={...Cm(E,"layout"),onPlay:T,onComplete:C};(f.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D),this.setAnimationOrigin(d,P)}else p||Iw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),is(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(T6),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&KT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const p=this.path[d];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Tw);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Cw);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(x6),this.nodes.forEach(m6),this.nodes.forEach(v6)):this.nodes.forEach(Cw),this.clearAllSnapshots();const u=tr.now();En.delta=to(0,1e3/60,u-En.timestamp),En.timestamp=u,En.isProcessing=!0,X0.update.process(En),X0.preRender.process(En),X0.render.process(En),En.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Sm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(w6),this.sharedNodes.forEach(C6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,It.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){It.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Gn(this.snapshot.measuredBox.x)&&!Gn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ft(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(u=!1),u&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!WT(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,d=f!==this.prevTransformTemplateValue;s&&this.instance&&(u||$s(this.latestValues)||d)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return s&&(c=this.removeTransform(c)),P6(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return Ft();const u=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(b6))){const{scroll:f}=this.root;f&&(fu(u.x,f.offset.x),fu(u.y,f.offset.y))}return u}removeElementScroll(s){const u=Ft();if(Er(u,s),this.scroll?.wasRoot)return u;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:d,options:p}=f;f!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&Er(u,s),fu(u.x,d.offset.x),fu(u.y,d.offset.y))}return u}applyTransform(s,u=!1){const c=Ft();Er(c,s);for(let f=0;f<this.path.length;f++){const d=this.path[f];!u&&d.options.layoutScroll&&d.scroll&&d!==d.root&&hu(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),$s(d.latestValues)&&hu(c,d.latestValues)}return $s(this.latestValues)&&hu(c,this.latestValues),c}removeTransform(s){const u=Ft();Er(u,s);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!$s(f.latestValues))continue;eg(f.latestValues)&&f.updateSnapshot();const d=Ft(),p=f.measurePageBox();Er(d,p),yw(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,d)}return $s(this.latestValues)&&yw(u,this.latestValues),u}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==En.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=En.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ft(),this.relativeTargetOrigin=Ft(),dc(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ft(),this.targetWithTransforms=Ft()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),L8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Er(this.target,this.layout.layoutBox),IT(this.target,this.targetDelta)):Er(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ft(),this.relativeTargetOrigin=Ft(),dc(this.relativeTargetOrigin,this.target,v.target),Er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||eg(this.parent.latestValues)||CT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const s=this.getLead(),u=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===En.timestamp&&(c=!1),c)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;Er(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,v=this.treeScale.y;qb(this.layoutCorrected,this.treeScale,this.path,u),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Ft());const{target:y}=s;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(gw(this.prevProjectionDelta.x,this.projectionDelta.x),gw(this.prevProjectionDelta.y,this.projectionDelta.y)),hc(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==v||!Aw(this.projectionDelta.x,this.prevProjectionDelta.x)||!Aw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=du(),this.projectionDelta=du(),this.projectionDeltaWithTransform=du()}setAnimationOrigin(s,u=!1){const c=this.snapshot,f=c?c.latestValues:{},d={...this.latestValues},p=du();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=Ft(),y=c?c.source:void 0,E=this.layout?this.layout.source:void 0,T=y!==E,C=this.getStack(),b=!C||C.members.length<=1,P=!!(T&&!b&&this.options.crossfade===!0&&!this.path.some(S6));this.animationProgress=0;let D;this.mixTargetDelta=F=>{const j=F/1e3;Sw(p.x,s.x,j),Sw(p.y,s.y,j),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(dc(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),I6(this.relativeTarget,this.relativeTargetOrigin,v,j),D&&f6(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=Ft()),Er(D,this.relativeTarget)),T&&(this.animationValues=d,o6(d,f,this.latestValues,j,P,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(is(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=It.update(()=>{Zh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Iu(0)),this.currentAnimation=e6(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),s.onUpdate&&s.onUpdate(u)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(p6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:u,target:c,layout:f,latestValues:d}=s;if(!(!u||!c||!f)){if(this!==s&&this.layout&&f&&XT(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||Ft();const p=Gn(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+p;const v=Gn(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+v}Er(u,c),hu(u,d),hc(this.projectionDeltaWithTransform,this.layoutCorrected,u,d)}}registerSharedNode(s,u){this.sharedNodes.has(s)||this.sharedNodes.set(s,new h6),this.sharedNodes.get(s).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:u,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let u=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(u=!0),!u)return;const f={};c.z&&a1("z",s,f,this.animationValues);for(let d=0;d<s1.length;d++)a1(`rotate${s1[d]}`,s,f,this.animationValues),a1(`skew${s1[d]}`,s,f,this.animationValues);s.render();for(const d in f)s.setStaticValue(d,f[d]),this.animationValues&&(this.animationValues[d]=f[d]);s.scheduleRender()}applyProjectionStyles(s,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=Qh(u?.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=Qh(u?.pointerEvents)||""),this.hasProjected&&!$s(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const d=f.animationValues||f.latestValues;this.applyTransformsToTarget();let p=d6(this.projectionDeltaWithTransform,this.treeScale,d);c&&(p=c(d,p)),s.transform=p;const{x:v,y}=this.projectionDelta;s.transformOrigin=`${v.origin*100}% ${y.origin*100}% 0`,f.animationValues?s.opacity=f===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:s.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const E in Rc){if(d[E]===void 0)continue;const{correct:T,applyTo:C,isCSSVariable:b}=Rc[E],P=p==="none"?d[E]:T(d[E],f);if(C){const D=C.length;for(let F=0;F<D;F++)s[C[F]]=P}else b?this.options.visualElement.renderState.vars[E]=P:s[E]=P}this.options.layoutId&&(s.pointerEvents=f===this?Qh(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(Tw),this.root.sharedNodes.clear()}}}function m6(n){n.updateLayout()}function v6(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:i}=n.options,o=e.source!==n.layout.source;i==="size"?Ar(d=>{const p=o?e.measuredBox[d]:e.layoutBox[d],v=Gn(p);p.min=t[d].min,p.max=p.min+v}):XT(i,e.layoutBox,t)&&Ar(d=>{const p=o?e.measuredBox[d]:e.layoutBox[d],v=Gn(t[d]);p.max=p.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+v)});const s=du();hc(s,t,e.layoutBox);const u=du();o?hc(u,n.applyTransform(r,!0),e.measuredBox):hc(u,t,e.layoutBox);const c=!WT(s);let f=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:v}=d;if(p&&v){const y=Ft();dc(y,e.layoutBox,p.layoutBox);const E=Ft();dc(E,t,v.layoutBox),$T(y,E)||(f=!0),d.options.layoutRoot&&(n.relativeTarget=E,n.relativeTargetOrigin=y,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:u,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function y6(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function _6(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function w6(n){n.clearSnapshot()}function Tw(n){n.clearMeasurements()}function Cw(n){n.isLayoutDirty=!1}function x6(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Iw(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function E6(n){n.resolveTargetDelta()}function A6(n){n.calcProjection()}function T6(n){n.resetSkewAndRotation()}function C6(n){n.removeLeadSnapshot()}function Sw(n,e,t){n.translate=Pt(e.translate,0,t),n.scale=Pt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Rw(n,e,t,r){n.min=Pt(e.min,t.min,r),n.max=Pt(e.max,t.max,r)}function I6(n,e,t,r){Rw(n.x,e.x,t.x,r),Rw(n.y,e.y,t.y,r)}function S6(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const R6={duration:.45,ease:[.4,0,.1,1]},Pw=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),bw=Pw("applewebkit/")&&!Pw("chrome/")?Math.round:Dr;function Dw(n){n.min=bw(n.min),n.max=bw(n.max)}function P6(n){Dw(n.x),Dw(n.y)}function XT(n,e,t){return n==="position"||n==="preserve-aspect"&&!M8(Ew(e),Ew(t),.2)}function b6(n){return n!==n.root&&n.scroll?.wasRoot}const D6=qT({attachResizeListener:(n,e)=>Pc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),u1={current:void 0},YT=qT({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!u1.current){const n=new D6({});n.mount(window),n.setOptions({layoutScroll:!0}),u1.current=n}return u1.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),O6={pan:{Feature:Y8},drag:{Feature:X8,ProjectionNode:YT,MeasureLayout:zT}};function Ow(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,o=r[i];o&&It.postRender(()=>o(e,Kc(e)))}class N6 extends hs{mount(){const{current:e}=this.node;e&&(this.unmount=eb(e,(t,r)=>(Ow(this.node,r,"Start"),i=>Ow(this.node,i,"End"))))}unmount(){}}class k6 extends hs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Gc(Pc(this.node.current,"focus",()=>this.onFocus()),Pc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Nw(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),o=r[i];o&&It.postRender(()=>o(e,Kc(e)))}class M6 extends hs{mount(){const{current:e}=this.node;e&&(this.unmount=ib(e,(t,r)=>(Nw(this.node,r,"Start"),(i,{success:o})=>Nw(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ag=new WeakMap,l1=new WeakMap,L6=n=>{const e=ag.get(n.target);e&&e(n)},F6=n=>{n.forEach(L6)};function V6({root:n,...e}){const t=n||document;l1.has(t)||l1.set(t,{});const r=l1.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(F6,{root:n,...e})),r[i]}function B6(n,e,t){const r=V6(e);return ag.set(n,t),r.observe(n),()=>{ag.delete(n),r.unobserve(n)}}const U6={some:0,all:1};class j6 extends hs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:o}=e,s={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:U6[i]},u=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:d,onViewportLeave:p}=this.node.getProps(),v=f?d:p;v&&v(c)};return B6(this.node.current,s,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(z6(e,t))&&this.startObserver()}unmount(){}}function z6({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const H6={inView:{Feature:j6},tap:{Feature:M6},focus:{Feature:k6},hover:{Feature:N6}},G6={layout:{ProjectionNode:YT,MeasureLayout:zT}},W6={...P8,...H6,...O6,...G6},Ru=Wb(W6,i8),$6=()=>{};var kw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},K6=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],s=n[t++],u=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ZT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],s=i+1<n.length,u=s?n[i+1]:0,c=i+2<n.length,f=c?n[i+2]:0,d=o>>2,p=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,y=f&63;c||(y=64,s||(v=64)),r.push(t[d],t[p],t[v],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(QT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):K6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||u==null||f==null||p==null)throw new q6;const v=o<<2|u>>4;if(r.push(v),f!==64){const y=u<<4&240|f>>2;if(r.push(y),p!==64){const E=f<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class q6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const X6=function(n){const e=QT(n);return ZT.encodeByteArray(e,!0)},yd=function(n){return X6(n).replace(/\./g,"")},JT=function(n){try{return ZT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=()=>Y6().__FIREBASE_DEFAULTS__,Z6=()=>{if(typeof process>"u"||typeof kw>"u")return;const n=kw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},J6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&JT(n[1]);return e&&JSON.parse(e)},Gd=()=>{try{return $6()||Q6()||Z6()||J6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},eC=n=>Gd()?.emulatorHosts?.[n],eD=n=>{const e=eC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},tC=()=>Gd()?.config,nC=n=>Gd()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rC(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[yd(JSON.stringify(t)),yd(JSON.stringify(s)),""].join(".")}const pc={};function rD(){const n={prod:[],emulator:[]};for(const e of Object.keys(pc))pc[e]?n.emulator.push(e):n.prod.push(e);return n}function iD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Mw=!1;function iC(n,e){if(typeof window>"u"||typeof document>"u"||!Hu(window.location.host)||pc[n]===e||pc[n]||Mw)return;pc[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=rD().prod.length>0;function s(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,y){v.setAttribute("width","24"),v.setAttribute("id",y),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Mw=!0,s()},v}function d(v,y){v.setAttribute("id",y),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function p(){const v=iD(r),y=t("text"),E=document.getElementById(y)||document.createElement("span"),T=t("learnmore"),C=document.getElementById(T)||document.createElement("a"),b=t("preprendIcon"),P=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const D=v.element;u(D),d(C,T);const F=f();c(P,b),D.append(P,E,C,F),document.body.appendChild(D)}o?(E.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fn())}function sD(){const n=Gd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function lD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cD(){const n=Fn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fD(){return!sD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hD(){try{return typeof indexedDB=="object"}catch{return!1}}function dD(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD="FirebaseError";class so extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=pD,Object.setPrototypeOf(this,so.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qc.prototype.create)}}class qc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?gD(o,r):"Error",u=`${this.serviceName}: ${s} (${i}).`;return new so(i,u,r)}}function gD(n,e){return n.replace(mD,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const mD=/\{\$([^}]+)}/g;function vD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function oa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],s=e[i];if(Lw(o)&&Lw(s)){if(!oa(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Lw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yD(n,e){const t=new _D(n,e);return t.subscribe.bind(t)}class _D{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");wD(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=c1),i.error===void 0&&(i.error=c1),i.complete===void 0&&(i.complete=c1);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function c1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(n){return n&&n._delegate?n._delegate:n}class sa{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xD=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new tD;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AD(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,s]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&s.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ED(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ED(n){return n===Ks?void 0:n}function AD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qe||(qe={}));const CD={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},ID=qe.INFO,SD={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},RD=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=SD[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bm{constructor(e){this.name=e,this._logLevel=ID,this._logHandler=RD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const PD=(n,e)=>e.some(t=>n instanceof t);let Fw,Vw;function bD(){return Fw||(Fw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DD(){return Vw||(Vw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oC=new WeakMap,ug=new WeakMap,sC=new WeakMap,f1=new WeakMap,Um=new WeakMap;function OD(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(qo(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&oC.set(t,n)}).catch(()=>{}),Um.set(e,n),e}function ND(n){if(ug.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});ug.set(n,e)}let lg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ug.get(n);if(e==="objectStoreNames")return n.objectStoreNames||sC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return qo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kD(n){lg=n(lg)}function MD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(h1(this),e,...t);return sC.set(r,e.sort?e.sort():[e]),qo(r)}:DD().includes(n)?function(...e){return n.apply(h1(this),e),qo(oC.get(this))}:function(...e){return qo(n.apply(h1(this),e))}}function LD(n){return typeof n=="function"?MD(n):(n instanceof IDBTransaction&&ND(n),PD(n,bD())?new Proxy(n,lg):n)}function qo(n){if(n instanceof IDBRequest)return OD(n);if(f1.has(n))return f1.get(n);const e=LD(n);return e!==n&&(f1.set(n,e),Um.set(e,n)),e}const h1=n=>Um.get(n);function FD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,e),u=qo(s);return r&&s.addEventListener("upgradeneeded",c=>{r(qo(s.result),c.oldVersion,c.newVersion,qo(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const VD=["get","getKey","getAll","getAllKeys","count"],BD=["put","add","delete","clear"],d1=new Map;function Bw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(d1.get(e))return d1.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=BD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||VD.includes(t)))return;const o=async function(s,...u){const c=this.transaction(s,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),i&&c.done]))[0]};return d1.set(e,o),o}kD(n=>({...n,get:(e,t,r)=>Bw(e,t)||n.get(e,t,r),has:(e,t)=>!!Bw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(jD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function jD(n){return n.getComponent()?.type==="VERSION"}const cg="@firebase/app",Uw="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new Bm("@firebase/app"),zD="@firebase/app-compat",HD="@firebase/analytics-compat",GD="@firebase/analytics",WD="@firebase/app-check-compat",$D="@firebase/app-check",KD="@firebase/auth",qD="@firebase/auth-compat",XD="@firebase/database",YD="@firebase/data-connect",QD="@firebase/database-compat",ZD="@firebase/functions",JD="@firebase/functions-compat",eO="@firebase/installations",tO="@firebase/installations-compat",nO="@firebase/messaging",rO="@firebase/messaging-compat",iO="@firebase/performance",oO="@firebase/performance-compat",sO="@firebase/remote-config",aO="@firebase/remote-config-compat",uO="@firebase/storage",lO="@firebase/storage-compat",cO="@firebase/firestore",fO="@firebase/ai",hO="@firebase/firestore-compat",dO="firebase",pO="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="[DEFAULT]",gO={[cg]:"fire-core",[zD]:"fire-core-compat",[GD]:"fire-analytics",[HD]:"fire-analytics-compat",[$D]:"fire-app-check",[WD]:"fire-app-check-compat",[KD]:"fire-auth",[qD]:"fire-auth-compat",[XD]:"fire-rtdb",[YD]:"fire-data-connect",[QD]:"fire-rtdb-compat",[ZD]:"fire-fn",[JD]:"fire-fn-compat",[eO]:"fire-iid",[tO]:"fire-iid-compat",[nO]:"fire-fcm",[rO]:"fire-fcm-compat",[iO]:"fire-perf",[oO]:"fire-perf-compat",[sO]:"fire-rc",[aO]:"fire-rc-compat",[uO]:"fire-gcs",[lO]:"fire-gcs-compat",[cO]:"fire-fst",[hO]:"fire-fst-compat",[fO]:"fire-vertex","fire-js":"fire-js",[dO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new Map,mO=new Map,hg=new Map;function jw(n,e){try{n.container.addComponent(e)}catch(t){ro.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pu(n){const e=n.name;if(hg.has(e))return ro.debug(`There were multiple attempts to register component ${e}.`),!1;hg.set(e,n);for(const t of _d.values())jw(t,n);for(const t of mO.values())jw(t,n);return!0}function jm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ir(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xo=new qc("app","Firebase",vO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=pO;function aC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:fg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Xo.create("bad-app-name",{appName:String(i)});if(t||(t=tC()),!t)throw Xo.create("no-options");const o=_d.get(i);if(o){if(oa(t,o.options)&&oa(r,o.config))return o;throw Xo.create("duplicate-app",{appName:i})}const s=new TD(i);for(const c of hg.values())s.addComponent(c);const u=new yO(t,r,s);return _d.set(i,u),u}function uC(n=fg){const e=_d.get(n);if(!e&&n===fg&&tC())return aC();if(!e)throw Xo.create("no-app",{appName:n});return e}function Yo(n,e,t){let r=gO[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ro.warn(s.join(" "));return}Pu(new sa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O="firebase-heartbeat-database",wO=1,bc="firebase-heartbeat-store";let p1=null;function lC(){return p1||(p1=FD(_O,wO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(bc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xo.create("idb-open",{originalErrorMessage:n.message})})),p1}async function xO(n){try{const t=(await lC()).transaction(bc),r=await t.objectStore(bc).get(cC(n));return await t.done,r}catch(e){if(e instanceof so)ro.warn(e.message);else{const t=Xo.create("idb-get",{originalErrorMessage:e?.message});ro.warn(t.message)}}}async function zw(n,e){try{const r=(await lC()).transaction(bc,"readwrite");await r.objectStore(bc).put(e,cC(n)),await r.done}catch(t){if(t instanceof so)ro.warn(t.message);else{const r=Xo.create("idb-set",{originalErrorMessage:t?.message});ro.warn(r.message)}}}function cC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=1024,AO=30;class TO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new IO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Hw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>AO){const i=SO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ro.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Hw(),{heartbeatsToSend:t,unsentEntries:r}=CO(this._heartbeatsCache.heartbeats),i=yd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ro.warn(e),""}}}function Hw(){return new Date().toISOString().substring(0,10)}function CO(n,e=EO){const t=[];let r=n.slice();for(const i of n){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Gw(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Gw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class IO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hD()?dD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await xO(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Gw(n){return yd(JSON.stringify({version:2,heartbeats:n})).length}function SO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(n){Pu(new sa("platform-logger",e=>new UD(e),"PRIVATE")),Pu(new sa("heartbeat",e=>new TO(e),"PRIVATE")),Yo(cg,Uw,n),Yo(cg,Uw,"esm2020"),Yo("fire-js","")}RO("");function fC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PO=fC,hC=new qc("auth","Firebase",fC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new Bm("@firebase/auth");function bO(n,...e){wd.logLevel<=qe.WARN&&wd.warn(`Auth (${Gu}): ${n}`,...e)}function Jh(n,...e){wd.logLevel<=qe.ERROR&&wd.error(`Auth (${Gu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(n,...e){throw Hm(n,...e)}function Qr(n,...e){return Hm(n,...e)}function zm(n,e,t){const r={...PO(),[e]:t};return new qc("auth","Firebase",r).create(e,{appName:n.name})}function Qo(n){return zm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dC(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ri(n,"argument-error"),zm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Hm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return hC.create(n,...e)}function Ve(n,e,...t){if(!n)throw Hm(e,...t)}function Zi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Jh(e),new Error(e)}function io(n,e){n||Zi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(){return typeof self<"u"&&self.location?.href||""}function DO(){return Ww()==="http:"||Ww()==="https:"}function Ww(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DO()||uD()||"connection"in navigator)?navigator.onLine:!0}function NO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t){this.shortDelay=e,this.longDelay=t,io(t>e,"Short delay should be less than long delay!"),this.isMobile=oD()||lD()}get(){return OO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(n,e){io(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],LO=new Yc(3e4,6e4);function Wm(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Wu(n,e,t,r,i={}){return gC(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const u=Xc({key:n.config.apiKey,...s}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:c,...o};return aD()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Hu(n.emulatorConfig.host)&&(f.credentials="include"),pC.fetch()(await mC(n,n.config.apiHost,t,u),f)})}async function gC(n,e,t){n._canInitEmulator=!1;const r={...kO,...e};try{const i=new VO(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Oh(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const u=o.ok?s.errorMessage:s.error.message,[c,f]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oh(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Oh(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Oh(n,"user-disabled",s);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw zm(n,d,f);Ri(n,d)}}catch(i){if(i instanceof so)throw i;Ri(n,"network-request-failed",{message:String(i)})}}async function FO(n,e,t,r,i={}){const o=await Wu(n,e,t,r,i);return"mfaPendingCredential"in o&&Ri(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function mC(n,e,t,r){const i=`${e}${t}?${r}`,o=n,s=o.config.emulator?Gm(n.config,i):`${n.config.apiScheme}://${i}`;return MO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}class VO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Qr(this.auth,"network-request-failed")),LO.get())})}}function Oh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Qr(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BO(n,e){return Wu(n,"POST","/v1/accounts:delete",e)}async function xd(n,e){return Wu(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function UO(n,e=!1){const t=sn(n),r=await t.getIdToken(e),i=$m(r);Ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:gc(g1(i.auth_time)),issuedAtTime:gc(g1(i.iat)),expirationTime:gc(g1(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function g1(n){return Number(n)*1e3}function $m(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Jh("JWT malformed, contained fewer than 3 sections"),null;try{const i=JT(t);return i?JSON.parse(i):(Jh("Failed to decode base64 JWT payload"),null)}catch(i){return Jh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function $w(n){const e=$m(n);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof so&&jO(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function jO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gc(this.lastLoginAt),this.creationTime=gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ed(n){const e=n.auth,t=await n.getIdToken(),r=await Dc(n,xd(e,{idToken:t}));Ve(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=i.providerUserInfo?.length?vC(i.providerUserInfo):[],s=GO(n.providerData,o),u=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!s?.length,f=u?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new pg(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(n,d)}async function HO(n){const e=sn(n);await Ed(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GO(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function vC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WO(n,e){const t=await gC(n,{},async()=>{const r=Xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await mC(n,i,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:u,body:r};return n.emulatorConfig&&Hu(n.emulatorConfig.host)&&(c.credentials="include"),pC.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $O(n,e){return Wu(n,"POST","/v2/accounts:revokeToken",Wm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$w(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=$w(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await WO(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new xu;return r&&(Ve(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Ve(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Ve(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xu,this.toJSON())}_performRefresh(){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(n,e){Ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Xr{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new zO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new pg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Dc(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return UO(this,e)}reload(){return HO(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ed(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ir(this.auth.app))return Promise.reject(Qo(this.auth));const e=await this.getIdToken();return await Dc(this,BO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,u=t.tenantId??void 0,c=t._redirectEventId??void 0,f=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:p,emailVerified:v,isAnonymous:y,providerData:E,stsTokenManager:T}=t;Ve(p&&T,e,"internal-error");const C=xu.fromJSON(this.name,T);Ve(typeof p=="string",e,"internal-error"),Vo(r,e.name),Vo(i,e.name),Ve(typeof v=="boolean",e,"internal-error"),Ve(typeof y=="boolean",e,"internal-error"),Vo(o,e.name),Vo(s,e.name),Vo(u,e.name),Vo(c,e.name),Vo(f,e.name),Vo(d,e.name);const b=new Xr({uid:p,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:u,stsTokenManager:C,createdAt:f,lastLoginAt:d});return E&&Array.isArray(E)&&(b.providerData=E.map(P=>({...P}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,t,r=!1){const i=new xu;i.updateFromServerResponse(t);const o=new Xr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ed(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ve(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?vC(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,u=new xu;u.updateFromIdToken(r);const c=new Xr({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:s}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new pg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=new Map;function Ji(n){io(n instanceof Function,"Expected a class definition");let e=Kw.get(n);return e?(io(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Kw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yC.type="NONE";const qw=yC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(n,e,t){return`firebase:${n}:${e}:${t}`}class Eu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=ed(this.userKey,i.apiKey,o),this.fullPersistenceKey=ed("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xd(this.auth,{idToken:e}).catch(()=>{});return t?Xr._fromGetAccountInfoResponse(this.auth,t,e):null}return Xr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Eu(Ji(qw),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||Ji(qw);const s=ed(r,e.config.apiKey,e.name);let u=null;for(const f of t)try{const d=await f._get(s);if(d){let p;if(typeof d=="string"){const v=await xd(e,{idToken:d}).catch(()=>{});if(!v)break;p=await Xr._fromGetAccountInfoResponse(e,v,d)}else p=Xr._fromJSON(e,d);f!==o&&(u=p),o=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Eu(o,e,r):(o=c[0],u&&await o._set(s,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(s)}catch{}})),new Eu(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_C(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TC(e))return"Blackberry";if(CC(e))return"Webos";if(wC(e))return"Safari";if((e.includes("chrome/")||xC(e))&&!e.includes("edge/"))return"Chrome";if(AC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function _C(n=Fn()){return/firefox\//i.test(n)}function wC(n=Fn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xC(n=Fn()){return/crios\//i.test(n)}function EC(n=Fn()){return/iemobile/i.test(n)}function AC(n=Fn()){return/android/i.test(n)}function TC(n=Fn()){return/blackberry/i.test(n)}function CC(n=Fn()){return/webos/i.test(n)}function Km(n=Fn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KO(n=Fn()){return Km(n)&&!!window.navigator?.standalone}function qO(){return cD()&&document.documentMode===10}function IC(n=Fn()){return Km(n)||AC(n)||CC(n)||TC(n)||/windows phone/i.test(n)||EC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(n,e=[]){let t;switch(n){case"Browser":t=Xw(Fn());break;case"Worker":t=`${Xw(Fn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Gu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((s,u)=>{try{const c=e(o);s(c)}catch(c){u(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YO(n,e={}){return Wu(n,"GET","/v2/passwordPolicy",Wm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=6;class ZO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??QO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yw(this),this.idTokenSubscription=new Yw(this),this.beforeStateQueue=new XO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ji(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Eu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xd(this,{idToken:e}),r=await Xr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ir(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===s)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ed(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ir(this.app))return Promise.reject(Qo(this));const t=e?sn(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ir(this.app)?Promise.reject(Qo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ir(this.app)?Promise.reject(Qo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ji(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YO(this),t=new ZO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await $O(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ji(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await Eu.create(this,[Ji(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let s=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(u,this,"internal-error"),u.then(()=>{s||o(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&bO(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Qc(n){return sn(n)}class Yw{constructor(e){this.auth=e,this.observer=null,this.addObserver=yD(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eN(n){qm=n}function tN(n){return qm.loadJS(n)}function nN(){return qm.gapiScript}function rN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(n,e){const t=jm(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(oa(o,e??{}))return i;Ri(i,"already-initialized")}return t.initialize({options:e})}function oN(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ji);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function sN(n,e,t){const r=Qc(n);Ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=RC(e),{host:s,port:u}=aN(e),c=u===null?"":`:${u}`,f={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ve(oa(f,r.config.emulator)&&oa(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Hu(s)?(rC(`${o}//${s}${c}`),iC("Auth",!0)):uN()}function RC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function aN(n){const e=RC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Qw(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:Qw(s)}}}function Qw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function uN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zi("not implemented")}_getIdTokenResponse(e){return Zi("not implemented")}_linkToIdToken(e,t){return Zi("not implemented")}_getReauthenticationResolver(e){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(n,e){return FO(n,"POST","/v1/accounts:signInWithIdp",Wm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="http://localhost";class aa extends PC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new aa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ri("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const s=new aa(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return Au(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Au(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Au(e,t)}buildRequest(){const e={requestUri:lN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends Wd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends Zc{constructor(){super("facebook.com")}static credential(e){return aa._fromParams({providerId:Go.PROVIDER_ID,signInMethod:Go.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Go.credentialFromTaggedObject(e)}static credentialFromError(e){return Go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Go.credential(e.oauthAccessToken)}catch{return null}}}Go.FACEBOOK_SIGN_IN_METHOD="facebook.com";Go.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Zc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return aa._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Qi.credential(t,r)}catch{return null}}}Qi.GOOGLE_SIGN_IN_METHOD="google.com";Qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo extends Zc{constructor(){super("github.com")}static credential(e){return aa._fromParams({providerId:Wo.PROVIDER_ID,signInMethod:Wo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wo.credentialFromTaggedObject(e)}static credentialFromError(e){return Wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wo.credential(e.oauthAccessToken)}catch{return null}}}Wo.GITHUB_SIGN_IN_METHOD="github.com";Wo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends Zc{constructor(){super("twitter.com")}static credential(e,t){return aa._fromParams({providerId:$o.PROVIDER_ID,signInMethod:$o.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return $o.credentialFromTaggedObject(e)}static credentialFromError(e){return $o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return $o.credential(t,r)}catch{return null}}}$o.TWITTER_SIGN_IN_METHOD="twitter.com";$o.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Xr._fromIdTokenResponse(e,r,i),s=Zw(r);return new bu({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Zw(r);return new bu({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Zw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends so{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ad.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Ad(e,t,r,i)}}function bC(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ad._fromErrorAndOperation(n,o,e,r):o})}async function cN(n,e,t=!1){const r=await Dc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return bu._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(n,e,t=!1){const{auth:r}=n;if(Ir(r.app))return Promise.reject(Qo(r));const i="reauthenticate";try{const o=await Dc(n,bC(r,i,e,n),t);Ve(o.idToken,r,"internal-error");const s=$m(o.idToken);Ve(s,r,"internal-error");const{sub:u}=s;return Ve(n.uid===u,r,"user-mismatch"),bu._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ri(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hN(n,e,t=!1){if(Ir(n.app))return Promise.reject(Qo(n));const r="signIn",i=await bC(n,r,e),o=await bu._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}function dN(n,e,t,r){return sn(n).onIdTokenChanged(e,t,r)}function pN(n,e,t){return sn(n).beforeAuthStateChanged(e,t)}function gN(n,e,t,r){return sn(n).onAuthStateChanged(e,t,r)}function mN(n){return sn(n).signOut()}const Td="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Td,"1"),this.storage.removeItem(Td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=1e3,yN=10;class OC extends DC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,u,c)=>{this.notifyListeners(s,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!t&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);qO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,yN):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},vN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}OC.type="LOCAL";const _N=OC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC extends DC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}NC.type="SESSION";const kC=NC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new $d(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,s=this.handlersMap[i];if(!s?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(s).map(async f=>f(t.origin,o)),c=await wN(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$d.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((u,c)=>{const f=Xm("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const v=p;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(){return window}function EN(n){Ti().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(){return typeof Ti().WorkerGlobalScope<"u"&&typeof Ti().importScripts=="function"}async function AN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TN(){return navigator?.serviceWorker?.controller||null}function CN(){return MC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="firebaseLocalStorageDb",IN=1,Cd="firebaseLocalStorage",FC="fbase_key";class Jc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kd(n,e){return n.transaction([Cd],e?"readwrite":"readonly").objectStore(Cd)}function SN(){const n=indexedDB.deleteDatabase(LC);return new Jc(n).toPromise()}function gg(){const n=indexedDB.open(LC,IN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Cd,{keyPath:FC})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Cd)?e(r):(r.close(),await SN(),e(await gg()))})})}async function Jw(n,e,t){const r=Kd(n,!0).put({[FC]:e,value:t});return new Jc(r).toPromise()}async function RN(n,e){const t=Kd(n,!1).get(e),r=await new Jc(t).toPromise();return r===void 0?null:r.value}function ex(n,e){const t=Kd(n,!0).delete(e);return new Jc(t).toPromise()}const PN=800,bN=3;class VC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>bN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$d._getInstance(CN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await AN(),!this.activeServiceWorker)return;this.sender=new xN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gg();return await Jw(e,Td,"1"),await ex(e,Td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Jw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>RN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ex(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Kd(i,!1).getAll();return new Jc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VC.type="LOCAL";const DN=VC;new Yc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(n,e){return e?Ji(e):(Ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm extends PC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Au(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Au(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Au(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ON(n){return hN(n.auth,new Qm(n),n.bypassAuthState)}function NN(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),fN(t,new Qm(n),n.bypassAuthState)}async function kN(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),cN(t,new Qm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:u}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ON;case"linkViaPopup":case"linkViaRedirect":return kN;case"reauthViaPopup":case"reauthViaRedirect":return NN;default:Ri(this.auth,"internal-error")}}resolve(e){io(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){io(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=new Yc(2e3,1e4);async function LN(n,e,t){if(Ir(n.app))return Promise.reject(Qr(n,"operation-not-supported-in-this-environment"));const r=Qc(n);dC(n,e,Wd);const i=Ym(r,t);return new Qs(r,"signInViaPopup",e,i).executeNotNull()}class Qs extends BC{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Qs.currentPopupAction&&Qs.currentPopupAction.cancel(),Qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){io(this.filter.length===1,"Popup operations only handle one event");const e=Xm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MN.get())};e()}}Qs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="pendingRedirect",td=new Map;class VN extends BC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=td.get(this.auth._key());if(!e){try{const r=await BN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}td.set(this.auth._key(),e)}return this.bypassAuthState||td.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BN(n,e){const t=jC(e),r=UC(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function UN(n,e){return UC(n)._set(jC(e),"true")}function jN(n,e){td.set(n._key(),e)}function UC(n){return Ji(n._redirectPersistence)}function jC(n){return ed(FN,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(n,e,t){return HN(n,e,t)}async function HN(n,e,t){if(Ir(n.app))return Promise.reject(Qo(n));const r=Qc(n);dC(n,e,Wd),await r._initializationPromise;const i=Ym(r,t);return await UN(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function GN(n,e,t=!1){if(Ir(n.app))return Promise.reject(Qo(n));const r=Qc(n),i=Ym(r,e),s=await new VN(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=600*1e3;class $N{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!zC(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Qr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WN&&this.cachedEventUids.clear(),this.cachedEventUids.has(tx(e))}saveEventToCache(e){this.cachedEventUids.add(tx(e)),this.lastProcessedEventTime=Date.now()}}function tx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function zC({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function KN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qN(n,e={}){return Wu(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YN=/^https?/;async function QN(n){if(n.config.emulator)return;const{authorizedDomains:e}=await qN(n);for(const t of e)try{if(ZN(t))return}catch{}Ri(n,"unauthorized-domain")}function ZN(n){const e=dg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!YN.test(t))return!1;if(XN.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=new Yc(3e4,6e4);function nx(){const n=Ti().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function e5(n){return new Promise((e,t)=>{function r(){nx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nx(),t(Qr(n,"network-request-failed"))},timeout:JN.get()})}if(Ti().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ti().gapi?.load)r();else{const i=rN("iframefcb");return Ti()[i]=()=>{gapi.load?r():t(Qr(n,"network-request-failed"))},tN(`${nN()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw nd=null,e})}let nd=null;function t5(n){return nd=nd||e5(n),nd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5=new Yc(5e3,15e3),r5="__/auth/iframe",i5="emulator/auth/iframe",o5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a5(n){const e=n.config;Ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Gm(e,i5):`https://${n.config.authDomain}/${r5}`,r={apiKey:e.apiKey,appName:n.name,v:Gu},i=s5.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Xc(r).slice(1)}`}async function u5(n){const e=await t5(n),t=Ti().gapi;return Ve(t,n,"internal-error"),e.open({where:document.body,url:a5(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o5,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=Qr(n,"network-request-failed"),u=Ti().setTimeout(()=>{o(s)},n5.get());function c(){Ti().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},c5=500,f5=600,h5="_blank",d5="http://localhost";class rx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function p5(n,e,t,r=c5,i=f5){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c={...l5,width:r.toString(),height:i.toString(),top:o,left:s},f=Fn().toLowerCase();t&&(u=xC(f)?h5:t),_C(f)&&(e=e||d5,c.scrollbars="yes");const d=Object.entries(c).reduce((v,[y,E])=>`${v}${y}=${E},`,"");if(KO(f)&&u!=="_self")return g5(e||"",u),new rx(null);const p=window.open(e||"",u,d);Ve(p,n,"popup-blocked");try{p.focus()}catch{}return new rx(p)}function g5(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5="__/auth/handler",v5="emulator/auth/handler",y5=encodeURIComponent("fac");async function ix(n,e,t,r,i,o){Ve(n.config.authDomain,n,"auth-domain-config-required"),Ve(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Gu,eventId:i};if(e instanceof Wd){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",vD(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))s[d]=p}if(e instanceof Zc){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);const u=s;for(const d of Object.keys(u))u[d]===void 0&&delete u[d];const c=await n._getAppCheckToken(),f=c?`#${y5}=${encodeURIComponent(c)}`:"";return`${_5(n)}?${Xc(u).slice(1)}${f}`}function _5({config:n}){return n.emulator?Gm(n,v5):`https://${n.authDomain}/${m5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="webStorageSupport";class w5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kC,this._completeRedirectFn=GN,this._overrideRedirectResult=jN}async _openPopup(e,t,r,i){io(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await ix(e,t,r,dg(),i);return p5(e,o,Xm())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await ix(e,t,r,dg(),i);return EN(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(io(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await u5(e),r=new $N(e);return t.register("authEvent",i=>(Ve(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(m1,{type:m1},i=>{const o=i?.[0]?.[m1];o!==void 0&&t(!!o),Ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=QN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return IC()||wC()||Km()}}const x5=w5;var ox="@firebase/auth",sx="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T5(n){Pu(new sa("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:u}=r.options;Ve(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SC(n)},f=new JO(r,i,o,c);return oN(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Pu(new sa("auth-internal",e=>{const t=Qc(e.getProvider("auth").getImmediate());return(r=>new E5(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yo(ox,sx,A5(n)),Yo(ox,sx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5=300,I5=nC("authIdTokenMaxAge")||C5;let ax=null;const S5=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>I5)return;const i=t?.token;ax!==i&&(ax=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function R5(n=uC()){const e=jm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=iN(n,{popupRedirectResolver:x5,persistence:[DN,_N,kC]}),r=nC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=S5(o.toString());pN(t,s,()=>s(t.currentUser)),dN(t,u=>s(u))}}const i=eC("auth");return i&&sN(t,`http://${i}`),t}function P5(){return document.getElementsByTagName("head")?.[0]??document}eN({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Qr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",P5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T5("Browser");var b5="firebase",D5="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yo(b5,D5,"app");var ux=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zo,HC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function O(){}O.prototype=I.prototype,R.F=I.prototype,R.prototype=new O,R.prototype.constructor=R,R.D=function(M,B,z){for(var L=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)L[fe-2]=arguments[fe];return I.prototype[B].apply(M,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,I,O){O||(O=0);const M=Array(16);if(typeof I=="string")for(var B=0;B<16;++B)M[B]=I.charCodeAt(O++)|I.charCodeAt(O++)<<8|I.charCodeAt(O++)<<16|I.charCodeAt(O++)<<24;else for(B=0;B<16;++B)M[B]=I[O++]|I[O++]<<8|I[O++]<<16|I[O++]<<24;I=R.g[0],O=R.g[1],B=R.g[2];let z=R.g[3],L;L=I+(z^O&(B^z))+M[0]+3614090360&4294967295,I=O+(L<<7&4294967295|L>>>25),L=z+(B^I&(O^B))+M[1]+3905402710&4294967295,z=I+(L<<12&4294967295|L>>>20),L=B+(O^z&(I^O))+M[2]+606105819&4294967295,B=z+(L<<17&4294967295|L>>>15),L=O+(I^B&(z^I))+M[3]+3250441966&4294967295,O=B+(L<<22&4294967295|L>>>10),L=I+(z^O&(B^z))+M[4]+4118548399&4294967295,I=O+(L<<7&4294967295|L>>>25),L=z+(B^I&(O^B))+M[5]+1200080426&4294967295,z=I+(L<<12&4294967295|L>>>20),L=B+(O^z&(I^O))+M[6]+2821735955&4294967295,B=z+(L<<17&4294967295|L>>>15),L=O+(I^B&(z^I))+M[7]+4249261313&4294967295,O=B+(L<<22&4294967295|L>>>10),L=I+(z^O&(B^z))+M[8]+1770035416&4294967295,I=O+(L<<7&4294967295|L>>>25),L=z+(B^I&(O^B))+M[9]+2336552879&4294967295,z=I+(L<<12&4294967295|L>>>20),L=B+(O^z&(I^O))+M[10]+4294925233&4294967295,B=z+(L<<17&4294967295|L>>>15),L=O+(I^B&(z^I))+M[11]+2304563134&4294967295,O=B+(L<<22&4294967295|L>>>10),L=I+(z^O&(B^z))+M[12]+1804603682&4294967295,I=O+(L<<7&4294967295|L>>>25),L=z+(B^I&(O^B))+M[13]+4254626195&4294967295,z=I+(L<<12&4294967295|L>>>20),L=B+(O^z&(I^O))+M[14]+2792965006&4294967295,B=z+(L<<17&4294967295|L>>>15),L=O+(I^B&(z^I))+M[15]+1236535329&4294967295,O=B+(L<<22&4294967295|L>>>10),L=I+(B^z&(O^B))+M[1]+4129170786&4294967295,I=O+(L<<5&4294967295|L>>>27),L=z+(O^B&(I^O))+M[6]+3225465664&4294967295,z=I+(L<<9&4294967295|L>>>23),L=B+(I^O&(z^I))+M[11]+643717713&4294967295,B=z+(L<<14&4294967295|L>>>18),L=O+(z^I&(B^z))+M[0]+3921069994&4294967295,O=B+(L<<20&4294967295|L>>>12),L=I+(B^z&(O^B))+M[5]+3593408605&4294967295,I=O+(L<<5&4294967295|L>>>27),L=z+(O^B&(I^O))+M[10]+38016083&4294967295,z=I+(L<<9&4294967295|L>>>23),L=B+(I^O&(z^I))+M[15]+3634488961&4294967295,B=z+(L<<14&4294967295|L>>>18),L=O+(z^I&(B^z))+M[4]+3889429448&4294967295,O=B+(L<<20&4294967295|L>>>12),L=I+(B^z&(O^B))+M[9]+568446438&4294967295,I=O+(L<<5&4294967295|L>>>27),L=z+(O^B&(I^O))+M[14]+3275163606&4294967295,z=I+(L<<9&4294967295|L>>>23),L=B+(I^O&(z^I))+M[3]+4107603335&4294967295,B=z+(L<<14&4294967295|L>>>18),L=O+(z^I&(B^z))+M[8]+1163531501&4294967295,O=B+(L<<20&4294967295|L>>>12),L=I+(B^z&(O^B))+M[13]+2850285829&4294967295,I=O+(L<<5&4294967295|L>>>27),L=z+(O^B&(I^O))+M[2]+4243563512&4294967295,z=I+(L<<9&4294967295|L>>>23),L=B+(I^O&(z^I))+M[7]+1735328473&4294967295,B=z+(L<<14&4294967295|L>>>18),L=O+(z^I&(B^z))+M[12]+2368359562&4294967295,O=B+(L<<20&4294967295|L>>>12),L=I+(O^B^z)+M[5]+4294588738&4294967295,I=O+(L<<4&4294967295|L>>>28),L=z+(I^O^B)+M[8]+2272392833&4294967295,z=I+(L<<11&4294967295|L>>>21),L=B+(z^I^O)+M[11]+1839030562&4294967295,B=z+(L<<16&4294967295|L>>>16),L=O+(B^z^I)+M[14]+4259657740&4294967295,O=B+(L<<23&4294967295|L>>>9),L=I+(O^B^z)+M[1]+2763975236&4294967295,I=O+(L<<4&4294967295|L>>>28),L=z+(I^O^B)+M[4]+1272893353&4294967295,z=I+(L<<11&4294967295|L>>>21),L=B+(z^I^O)+M[7]+4139469664&4294967295,B=z+(L<<16&4294967295|L>>>16),L=O+(B^z^I)+M[10]+3200236656&4294967295,O=B+(L<<23&4294967295|L>>>9),L=I+(O^B^z)+M[13]+681279174&4294967295,I=O+(L<<4&4294967295|L>>>28),L=z+(I^O^B)+M[0]+3936430074&4294967295,z=I+(L<<11&4294967295|L>>>21),L=B+(z^I^O)+M[3]+3572445317&4294967295,B=z+(L<<16&4294967295|L>>>16),L=O+(B^z^I)+M[6]+76029189&4294967295,O=B+(L<<23&4294967295|L>>>9),L=I+(O^B^z)+M[9]+3654602809&4294967295,I=O+(L<<4&4294967295|L>>>28),L=z+(I^O^B)+M[12]+3873151461&4294967295,z=I+(L<<11&4294967295|L>>>21),L=B+(z^I^O)+M[15]+530742520&4294967295,B=z+(L<<16&4294967295|L>>>16),L=O+(B^z^I)+M[2]+3299628645&4294967295,O=B+(L<<23&4294967295|L>>>9),L=I+(B^(O|~z))+M[0]+4096336452&4294967295,I=O+(L<<6&4294967295|L>>>26),L=z+(O^(I|~B))+M[7]+1126891415&4294967295,z=I+(L<<10&4294967295|L>>>22),L=B+(I^(z|~O))+M[14]+2878612391&4294967295,B=z+(L<<15&4294967295|L>>>17),L=O+(z^(B|~I))+M[5]+4237533241&4294967295,O=B+(L<<21&4294967295|L>>>11),L=I+(B^(O|~z))+M[12]+1700485571&4294967295,I=O+(L<<6&4294967295|L>>>26),L=z+(O^(I|~B))+M[3]+2399980690&4294967295,z=I+(L<<10&4294967295|L>>>22),L=B+(I^(z|~O))+M[10]+4293915773&4294967295,B=z+(L<<15&4294967295|L>>>17),L=O+(z^(B|~I))+M[1]+2240044497&4294967295,O=B+(L<<21&4294967295|L>>>11),L=I+(B^(O|~z))+M[8]+1873313359&4294967295,I=O+(L<<6&4294967295|L>>>26),L=z+(O^(I|~B))+M[15]+4264355552&4294967295,z=I+(L<<10&4294967295|L>>>22),L=B+(I^(z|~O))+M[6]+2734768916&4294967295,B=z+(L<<15&4294967295|L>>>17),L=O+(z^(B|~I))+M[13]+1309151649&4294967295,O=B+(L<<21&4294967295|L>>>11),L=I+(B^(O|~z))+M[4]+4149444226&4294967295,I=O+(L<<6&4294967295|L>>>26),L=z+(O^(I|~B))+M[11]+3174756917&4294967295,z=I+(L<<10&4294967295|L>>>22),L=B+(I^(z|~O))+M[2]+718787259&4294967295,B=z+(L<<15&4294967295|L>>>17),L=O+(z^(B|~I))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(B+(L<<21&4294967295|L>>>11))&4294967295,R.g[2]=R.g[2]+B&4294967295,R.g[3]=R.g[3]+z&4294967295}r.prototype.v=function(R,I){I===void 0&&(I=R.length);const O=I-this.blockSize,M=this.C;let B=this.h,z=0;for(;z<I;){if(B==0)for(;z<=O;)i(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<I;)if(M[B++]=R.charCodeAt(z++),B==this.blockSize){i(this,M),B=0;break}}else for(;z<I;)if(M[B++]=R[z++],B==this.blockSize){i(this,M),B=0;break}}this.h=B,this.o+=I},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;I=this.o*8;for(var O=R.length-8;O<R.length;++O)R[O]=I&255,I/=256;for(this.v(R),R=Array(16),I=0,O=0;O<4;++O)for(let M=0;M<32;M+=8)R[I++]=this.g[O]>>>M&255;return R};function o(R,I){var O=u;return Object.prototype.hasOwnProperty.call(O,R)?O[R]:O[R]=I(R)}function s(R,I){this.h=I;const O=[];let M=!0;for(let B=R.length-1;B>=0;B--){const z=R[B]|0;M&&z==I||(O[B]=z,M=!1)}this.g=O}var u={};function c(R){return-128<=R&&R<128?o(R,function(I){return new s([I|0],I<0?-1:0)}):new s([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return p;if(R<0)return C(f(-R));const I=[];let O=1;for(let M=0;R>=O;M++)I[M]=R/O|0,O*=4294967296;return new s(I,0)}function d(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return C(d(R.substring(1),I));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=f(Math.pow(I,8));let M=p;for(let z=0;z<R.length;z+=8){var B=Math.min(8,R.length-z);const L=parseInt(R.substring(z,z+B),I);B<8?(B=f(Math.pow(I,B)),M=M.j(B).add(f(L))):(M=M.j(O),M=M.add(f(L)))}return M}var p=c(0),v=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(T(this))return-C(this).m();let R=0,I=1;for(let O=0;O<this.g.length;O++){const M=this.i(O);R+=(M>=0?M:4294967296+M)*I,I*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(E(this))return"0";if(T(this))return"-"+C(this).toString(R);const I=f(Math.pow(R,6));var O=this;let M="";for(;;){const B=F(O,I).g;O=b(O,B.j(I));let z=((O.g.length>0?O.g[0]:O.h)>>>0).toString(R);if(O=B,E(O))return z+M;for(;z.length<6;)z="0"+z;M=z+M}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function E(R){if(R.h!=0)return!1;for(let I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function T(R){return R.h==-1}n.l=function(R){return R=b(this,R),T(R)?-1:E(R)?0:1};function C(R){const I=R.g.length,O=[];for(let M=0;M<I;M++)O[M]=~R.g[M];return new s(O,~R.h).add(v)}n.abs=function(){return T(this)?C(this):this},n.add=function(R){const I=Math.max(this.g.length,R.g.length),O=[];let M=0;for(let B=0;B<=I;B++){let z=M+(this.i(B)&65535)+(R.i(B)&65535),L=(z>>>16)+(this.i(B)>>>16)+(R.i(B)>>>16);M=L>>>16,z&=65535,L&=65535,O[B]=L<<16|z}return new s(O,O[O.length-1]&-2147483648?-1:0)};function b(R,I){return R.add(C(I))}n.j=function(R){if(E(this)||E(R))return p;if(T(this))return T(R)?C(this).j(C(R)):C(C(this).j(R));if(T(R))return C(this.j(C(R)));if(this.l(y)<0&&R.l(y)<0)return f(this.m()*R.m());const I=this.g.length+R.g.length,O=[];for(var M=0;M<2*I;M++)O[M]=0;for(M=0;M<this.g.length;M++)for(let B=0;B<R.g.length;B++){const z=this.i(M)>>>16,L=this.i(M)&65535,fe=R.i(B)>>>16,Le=R.i(B)&65535;O[2*M+2*B]+=L*Le,P(O,2*M+2*B),O[2*M+2*B+1]+=z*Le,P(O,2*M+2*B+1),O[2*M+2*B+1]+=L*fe,P(O,2*M+2*B+1),O[2*M+2*B+2]+=z*fe,P(O,2*M+2*B+2)}for(R=0;R<I;R++)O[R]=O[2*R+1]<<16|O[2*R];for(R=I;R<2*I;R++)O[R]=0;return new s(O,0)};function P(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function D(R,I){this.g=R,this.h=I}function F(R,I){if(E(I))throw Error("division by zero");if(E(R))return new D(p,p);if(T(R))return I=F(C(R),I),new D(C(I.g),C(I.h));if(T(I))return I=F(R,C(I)),new D(C(I.g),I.h);if(R.g.length>30){if(T(R)||T(I))throw Error("slowDivide_ only works with positive integers.");for(var O=v,M=I;M.l(R)<=0;)O=j(O),M=j(M);var B=W(O,1),z=W(M,1);for(M=W(M,2),O=W(O,2);!E(M);){var L=z.add(M);L.l(R)<=0&&(B=B.add(O),z=L),M=W(M,1),O=W(O,1)}return I=b(R,B.j(I)),new D(B,I)}for(B=p;R.l(I)>=0;){for(O=Math.max(1,Math.floor(R.m()/I.m())),M=Math.ceil(Math.log(O)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),z=f(O),L=z.j(I);T(L)||L.l(R)>0;)O-=M,z=f(O),L=z.j(I);E(z)&&(z=v),B=B.add(z),R=b(R,L)}return new D(B,R)}n.B=function(R){return F(this,R).h},n.and=function(R){const I=Math.max(this.g.length,R.g.length),O=[];for(let M=0;M<I;M++)O[M]=this.i(M)&R.i(M);return new s(O,this.h&R.h)},n.or=function(R){const I=Math.max(this.g.length,R.g.length),O=[];for(let M=0;M<I;M++)O[M]=this.i(M)|R.i(M);return new s(O,this.h|R.h)},n.xor=function(R){const I=Math.max(this.g.length,R.g.length),O=[];for(let M=0;M<I;M++)O[M]=this.i(M)^R.i(M);return new s(O,this.h^R.h)};function j(R){const I=R.g.length+1,O=[];for(let M=0;M<I;M++)O[M]=R.i(M)<<1|R.i(M-1)>>>31;return new s(O,R.h)}function W(R,I){const O=I>>5;I%=32;const M=R.g.length-O,B=[];for(let z=0;z<M;z++)B[z]=I>0?R.i(z+O)>>>I|R.i(z+O+1)<<32-I:R.i(z+O);return new s(B,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,HC=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=d,Zo=s}).apply(typeof ux<"u"?ux:typeof self<"u"?self:typeof window<"u"?window:{});var Nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var GC,tc,WC,rd,mg,$C,KC,qC;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nh=="object"&&Nh];for(var x=0;x<g.length;++x){var A=g[x];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=t(this);function i(g,x){if(x)e:{var A=r;g=g.split(".");for(var N=0;N<g.length-1;N++){var X=g[N];if(!(X in A))break e;A=A[X]}g=g[g.length-1],N=A[g],x=x(N),x!=N&&x!=null&&e(A,g,{configurable:!0,writable:!0,value:x})}}i("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(g){return g||function(x){var A=[],N;for(N in x)Object.prototype.hasOwnProperty.call(x,N)&&A.push([N,x[N]]);return A}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function u(g){var x=typeof g;return x=="object"&&g!=null||x=="function"}function c(g,x,A){return g.call.apply(g.bind,arguments)}function f(g,x,A){return f=c,f.apply(null,arguments)}function d(g,x){var A=Array.prototype.slice.call(arguments,1);return function(){var N=A.slice();return N.push.apply(N,arguments),g.apply(this,N)}}function p(g,x){function A(){}A.prototype=x.prototype,g.Z=x.prototype,g.prototype=new A,g.prototype.constructor=g,g.Ob=function(N,X,ee){for(var le=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)le[Be-2]=arguments[Be];return x.prototype[X].apply(N,le)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function y(g){const x=g.length;if(x>0){const A=Array(x);for(let N=0;N<x;N++)A[N]=g[N];return A}return[]}function E(g,x){for(let N=1;N<arguments.length;N++){const X=arguments[N];var A=typeof X;if(A=A!="object"?A:X?Array.isArray(X)?"array":A:"null",A=="array"||A=="object"&&typeof X.length=="number"){A=g.length||0;const ee=X.length||0;g.length=A+ee;for(let le=0;le<ee;le++)g[A+le]=X[le]}else g.push(X)}}class T{constructor(x,A){this.i=x,this.j=A,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function C(g){s.setTimeout(()=>{throw g},0)}function b(){var g=R;let x=null;return g.g&&(x=g.g,g.g=g.g.next,g.g||(g.h=null),x.next=null),x}class P{constructor(){this.h=this.g=null}add(x,A){const N=D.get();N.set(x,A),this.h?this.h.next=N:this.g=N,this.h=N}}var D=new T(()=>new F,g=>g.reset());class F{constructor(){this.next=this.g=this.h=null}set(x,A){this.h=x,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let j,W=!1,R=new P,I=()=>{const g=Promise.resolve(void 0);j=()=>{g.then(O)}};function O(){for(var g;g=b();){try{g.h.call(g.g)}catch(A){C(A)}var x=D;x.j(g),x.h<100&&(x.h++,g.next=x.g,x.g=g)}W=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(g,x){this.type=g,this.g=this.target=x,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var g=!1,x=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const A=()=>{};s.addEventListener("test",A,x),s.removeEventListener("test",A,x)}catch{}return g})();function L(g){return/^[\s\xa0]*$/.test(g)}function fe(g,x){B.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,x)}p(fe,B),fe.prototype.init=function(g,x){const A=this.type=g.type,N=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=x,x=g.relatedTarget,x||(A=="mouseover"?x=g.fromElement:A=="mouseout"&&(x=g.toElement)),this.relatedTarget=x,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Le="closure_listenable_"+(Math.random()*1e6|0),je=0;function Te(g,x,A,N,X){this.listener=g,this.proxy=null,this.src=x,this.type=A,this.capture=!!N,this.ha=X,this.key=++je,this.da=this.fa=!1}function Z(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function pe(g,x,A){for(const N in g)x.call(A,g[N],N,g)}function he(g,x){for(const A in g)x.call(void 0,g[A],A,g)}function K(g){const x={};for(const A in g)x[A]=g[A];return x}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(g,x){let A,N;for(let X=1;X<arguments.length;X++){N=arguments[X];for(A in N)g[A]=N[A];for(let ee=0;ee<re.length;ee++)A=re[ee],Object.prototype.hasOwnProperty.call(N,A)&&(g[A]=N[A])}}function Ie(g){this.src=g,this.g={},this.h=0}Ie.prototype.add=function(g,x,A,N,X){const ee=g.toString();g=this.g[ee],g||(g=this.g[ee]=[],this.h++);const le=ze(g,x,N,X);return le>-1?(x=g[le],A||(x.fa=!1)):(x=new Te(x,this.src,ee,!!N,X),x.fa=A,g.push(x)),x};function Ue(g,x){const A=x.type;if(A in g.g){var N=g.g[A],X=Array.prototype.indexOf.call(N,x,void 0),ee;(ee=X>=0)&&Array.prototype.splice.call(N,X,1),ee&&(Z(x),g.g[A].length==0&&(delete g.g[A],g.h--))}}function ze(g,x,A,N){for(let X=0;X<g.length;++X){const ee=g[X];if(!ee.da&&ee.listener==x&&ee.capture==!!A&&ee.ha==N)return X}return-1}var Ne="closure_lm_"+(Math.random()*1e6|0),Ke={};function rt(g,x,A,N,X){if(Array.isArray(x)){for(let ee=0;ee<x.length;ee++)rt(g,x[ee],A,N,X);return null}return A=Ju(A),g&&g[Le]?g.J(x,A,u(N)?!!N.capture:!1,X):jt(g,x,A,!1,N,X)}function jt(g,x,A,N,X,ee){if(!x)throw Error("Invalid event type");const le=u(X)?!!X.capture:!!X;let Be=ma(g);if(Be||(g[Ne]=Be=new Ie(g)),A=Be.add(x,A,N,le,ee),A.proxy)return A;if(N=Jr(),A.proxy=N,N.src=g,N.listener=A,g.addEventListener)z||(X=le),X===void 0&&(X=!1),g.addEventListener(x.toString(),N,X);else if(g.attachEvent)g.attachEvent(ga(x.toString()),N);else if(g.addListener&&g.removeListener)g.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Jr(){function g(A){return x.call(g.src,g.listener,A)}const x=ff;return g}function ei(g,x,A,N,X){if(Array.isArray(x))for(var ee=0;ee<x.length;ee++)ei(g,x[ee],A,N,X);else N=u(N)?!!N.capture:!!N,A=Ju(A),g&&g[Le]?(g=g.i,ee=String(x).toString(),ee in g.g&&(x=g.g[ee],A=ze(x,A,N,X),A>-1&&(Z(x[A]),Array.prototype.splice.call(x,A,1),x.length==0&&(delete g.g[ee],g.h--)))):g&&(g=ma(g))&&(x=g.g[x.toString()],g=-1,x&&(g=ze(x,A,N,X)),(A=g>-1?x[g]:null)&&ao(A))}function ao(g){if(typeof g!="number"&&g&&!g.da){var x=g.src;if(x&&x[Le])Ue(x.i,g);else{var A=g.type,N=g.proxy;x.removeEventListener?x.removeEventListener(A,N,g.capture):x.detachEvent?x.detachEvent(ga(A),N):x.addListener&&x.removeListener&&x.removeListener(N),(A=ma(x))?(Ue(A,g),A.h==0&&(A.src=null,x[Ne]=null)):Z(g)}}}function ga(g){return g in Ke?Ke[g]:Ke[g]="on"+g}function ff(g,x){if(g.da)g=!0;else{x=new fe(x,this);const A=g.listener,N=g.ha||g.src;g.fa&&ao(g),g=A.call(N,x)}return g}function ma(g){return g=g[Ne],g instanceof Ie?g:null}var gs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ju(g){return typeof g=="function"?g:(g[gs]||(g[gs]=function(x){return g.handleEvent(x)}),g[gs])}function zt(){M.call(this),this.i=new Ie(this),this.M=this,this.G=null}p(zt,M),zt.prototype[Le]=!0,zt.prototype.removeEventListener=function(g,x,A,N){ei(this,g,x,A,N)};function kt(g,x){var A,N=g.G;if(N)for(A=[];N;N=N.G)A.push(N);if(g=g.M,N=x.type||x,typeof x=="string")x=new B(x,g);else if(x instanceof B)x.target=x.target||g;else{var X=x;x=new B(N,g),xe(x,X)}X=!0;let ee,le;if(A)for(le=A.length-1;le>=0;le--)ee=x.g=A[le],X=Nr(ee,N,!0,x)&&X;if(ee=x.g=g,X=Nr(ee,N,!0,x)&&X,X=Nr(ee,N,!1,x)&&X,A)for(le=0;le<A.length;le++)ee=x.g=A[le],X=Nr(ee,N,!1,x)&&X}zt.prototype.N=function(){if(zt.Z.N.call(this),this.i){var g=this.i;for(const x in g.g){const A=g.g[x];for(let N=0;N<A.length;N++)Z(A[N]);delete g.g[x],g.h--}}this.G=null},zt.prototype.J=function(g,x,A,N){return this.i.add(String(g),x,!1,A,N)},zt.prototype.K=function(g,x,A,N){return this.i.add(String(g),x,!0,A,N)};function Nr(g,x,A,N){if(x=g.i.g[String(x)],!x)return!0;x=x.concat();let X=!0;for(let ee=0;ee<x.length;++ee){const le=x[ee];if(le&&!le.da&&le.capture==A){const Be=le.listener,Mt=le.ha||le.src;le.fa&&Ue(g.i,le),X=Be.call(Mt,N)!==!1&&X}}return X&&!N.defaultPrevented}function el(g,x){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=f(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:s.setTimeout(g,x||0)}function tl(g){g.g=el(()=>{g.g=null,g.i&&(g.i=!1,tl(g))},g.l);const x=g.h;g.h=null,g.m.apply(null,x)}class hf extends M{constructor(x,A){super(),this.m=x,this.l=A,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:tl(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uo(g){M.call(this),this.h=g,this.g={}}p(uo,M);var nl=[];function va(g){pe(g.g,function(x,A){this.g.hasOwnProperty(A)&&ao(x)},g),g.g={}}uo.prototype.N=function(){uo.Z.N.call(this),va(this)},uo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lo=s.JSON.stringify,df=s.JSON.parse,ms=class{stringify(g){return s.JSON.stringify(g,void 0)}parse(g){return s.JSON.parse(g,void 0)}};function co(){}function pf(){}var fo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ya(){B.call(this,"d")}p(ya,B);function rl(){B.call(this,"c")}p(rl,B);var kr={},_a=null;function ho(){return _a=_a||new zt}kr.Ia="serverreachability";function wa(g){B.call(this,kr.Ia,g)}p(wa,B);function Oi(g){const x=ho();kt(x,new wa(x))}kr.STAT_EVENT="statevent";function Ni(g,x){B.call(this,kr.STAT_EVENT,g),this.stat=x}p(Ni,B);function Dt(g){const x=ho();kt(x,new Ni(x,g))}kr.Ja="timingevent";function il(g,x){B.call(this,kr.Ja,g),this.size=x}p(il,B);function po(g,x){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){g()},x)}function go(){this.g=!0}go.prototype.ua=function(){this.g=!1};function gf(g,x,A,N,X,ee){g.info(function(){if(g.g)if(ee){var le="",Be=ee.split("&");for(let ct=0;ct<Be.length;ct++){var Mt=Be[ct].split("=");if(Mt.length>1){const Ht=Mt[0];Mt=Mt[1];const ur=Ht.split("_");le=ur.length>=2&&ur[1]=="type"?le+(Ht+"="+Mt+"&"):le+(Ht+"=redacted&")}}}else le=null;else le=ee;return"XMLHTTP REQ ("+N+") [attempt "+X+"]: "+x+`
`+A+`
`+le})}function mf(g,x,A,N,X,ee,le){g.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+X+"]: "+x+`
`+A+`
`+ee+" "+le})}function ti(g,x,A,N){g.info(function(){return"XMLHTTP TEXT ("+x+"): "+vs(g,A)+(N?" "+N:"")})}function vf(g,x){g.info(function(){return"TIMEOUT: "+x})}go.prototype.info=function(){};function vs(g,x){if(!g.g)return x;if(!x)return null;try{const ee=JSON.parse(x);if(ee){for(g=0;g<ee.length;g++)if(Array.isArray(ee[g])){var A=ee[g];if(!(A.length<2)){var N=A[1];if(Array.isArray(N)&&!(N.length<1)){var X=N[0];if(X!="noop"&&X!="stop"&&X!="close")for(let le=1;le<N.length;le++)N[le]=""}}}}return lo(ee)}catch{return x}}var mo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},yf;function ki(){}p(ki,co),ki.prototype.g=function(){return new XMLHttpRequest},yf=new ki;function ni(g){return encodeURIComponent(String(g))}function xa(g){var x=1;g=g.split(":");const A=[];for(;x>0&&g.length;)A.push(g.shift()),x--;return g.length&&A.push(g.join(":")),A}function pr(g,x,A,N){this.j=g,this.i=x,this.l=A,this.S=N||1,this.V=new uo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _f}function _f(){this.i=null,this.g="",this.h=!1}var wf={},ol={};function Mr(g,x,A){g.M=1,g.A=Li(gr(x)),g.u=A,g.R=!0,sl(g,null)}function sl(g,x){g.F=Date.now(),ys(g),g.B=gr(g.A);var A=g.B,N=g.S;Array.isArray(N)||(N=[String(N)]),ml(A.i,"t",N),g.C=0,A=g.j.L,g.h=new _f,g.g=bf(g.j,A?x:null,!g.u),g.P>0&&(g.O=new hf(f(g.Y,g,g.g),g.P)),x=g.V,A=g.g,N=g.ba;var X="readystatechange";Array.isArray(X)||(X&&(nl[0]=X.toString()),X=nl);for(let ee=0;ee<X.length;ee++){const le=rt(A,X[ee],N||x.handleEvent,!1,x.h||x);if(!le)break;x.g[le.key]=le}x=g.J?K(g.J):{},g.u?(g.v||(g.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,x)):(g.v="GET",g.g.ea(g.B,g.v,null,x)),Oi(),gf(g.i,g.v,g.B,g.l,g.S,g.u)}pr.prototype.ba=function(g){g=g.target;const x=this.O;x&&li(g)==3?x.j():this.Y(g)},pr.prototype.Y=function(g){try{if(g==this.g)e:{const Be=li(this.g),Mt=this.g.ya(),ct=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||Rf(this.g)))){this.K||Be!=4||Mt==7||(Mt==8||ct<=0?Oi(3):Oi(2)),Ea(this);var x=this.g.ca();this.X=x;var A=xf(this);if(this.o=x==200,mf(this.i,this.v,this.B,this.l,this.S,Be,x),this.o){if(this.U&&!this.L){t:{if(this.g){var N,X=this.g;if((N=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(N)){var ee=N;break t}}ee=null}if(g=ee)ti(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_t(this,g);else{this.o=!1,this.m=3,Dt(12),Mi(this),_s(this);break e}}if(this.R){g=!0;let Ht;for(;!this.K&&this.C<A.length;)if(Ht=Af(this,A),Ht==ol){Be==4&&(this.m=4,Dt(14),g=!1),ti(this.i,this.l,null,"[Incomplete Response]");break}else if(Ht==wf){this.m=4,Dt(15),ti(this.i,this.l,A,"[Invalid Chunk]"),g=!1;break}else ti(this.i,this.l,Ht,null),_t(this,Ht);if(Ef(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||A.length!=0||this.h.h||(this.m=1,Dt(16),g=!1),this.o=this.o&&g,!g)ti(this.i,this.l,A,"[Invalid Chunked Response]"),Mi(this),_s(this);else if(A.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),Rs(le),le.P=!0,Dt(11))}}else ti(this.i,this.l,A,null),_t(this,A);Be==4&&Mi(this),this.o&&!this.K&&(Be==4?Oa(this.j,this):(this.o=!1,ys(this)))}else yl(this.g),x==400&&A.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),Mi(this),_s(this)}}}catch{}finally{}};function xf(g){if(!Ef(g))return g.g.la();const x=Rf(g.g);if(x==="")return"";let A="";const N=x.length,X=li(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return Mi(g),_s(g),"";g.h.i=new s.TextDecoder}for(let ee=0;ee<N;ee++)g.h.h=!0,A+=g.h.i.decode(x[ee],{stream:!(X&&ee==N-1)});return x.length=0,g.h.g+=A,g.C=0,g.h.g}function Ef(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Af(g,x){var A=g.C,N=x.indexOf(`
`,A);return N==-1?ol:(A=Number(x.substring(A,N)),isNaN(A)?wf:(N+=1,N+A>x.length?ol:(x=x.slice(N,N+A),g.C=N+A,x)))}pr.prototype.cancel=function(){this.K=!0,Mi(this)};function ys(g){g.T=Date.now()+g.H,al(g,g.H)}function al(g,x){if(g.D!=null)throw Error("WatchDog timer not null");g.D=po(f(g.aa,g),x)}function Ea(g){g.D&&(s.clearTimeout(g.D),g.D=null)}pr.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(vf(this.i,this.B),this.M!=2&&(Oi(),Dt(17)),Mi(this),this.m=2,_s(this)):al(this,this.T-g)};function _s(g){g.j.I==0||g.K||Oa(g.j,g)}function Mi(g){Ea(g);var x=g.O;x&&typeof x.dispose=="function"&&x.dispose(),g.O=null,va(g.V),g.g&&(x=g.g,g.g=null,x.abort(),x.dispose())}function _t(g,x){try{var A=g.j;if(A.I!=0&&(A.g==g||ll(A.h,g))){if(!g.L&&ll(A.h,g)&&A.I==3){try{var N=A.Ba.g.parse(x)}catch{N=null}if(Array.isArray(N)&&N.length==3){var X=N;if(X[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<g.F)Da(A),sr(A);else break e;hi(A),Dt(18)}}else A.xa=X[1],0<A.xa-A.K&&X[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=po(f(A.Va,A),6e3));ws(A.h)<=1&&A.ta&&(A.ta=void 0)}else ar(A,11)}else if((g.L||A.g==g)&&Da(A),!L(x))for(X=A.Ba.g.parse(x),x=0;x<X.length;x++){let ct=X[x];const Ht=ct[0];if(!(Ht<=A.K))if(A.K=Ht,ct=ct[1],A.I==2)if(ct[0]=="c"){A.M=ct[1],A.ba=ct[2];const ur=ct[3];ur!=null&&(A.ka=ur,A.j.info("VER="+A.ka));const ji=ct[4];ji!=null&&(A.za=ji,A.j.info("SVER="+A.za));const di=ct[5];di!=null&&typeof di=="number"&&di>0&&(N=1.5*di,A.O=N,A.j.info("backChannelRequestTimeoutMs_="+N)),N=A;const pi=g.g;if(pi){const Ma=pi.g?pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ma){var ee=N.h;ee.g||Ma.indexOf("spdy")==-1&&Ma.indexOf("quic")==-1&&Ma.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Ta(ee,ee.h),ee.h=null))}if(N.G){const xl=pi.g?pi.g.getResponseHeader("X-HTTP-Session-Id"):null;xl&&(N.wa=xl,st(N.J,N.G,xl))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-g.F,A.j.info("Handshake RTT: "+A.T+"ms")),N=A;var le=g;if(N.na=wl(N,N.L?N.ba:null,N.W),le.L){xs(N.h,le);var Be=le,Mt=N.O;Mt&&(Be.H=Mt),Be.D&&(Ea(Be),ys(Be)),N.g=le}else Sn(N);A.i.length>0&&Ui(A)}else ct[0]!="stop"&&ct[0]!="close"||ar(A,7);else A.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?ar(A,7):Pa(A):ct[0]!="noop"&&A.l&&A.l.qa(ct),A.A=0)}}Oi(4)}catch{}}var gp=class{constructor(g,x){this.g=g,this.map=x}};function Aa(g){this.l=g||10,s.PerformanceNavigationTiming?(g=s.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ul(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function ws(g){return g.h?1:g.g?g.g.size:0}function ll(g,x){return g.h?g.h==x:g.g?g.g.has(x):!1}function Ta(g,x){g.g?g.g.add(x):g.h=x}function xs(g,x){g.h&&g.h==x?g.h=null:g.g&&g.g.has(x)&&g.g.delete(x)}Aa.prototype.cancel=function(){if(this.i=rr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function rr(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let x=g.i;for(const A of g.g.values())x=x.concat(A.G);return x}return y(g.i)}var Tf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ir(g,x){if(g){g=g.split("&");for(let A=0;A<g.length;A++){const N=g[A].indexOf("=");let X,ee=null;N>=0?(X=g[A].substring(0,N),ee=g[A].substring(N+1)):X=g[A],x(X,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function ri(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;g instanceof ri?(this.l=g.l,Es(this,g.j),this.o=g.o,this.g=g.g,ii(this,g.u),this.h=g.h,yo(this,vl(g.i)),this.m=g.m):g&&(x=String(g).match(Tf))?(this.l=!1,Es(this,x[1]||"",!0),this.o=As(x[2]||""),this.g=As(x[3]||"",!0),ii(this,x[4]),this.h=As(x[5]||"",!0),yo(this,x[6]||"",!0),this.m=As(x[7]||"")):(this.l=!1,this.i=new Ye(null,this.l))}ri.prototype.toString=function(){const g=[];var x=this.j;x&&g.push(Ts(x,fl,!0),":");var A=this.g;return(A||x=="file")&&(g.push("//"),(x=this.o)&&g.push(Ts(x,fl,!0),"@"),g.push(ni(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&g.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&g.push("/"),g.push(Ts(A,A.charAt(0)=="/"?Cs:hl,!0))),(A=this.i.toString())&&g.push("?",A),(A=this.m)&&g.push("#",Ts(A,dl)),g.join("")},ri.prototype.resolve=function(g){const x=gr(this);let A=!!g.j;A?Es(x,g.j):A=!!g.o,A?x.o=g.o:A=!!g.g,A?x.g=g.g:A=g.u!=null;var N=g.h;if(A)ii(x,g.u);else if(A=!!g.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var X=x.h.lastIndexOf("/");X!=-1&&(N=x.h.slice(0,X+1)+N)}if(X=N,X==".."||X==".")N="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){N=X.lastIndexOf("/",0)==0,X=X.split("/");const ee=[];for(let le=0;le<X.length;){const Be=X[le++];Be=="."?N&&le==X.length&&ee.push(""):Be==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),N&&le==X.length&&ee.push("")):(ee.push(Be),N=!0)}N=ee.join("/")}else N=X}return A?x.h=N:A=g.i.toString()!=="",A?yo(x,vl(g.i)):A=!!g.m,A&&(x.m=g.m),x};function gr(g){return new ri(g)}function Es(g,x,A){g.j=A?As(x,!0):x,g.j&&(g.j=g.j.replace(/:$/,""))}function ii(g,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);g.u=x}else g.u=null}function yo(g,x,A){x instanceof Ye?(g.i=x,Ia(g.i,g.l)):(A||(x=Ts(x,mp)),g.i=new Ye(x,g.l))}function st(g,x,A){g.i.set(x,A)}function Li(g){return st(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function As(g,x){return g?x?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Ts(g,x,A){return typeof g=="string"?(g=encodeURI(g).replace(x,cl),A&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function cl(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var fl=/[#\/\?@]/g,hl=/[#\?:]/g,Cs=/[#\?]/g,mp=/[#\?@]/g,dl=/#/g;function Ye(g,x){this.h=this.g=null,this.i=g||null,this.j=!!x}function oi(g){g.g||(g.g=new Map,g.h=0,g.i&&ir(g.i,function(x,A){g.add(decodeURIComponent(x.replace(/\+/g," ")),A)}))}n=Ye.prototype,n.add=function(g,x){oi(this),this.i=null,g=si(this,g);let A=this.g.get(g);return A||this.g.set(g,A=[]),A.push(x),this.h+=1,this};function pl(g,x){oi(g),x=si(g,x),g.g.has(x)&&(g.i=null,g.h-=g.g.get(x).length,g.g.delete(x))}function Ca(g,x){return oi(g),x=si(g,x),g.g.has(x)}n.forEach=function(g,x){oi(this),this.g.forEach(function(A,N){A.forEach(function(X){g.call(x,X,N,this)},this)},this)};function gl(g,x){oi(g);let A=[];if(typeof x=="string")Ca(g,x)&&(A=A.concat(g.g.get(si(g,x))));else for(g=Array.from(g.g.values()),x=0;x<g.length;x++)A=A.concat(g[x]);return A}n.set=function(g,x){return oi(this),this.i=null,g=si(this,g),Ca(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[x]),this.h+=1,this},n.get=function(g,x){return g?(g=gl(this,g),g.length>0?String(g[0]):x):x};function ml(g,x,A){pl(g,x),A.length>0&&(g.i=null,g.g.set(si(g,x),y(A)),g.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],x=Array.from(this.g.keys());for(let N=0;N<x.length;N++){var A=x[N];const X=ni(A);A=gl(this,A);for(let ee=0;ee<A.length;ee++){let le=X;A[ee]!==""&&(le+="="+ni(A[ee])),g.push(le)}}return this.i=g.join("&")};function vl(g){const x=new Ye;return x.i=g.i,g.g&&(x.g=new Map(g.g),x.h=g.h),x}function si(g,x){return x=String(x),g.j&&(x=x.toLowerCase()),x}function Ia(g,x){x&&!g.j&&(oi(g),g.i=null,g.g.forEach(function(A,N){const X=N.toLowerCase();N!=X&&(pl(this,N),ml(this,X,A))},g)),g.j=x}function ai(g,x){const A=new go;if(s.Image){const N=new Image;N.onload=d(mn,A,"TestLoadImage: loaded",!0,x,N),N.onerror=d(mn,A,"TestLoadImage: error",!1,x,N),N.onabort=d(mn,A,"TestLoadImage: abort",!1,x,N),N.ontimeout=d(mn,A,"TestLoadImage: timeout",!1,x,N),s.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=g}else x(!1)}function ui(g,x){const A=new go,N=new AbortController,X=setTimeout(()=>{N.abort(),mn(A,"TestPingServer: timeout",!1,x)},1e4);fetch(g,{signal:N.signal}).then(ee=>{clearTimeout(X),ee.ok?mn(A,"TestPingServer: ok",!0,x):mn(A,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(X),mn(A,"TestPingServer: error",!1,x)})}function mn(g,x,A,N,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),N(A)}catch{}}function Is(){this.g=new ms}function Fi(g){this.i=g.Sb||null,this.h=g.ab||!1}p(Fi,co),Fi.prototype.g=function(){return new or(this.i,this.h)};function or(g,x){zt.call(this),this.H=g,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(or,zt),n=or.prototype,n.open=function(g,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=x,this.readyState=1,Lr(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(x.body=g),(this.H||s).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,_o(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Lr(this)),this.g&&(this.readyState=3,Lr(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Cf(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Cf(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var x=g.value?g.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!g.done}))&&(this.response=this.responseText+=x)}g.done?_o(this):Lr(this),this.readyState==3&&Cf(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,_o(this))},n.Na=function(g){this.g&&(this.response=g,_o(this))},n.ga=function(){this.g&&_o(this)};function _o(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Lr(g)}n.setRequestHeader=function(g,x){this.A.append(g,x)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],x=this.h.entries();for(var A=x.next();!A.done;)A=A.value,g.push(A[0]+": "+A[1]),A=x.next();return g.join(`\r
`)};function Lr(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(or.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function If(g){let x="";return pe(g,function(A,N){x+=N,x+=":",x+=A,x+=`\r
`}),x}function Sa(g,x,A){e:{for(N in A){var N=!1;break e}N=!0}N||(A=If(A),typeof g=="string"?A!=null&&ni(A):st(g,x,A))}function gt(g){zt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(gt,zt);var Sf=/^https?$/i,vp=["POST","PUT"];n=gt.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,x,A,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);x=x?x.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():yf.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(x,String(g),!0),this.B=!1}catch(ee){wo(this,ee);return}if(g=A||"",A=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var X in N)A.set(X,N[X]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ee of N.keys())A.set(ee,N.get(ee));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(A.keys()).find(ee=>ee.toLowerCase()=="content-type"),X=s.FormData&&g instanceof s.FormData,!(Array.prototype.indexOf.call(vp,x,void 0)>=0)||N||X||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,le]of A)this.g.setRequestHeader(ee,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(ee){wo(this,ee)}};function wo(g,x){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=x,g.o=5,xo(g),Bi(g)}function xo(g){g.A||(g.A=!0,kt(g,"complete"),kt(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,kt(this,"complete"),kt(this,"abort"),Bi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bi(this,!0)),gt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Vi(this):this.Xa())},n.Xa=function(){Vi(this)};function Vi(g){if(g.h&&typeof o<"u"){if(g.v&&li(g)==4)setTimeout(g.Ca.bind(g),0);else if(kt(g,"readystatechange"),li(g)==4){g.h=!1;try{const ee=g.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var A;if(!(A=x)){var N;if(N=ee===0){let le=String(g.D).match(Tf)[1]||null;!le&&s.self&&s.self.location&&(le=s.self.location.protocol.slice(0,-1)),N=!Sf.test(le?le.toLowerCase():"")}A=N}if(A)kt(g,"complete"),kt(g,"success");else{g.o=6;try{var X=li(g)>2?g.g.statusText:""}catch{X=""}g.l=X+" ["+g.ca()+"]",xo(g)}}finally{Bi(g)}}}}function Bi(g,x){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const A=g.g;g.g=null,x||kt(g,"ready");try{A.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function li(g){return g.g?g.g.readyState:0}n.ca=function(){try{return li(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var x=this.g.responseText;return g&&x.indexOf(g)==0&&(x=x.substring(g.length)),df(x)}};function Rf(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function yl(g){const x={};g=(g.g&&li(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<g.length;N++){if(L(g[N]))continue;var A=xa(g[N]);const X=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ee=x[X]||[];x[X]=ee,ee.push(A)}he(x,function(N){return N.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ci(g,x,A){return A&&A.internalChannelParams&&A.internalChannelParams[g]||x}function Ra(g){this.za=0,this.i=[],this.j=new go,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ci("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ci("baseRetryDelayMs",5e3,g),this.Za=ci("retryDelaySeedMs",1e4,g),this.Ta=ci("forwardChannelMaxRetries",2,g),this.va=ci("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Aa(g&&g.concurrentRequestLimit),this.Ba=new Is,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ra.prototype,n.ka=8,n.I=1,n.connect=function(g,x,A,N){Dt(0),this.W=g,this.H=x||{},A&&N!==void 0&&(this.H.OSID=A,this.H.OAID=N),this.F=this.X,this.J=wl(this,null,this.W),Ui(this)};function Pa(g){if(ba(g),g.I==3){var x=g.V++,A=gr(g.J);if(st(A,"SID",g.M),st(A,"RID",x),st(A,"TYPE","terminate"),fi(g,A),x=new pr(g,g.j,x),x.M=2,x.A=Li(gr(A)),A=!1,s.navigator&&s.navigator.sendBeacon)try{A=s.navigator.sendBeacon(x.A.toString(),"")}catch{}!A&&s.Image&&(new Image().src=x.A,A=!0),A||(x.g=bf(x.j,null),x.g.ea(x.A)),x.F=Date.now(),ys(x)}Ps(g)}function sr(g){g.g&&(Rs(g),g.g.cancel(),g.g=null)}function ba(g){sr(g),g.v&&(s.clearTimeout(g.v),g.v=null),Da(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&s.clearTimeout(g.m),g.m=null)}function Ui(g){if(!ul(g.h)&&!g.m){g.m=!0;var x=g.Ea;j||I(),W||(j(),W=!0),R.add(x,g),g.D=0}}function Pf(g,x){return ws(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=x.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=po(f(g.Ea,g,x),Na(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const X=new pr(this,this.j,g);let ee=this.o;if(this.U&&(ee?(ee=K(ee),xe(ee,this.U)):ee=this.U),this.u!==null||this.R||(X.J=ee,ee=null),this.S)e:{for(var x=0,A=0;A<this.i.length;A++){t:{var N=this.i[A];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(x+=N,x>4096){x=A;break e}if(x===4096||A===this.i.length-1){x=A+1;break e}}x=1e3}else x=1e3;x=_l(this,X,x),A=gr(this.J),st(A,"RID",g),st(A,"CVER",22),this.G&&st(A,"X-HTTP-Session-Id",this.G),fi(this,A),ee&&(this.R?x="headers="+ni(If(ee))+"&"+x:this.u&&Sa(A,this.u,ee)),Ta(this.h,X),this.Ra&&st(A,"TYPE","init"),this.S?(st(A,"$req",x),st(A,"SID","null"),X.U=!0,Mr(X,A,null)):Mr(X,A,x),this.I=2}}else this.I==3&&(g?Ss(this,g):this.i.length==0||ul(this.h)||Ss(this))};function Ss(g,x){var A;x?A=x.l:A=g.V++;const N=gr(g.J);st(N,"SID",g.M),st(N,"RID",A),st(N,"AID",g.K),fi(g,N),g.u&&g.o&&Sa(N,g.u,g.o),A=new pr(g,g.j,A,g.D+1),g.u===null&&(A.J=g.o),x&&(g.i=x.G.concat(g.i)),x=_l(g,A,1e3),A.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Ta(g.h,A),Mr(A,N,x)}function fi(g,x){g.H&&pe(g.H,function(A,N){st(x,N,A)}),g.l&&pe({},function(A,N){st(x,N,A)})}function _l(g,x,A){A=Math.min(g.i.length,A);const N=g.l?f(g.l.Ka,g.l,g):null;e:{var X=g.i;let Be=-1;for(;;){const Mt=["count="+A];Be==-1?A>0?(Be=X[0].g,Mt.push("ofs="+Be)):Be=0:Mt.push("ofs="+Be);let ct=!0;for(let Ht=0;Ht<A;Ht++){var ee=X[Ht].g;const ur=X[Ht].map;if(ee-=Be,ee<0)Be=Math.max(0,X[Ht].g-100),ct=!1;else try{ee="req"+ee+"_"||"";try{var le=ur instanceof Map?ur:Object.entries(ur);for(const[ji,di]of le){let pi=di;u(di)&&(pi=lo(di)),Mt.push(ee+ji+"="+encodeURIComponent(pi))}}catch(ji){throw Mt.push(ee+"type="+encodeURIComponent("_badmap")),ji}}catch{N&&N(ur)}}if(ct){le=Mt.join("&");break e}}le=void 0}return g=g.i.splice(0,A),x.G=g,le}function Sn(g){if(!g.g&&!g.v){g.Y=1;var x=g.Da;j||I(),W||(j(),W=!0),R.add(x,g),g.A=0}}function hi(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=po(f(g.Da,g),Na(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,Eo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=po(f(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),sr(this),Eo(this))};function Rs(g){g.B!=null&&(s.clearTimeout(g.B),g.B=null)}function Eo(g){g.g=new pr(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var x=gr(g.na);st(x,"RID","rpc"),st(x,"SID",g.M),st(x,"AID",g.K),st(x,"CI",g.F?"0":"1"),!g.F&&g.ia&&st(x,"TO",g.ia),st(x,"TYPE","xmlhttp"),fi(g,x),g.u&&g.o&&Sa(x,g.u,g.o),g.O&&(g.g.H=g.O);var A=g.g;g=g.ba,A.M=1,A.A=Li(gr(x)),A.u=null,A.R=!0,sl(A,g)}n.Va=function(){this.C!=null&&(this.C=null,sr(this),hi(this),Dt(19))};function Da(g){g.C!=null&&(s.clearTimeout(g.C),g.C=null)}function Oa(g,x){var A=null;if(g.g==x){Da(g),Rs(g),g.g=null;var N=2}else if(ll(g.h,x))A=x.G,xs(g.h,x),N=1;else return;if(g.I!=0){if(x.o)if(N==1){A=x.u?x.u.length:0,x=Date.now()-x.F;var X=g.D;N=ho(),kt(N,new il(N,A)),Ui(g)}else Sn(g);else if(X=x.m,X==3||X==0&&x.X>0||!(N==1&&Pf(g,x)||N==2&&hi(g)))switch(A&&A.length>0&&(x=g.h,x.i=x.i.concat(A)),X){case 1:ar(g,5);break;case 4:ar(g,10);break;case 3:ar(g,6);break;default:ar(g,2)}}}function Na(g,x){let A=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(A*=2),A*x}function ar(g,x){if(g.j.info("Error code "+x),x==2){var A=f(g.bb,g),N=g.Ua;const X=!N;N=new ri(N||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Es(N,"https"),Li(N),X?ai(N.toString(),A):ui(N.toString(),A)}else Dt(2);g.I=0,g.l&&g.l.pa(x),Ps(g),ba(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Ps(g){if(g.I=0,g.ja=[],g.l){const x=rr(g.h);(x.length!=0||g.i.length!=0)&&(E(g.ja,x),E(g.ja,g.i),g.h.i.length=0,y(g.i),g.i.length=0),g.l.oa()}}function wl(g,x,A){var N=A instanceof ri?gr(A):new ri(A);if(N.g!="")x&&(N.g=x+"."+N.g),ii(N,N.u);else{var X=s.location;N=X.protocol,x=x?x+"."+X.hostname:X.hostname,X=+X.port;const ee=new ri(null);N&&Es(ee,N),x&&(ee.g=x),X&&ii(ee,X),A&&(ee.h=A),N=ee}return A=g.G,x=g.wa,A&&x&&st(N,A,x),st(N,"VER",g.ka),fi(g,N),N}function bf(g,x,A){if(x&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=g.Aa&&!g.ma?new gt(new Fi({ab:A})):new gt(g.ma),x.Fa(g.L),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Df(){}n=Df.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ka(){}ka.prototype.g=function(g,x){return new vn(g,x)};function vn(g,x){zt.call(this),this.g=new Ra(x),this.l=g,this.h=x&&x.messageUrlParams||null,g=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(g?g["X-WebChannel-Content-Type"]=x.messageContentType:g={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(g?g["X-WebChannel-Client-Profile"]=x.sa:g={"X-WebChannel-Client-Profile":x.sa}),this.g.U=g,(g=x&&x.Qb)&&!L(g)&&(this.g.u=g),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!L(x)&&(this.g.G=x,g=this.h,g!==null&&x in g&&(g=this.h,x in g&&delete g[x])),this.j=new Ao(this)}p(vn,zt),vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){Pa(this.g)},vn.prototype.o=function(g){var x=this.g;if(typeof g=="string"){var A={};A.__data__=g,g=A}else this.v&&(A={},A.__data__=lo(g),g=A);x.i.push(new gp(x.Ya++,g)),x.I==3&&Ui(x)},vn.prototype.N=function(){this.g.l=null,delete this.j,Pa(this.g),delete this.g,vn.Z.N.call(this)};function Of(g){ya.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var x=g.__sm__;if(x){e:{for(const A in x){g=A;break e}g=void 0}(this.i=g)&&(g=this.i,x=x!==null&&g in x?x[g]:void 0),this.data=x}else this.data=g}p(Of,ya);function Nf(){rl.call(this),this.status=1}p(Nf,rl);function Ao(g){this.g=g}p(Ao,Df),Ao.prototype.ra=function(){kt(this.g,"a")},Ao.prototype.qa=function(g){kt(this.g,new Of(g))},Ao.prototype.pa=function(g){kt(this.g,new Nf)},Ao.prototype.oa=function(){kt(this.g,"b")},ka.prototype.createWebChannel=ka.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,qC=function(){return new ka},KC=function(){return ho()},$C=kr,mg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},mo.NO_ERROR=0,mo.TIMEOUT=8,mo.HTTP_ERROR=6,rd=mo,vo.COMPLETE="complete",WC=vo,pf.EventType=fo,fo.OPEN="a",fo.CLOSE="b",fo.ERROR="c",fo.MESSAGE="d",zt.prototype.listen=zt.prototype.J,tc=pf,gt.prototype.listenOnce=gt.prototype.K,gt.prototype.getLastError=gt.prototype.Ha,gt.prototype.getLastErrorCode=gt.prototype.ya,gt.prototype.getStatus=gt.prototype.ca,gt.prototype.getResponseJson=gt.prototype.La,gt.prototype.getResponseText=gt.prototype.la,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Fa,GC=gt}).apply(typeof Nh<"u"?Nh:typeof self<"u"?self:typeof window<"u"?window:{});const lx="@firebase/firestore",cx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kn.UNAUTHENTICATED=new kn(null),kn.GOOGLE_CREDENTIALS=new kn("google-credentials-uid"),kn.FIRST_PARTY=new kn("first-party-uid"),kn.MOCK_USER=new kn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new Bm("@firebase/firestore");function ou(){return ua.logLevel}function me(n,...e){if(ua.logLevel<=qe.DEBUG){const t=e.map(Zm);ua.debug(`Firestore (${$u}): ${n}`,...t)}}function oo(n,...e){if(ua.logLevel<=qe.ERROR){const t=e.map(Zm);ua.error(`Firestore (${$u}): ${n}`,...t)}}function Du(n,...e){if(ua.logLevel<=qe.WARN){const t=e.map(Zm);ua.warn(`Firestore (${$u}): ${n}`,...t)}}function Zm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,XC(n,r,t)}function XC(n,e,t){let r=`FIRESTORE (${$u}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw oo(r),new Error(r)}function mt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||XC(e,i,r)}function Xe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends so{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(kn.UNAUTHENTICATED)))}shutdown(){}}class N5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class k5{constructor(e){this.t=e,this.currentUser=kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mt(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let o=new Jo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Jo,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=o;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},u=c=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>u(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Jo)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string",31837,{l:r}),new YC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new kn(e)}}class M5{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=kn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class L5{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new M5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(kn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class fx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mt(this.o===void 0,3512);const r=o=>{o.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,me("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new fx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new fx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=V5(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Qe(n,e){return n<e?-1:n>e?1:0}function vg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return v1(i)===v1(o)?Qe(i,o):v1(i)?1:-1}return Qe(n.length,e.length)}const B5=55296,U5=57343;function v1(n){const e=n.charCodeAt(0);return e>=B5&&e<=U5}function Ou(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="__name__";class _i{constructor(e,t,r){t===void 0?t=0:t>e.length&&Pe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Pe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return _i.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _i?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=_i.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Qe(e.length,t.length)}static compareSegments(e,t){const r=_i.isNumericId(e),i=_i.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?_i.extractNumericId(e).compare(_i.extractNumericId(t)):vg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zo.fromString(e.substring(4,e.length-2))}}class pt extends _i{construct(e,t,r){return new pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const j5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mn extends _i{construct(e,t,r){return new Mn(e,t,r)}static isValidIdentifier(e){return j5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hx}static keyField(){return new Mn([hx])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new de(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new de(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new de(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(s=!s,i++):u!=="."||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new de(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mn(t)}static emptyPath(){return new Mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(pt.fromString(e))}static fromName(e){return new Se(pt.fromString(e).popFirst(5))}static empty(){return new Se(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(n,e,t){if(!t)throw new de(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function z5(n,e,t,r){if(e===!0&&r===!0)throw new de(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dx(n){if(!Se.isDocumentKey(n))throw new de(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function px(n){if(Se.isDocumentKey(n))throw new de(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Pe(12329,{type:typeof n})}function na(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qd(n);throw new de(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function H5(n,e){if(e<=0)throw new de(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(n,e){const t={typeString:n};return e&&(t.value=e),t}function ef(n,e){if(!ZC(n))throw new de(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new de(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=-62135596800,mx=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*mx);return new Ct(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gx)throw new de(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mx}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ef(e,Ct._jsonSchema))return new Ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:qt("string",Ct._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new Ct(0,0))}static max(){return new Me(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=-1;function G5(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Me.fromTimestamp(r===1e9?new Ct(t+1,0):new Ct(t,r));return new ss(i,Se.empty(),e)}function W5(n){return new ss(n.readTime,n.key,Oc)}class ss{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ss(Me.min(),Se.empty(),Oc)}static max(){return new ss(Me.max(),Se.empty(),Oc)}}function $5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class q5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xd(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==K5)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,r)=>{t(e)}))}static reject(e){return new ie(((t,r)=>{r(e)}))}static waitFor(e){return new ie(((t,r)=>{let i=0,o=0,s=!1;e.forEach((u=>{++i,u.next((()=>{++o,s&&o===i&&t()}),(c=>r(c)))})),s=!0,o===i&&t()}))}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next((i=>i?ie.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,o)=>{r.push(t.call(this,i,o))})),this.waitFor(r)}static mapArray(e,t){return new ie(((r,i)=>{const o=e.length,s=new Array(o);let u=0;for(let c=0;c<o;c++){const f=c;t(e[f]).next((d=>{s[f]=d,++u,u===o&&r(s)}),(d=>i(d)))}}))}static doWhile(e,t){return new ie(((r,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):r()};o()}))}}function X5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ku(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5=-1;function tf(n){return n==null}function Id(n){return n===0&&1/n==-1/0}function Q5(n){return typeof n=="number"&&Number.isInteger(n)&&!Id(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="";function Z5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vx(e)),e=J5(n.get(t),e);return vx(e)}function J5(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case JC:t+="";break;default:t+=o}}return t}function vx(n){return n+JC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t){this.comparator=e,this.root=t||An.EMPTY}insert(e,t){return new Ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kh(this.root,e,this.comparator,!1)}getReverseIterator(){return new kh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kh(this.root,e,this.comparator,!0)}}class kh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class An{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??An.RED,this.left=i??An.EMPTY,this.right=o??An.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new An(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return An.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return An.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,An.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,An.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}An.EMPTY=null,An.RED=!0,An.BLACK=!1;An.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new An(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _x(this.data.getIterator())}getIteratorFrom(e){return new _x(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof on)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new on(this.comparator);return t.data=e,t}}class _x{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.fields=e,e.sort(Mn.comparator)}static empty(){return new Pr([])}unionWith(e){let t=new on(Mn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Pr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ou(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new tI("Invalid base64 string: "+o):o}})(e);return new In(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new In(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}In.EMPTY_BYTE_STRING=new In("");const ek=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(n){if(mt(!!n,39018),typeof n=="string"){let e=0;const t=ek.exec(n);if(mt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vt(n.seconds),nanos:Vt(n.nanos)}}function Vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function us(n){return typeof n=="string"?In.fromBase64String(n):In.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="server_timestamp",rI="__type__",iI="__previous_value__",oI="__local_write_time__";function ev(n){return(n?.mapValue?.fields||{})[rI]?.stringValue===nI}function Qd(n){const e=n.mapValue.fields[iI];return ev(e)?Qd(e):e}function Nc(n){const e=as(n.mapValue.fields[oI].timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t,r,i,o,s,u,c,f,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const Sd="(default)";class kc{constructor(e,t){this.projectId=e,this.database=t||Sd}static empty(){return new kc("","")}get isDefaultDatabase(){return this.database===Sd}isEqual(e){return e instanceof kc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="__type__",nk="__max__",Mh={mapValue:{}},aI="__vector__",Rd="value";function ls(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ev(n)?4:ik(n)?9007199254740991:rk(n)?10:11:Pe(28295,{value:n})}function Pi(n,e){if(n===e)return!0;const t=ls(n);if(t!==ls(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nc(n).isEqual(Nc(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=as(i.timestampValue),u=as(o.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return us(i.bytesValue).isEqual(us(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Vt(i.geoPointValue.latitude)===Vt(o.geoPointValue.latitude)&&Vt(i.geoPointValue.longitude)===Vt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Vt(i.integerValue)===Vt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Vt(i.doubleValue),u=Vt(o.doubleValue);return s===u?Id(s)===Id(u):isNaN(s)&&isNaN(u)}return!1})(n,e);case 9:return Ou(n.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:case 11:return(function(i,o){const s=i.mapValue.fields||{},u=o.mapValue.fields||{};if(yx(s)!==yx(u))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(u[c]===void 0||!Pi(s[c],u[c])))return!1;return!0})(n,e);default:return Pe(52216,{left:n})}}function Mc(n,e){return(n.values||[]).find((t=>Pi(t,e)))!==void 0}function Nu(n,e){if(n===e)return 0;const t=ls(n),r=ls(e);if(t!==r)return Qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return(function(o,s){const u=Vt(o.integerValue||o.doubleValue),c=Vt(s.integerValue||s.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1})(n,e);case 3:return wx(n.timestampValue,e.timestampValue);case 4:return wx(Nc(n),Nc(e));case 5:return vg(n.stringValue,e.stringValue);case 6:return(function(o,s){const u=us(o),c=us(s);return u.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){const u=o.split("/"),c=s.split("/");for(let f=0;f<u.length&&f<c.length;f++){const d=Qe(u[f],c[f]);if(d!==0)return d}return Qe(u.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){const u=Qe(Vt(o.latitude),Vt(s.latitude));return u!==0?u:Qe(Vt(o.longitude),Vt(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return xx(n.arrayValue,e.arrayValue);case 10:return(function(o,s){const u=o.fields||{},c=s.fields||{},f=u[Rd]?.arrayValue,d=c[Rd]?.arrayValue,p=Qe(f?.values?.length||0,d?.values?.length||0);return p!==0?p:xx(f,d)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Mh.mapValue&&s===Mh.mapValue)return 0;if(o===Mh.mapValue)return 1;if(s===Mh.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),f=s.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const v=vg(c[p],d[p]);if(v!==0)return v;const y=Nu(u[c[p]],f[d[p]]);if(y!==0)return y}return Qe(c.length,d.length)})(n.mapValue,e.mapValue);default:throw Pe(23264,{he:t})}}function wx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);const t=as(n),r=as(e),i=Qe(t.seconds,r.seconds);return i!==0?i:Qe(t.nanos,r.nanos)}function xx(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Nu(t[i],r[i]);if(o)return o}return Qe(t.length,r.length)}function ku(n){return yg(n)}function yg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=as(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return us(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Se.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=yg(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${yg(t.fields[s])}`;return i+"}"})(n.mapValue):Pe(61005,{value:n})}function id(n){switch(ls(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qd(n);return e?16+id(e):16;case 5:return 2*n.stringValue.length;case 6:return us(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+id(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return fa(r.fields,((o,s)=>{i+=o.length+id(s)})),i})(n.mapValue);default:throw Pe(13486,{value:n})}}function Ex(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _g(n){return!!n&&"integerValue"in n}function tv(n){return!!n&&"arrayValue"in n}function Ax(n){return!!n&&"nullValue"in n}function Tx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function y1(n){return!!n&&"mapValue"in n}function rk(n){return(n?.mapValue?.fields||{})[sI]?.stringValue===aI}function mc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return fa(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=mc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mc(n.arrayValue.values[t]);return e}return{...n}}function ik(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===nk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!y1(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mc(t)}setAll(e){let t=Mn.emptyPath(),r={},i=[];e.forEach(((s,u)=>{if(!t.isImmediateParentOf(u)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=u.popLast()}s?r[u.lastSegment()]=mc(s):i.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());y1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];y1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){fa(t,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new Jn(mc(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t,r,i,o,s,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=u}static newInvalidDocument(e){return new dn(e,0,Me.min(),Me.min(),Me.min(),Jn.empty(),0)}static newFoundDocument(e,t,r,i){return new dn(e,1,t,Me.min(),r,i,0)}static newNoDocument(e,t){return new dn(e,2,t,Me.min(),Me.min(),Jn.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Me.min(),Me.min(),Jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,t){this.position=e,this.inclusive=t}}function Cx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Se.comparator(Se.fromName(s.referenceValue),t.key):r=Nu(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ix(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t="asc"){this.field=e,this.dir=t}}function ok(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{}class Kt extends uI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ak(e,t,r):t==="array-contains"?new ck(e,r):t==="in"?new fk(e,r):t==="not-in"?new hk(e,r):t==="array-contains-any"?new dk(e,r):new Kt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new uk(e,r):new lk(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Nu(t,this.value)):t!==null&&ls(this.value)===ls(t)&&this.matchesComparison(Nu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zr extends uI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Zr(e,t)}matches(e){return lI(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lI(n){return n.op==="and"}function cI(n){return sk(n)&&lI(n)}function sk(n){for(const e of n.filters)if(e instanceof Zr)return!1;return!0}function wg(n){if(n instanceof Kt)return n.field.canonicalString()+n.op.toString()+ku(n.value);if(cI(n))return n.filters.map((e=>wg(e))).join(",");{const e=n.filters.map((t=>wg(t))).join(",");return`${n.op}(${e})`}}function fI(n,e){return n instanceof Kt?(function(r,i){return i instanceof Kt&&r.op===i.op&&r.field.isEqual(i.field)&&Pi(r.value,i.value)})(n,e):n instanceof Zr?(function(r,i){return i instanceof Zr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,s,u)=>o&&fI(s,i.filters[u])),!0):!1})(n,e):void Pe(19439)}function hI(n){return n instanceof Kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ku(t.value)}`})(n):n instanceof Zr?(function(t){return t.op.toString()+" {"+t.getFilters().map(hI).join(" ,")+"}"})(n):"Filter"}class ak extends Kt{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class uk extends Kt{constructor(e,t){super(e,"in",t),this.keys=dI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lk extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=dI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function dI(n,e){return(e.arrayValue?.values||[]).map((t=>Se.fromName(t.referenceValue)))}class ck extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tv(t)&&Mc(t.arrayValue,this.value)}}class fk extends Kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Mc(this.value.arrayValue,t)}}class hk extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Mc(this.value.arrayValue,t)}}class dk extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Mc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,t=null,r=[],i=[],o=null,s=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=u,this.Te=null}}function Sx(n,e=null,t=[],r=[],i=null,o=null,s=null){return new pk(n,e,t,r,i,o,s)}function nv(n){const e=Xe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>wg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),tf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ku(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ku(r))).join(",")),e.Te=t}return e.Te}function rv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ok(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!fI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ix(n.startAt,e.startAt)&&Ix(n.endAt,e.endAt)}function xg(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t=null,r=[],i=[],o=null,s="F",u=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gk(n,e,t,r,i,o,s,u){return new qu(n,e,t,r,i,o,s,u)}function Zd(n){return new qu(n)}function Rx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pI(n){return n.collectionGroup!==null}function vc(n){const e=Xe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let u=new on(Mn.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Lc(o,r))})),t.has(Mn.keyField().canonicalString())||e.Ie.push(new Lc(Mn.keyField(),r))}return e.Ie}function Ci(n){const e=Xe(n);return e.Ee||(e.Ee=mk(e,vc(n))),e.Ee}function mk(n,e){if(n.limitType==="F")return Sx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Lc(i.field,o)}));const t=n.endAt?new Pd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Pd(n.startAt.position,n.startAt.inclusive):null;return Sx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Eg(n,e){const t=n.filters.concat([e]);return new qu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function bd(n,e,t){return new qu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jd(n,e){return rv(Ci(n),Ci(e))&&n.limitType===e.limitType}function gI(n){return`${nv(Ci(n))}|lt:${n.limitType}`}function su(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>hI(i))).join(", ")}]`),tf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>ku(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>ku(i))).join(",")),`Target(${r})`})(Ci(n))}; limitType=${n.limitType})`}function ep(n,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Se.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(const o of vc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,u,c){const f=Cx(s,u,c);return s.inclusive?f<=0:f<0})(r.startAt,vc(r),i)||r.endAt&&!(function(s,u,c){const f=Cx(s,u,c);return s.inclusive?f>=0:f>0})(r.endAt,vc(r),i))})(n,e)}function vk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mI(n){return(e,t)=>{let r=!1;for(const i of vc(n)){const o=yk(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function yk(n,e,t){const r=n.field.isKeyField()?Se.comparator(e.key,t.key):(function(o,s,u){const c=s.data.field(o),f=u.data.field(o);return c!==null&&f!==null?Nu(c,f):Pe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Pe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fa(this.inner,((t,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return eI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=new Ut(Se.comparator);function cs(){return _k}const vI=new Ut(Se.comparator);function nc(...n){let e=vI;for(const t of n)e=e.insert(t.key,t);return e}function wk(n){let e=vI;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Zs(){return yc()}function yI(){return yc()}function yc(){return new ha((n=>n.toString()),((n,e)=>n.isEqual(e)))}const xk=new on(Se.comparator);function nt(...n){let e=xk;for(const t of n)e=e.add(t);return e}const Ek=new on(Qe);function Ak(){return Ek}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Id(e)?"-0":e}}function _I(n){return{integerValue:""+n}}function wI(n,e){return Q5(e)?_I(e):iv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(){this._=void 0}}function Tk(n,e,t){return n instanceof Fc?(function(i,o){const s={fields:{[rI]:{stringValue:nI},[oI]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ev(o)&&(o=Qd(o)),o&&(s.fields[iI]=o),{mapValue:s}})(t,e):n instanceof Vc?xI(n,e):n instanceof Bc?EI(n,e):(function(i,o){const s=Ik(i,o),u=Px(s)+Px(i.Ae);return _g(s)&&_g(i.Ae)?_I(u):iv(i.serializer,u)})(n,e)}function Ck(n,e,t){return n instanceof Vc?xI(n,e):n instanceof Bc?EI(n,e):t}function Ik(n,e){return n instanceof Uc?(function(r){return _g(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Fc extends tp{}class Vc extends tp{constructor(e){super(),this.elements=e}}function xI(n,e){const t=AI(e);for(const r of n.elements)t.some((i=>Pi(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Bc extends tp{constructor(e){super(),this.elements=e}}function EI(n,e){let t=AI(e);for(const r of n.elements)t=t.filter((i=>!Pi(i,r)));return{arrayValue:{values:t}}}class Uc extends tp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Px(n){return Vt(n.integerValue||n.doubleValue)}function AI(n){return tv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,t){this.field=e,this.transform=t}}function Sk(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Vc&&i instanceof Vc||r instanceof Bc&&i instanceof Bc?Ou(r.elements,i.elements,Pi):r instanceof Uc&&i instanceof Uc?Pi(r.Ae,i.Ae):r instanceof Fc&&i instanceof Fc})(n.transform,e.transform)}class Sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function od(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class np{}function CI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ov(n.key,Sr.none()):new nf(n.key,n.data,Sr.none());{const t=n.data,r=Jn.empty();let i=new on(Mn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new da(n.key,r,new Pr(i.toArray()),Sr.none())}}function Rk(n,e,t){n instanceof nf?(function(i,o,s){const u=i.value.clone(),c=Dx(i.fieldTransforms,o,s.transformResults);u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):n instanceof da?(function(i,o,s){if(!od(i.precondition,o))return void o.convertToUnknownDocument(s.version);const u=Dx(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(II(i)),c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function _c(n,e,t,r){return n instanceof nf?(function(o,s,u,c){if(!od(o.precondition,s))return u;const f=o.value.clone(),d=Ox(o.fieldTransforms,c,s);return f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof da?(function(o,s,u,c){if(!od(o.precondition,s))return u;const f=Ox(o.fieldTransforms,c,s),d=s.data;return d.setAll(II(o)),d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((p=>p.field)))})(n,e,t,r):(function(o,s,u){return od(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u})(n,e,t)}function bx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ou(r,i,((o,s)=>Sk(o,s)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class nf extends np{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class da extends np{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function II(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Dx(n,e,t){const r=new Map;mt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,u=e.data.field(o.field);r.set(o.field,Ck(s,u,t[i]))}return r}function Ox(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,Tk(o,s,e))}return r}class ov extends np{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SI extends np{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Rk(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=_c(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=_c(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=yI();return this.mutations.forEach((i=>{const o=e.get(i.key),s=o.overlayedDocument;let u=this.applyToLocalView(s,o.mutatedFields);u=t.has(i.key)?null:u;const c=CI(s,u);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Me.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),nt())}isEqual(e){return this.batchId===e.batchId&&Ou(this.mutations,e.mutations,((t,r)=>bx(t,r)))&&Ou(this.baseMutations,e.baseMutations,((t,r)=>bx(t,r)))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,Ze;function Ok(n){switch(n){case ne.OK:return Pe(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Pe(15467,{code:n})}}function RI(n){if(n===void 0)return oo("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Wt.OK:return ne.OK;case Wt.CANCELLED:return ne.CANCELLED;case Wt.UNKNOWN:return ne.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return ne.INTERNAL;case Wt.UNAVAILABLE:return ne.UNAVAILABLE;case Wt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Wt.NOT_FOUND:return ne.NOT_FOUND;case Wt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Wt.ABORTED:return ne.ABORTED;case Wt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Wt.DATA_LOSS:return ne.DATA_LOSS;default:return Pe(39323,{code:n})}}(Ze=Wt||(Wt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new Zo([4294967295,4294967295],0);function Nx(n){const e=Nk().encode(n),t=new HC;return t.update(e),new Uint8Array(t.digest())}function kx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Zo([t,r],0),new Zo([i,o],0)]}class sv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new rc(`Invalid padding: ${t}`);if(r<0)throw new rc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new rc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new rc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Zo.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Zo.fromNumber(r)));return i.compare(kk)===1&&(i=new Zo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Nx(e),[r,i]=kx(t);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new sv(o,i,t);return r.forEach((u=>s.insert(u))),s}insert(e){if(this.ge===0)return;const t=Nx(e),[r,i]=kx(t);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);this.Se(s)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class rc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,rf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new rp(Me.min(),i,new Ut(Qe),cs(),nt())}}class rf{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new rf(r,t,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class PI{constructor(e,t){this.targetId=e,this.Ce=t}}class bI{constructor(e,t,r=In.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Mx{constructor(){this.ve=0,this.Fe=Lx(),this.Me=In.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=nt(),t=nt(),r=nt();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Pe(38017,{changeType:o})}})),new rf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Lx()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Mk{constructor(e){this.Ge=e,this.ze=new Map,this.je=cs(),this.Je=Lh(),this.He=Lh(),this.Ye=new Ut(Qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Pe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(xg(o))if(r===0){const s=new Se(o.path);this.et(t,s,dn.newNoDocument(s,Me.min()))}else mt(r===1,20013,{expectedCount:r});else{const s=this._t(t);if(s!==r){const u=this.ut(e),c=u?this.ct(u,e,s):1;if(c!==0){this.it(t);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,u;try{s=us(r).toUint8Array()}catch(c){if(c instanceof tI)return Du("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new sv(s,i,o)}catch(c){return Du(c instanceof rc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((o=>{const s=this.Ge.ht(),u=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,s)=>{const u=this.ot(s);if(u){if(o.current&&xg(u.target)){const c=new Se(u.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,dn.newNoDocument(c,e))}o.Be&&(t.set(s,o.ke()),o.qe())}}));let r=nt();this.He.forEach(((o,s)=>{let u=!0;s.forEachWhile((c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.je.forEach(((o,s)=>s.setReadTime(e)));const i=new rp(e,t,this.Ye,this.je,r);return this.je=cs(),this.Je=Lh(),this.He=Lh(),this.Ye=new Ut(Qe),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Mx,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new on(Qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new on(Qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Mx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Lh(){return new Ut(Se.comparator)}function Lx(){return new Ut(Se.comparator)}const Lk={asc:"ASCENDING",desc:"DESCENDING"},Fk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vk={and:"AND",or:"OR"};class Bk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ag(n,e){return n.useProto3Json||tf(e)?e:{value:e}}function Dd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Uk(n,e){return Dd(n,e.toTimestamp())}function eo(n){return mt(!!n,49232),Me.fromTimestamp((function(t){const r=as(t);return new Ct(r.seconds,r.nanos)})(n))}function av(n,e){return Tg(n,e).canonicalString()}function Tg(n,e){const t=(function(i){return new pt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function OI(n){const e=pt.fromString(n);return mt(FI(e),10190,{key:e.toString()}),e}function Od(n,e){return av(n.databaseId,e.path)}function wc(n,e){const t=OI(e);if(t.get(1)!==n.databaseId.projectId)throw new de(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(kI(t))}function NI(n,e){return av(n.databaseId,e)}function jk(n){const e=OI(n);return e.length===4?pt.emptyPath():kI(e)}function Fx(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kI(n){return mt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Vx(n,e,t){return{name:Od(n,e),fields:t.value.mapValue.fields}}function zk(n,e){return"found"in e?(function(r,i){mt(!!i.found,43571),i.found.name,i.found.updateTime;const o=wc(r,i.found.name),s=eo(i.found.updateTime),u=i.found.createTime?eo(i.found.createTime):Me.min(),c=new Jn({mapValue:{fields:i.found.fields}});return dn.newFoundDocument(o,s,u,c)})(n,e):"missing"in e?(function(r,i){mt(!!i.missing,3894),mt(!!i.readTime,22933);const o=wc(r,i.missing),s=eo(i.readTime);return dn.newNoDocument(o,s)})(n,e):Pe(7234,{result:e})}function Hk(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Pe(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,d){return f.useProto3Json?(mt(d===void 0||typeof d=="string",58123),In.fromBase64String(d||"")):(mt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),In.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&(function(f){const d=f.code===void 0?ne.UNKNOWN:RI(f.code);return new de(d,f.message||"")})(s);t=new bI(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=wc(n,r.document.name),o=eo(r.document.updateTime),s=r.document.createTime?eo(r.document.createTime):Me.min(),u=new Jn({mapValue:{fields:r.document.fields}}),c=dn.newFoundDocument(i,o,s,u),f=r.targetIds||[],d=r.removedTargetIds||[];t=new sd(f,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=wc(n,r.document),o=r.readTime?eo(r.readTime):Me.min(),s=dn.newNoDocument(i,o),u=r.removedTargetIds||[];t=new sd([],u,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=wc(n,r.document),o=r.removedTargetIds||[];t=new sd([],o,i,null)}else{if(!("filter"in e))return Pe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new Dk(i,o),u=r.targetId;t=new PI(u,s)}}return t}function Gk(n,e){let t;if(e instanceof nf)t={update:Vx(n,e.key,e.value)};else if(e instanceof ov)t={delete:Od(n,e.key)};else if(e instanceof da)t={update:Vx(n,e.key,e.data),updateMask:Zk(e.fieldMask)};else{if(!(e instanceof SI))return Pe(16599,{Vt:e.type});t={verify:Od(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,s){const u=s.transform;if(u instanceof Fc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Vc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Bc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Uc)return{fieldPath:s.field.canonicalString(),increment:u.Ae};throw Pe(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Uk(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Pe(27497)})(n,e.precondition)),t}function Wk(n,e){return{documents:[NI(n,e.path)]}}function $k(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=NI(n,i);const o=(function(f){if(f.length!==0)return LI(Zr.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const s=(function(f){if(f.length!==0)return f.map((d=>(function(v){return{field:au(v.field),direction:Xk(v.dir)}})(d)))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=Ag(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:i}}function Kk(n){let e=jk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){mt(r===1,65062);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=(function(p){const v=MI(p);return v instanceof Zr&&cI(v)?v.getFilters():[v]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map((v=>(function(E){return new Lc(uu(E.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(p){let v;return v=typeof p=="object"?p.value:p,tf(v)?null:v})(t.limit));let c=null;t.startAt&&(c=(function(p){const v=!!p.before,y=p.values||[];return new Pd(y,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(p){const v=!p.before,y=p.values||[];return new Pd(y,v)})(t.endAt)),gk(e,i,s,o,u,"F",c,f)}function qk(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function MI(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=uu(t.unaryFilter.field);return Kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=uu(t.unaryFilter.field);return Kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=uu(t.unaryFilter.field);return Kt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=uu(t.unaryFilter.field);return Kt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Kt.create(uu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Zr.create(t.compositeFilter.filters.map((r=>MI(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}})(t.compositeFilter.op))})(n):Pe(30097,{filter:n})}function Xk(n){return Lk[n]}function Yk(n){return Fk[n]}function Qk(n){return Vk[n]}function au(n){return{fieldPath:n.canonicalString()}}function uu(n){return Mn.fromServerFormat(n.fieldPath)}function LI(n){return n instanceof Kt?(function(t){if(t.op==="=="){if(Tx(t.value))return{unaryFilter:{field:au(t.field),op:"IS_NAN"}};if(Ax(t.value))return{unaryFilter:{field:au(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Tx(t.value))return{unaryFilter:{field:au(t.field),op:"IS_NOT_NAN"}};if(Ax(t.value))return{unaryFilter:{field:au(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:au(t.field),op:Yk(t.op),value:t.value}}})(n):n instanceof Zr?(function(t){const r=t.getFilters().map((i=>LI(i)));return r.length===1?r[0]:{compositeFilter:{op:Qk(t.op),filters:r}}})(n):Pe(54877,{filter:n})}function Zk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function FI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t,r,i,o=Me.min(),s=Me.min(),u=In.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Ko(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e){this.yt=e}}function eM(n){const e=Kk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?bd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(){this.Cn=new nM}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(ss.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class nM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new on(pt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new on(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VI=41943040;class Zn{static withCacheSize(e){return new Zn(e,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn.DEFAULT_COLLECTION_PERCENTILE=10,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zn.DEFAULT=new Zn(VI,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zn.DISABLED=new Zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mu(0)}static cr(){return new Mu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="LruGarbageCollector",rM=1048576;function jx([n,e],[t,r]){const i=Qe(n,t);return i===0?Qe(e,r):i}class iM{constructor(e){this.Ir=e,this.buffer=new on(jx),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();jx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(Ux,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ku(t)?me(Ux,"Ignoring IndexedDB error during garbage collection: ",t):await Xd(t)}await this.Vr(3e5)}))}}class sM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Yd.ce);const r=new iM(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Bx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bx):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,u,c,f;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(r=p,u=Date.now(),this.removeTargets(e,r,t)))).next((p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(f=Date.now(),ou()<=qe.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(u-s)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${p} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p}))))}}function aM(n,e){return new sM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.changes=new ha((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&_c(r.mutation,i,Pr.empty(),Ct.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,nt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=nt()){const i=Zs();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((o=>{let s=nc();return o.forEach(((u,c)=>{s=s.insert(u,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,t){const r=Zs();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,nt())))}populateOverlays(e,t,r){const i=[];return r.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((s,u)=>{t.set(s,u)}))}))}computeViews(e,t,r,i){let o=cs();const s=yc(),u=(function(){return yc()})();return t.forEach(((c,f)=>{const d=r.get(f.key);i.has(f.key)&&(d===void 0||d.mutation instanceof da)?o=o.insert(f.key,f):d!==void 0?(s.set(f.key,d.mutation.getFieldMask()),_c(d.mutation,f,d.mutation.getFieldMask(),Ct.now())):s.set(f.key,Pr.empty())})),this.recalculateAndSaveOverlays(e,o).next((c=>(c.forEach(((f,d)=>s.set(f,d))),t.forEach(((f,d)=>u.set(f,new lM(d,s.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=yc();let i=new Ut(((s,u)=>s-u)),o=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((s=>{for(const u of s)u.keys().forEach((c=>{const f=t.get(c);if(f===null)return;let d=r.get(c)||Pr.empty();d=u.applyToLocalView(f,d),r.set(c,d);const p=(i.get(u.batchId)||nt()).add(c);i=i.insert(u.batchId,p)}))})).next((()=>{const s=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),f=c.key,d=c.value,p=yI();d.forEach((v=>{if(!o.has(v)){const y=CI(t.get(v),r.get(v));y!==null&&p.set(v,y),o=o.add(v)}})),s.push(this.documentOverlayCache.saveOverlays(e,f,p))}return ie.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return Se.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ie.resolve(Zs());let u=Oc,c=o;return s.next((f=>ie.forEach(f,((d,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),o.get(d)?ie.resolve():this.remoteDocumentCache.getEntry(e,d).next((v=>{c=c.insert(d,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,c,f,nt()))).next((d=>({batchId:u,changes:wk(d)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((r=>{let i=nc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=nc();return this.indexManager.getCollectionParents(e,o).next((u=>ie.forEach(u,(c=>{const f=(function(p,v){return new qu(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((d=>{d.forEach(((p,v)=>{s=s.insert(p,v)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i)))).next((s=>{o.forEach(((c,f)=>{const d=f.getKey();s.get(d)===null&&(s=s.insert(d,dn.newInvalidDocument(d)))}));let u=nc();return s.forEach(((c,f)=>{const d=o.get(c);d!==void 0&&_c(d.mutation,f,Pr.empty(),Ct.now()),ep(t,f)&&(u=u.insert(c,f))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:eo(i.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:eM(i.bundledQuery),readTime:eo(i.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.overlays=new Ut(Se.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Zs();return ie.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,o)=>{this.St(e,t,o)})),ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const i=Zs(),o=t.length+1,s=new Se(t.child("")),u=this.overlays.getIteratorFrom(s);for(;u.hasNext();){const c=u.getNext().value,f=c.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ut(((f,d)=>f-d));const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let d=o.get(f.largestBatchId);d===null&&(d=Zs(),o=o.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const u=Zs(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,d)=>u.set(f,d))),!(u.size()>=i)););return ie.resolve(u)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new bk(t,r));let o=this.qr.get(t);o===void 0&&(o=nt(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(){this.sessionToken=In.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.Qr=new on(hn.$r),this.Ur=new on(hn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new hn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new hn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Se(new pt([])),r=new hn(t,e),i=new hn(t,e+1),o=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),o.push(s.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Se(new pt([])),r=new hn(t,e),i=new hn(t,e+1);let o=nt();return this.Ur.forEachInRange([r,i],(s=>{o=o.add(s.key)})),o}containsKey(e){const t=new hn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class hn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Se.comparator(e.key,t.key)||Qe(e.Yr,t.Yr)}static Kr(e,t){return Qe(e.Yr,t.Yr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new on(hn.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Pk(o,t,r,i);this.mutationQueue.push(s);for(const u of i)this.Zr=this.Zr.add(new hn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ie.resolve(s)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return ie.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Y5:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hn(t,0),i=new hn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(s=>{const u=this.Xr(s.Yr);o.push(u)})),ie.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new on(Qe);return t.forEach((i=>{const o=new hn(i,0),s=new hn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],(u=>{r=r.add(u.Yr)}))})),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Se.isDocumentKey(o)||(o=o.child(""));const s=new hn(new Se(o),0);let u=new on(Qe);return this.Zr.forEachWhile((c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(c.Yr)),!0)}),s),ie.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){mt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(t.mutations,(i=>{const o=new hn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new hn(t,0),i=this.Zr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.ri=e,this.docs=(function(){return new Ut(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=cs();return t.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():dn.newInvalidDocument(i))})),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=cs();const s=t.path,u=new Se(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||$5(W5(d),r)<=0||(i.has(d.key)||ep(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Pe(9500)}ii(e,t){return ie.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new mM(this)}getSize(e){return ie.resolve(this.size)}}class mM extends uM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.persistence=e,this.si=new ha((t=>nv(t)),rv),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new uv,this.targetCount=0,this.ai=Mu.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Mu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach(((s,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),ie.waitFor(o).next((()=>i))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((s=>{o.push(i.markPotentiallyOrphaned(e,s))})),ie.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,t){this.ui={},this.overlays={},this.ci=new Yd(0),this.li=!1,this.li=!0,this.hi=new dM,this.referenceDelegate=e(this),this.Pi=new vM(this),this.indexManager=new tM,this.remoteDocumentCache=(function(i){return new gM(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Jk(t),this.Ii=new fM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new pM(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){me("MemoryPersistence","Starting transaction:",e);const i=new yM(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,t){return ie.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class yM extends q5{constructor(e){super(),this.currentSequenceNumber=e}}class lv{constructor(e){this.persistence=e,this.Ri=new uv,this.Vi=null}static mi(e){return new lv(e)}get fi(){if(this.Vi)return this.Vi;throw Pe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(r=>{const i=Se.fromPath(r);return this.gi(e,i).next((o=>{o||t.removeEntry(i,Me.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Nd{constructor(e,t){this.persistence=e,this.pi=new ha((r=>Z5(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=aM(this,t)}static mi(e,t){return new Nd(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?ie.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,t).next((u=>{u||(r++,o.removeEntry(s,Me.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=id(e.data.value)),t}br(e,t,r){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ie.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=nt(),i=nt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new cv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return fD()?8:X5(Fn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next((s=>{o.result=s})).next((()=>{if(!o.result)return this.ws(e,t,i,r).next((s=>{o.result=s}))})).next((()=>{if(o.result)return;const s=new _M;return this.Ss(e,t,s).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,s,u.size)}))})).next((()=>o.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(ou()<=qe.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",su(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(ou()<=qe.DEBUG&&me("QueryEngine","Query:",su(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ou()<=qe.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",su(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ci(t))):ie.resolve())}ys(e,t){if(Rx(t))return ie.resolve(null);let r=Ci(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=bd(t,null,"F"),r=Ci(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const s=nt(...o);return this.ps.getDocuments(e,s).next((u=>this.indexManager.getMinOffset(e,r).next((c=>{const f=this.Ds(t,u);return this.Cs(t,f,s,c.readTime)?this.ys(e,bd(t,null,"F")):this.vs(e,f,t,c)}))))})))))}ws(e,t,r,i){return Rx(t)||i.isEqual(Me.min())?ie.resolve(null):this.ps.getDocuments(e,r).next((o=>{const s=this.Ds(t,o);return this.Cs(t,s,r,i)?ie.resolve(null):(ou()<=qe.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),su(t)),this.vs(e,s,t,G5(i,Oc)).next((u=>u)))}))}Ds(e,t){let r=new on(mI(e));return t.forEach(((i,o)=>{ep(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return ou()<=qe.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",su(t)),this.ps.getDocumentsMatchingQuery(e,t,ss.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(t.forEach((s=>{o=o.insert(s.key,s)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="LocalStore",xM=3e8;class EM{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ut(Qe),this.xs=new ha((o=>nv(o)),rv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function AM(n,e,t,r){return new EM(n,e,t,r)}async function UI(n,e){const t=Xe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const s=[],u=[];let c=nt();for(const f of i){s.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of o){u.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next((f=>({Ls:f,removedBatchIds:s,addedBatchIds:u})))}))}))}function jI(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function TM(n,e){const t=Xe(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const u=[];e.targetChanges.forEach(((d,p)=>{const v=i.get(p);if(!v)return;u.push(t.Pi.removeMatchingKeys(o,d.removedDocuments,p).next((()=>t.Pi.addMatchingKeys(o,d.addedDocuments,p))));let y=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(In.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(p,y),(function(T,C,b){return T.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=xM?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0})(v,y,d)&&u.push(t.Pi.updateTargetData(o,y))}));let c=cs(),f=nt();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))})),u.push(CM(o,s,e.documentUpdates).next((d=>{c=d.ks,f=d.qs}))),!r.isEqual(Me.min())){const d=t.Pi.getLastRemoteSnapshotVersion(o).next((p=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(d)}return ie.waitFor(u).next((()=>s.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,c,f))).next((()=>c))})).then((o=>(t.Ms=i,o)))}function CM(n,e,t){let r=nt(),i=nt();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let s=cs();return t.forEach(((u,c)=>{const f=o.get(u);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(Me.min())?(e.removeEntry(u,c.readTime),s=s.insert(u,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),s=s.insert(u,c)):me(fv,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",c.version)})),{ks:s,qs:i}}))}function IM(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((o=>o?(i=o,ie.resolve(i)):t.Pi.allocateTargetId(r).next((s=>(i=new Ko(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Cg(n,e,t){const r=Xe(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ku(s))throw s;me(fv,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function zx(n,e,t){const r=Xe(n);let i=Me.min(),o=nt();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,f,d){const p=Xe(c),v=p.xs.get(d);return v!==void 0?ie.resolve(p.Ms.get(v)):p.Pi.getTargetData(f,d)})(r,s,Ci(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,u.targetId).next((c=>{o=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:Me.min(),t?o:nt()))).next((u=>(SM(r,vk(e),u),{documents:u,Qs:o})))))}function SM(n,e,t){let r=n.Os.get(e)||Me.min();t.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class Hx{constructor(){this.activeTargetIds=Ak()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RM{constructor(){this.Mo=new Hx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Hx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="ConnectivityMonitor";class Wx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(Gx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(Gx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh=null;function Ig(){return Fh===null?Fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fh++,"0x"+Fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="RestConnection",bM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Sd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const s=Ig(),u=this.zo(e,t.toUriEncodedString());me(_1,`Sending RPC '${e}' ${s}:`,u,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);const{host:f}=new URL(u),d=Hu(f);return this.Jo(e,u,c,r,d).then((p=>(me(_1,`Received RPC '${e}' ${s}: `,p),p)),(p=>{throw Du(_1,`RPC '${e}' ${s} failed with error: `,p,"url: ",u,"request:",r),p}))}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$u})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,t){const r=bM[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="WebChannelConnection";class NM extends DM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const s=Ig();return new Promise(((u,c)=>{const f=new GC;f.setWithCredentials(!0),f.listenOnce(WC.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case rd.NO_ERROR:const p=f.getResponseJson();me(On,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),u(p);break;case rd.TIMEOUT:me(On,`RPC '${e}' ${s} timed out`),c(new de(ne.DEADLINE_EXCEEDED,"Request time out"));break;case rd.HTTP_ERROR:const v=f.getStatus();if(me(On,`RPC '${e}' ${s} failed with status:`,v,"response text:",f.getResponseText()),v>0){let y=f.getResponseJson();Array.isArray(y)&&(y=y[0]);const E=y?.error;if(E&&E.status&&E.message){const T=(function(b){const P=b.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(P)>=0?P:ne.UNKNOWN})(E.status);c(new de(T,E.message))}else c(new de(ne.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new de(ne.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{l_:e,streamId:s,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{me(On,`RPC '${e}' ${s} completed.`)}}));const d=JSON.stringify(i);me(On,`RPC '${e}' ${s} sending request:`,i),f.send(t,"POST",d,r,15)}))}T_(e,t,r){const i=Ig(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=qC(),u=KC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const d=o.join("");me(On,`Creating RPC '${e}' stream ${i}: ${d}`,c);const p=s.createWebChannel(d,c);this.I_(p);let v=!1,y=!1;const E=new OM({Yo:C=>{y?me(On,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(v||(me(On,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),me(On,`RPC '${e}' stream ${i} sending:`,C),p.send(C))},Zo:()=>p.close()}),T=(C,b,P)=>{C.listen(b,(D=>{try{P(D)}catch(F){setTimeout((()=>{throw F}),0)}}))};return T(p,tc.EventType.OPEN,(()=>{y||(me(On,`RPC '${e}' stream ${i} transport opened.`),E.o_())})),T(p,tc.EventType.CLOSE,(()=>{y||(y=!0,me(On,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(p))})),T(p,tc.EventType.ERROR,(C=>{y||(y=!0,Du(On,`RPC '${e}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),E.a_(new de(ne.UNAVAILABLE,"The operation could not be completed")))})),T(p,tc.EventType.MESSAGE,(C=>{if(!y){const b=C.data[0];mt(!!b,16349);const P=b,D=P?.error||P[0]?.error;if(D){me(On,`RPC '${e}' stream ${i} received error:`,D);const F=D.status;let j=(function(I){const O=Wt[I];if(O!==void 0)return RI(O)})(F),W=D.message;j===void 0&&(j=ne.INTERNAL,W="Unknown error status: "+F+" with message "+D.message),y=!0,E.a_(new de(j,W)),p.close()}else me(On,`RPC '${e}' stream ${i} received:`,b),E.u_(b)}})),T(u,$C.STAT_EVENT,(C=>{C.stat===mg.PROXY?me(On,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===mg.NOPROXY&&me(On,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function w1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(n){return new Bk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="PersistentStream";class kM{constructor(e,t,r,i,o,s,u,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(oo(t.toString()),oo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new de(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me($x,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(me($x,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class MM extends kM{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Hk(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Me.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Me.min():s.readTime?eo(s.readTime):Me.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Fx(this.serializer),t.addTarget=(function(o,s){let u;const c=s.target;if(u=xg(c)?{documents:Wk(o,c)}:{query:$k(o,c).ft},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=DI(o,s.resumeToken);const f=Ag(o,s.expectedCount);f!==null&&(u.expectedCount=f)}else if(s.snapshotVersion.compareTo(Me.min())>0){u.readTime=Dd(o,s.snapshotVersion.toTimestamp());const f=Ag(o,s.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=qk(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Fx(this.serializer),t.removeTarget=e,this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{}class FM extends LM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new de(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,s])=>this.connection.Go(e,Tg(t,r),i,o,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(ne.UNKNOWN,o.toString())}))}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,u])=>this.connection.Ho(e,Tg(t,r),i,s,u,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new de(ne.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class VM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(oo(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu="RemoteStore";class BM{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{sf(this)&&(me(Lu,"Restarting streams for network reachability change."),await(async function(c){const f=Xe(c);f.Ea.add(4),await of(f),f.Ra.set("Unknown"),f.Ea.delete(4),await op(f)})(this))}))})),this.Ra=new VM(r,i)}}async function op(n){if(sf(n))for(const e of n.da)await e(!0)}async function of(n){for(const e of n.da)await e(!1)}function zI(n,e){const t=Xe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),mv(t)?gv(t):Xu(t).O_()&&pv(t,e))}function dv(n,e){const t=Xe(n),r=Xu(t);t.Ia.delete(e),r.O_()&&HI(t,e),t.Ia.size===0&&(r.O_()?r.L_():sf(t)&&t.Ra.set("Unknown"))}function pv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xu(n).Y_(e)}function HI(n,e){n.Va.Ue(e),Xu(n).Z_(e)}function gv(n){n.Va=new Mk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Xu(n).start(),n.Ra.ua()}function mv(n){return sf(n)&&!Xu(n).x_()&&n.Ia.size>0}function sf(n){return Xe(n).Ea.size===0}function GI(n){n.Va=void 0}async function UM(n){n.Ra.set("Online")}async function jM(n){n.Ia.forEach(((e,t)=>{pv(n,e)}))}async function zM(n,e){GI(n),mv(n)?(n.Ra.ha(e),gv(n)):n.Ra.set("Unknown")}async function HM(n,e,t){if(n.Ra.set("Online"),e instanceof bI&&e.state===2&&e.cause)try{await(async function(i,o){const s=o.cause;for(const u of o.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,s),i.Ia.delete(u),i.Va.removeTarget(u))})(n,e)}catch(r){me(Lu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kx(n,r)}else if(e instanceof sd?n.Va.Ze(e):e instanceof PI?n.Va.st(e):n.Va.tt(e),!t.isEqual(Me.min()))try{const r=await jI(n.localStore);t.compareTo(r)>=0&&await(function(o,s){const u=o.Va.Tt(s);return u.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=o.Ia.get(f);d&&o.Ia.set(f,d.withResumeToken(c.resumeToken,s))}})),u.targetMismatches.forEach(((c,f)=>{const d=o.Ia.get(c);if(!d)return;o.Ia.set(c,d.withResumeToken(In.EMPTY_BYTE_STRING,d.snapshotVersion)),HI(o,c);const p=new Ko(d.target,c,f,d.sequenceNumber);pv(o,p)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){me(Lu,"Failed to raise snapshot:",r),await Kx(n,r)}}async function Kx(n,e,t){if(!Ku(e))throw e;n.Ea.add(1),await of(n),n.Ra.set("Offline"),t||(t=()=>jI(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{me(Lu,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await op(n)}))}async function qx(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),me(Lu,"RemoteStore received new credentials");const r=sf(t);t.Ea.add(3),await of(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await op(t)}async function GM(n,e){const t=Xe(n);e?(t.Ea.delete(2),await op(t)):e||(t.Ea.add(2),await of(t),t.Ra.set("Unknown"))}function Xu(n){return n.ma||(n.ma=(function(t,r,i){const o=Xe(t);return o.sa(),new MM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:UM.bind(null,n),t_:jM.bind(null,n),r_:zM.bind(null,n),H_:HM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),mv(n)?gv(n):n.Ra.set("Unknown")):(await n.ma.stop(),GI(n))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Jo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,u=new vv(e,t,s,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function WI(n,e){if(oo("AsyncQueue",`${e}: ${n}`),Ku(n))return new de(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{static emptySet(e){return new Tu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=nc(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Tu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.ga=new Ut(Se.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Pe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Fu{constructor(e,t,r,i,o,s,u,c,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach((u=>{s.push({type:0,doc:u})})),new Fu(e,t,Tu.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class $M{constructor(){this.queries=Yx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Xe(t),o=i.queries;i.queries=Yx(),o.forEach(((s,u)=>{for(const c of u.Sa)c.onError(r)}))})(this,new de(ne.ABORTED,"Firestore shutting down"))}}function Yx(){return new ha((n=>gI(n)),Jd)}async function $I(n,e){const t=Xe(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new WM,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const u=WI(s,`Initialization of query '${su(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&yv(t)}async function KI(n,e){const t=Xe(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function KM(n,e){const t=Xe(n);let r=!1;for(const i of e){const o=i.query,s=t.queries.get(o);if(s){for(const u of s.Sa)u.Fa(i)&&(r=!0);s.wa=i}}r&&yv(t)}function qM(n,e,t){const r=Xe(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function yv(n){n.Ca.forEach((e=>{e.next()}))}var Sg,Qx;(Qx=Sg||(Sg={})).Ma="default",Qx.Cache="cache";class qI{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Fu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Fu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Sg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.key=e}}class YI{constructor(e){this.key=e}}class XM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=nt(),this.mutatedKeys=nt(),this.eu=mI(e),this.tu=new Tu(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Xx,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((d,p)=>{const v=i.get(d),y=ep(this.query,p)?p:null,E=!!v&&this.mutatedKeys.has(v.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let C=!1;v&&y?v.data.isEqual(y.data)?E!==T&&(r.track({type:3,doc:y}),C=!0):this.su(v,y)||(r.track({type:2,doc:y}),C=!0,(c&&this.eu(y,c)>0||f&&this.eu(y,f)<0)&&(u=!0)):!v&&y?(r.track({type:0,doc:y}),C=!0):v&&!y&&(r.track({type:1,doc:v}),C=!0,(c||f)&&(u=!0)),C&&(y?(s=s.add(y),o=T?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{tu:s,iu:r,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((d,p)=>(function(y,E){const T=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Rt:C})}};return T(y)-T(E)})(d.type,p.type)||this.eu(d.doc,p.doc))),this.ou(r),i=i??!1;const u=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,f=c!==this.Za;return this.Za=c,s.length!==0||f?{snapshot:new Fu(this.query,e.tu,o,s,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Xx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=nt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new YI(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new XI(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=nt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Fu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _v="SyncEngine";class YM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class QM{constructor(e){this.key=e,this.hu=!1}}class ZM{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ha((u=>gI(u)),Jd),this.Iu=new Map,this.Eu=new Set,this.du=new Ut(Se.comparator),this.Au=new Map,this.Ru=new uv,this.Vu={},this.mu=new Map,this.fu=Mu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function JM(n,e,t=!0){const r=tS(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await QI(r,e,t,!0),i}async function e9(n,e){const t=tS(n);await QI(t,e,!0,!1)}async function QI(n,e,t,r){const i=await IM(n.localStore,Ci(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await t9(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&zI(n.remoteStore,i),u}async function t9(n,e,t,r,i){n.pu=(p,v,y)=>(async function(T,C,b,P){let D=C.view.ru(b);D.Cs&&(D=await zx(T.localStore,C.query,!1).then((({documents:R})=>C.view.ru(R,D))));const F=P&&P.targetChanges.get(C.targetId),j=P&&P.targetMismatches.get(C.targetId)!=null,W=C.view.applyChanges(D,T.isPrimaryClient,F,j);return Jx(T,C.targetId,W.au),W.snapshot})(n,p,v,y);const o=await zx(n.localStore,e,!0),s=new XM(e,o.Qs),u=s.ru(o.documents),c=rf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=s.applyChanges(u,n.isPrimaryClient,c);Jx(n,t,f.au);const d=new YM(e,t,s);return n.Tu.set(e,d),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function n9(n,e,t){const r=Xe(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((s=>!Jd(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Cg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&dv(r.remoteStore,i.targetId),Rg(r,i.targetId)})).catch(Xd)):(Rg(r,i.targetId),await Cg(r.localStore,i.targetId,!0))}async function r9(n,e){const t=Xe(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),dv(t.remoteStore,r.targetId))}async function ZI(n,e){const t=Xe(n);try{const r=await TM(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const s=t.Au.get(o);s&&(mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?mt(s.hu,14607):i.removedDocuments.size>0&&(mt(s.hu,42227),s.hu=!1))})),await eS(t,r,e)}catch(r){await Xd(r)}}function Zx(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((o,s)=>{const u=s.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(s,u){const c=Xe(s);c.onlineState=u;let f=!1;c.queries.forEach(((d,p)=>{for(const v of p.Sa)v.va(u)&&(f=!0)})),f&&yv(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function i9(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ut(Se.comparator);s=s.insert(o,dn.newNoDocument(o,Me.min()));const u=nt().add(o),c=new rp(Me.min(),new Map,new Ut(Qe),s,u);await ZI(r,c),r.du=r.du.remove(o),r.Au.delete(e),wv(r)}else await Cg(r.localStore,e,!1).then((()=>Rg(r,e,t))).catch(Xd)}function Rg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||JI(n,r)}))}function JI(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(dv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),wv(n))}function Jx(n,e,t){for(const r of t)r instanceof XI?(n.Ru.addReference(r.key,e),o9(n,r)):r instanceof YI?(me(_v,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||JI(n,r.key)):Pe(19791,{wu:r})}function o9(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(me(_v,"New document in limbo: "+t),n.Eu.add(r),wv(n))}function wv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Se(pt.fromString(e)),r=n.fu.next();n.Au.set(r,new QM(t)),n.du=n.du.insert(t,r),zI(n.remoteStore,new Ko(Ci(Zd(t.path)),r,"TargetPurposeLimboResolution",Yd.ce))}}async function eS(n,e,t){const r=Xe(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,c)=>{s.push(r.pu(c,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const d=f?!f.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(f){i.push(f);const d=cv.As(c.targetId,f);o.push(d)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(c,f){const d=Xe(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>ie.forEach(f,(v=>ie.forEach(v.Es,(y=>d.persistence.referenceDelegate.addReference(p,v.targetId,y))).next((()=>ie.forEach(v.ds,(y=>d.persistence.referenceDelegate.removeReference(p,v.targetId,y)))))))))}catch(p){if(!Ku(p))throw p;me(fv,"Failed to update sequence numbers: "+p)}for(const p of f){const v=p.targetId;if(!p.fromCache){const y=d.Ms.get(v),E=y.snapshotVersion,T=y.withLastLimboFreeSnapshotVersion(E);d.Ms=d.Ms.insert(v,T)}}})(r.localStore,o))}async function s9(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){me(_v,"User change. New user:",e.toKey());const r=await UI(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach((u=>{u.forEach((c=>{c.reject(new de(ne.CANCELLED,s))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await eS(t,r.Ls)}}function a9(n,e){const t=Xe(n),r=t.Au.get(e);if(r&&r.hu)return nt().add(r.key);{let i=nt();const o=t.Iu.get(e);if(!o)return i;for(const s of o){const u=t.Tu.get(s);i=i.unionWith(u.view.nu)}return i}}function tS(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i9.bind(null,e),e.Pu.H_=KM.bind(null,e.eventManager),e.Pu.yu=qM.bind(null,e.eventManager),e}class kd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ip(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return AM(this.persistence,new wM,e.initialUser,this.serializer)}Cu(e){return new BI(lv.mi,this.serializer)}Du(e){return new RM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kd.provider={build:()=>new kd};class u9 extends kd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){mt(this.persistence.referenceDelegate instanceof Nd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new oM(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Zn.withCacheSize(this.cacheSizeBytes):Zn.DEFAULT;return new BI((r=>Nd.mi(r,t)),this.serializer)}}class Pg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Zx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=s9.bind(null,this.syncEngine),await GM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $M})()}createDatastore(e){const t=ip(e.databaseInfo.databaseId),r=(function(o){return new NM(o)})(e.databaseInfo);return(function(o,s,u,c){return new FM(o,s,u,c)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,o,s,u){return new BM(r,i,o,s,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>Zx(this.syncEngine,t,0)),(function(){return Wx.v()?new Wx:new PM})())}createSyncEngine(e,t){return(function(i,o,s,u,c,f,d){const p=new ZM(i,o,s,u,c,f);return d&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Xe(t);me(Lu,"RemoteStore shutting down."),r.Ea.add(5),await of(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Pg.provider={build:()=>new Pg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):oo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new de(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,o){const s=Xe(i),u={documents:o.map((p=>Od(s.serializer,p)))},c=await s.Ho("BatchGetDocuments",s.serializer.databaseId,pt.emptyPath(),u,o.length),f=new Map;c.forEach((p=>{const v=zk(s.serializer,p);f.set(v.key.toString(),v)}));const d=[];return o.forEach((p=>{const v=f.get(p.toString());mt(!!v,55234,{key:p}),d.push(v)})),d})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ov(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=Se.fromPath(r);this.mutations.push(new SI(i,this.precondition(i)))})),await(async function(r,i){const o=Xe(r),s={writes:i.map((u=>Gk(o.serializer,u)))};await o.Go("Commit",o.serializer.databaseId,pt.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Pe(50498,{Gu:e.constructor.name});t=Me.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new de(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Me.min())?Sr.exists(!1):Sr.updateTime(t):Sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Me.min()))throw new de(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sr.updateTime(t)}return Sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new hv(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new l9(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!tf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Ok(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="FirestoreClient";class f9{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=kn.UNAUTHENTICATED,this.clientId=Jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async s=>{me(fs,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(me(fs,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=WI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function x1(n,e){n.asyncQueue.verifyOperationInProgress(),me(fs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await UI(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function eE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await h9(n);me(fs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>qx(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>qx(e.remoteStore,i))),n._onlineComponents=e}async function h9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(fs,"Using user provided OfflineComponentProvider");try{await x1(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Du("Error using user provided cache. Falling back to memory cache: "+t),await x1(n,new kd)}}else me(fs,"Using default OfflineComponentProvider"),await x1(n,new u9(void 0));return n._offlineComponents}async function rS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(fs,"Using user provided OnlineComponentProvider"),await eE(n,n._uninitializedComponentsProvider._online)):(me(fs,"Using default OnlineComponentProvider"),await eE(n,new Pg))),n._onlineComponents}function d9(n){return rS(n).then((e=>e.datastore))}async function bg(n){const e=await rS(n),t=e.eventManager;return t.onListen=JM.bind(null,e.syncEngine),t.onUnlisten=n9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=e9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=r9.bind(null,e.syncEngine),t}function p9(n,e,t={}){const r=new Jo;return n.asyncQueue.enqueueAndForget((async()=>(function(o,s,u,c,f){const d=new nS({next:v=>{d.Nu(),s.enqueueAndForget((()=>KI(o,p)));const y=v.docs.has(u);!y&&v.fromCache?f.reject(new de(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&v.fromCache&&c&&c.source==="server"?f.reject(new de(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),p=new qI(Zd(u.path),d,{includeMetadataChanges:!0,qa:!0});return $I(o,p)})(await bg(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="firestore.googleapis.com",nE=!0;class rE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oS,this.ssl=nE}else this.host=e.host,this.ssl=e.ssl??nE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rM)throw new de(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}z5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new O5;switch(r.type){case"firstParty":return new L5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=tE.get(t);r&&(me("ComponentProvider","Removing Datastore"),tE.delete(t),r.terminate())})(this),Promise.resolve()}}function g9(n,e,t,r={}){n=na(n,sp);const i=Hu(e),o=n._getSettings(),s={...o,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;i&&(rC(`https://${u}`),iC("Firestore",!0)),o.host!==oS&&o.host!==u&&Du("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:u,ssl:i,emulatorOptions:r};if(!oa(c,s)&&(n._setSettings(c),r.mockUserToken)){let f,d;if(typeof r.mockUserToken=="string")f=r.mockUserToken,d=kn.MOCK_USER;else{f=nD(r.mockUserToken,n._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new de(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new kn(p)}n._authCredentials=new N5(new YC(f,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ds(this.firestore,e,this._query)}}class Bt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ef(t,Bt._jsonSchema))return new Bt(e,r||null,new Se(pt.fromString(t.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:qt("string",Bt._jsonSchemaVersion),referencePath:qt("string")};class es extends ds{constructor(e,t,r){super(e,t,Zd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new Se(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function xv(n,e,...t){if(n=sn(n),QC("collection","path",e),n instanceof sp){const r=pt.fromString(e,...t);return px(r),new es(n,null,r)}{if(!(n instanceof Bt||n instanceof es))throw new de(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return px(r),new es(n.firestore,null,r)}}function xc(n,e,...t){if(n=sn(n),arguments.length===1&&(e=Jm.newId()),QC("doc","path",e),n instanceof sp){const r=pt.fromString(e,...t);return dx(r),new Bt(n,null,new Se(r))}{if(!(n instanceof Bt||n instanceof es))throw new de(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return dx(r),new Bt(n.firestore,n instanceof es?n.converter:null,new Se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="AsyncQueue";class oE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hv(this,"async_queue_retry"),this._c=()=>{const r=w1();r&&me(iE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=w1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=w1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Jo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ku(e))throw e;me(iE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,oo("INTERNAL UNHANDLED ERROR: ",sE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=vv.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Pe(47125,{Pc:sE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function sE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}class jc extends sp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new oE,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new oE(e),this._firestoreClient=void 0,await e}}}function m9(n,e){const t=typeof n=="object"?n:uC(),r=typeof n=="string"?n:Sd,i=jm(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=eD("firestore");o&&g9(i,...o)}return i}function Ev(n){if(n._terminated)throw new de(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||v9(n),n._firestoreClient}function v9(n){const e=n._freezeSettings(),t=(function(i,o,s,u){return new tk(i,o,s,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,iS(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new f9(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hr(In.fromBase64String(e))}catch(t){throw new de(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new hr(In.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ef(e,hr._jsonSchema))return hr.fromBase64String(e.bytes)}}hr._jsonSchemaVersion="firestore/bytes/1.0",hr._jsonSchema={type:qt("string",hr._jsonSchemaVersion),bytes:qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ii._jsonSchemaVersion}}static fromJSON(e){if(ef(e,Ii._jsonSchema))return new Ii(e.latitude,e.longitude)}}Ii._jsonSchemaVersion="firestore/geoPoint/1.0",Ii._jsonSchema={type:qt("string",Ii._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ef(e,Si._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Si(e.vectorValues);throw new de(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Si._jsonSchemaVersion="firestore/vectorValue/1.0",Si._jsonSchema={type:qt("string",Si._jsonSchemaVersion),vectorValues:qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=/^__.*__$/;class _9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new da(e,this.data,this.fieldMask,t,this.fieldTransforms):new nf(e,this.data,t,this.fieldTransforms)}}class sS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new da(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{Ac:n})}}class Av{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Av({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Md(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(aS(this.Ac)&&y9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class w9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ip(e)}Cc(e,t,r,i=!1){return new Av({Ac:e,methodName:t,Dc:r,path:Mn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uS(n){const e=n._freezeSettings(),t=ip(n._databaseId);return new w9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function x9(n,e,t,r,i,o={}){const s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);Iv("Data must be an object, but it was:",s,r);const u=lS(r,s);let c,f;if(o.merge)c=new Pr(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const p of o.mergeFields){const v=Dg(e,p,t);if(!s.contains(v))throw new de(ne.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);fS(d,v)||d.push(v)}c=new Pr(d),f=s.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,f=s.fieldTransforms;return new _9(new Jn(u),c,f)}class up extends af{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof up}}class Tv extends af{_toFieldTransform(e){return new TI(e.path,new Fc)}isEqual(e){return e instanceof Tv}}class Cv extends af{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Uc(e.serializer,wI(e.serializer,this.Fc));return new TI(e.path,t)}isEqual(e){return e instanceof Cv&&this.Fc===e.Fc}}function E9(n,e,t,r){const i=n.Cc(1,e,t);Iv("Data must be an object, but it was:",i,r);const o=[],s=Jn.empty();fa(r,((c,f)=>{const d=Sv(e,c,t);f=sn(f);const p=i.yc(d);if(f instanceof up)o.push(d);else{const v=uf(f,p);v!=null&&(o.push(d),s.set(d,v))}}));const u=new Pr(o);return new sS(s,u,i.fieldTransforms)}function A9(n,e,t,r,i,o){const s=n.Cc(1,e,t),u=[Dg(e,r,t)],c=[i];if(o.length%2!=0)throw new de(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(Dg(e,o[v])),c.push(o[v+1]);const f=[],d=Jn.empty();for(let v=u.length-1;v>=0;--v)if(!fS(f,u[v])){const y=u[v];let E=c[v];E=sn(E);const T=s.yc(y);if(E instanceof up)f.push(y);else{const C=uf(E,T);C!=null&&(f.push(y),d.set(y,C))}}const p=new Pr(f);return new sS(d,p,s.fieldTransforms)}function T9(n,e,t,r=!1){return uf(t,n.Cc(r?4:3,e))}function uf(n,e){if(cS(n=sn(n)))return Iv("Unsupported field value:",e,n),lS(n,e);if(n instanceof af)return(function(r,i){if(!aS(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let s=0;for(const u of r){let c=uf(u,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ct.fromDate(r);return{timestampValue:Dd(i.serializer,o)}}if(r instanceof Ct){const o=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dd(i.serializer,o)}}if(r instanceof Ii)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hr)return{bytesValue:DI(i.serializer,r._byteString)};if(r instanceof Bt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:av(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Si)return(function(s,u){return{mapValue:{fields:{[sI]:{stringValue:aI},[Rd]:{arrayValue:{values:s.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return iv(u.serializer,f)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${qd(r)}`)})(n,e)}function lS(n,e){const t={};return eI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fa(n,((r,i)=>{const o=uf(i,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function cS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ct||n instanceof Ii||n instanceof hr||n instanceof Bt||n instanceof af||n instanceof Si)}function Iv(n,e,t){if(!cS(t)||!ZC(t)){const r=qd(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Dg(n,e,t){if((e=sn(e))instanceof ap)return e._internalPath;if(typeof e=="string")return Sv(n,e);throw Md("Field path arguments must be of type string or ",n,!1,void 0,t)}const C9=new RegExp("[~\\*/\\[\\]]");function Sv(n,e,t){if(e.search(C9)>=0)throw Md(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ap(...e.split("."))._internalPath}catch{throw Md(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Md(n,e,t,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new de(ne.INVALID_ARGUMENT,u+n+c)}function fS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class I9 extends Ld{data(){return super.data()}}function lp(n,e){return typeof e=="string"?Sv(n,e):e instanceof ap?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rv{}class Pv extends Rv{}function Og(n,e,...t){let r=[];e instanceof Rv&&r.push(e),r=r.concat(t),(function(o){const s=o.filter((c=>c instanceof bv)).length,u=o.filter((c=>c instanceof cp)).length;if(s>1||s>0&&u>0)throw new de(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class cp extends Pv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new cp(e,t,r)}_apply(e){const t=this._parse(e);return hS(e._query,t),new ds(e.firestore,e.converter,Eg(e._query,t))}_parse(e){const t=uS(e.firestore);return(function(o,s,u,c,f,d,p){let v;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new de(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){cE(p,d);const E=[];for(const T of p)E.push(lE(c,o,T));v={arrayValue:{values:E}}}else v=lE(c,o,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||cE(p,d),v=T9(u,s,p,d==="in"||d==="not-in");return Kt.create(f,d,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function uE(n,e,t){const r=e,i=lp("where",n);return cp._create(i,r,t)}class bv extends Rv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Zr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i;const u=o.getFlattenedFilters();for(const c of u)hS(s,c),s=Eg(s,c)})(e._query,t),new ds(e.firestore,e.converter,Eg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Dv extends Pv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Dv(e,t)}_apply(e){const t=(function(i,o,s){if(i.startAt!==null)throw new de(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new de(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lc(o,s)})(e._query,this._field,this._direction);return new ds(e.firestore,e.converter,(function(i,o){const s=i.explicitOrderBy.concat([o]);return new qu(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function R9(n,e="asc"){const t=e,r=lp("orderBy",n);return Dv._create(r,t)}class Ov extends Pv{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ov(e,t,r)}_apply(e){return new ds(e.firestore,e.converter,bd(e._query,this._limit,this._limitType))}}function P9(n){return H5("limit",n),Ov._create("limit",n,"F")}function lE(n,e,t){if(typeof(t=sn(t))=="string"){if(t==="")throw new de(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pI(e)&&t.indexOf("/")!==-1)throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pt.fromString(t));if(!Se.isDocumentKey(r))throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ex(n,new Se(r))}if(t instanceof Bt)return Ex(n,t._key);throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qd(t)}.`)}function cE(n,e){if(!Array.isArray(n)||n.length===0)throw new de(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hS(n,e){const t=(function(i,o){for(const s of i)for(const u of s.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class dS{convertValue(e,t="none"){switch(ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return fa(e,((i,o)=>{r[i]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[Rd].arrayValue?.values?.map((r=>Vt(r.doubleValue)));return new Si(t)}convertGeoPoint(e){return new Ii(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Qd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nc(e));default:return null}}convertTimestamp(e){const t=as(e);return new Ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pt.fromString(e);mt(FI(r),9688,{name:e});const i=new kc(r.get(1),r.get(3)),o=new Se(r.popFirst(5));return i.isEqual(t)||oo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class D9 extends dS{constructor(e){super(),this.firestore=e}convertBytes(e){return new hr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,t)}}class pu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ts extends Ld{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ad(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(lp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ts._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ts._jsonSchemaVersion="firestore/documentSnapshot/1.0",ts._jsonSchema={type:qt("string",ts._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};class ad extends ts{data(e={}){return super.data(e)}}class Cu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new ad(this._firestore,this._userDataWriter,r.key,r,new pu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((u=>{const c=new ad(i._firestore,i._userDataWriter,u.doc.key,u.doc,new pu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const c=new ad(i._firestore,i._userDataWriter,u.doc.key,u.doc,new pu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,d=-1;return u.type!==0&&(f=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),u.type!==1&&(s=s.add(u.doc),d=s.indexOf(u.doc.key)),{type:O9(u.type),doc:c,oldIndex:f,newIndex:d}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Cu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function O9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N9(n){n=na(n,Bt);const e=na(n.firestore,jc);return p9(Ev(e),n._key).then((t=>pS(e,n,t)))}Cu._jsonSchemaVersion="firestore/querySnapshot/1.0",Cu._jsonSchema={type:qt("string",Cu._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};class Nv extends dS{constructor(e){super(),this.firestore=e}convertBytes(e){return new hr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,t)}}function kv(n,...e){n=sn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||aE(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(aE(e[r])){const c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let o,s,u;if(n instanceof Bt)s=na(n.firestore,jc),u=Zd(n._key.path),o={next:c=>{e[r]&&e[r](pS(s,n,c))},error:e[r+1],complete:e[r+2]};else{const c=na(n,ds);s=na(c.firestore,jc),u=c._query;const f=new Nv(s);o={next:d=>{e[r]&&e[r](new Cu(s,f,c,d))},error:e[r+1],complete:e[r+2]},S9(n._query)}return(function(f,d,p,v){const y=new nS(v),E=new qI(d,y,p);return f.asyncQueue.enqueueAndForget((async()=>$I(await bg(f),E))),()=>{y.Nu(),f.asyncQueue.enqueueAndForget((async()=>KI(await bg(f),E)))}})(Ev(s),u,i,o)}function pS(n,e,t){const r=t.docs.get(e._key),i=new Nv(n);return new ts(n,i,e._key,r,new pu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9={maxAttempts:5};function ic(n,e){if((n=sn(n)).firestore!==e)throw new de(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=uS(e)}get(e){const t=ic(e,this._firestore),r=new D9(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return Pe(24041);const o=i[0];if(o.isFoundDocument())return new Ld(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Ld(this._firestore,r,t._key,null,t.converter);throw Pe(18433,{doc:o})}))}set(e,t,r){const i=ic(e,this._firestore),o=b9(i.converter,t,r),s=x9(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){const o=ic(e,this._firestore);let s;return s=typeof(t=sn(t))=="string"||t instanceof ap?A9(this._dataReader,"Transaction.update",o._key,t,r,i):E9(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){const t=ic(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9 extends M9{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ic(e,this._firestore),r=new Nv(this._firestore);return super.get(e).then((i=>new ts(this._firestore,r,t._key,i._document,new pu(!1,!1),t.converter)))}}function F9(n,e,t){n=na(n,jc);const r={...k9,...t};return(function(o){if(o.maxAttempts<1)throw new de(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,u){const c=new Jo;return o.asyncQueue.enqueueAndForget((async()=>{const f=await d9(o);new c9(o.asyncQueue,f,u,s,c).ju()})),c.promise})(Ev(n),(i=>e(new L9(n,i))),r)}function Vh(){return new Tv("serverTimestamp")}function V9(n){return new Cv("increment",n)}(function(e,t=!0){(function(i){$u=i})(Gu),Pu(new sa("firestore",((r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),u=new jc(new k5(r.getProvider("auth-internal")),new F5(s,r.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new de(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kc(f.options.projectId,d)})(s,i),s);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Yo(lx,cx,e),Yo(lx,cx,"esm2020")})();const Ng={apiKey:"AIzaSyCEP8h9z4pW9NIV3qEd2XrrAOGkkgZGAiQ",authDomain:"borealabsweb.firebaseapp.com",projectId:"borealabsweb",storageBucket:"borealabsweb.appspot.com",messagingSenderId:"338356857449",appId:"1:338356857449:web:6e6515fa93bb8d4c1390f8"},B9=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"];let gu=B9.every(n=>typeof Ng[n]=="string"&&Ng[n].length>0),E1=null,ra=null,Yr=null,Ec=null;try{if(gu){E1=aC(Ng),ra=R5(E1),Yr=m9(E1),Ec=new Qi;try{Ec.setCustomParameters({prompt:"select_account"})}catch{}}else console.warn("Firebase no configurado: faltan variables en .env (VITE_FIREBASE_*)")}catch(n){console.error("Error inicializando Firebase:",n),gu=!1}function fE(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function gS(...n){return e=>{let t=!1;const r=n.map(i=>{const o=fE(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():fE(n[i],null)}}}}function la(...n){return U.useCallback(gS(...n),n)}function Fd(n){const e=j9(n),t=U.forwardRef((r,i)=>{const{children:o,...s}=r,u=U.Children.toArray(o),c=u.find(H9);if(c){const f=c.props.children,d=u.map(p=>p===c?U.Children.count(f)>1?U.Children.only(null):U.isValidElement(f)?f.props.children:null:p);return G.jsx(e,{...s,ref:i,children:U.isValidElement(f)?U.cloneElement(f,void 0,d):null})}return G.jsx(e,{...s,ref:i,children:o})});return t.displayName=`${n}.Slot`,t}var U9=Fd("Slot");function j9(n){const e=U.forwardRef((t,r)=>{const{children:i,...o}=t;if(U.isValidElement(i)){const s=W9(i),u=G9(o,i.props);return i.type!==U.Fragment&&(u.ref=r?gS(r,s):s),U.cloneElement(i,u)}return U.Children.count(i)>1?U.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var z9=Symbol("radix.slottable");function H9(n){return U.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===z9}function G9(n,e){const t={...e};for(const r in e){const i=n[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?t[r]=(...u)=>{const c=o(...u);return i(...u),c}:i&&(t[r]=i):r==="style"?t[r]={...i,...o}:r==="className"&&(t[r]=[i,o].filter(Boolean).join(" "))}return{...n,...t}}function W9(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function mS(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=mS(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function vS(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=mS(n))&&(r&&(r+=" "),r+=e);return r}const hE=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,dE=vS,yS=(n,e)=>t=>{var r;if(e?.variants==null)return dE(n,t?.class,t?.className);const{variants:i,defaultVariants:o}=e,s=Object.keys(i).map(f=>{const d=t?.[f],p=o?.[f];if(d===null)return null;const v=hE(d)||hE(p);return i[f][v]}),u=t&&Object.entries(t).reduce((f,d)=>{let[p,v]=d;return v===void 0||(f[p]=v),f},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,d)=>{let{class:p,className:v,...y}=d;return Object.entries(y).every(E=>{let[T,C]=E;return Array.isArray(C)?C.includes({...o,...u}[T]):{...o,...u}[T]===C})?[...f,p,v]:f},[]);return dE(n,s,c,t?.class,t?.className)},Mv="-",$9=n=>{const e=q9(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:s=>{const u=s.split(Mv);return u[0]===""&&u.length!==1&&u.shift(),_S(u,e)||K9(s)},getConflictingClassGroupIds:(s,u)=>{const c=t[s]||[];return u&&r[s]?[...c,...r[s]]:c}}},_S=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?_S(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=n.join(Mv);return e.validators.find(({validator:s})=>s(o))?.classGroupId},pE=/^\[(.+)\]$/,K9=n=>{if(pE.test(n)){const e=pE.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},q9=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)kg(t[i],r,i,e);return r},kg=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const o=i===""?e:gE(e,i);o.classGroupId=t;return}if(typeof i=="function"){if(X9(i)){kg(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([o,s])=>{kg(s,gE(e,o),t,r)})})},gE=(n,e)=>{let t=n;return e.split(Mv).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},X9=n=>n.isThemeGetter,Y9=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(o,s)=>{t.set(o,s),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let s=t.get(o);if(s!==void 0)return s;if((s=r.get(o))!==void 0)return i(o,s),s},set(o,s){t.has(o)?t.set(o,s):i(o,s)}}},Mg="!",Lg=":",Q9=Lg.length,Z9=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const o=[];let s=0,u=0,c=0,f;for(let E=0;E<i.length;E++){let T=i[E];if(s===0&&u===0){if(T===Lg){o.push(i.slice(c,E)),c=E+Q9;continue}if(T==="/"){f=E;continue}}T==="["?s++:T==="]"?s--:T==="("?u++:T===")"&&u--}const d=o.length===0?i:i.substring(c),p=J9(d),v=p!==d,y=f&&f>c?f-c:void 0;return{modifiers:o,hasImportantModifier:v,baseClassName:p,maybePostfixModifierPosition:y}};if(e){const i=e+Lg,o=r;r=s=>s.startsWith(i)?o(s.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=o=>t({className:o,parseClassName:i})}return r},J9=n=>n.endsWith(Mg)?n.substring(0,n.length-1):n.startsWith(Mg)?n.substring(1):n,e7=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(s=>{s[0]==="["||e[s]?(i.push(...o.sort(),s),o=[]):o.push(s)}),i.push(...o.sort()),i}},t7=n=>({cache:Y9(n.cacheSize),parseClassName:Z9(n),sortModifiers:e7(n),...$9(n)}),n7=/\s+/,r7=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,s=[],u=n.trim().split(n7);let c="";for(let f=u.length-1;f>=0;f-=1){const d=u[f],{isExternal:p,modifiers:v,hasImportantModifier:y,baseClassName:E,maybePostfixModifierPosition:T}=t(d);if(p){c=d+(c.length>0?" "+c:c);continue}let C=!!T,b=r(C?E.substring(0,T):E);if(!b){if(!C){c=d+(c.length>0?" "+c:c);continue}if(b=r(E),!b){c=d+(c.length>0?" "+c:c);continue}C=!1}const P=o(v).join(":"),D=y?P+Mg:P,F=D+b;if(s.includes(F))continue;s.push(F);const j=i(b,C);for(let W=0;W<j.length;++W){const R=j[W];s.push(D+R)}c=d+(c.length>0?" "+c:c)}return c};function i7(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=wS(e))&&(r&&(r+=" "),r+=t);return r}const wS=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=wS(n[r]))&&(t&&(t+=" "),t+=e);return t};function o7(n,...e){let t,r,i,o=s;function s(c){const f=e.reduce((d,p)=>p(d),n());return t=t7(f),r=t.cache.get,i=t.cache.set,o=u,u(c)}function u(c){const f=r(c);if(f)return f;const d=r7(c,t);return i(c,d),d}return function(){return o(i7.apply(null,arguments))}}const Qt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},xS=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ES=/^\((?:(\w[\w-]*):)?(.+)\)$/i,s7=/^\d+\/\d+$/,a7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,u7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,l7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,c7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,f7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ru=n=>s7.test(n),He=n=>!!n&&!Number.isNaN(Number(n)),Bo=n=>!!n&&Number.isInteger(Number(n)),A1=n=>n.endsWith("%")&&He(n.slice(0,-1)),Yi=n=>a7.test(n),h7=()=>!0,d7=n=>u7.test(n)&&!l7.test(n),AS=()=>!1,p7=n=>c7.test(n),g7=n=>f7.test(n),m7=n=>!_e(n)&&!we(n),v7=n=>Yu(n,IS,AS),_e=n=>xS.test(n),Hs=n=>Yu(n,SS,d7),T1=n=>Yu(n,E7,He),mE=n=>Yu(n,TS,AS),y7=n=>Yu(n,CS,g7),Bh=n=>Yu(n,RS,p7),we=n=>ES.test(n),Yl=n=>Qu(n,SS),_7=n=>Qu(n,A7),vE=n=>Qu(n,TS),w7=n=>Qu(n,IS),x7=n=>Qu(n,CS),Uh=n=>Qu(n,RS,!0),Yu=(n,e,t)=>{const r=xS.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},Qu=(n,e,t=!1)=>{const r=ES.exec(n);return r?r[1]?e(r[1]):t:!1},TS=n=>n==="position"||n==="percentage",CS=n=>n==="image"||n==="url",IS=n=>n==="length"||n==="size"||n==="bg-size",SS=n=>n==="length",E7=n=>n==="number",A7=n=>n==="family-name",RS=n=>n==="shadow",T7=()=>{const n=Qt("color"),e=Qt("font"),t=Qt("text"),r=Qt("font-weight"),i=Qt("tracking"),o=Qt("leading"),s=Qt("breakpoint"),u=Qt("container"),c=Qt("spacing"),f=Qt("radius"),d=Qt("shadow"),p=Qt("inset-shadow"),v=Qt("text-shadow"),y=Qt("drop-shadow"),E=Qt("blur"),T=Qt("perspective"),C=Qt("aspect"),b=Qt("ease"),P=Qt("animate"),D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...F(),we,_e],W=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],I=()=>[we,_e,c],O=()=>[ru,"full","auto",...I()],M=()=>[Bo,"none","subgrid",we,_e],B=()=>["auto",{span:["full",Bo,we,_e]},Bo,we,_e],z=()=>[Bo,"auto",we,_e],L=()=>["auto","min","max","fr",we,_e],fe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Le=()=>["start","end","center","stretch","center-safe","end-safe"],je=()=>["auto",...I()],Te=()=>[ru,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],Z=()=>[n,we,_e],pe=()=>[...F(),vE,mE,{position:[we,_e]}],he=()=>["no-repeat",{repeat:["","x","y","space","round"]}],K=()=>["auto","cover","contain",w7,v7,{size:[we,_e]}],re=()=>[A1,Yl,Hs],xe=()=>["","none","full",f,we,_e],Ie=()=>["",He,Yl,Hs],Ue=()=>["solid","dashed","dotted","double"],ze=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ne=()=>[He,A1,vE,mE],Ke=()=>["","none",E,we,_e],rt=()=>["none",He,we,_e],jt=()=>["none",He,we,_e],Jr=()=>[He,we,_e],ei=()=>[ru,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Yi],breakpoint:[Yi],color:[h7],container:[Yi],"drop-shadow":[Yi],ease:["in","out","in-out"],font:[m7],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Yi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Yi],shadow:[Yi],spacing:["px",He],text:[Yi],"text-shadow":[Yi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ru,_e,we,C]}],container:["container"],columns:[{columns:[He,_e,we,u]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[Bo,"auto",we,_e]}],basis:[{basis:[ru,"full","auto",u,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[He,ru,"auto","initial","none",_e]}],grow:[{grow:["",He,we,_e]}],shrink:[{shrink:["",He,we,_e]}],order:[{order:[Bo,"first","last","none",we,_e]}],"grid-cols":[{"grid-cols":M()}],"col-start-end":[{col:B()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":M()}],"row-start-end":[{row:B()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":L()}],"auto-rows":[{"auto-rows":L()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...fe(),"normal"]}],"justify-items":[{"justify-items":[...Le(),"normal"]}],"justify-self":[{"justify-self":["auto",...Le()]}],"align-content":[{content:["normal",...fe()]}],"align-items":[{items:[...Le(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Le(),{baseline:["","last"]}]}],"place-content":[{"place-content":fe()}],"place-items":[{"place-items":[...Le(),"baseline"]}],"place-self":[{"place-self":["auto",...Le()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:je()}],mx:[{mx:je()}],my:[{my:je()}],ms:[{ms:je()}],me:[{me:je()}],mt:[{mt:je()}],mr:[{mr:je()}],mb:[{mb:je()}],ml:[{ml:je()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:Te()}],w:[{w:[u,"screen",...Te()]}],"min-w":[{"min-w":[u,"screen","none",...Te()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[s]},...Te()]}],h:[{h:["screen","lh",...Te()]}],"min-h":[{"min-h":["screen","lh","none",...Te()]}],"max-h":[{"max-h":["screen","lh",...Te()]}],"font-size":[{text:["base",t,Yl,Hs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,we,T1]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",A1,_e]}],"font-family":[{font:[_7,_e,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,we,_e]}],"line-clamp":[{"line-clamp":[He,"none",we,T1]}],leading:[{leading:[o,...I()]}],"list-image":[{"list-image":["none",we,_e]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",we,_e]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Z()}],"text-color":[{text:Z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ue(),"wavy"]}],"text-decoration-thickness":[{decoration:[He,"from-font","auto",we,Hs]}],"text-decoration-color":[{decoration:Z()}],"underline-offset":[{"underline-offset":[He,"auto",we,_e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",we,_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",we,_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:pe()}],"bg-repeat":[{bg:he()}],"bg-size":[{bg:K()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Bo,we,_e],radial:["",we,_e],conic:[Bo,we,_e]},x7,y7]}],"bg-color":[{bg:Z()}],"gradient-from-pos":[{from:re()}],"gradient-via-pos":[{via:re()}],"gradient-to-pos":[{to:re()}],"gradient-from":[{from:Z()}],"gradient-via":[{via:Z()}],"gradient-to":[{to:Z()}],rounded:[{rounded:xe()}],"rounded-s":[{"rounded-s":xe()}],"rounded-e":[{"rounded-e":xe()}],"rounded-t":[{"rounded-t":xe()}],"rounded-r":[{"rounded-r":xe()}],"rounded-b":[{"rounded-b":xe()}],"rounded-l":[{"rounded-l":xe()}],"rounded-ss":[{"rounded-ss":xe()}],"rounded-se":[{"rounded-se":xe()}],"rounded-ee":[{"rounded-ee":xe()}],"rounded-es":[{"rounded-es":xe()}],"rounded-tl":[{"rounded-tl":xe()}],"rounded-tr":[{"rounded-tr":xe()}],"rounded-br":[{"rounded-br":xe()}],"rounded-bl":[{"rounded-bl":xe()}],"border-w":[{border:Ie()}],"border-w-x":[{"border-x":Ie()}],"border-w-y":[{"border-y":Ie()}],"border-w-s":[{"border-s":Ie()}],"border-w-e":[{"border-e":Ie()}],"border-w-t":[{"border-t":Ie()}],"border-w-r":[{"border-r":Ie()}],"border-w-b":[{"border-b":Ie()}],"border-w-l":[{"border-l":Ie()}],"divide-x":[{"divide-x":Ie()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ie()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ue(),"hidden","none"]}],"divide-style":[{divide:[...Ue(),"hidden","none"]}],"border-color":[{border:Z()}],"border-color-x":[{"border-x":Z()}],"border-color-y":[{"border-y":Z()}],"border-color-s":[{"border-s":Z()}],"border-color-e":[{"border-e":Z()}],"border-color-t":[{"border-t":Z()}],"border-color-r":[{"border-r":Z()}],"border-color-b":[{"border-b":Z()}],"border-color-l":[{"border-l":Z()}],"divide-color":[{divide:Z()}],"outline-style":[{outline:[...Ue(),"none","hidden"]}],"outline-offset":[{"outline-offset":[He,we,_e]}],"outline-w":[{outline:["",He,Yl,Hs]}],"outline-color":[{outline:Z()}],shadow:[{shadow:["","none",d,Uh,Bh]}],"shadow-color":[{shadow:Z()}],"inset-shadow":[{"inset-shadow":["none",p,Uh,Bh]}],"inset-shadow-color":[{"inset-shadow":Z()}],"ring-w":[{ring:Ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Z()}],"ring-offset-w":[{"ring-offset":[He,Hs]}],"ring-offset-color":[{"ring-offset":Z()}],"inset-ring-w":[{"inset-ring":Ie()}],"inset-ring-color":[{"inset-ring":Z()}],"text-shadow":[{"text-shadow":["none",v,Uh,Bh]}],"text-shadow-color":[{"text-shadow":Z()}],opacity:[{opacity:[He,we,_e]}],"mix-blend":[{"mix-blend":[...ze(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ze()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[He]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ne()}],"mask-image-linear-from-color":[{"mask-linear-from":Z()}],"mask-image-linear-to-color":[{"mask-linear-to":Z()}],"mask-image-t-from-pos":[{"mask-t-from":Ne()}],"mask-image-t-to-pos":[{"mask-t-to":Ne()}],"mask-image-t-from-color":[{"mask-t-from":Z()}],"mask-image-t-to-color":[{"mask-t-to":Z()}],"mask-image-r-from-pos":[{"mask-r-from":Ne()}],"mask-image-r-to-pos":[{"mask-r-to":Ne()}],"mask-image-r-from-color":[{"mask-r-from":Z()}],"mask-image-r-to-color":[{"mask-r-to":Z()}],"mask-image-b-from-pos":[{"mask-b-from":Ne()}],"mask-image-b-to-pos":[{"mask-b-to":Ne()}],"mask-image-b-from-color":[{"mask-b-from":Z()}],"mask-image-b-to-color":[{"mask-b-to":Z()}],"mask-image-l-from-pos":[{"mask-l-from":Ne()}],"mask-image-l-to-pos":[{"mask-l-to":Ne()}],"mask-image-l-from-color":[{"mask-l-from":Z()}],"mask-image-l-to-color":[{"mask-l-to":Z()}],"mask-image-x-from-pos":[{"mask-x-from":Ne()}],"mask-image-x-to-pos":[{"mask-x-to":Ne()}],"mask-image-x-from-color":[{"mask-x-from":Z()}],"mask-image-x-to-color":[{"mask-x-to":Z()}],"mask-image-y-from-pos":[{"mask-y-from":Ne()}],"mask-image-y-to-pos":[{"mask-y-to":Ne()}],"mask-image-y-from-color":[{"mask-y-from":Z()}],"mask-image-y-to-color":[{"mask-y-to":Z()}],"mask-image-radial":[{"mask-radial":[we,_e]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ne()}],"mask-image-radial-from-color":[{"mask-radial-from":Z()}],"mask-image-radial-to-color":[{"mask-radial-to":Z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":F()}],"mask-image-conic-pos":[{"mask-conic":[He]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ne()}],"mask-image-conic-from-color":[{"mask-conic-from":Z()}],"mask-image-conic-to-color":[{"mask-conic-to":Z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:pe()}],"mask-repeat":[{mask:he()}],"mask-size":[{mask:K()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",we,_e]}],filter:[{filter:["","none",we,_e]}],blur:[{blur:Ke()}],brightness:[{brightness:[He,we,_e]}],contrast:[{contrast:[He,we,_e]}],"drop-shadow":[{"drop-shadow":["","none",y,Uh,Bh]}],"drop-shadow-color":[{"drop-shadow":Z()}],grayscale:[{grayscale:["",He,we,_e]}],"hue-rotate":[{"hue-rotate":[He,we,_e]}],invert:[{invert:["",He,we,_e]}],saturate:[{saturate:[He,we,_e]}],sepia:[{sepia:["",He,we,_e]}],"backdrop-filter":[{"backdrop-filter":["","none",we,_e]}],"backdrop-blur":[{"backdrop-blur":Ke()}],"backdrop-brightness":[{"backdrop-brightness":[He,we,_e]}],"backdrop-contrast":[{"backdrop-contrast":[He,we,_e]}],"backdrop-grayscale":[{"backdrop-grayscale":["",He,we,_e]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[He,we,_e]}],"backdrop-invert":[{"backdrop-invert":["",He,we,_e]}],"backdrop-opacity":[{"backdrop-opacity":[He,we,_e]}],"backdrop-saturate":[{"backdrop-saturate":[He,we,_e]}],"backdrop-sepia":[{"backdrop-sepia":["",He,we,_e]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",we,_e]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[He,"initial",we,_e]}],ease:[{ease:["linear","initial",b,we,_e]}],delay:[{delay:[He,we,_e]}],animate:[{animate:["none",P,we,_e]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[T,we,_e]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:rt()}],"rotate-x":[{"rotate-x":rt()}],"rotate-y":[{"rotate-y":rt()}],"rotate-z":[{"rotate-z":rt()}],scale:[{scale:jt()}],"scale-x":[{"scale-x":jt()}],"scale-y":[{"scale-y":jt()}],"scale-z":[{"scale-z":jt()}],"scale-3d":["scale-3d"],skew:[{skew:Jr()}],"skew-x":[{"skew-x":Jr()}],"skew-y":[{"skew-y":Jr()}],transform:[{transform:[we,_e,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ei()}],"translate-x":[{"translate-x":ei()}],"translate-y":[{"translate-y":ei()}],"translate-z":[{"translate-z":ei()}],"translate-none":["translate-none"],accent:[{accent:Z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",we,_e]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",we,_e]}],fill:[{fill:["none",...Z()]}],"stroke-w":[{stroke:[He,Yl,Hs,T1]}],stroke:[{stroke:["none",...Z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},C7=o7(T7);function ps(...n){return C7(vS(n))}const I7=yS("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),wi=U.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},o)=>{const s=r?U9:"button";return G.jsx(s,{className:ps(I7({variant:e,size:t,className:n})),ref:o,...i})});wi.displayName="Button";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),R7=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),yE=n=>{const e=R7(n);return e.charAt(0).toUpperCase()+e.slice(1)},PS=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),P7=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var b7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=U.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...u},c)=>U.createElement("svg",{ref:c,...b7,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:PS("lucide",i),...!o&&!P7(u)&&{"aria-hidden":"true"},...u},[...s.map(([f,d])=>U.createElement(f,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=(n,e)=>{const t=U.forwardRef(({className:r,...i},o)=>U.createElement(D7,{ref:o,iconNode:e,className:PS(`lucide-${S7(yE(n))}`,`lucide-${n}`,r),...i}));return t.displayName=yE(n),t};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_E=pa("circle-check",O7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],k7=pa("download",N7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Fg=pa("file-text",M7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],zc=pa("loader-circle",L7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],V7=pa("qr-code",F7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],U7=pa("triangle-alert",B7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],z7=pa("x",j7),H7=({user:n})=>{const e=async()=>{try{await mN(ra)}catch(t){console.error("Error al cerrar sesión:",t)}};return G.jsx("header",{className:"sticky top-0 z-40 w-full glass-effect",children:G.jsxs("nav",{className:"max-w-7xl mx-auto flex items-center justify-between p-4",children:[G.jsxs("div",{className:"flex items-center space-x-2",children:[G.jsx(Fg,{className:"w-8 h-8 text-boreal-aqua"}),G.jsxs("span",{className:"text-2xl font-black tracking-tighter",children:[G.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-boreal-aqua to-boreal-blue",children:"Boreal"})," Wallet"]})]}),n&&G.jsx(wi,{variant:"outline",onClick:e,className:"text-boreal-aqua border-boreal-aqua hover:bg-boreal-aqua/10 hover:text-boreal-aqua",children:"Cerrar Sesión"})]})})},G7=()=>G.jsx("footer",{className:"w-full mt-12 py-6 glass-effect",children:G.jsxs("div",{className:"max-w-7xl mx-auto text-center text-gray-400 text-sm",children:["© ",new Date().getFullYear()," Borea Labs. Todos los derechos reservados."]})}),W7=1,$7=1e6;let C1=0;function K7(){return C1=(C1+1)%Number.MAX_SAFE_INTEGER,C1.toString()}const I1=new Map,wE=n=>{if(I1.has(n))return;const e=setTimeout(()=>{I1.delete(n),Ac({type:"REMOVE_TOAST",toastId:n})},$7);I1.set(n,e)},q7=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,W7)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?wE(t):n.toasts.forEach(r=>{wE(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},ud=[];let ld={toasts:[]};function Ac(n){ld=q7(ld,n),ud.forEach(e=>{e(ld)})}function X7({...n}){const e=K7(),t=i=>Ac({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Ac({type:"DISMISS_TOAST",toastId:e});return Ac({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function Lv(){const[n,e]=U.useState(ld);return U.useEffect(()=>(ud.push(e),()=>{const t=ud.indexOf(e);t>-1&&ud.splice(t,1)}),[n]),{...n,toast:X7,dismiss:t=>Ac({type:"DISMISS_TOAST",toastId:t})}}const Y7=n=>G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...n,children:G.jsx("path",{d:"M20.283 10.356h-8.327v3.451h4.792c-.446 2.193-2.313 3.453-4.792 3.453a5.27 5.27 0 0 1-5.279-5.28 5.27 5.27 0 0 1 5.279-5.279c1.259 0 2.397.447 3.29 1.178l2.6-2.599c-1.584-1.381-3.615-2.233-5.89-2.233a8.908 8.908 0 0 0-8.934 8.934 8.908 8.908 0 0 0 8.934 8.934c4.956 0 8.641-3.52 8.641-8.781 0-.593-.053-1.165-.154-1.722z"})}),Q7=()=>{const[n,e]=U.useState(null),{toast:t}=Lv(),r=async()=>{e("google");try{if(!ra||!Ec)throw new Error("Firebase no está configurado o el proveedor de Google no está disponible.");await LN(ra,Ec)}catch(i){console.error(i);const o=i&&i.code?String(i.code):"";if(o==="auth/popup-blocked")try{await zN(ra,Ec);return}catch(u){console.error("Fallback a redirect falló:",u)}let s=i&&(i.message||i.code)?String(i.message||i.code):"No se pudo iniciar sesión con Google.";o==="auth/operation-not-allowed"?s="El proveedor de Google no está habilitado. Ve a Firebase Console > Authentication > Sign-in method y habilita “Google” (elige un Support email) y guarda.":o==="auth/unauthorized-domain"&&(s="Dominio no autorizado. En Firebase Console > Authentication > Settings > Authorized domains, agrega localhost y 127.0.0.1 (los puertos no importan)."),t({title:"Error con Google",description:s,variant:"destructive"})}e(!1)};return G.jsxs(Ru.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"flex-grow flex items-center justify-center p-4",children:[G.jsx(im,{children:G.jsx("title",{children:"Iniciar Sesión - Borea Wallet"})}),G.jsxs("div",{className:"w-full max-w-md sm:w-[420px] p-8 rounded-2xl glass-effect",children:[G.jsx("h2",{className:"text-3xl font-bold text-center mb-2",children:G.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-boreal-aqua to-boreal-blue",children:"Accede a tu Wallet"})}),G.jsx("p",{className:"text-center text-gray-300 mb-8",children:"Inicia sesión con tu cuenta de Google para ver tus certificados."}),G.jsxs("div",{className:"relative my-6",children:[G.jsx("div",{className:"absolute inset-0 flex items-center",children:G.jsx("span",{className:"w-full border-t border-white/20"})}),G.jsx("div",{className:"relative flex justify-center text-sm",children:G.jsx("span",{className:"bg-boreal-dark px-2 text-gray-400",children:"o"})})]}),G.jsxs(wi,{variant:"outline",className:"w-full border-white/30 text-white bg-transparent hover:bg-white/10",onClick:r,disabled:n==="google",children:[n==="google"?G.jsx(zc,{className:"w-5 h-5 animate-spin"}):G.jsx(Y7,{className:"w-5 h-5 mr-2"}),"Ingresar con Google"]})]})]})};function Z7(n,e){const t=xc(Yr,"userPoints",n);return kv(t,r=>{r.exists()?e(r.data()):e({balance:0})})}function J7(n,e,t=20){const r=xv(Yr,"userPoints",n,"redemptions"),i=Og(r,R9("redeemedAt","desc"),P9(t));return kv(i,o=>{const s=[];o.forEach(u=>s.push({id:u.id,...u.data()})),e(s)})}async function eL(n){const e=String(n).trim();if(!e)throw new Error("Código vacío");const t=xc(Yr,"pointCodes",e),r=await N9(t);if(!r.exists())throw new Error("Código no válido");const i=r.data();let o=null;try{i.expiresAt?.toDate&&(o=i.expiresAt.toDate())}catch{}return{id:e,...i,expiresAt:o}}async function tL(n,e){if(!n)throw new Error("Usuario no autenticado");const t=String(e).trim();if(!t)throw new Error("Código vacío");const r=xc(Yr,"pointCodes",t),i=xc(Yr,"userPoints",n),o=xc(xv(Yr,"userPoints",n,"redemptions"),t);return F9(Yr,async s=>{const u=await s.get(r);if(!u.exists())throw new Error("Código no válido");const c=u.data();if(c.used||c.active===!1)throw new Error("Código ya utilizado");const f=Number(c.amount||0);if(!f||Number.isNaN(f))throw new Error("Código inválido (monto)");if(c.expiresAt?.toDate&&c.expiresAt.toDate()<new Date)throw new Error("El código expiró");return s.update(r,{used:!0,active:!1,usedBy:n,usedAt:Vh()}),(await s.get(i)).exists()?s.update(i,{balance:V9(f),updatedAt:Vh()}):s.set(i,{balance:f,updatedAt:Vh()}),s.set(o,{code:t,amount:f,redeemedAt:Vh()}),{amount:f}})}const bS=U.forwardRef(({className:n,type:e,...t},r)=>G.jsx("input",{type:e,className:ps("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));bS.displayName="Input";function nL(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function rL(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var iL=(function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),oL=(function(n){iL(e,n);function e(t,r){var i=this.constructor,o=n.call(this,t,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),nL(o,i.prototype),rL(o),o}return e})(Error),sL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),nr=(function(n){sL(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(oL),aL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Gr=(function(n){aL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e})(nr),uL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Oe=(function(n){uL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(nr),lL=(function(){function n(e){if(this.binarizer=e,e===null)throw new Oe("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var o=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(o))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n})(),cL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pn=(function(n){cL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(nr),fL=(function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n})(),yt=(function(){function n(){}return n.arraycopy=function(e,t,r,i,o){for(;o--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n})(),hL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Fv=(function(n){hL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(nr),dL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xE=(function(n){dL(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(Fv),pL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nn=(function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var o=t;o<r;o++)e[o]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Oe("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new xE(t);if(r>e)throw new xE(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var o=pL(e),s=o.next();!s.done;s=o.next()){var u=s.value;i=31*i+u}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,o=new Int32Array(i);return yt.arraycopy(e,t,o,0,i),o},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,u=r(t,e[s]);if(u>0)i=s+1;else if(u<0)o=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n})(),$e=(function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),gn=(function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);yt.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=r[i]}var u=i*32+$e.numberOfTrailingZeros(o);return u>t?t:u},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=~r[i]}var u=i*32+$e.numberOfTrailingZeros(o);return u>t?t:u},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Oe;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,s=r;s<=i;s++){var u=s>r?0:e&31,c=s<i?31:t&31,f=(2<<c)-(1<<u);o[s]|=f}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Oe;if(t===e)return!0;t--;for(var i=Math.floor(e/32),o=Math.floor(t/32),s=this.bits,u=i;u<=o;u++){var c=u>i?0:e&31,f=u<o?31:t&31,d=(2<<f)-(1<<c)&4294967295;if((s[u]&d)!==(r?d:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Oe("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Oe("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var o=0;o<i;o++){for(var s=0,u=0;u<8;u++)this.get(e)&&(s|=1<<7-u),e++;t[r+o]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,o=0;o<r;o++){var s=i[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-o]=s}if(this.size!==r*32){for(var u=r*32-this.size,c=e[0]>>>u,o=1;o<r;o++){var f=e[o];c|=f<<32-u,e[o-1]=c,c=f>>>u}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&nn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+nn.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n})(),Vg;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ASSUME_GS1=7]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Vg||(Vg={}));const bt=Vg;var gL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ce=(function(n){gL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(nr),mL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ft;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(ft||(ft={}));var tn=(function(){function n(e,t,r){for(var i,o,s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,f=0,d=c.length;f!==d;f++){var p=c[f];n.VALUES_TO_ECI.set(p,this)}try{for(var v=mL(s),y=v.next();!y.done;y=v.next()){var E=y.value;n.NAME_TO_ECI.set(E,this)}}catch(T){i={error:T}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new ce("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new ce("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new ce("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(ft.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(ft.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(ft.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(ft.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(ft.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(ft.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(ft.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(ft.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(ft.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(ft.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(ft.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(ft.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(ft.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(ft.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(ft.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(ft.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(ft.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(ft.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(ft.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(ft.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(ft.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(ft.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(ft.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(ft.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(ft.Big5,28,"Big5"),n.GB18030=new n(ft.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(ft.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),vL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),cd=(function(n){vL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(nr),Or=(function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof tn?e:tn.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",o=0,s=e.length;o<s;o++){var u=e[o].toString(16);u.length<2&&(u="0"+u),i+="%"+u}return decodeURIComponent(i)}if(r.equals(tn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new cd("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(tn.UTF8)||e.equals(tn.ISO8859_1)||e.equals(tn.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],o=0;o<r.length;o++)i.push(r[o].charCodeAt(0));return new Uint8Array(i)},n})(),Je=(function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return Or.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(bt.CHARACTER_SET)!==void 0)return t.get(bt.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,s=!0,u=0,c=0,f=0,d=0,p=0,v=0,y=0,E=0,T=0,C=0,b=0,P=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,D=0;D<r&&(i||o||s);D++){var F=e[D]&255;s&&(u>0?(F&128)===0?s=!1:u--:(F&128)!==0&&((F&64)===0?s=!1:(u++,(F&32)===0?c++:(u++,(F&16)===0?f++:(u++,(F&8)===0?d++:s=!1))))),i&&(F>127&&F<160?i=!1:F>159&&(F<192||F===215||F===247)&&b++),o&&(p>0?F<64||F===127||F>252?o=!1:p--:F===128||F===160||F>239?o=!1:F>160&&F<224?(v++,E=0,y++,y>T&&(T=y)):F>127?(p++,y=0,E++,E>C&&(C=E)):(y=0,E=0))}return s&&u>0&&(s=!1),o&&p>0&&(o=!1),s&&(P||c+f+d>0)?n.UTF8:o&&(n.ASSUME_SHIFT_JIS||T>=3||C>=3)?n.SHIFT_JIS:i&&o?T===2&&v===2||b*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:o?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function o(u,c,f,d,p,v){if(u==="%%")return"%";if(t[++i]!==void 0){u=d?parseInt(d.substr(1)):void 0;var y=p?parseInt(p.substr(1)):void 0,E;switch(v){case"s":E=t[i];break;case"c":E=t[i][0];break;case"f":E=parseFloat(t[i]).toFixed(u);break;case"p":E=parseFloat(t[i]).toPrecision(u);break;case"e":E=parseFloat(t[i]).toExponential(u);break;case"x":E=parseInt(t[i]).toString(y||16);break;case"d":E=parseFloat(parseInt(t[i],y||10).toPrecision(u)).toFixed(0);break}E=typeof E=="object"?JSON.stringify(E):(+E).toString(y);for(var T=parseInt(f),C=f&&f[0]+""=="0"?"0":" ";E.length<T;)E=c!==void 0?E+C:C+E;return E}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)},n.getBytes=function(e,t){return Or.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=tn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=tn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=tn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),Ge=(function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Je.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n})(),bi=(function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Oe("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),o=0;o<t;o++)for(var s=e[o],u=0;u<r;u++)s[u]&&i.set(u,o);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Oe("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,u=-1,c=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(o>s){if(u===-1)u=o-s;else if(o-s!==u)throw new Oe("row lengths do not match");s=o,c++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,i[o]=!0,o++;else if(e.substring(f,f+r.length)===r)f+=r.length,i[o]=!1,o++;else throw new Oe("illegal character encountered: "+e.substring(f));if(o>s){if(u===-1)u=o-s;else if(o-s!==u)throw new Oe("row lengths do not match");c++}for(var d=new n(u,c),p=0;p<o;p++)i[p]&&d.set(Math.floor(p%u),Math.floor(p/u));return d},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Oe("input matrix dimensions do not match");for(var t=new gn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var u=o*r,c=e.getRow(o,t).getBitArray(),f=0;f<r;f++)i[u+f]^=c[f]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Oe("Left and top must be nonnegative");if(i<1||r<1)throw new Oe("Height and width must be at least 1");var o=e+r,s=t+i;if(s>this.height||o>this.width)throw new Oe("The region must fit inside the matrix");for(var u=this.rowSize,c=this.bits,f=t;f<s;f++)for(var d=f*u,p=e;p<o;p++)c[d+Math.floor(p/32)]|=1<<(p&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new gn(this.width):t.clear();for(var r=this.rowSize,i=this.bits,o=e*r,s=0;s<r;s++)t.setBulk(s*32,i[o+s]);return t},n.prototype.setRow=function(e,t){yt.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new gn(e),i=new gn(e),o=0,s=Math.floor((t+1)/2);o<s;o++)r=this.getRow(o,r),i=this.getRow(t-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(t-1-o,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,o=e,s=t,u=-1,c=-1,f=0;f<t;f++)for(var d=0;d<r;d++){var p=i[f*r+d];if(p!==0){if(f<s&&(s=f),f>c&&(c=f),d*32<o){for(var v=0;(p<<31-v&4294967295)===0;)v++;d*32+v<o&&(o=d*32+v)}if(d*32+31>u){for(var v=31;!(p>>>v);)v--;d*32+v>u&&(u=d*32+v)}}}return u<o||c<s?null:Int32Array.from([o,s,u-o+1,c-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,o=r%e*32,s=t[r],u=0;(s<<31-u&4294967295)===0;)u++;return o+=u,Int32Array.from([o,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=Math.floor(r%e)*32,s=t[r],u=31;!(s>>>u);)u--;return o+=u,Int32Array.from([o,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&nn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+nn.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new Ge,o=0,s=this.height;o<s;o++){for(var u=0,c=this.width;u<c;u++)i.append(this.get(u,o)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),yL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),te=(function(n){yL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(nr),_L=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),wL=(function(n){_L(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new gn(o):r.clear(),this.initArrays(o);for(var s=i.getRow(t,this.luminances),u=this.buckets,c=0;c<o;c++)u[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(u);if(o<3)for(var c=0;c<o;c++)(s[c]&255)<f&&r.set(c);else for(var d=s[0]&255,p=s[1]&255,c=1;c<o-1;c++){var v=s[c+1]&255;(p*4-d-v)/2<f&&r.set(c),d=p,p=v}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),o=new bi(r,i);this.initArrays(r);for(var s=this.buckets,u=1;u<5;u++)for(var c=Math.floor(i*u/5),f=t.getRow(c,this.luminances),d=Math.floor(r*4/5),p=Math.floor(r/5);p<d;p++){var v=f[p]&255;s[v>>e.LUMINANCE_SHIFT]++}for(var y=e.estimateBlackPoint(s),E=t.getMatrix(),u=0;u<i;u++)for(var T=u*r,p=0;p<r;p++){var v=E[T+p]&255;v<y&&o.set(p,u)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,o=0,s=0,u=0;u<r;u++)t[u]>s&&(o=u,s=t[u]),t[u]>i&&(i=t[u]);for(var c=0,f=0,u=0;u<r;u++){var d=u-o,p=t[u]*d*d;p>f&&(c=u,f=p)}if(o>c){var v=o;o=c,c=v}if(c-o<=r/16)throw new te;for(var y=c-1,E=-1,u=c-1;u>o;u--){var T=u-o,p=T*T*(c-u)*(i-t[u]);p>E&&(y=u,E=p)}return y<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(fL),xL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),EL=(function(n){xL(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var u=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&u++;var c=e.calculateBlackPoints(o,s,u,r,i),f=new bi(r,i);e.calculateThresholdForBlock(o,s,u,r,i,c,f),this.matrix=f}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,o,s,u,c){for(var f=s-e.BLOCK_SIZE,d=o-e.BLOCK_SIZE,p=0;p<i;p++){var v=p<<e.BLOCK_SIZE_POWER;v>f&&(v=f);for(var y=e.cap(p,2,i-3),E=0;E<r;E++){var T=E<<e.BLOCK_SIZE_POWER;T>d&&(T=d);for(var C=e.cap(E,2,r-3),b=0,P=-2;P<=2;P++){var D=u[y+P];b+=D[C-2]+D[C-1]+D[C]+D[C+1]+D[C+2]}var F=b/25;e.thresholdBlock(t,T,v,F,o,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,o,s,u){for(var c=0,f=i*s+r;c<e.BLOCK_SIZE;c++,f+=s)for(var d=0;d<e.BLOCK_SIZE;d++)(t[f+d]&255)<=o&&u.set(r+d,i+c)},e.calculateBlackPoints=function(t,r,i,o,s){for(var u=s-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,f=new Array(i),d=0;d<i;d++){f[d]=new Int32Array(r);var p=d<<e.BLOCK_SIZE_POWER;p>u&&(p=u);for(var v=0;v<r;v++){var y=v<<e.BLOCK_SIZE_POWER;y>c&&(y=c);for(var E=0,T=255,C=0,b=0,P=p*o+y;b<e.BLOCK_SIZE;b++,P+=o){for(var D=0;D<e.BLOCK_SIZE;D++){var F=t[P+D]&255;E+=F,F<T&&(T=F),F>C&&(C=F)}if(C-T>e.MIN_DYNAMIC_RANGE)for(b++,P+=o;b<e.BLOCK_SIZE;b++,P+=o)for(var D=0;D<e.BLOCK_SIZE;D++)E+=t[P+D]&255}var j=E>>e.BLOCK_SIZE_POWER*2;if(C-T<=e.MIN_DYNAMIC_RANGE&&(j=T/2,d>0&&v>0)){var W=(f[d-1][v]+2*f[d][v-1]+f[d-1][v-1])/4;T<W&&(j=W)}f[d][v]=j}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(wL),fp=(function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new cd("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new cd("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new cd("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Ge,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var s=i[o]&255,u=void 0;s<64?u="#":s<128?u="+":s<192?u=".":u=" ",t.append(u)}t.append(`
`)}return t.toString()},n})(),AL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Vv=(function(n){AL(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(t[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,o){return new e(this.delegate.crop(t,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(fp),TL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),CL=(function(n){TL(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(r.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX)for(var s=0,u=0,c=t.length;s<c;s+=4,u++){var f=void 0,d=t[s+3];if(d===0)f=255;else{var p=t[s],v=t[s+1],y=t[s+2];f=306*p+601*v+117*y+512>>10}o[u]=f}else for(var s=0,u=0,E=t.length;s<E;s+=4,u++){var f=void 0,d=t[s+3];if(d===0)f=255;else{var p=t[s],v=t[s+1],y=t[s+2];f=306*p+601*v+117*y+512>>10}o[u]=255-f}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Oe("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return n.prototype.crop.call(this,t,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,u=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*u),f=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*u);return r.width=c,r.height=f,i.translate(c/2,f/2),i.rotate(o),i.drawImage(this.canvas,s/-2,u/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new Vv(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(fp),IL=(function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n})(),jn=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(d){try{f(r.next(d))}catch(p){s(p)}}function c(d){try{f(r.throw(d))}catch(p){s(p)}}function f(d){d.done?o(d.value):i(d.value).then(u,c)}f((r=r.apply(n,e||[])).next())})},zn=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(d){return c([f,d])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},SL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zu=(function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return jn(this,void 0,void 0,function(){var e,t,r,i,o,s,u,c,f,d,p,v;return zn(this,function(y){switch(y.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=y.sent(),t=[];try{for(r=SL(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(u=o.deviceId||o.id,c=o.label||"Video device "+(t.length+1),f=o.groupId,d={deviceId:u,label:c,kind:s,groupId:f},t.push(d))}catch(E){p={error:E}}finally{try{i&&!i.done&&(v=r.return)&&v.call(r)}finally{if(p)throw p.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return jn(this,void 0,void 0,function(){var e;return zn(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new IL(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return jn(this,void 0,void 0,function(){var t;return zn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return jn(this,void 0,void 0,function(){return zn(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return jn(this,void 0,void 0,function(){var r,i;return zn(this,function(o){switch(o.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return jn(this,void 0,void 0,function(){var r;return zn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return jn(this,void 0,void 0,function(){var r,i;return zn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=o.sent(),[4,this.decodeOnce(r)];case 2:return i=o.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return jn(this,void 0,void 0,function(){return zn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return jn(this,void 0,void 0,function(){var i,o;return zn(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return jn(this,void 0,void 0,function(){var i;return zn(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,o.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return jn(this,void 0,void 0,function(){var i;return zn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return jn(this,void 0,void 0,function(){var r;return zn(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return jn(this,void 0,void 0,function(){return zn(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new Gr("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new Gr("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new Gr("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new Gr("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new Gr("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new Gr("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Gr("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new Gr("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Gr("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new Gr("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return jn(this,void 0,void 0,function(){return zn(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return jn(this,void 0,void 0,function(){return zn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var o=function(s,u){if(i._stopAsyncDecode){u(new te("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(v){var f=t&&v instanceof te,d=v instanceof pn||v instanceof ce,p=d&&r;if(f||p)return setTimeout(o,i._timeBetweenDecodingAttempts,s,u);u(v)}};return new Promise(function(s,u){return o(s,u)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var o=r.decode(e);t(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var s=c instanceof pn||c instanceof ce,u=c instanceof te;(s||u)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e),e instanceof HTMLVideoElement?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var t=this.getCaptureCanvas(e),r=new CL(t),i=new EL(r);return new lL(i)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n})(),Vn=(function(){function n(e,t,r,i,o,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=yt.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=o,this.resultMetadata=null,s==null?this.timestamp=yt.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);yt.arraycopy(t,0,r,0,t.length),yt.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n})(),Bg;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Bg||(Bg={}));const Re=Bg;var Ug;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ug||(Ug={}));const Cn=Ug;var hp=(function(){function n(e,t,r,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n})(),oc=(function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Oe;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n})(),ns=(function(){function n(e,t){if(t.length===0)throw new Oe;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),yt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,o=t.length;i!==o;i++){var s=t[i];r=oc.addOrSubtract(r,s)}return r}r=t[0];for(var u=t.length,c=this.field,i=1;i<u;i++)r=oc.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Oe("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;yt.arraycopy(r,0,o,0,s);for(var u=s;u<r.length;u++)o[u]=oc.addOrSubtract(t[u-s],r[u]);return new n(this.field,o)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Oe("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),u=this.field,c=0;c<r;c++)for(var f=t[c],d=0;d<o;d++)s[c+d]=oc.addOrSubtract(s[c+d],u.multiply(f,i[d]));return new n(u,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),o=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(o[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Oe;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),s=this.field,u=0;u<i;u++)o[u]=s.multiply(r[u],t);return new n(s,o)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Oe("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Oe("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=t.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var u=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),s),f=e.multiplyByMonomial(u,c),d=t.buildMonomial(u,c);r=r.addOrSubtract(d),i=i.addOrSubtract(f)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n})(),RL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),DS=(function(n){RL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(nr),PL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),er=(function(n){PL(e,n);function e(t,r,i){var o=n.call(this)||this;o.primitive=t,o.size=r,o.generatorBase=i;for(var s=new Int32Array(r),u=1,c=0;c<r;c++)s[c]=u,u*=2,u>=r&&(u^=t,u&=r-1);o.expTable=s;for(var f=new Int32Array(r),c=0;c<r-1;c++)f[s[c]]=c;return o.logTable=f,o.zero=new ns(o,Int32Array.from([0])),o.one=new ns(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Oe;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new ns(this,i)},e.prototype.inverse=function(t){if(t===0)throw new DS;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+$e.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(oc),bL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jh=(function(n){bL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(nr),DL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),lf=(function(n){DL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(nr),dp=(function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new ns(r,e),o=new Int32Array(t),s=!0,u=0;u<t;u++){var c=i.evaluateAt(r.exp(u+r.getGeneratorBase()));o[o.length-1-u]=c,c!==0&&(s=!1)}if(!s)for(var f=new ns(r,o),d=this.runEuclideanAlgorithm(r.buildMonomial(t,1),f,t),p=d[0],v=d[1],y=this.findErrorLocations(p),E=this.findErrorMagnitudes(v,y),u=0;u<y.length;u++){var T=e.length-1-r.log(y[u]);if(T<0)throw new jh("Bad error location");e[T]=er.addOrSubtract(e[T],E[u])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=this.field,s=e,u=t,c=o.getZero(),f=o.getOne();u.getDegree()>=(r/2|0);){var d=s,p=c;if(s=u,c=f,s.isZero())throw new jh("r_{i-1} was zero");u=d;for(var v=o.getZero(),y=s.getCoefficient(s.getDegree()),E=o.inverse(y);u.getDegree()>=s.getDegree()&&!u.isZero();){var T=u.getDegree()-s.getDegree(),C=o.multiply(u.getCoefficient(u.getDegree()),E);v=v.addOrSubtract(o.buildMonomial(T,C)),u=u.addOrSubtract(s.multiplyByMonomial(T,C))}if(f=v.multiply(c).addOrSubtract(p),u.getDegree()>=s.getDegree())throw new lf("Division algorithm failed to reduce polynomial?")}var b=f.getCoefficient(0);if(b===0)throw new jh("sigmaTilde(0) was zero");var P=o.inverse(b),D=f.multiplyScalar(P),F=u.multiplyScalar(P);return[D,F]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,o=this.field,s=1;s<o.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=o.inverse(s),i++);if(i!==t)throw new jh("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),o=this.field,s=0;s<r;s++){for(var u=o.inverse(t[s]),c=1,f=0;f<r;f++)if(s!==f){var d=o.multiply(t[f],u),p=(d&1)===0?d|1:d&-2;c=o.multiply(c,p)}i[s]=o.multiply(e.evaluateAt(u),o.inverse(c)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],u))}return i},n})(),wn;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(wn||(wn={}));var EE=(function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),o=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),u=new hp(o,s,null,null);return u.setNumBits(i.length),u},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=wn.UPPER,i=wn.UPPER,o="",s=0;s<t;)if(i===wn.BINARY){if(t-s<5)break;var u=n.readCode(e,s,5);if(s+=5,u===0){if(t-s<11)break;u=n.readCode(e,s,11)+31,s+=11}for(var c=0;c<u;c++){if(t-s<8){s=t;break}var f=n.readCode(e,s,8);o+=Je.castAsNonUtf8Char(f),s+=8}i=r}else{var d=i===wn.DIGIT?4:5;if(t-s<d)break;var f=n.readCode(e,s,d);s+=d;var p=n.getCharacter(i,f);p.startsWith("CTRL_")?(r=i,i=n.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(o+=p,i=r)}return o},n.getTable=function(e){switch(e){case"L":return wn.LOWER;case"P":return wn.PUNCT;case"M":return wn.MIXED;case"D":return wn.DIGIT;case"B":return wn.BINARY;case"U":default:return wn.UPPER}},n.getCharacter=function(e,t){switch(e){case wn.UPPER:return n.UPPER_TABLE[t];case wn.LOWER:return n.LOWER_TABLE[t];case wn.MIXED:return n.MIXED_TABLE[t];case wn.PUNCT:return n.PUNCT_TABLE[t];case wn.DIGIT:return n.DIGIT_TABLE[t];default:throw new lf("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=er.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=er.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=er.AZTEC_DATA_10):(r=12,t=er.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new ce;for(var s=e.length%r,u=new Int32Array(o),c=0;c<o;c++,s+=r)u[c]=n.readCode(e,s,r);try{var f=new dp(t);f.decode(u,o-i)}catch(C){throw new ce(C)}for(var d=(1<<r)-1,p=0,c=0;c<i;c++){var v=u[c];if(v===0||v===d)throw new ce;(v===1||v===d-1)&&p++}for(var y=new Array(i*r-p),E=0,c=0;c<i;c++){var v=u[c];if(v===1||v===d-1)y.fill(v>1,E,E+r-1),E+=r-1;else for(var T=r-1;T>=0;--T)y[E++]=(v&1<<T)!==0}return y},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var u=0;u<o.length;u++)o[u]=u;else for(var c=i+1+2*$e.truncDivision($e.truncDivision(i,2)-1,15),f=i/2,d=$e.truncDivision(c,2),u=0;u<f;u++){var p=u+$e.truncDivision(u,15);o[f-u-1]=d-p-1,o[f+u]=d+p+1}for(var u=0,v=0;u<r;u++){for(var y=(r-u)*4+(t?9:12),E=u*2,T=i-1-E,C=0;C<y;C++)for(var b=C*2,P=0;P<2;P++)s[v+b+P]=e.get(o[E+P],o[E+C]),s[v+2*y+b+P]=e.get(o[E+C],o[T-P]),s[v+4*y+b+P]=e.get(o[T-P],o[T-C]),s[v+6*y+b+P]=e.get(o[T-C],o[E+P]);v+=y*8}return s},n.readCode=function(e,t,r){for(var i=0,o=t;o<t+r;o++)i<<=1,e[o]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n})(),ot=(function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var o=e-r,s=t-i;return Math.sqrt(o*o+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var o=e[r];t+=o}return t},n})(),jg=(function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),Ae=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*jg.floatToIntBits(this.x)+jg.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,s,u;if(r>=t&&r>=i?(s=e[0],o=e[1],u=e[2]):i>=r&&i>=t?(s=e[1],o=e[0],u=e[2]):(s=e[2],o=e[0],u=e[1]),this.crossProductZ(o,s,u)<0){var c=o;o=u,u=c}e[0]=o,e[1]=s,e[2]=u},n.distance=function(e,t){return ot.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,o=t.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},n})(),Bv=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),OL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),NL=(function(n){OL(e,n);function e(t,r,i,o,s){var u=n.call(this,t,r)||this;return u.compact=i,u.nbDatablocks=o,u.nbLayers=s,u}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Bv),zg=(function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=t/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new te}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,o=!1,s=!0,u=!1,c=!1,f=!1,d=!1,p=!1,v=this.width,y=this.height;s;){s=!1;for(var E=!0;(E||!c)&&t<v;)E=this.containsBlackPoint(r,i,t,!1),E?(t++,s=!0,c=!0):c||t++;if(t>=v){o=!0;break}for(var T=!0;(T||!f)&&i<y;)T=this.containsBlackPoint(e,t,i,!0),T?(i++,s=!0,f=!0):f||i++;if(i>=y){o=!0;break}for(var C=!0;(C||!d)&&e>=0;)C=this.containsBlackPoint(r,i,e,!1),C?(e--,s=!0,d=!0):d||e--;if(e<0){o=!0;break}for(var b=!0;(b||!p)&&r>=0;)b=this.containsBlackPoint(e,t,r,!0),b?(r--,s=!0,p=!0):p||r--;if(r<0){o=!0;break}s&&(u=!0)}if(!o&&u){for(var P=t-e,D=null,F=1;D===null&&F<P;F++)D=this.getBlackPointOnSegment(e,i-F,e+F,i);if(D==null)throw new te;for(var j=null,F=1;j===null&&F<P;F++)j=this.getBlackPointOnSegment(e,r+F,e+F,r);if(j==null)throw new te;for(var W=null,F=1;W===null&&F<P;F++)W=this.getBlackPointOnSegment(t,r+F,t-F,r);if(W==null)throw new te;for(var R=null,F=1;R===null&&F<P;F++)R=this.getBlackPointOnSegment(t,i-F,t-F,i);if(R==null)throw new te;return this.centerEdges(R,D,W,j)}else throw new te},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var o=ot.round(ot.distance(e,t,r,i)),s=(r-e)/o,u=(i-t)/o,c=this.image,f=0;f<o;f++){var d=ot.round(e+f*s),p=ot.round(t+f*u);if(c.get(d,p))return new Ae(d,p)}return null},n.prototype.centerEdges=function(e,t,r,i){var o=e.getX(),s=e.getY(),u=t.getX(),c=t.getY(),f=r.getX(),d=r.getY(),p=i.getX(),v=i.getY(),y=n.CORR;return o<this.width/2?[new Ae(p-y,v+y),new Ae(u+y,c+y),new Ae(f-y,d-y),new Ae(o+y,s-y)]:[new Ae(p+y,v+y),new Ae(u+y,c-y),new Ae(f-y,d+y),new Ae(o-y,s-y)]},n.prototype.containsBlackPoint=function(e,t,r,i){var o=this.image;if(i){for(var s=e;s<=t;s++)if(o.get(s,r))return!0}else for(var u=e;u<=t;u++)if(o.get(r,u))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n})(),AE=(function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<t.length&&o;s+=2){var u=Math.floor(t[s]),c=Math.floor(t[s+1]);if(u<-1||u>r||c<-1||c>i)throw new te;o=!1,u===-1?(t[s]=0,o=!0):u===r&&(t[s]=r-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}o=!0;for(var s=t.length-2;s>=0&&o;s-=2){var u=Math.floor(t[s]),c=Math.floor(t[s+1]);if(u<-1||u>r||c<-1||c>i)throw new te;o=!1,u===-1?(t[s]=0,o=!0):u===r&&(t[s]=r-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}},n})(),OS=(function(){function n(e,t,r,i,o,s,u,c,f){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=o,this.a32=s,this.a13=u,this.a23=c,this.a33=f}return n.quadrilateralToQuadrilateral=function(e,t,r,i,o,s,u,c,f,d,p,v,y,E,T,C){var b=n.quadrilateralToSquare(e,t,r,i,o,s,u,c),P=n.squareToQuadrilateral(f,d,p,v,y,E,T,C);return P.times(b)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,o=this.a13,s=this.a21,u=this.a22,c=this.a23,f=this.a31,d=this.a32,p=this.a33,v=0;v<t;v+=2){var y=e[v],E=e[v+1],T=o*y+c*E+p;e[v]=(r*y+s*E+f)/T,e[v+1]=(i*y+u*E+d)/T}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,o=this.a13,s=this.a21,u=this.a22,c=this.a23,f=this.a31,d=this.a32,p=this.a33,v=e.length,y=0;y<v;y++){var E=e[y],T=t[y],C=o*E+c*T+p;e[y]=(r*E+s*T+f)/C,t[y]=(i*E+u*T+d)/C}},n.squareToQuadrilateral=function(e,t,r,i,o,s,u,c){var f=e-r+o-u,d=t-i+s-c;if(f===0&&d===0)return new n(r-e,o-r,e,i-t,s-i,t,0,0,1);var p=r-o,v=u-o,y=i-s,E=c-s,T=p*E-v*y,C=(f*E-v*d)/T,b=(p*d-f*y)/T;return new n(r-e+C*r,u-e+b*u,e,i-t+C*i,c-t+b*c,t,C,b,1)},n.quadrilateralToSquare=function(e,t,r,i,o,s,u,c){return n.squareToQuadrilateral(e,t,r,i,o,s,u,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n})(),kL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ML=(function(n){kL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,o,s,u,c,f,d,p,v,y,E,T,C,b,P,D,F){var j=OS.quadrilateralToQuadrilateral(o,s,u,c,f,d,p,v,y,E,T,C,b,P,D,F);return this.sampleGridWithTransform(t,r,i,j)},e.prototype.sampleGridWithTransform=function(t,r,i,o){if(r<=0||i<=0)throw new te;for(var s=new bi(r,i),u=new Float32Array(2*r),c=0;c<i;c++){for(var f=u.length,d=c+.5,p=0;p<f;p+=2)u[p]=p/2+.5,u[p+1]=d;o.transformPoints(u),AE.checkAndNudgePoints(t,u);try{for(var p=0;p<f;p+=2)t.get(Math.floor(u[p]),Math.floor(u[p+1]))&&s.set(p/2,c)}catch{throw new te}}return s},e})(AE),Uv=(function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new ML,n})(),Qn=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Ae(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n})(),LL=(function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new NL(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new te;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,o=0;o<4;o++){var s=r[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var u=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(o,s,u){var c=(o>>t-2<<1)+(o&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if($e.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new te},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var o=r-i,s=new Int32Array(r),u=r-1;u>=0;--u)s[u]=e&15,e>>=4;try{var c=new dp(er.AZTEC_PARAM);c.decode(s,o)}catch{throw new te}for(var f=0,u=0;u<i;u++)f=(f<<4)+s[u];return f},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var u=this.getFirstDifferent(t,s,1,-1),c=this.getFirstDifferent(r,s,1,1),f=this.getFirstDifferent(i,s,-1,1),d=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(d,u)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(u,c,f,d))break}t=u,r=c,i=f,o=d,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new te;this.compact=this.nbCenterLayers===5;var v=new Ae(t.getX()+.5,t.getY()-.5),y=new Ae(r.getX()+.5,r.getY()+.5),E=new Ae(i.getX()-.5,i.getY()+.5),T=new Ae(o.getX()-.5,o.getY()-.5);return this.expandSquare([v,y,E,T],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var o=new zg(this.image).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{var s=this.image.getWidth()/2,u=this.image.getHeight()/2;e=this.getFirstDifferent(new Qn(s+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Qn(s+7,u+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Qn(s-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Qn(s-7,u-7),!1,-1,-1).toResultPoint()}var c=ot.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=ot.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var o=new zg(this.image,15,c,f).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{e=this.getFirstDifferent(new Qn(c+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Qn(c+7,f+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Qn(c-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Qn(c-7,f-7),!1,-1,-1).toResultPoint()}return c=ot.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=ot.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Qn(c,f)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,o){var s=Uv.getInstance(),u=this.getDimension(),c=u/2-this.nbCenterLayers,f=u/2+this.nbCenterLayers;return s.sampleGrid(e,u,u,c,c,f,c,f,f,c,f,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,o=this.distanceResultPoint(e,t),s=o/r,u=e.getX(),c=e.getY(),f=s*(t.getX()-e.getX())/o,d=s*(t.getY()-e.getY())/o,p=0;p<r;p++)this.image.get(ot.round(u+p*f),ot.round(c+p*d))&&(i|=1<<r-p-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var o=3;e=new Qn(e.getX()-o,e.getY()+o),t=new Qn(t.getX()-o,t.getY()-o),r=new Qn(r.getX()+o,r.getY()-o),i=new Qn(i.getX()+o,i.getY()+o);var s=this.getColor(i,e);if(s===0)return!1;var u=this.getColor(e,t);return u!==s||(u=this.getColor(t,r),u!==s)?!1:(u=this.getColor(r,i),u===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,o=(t.getY()-e.getY())/r,s=0,u=e.getX(),c=e.getY(),f=this.image.get(e.getX(),e.getY()),d=Math.ceil(r),p=0;p<d;p++)u+=i,c+=o,this.image.get(ot.round(u),ot.round(c))!==f&&s++;var v=s/r;return v>.1&&v<.9?0:v<=.1===f?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var o=e.getX()+r,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r,s+=i;for(o-=r,s-=i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r;for(o-=r;this.isValid(o,s)&&this.image.get(o,s)===t;)s+=i;return s-=i,new Qn(o,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),u=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,f=new Ae(u+i*o,c+i*s),d=new Ae(u-i*o,c-i*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),u=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new Ae(u+i*o,c+i*s),v=new Ae(u-i*o,c-i*s),y=[f,p,d,v];return y},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=ot.round(e.getX()),r=ot.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return ot.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return ot.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*($e.truncDivision(this.nbLayers-4,8)+1)+15},n})(),Hg=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new LL(e.getBlackMatrix()),o=null,s=null;try{var u=i.detectMirror(!1);o=u.getPoints(),this.reportFoundResultPoints(t,o),s=new EE().decode(u)}catch(p){r=p}if(s==null)try{var u=i.detectMirror(!0);o=u.getPoints(),this.reportFoundResultPoints(t,o),s=new EE().decode(u)}catch(p){throw r??p}var c=new Vn(s.getText(),s.getRawBytes(),s.getNumBits(),o,Re.AZTEC,yt.currentTimeMillis()),f=s.getByteSegments();f!=null&&c.putMetadata(Cn.BYTE_SEGMENTS,f);var d=s.getECLevel();return d!=null&&c.putMetadata(Cn.ERROR_CORRECTION_LEVEL,d),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(bt.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,o,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n})(),FL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){FL(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Hg,t)||this}return e})(Zu);var rn=(function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(bt.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,t),s=o.getResultMetadata(),u=270;s!==null&&s.get(Cn.ORIENTATION)===!0&&(u=u+s.get(Cn.ORIENTATION)%360),o.putMetadata(Cn.ORIENTATION,u);var c=o.getResultPoints();if(c!==null)for(var f=i.getHeight(),d=0;d<c.length;d++)c[d]=new Ae(f-c[d].getY()-1,c[d].getX());return o}else throw new te}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),o=new gn(r),s=t&&t.get(bt.TRY_HARDER)===!0,u=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var f=Math.trunc(i/2),d=0;d<c;d++){var p=Math.trunc((d+1)/2),v=(d&1)===0,y=f+u*(v?p:-p);if(y<0||y>=i)break;try{o=e.getBlackRow(y,o)}catch{continue}for(var E=function(P){if(P===1&&(o.reverse(),t&&t.get(bt.NEED_RESULT_POINT_CALLBACK)===!0)){var D=new Map;t.forEach(function(W,R){return D.set(R,W)}),D.delete(bt.NEED_RESULT_POINT_CALLBACK),t=D}try{var F=T.decodeRow(y,o,t);if(P===1){F.putMetadata(Cn.ORIENTATION,180);var j=F.getResultPoints();j!==null&&(j[0]=new Ae(r-j[0].getX()-1,j[0].getY()),j[1]=new Ae(r-j[1].getX()-1,j[1].getY()))}return{value:F}}catch{}},T=this,C=0;C<2;C++){var b=E(C);if(typeof b=="object")return b.value}}throw new te},n.recordPattern=function(e,t,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var s=e.getSize();if(t>=s)throw new te;for(var u=!e.get(t),c=0,f=t;f<s;){if(e.get(f)!==u)r[c]++;else{if(++c===i)break;r[c]=1,u=!u}f++}if(!(c===i||c===i-1&&f===s))throw new te},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,o=e.get(t);t>0&&i>=0;)e.get(--t)!==o&&(i--,o=!o);if(i>=0)throw new te;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,u=0;u<i;u++)o+=e[u],s+=t[u];if(o<s)return Number.POSITIVE_INFINITY;var c=o/s;r*=c;for(var f=0,d=0;d<i;d++){var p=e[d],v=t[d]*c,y=p>v?p-v:v-p;if(y>r)return Number.POSITIVE_INFINITY;f+=y}return f/o},n})(),VL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),TE=(function(n){VL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),u=i,c=!1,f=6,d=i;d<r;d++)if(t.get(d)!==c)s[o]++;else{if(o===f-1){for(var p=e.MAX_AVG_VARIANCE,v=-1,y=e.CODE_START_A;y<=e.CODE_START_C;y++){var E=rn.patternMatchVariance(s,e.CODE_PATTERNS[y],e.MAX_INDIVIDUAL_VARIANCE);E<p&&(p=E,v=y)}if(v>=0&&t.isRange(Math.max(0,u-(d-u)/2),u,!1))return Int32Array.from([u,d,v]);u+=s[0]+s[1],s=s.slice(2,s.length-1),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,c=!c}throw new te},e.decodeCode=function(t,r,i){rn.recordPattern(t,i,r);for(var o=e.MAX_AVG_VARIANCE,s=-1,u=0;u<e.CODE_PATTERNS.length;u++){var c=e.CODE_PATTERNS[u],f=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);f<o&&(o=f,s=u)}if(s>=0)return s;throw new te},e.prototype.decodeRow=function(t,r,i){var o=i&&i.get(bt.ASSUME_GS1)===!0,s=e.findStartPattern(r),u=s[2],c=0,f=new Uint8Array(20);f[c++]=u;var d;switch(u){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new ce}for(var p=!1,v=!1,y="",E=s[0],T=s[1],C=Int32Array.from([0,0,0,0,0,0]),b=0,P=0,D=u,F=0,j=!0,W=!1,R=!1;!p;){var I=v;switch(v=!1,b=P,P=e.decodeCode(r,C,T),f[c++]=P,P!==e.CODE_STOP&&(j=!0),P!==e.CODE_STOP&&(F++,D+=F*P),E=T,T+=C.reduce(function(Te,Z){return Te+Z},0),P){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new ce}switch(d){case e.CODE_CODE_A:if(P<64)R===W?y+=String.fromCharCode(32+P):y+=String.fromCharCode(32+P+128),R=!1;else if(P<96)R===W?y+=String.fromCharCode(P-64):y+=String.fromCharCode(P+64),R=!1;else switch(P!==e.CODE_STOP&&(j=!1),P){case e.CODE_FNC_1:o&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!W&&R?(W=!0,R=!1):W&&R?(W=!1,R=!1):R=!0;break;case e.CODE_SHIFT:v=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(P<96)R===W?y+=String.fromCharCode(32+P):y+=String.fromCharCode(32+P+128),R=!1;else switch(P!==e.CODE_STOP&&(j=!1),P){case e.CODE_FNC_1:o&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!W&&R?(W=!0,R=!1):W&&R?(W=!1,R=!1):R=!0;break;case e.CODE_SHIFT:v=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(P<100)P<10&&(y+="0"),y+=P;else switch(P!==e.CODE_STOP&&(j=!1),P){case e.CODE_FNC_1:o&&(y.length===0?y+="]C1":y+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}I&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var O=T-E;if(T=r.getNextUnset(T),!r.isRange(T,Math.min(r.getSize(),T+(T-E)/2),!1))throw new te;if(D-=F*b,D%103!==b)throw new pn;var M=y.length;if(M===0)throw new te;M>0&&j&&(d===e.CODE_CODE_C?y=y.substring(0,M-2):y=y.substring(0,M-1));for(var B=(s[1]+s[0])/2,z=E+O/2,L=f.length,fe=new Uint8Array(L),Le=0;Le<L;Le++)fe[Le]=f[Le];var je=[new Ae(B,t),new Ae(z,t)];return new Vn(y,fe,0,je,Re.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(rn),BL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),S1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CE=(function(n){BL(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var o,s,u,c,f=this.counters;f.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(r,f),p=r.getNextSet(d[1]),v=r.getSize(),y,E;do{e.recordPattern(r,p,f);var T=e.toNarrowWidePattern(f);if(T<0)throw new te;y=e.patternToChar(T),this.decodeRowResult+=y,E=p;try{for(var C=(o=void 0,S1(f)),b=C.next();!b.done;b=C.next()){var P=b.value;p+=P}}catch(L){o={error:L}}finally{try{b&&!b.done&&(s=C.return)&&s.call(C)}finally{if(o)throw o.error}}p=r.getNextSet(p)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var D=0;try{for(var F=S1(f),j=F.next();!j.done;j=F.next()){var P=j.value;D+=P}}catch(L){u={error:L}}finally{try{j&&!j.done&&(c=F.return)&&c.call(F)}finally{if(u)throw u.error}}var W=p-E-D;if(p!==v&&W*2<D)throw new te;if(this.usingCheckDigit){for(var R=this.decodeRowResult.length-1,I=0,O=0;O<R;O++)I+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(O));if(this.decodeRowResult.charAt(R)!==e.ALPHABET_STRING.charAt(I%43))throw new pn;this.decodeRowResult=this.decodeRowResult.substring(0,R)}if(this.decodeRowResult.length===0)throw new te;var M;this.extendedMode?M=e.decodeExtended(this.decodeRowResult):M=this.decodeRowResult;var B=(d[1]+d[0])/2,z=E+D/2;return new Vn(M,null,0,[new Ae(B,t),new Ae(z,t)],Re.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),o=t.getNextSet(0),s=0,u=o,c=!1,f=r.length,d=o;d<i;d++)if(t.get(d)!==c)r[s]++;else{if(s===f-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,u-Math.floor((d-u)/2)),u,!1))return[u,d];u+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new te},e.toNarrowWidePattern=function(t){var r,i,o=t.length,s=0,u;do{var c=2147483647;try{for(var f=(r=void 0,S1(t)),d=f.next();!d.done;d=f.next()){var p=d.value;p<c&&p>s&&(c=p)}}catch(T){r={error:T}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}s=c,u=0;for(var v=0,y=0,E=0;E<o;E++){var p=t[E];p>s&&(y|=1<<o-1-E,u++,v+=p)}if(u===3){for(var E=0;E<o&&u>0;E++){var p=t[E];if(p>s&&(u--,p*2>=v))return-1}return y}}while(u>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new te},e.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var u=t.charAt(o+1),c="\0";switch(s){case"+":if(u>="A"&&u<="Z")c=String.fromCharCode(u.charCodeAt(0)+32);else throw new ce;break;case"$":if(u>="A"&&u<="Z")c=String.fromCharCode(u.charCodeAt(0)-64);else throw new ce;break;case"%":if(u>="A"&&u<="E")c=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")c=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")c=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")c=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")c="\0";else if(u==="V")c="@";else if(u==="W")c="`";else if(u==="X"||u==="Y"||u==="Z")c="";else throw new ce;break;case"/":if(u>="A"&&u<="O")c=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")c=":";else throw new ce;break}i+=c,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(rn),UL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),R1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IE=(function(n){UL(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var o,s,u,c,f=this.findAsteriskPattern(r),d=r.getNextSet(f[1]),p=r.getSize(),v=this.counters;v.fill(0),this.decodeRowResult="";var y,E;do{e.recordPattern(r,d,v);var T=this.toPattern(v);if(T<0)throw new te;y=this.patternToChar(T),this.decodeRowResult+=y,E=d;try{for(var C=(o=void 0,R1(v)),b=C.next();!b.done;b=C.next()){var P=b.value;d+=P}}catch(O){o={error:O}}finally{try{b&&!b.done&&(s=C.return)&&s.call(C)}finally{if(o)throw o.error}}d=r.getNextSet(d)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var D=0;try{for(var F=R1(v),j=F.next();!j.done;j=F.next()){var P=j.value;D+=P}}catch(O){u={error:O}}finally{try{j&&!j.done&&(c=F.return)&&c.call(F)}finally{if(u)throw u.error}}if(d===p||!r.get(d))throw new te;if(this.decodeRowResult.length<2)throw new te;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var W=this.decodeExtended(this.decodeRowResult),R=(f[1]+f[0])/2,I=E+D/2;return new Vn(W,null,0,[new Ae(R,t),new Ae(I,t)],Re.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,u=!1,c=o.length,f=0,d=i;d<r;d++)if(t.get(d)!==u)o[f]++;else{if(f===c-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,d]);s+=o[0]+o[1],o.copyWithin(0,2,2+f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,u=!u}throw new te},e.prototype.toPattern=function(t){var r,i,o=0;try{for(var s=R1(t),u=s.next();!u.done;u=s.next()){var c=u.value;o+=c}}catch(E){r={error:E}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var f=0,d=t.length,p=0;p<d;p++){var v=Math.round(t[p]*9/o);if(v<1||v>4)return-1;if((p&1)===0)for(var y=0;y<v;y++)f=f<<1|1;else f<<=v}return f},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new te},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s>="a"&&s<="d"){if(o>=r-1)throw new ce;var u=t.charAt(o+1),c="\0";switch(s){case"d":if(u>="A"&&u<="Z")c=String.fromCharCode(u.charCodeAt(0)+32);else throw new ce;break;case"a":if(u>="A"&&u<="Z")c=String.fromCharCode(u.charCodeAt(0)-64);else throw new ce;break;case"b":if(u>="A"&&u<="E")c=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")c=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")c=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")c=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")c="\0";else if(u==="V")c="@";else if(u==="W")c="`";else if(u>="X"&&u<="Z")c="";else throw new ce;break;case"c":if(u>="A"&&u<="O")c=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")c=":";else throw new ce;break}i+=c,o++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var o=1,s=0,u=r-1;u>=0;u--)s+=o*e.ALPHABET_STRING.indexOf(t.charAt(u)),++o>i&&(o=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new pn},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(rn),jL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),zL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SE=(function(n){jL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var o,s,u=this.decodeStart(r),c=this.decodeEnd(r),f=new Ge;e.decodeMiddle(r,u[1],c[0],f);var d=f.toString(),p=null;i!=null&&(p=i.get(bt.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var v=d.length,y=!1,E=0;try{for(var T=zL(p),C=T.next();!C.done;C=T.next()){var b=C.value;if(v===b){y=!0;break}b>E&&(E=b)}}catch(F){o={error:F}}finally{try{C&&!C.done&&(s=T.return)&&s.call(T)}finally{if(o)throw o.error}}if(!y&&v>E&&(y=!0),!y)throw new ce;var P=[new Ae(u[1],t),new Ae(c[0],t)],D=new Vn(d,null,0,P,Re.ITF,new Date().getTime());return D},e.decodeMiddle=function(t,r,i,o){var s=new Int32Array(10),u=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),u.fill(0),c.fill(0);r<i;){rn.recordPattern(t,r,s);for(var f=0;f<5;f++){var d=2*f;u[f]=s[d],c[f]=s[d+1]}var p=e.decodeDigit(u);o.append(p.toString()),p=this.decodeDigit(c),o.append(p.toString()),s.forEach(function(v){r+=v})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!t.get(o);o--)i--;if(i!==0)throw new te},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new te;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof te&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var o=i.length,s=new Int32Array(o),u=t.getSize(),c=!1,f=0,d=r;s.fill(0);for(var p=r;p<u;p++)if(t.get(p)!==c)s[f]++;else{if(f===o-1){if(rn.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,p];d+=s[0]+s[1],yt.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,c=!c}throw new te},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var u=e.PATTERNS[s],c=rn.patternMatchVariance(t,u,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new te},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(rn),HL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Vu=(function(n){HL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,o=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,s);var u=i[0];o=i[1];var c=u-(o-u);c>=0&&(r=t.isRange(c,u,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new ce;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new ce;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,o){return this.findGuardPattern(t,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(t,r,i,o,s){var u=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,f=r,d=o.length,p=i,v=r;v<u;v++)if(t.get(v)!==p)s[c]++;else{if(c===d-1){if(rn.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,v]);f+=s[0]+s[1];for(var y=s.slice(2,s.length),E=0;E<c-1;E++)s[E]=y[E];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,p=!p}throw new te},e.decodeDigit=function(t,r,i,o){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,u=-1,c=o.length,f=0;f<c;f++){var d=o[f],p=rn.patternMatchVariance(r,d,e.MAX_INDIVIDUAL_VARIANCE);p<s&&(s=p,u=f)}if(u>=0)return u;throw new te},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(rn),GL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WL=(function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),u=n.parseExtensionString(s),c=[new Ae((r[0]+r[1])/2,e),new Ae(o,e)],f=new Vn(s,null,0,c,Re.UPC_EAN_EXTENSION,new Date().getTime());return u!=null&&f.putAllMetadata(u),f},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var u=e.getSize(),c=t[1],f=0,d=0;d<5&&c<u;d++){var p=Vu.decodeDigit(e,s,c,Vu.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var v=(i=void 0,GL(s)),y=v.next();!y.done;y=v.next()){var E=y.value;c+=E}}catch(C){i={error:C}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}p>=10&&(f|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new te;var T=this.determineCheckDigit(f);if(n.extensionChecksum(r.toString())!==T)throw new te;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new te},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[Cn.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),o=r%100,s=o<10?"0"+o:o.toString();return t+i+"."+s},n})(),$L=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KL=(function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),u=n.parseExtensionString(s),c=[new Ae((r[0]+r[1])/2,e),new Ae(o,e)],f=new Vn(s,null,0,c,Re.UPC_EAN_EXTENSION,new Date().getTime());return u!=null&&f.putAllMetadata(u),f},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var u=e.getSize(),c=t[1],f=0,d=0;d<2&&c<u;d++){var p=Vu.decodeDigit(e,s,c,Vu.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var v=(i=void 0,$L(s)),y=v.next();!y.done;y=v.next()){var E=y.value;c+=E}}catch(T){i={error:T}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}p>=10&&(f|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new te;if(parseInt(r.toString())%4!==f)throw new te;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[Cn.ISSUE_NUMBER,parseInt(e)]])},n})(),qL=(function(){function n(){}return n.decodeRow=function(e,t,r){var i=Vu.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new WL;return o.decodeRow(e,t,i)}catch{var s=new KL;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n})(),XL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),en=(function(n){XL(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(u){return Int32Array.from(u)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=o}return t}return e.prototype.decodeRow=function(t,r,i){var o=e.findStartGuardPattern(r),s=i==null?null:i.get(bt.NEED_RESULT_POINT_CALLBACK);if(s!=null){var u=new Ae((o[0]+o[1])/2,t);s.foundPossibleResultPoint(u)}var c=this.decodeMiddle(r,o,this.decodeRowStringBuffer),f=c.rowOffset,d=c.resultString;if(s!=null){var p=new Ae(f,t);s.foundPossibleResultPoint(p)}var v=e.decodeEnd(r,f);if(s!=null){var y=new Ae((v[0]+v[1])/2,t);s.foundPossibleResultPoint(y)}var E=v[1],T=E+(E-v[0]);if(T>=r.getSize()||!r.isRange(E,T,!1))throw new te;var C=d.toString();if(C.length<8)throw new ce;if(!e.checkChecksum(C))throw new pn;var b=(o[1]+o[0])/2,P=(v[1]+v[0])/2,D=this.getBarcodeFormat(),F=[new Ae(b,t),new Ae(P,t)],j=new Vn(C,null,0,F,D,new Date().getTime()),W=0;try{var R=qL.decodeRow(t,r,v[1]);j.putMetadata(Cn.UPC_EAN_EXTENSION,R.getText()),j.putAllMetadata(R.getResultMetadata()),j.addResultPoints(R.getResultPoints()),W=R.getText().length}catch{}var I=i==null?null:i.get(bt.ALLOWED_EAN_EXTENSIONS);if(I!=null){var O=!1;for(var M in I)if(W.toString()===M){O=!0;break}if(!O)throw new te}return D===Re.EAN_13||Re.UPC_A,j},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new ce;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new ce;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Vu),YL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),RE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gg=(function(n){YL(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,u,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=t.getSize(),p=r[1],v=0,y=0;y<6&&p<d;y++){var E=en.decodeDigit(t,f,p,en.L_AND_G_PATTERNS);i+=String.fromCharCode(48+E%10);try{for(var T=(o=void 0,RE(f)),C=T.next();!C.done;C=T.next()){var b=C.value;p+=b}}catch(j){o={error:j}}finally{try{C&&!C.done&&(s=T.return)&&s.call(T)}finally{if(o)throw o.error}}E>=10&&(v|=1<<5-y)}i=e.determineFirstDigit(i,v);var P=en.findGuardPattern(t,p,!0,en.MIDDLE_PATTERN,new Int32Array(en.MIDDLE_PATTERN.length).fill(0));p=P[1];for(var y=0;y<6&&p<d;y++){var E=en.decodeDigit(t,f,p,en.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var D=(u=void 0,RE(f)),F=D.next();!F.done;F=D.next()){var b=F.value;p+=b}}catch(R){u={error:R}}finally{try{F&&!F.done&&(c=D.return)&&c.call(D)}finally{if(u)throw u.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Re.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new te},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(en),QL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),PE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bE=(function(n){QL(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,u,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=t.getSize(),p=r[1],v=0;v<4&&p<d;v++){var y=en.decodeDigit(t,f,p,en.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var E=(o=void 0,PE(f)),T=E.next();!T.done;T=E.next()){var C=T.value;p+=C}}catch(F){o={error:F}}finally{try{T&&!T.done&&(s=E.return)&&s.call(E)}finally{if(o)throw o.error}}}var b=en.findGuardPattern(t,p,!0,en.MIDDLE_PATTERN,new Int32Array(en.MIDDLE_PATTERN.length).fill(0));p=b[1];for(var v=0;v<4&&p<d;v++){var y=en.decodeDigit(t,f,p,en.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var P=(u=void 0,PE(f)),D=P.next();!D.done;D=P.next()){var C=D.value;p+=C}}catch(W){u={error:W}}finally{try{D&&!D.done&&(c=P.return)&&c.call(P)}finally{if(u)throw u.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Re.EAN_8},e})(en),ZL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),DE=(function(n){ZL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new Gg,t}return e.prototype.getBarcodeFormat=function(){return Re.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new Vn(r.substring(1),null,null,t.getResultPoints(),Re.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new te},e.prototype.reset=function(){this.ean13Reader.reset()},e})(en),JL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),eF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OE=(function(n){JL(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,u=this.decodeMiddleCounters.map(function(C){return C});u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=t.getSize(),f=r[1],d=0,p=0;p<6&&f<c;p++){var v=e.decodeDigit(t,u,f,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);try{for(var y=(o=void 0,eF(u)),E=y.next();!E.done;E=y.next()){var T=E.value;f+=T}}catch(C){o={error:C}}finally{try{E&&!E.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}v>=10&&(d|=1<<5-p)}return e.determineNumSysAndCheckDigit(new Ge(i),d),f},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return en.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){t.insert(0,"0"+i),t.append("0"+o);return}throw te.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Re.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new Ge;i.append(t.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(en),tF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),NE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P1=(function(n){tF(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(bt.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(Re.EAN_13)>-1&&o.push(new Gg),i.indexOf(Re.UPC_A)>-1&&o.push(new DE),i.indexOf(Re.EAN_8)>-1&&o.push(new bE),i.indexOf(Re.UPC_E)>-1&&o.push(new OE)),o.length===0&&(o.push(new Gg),o.push(new DE),o.push(new bE),o.push(new OE)),r.readers=o,r}return e.prototype.decodeRow=function(t,r,i){var o,s;try{for(var u=NE(this.readers),c=u.next();!c.done;c=u.next()){var f=c.value;try{var d=f.decodeRow(t,r,i),p=d.getBarcodeFormat()===Re.EAN_13&&d.getText().charAt(0)==="0",v=i==null?null:i.get(bt.POSSIBLE_FORMATS),y=v==null||v.includes(Re.UPC_A);if(p&&y){var E=d.getRawBytes(),T=new Vn(d.getText().substring(1),E,E?E.length:null,d.getResultPoints(),Re.UPC_A);return T.putAllMetadata(d.getResultMetadata()),T}return d}catch{}}}catch(C){o={error:C}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}throw new te},e.prototype.reset=function(){var t,r;try{for(var i=NE(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;s.reset()}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e})(rn),nF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),rF=(function(n){nF(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var o=this.getValidRowData(r);if(!o)throw new te;var s=this.codaBarDecodeRow(o.row);if(!s)throw new te;return new Vn(s,null,0,[new Ae(o.left,t),new Ae(o.right,t)],Re.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var o=r.lastIndexOf(!0);if(o<=i)return null;r=r.slice(i,o+1);for(var s=[],u=r[0],c=1,f=1;f<r.length;f++)r[f]===u?c++:(u=r[f],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,f){return(c+f)/2},0));t.length>0;){var o=t.splice(0,8).splice(0,7),s=o.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var u=r.join("");return this.validCodaBarString(u)?u:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e})(rn),iF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),oF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qs=(function(n){iF(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(rn.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new te},e.count=function(t){return ot.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]>o&&(o=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]<o&&(o=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,o=t[0]+t[1],s=o+t[2]+t[3],u=o/s;if(u>=e.MIN_FINDER_PATTERN_RATIO&&u<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var d=oF(t),p=d.next();!p.done;p=d.next()){var v=p.value;v>f&&(f=v),v<c&&(c=v)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return f<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(rn),Vd=(function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n})(),NS=(function(){function n(e,t,r,i,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Ae(r,o)),this.resultPoints.push(new Ae(i,o))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n})(),sF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mu=(function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,o,s=0;try{for(var u=sF(e),c=u.next();!c.done;c=u.next()){var f=c.value;s+=f}}catch(P){i={error:P}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}for(var d=0,p=0,v=e.length,y=0;y<v-1;y++){var E=void 0;for(E=1,p|=1<<y;E<e[y];E++,p&=~(1<<y)){var T=n.combins(s-E-1,v-y-2);if(r&&p===0&&s-E-(v-y-1)>=v-y-1&&(T-=n.combins(s-E-(v-y),v-y-2)),v-y-1>1){for(var C=0,b=s-E-(v-y-2);b>t;b--)C+=n.combins(s-E-b-1,v-y-3);T-=C*(v-1-y)}else s-E>t&&T--;d+=T}s-=E}return d},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var o=1,s=1,u=e;u>r;u--)o*=u,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},n})(),aF=(function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new gn(r),o=0,s=e[0],u=s.getRightChar().getValue(),c=11;c>=0;--c)(u&1<<c)!==0&&i.set(o),o++;for(var c=1;c<e.length;++c){for(var f=e[c],d=f.getLeftChar().getValue(),p=11;p>=0;--p)(d&1<<p)!==0&&i.set(o),o++;if(f.getRightChar()!==null)for(var v=f.getRightChar().getValue(),p=11;p>=0;--p)(v&1<<p)!==0&&i.set(o),o++}return i},n})(),Gs=(function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n})(),jv=(function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n})(),uF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Hr=(function(n){uF(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(jv),lF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ws=(function(n){lF(e,n);function e(t,r,i){var o=n.call(this,t)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(jv),cF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),iu=(function(n){cF(e,n);function e(t,r,i){var o=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new ce;return o.firstDigit=r,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(jv),zh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fF=(function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,o,s,u,c,f;if(!e)return null;if(e.length<2)throw new te;var d=e.substring(0,2);try{for(var p=zh(n.TWO_DIGIT_DATA_LENGTH),v=p.next();!v.done;v=p.next()){var y=v.value;if(y[0]===d)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,y[2],e):n.processFixedAI(2,y[1],e)}}catch(W){t={error:W}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}if(e.length<3)throw new te;var E=e.substring(0,3);try{for(var T=zh(n.THREE_DIGIT_DATA_LENGTH),C=T.next();!C.done;C=T.next()){var y=C.value;if(y[0]===E)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,y[2],e):n.processFixedAI(3,y[1],e)}}catch(W){i={error:W}}finally{try{C&&!C.done&&(o=T.return)&&o.call(T)}finally{if(i)throw i.error}}try{for(var b=zh(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),P=b.next();!P.done;P=b.next()){var y=P.value;if(y[0]===E)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],e):n.processFixedAI(4,y[1],e)}}catch(W){s={error:W}}finally{try{P&&!P.done&&(u=b.return)&&u.call(b)}finally{if(s)throw s.error}}if(e.length<4)throw new te;var D=e.substring(0,4);try{for(var F=zh(n.FOUR_DIGIT_DATA_LENGTH),j=F.next();!j.done;j=F.next()){var y=j.value;if(y[0]===D)return y[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,y[2],e):n.processFixedAI(4,y[1],e)}}catch(W){c={error:W}}finally{try{j&&!j.done&&(f=F.return)&&f.call(F)}finally{if(c)throw c.error}}throw new te},n.processFixedAI=function(e,t,r){if(r.length<e)throw new te;var i=r.substring(0,e);if(r.length<e+t)throw new te;var o=r.substring(e,e+t),s=r.substring(e+t),u="("+i+")"+o,c=n.parseFieldsInGeneralPurpose(s);return c==null?u:u+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),o;r.length<e+t?o=r.length:o=e+t;var s=r.substring(e,o),u=r.substring(o),c="("+i+")"+s,f=n.parseFieldsInGeneralPurpose(u);return f==null?c:c+f},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n})(),fd=(function(){function n(e){this.buffer=new Ge,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var o=this.decodeGeneralPurposeField(r,i),s=fF.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?i=""+o.getRemainingValue():i=null,r===o.getNewPosition())break;r=o.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new iu(this.information.getSize(),iu.FNC1,iu.FNC1):new iu(this.information.getSize(),t-1,iu.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,o=(r-8)%11;return new iu(e+7,i,o)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,o=0;o<r;++o)e.get(t+o)&&(i|=1<<r-o-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Ws(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Ws(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Ws(this.current.getPosition(),this.buffer.toString()):t=new Ws(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Gs(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Ws(this.current.getPosition(),this.buffer.toString());return new Gs(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Gs(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Ws(this.current.getPosition(),this.buffer.toString());return new Gs(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Gs(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Ws(this.current.getPosition(),this.buffer.toString());return new Gs(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Gs(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Hr(e+5,Hr.FNC1);if(t>=5&&t<15)return new Hr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Hr(e+7,""+(r+1));if(r>=90&&r<116)return new Hr(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new ce}return new Hr(e+8,o)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Hr(e+5,Hr.FNC1);if(t>=5&&t<15)return new Hr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Hr(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new lf("Decoding invalid alphanumeric value: "+r)}return new Hr(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n})(),kS=(function(){function n(e){this.information=e,this.generalDecoder=new fd(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n})(),hF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),$r=(function(n){hF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,o=0;o<13;o++){var s=t.charAt(o+r).charCodeAt(0)-48;i+=(o&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(kS),dF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pF=(function(n){dF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ge;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})($r),gF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mF=(function(n){gF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ge;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(kS),vF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),hd=(function(n){vF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,o);for(var s=this.checkWeight(o),u=1e5,c=0;c<5;++c)s/u===0&&t.append("0"),u/=10;t.append(s)},e})($r),yF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),MS=(function(n){yF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+hd.GTIN_SIZE+e.WEIGHT_SIZE)throw new te;var t=new Ge;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+hd.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(hd),_F=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),wF=(function(n){_F(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(MS),xF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),EF=(function(n){xF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(MS),AF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),TF=(function(n){AF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+$r.GTIN_SIZE)throw new te;var t=new Ge;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+$r.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+$r.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})($r),CF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),IF=(function(n){CF(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+$r.GTIN_SIZE)throw new te;var t=new Ge;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+$r.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+$r.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+$r.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})($r),SF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Uo=(function(n){SF(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.dateCode=i,o.firstAIdigits=r,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new te;var t=new Ge;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var o=i%32;i/=32;var s=i%12+1;i/=12;var u=i;u/10===0&&t.append("0"),t.append(u),s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(hd);function RF(n){try{if(n.get(1))return new pF(n);if(!n.get(2))return new mF(n);var e=fd.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new wF(n);case 5:return new EF(n)}var t=fd.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new TF(n);case 13:return new IF(n)}var r=fd.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Uo(n,"310","11");case 57:return new Uo(n,"320","11");case 58:return new Uo(n,"310","13");case 59:return new Uo(n,"320","13");case 60:return new Uo(n,"310","15");case 61:return new Uo(n,"320","15");case 62:return new Uo(n,"310","17");case 63:return new Uo(n,"320","17")}}catch(i){throw console.log(i),new lf("unknown decoder: "+n)}}var kE=(function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n})(),PF=(function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,o){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n})(),bF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jo=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DF=(function(n){bF(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(u){if(u instanceof te){if(!this.pairs.length)throw new te;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new te},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,o,s=r;s<this.rows.length;s++){var u=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,jo(t)),f=c.next();!f.done;f=c.next()){var d=f.value;this.pairs.push(d.getPairs())}}catch(v){i={error:v}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(u.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(t);p.push(u);try{return this.checkRows(p,s+1)}catch(v){console.log(v)}}}throw new te},e.isValidSequence=function(t){var r,i;try{for(var o=jo(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var u=s.value;if(!(t.length>u.length)){for(var c=!0,f=0;f<t.length;f++)if(t[f].getFinderPattern().getValue()!==u[f]){c=!1;break}if(c)return!0}}}catch(d){r={error:d}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,o=!1,s=!1;i<this.rows.length;){var u=this.rows[i];if(u.getRowNumber()>t){s=u.isEquivalent(this.pairs);break}o=u.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new PF(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,o,s,u,c,f;try{for(var d=jo(r),p=d.next();!p.done;p=d.next()){var v=p.value;if(v.getPairs().length!==t.length){var y=!0;try{for(var E=(s=void 0,jo(v.getPairs())),T=E.next();!T.done;T=E.next()){var C=T.value,b=!1;try{for(var P=(c=void 0,jo(t)),D=P.next();!D.done;D=P.next()){var F=D.value;if(kE.equals(C,F)){b=!0;break}}}catch(j){c={error:j}}finally{try{D&&!D.done&&(f=P.return)&&f.call(P)}finally{if(c)throw c.error}}b||(y=!1)}}catch(j){s={error:j}}finally{try{T&&!T.done&&(u=E.return)&&u.call(E)}finally{if(s)throw s.error}}}}}catch(j){i={error:j}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,o,s,u,c,f;try{for(var d=jo(r),p=d.next();!p.done;p=d.next()){var v=p.value,y=!0;try{for(var E=(s=void 0,jo(t)),T=E.next();!T.done;T=E.next()){var C=T.value,b=!1;try{for(var P=(c=void 0,jo(v.getPairs())),D=P.next();!D.done;D=P.next()){var F=D.value;if(C.equals(F)){b=!0;break}}}catch(j){c={error:j}}finally{try{D&&!D.done&&(f=P.return)&&f.call(P)}finally{if(c)throw c.error}}if(!b){y=!1;break}}}catch(j){s={error:j}}finally{try{T&&!T.done&&(u=E.return)&&u.call(E)}finally{if(s)throw s.error}}if(y)return!0}}catch(j){i={error:j}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=aF.buildBitArray(t),i=RF(r),o=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),u=t[t.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],u[0],u[1]];return new Vn(o,null,null,c,Re.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,u=1;u<this.pairs.size();++u){var c=this.pairs.get(u);o+=c.getLeftChar().getChecksumPortion(),s++;var f=c.getRightChar();f!=null&&(o+=f.getChecksumPortion(),s++)}o%=211;var d=211*(s-4)+o;return d===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var o=r.length%2===0;this.startFromEven&&(o=!o);var s,u=!0,c=-1;do this.findNextPair(t,r,c),s=this.parseFoundFinderPattern(t,i,o),s===null?c=e.getNextSecondBar(t,this.startEnd[0]):u=!1;while(u);var f=this.decodeDataCharacter(t,s,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new te;var d;try{d=this.decodeDataCharacter(t,s,o,!1)}catch(p){d=null,console.log(p)}return new kE(f,d,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s=t.getSize(),u;if(i>=0)u=i;else if(this.isEmptyPair(r))u=0;else{var c=r[r.length-1];u=c.getFinderPattern().getStartEnd()[1]}var f=r.length%2!==0;this.startFromEven&&(f=!f);for(var d=!1;u<s&&(d=!t.get(u),!!d);)u++;for(var p=0,v=u,y=u;y<s;y++)if(t.get(y)!==d)o[p]++;else{if(p===3){if(f&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=v,this.startEnd[1]=y;return}f&&e.reverseCounters(o),v+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,p--}else p++;o[p]=1,d=!d}throw new te},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var o=t[i];t[i]=t[r-i-1],t[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(t,r,i){var o,s,u;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,o=this.startEnd[0]-c,s=c,u=this.startEnd[1]}else s=this.startEnd[0],u=t.getNextUnset(this.startEnd[1]+1),o=u-this.startEnd[1];var f=this.getDecodeFinderCounters();yt.arraycopy(f,0,f,1,f.length-1),f[0]=o;var d;try{d=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new NS(d,[s,u],s,u,r)},e.prototype.decodeDataCharacter=function(t,r,i,o){for(var s=this.getDataCharacterCounters(),u=0;u<s.length;u++)s[u]=0;if(o)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var c=0,f=s.length-1;c<f;c++,f--){var d=s[c];s[c]=s[f],s[f]=d}}var p=17,v=ot.sum(new Int32Array(s))/p,y=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(v-y)/y>.3)throw new te;for(var E=this.getOddCounts(),T=this.getEvenCounts(),C=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var P=1*s[c]/v,D=P+.5;if(D<1){if(P<.3)throw new te;D=1}else if(D>8){if(P>8.7)throw new te;D=8}var F=c/2;(c&1)===0?(E[F]=D,C[F]=P-D):(T[F]=D,b[F]=P-D)}this.adjustOddEvenCounts(p);for(var j=4*r.getValue()+(i?0:2)+(o?0:1)-1,W=0,R=0,c=E.length-1;c>=0;c--){if(e.isNotA1left(r,i,o)){var I=e.WEIGHTS[j][2*c];R+=E[c]*I}W+=E[c]}for(var O=0,c=T.length-1;c>=0;c--)if(e.isNotA1left(r,i,o)){var I=e.WEIGHTS[j][2*c+1];O+=T[c]*I}var M=R+O;if((W&1)!==0||W>13||W<4)throw new te;var B=(13-W)/2,z=e.SYMBOL_WIDEST[B],L=9-z,fe=mu.getRSSvalue(E,z,!0),Le=mu.getRSSvalue(T,L,!1),je=e.EVEN_TOTAL_SUBSET[B],Te=e.GSUM[B],Z=fe*je+Le+Te;return new Vd(Z,M)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=ot.sum(new Int32Array(this.getOddCounts())),i=ot.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);var u=!1,c=!1;i>13?c=!0:i<4&&(u=!0);var f=r+i-t,d=(r&1)===1,p=(i&1)===0;if(f===1)if(d){if(p)throw new te;s=!0}else{if(!p)throw new te;c=!0}else if(f===-1)if(d){if(p)throw new te;o=!0}else{if(!p)throw new te;u=!0}else if(f===0){if(d){if(!p)throw new te;r<i?(o=!0,c=!0):(s=!0,u=!0)}else if(p)throw new te}else throw new te;if(o){if(s)throw new te;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(c)throw new te;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(qs),OF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),NF=(function(n){OF(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(Vd),kF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),b1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ME=(function(n){kF(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var o,s,u,c,f=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,f),r.reverse();var d=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,d),r.reverse();try{for(var p=b1(this.possibleLeftPairs),v=p.next();!v.done;v=p.next()){var y=v.value;if(y.getCount()>1)try{for(var E=(u=void 0,b1(this.possibleRightPairs)),T=E.next();!T.done;T=E.next()){var C=T.value;if(C.getCount()>1&&e.checkChecksum(y,C))return e.constructResult(y,C)}}catch(b){u={error:b}}finally{try{T&&!T.done&&(c=E.return)&&c.call(E)}finally{if(u)throw u.error}}}}catch(b){o={error:b}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}throw new te},e.addOrTally=function(t,r){var i,o;if(r!=null){var s=!1;try{for(var u=b1(t),c=u.next();!c.done;c=u.next()){var f=c.value;if(f.getValue()===r.getValue()){f.incrementCount(),s=!0;break}}}catch(d){i={error:d}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),o=new String(i).toString(),s=new Ge,u=13-o.length;u>0;u--)s.append("0");s.append(o);for(var c=0,u=0;u<13;u++){var f=s.charAt(u).charCodeAt(0)-48;c+=(u&1)===0?3*f:f}c=10-c%10,c===10&&(c=0),s.append(c.toString());var d=t.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new Vn(s.toString(),null,0,[d[0],d[1],p[0],p[1]],Re.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(t,r,i,o){try{var s=this.findFinderPattern(t,r),u=this.parseFoundFinderPattern(t,i,r,s),c=o==null?null:o.get(bt.NEED_RESULT_POINT_CALLBACK);if(c!=null){var f=(s[0]+s[1])/2;r&&(f=t.getSize()-1-f),c.foundPossibleResultPoint(new Ae(f,i))}var d=this.decodeDataCharacter(t,u,!0),p=this.decodeDataCharacter(t,u,!1);return new NF(1597*d.getValue()+p.getValue(),d.getChecksumPortion()+4*p.getChecksumPortion(),u)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)rn.recordPatternInReverse(t,r.getStartEnd()[0],o);else{rn.recordPattern(t,r.getStartEnd()[1]+1,o);for(var u=0,c=o.length-1;u<c;u++,c--){var f=o[u];o[u]=o[c],o[c]=f}}for(var d=i?16:15,p=ot.sum(new Int32Array(o))/d,v=this.getOddCounts(),y=this.getEvenCounts(),E=this.getOddRoundingErrors(),T=this.getEvenRoundingErrors(),u=0;u<o.length;u++){var C=o[u]/p,b=Math.floor(C+.5);b<1?b=1:b>8&&(b=8);var P=Math.floor(u/2);(u&1)===0?(v[P]=b,E[P]=C-b):(y[P]=b,T[P]=C-b)}this.adjustOddEvenCounts(i,d);for(var D=0,F=0,u=v.length-1;u>=0;u--)F*=9,F+=v[u],D+=v[u];for(var j=0,W=0,u=y.length-1;u>=0;u--)j*=9,j+=y[u],W+=y[u];var R=F+3*j;if(i){if((D&1)!==0||D>12||D<4)throw new te;var I=(12-D)/2,O=e.OUTSIDE_ODD_WIDEST[I],M=9-O,B=mu.getRSSvalue(v,O,!1),z=mu.getRSSvalue(y,M,!0),L=e.OUTSIDE_EVEN_TOTAL_SUBSET[I],fe=e.OUTSIDE_GSUM[I];return new Vd(B*L+z+fe,R)}else{if((W&1)!==0||W>10||W<4)throw new te;var I=(10-W)/2,O=e.INSIDE_ODD_WIDEST[I],M=9-O,B=mu.getRSSvalue(v,O,!0),z=mu.getRSSvalue(y,M,!1),Le=e.INSIDE_ODD_TOTAL_SUBSET[I],fe=e.INSIDE_GSUM[I];return new Vd(z*Le+B+fe,R)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=t.getSize(),s=!1,u=0;u<o&&(s=!t.get(u),r!==s);)u++;for(var c=0,f=u,d=u;d<o;d++)if(t.get(d)!==s)i[c]++;else{if(c===3){if(qs.isFinderPattern(i))return[f,d];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new te},e.prototype.parseFoundFinderPattern=function(t,r,i,o){for(var s=t.get(o[0]),u=o[0]-1;u>=0&&s!==t.get(u);)u--;u++;var c=o[0]-u,f=this.getDecodeFinderCounters(),d=new Int32Array(f.length);yt.arraycopy(f,0,d,1,f.length-1),d[0]=c;var p=this.parseFinderValue(d,e.FINDER_PATTERNS),v=u,y=o[1];return i&&(v=t.getSize()-1-v,y=t.getSize()-1-y),new NS(p,[u,o[1]],v,y,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=ot.sum(new Int32Array(this.getOddCounts())),o=ot.sum(new Int32Array(this.getEvenCounts())),s=!1,u=!1,c=!1,f=!1;t?(i>12?u=!0:i<4&&(s=!0),o>12?f=!0:o<4&&(c=!0)):(i>11?u=!0:i<5&&(s=!0),o>10?f=!0:o<4&&(c=!0));var d=i+o-r,p=(i&1)===(t?1:0),v=(o&1)===1;if(d===1)if(p){if(v)throw new te;u=!0}else{if(!v)throw new te;f=!0}else if(d===-1)if(p){if(v)throw new te;s=!0}else{if(!v)throw new te;c=!0}else if(d===0){if(p){if(!v)throw new te;i<o?(s=!0,f=!0):(u=!0,c=!0)}else if(v)throw new te}else throw new te;if(s){if(u)throw new te;qs.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&qs.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new te;qs.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&qs.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(qs),MF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),sc=(function(n){MF(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(bt.POSSIBLE_FORMATS):null,o=t&&t.get(bt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;return i&&((i.includes(Re.EAN_13)||i.includes(Re.UPC_A)||i.includes(Re.EAN_8)||i.includes(Re.UPC_E))&&r.readers.push(new P1(t)),i.includes(Re.CODE_39)&&r.readers.push(new CE(o)),i.includes(Re.CODE_93)&&r.readers.push(new IE),i.includes(Re.CODE_128)&&r.readers.push(new TE),i.includes(Re.ITF)&&r.readers.push(new SE),i.includes(Re.CODABAR)&&r.readers.push(new rF),i.includes(Re.RSS_14)&&r.readers.push(new ME),i.includes(Re.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new DF))),r.readers.length===0&&(r.readers.push(new P1(t)),r.readers.push(new CE),r.readers.push(new IE),r.readers.push(new P1(t)),r.readers.push(new TE),r.readers.push(new SE),r.readers.push(new ME)),r}return e.prototype.decodeRow=function(t,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,r,i)}catch{}throw new te},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(rn),LF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){LF(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new sc(r),t,r)||this}return e})(Zu);var LE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lt=(function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),at=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),FF=(function(){function n(e,t,r,i,o,s){var u,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var f=0,d=s.getECCodewords(),p=s.getECBlocks();try{for(var v=LE(p),y=v.next();!y.done;y=v.next()){var E=y.value;f+=E.getCount()*(E.getDataCodewords()+d)}}catch(T){u={error:T}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(u)throw u.error}}this.totalCodewords=f}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new ce;try{for(var o=LE(n.VERSIONS),s=o.next();!s.done;s=o.next()){var u=s.value;if(u.symbolSizeRows===e&&u.symbolSizeColumns===t)return u}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new ce},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new lt(5,new at(1,3))),new n(2,12,12,10,10,new lt(7,new at(1,5))),new n(3,14,14,12,12,new lt(10,new at(1,8))),new n(4,16,16,14,14,new lt(12,new at(1,12))),new n(5,18,18,16,16,new lt(14,new at(1,18))),new n(6,20,20,18,18,new lt(18,new at(1,22))),new n(7,22,22,20,20,new lt(20,new at(1,30))),new n(8,24,24,22,22,new lt(24,new at(1,36))),new n(9,26,26,24,24,new lt(28,new at(1,44))),new n(10,32,32,14,14,new lt(36,new at(1,62))),new n(11,36,36,16,16,new lt(42,new at(1,86))),new n(12,40,40,18,18,new lt(48,new at(1,114))),new n(13,44,44,20,20,new lt(56,new at(1,144))),new n(14,48,48,22,22,new lt(68,new at(1,174))),new n(15,52,52,24,24,new lt(42,new at(2,102))),new n(16,64,64,14,14,new lt(56,new at(2,140))),new n(17,72,72,16,16,new lt(36,new at(4,92))),new n(18,80,80,18,18,new lt(48,new at(4,114))),new n(19,88,88,20,20,new lt(56,new at(4,144))),new n(20,96,96,22,22,new lt(68,new at(4,174))),new n(21,104,104,24,24,new lt(56,new at(6,136))),new n(22,120,120,18,18,new lt(68,new at(6,175))),new n(23,132,132,20,20,new lt(62,new at(8,163))),new n(24,144,144,22,22,new lt(62,new at(8,156),new at(2,155))),new n(25,8,18,6,16,new lt(7,new at(1,5))),new n(26,8,32,6,14,new lt(11,new at(1,10))),new n(27,12,26,10,24,new lt(14,new at(1,16))),new n(28,12,36,10,16,new lt(18,new at(1,22))),new n(29,16,36,14,16,new lt(24,new at(1,32))),new n(30,16,48,14,22,new lt(28,new at(1,49)))]},n.VERSIONS=n.buildVersions(),n})(),VF=(function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new ce;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new bi(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return FF.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),u=!1,c=!1,f=!1,d=!1;do if(r===o&&i===0&&!u)e[t++]=this.readCorner1(o,s)&255,r-=2,i+=2,u=!0;else if(r===o-2&&i===0&&(s&3)!==0&&!c)e[t++]=this.readCorner2(o,s)&255,r-=2,i+=2,c=!0;else if(r===o+4&&i===2&&(s&7)===0&&!f)e[t++]=this.readCorner3(o,s)&255,r-=2,i+=2,f=!0;else if(r===o-2&&i===0&&(s&7)===4&&!d)e[t++]=this.readCorner4(o,s)&255,r-=2,i+=2,d=!0;else{do r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r+=2,i-=2;while(r<o&&i>=0);r+=3,i+=1}while(r<o||i<s);if(t!==this.version.getTotalCodewords())throw new ce;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var o=0;return this.readModule(e-2,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t,r,i)&&(o|=1),o<<=1,this.readModule(e,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e,t,r,i)&&(o|=1),o},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Oe("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=t/i|0,u=r/o|0,c=s*i,f=u*o,d=new bi(f,c),p=0;p<s;++p)for(var v=p*i,y=0;y<u;++y)for(var E=y*o,T=0;T<i;++T)for(var C=p*(i+2)+1+T,b=v+T,P=0;P<o;++P){var D=y*(o+2)+1+P;if(e.get(D,C)){var F=E+P;d.set(F,b)}}return d},n})(),FE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BF=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,o,s,u=t.getECBlocks(),c=0,f=u.getECBlocks();try{for(var d=FE(f),p=d.next();!p.done;p=d.next()){var v=p.value;c+=v.getCount()}}catch(fe){r={error:fe}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var y=new Array(c),E=0;try{for(var T=FE(f),C=T.next();!C.done;C=T.next())for(var v=C.value,b=0;b<v.getCount();b++){var P=v.getDataCodewords(),D=u.getECCodewords()+P;y[E++]=new n(P,new Uint8Array(D))}}catch(fe){o={error:fe}}finally{try{C&&!C.done&&(s=T.return)&&s.call(T)}finally{if(o)throw o.error}}for(var F=y[0].codewords.length,j=F-u.getECCodewords(),W=j-1,R=0,b=0;b<W;b++)for(var I=0;I<E;I++)y[I].codewords[b]=e[R++];for(var O=t.getVersionNumber()===24,M=O?8:E,I=0;I<M;I++)y[I].codewords[j-1]=e[R++];for(var B=y[0].codewords.length,b=j;b<B;b++)for(var I=0;I<E;I++){var z=O?(I+8)%E:I,L=O&&z>7?b-1:b;y[z].codewords[L]=e[R++]}if(R!==e.length)throw new Oe;return y},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),LS=(function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Oe(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var s=8-r,u=e<s?e:s,c=s-u,f=255>>8-u<<c;t=(o[i]&f)>>c,e-=u,r+=u,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|o[i]&255,i++,e-=8;if(e>0){var c=8-e,f=255>>c<<c;t=t<<e|(o[i]&f)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n})(),Zt;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Zt||(Zt={}));var UF=(function(){function n(){}return n.decode=function(e){var t=new LS(e),r=new Ge,i=new Ge,o=new Array,s=Zt.ASCII_ENCODE;do if(s===Zt.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case Zt.C40_ENCODE:this.decodeC40Segment(t,r);break;case Zt.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Zt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Zt.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Zt.BASE256_ENCODE:this.decodeBase256Segment(t,r,o);break;default:throw new ce}s=Zt.ASCII_ENCODE}while(s!==Zt.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new hp(e,r.toString(),o.length===0?null:o,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var o=e.readBits(8);if(o===0)throw new ce;if(o<=128)return i&&(o+=128),t.append(String.fromCharCode(o-1)),Zt.ASCII_ENCODE;if(o===129)return Zt.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&t.append("0"),t.append(""+s)}else switch(o){case 230:return Zt.C40_ENCODE;case 231:return Zt.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Zt.ANSIX12_ENCODE;case 239:return Zt.TEXT_ENCODE;case 240:return Zt.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new ce;break}}while(e.available()>0);return Zt.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var u=0;u<3;u++){var c=i[u];switch(o){case 0:if(c<3)o=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new ce;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new ce}o=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),o=0;break;default:throw new ce}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var u=0;u<3;u++){var c=i[u];switch(o){case 0:if(c<3)o=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new ce;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new ce}o=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f),o=0}else throw new ce;break;default:throw new ce}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var s=r[o];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new ce;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,o=Math.floor(i/1600);r[0]=o,i-=o*1600,o=Math.floor(i/40),r[1]=o,r[2]=i-o*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new ce;for(var u=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new ce;u[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(u);try{t.append(Or.decode(u,Je.ISO88591))}catch(f){throw new lf("Platform does not support required encoding: "+f.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n})(),jF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zF=(function(){function n(){this.rsDecoder=new dp(er.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new VF(e),o=i.getVersion(),s=i.readCodewords(),u=BF.getDataBlocks(s,o),c=0;try{for(var f=jF(u),d=f.next();!d.done;d=f.next()){var p=d.value;c+=p.getNumDataCodewords()}}catch(D){t={error:D}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}for(var v=new Uint8Array(c),y=u.length,E=0;E<y;E++){var T=u[E],C=T.getCodewords(),b=T.getNumDataCodewords();this.correctErrors(C,b);for(var P=0;P<b;P++)v[P*y+E]=C[P]}return UF.decode(v)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new pn}for(var i=0;i<t;i++)e[i]=r[i]},n})(),HF=(function(){function n(e){this.image=e,this.rectangleDetector=new zg(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new te;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],o=t[2],s=t[3],u=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(o,s)+1;(u&1)===1&&(u+=1),(c&1)===1&&(c+=1),4*u<7*c&&4*c<7*u&&(u=c=Math.max(u,c));var f=n.sampleGrid(this.image,r,i,o,s,u,c);return new Bv(f,[r,i,o,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),o=(t.getY()-e.getY())/(r+1);return new Ae(e.getX()+i,e.getY()+o)},n.moveAway=function(e,t,r){var i=e.getX(),o=e.getY();return i<t?i-=1:i+=1,o<r?o-=1:o+=1,new Ae(i,o)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],o=e[2],s=this.transitionsBetween(t,r),u=this.transitionsBetween(r,i),c=this.transitionsBetween(i,o),f=this.transitionsBetween(o,t),d=s,p=[o,t,r,i];return d>u&&(d=u,p[0]=t,p[1]=r,p[2]=i,p[3]=o),d>c&&(d=c,p[0]=r,p[1]=i,p[2]=o,p[3]=t),d>f&&(p[0]=i,p[1]=o,p[2]=t,p[3]=r),p},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),u=n.shiftPoint(r,i,(s+1)*4),c=n.shiftPoint(i,r,(s+1)*4),f=this.transitionsBetween(u,t),d=this.transitionsBetween(c,o);return f<d?(e[0]=t,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),u=this.transitionsBetween(r,o),c=n.shiftPoint(t,r,(u+1)*4),f=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,o),u=this.transitionsBetween(f,o);var d=new Ae(o.getX()+(i.getX()-r.getX())/(s+1),o.getY()+(i.getY()-r.getY())/(s+1)),p=new Ae(o.getX()+(t.getX()-r.getX())/(u+1),o.getY()+(t.getY()-r.getY())/(u+1));if(!this.isValid(d))return this.isValid(p)?p:null;if(!this.isValid(p))return d;var v=this.transitionsBetween(c,d)+this.transitionsBetween(f,d),y=this.transitionsBetween(c,p)+this.transitionsBetween(f,p);return v>y?d:p},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o)+1,u=this.transitionsBetween(i,o)+1,c=n.shiftPoint(t,r,u*4),f=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,o)+1,u=this.transitionsBetween(f,o)+1,(s&1)===1&&(s+=1),(u&1)===1&&(u+=1);var d=(t.getX()+r.getX()+i.getX()+o.getX())/4,p=(t.getY()+r.getY()+i.getY()+o.getY())/4;t=n.moveAway(t,d,p),r=n.moveAway(r,d,p),i=n.moveAway(i,d,p),o=n.moveAway(o,d,p);var v,y;return c=n.shiftPoint(t,r,u*4),c=n.shiftPoint(c,o,s*4),v=n.shiftPoint(r,t,u*4),v=n.shiftPoint(v,i,s*4),f=n.shiftPoint(i,o,u*4),f=n.shiftPoint(f,r,s*4),y=n.shiftPoint(o,i,u*4),y=n.shiftPoint(y,t,s*4),[c,v,f,y]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,o,s,u){var c=Uv.getInstance();return c.sampleGrid(e,s,u,.5,.5,s-.5,.5,s-.5,u-.5,.5,u-.5,t.getX(),t.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(t.getX()),s=Math.trunc(t.getY()),u=Math.abs(s-i)>Math.abs(o-r);if(u){var c=r;r=i,i=c,c=o,o=s,s=c}for(var f=Math.abs(o-r),d=Math.abs(s-i),p=-f/2,v=i<s?1:-1,y=r<o?1:-1,E=0,T=this.image.get(u?i:r,u?r:i),C=r,b=i;C!==o;C+=y){var P=this.image.get(u?b:C,u?C:b);if(P!==T&&(E++,T=P),p+=d,p>0){if(b===s)break;b+=v,p-=f}}return E},n})(),Wg=(function(){function n(){this.decoder=new zF}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(bt.PURE_BARCODE)){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=n.NO_POINTS}else{var s=new HF(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var u=r.getRawBytes(),c=new Vn(r.getText(),u,8*u.length,i,Re.DATA_MATRIX,yt.currentTimeMillis()),f=r.getByteSegments();f!=null&&c.putMetadata(Cn.BYTE_SEGMENTS,f);var d=r.getECLevel();return d!=null&&c.putMetadata(Cn.ERROR_CORRECTION_LEVEL,d),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new te;var i=this.moduleSize(t,e),o=t[1],s=r[1],u=t[0],c=r[0],f=(c-u+1)/i,d=(s-o+1)/i;if(f<=0||d<=0)throw new te;var p=i/2;o+=p,u+=p;for(var v=new bi(f,d),y=0;y<d;y++)for(var E=o+y*i,T=0;T<f;T++)e.get(u+T*i,E)&&v.set(T,y);return v},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],o=e[1];i<r&&t.get(i,o);)i++;if(i===r)throw new te;var s=i-e[0];if(s===0)throw new te;return s},n.NO_POINTS=[],n})(),GF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){GF(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Wg,t)||this}return e})(Zu);var vu;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(vu||(vu={}));var WF=(function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Gr(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Oe;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(vu.L,"L",1),n.M=new n(vu.M,"M",0),n.Q=new n(vu.Q,"Q",3),n.H=new n(vu.H,"H",2),n})(),$F=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FS=(function(){function n(e){this.errorCorrectionLevel=WF.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return $e.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var u=$F(n.FORMAT_INFO_DECODE_LOOKUP),c=u.next();!c.done;c=u.next()){var f=c.value,d=f[0];if(d===e||d===t)return new n(f[1]);var p=n.numBitsDiffering(e,d);p<o&&(s=f[1],o=p),e!==t&&(p=n.numBitsDiffering(t,d),p<o&&(s=f[1],o=p))}}catch(v){r={error:v}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return o<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),KF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=(function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var o=KF(i),s=o.next();!s.done;s=o.next()){var u=s.value;r+=u.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),k=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),qF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ia=(function(){function n(e,t){for(var r,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var u=0,c=o[0].getECCodewordsPerBlock(),f=o[0].getECBlocks();try{for(var d=qF(f),p=d.next();!p.done;p=d.next()){var v=p.value;u+=v.getCount()*(v.getDataCodewords()+c)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}this.totalCodewords=u}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new ce;try{return this.getVersionForNumber((e-17)/4)}catch{throw new ce}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Oe;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var o=n.VERSION_DECODE_INFO[i];if(o===e)return n.getVersionForNumber(i+7);var s=FS.numBitsDiffering(e,o);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new bi(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Y(7,new k(1,19)),new Y(10,new k(1,16)),new Y(13,new k(1,13)),new Y(17,new k(1,9))),new n(2,Int32Array.from([6,18]),new Y(10,new k(1,34)),new Y(16,new k(1,28)),new Y(22,new k(1,22)),new Y(28,new k(1,16))),new n(3,Int32Array.from([6,22]),new Y(15,new k(1,55)),new Y(26,new k(1,44)),new Y(18,new k(2,17)),new Y(22,new k(2,13))),new n(4,Int32Array.from([6,26]),new Y(20,new k(1,80)),new Y(18,new k(2,32)),new Y(26,new k(2,24)),new Y(16,new k(4,9))),new n(5,Int32Array.from([6,30]),new Y(26,new k(1,108)),new Y(24,new k(2,43)),new Y(18,new k(2,15),new k(2,16)),new Y(22,new k(2,11),new k(2,12))),new n(6,Int32Array.from([6,34]),new Y(18,new k(2,68)),new Y(16,new k(4,27)),new Y(24,new k(4,19)),new Y(28,new k(4,15))),new n(7,Int32Array.from([6,22,38]),new Y(20,new k(2,78)),new Y(18,new k(4,31)),new Y(18,new k(2,14),new k(4,15)),new Y(26,new k(4,13),new k(1,14))),new n(8,Int32Array.from([6,24,42]),new Y(24,new k(2,97)),new Y(22,new k(2,38),new k(2,39)),new Y(22,new k(4,18),new k(2,19)),new Y(26,new k(4,14),new k(2,15))),new n(9,Int32Array.from([6,26,46]),new Y(30,new k(2,116)),new Y(22,new k(3,36),new k(2,37)),new Y(20,new k(4,16),new k(4,17)),new Y(24,new k(4,12),new k(4,13))),new n(10,Int32Array.from([6,28,50]),new Y(18,new k(2,68),new k(2,69)),new Y(26,new k(4,43),new k(1,44)),new Y(24,new k(6,19),new k(2,20)),new Y(28,new k(6,15),new k(2,16))),new n(11,Int32Array.from([6,30,54]),new Y(20,new k(4,81)),new Y(30,new k(1,50),new k(4,51)),new Y(28,new k(4,22),new k(4,23)),new Y(24,new k(3,12),new k(8,13))),new n(12,Int32Array.from([6,32,58]),new Y(24,new k(2,92),new k(2,93)),new Y(22,new k(6,36),new k(2,37)),new Y(26,new k(4,20),new k(6,21)),new Y(28,new k(7,14),new k(4,15))),new n(13,Int32Array.from([6,34,62]),new Y(26,new k(4,107)),new Y(22,new k(8,37),new k(1,38)),new Y(24,new k(8,20),new k(4,21)),new Y(22,new k(12,11),new k(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Y(30,new k(3,115),new k(1,116)),new Y(24,new k(4,40),new k(5,41)),new Y(20,new k(11,16),new k(5,17)),new Y(24,new k(11,12),new k(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Y(22,new k(5,87),new k(1,88)),new Y(24,new k(5,41),new k(5,42)),new Y(30,new k(5,24),new k(7,25)),new Y(24,new k(11,12),new k(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Y(24,new k(5,98),new k(1,99)),new Y(28,new k(7,45),new k(3,46)),new Y(24,new k(15,19),new k(2,20)),new Y(30,new k(3,15),new k(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Y(28,new k(1,107),new k(5,108)),new Y(28,new k(10,46),new k(1,47)),new Y(28,new k(1,22),new k(15,23)),new Y(28,new k(2,14),new k(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Y(30,new k(5,120),new k(1,121)),new Y(26,new k(9,43),new k(4,44)),new Y(28,new k(17,22),new k(1,23)),new Y(28,new k(2,14),new k(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Y(28,new k(3,113),new k(4,114)),new Y(26,new k(3,44),new k(11,45)),new Y(26,new k(17,21),new k(4,22)),new Y(26,new k(9,13),new k(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Y(28,new k(3,107),new k(5,108)),new Y(26,new k(3,41),new k(13,42)),new Y(30,new k(15,24),new k(5,25)),new Y(28,new k(15,15),new k(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Y(28,new k(4,116),new k(4,117)),new Y(26,new k(17,42)),new Y(28,new k(17,22),new k(6,23)),new Y(30,new k(19,16),new k(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Y(28,new k(2,111),new k(7,112)),new Y(28,new k(17,46)),new Y(30,new k(7,24),new k(16,25)),new Y(24,new k(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Y(30,new k(4,121),new k(5,122)),new Y(28,new k(4,47),new k(14,48)),new Y(30,new k(11,24),new k(14,25)),new Y(30,new k(16,15),new k(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Y(30,new k(6,117),new k(4,118)),new Y(28,new k(6,45),new k(14,46)),new Y(30,new k(11,24),new k(16,25)),new Y(30,new k(30,16),new k(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Y(26,new k(8,106),new k(4,107)),new Y(28,new k(8,47),new k(13,48)),new Y(30,new k(7,24),new k(22,25)),new Y(30,new k(22,15),new k(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Y(28,new k(10,114),new k(2,115)),new Y(28,new k(19,46),new k(4,47)),new Y(28,new k(28,22),new k(6,23)),new Y(30,new k(33,16),new k(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Y(30,new k(8,122),new k(4,123)),new Y(28,new k(22,45),new k(3,46)),new Y(30,new k(8,23),new k(26,24)),new Y(30,new k(12,15),new k(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Y(30,new k(3,117),new k(10,118)),new Y(28,new k(3,45),new k(23,46)),new Y(30,new k(4,24),new k(31,25)),new Y(30,new k(11,15),new k(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Y(30,new k(7,116),new k(7,117)),new Y(28,new k(21,45),new k(7,46)),new Y(30,new k(1,23),new k(37,24)),new Y(30,new k(19,15),new k(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Y(30,new k(5,115),new k(10,116)),new Y(28,new k(19,47),new k(10,48)),new Y(30,new k(15,24),new k(25,25)),new Y(30,new k(23,15),new k(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Y(30,new k(13,115),new k(3,116)),new Y(28,new k(2,46),new k(29,47)),new Y(30,new k(42,24),new k(1,25)),new Y(30,new k(23,15),new k(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Y(30,new k(17,115)),new Y(28,new k(10,46),new k(23,47)),new Y(30,new k(10,24),new k(35,25)),new Y(30,new k(19,15),new k(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Y(30,new k(17,115),new k(1,116)),new Y(28,new k(14,46),new k(21,47)),new Y(30,new k(29,24),new k(19,25)),new Y(30,new k(11,15),new k(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Y(30,new k(13,115),new k(6,116)),new Y(28,new k(14,46),new k(23,47)),new Y(30,new k(44,24),new k(7,25)),new Y(30,new k(59,16),new k(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Y(30,new k(12,121),new k(7,122)),new Y(28,new k(12,47),new k(26,48)),new Y(30,new k(39,24),new k(14,25)),new Y(30,new k(22,15),new k(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Y(30,new k(6,121),new k(14,122)),new Y(28,new k(6,47),new k(34,48)),new Y(30,new k(46,24),new k(10,25)),new Y(30,new k(2,15),new k(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Y(30,new k(17,122),new k(4,123)),new Y(28,new k(29,46),new k(14,47)),new Y(30,new k(49,24),new k(10,25)),new Y(30,new k(24,15),new k(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Y(30,new k(4,122),new k(18,123)),new Y(28,new k(13,46),new k(32,47)),new Y(30,new k(48,24),new k(14,25)),new Y(30,new k(42,15),new k(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Y(30,new k(20,117),new k(4,118)),new Y(28,new k(40,47),new k(7,48)),new Y(30,new k(43,24),new k(22,25)),new Y(30,new k(10,15),new k(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Y(30,new k(19,118),new k(6,119)),new Y(28,new k(18,47),new k(31,48)),new Y(30,new k(34,24),new k(34,25)),new Y(30,new k(20,15),new k(61,16)))],n})(),cn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(cn||(cn={}));var VE=(function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[cn.DATA_MASK_000,new n(cn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[cn.DATA_MASK_001,new n(cn.DATA_MASK_001,function(e,t){return(e&1)===0})],[cn.DATA_MASK_010,new n(cn.DATA_MASK_010,function(e,t){return t%3===0})],[cn.DATA_MASK_011,new n(cn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[cn.DATA_MASK_100,new n(cn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[cn.DATA_MASK_101,new n(cn.DATA_MASK_101,function(e,t){return e*t%6===0})],[cn.DATA_MASK_110,new n(cn.DATA_MASK_110,function(e,t){return e*t%6<3})],[cn.DATA_MASK_111,new n(cn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n})(),XF=(function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new ce;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),o=0,s=i-7,r=i-1;r>=s;r--)o=this.copyBit(8,r,o);for(var t=i-8;t<i;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=FS.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new ce},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return ia.getVersionForNumber(t);for(var r=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,o,r);var u=ia.decodeVersionInformation(r);if(u!==null&&u.getDimensionForVersion()===e)return this.parsedVersion=u,u;r=0;for(var s=5;s>=0;s--)for(var o=e-9;o>=i;o--)r=this.copyBit(s,o,r);if(u=ia.decodeVersionInformation(r),u!==null&&u.getDimensionForVersion()===e)return this.parsedVersion=u,u;throw new ce},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=VE.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=t.buildFunctionPattern(),s=!0,u=new Uint8Array(t.getTotalCodewords()),c=0,f=0,d=0,p=i-1;p>0;p-=2){p===6&&p--;for(var v=0;v<i;v++)for(var y=s?i-1-v:v,E=0;E<2;E++)o.get(p-E,y)||(d++,f<<=1,this.bitMatrix.get(p-E,y)&&(f|=1),d===8&&(u[c++]=f,d=0,f=0));s=!s}if(c!==t.getTotalCodewords())throw new ce;return u},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=VE.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,o=e.getHeight();i<o;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n})(),BE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YF=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,o,s,u;if(e.length!==t.getTotalCodewords())throw new Oe;var c=t.getECBlocksForLevel(r),f=0,d=c.getECBlocks();try{for(var p=BE(d),v=p.next();!v.done;v=p.next()){var y=v.value;f+=y.getCount()}}catch(L){i={error:L}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}var E=new Array(f),T=0;try{for(var C=BE(d),b=C.next();!b.done;b=C.next())for(var y=b.value,P=0;P<y.getCount();P++){var D=y.getDataCodewords(),F=c.getECCodewordsPerBlock()+D;E[T++]=new n(D,new Uint8Array(F))}}catch(L){s={error:L}}finally{try{b&&!b.done&&(u=C.return)&&u.call(C)}finally{if(s)throw s.error}}for(var j=E[0].codewords.length,W=E.length-1;W>=0;){var R=E[W].codewords.length;if(R===j)break;W--}W++;for(var I=j-c.getECCodewordsPerBlock(),O=0,P=0;P<I;P++)for(var M=0;M<T;M++)E[M].codewords[P]=e[O++];for(var M=W;M<T;M++)E[M].codewords[I]=e[O++];for(var B=E[0].codewords.length,P=I;P<B;P++)for(var M=0;M<T;M++){var z=M<W?P:P+1;E[M].codewords[z]=e[O++]}return E},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),Tr;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(Tr||(Tr={}));var At=(function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Oe;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(Tr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(Tr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(Tr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(Tr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(Tr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(Tr.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(Tr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(Tr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(Tr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(Tr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n})(),QF=(function(){function n(){}return n.decode=function(e,t,r,i){var o=new LS(e),s=new Ge,u=new Array,c=-1,f=-1;try{var d=null,p=!1,v=void 0;do{if(o.available()<4)v=At.TERMINATOR;else{var y=o.readBits(4);v=At.forBits(y)}switch(v){case At.TERMINATOR:break;case At.FNC1_FIRST_POSITION:case At.FNC1_SECOND_POSITION:p=!0;break;case At.STRUCTURED_APPEND:if(o.available()<16)throw new ce;c=o.readBits(8),f=o.readBits(8);break;case At.ECI:var E=n.parseECIValue(o);if(d=tn.getCharacterSetECIByValue(E),d===null)throw new ce;break;case At.HANZI:var T=o.readBits(4),C=o.readBits(v.getCharacterCountBits(t));T===n.GB2312_SUBSET&&n.decodeHanziSegment(o,s,C);break;default:var b=o.readBits(v.getCharacterCountBits(t));switch(v){case At.NUMERIC:n.decodeNumericSegment(o,s,b);break;case At.ALPHANUMERIC:n.decodeAlphanumericSegment(o,s,b,p);break;case At.BYTE:n.decodeByteSegment(o,s,b,d,u,i);break;case At.KANJI:n.decodeKanjiSegment(o,s,b);break;default:throw new ce}break}}while(v!==At.TERMINATOR)}catch{throw new ce}return new hp(e,s.toString(),u.length===0?null:u,r===null?null:r.toString(),c,f)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new ce;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),u=s/96<<8&4294967295|s%96;u<959?u+=41377:u+=42657,i[o]=u>>8&255,i[o+1]=u&255,o+=2,r--}try{t.append(Or.decode(i,Je.GB2312))}catch(c){throw new ce(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new ce;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),u=s/192<<8&4294967295|s%192;u<7936?u+=33088:u+=49472,i[o]=u>>8,i[o+1]=u,o+=2,r--}try{t.append(Or.decode(i,Je.SHIFT_JIS))}catch(c){throw new ce(c)}},n.decodeByteSegment=function(e,t,r,i,o,s){if(8*r>e.available())throw new ce;for(var u=new Uint8Array(r),c=0;c<r;c++)u[c]=e.readBits(8);var f;i===null?f=Je.guessEncoding(u,s):f=i.getName();try{t.append(Or.decode(u,f))}catch(d){throw new ce(d)}o.push(u)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new ce;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var o=t.length();r>1;){if(e.available()<11)throw new ce;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new ce;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var u=o;u<t.length();u++)t.charAt(u)==="%"&&(u<t.length()-1&&t.charAt(u+1)==="%"?t.deleteCharAt(u+1):t.setCharAt(u,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new ce;var i=e.readBits(10);if(i>=1e3)throw new ce;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new ce;var o=e.readBits(7);if(o>=100)throw new ce;t.append(n.toAlphaNumericChar(Math.floor(o/10))),t.append(n.toAlphaNumericChar(o%10))}else if(r===1){if(e.available()<4)throw new ce;var s=e.readBits(4);if(s>=10)throw new ce;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new ce},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n})(),VS=(function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n})(),UE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZF=(function(){function n(){this.rsDecoder=new dp(er.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(bi.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new XF(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,t);return o.setOther(new VS(!0)),o}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,o,s,u=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),d=YF.getDataBlocks(f,u,c),p=0;try{for(var v=UE(d),y=v.next();!y.done;y=v.next()){var E=y.value;p+=E.getNumDataCodewords()}}catch(W){r={error:W}}finally{try{y&&!y.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}var T=new Uint8Array(p),C=0;try{for(var b=UE(d),P=b.next();!P.done;P=b.next()){var E=P.value,D=E.getCodewords(),F=E.getNumDataCodewords();this.correctErrors(D,F);for(var j=0;j<F;j++)T[C++]=D[j]}}catch(W){o={error:W}}finally{try{P&&!P.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}return QF.decode(T,u,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new pn}for(var i=0;i<t;i++)e[i]=r[i]},n})(),JF=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),eV=(function(n){JF(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=(this.getX()+r)/2,s=(this.getY()+t)/2,u=(this.estimatedModuleSize+i)/2;return new e(o,s,u)},e})(Ae),tV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nV=(function(){function n(e,t,r,i,o,s,u){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,o=this.startY+t/2,s=new Int32Array(3),u=this.image,c=0;c<t;c++){var f=o+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var d=e;d<i&&!u.get(d,f);)d++;for(var p=0;d<i;){if(u.get(d,f))if(p===1)s[1]++;else if(p===2){if(this.foundPatternCross(s)){var v=this.handlePossibleCenter(s,f,d);if(v!==null)return v}s[0]=s[2],s[1]=1,s[2]=0,p=1}else s[++p]++;else p===1&&p++,s[p]++;d++}if(this.foundPatternCross(s)){var v=this.handlePossibleCenter(s,f,i);if(v!==null)return v}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new te},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var o=this.image,s=o.getHeight(),u=this.crossCheckStateCount;u[0]=0,u[1]=0,u[2]=0;for(var c=e;c>=0&&o.get(t,c)&&u[1]<=r;)u[1]++,c--;if(c<0||u[1]>r)return NaN;for(;c>=0&&!o.get(t,c)&&u[0]<=r;)u[0]++,c--;if(u[0]>r)return NaN;for(c=e+1;c<s&&o.get(t,c)&&u[1]<=r;)u[1]++,c++;if(c===s||u[1]>r)return NaN;for(;c<s&&!o.get(t,c)&&u[2]<=r;)u[2]++,c++;if(u[2]>r)return NaN;var f=u[0]+u[1]+u[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(u)?n.centerFromEnd(u,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,o,s=e[0]+e[1]+e[2],u=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,u,2*e[1],s);if(!isNaN(c)){var f=(e[0]+e[1]+e[2])/3;try{for(var d=tV(this.possibleCenters),p=d.next();!p.done;p=d.next()){var v=p.value;if(v.aboutEquals(f,c,u))return v.combineEstimate(c,u,f)}}catch(E){i={error:E}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}var y=new eV(u,c,f);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null},n})(),rV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),iV=(function(n){rV(e,n);function e(t,r,i,o){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=this.count+1,s=(this.count*this.getX()+r)/o,u=(this.count*this.getY()+t)/o,c=(this.count*this.estimatedModuleSize+i)/o;return new e(s,u,c,o)},e})(Ae),oV=(function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),Ql=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sV=(function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(bt.TRY_HARDER)!==void 0,r=e!=null&&e.get(bt.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),u=Math.floor(3*o/(4*n.MAX_MODULES));(u<n.MIN_SKIP||t)&&(u=n.MIN_SKIP);for(var c=!1,f=new Int32Array(5),d=u-1;d<o&&!c;d+=u){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var p=0,v=0;v<s;v++)if(i.get(v,d))(p&1)===1&&p++,f[p]++;else if((p&1)===0)if(p===4)if(n.foundPatternCross(f)){var y=this.handlePossibleCenter(f,d,v,r);if(y===!0)if(u=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var E=this.findRowSkip();E>f[2]&&(d+=E-f[2]-u,v=s-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;continue}p=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;else f[++p]++;else f[p]++;if(n.foundPatternCross(f)){var y=this.handlePossibleCenter(f,d,s,r);y===!0&&(u=f[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var T=this.selectBestPatterns();return Ae.orderBestPatterns(T),new oV(T)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var o=t/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var o=this.getCrossCheckStateCount(),s=0,u=this.image;e>=s&&t>=s&&u.get(t-s,e-s);)o[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!u.get(t-s,e-s)&&o[1]<=r;)o[1]++,s++;if(e<s||t<s||o[1]>r)return!1;for(;e>=s&&t>=s&&u.get(t-s,e-s)&&o[0]<=r;)o[0]++,s++;if(o[0]>r)return!1;var c=u.getHeight(),f=u.getWidth();for(s=1;e+s<c&&t+s<f&&u.get(t+s,e+s);)o[2]++,s++;if(e+s>=c||t+s>=f)return!1;for(;e+s<c&&t+s<f&&!u.get(t+s,e+s)&&o[3]<r;)o[3]++,s++;if(e+s>=c||t+s>=f||o[3]>=r)return!1;for(;e+s<c&&t+s<f&&u.get(t+s,e+s)&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return!1;var d=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(d-i)<2*i&&n.foundPatternCross(o)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var o=this.image,s=o.getHeight(),u=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(t,c);)u[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(t,c)&&u[1]<=r;)u[1]++,c--;if(c<0||u[1]>r)return NaN;for(;c>=0&&o.get(t,c)&&u[0]<=r;)u[0]++,c--;if(u[0]>r)return NaN;for(c=e+1;c<s&&o.get(t,c);)u[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(t,c)&&u[3]<r;)u[3]++,c++;if(c===s||u[3]>=r)return NaN;for(;c<s&&o.get(t,c)&&u[4]<r;)u[4]++,c++;if(u[4]>=r)return NaN;var f=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(f-i)>=2*i?NaN:n.foundPatternCross(u)?n.centerFromEnd(u,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var o=this.image,s=o.getWidth(),u=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(c,t);)u[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(c,t)&&u[1]<=r;)u[1]++,c--;if(c<0||u[1]>r)return NaN;for(;c>=0&&o.get(c,t)&&u[0]<=r;)u[0]++,c--;if(u[0]>r)return NaN;for(c=e+1;c<s&&o.get(c,t);)u[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(c,t)&&u[3]<r;)u[3]++,c++;if(c===s||u[3]>=r)return NaN;for(;c<s&&o.get(c,t)&&u[4]<r;)u[4]++,c++;if(u[4]>=r)return NaN;var f=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(f-i)>=i?NaN:n.foundPatternCross(u)?n.centerFromEnd(u,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),u=this.crossCheckVertical(t,Math.floor(s),e[2],o);if(!isNaN(u)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(u),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(u),Math.floor(s),e[2],o)))){for(var c=o/7,f=!1,d=this.possibleCenters,p=0,v=d.length;p<v;p++){var y=d[p];if(y.aboutEquals(c,u,s)){d[p]=y.combineEstimate(u,s,c),f=!0;break}}if(!f){var E=new iV(s,u,c);d.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var o=Ql(this.possibleCenters),s=o.next();!s.done;s=o.next()){var u=s.value;if(u.getCount()>=n.CENTER_QUORUM)if(i==null)i=u;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-u.getX())-Math.abs(i.getY()-u.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,o=0,s=0,u=this.possibleCenters.length;try{for(var c=Ql(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value;d.getCount()>=n.CENTER_QUORUM&&(o++,s+=d.getEstimatedModuleSize())}}catch(T){e={error:T}}finally{try{f&&!f.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(o<3)return!1;var p=s/u,v=0;try{for(var y=Ql(this.possibleCenters),E=y.next();!E.done;E=y.next()){var d=E.value;v+=Math.abs(d.getEstimatedModuleSize()-p)}}catch(T){r={error:T}}finally{try{E&&!E.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}return v<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,o=this.possibleCenters.length;if(o<3)throw new te;var s=this.possibleCenters,u;if(o>3){var c=0,f=0;try{for(var d=Ql(this.possibleCenters),p=d.next();!p.done;p=d.next()){var v=p.value,y=v.getEstimatedModuleSize();c+=y,f+=y*y}}catch(j){e={error:j}}finally{try{p&&!p.done&&(t=d.return)&&t.call(d)}finally{if(e)throw e.error}}u=c/o;var E=Math.sqrt(f/o-u*u);s.sort(function(j,W){var R=Math.abs(W.getEstimatedModuleSize()-u),I=Math.abs(j.getEstimatedModuleSize()-u);return R<I?-1:R>I?1:0});for(var T=Math.max(.2*u,E),C=0;C<s.length&&s.length>3;C++){var b=s[C];Math.abs(b.getEstimatedModuleSize()-u)>T&&(s.splice(C,1),C--)}}if(s.length>3){var c=0;try{for(var P=Ql(s),D=P.next();!D.done;D=P.next()){var F=D.value;c+=F.getEstimatedModuleSize()}}catch(W){r={error:W}}finally{try{D&&!D.done&&(i=P.return)&&i.call(P)}finally{if(r)throw r.error}}u=c/s.length,s.sort(function(W,R){if(R.getCount()===W.getCount()){var I=Math.abs(R.getEstimatedModuleSize()-u),O=Math.abs(W.getEstimatedModuleSize()-u);return I<O?1:I>O?-1:0}else return R.getCount()-W.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),aV=(function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(bt.NEED_RESULT_POINT_CALLBACK);var t=new sV(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(t,r,i);if(o<1)throw new te("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,o),u=ia.getProvisionalVersionForDimension(s),c=u.getDimensionForVersion()-7,f=null;if(u.getAlignmentPatternCenters().length>0)for(var d=r.getX()-t.getX()+i.getX(),p=r.getY()-t.getY()+i.getY(),v=1-3/c,y=Math.floor(t.getX()+v*(d-t.getX())),E=Math.floor(t.getY()+v*(p-t.getY())),T=4;T<=16;T<<=1)try{f=this.findAlignmentInRegion(o,y,E,T);break}catch(D){if(!(D instanceof te))throw D}var C=n.createTransform(t,r,i,f,s),b=n.sampleGrid(this.image,C,s),P;return f===null?P=[i,t,r]:P=[i,t,r,f],new Bv(b,P)},n.createTransform=function(e,t,r,i,o){var s=o-3.5,u,c,f,d;return i!==null?(u=i.getX(),c=i.getY(),f=s-3,d=f):(u=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),f=s,d=s),OS.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,f,d,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),u,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=Uv.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var o=ot.round(Ae.distance(e,t)/i),s=ot.round(Ae.distance(e,r)/i),u=Math.floor((o+s)/2)+7;switch(u&3){case 0:u++;break;case 2:u--;break;case 3:throw new te("Dimensions could be not found.")}return u},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,u=e-(r-e);u<0?(s=e/(e-u),u=0):u>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(u-e),u=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*s);return s=1,c<0?(s=t/(t-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),u=Math.floor(e+(u-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,t,u,c),o-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var o=Math.abs(i-t)>Math.abs(r-e);if(o){var s=e;e=t,t=s,s=r,r=i,i=s}for(var u=Math.abs(r-e),c=Math.abs(i-t),f=-u/2,d=e<r?1:-1,p=t<i?1:-1,v=0,y=r+d,E=e,T=t;E!==y;E+=d){var C=o?T:E,b=o?E:T;if(v===1===this.image.get(C,b)){if(v===2)return ot.distance(E,T,e,t);v++}if(f+=c,f>0){if(T===i)break;T+=p,f-=u}}return v===2?ot.distance(r+d,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var o=Math.floor(i*e),s=Math.max(0,t-o),u=Math.min(this.image.getWidth()-1,t+o);if(u-s<e*3)throw new te("Alignment top exceeds estimated module size.");var c=Math.max(0,r-o),f=Math.min(this.image.getHeight()-1,r+o);if(f-c<e*3)throw new te("Alignment bottom exceeds estimated module size.");var d=new nV(this.image,s,c,u-s,f-c,e,this.resultPointCallback);return d.find()},n})(),$g=(function(){function n(){this.decoder=new ZF}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(bt.PURE_BARCODE)!==void 0){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,t),i=n.NO_POINTS}else{var s=new aV(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof VS&&r.getOther().applyMirroredCorrection(i);var u=new Vn(r.getText(),r.getRawBytes(),void 0,i,Re.QR_CODE,void 0),c=r.getByteSegments();c!==null&&u.putMetadata(Cn.BYTE_SEGMENTS,c);var f=r.getECLevel();return f!==null&&u.putMetadata(Cn.ERROR_CORRECTION_LEVEL,f),r.hasStructuredAppend()&&(u.putMetadata(Cn.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),u.putMetadata(Cn.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),u},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new te;var i=this.moduleSize(t,e),o=t[1],s=r[1],u=t[0],c=r[0];if(u>=c||o>=s)throw new te;if(s-o!==c-u&&(c=u+(s-o),c>=e.getWidth()))throw new te;var f=Math.round((c-u+1)/i),d=Math.round((s-o+1)/i);if(f<=0||d<=0)throw new te;if(d!==f)throw new te;var p=Math.floor(i/2);o+=p,u+=p;var v=u+Math.floor((f-1)*i)-c;if(v>0){if(v>p)throw new te;u-=v}var y=o+Math.floor((d-1)*i)-s;if(y>0){if(y>p)throw new te;o-=y}for(var E=new bi(f,d),T=0;T<d;T++)for(var C=o+Math.floor(T*i),b=0;b<f;b++)e.get(u+Math.floor(b*i),C)&&E.set(b,T);return E},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),o=e[0],s=e[1],u=!0,c=0;o<i&&s<r;){if(u!==t.get(o,s)){if(++c===5)break;u=!u}o++,s++}if(o===i||s===r)throw new te;return(o-e[0])/7},n.NO_POINTS=new Array,n})(),uV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tt=(function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return ot.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=uV(e),u=s.next();!u.done;u=s.next()){var c=u.value;i[o++]=c}}catch(f){t={error:f}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=nn.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n})(),lV=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),cV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fV=(function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),o=n.detect(r,i);return o.length||(i=i.clone(),i.rotate180(),o=n.detect(r,i)),new lV(i,o)},n.detect=function(e,t){for(var r,i,o=new Array,s=0,u=0,c=!1;s<t.getHeight();){var f=n.findVertices(t,s,u);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,u=0;try{for(var d=(r=void 0,cV(o)),p=d.next();!p.done;p=d.next()){var v=p.value;v[1]!=null&&(s=Math.trunc(Math.max(s,v[1].getY()))),v[3]!=null&&(s=Math.max(s,Math.trunc(v[3].getY())))}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(c=!0,o.push(f),!e)break;f[2]!=null?(u=Math.trunc(f[2].getX()),s=Math.trunc(f[2].getY())):(u=Math.trunc(f[4].getX()),s=Math.trunc(f[4].getY()))}return o},n.findVertices=function(e,t,r){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,o,s){for(var u=new Array(4),c=!1,f=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var d=n.findGuardPattern(e,o,i,r,!1,s,f);if(d!=null){for(;i>0;){var p=n.findGuardPattern(e,o,--i,r,!1,s,f);if(p!=null)d=p;else{i++;break}}u[0]=new Ae(d[0],i),u[1]=new Ae(d[1],i),c=!0;break}}var v=i+1;if(c){for(var y=0,p=Int32Array.from([Math.trunc(u[0].getX()),Math.trunc(u[1].getX())]);v<t;v++){var d=n.findGuardPattern(e,p[0],v,r,!1,s,f);if(d!=null&&Math.abs(p[0]-d[0])<n.MAX_PATTERN_DRIFT&&Math.abs(p[1]-d[1])<n.MAX_PATTERN_DRIFT)p=d,y=0;else{if(y>n.SKIPPED_ROW_COUNT_MAX)break;y++}}v-=y+1,u[2]=new Ae(p[0],v),u[3]=new Ae(p[1],v)}return v-i<n.BARCODE_MIN_HEIGHT&&nn.fill(u,null),u},n.findGuardPattern=function(e,t,r,i,o,s,u){nn.fillWithin(u,0,u.length,0);for(var c=t,f=0;e.get(c,r)&&c>0&&f++<n.MAX_PIXEL_DRIFT;)c--;for(var d=c,p=0,v=s.length,y=o;d<i;d++){var E=e.get(d,r);if(E!==y)u[p]++;else{if(p===v-1){if(n.patternMatchVariance(u,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=u[0]+u[1],yt.arraycopy(u,2,u,0,p-1),u[p-1]=0,u[p]=0,p--}else p++;u[p]=1,y=!y}}return p===v-1&&n.patternMatchVariance(u,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,u=0;u<i;u++)o+=e[u],s+=t[u];if(o<s)return 1/0;var c=o/s;r*=c;for(var f=0,d=0;d<i;d++){var p=e[d],v=t[d]*c,y=p>v?p-v:v-p;if(y>r)return 1/0;f+=y}return f/o},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n})(),hV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Js=(function(){function n(e,t){if(t.length===0)throw new Oe;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),yt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=hV(this.coefficients),s=o.next();!s.done;s=o.next()){var u=s.value;i=this.field.add(i,u)}}catch(p){t={error:p}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],f=this.coefficients.length,d=1;d<f;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Oe("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;yt.arraycopy(r,0,o,0,s);for(var u=s;u<r.length;u++)o[u]=this.field.add(t[u-s],r[u]);return new n(this.field,o)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Oe("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Oe("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),u=0;u<r;u++)for(var c=t[u],f=0;f<o;f++)s[u+f]=this.field.add(s[u+f],this.field.multiply(c,i[f]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Oe;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new Ge,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n})(),dV=(function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Oe;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new DS;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n})(),pV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),gV=(function(n){pV(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var o=1,s=0;s<t;s++)i.expTable[s]=o,o=o*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Js(i,new Int32Array([0])),i.one=new Js(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Oe;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Js(this,i)},e.PDF417_GF=new e(tt.NUMBER_OF_CODEWORDS,3),e})(dV),mV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vV=(function(){function n(){this.field=gV.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,o,s=new Js(this.field,e),u=new Int32Array(t),c=!1,f=t;f>0;f--){var d=s.evaluateAt(this.field.exp(f));u[t-f]=d,d!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(r!=null)try{for(var v=mV(r),y=v.next();!y.done;y=v.next()){var E=y.value,T=this.field.exp(e.length-1-E),C=new Js(this.field,new Int32Array([this.field.subtract(0,T),1]));p=p.multiply(C)}}catch(I){i={error:I}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}for(var b=new Js(this.field,u),P=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),b,t),D=P[0],F=P[1],j=this.findErrorLocations(D),W=this.findErrorMagnitudes(F,D,j),f=0;f<j.length;f++){var R=e.length-1-this.field.log(j[f]);if(R<0)throw pn.getChecksumInstance();e[R]=this.field.subtract(e[R],W[f])}return j.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=e,s=t,u=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var f=o,d=u;if(o=s,u=c,o.isZero())throw pn.getChecksumInstance();s=f;for(var p=this.field.getZero(),v=o.getCoefficient(o.getDegree()),y=this.field.inverse(v);s.getDegree()>=o.getDegree()&&!s.isZero();){var E=s.getDegree()-o.getDegree(),T=this.field.multiply(s.getCoefficient(s.getDegree()),y);p=p.add(this.field.buildMonomial(E,T)),s=s.subtract(o.multiplyByMonomial(E,T))}c=p.multiply(u).subtract(d).negative()}var C=c.getCoefficient(0);if(C===0)throw pn.getChecksumInstance();var b=this.field.inverse(C),P=c.multiply(b),D=s.multiply(b);return[P,D]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,o=1;o<this.field.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=this.field.inverse(o),i++);if(i!==t)throw pn.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var u=new Js(this.field,o),c=r.length,f=new Int32Array(c),s=0;s<c;s++){var d=this.field.inverse(r[s]),p=this.field.subtract(0,e.evaluateAt(d)),v=this.field.inverse(u.evaluateAt(d));f[s]=this.field.multiply(p,v)}return f},n})(),Kg=(function(){function n(e,t,r,i,o){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,o)}return n.prototype.constructor_1=function(e,t,r,i,o){var s=t==null||r==null,u=i==null||o==null;if(s&&u)throw new te;s?(t=new Ae(0,i.getY()),r=new Ae(0,o.getY())):u&&(i=new Ae(e.getWidth()-1,t.getY()),o=new Ae(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,u=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,f=Math.trunc(c.getY()-e);f<0&&(f=0);var d=new Ae(c.getX(),f);r?i=d:s=d}if(t>0){var p=r?this.bottomLeft:this.bottomRight,v=Math.trunc(p.getY()+t);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);var y=new Ae(p.getX(),v);r?o=y:u=y}return new n(this.image,i,o,s,u)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n})(),yV=(function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n})(),zv=(function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,u,c,f,d,p){if(s==="%%")return"%";if(t[++r]!==void 0){s=f?parseInt(f.substr(1)):void 0;var v=d?parseInt(d.substr(1)):void 0,y;switch(p){case"s":y=t[r];break;case"c":y=t[r][0];break;case"f":y=parseFloat(t[r]).toFixed(s);break;case"p":y=parseFloat(t[r]).toPrecision(s);break;case"e":y=parseFloat(t[r]).toExponential(s);break;case"x":y=parseInt(t[r]).toString(v||16);break;case"d":y=parseFloat(parseInt(t[r],v||10).toPrecision(s)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(v);for(var E=parseInt(c),T=c&&c[0]+""=="0"?"0":" ";y.length<E;)y=u!==void 0?y+T:T+y;return y}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n})(),_V=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BS=(function(){function n(e){this.boundingBox=new Kg(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new zv,i=0;try{for(var o=_V(this.codewords),s=o.next();!s.done;s=o.next()){var u=s.value;if(u==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,u.getRowNumber(),u.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n})(),wV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xV=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},ac=(function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,o=function(p,v){var y={getKey:function(){return p},getValue:function(){return v}};y.getValue()>r?(r=y.getValue(),i=[],i.push(y.getKey())):y.getValue()===r&&i.push(y.getKey())};try{for(var s=wV(this.values.entries()),u=s.next();!u.done;u=s.next()){var c=xV(u.value,2),f=c[0],d=c[1];o(f,d)}}catch(p){e={error:p}}finally{try{u&&!u.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return tt.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n})(),EV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),D1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jE=(function(n){EV(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=D1(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),f=-1,d=1,p=0,v=u;v<c;v++)if(r[v]!=null){var y=r[v],E=y.getRowNumber()-f;if(E===0)p++;else if(E===1)d=Math.max(d,p),p=1,f=y.getRowNumber();else if(E<0||y.getRowNumber()>=t.getRowCount()||E>v)r[v]=null;else{var T=void 0;d>2?T=(d-2)*E:T=E;for(var C=T>=v,b=1;b<=T&&!C;b++)C=r[v-b]!=null;C?r[v]=null:(f=y.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=D1(this.getCodewords()),u=s.next();!u.done;u=s.next()){var c=u.value;if(c!=null){var f=c.getRowNumber();if(f>=o.length)continue;o[f]++}}}catch(d){t={error:d}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.getCodewords(),f=-1,d=s;d<u;d++)if(c[d]!=null){var p=c[d];p.setRowNumberAsRowIndicatorColumn();var v=p.getRowNumber()-f;v===0||(v===1?f=p.getRowNumber():p.getRowNumber()>=t.getRowCount()?c[d]=null:f=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),o=new ac,s=new ac,u=new ac,c=new ac;try{for(var f=D1(i),d=f.next();!d.done;d=f.next()){var p=d.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var v=p.getValue()%30,y=p.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:s.setValue(v*3+1);break;case 1:c.setValue(v/3),u.setValue(v%3);break;case 2:o.setValue(v+1);break}}}}catch(T){t={error:T}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}if(o.getValue().length===0||s.getValue().length===0||u.getValue().length===0||c.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+u.getValue()[0]<tt.MIN_ROWS_IN_BARCODE||s.getValue()[0]+u.getValue()[0]>tt.MAX_ROWS_IN_BARCODE)return null;var E=new yV(o.getValue()[0],s.getValue()[0],u.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,E),E},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var o=t[i];if(t[i]!=null){var s=o.getValue()%30,u=o.getRowNumber();if(u>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(u+=2),u%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e})(BS),AV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TV=(function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=tt.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var u=this.detectionResultColumns[s].getCodewords()[r];u!=null&&(o=n.adjustRowNumberIfValid(i,o,u),u.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var u=this.detectionResultColumns[s].getCodewords()[r];u!=null&&(o=n.adjustRowNumberIfValid(i,o,u),u.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=r[t],u=this.detectionResultColumns[e-1].getCodewords(),c=u;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=u[t],f[3]=c[t],t>0&&(f[0]=r[t-1],f[4]=u[t-1],f[5]=c[t-1]),t>1&&(f[8]=r[t-2],f[10]=u[t-2],f[11]=c[t-2]),t<r.length-1&&(f[1]=r[t+1],f[6]=u[t+1],f[7]=c[t+1]),t<r.length-2&&(f[9]=r[t+2],f[12]=u[t+2],f[13]=c[t+2]);try{for(var d=AV(f),p=d.next();!p.done;p=d.next()){var v=p.value;if(n.adjustRowNumber(s,v))return}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new zv,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[r];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()},n})(),CV=(function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n})(),IV=(function(){function n(){}return n.initialize=function(){for(var e=0;e<tt.SYMBOL_TABLE.length;e++)for(var t=tt.SYMBOL_TABLE[e],r=t&1,i=0;i<tt.BARS_IN_MODULE;i++){for(var o=0;(t&1)===r;)o+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(tt.BARS_IN_MODULE)),n.RATIOS_TABLE[e][tt.BARS_IN_MODULE-i-1]=Math.fround(o/tt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=ot.sum(e),r=new Int32Array(tt.BARS_IN_MODULE),i=0,o=0,s=0;s<tt.MODULES_IN_CODEWORD;s++){var u=t/(2*tt.MODULES_IN_CODEWORD)+s*t/tt.MODULES_IN_CODEWORD;o+e[i]<=u&&(o+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return tt.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=ot.sum(e),r=new Array(tt.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var o=jg.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var u=0;u<n.RATIOS_TABLE.length;u++){for(var c=0,f=n.RATIOS_TABLE[u],d=0;d<tt.BARS_IN_MODULE;d++){var p=Math.fround(f[d]-r[d]);if(c+=Math.fround(p*p),c>=o)break}c<o&&(o=c,s=tt.SYMBOL_TABLE[u])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(tt.SYMBOL_TABLE.length).map(function(e){return new Array(tt.BARS_IN_MODULE)}),n})(),SV=(function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n})(),zE=(function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n})(),RV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),PV=(function(n){RV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e})(nr),bV=(function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new PV;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new Fv;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n})(),DV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),OV=(function(n){DV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(nr),NV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),kV=(function(n){NV(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Oe("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new OV;i=$e.MAX_VALUE}this.buf=nn.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new Fv;this.ensureCapacity(this.count+i),yt.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return nn.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(bV),dt;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(dt||(dt={}));function US(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Hh;function Ho(n){if(typeof Hh>"u"&&(Hh=US()),Hh===null)throw new Error("BigInt is not supported!");return Hh(n)}function MV(){var n=[];n[0]=Ho(1);var e=Ho(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var LV=(function(){function n(){}return n.decode=function(e,t){var r=new Ge(""),i=tn.ISO8859_1;r.enableDecoding(i);for(var o=1,s=e[o++],u=new SV;o<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:o=n.textCompaction(e,o,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:o=n.byteCompaction(s,e,i,o,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:o=n.numericCompaction(e,o,r);break;case n.ECI_CHARSET:tn.getCharacterSetECIByValue(e[o++]);break;case n.ECI_GENERAL_PURPOSE:o+=2;break;case n.ECI_USER_DEFINED:o++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=n.decodeMacroBlock(e,o,u);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new ce;default:o--,o=n.textCompaction(e,o,r);break}if(o<e.length)s=e[o++];else throw ce.getFormatInstance()}if(r.length()===0)throw ce.getFormatInstance();var c=new hp(null,r.toString(),null,t);return c.setOther(u),c},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw ce.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<n.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)i[o]=e[t];r.setSegmentIndex($e.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Ge;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var u=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(u=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Ge;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new Ge;t=n.textCompaction(e,t+1,f),r.setSender(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new Ge;t=n.textCompaction(e,t+1,d),r.setAddressee(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new Ge;t=n.numericCompaction(e,t+1,p),r.setSegmentCount($e.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var v=new Ge;t=n.numericCompaction(e,t+1,v),r.setTimestamp(zE.parseLong(v.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var y=new Ge;t=n.numericCompaction(e,t+1,y),r.setChecksum($e.parseInt(y.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var E=new Ge;t=n.numericCompaction(e,t+1,E),r.setFileSize(zE.parseLong(E.toString()));break;default:throw ce.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw ce.getFormatInstance()}if(u!==-1){var T=t-u;r.isLastSegment()&&T--,r.setOptionalData(nn.copyOfRange(e,u,u+T))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),s=0,u=!1;t<e[0]&&!u;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,u=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],o[s]=c,s++;break}}return n.decodeTextCompaction(i,o,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var o=dt.ALPHA,s=dt.ALPHA,u=0;u<r;){var c=e[u],f="";switch(o){case dt.ALPHA:if(c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.LL:o=dt.LOWER;break;case n.ML:o=dt.MIXED;break;case n.PS:s=o,o=dt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=dt.ALPHA;break}break;case dt.LOWER:if(c<26)f=String.fromCharCode(97+c);else switch(c){case 26:f=" ";break;case n.AS:s=o,o=dt.ALPHA_SHIFT;break;case n.ML:o=dt.MIXED;break;case n.PS:s=o,o=dt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=dt.ALPHA;break}break;case dt.MIXED:if(c<n.PL)f=n.MIXED_CHARS[c];else switch(c){case n.PL:o=dt.PUNCT;break;case 26:f=" ";break;case n.LL:o=dt.LOWER;break;case n.AL:o=dt.ALPHA;break;case n.PS:s=o,o=dt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=dt.ALPHA;break}break;case dt.PUNCT:if(c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:o=dt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=dt.ALPHA;break}break;case dt.ALPHA_SHIFT:if(o=s,c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:o=dt.ALPHA;break}break;case dt.PUNCT_SHIFT:if(o=s,c<n.PAL)f=n.PUNCT_CHARS[c];else switch(c){case n.PAL:o=dt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=dt.ALPHA;break}break}f!==""&&i.append(f),u++}},n.byteCompaction=function(e,t,r,i,o){var s=new kV,u=0,c=0,f=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),p=t[i++];i<t[0]&&!f;)switch(d[u++]=p,c=900*c+p,p=t[i++],p){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(u%5===0&&u>0){for(var v=0;v<6;++v)s.write(Number(Ho(c)>>Ho(8*(5-v))));c=0,u=0}break}i===t[0]&&p<n.TEXT_COMPACTION_MODE_LATCH&&(d[u++]=p);for(var y=0;y<u;y++)s.write(d[y]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!f;){var E=t[i++];if(E<n.TEXT_COMPACTION_MODE_LATCH)u++,c=900*c+E;else switch(E){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(u%5===0&&u>0){for(var v=0;v<6;++v)s.write(Number(Ho(c)>>Ho(8*(5-v))));c=0,u=0}}break}return o.append(Or.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,o=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!o;){var u=e[t++];if(t===e[0]&&(o=!0),u<n.TEXT_COMPACTION_MODE_LATCH)s[i]=u,i++;else switch(u){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||u===n.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Ho(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Ho(e[i]);var o=r.toString();if(o.charAt(0)!=="1")throw new ce;return o.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=US()?MV():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n})(),Zl=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FV=(function(){function n(){}return n.decode=function(e,t,r,i,o,s,u){for(var c=new Kg(e,t,r,i,o),f=null,d=null,p,v=!0;;v=!1){if(t!=null&&(f=n.getRowIndicatorColumn(e,c,t,!0,s,u)),i!=null&&(d=n.getRowIndicatorColumn(e,c,i,!1,s,u)),p=n.merge(f,d),p==null)throw te.getNotFoundInstance();var y=p.getBoundingBox();if(v&&y!=null&&(y.getMinY()<c.getMinY()||y.getMaxY()>c.getMaxY()))c=y;else break}p.setBoundingBox(c);var E=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,f),p.setDetectionResultColumn(E,d);for(var T=f!=null,C=1;C<=E;C++){var b=T?C:E-C;if(p.getDetectionResultColumn(b)===void 0){var P=void 0;b===0||b===E?P=new jE(c,b===0):P=new BS(c),p.setDetectionResultColumn(b,P);for(var D=-1,F=D,j=c.getMinY();j<=c.getMaxY();j++){if(D=n.getStartColumn(p,b,j,T),D<0||D>c.getMaxX()){if(F===-1)continue;D=F}var W=n.detectCodeword(e,c.getMinX(),c.getMaxX(),T,D,j,s,u);W!=null&&(P.setCodeword(j,W),F=D,s=Math.min(s,W.getWidth()),u=Math.max(u,W.getWidth()))}}}return n.createDecoderResult(p)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=Kg.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new TV(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=n.getMax(i),s=0;try{for(var u=Zl(i),c=u.next();!c.done;c=u.next()){var f=c.value;if(s+=o-f,f>0)break}}catch(y){t={error:y}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}for(var d=e.getCodewords(),p=0;s>0&&d[p]==null;p++)s--;for(var v=0,p=i.length-1;p>=0&&(v+=o-i[p],!(i[p]>0));p--);for(var p=d.length-1;v>0&&d[p]==null;p--)v--;return e.getBoundingBox().addMissingRows(s,v,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var o=Zl(e),s=o.next();!s.done;s=o.next()){var u=s.value;i=Math.max(i,u)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,o,s){for(var u=new jE(t,i),c=0;c<2;c++)for(var f=c===0?1:-1,d=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=f){var v=n.detectCodeword(e,0,e.getWidth(),i,d,p,o,s);v!=null&&(u.setCodeword(p,v),i?d=v.getStartX():d=v.getEndX())}return u},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>tt.MAX_CODEWORDS_IN_BARCODE)throw te.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,u=0;u<e.getBarcodeRowCount();u++)for(var c=0;c<e.getBarcodeColumnCount();c++){var f=t[u][c+1].getValue(),d=u*e.getBarcodeColumnCount()+c;f.length===0?r.push(d):f.length===1?i[d]=f[0]:(s.push(d),o.push(f))}for(var p=new Array(o.length),v=0;v<p.length;v++)p[v]=o[v];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,tt.toIntArray(r),tt.toIntArray(s),p)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,o){for(var s=new Int32Array(i.length),u=100;u-- >0;){for(var c=0;c<s.length;c++)t[i[c]]=o[c][s[c]];try{return n.decodeCodewords(t,e,r)}catch(d){var f=d instanceof pn;if(!f)throw d}if(s.length===0)throw pn.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<o[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw pn.getChecksumInstance()}throw pn.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),u=0;u<s.length;u++)for(var c=0;c<s[u].length;c++)s[u][c]=new ac;var f=0;try{for(var d=Zl(e.getDetectionResultColumns()),p=d.next();!p.done;p=d.next()){var v=p.value;if(v!=null)try{for(var y=(i=void 0,Zl(v.getCodewords())),E=y.next();!E.done;E=y.next()){var T=E.value;if(T!=null){var C=T.getRowNumber();if(C>=0){if(C>=s.length)continue;s[C][f].setValue(T.getValue())}}}}catch(b){i={error:b}}finally{try{E&&!E.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}f++}}catch(b){t={error:b}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var o,s,u=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-u)&&(c=e.getDetectionResultColumn(t-u).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-u)&&(c=e.getDetectionResultColumn(t-u).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var f=0;n.isValidBarcodeColumn(e,t-u);){t-=u;try{for(var d=(o=void 0,Zl(e.getDetectionResultColumn(t).getCodewords())),p=d.next();!p.done;p=d.next()){var v=p.value;if(v!=null)return(i?v.getEndX():v.getStartX())+u*f*(v.getEndX()-v.getStartX())}}catch(y){o={error:y}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(o)throw o.error}}f++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,o,s,u,c){o=n.adjustCodewordStartColumn(e,t,r,i,o,s);var f=n.getModuleBitCount(e,t,r,i,o,s);if(f==null)return null;var d,p=ot.sum(f);if(i)d=o+p;else{for(var v=0;v<f.length/2;v++){var y=f[v];f[v]=f[f.length-1-v],f[f.length-1-v]=y}d=o,o=d-p}if(!n.checkCodewordSkew(p,u,c))return null;var E=IV.getDecodedValue(f),T=tt.getCodeword(E);return T===-1?null:new CV(o,d,n.getCodewordBucketNumber(E),T)},n.getModuleBitCount=function(e,t,r,i,o,s){for(var u=o,c=new Int32Array(8),f=0,d=i?1:-1,p=i;(i?u<r:u>=t)&&f<c.length;)e.get(u,s)===p?(c[f]++,u+=d):(f++,p=!p);return f===c.length||u===(i?r:t)&&f===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,o,s){for(var u=o,c=i?-1:1,f=0;f<2;f++){for(;(i?u>=t:u<r)&&i===e.get(u,s);){if(Math.abs(o-u)>n.CODEWORD_SKEW_SIZE)return o;u+=c}c=-c,i=!i}return u},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw ce.getFormatInstance();var i=1<<t+1,o=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=LV.decode(e,""+t);return s.setErrorsCorrected(o),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw pn.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw ce.getFormatInstance();var r=e[0];if(r>e.length)throw ce.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw ce.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new zv,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new vV,n})(),VV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qg=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw te.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof ce||r instanceof pn?te.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,o,s=new Array,u=fV.detectMultiple(e,t,r);try{for(var c=VV(u.getPoints()),f=c.next();!f.done;f=c.next()){var d=f.value,p=FV.decode(u.getBits(),d[4],d[5],d[6],d[7],n.getMinCodewordWidth(d),n.getMaxCodewordWidth(d)),v=new Vn(p.getText(),p.getRawBytes(),void 0,d,Re.PDF_417);v.putMetadata(Cn.ERROR_CORRECTION_LEVEL,p.getECLevel());var y=p.getOther();y!=null&&v.putMetadata(Cn.PDF417_EXTRA_METADATA,y),s.push(v)}}catch(E){i={error:E}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return s.map(function(E){return E})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?$e.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n})(),BV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),HE=(function(n){BV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e})(nr),GE=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UV=(function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(bt.TRY_HARDER)!==void 0,r=e==null?null:e.get(bt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var o=r.some(function(s){return s===Re.UPC_A||s===Re.UPC_E||s===Re.EAN_13||s===Re.EAN_8||s===Re.CODABAR||s===Re.CODE_39||s===Re.CODE_93||s===Re.CODE_128||s===Re.ITF||s===Re.RSS_14||s===Re.RSS_EXPANDED});o&&!t&&i.push(new sc(e)),r.includes(Re.QR_CODE)&&i.push(new $g),r.includes(Re.DATA_MATRIX)&&i.push(new Wg),r.includes(Re.AZTEC)&&i.push(new Hg),r.includes(Re.PDF_417)&&i.push(new qg),o&&t&&i.push(new sc(e))}i.length===0&&(t||i.push(new sc(e)),i.push(new $g),i.push(new Wg),i.push(new Hg),i.push(new qg),t&&i.push(new sc(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=GE(this.readers),i=r.next();!i.done;i=r.next()){var o=i.value;o.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new HE("No readers where selected, nothing can be read.");try{for(var i=GE(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(u){if(u instanceof HE)continue}}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new te("No MultiFormat Readers were able to detect the code.")},n})(),jV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),zV=(function(n){jV(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,o=new UV;return o.setHints(t),i=n.call(this,o,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(Zu),HV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){HV(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new qg,t)||this}return e})(Zu);var GV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){GV(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new $g,t)||this}return e})(Zu);var Xg;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Xg||(Xg={}));const Gh=Xg;var jS=(function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ns(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,o=t.length;o<=e;o++){var s=r.multiply(new ns(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Oe("No error correction bytes");var r=e.length-t;if(r<=0)throw new Oe("No data bytes provided");var i=this.buildGenerator(t),o=new Int32Array(r);yt.arraycopy(e,0,o,0,r);var s=new ns(this.field,o);s=s.multiplyByMonomial(t,1);for(var u=s.divide(i)[1],c=u.getCoefficients(),f=t-c.length,d=0;d<f;d++)e[r+d]=0;yt.arraycopy(c,0,e,r+f,c.length)},n})(),uc=(function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var u=r[s],c=0;c<i-1;c++){var f=u[c];f===u[c+1]&&f===r[s+1][c]&&f===r[s+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var u=0;u<i;u++){var c=r[s];u+6<i&&c[u]===1&&c[u+1]===0&&c[u+2]===1&&c[u+3]===1&&c[u+4]===1&&c[u+5]===0&&c[u+6]===1&&(n.isWhiteHorizontal(c,u-4,u)||n.isWhiteHorizontal(c,u+7,u+11))&&t++,s+6<o&&r[s][u]===1&&r[s+1][u]===0&&r[s+2][u]===1&&r[s+3][u]===1&&r[s+4][u]===1&&r[s+5][u]===0&&r[s+6][u]===1&&(n.isWhiteVertical(r,u,s-4,s)||n.isWhiteVertical(r,u,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(e[o][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var u=r[s],c=0;c<i;c++)u[c]===1&&t++;var f=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(t*2-f)*10/f);return d*n.N4},n.getDataMaskBit=function(e,t,r){var i,o;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:o=r*t,i=(o&1)+o%3;break;case 6:o=r*t,i=(o&1)+o%3&1;break;case 7:o=r*t,i=o%3+(r+t&1)&1;break;default:throw new Oe("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),s=e.getArray(),u=0;u<i;u++){for(var c=0,f=-1,d=0;d<o;d++){var p=t?s[u][d]:s[d][u];p===f?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,f=p)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n})(),WV=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$V=(function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=WV(this.bytes),o=i.next();!o.done;o=i.next()){var s=o.value;nn.fill(s,e)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],s=t.bytes[r],u=0,c=this.width;u<c;++u)if(o[u]!==s[u])return!1;return!0},n.prototype.toString=function(){for(var e=new Ge,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],o=0,s=this.width;o<s;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n})(),Yg=(function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new Ge;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n})(),KV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Et=(function(n){KV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e})(nr),WE=(function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,o){n.clearMatrix(o),n.embedBasicPatterns(r,o),n.embedTypeInfo(t,i,o),n.maybeEmbedVersionInfo(r,o),n.embedDataBits(e,i,o)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new gn;n.makeTypeInfoBits(e,t,i);for(var o=0,s=i.getSize();o<s;++o){var u=i.get(i.getSize()-1-o),c=n.TYPE_INFO_COORDINATES[o],f=c[0],d=c[1];if(r.setBoolean(f,d,u),o<8){var p=r.getWidth()-o-1,v=8;r.setBoolean(p,v,u)}else{var p=8,v=r.getHeight()-7+(o-8);r.setBoolean(p,v,u)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new gn;n.makeVersionInfoBits(e,r);for(var i=17,o=0;o<6;++o)for(var s=0;s<3;++s){var u=r.get(i);i--,t.setBoolean(o,t.getHeight()-11+s,u),t.setBoolean(t.getHeight()-11+s,o,u)}}},n.embedDataBits=function(e,t,r){for(var i=0,o=-1,s=r.getWidth()-1,u=r.getHeight()-1;s>0;){for(s===6&&(s-=1);u>=0&&u<r.getHeight();){for(var c=0;c<2;++c){var f=s-c;if(n.isEmpty(r.get(f,u))){var d=void 0;i<e.getSize()?(d=e.get(i),++i):d=!1,t!==255&&uc.getDataMaskBit(t,f,u)&&(d=!d),r.setBoolean(f,u,d)}}u+=o}o=-o,u+=o,s-=2}if(i!==e.getSize())throw new Et("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-$e.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Oe("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!Yg.isValidMaskPattern(t))throw new Et("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var o=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(o,10);var s=new gn;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new Et("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Et("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Et;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Et;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Et;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var o=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var o=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,s=i.length;o!==s;o++){var u=i[o];if(u>=0)for(var c=0;c!==s;c++){var f=i[c];f>=0&&n.isEmpty(t.get(f,u))&&n.embedPositionAdjustmentPattern(f-2,u-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})(),qV=(function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n})(),$E=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return uc.applyMaskPenaltyRule1(e)+uc.applyMaskPenaltyRule2(e)+uc.applyMaskPenaltyRule3(e)+uc.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,o=r!==null&&r.get(Gh.CHARACTER_SET)!==void 0;o&&(i=r.get(Gh.CHARACTER_SET).toString());var s=this.chooseMode(e,i),u=new gn;if(s===At.BYTE&&(o||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=tn.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,u)}this.appendModeInfo(s,u);var f=new gn;this.appendBytes(e,s,f,i);var d;if(r!==null&&r.get(Gh.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(Gh.QR_VERSION).toString(),10);d=ia.getVersionForNumber(p);var v=this.calculateBitsNeeded(s,u,f,d);if(!this.willFit(v,d,t))throw new Et("Data too big for requested version")}else d=this.recommendVersion(t,s,u,f);var y=new gn;y.appendBitArray(u);var E=s===At.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(E,d,s,y),y.appendBitArray(f);var T=d.getECBlocksForLevel(t),C=d.getTotalCodewords()-T.getTotalECCodewords();this.terminateBits(C,y);var b=this.interleaveWithECBytes(y,d.getTotalCodewords(),C,T.getNumBlocks()),P=new Yg;P.setECLevel(t),P.setMode(s),P.setVersion(d);var D=d.getDimensionForVersion(),F=new $V(D,D),j=this.chooseMaskPattern(b,t,d,F);return P.setMaskPattern(j),WE.buildMatrix(b,t,d,j,F),P.setMatrix(F),P},n.recommendVersion=function(e,t,r,i){var o=this.calculateBitsNeeded(t,r,i,ia.getVersionForNumber(1)),s=this.chooseVersion(o,e),u=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(u,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),tn.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return At.KANJI;for(var r=!1,i=!1,o=0,s=e.length;o<s;++o){var u=e.charAt(o);if(n.isDigit(u))r=!0;else if(this.getAlphanumericCode(u.charCodeAt(0))!==-1)i=!0;else return At.BYTE}return i?At.ALPHANUMERIC:r?At.NUMERIC:At.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=Or.encode(e,tn.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var o=t[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var o=Number.MAX_SAFE_INTEGER,s=-1,u=0;u<Yg.NUM_MASK_PATTERNS;u++){WE.buildMatrix(e,t,r,u,i);var c=this.calculateMaskPenalty(i);c<o&&(o=c,s=u)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=ia.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Et("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),o=t.getECBlocksForLevel(r),s=o.getTotalECCodewords(),u=i-s,c=(e+7)/8;return u>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Et("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var o=t.getSize()&7;if(o>0)for(var i=o;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Et("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,o,s){if(i>=r)throw new Et("Block ID too large");var u=e%r,c=r-u,f=Math.floor(e/r),d=f+1,p=Math.floor(t/r),v=p+1,y=f-p,E=d-v;if(y!==E)throw new Et("EC bytes mismatch");if(r!==c+u)throw new Et("RS blocks mismatch");if(e!==(p+y)*c+(v+E)*u)throw new Et("Total bytes mismatch");i<c?(o[0]=p,s[0]=y):(o[0]=v,s[0]=E)},n.interleaveWithECBytes=function(e,t,r,i){var o,s,u,c;if(e.getSizeInBytes()!==r)throw new Et("Number of bits and data bytes does not match");for(var f=0,d=0,p=0,v=new Array,y=0;y<i;++y){var E=new Int32Array(1),T=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,y,E,T);var C=E[0],b=new Uint8Array(C);e.toBytes(8*f,b,0,C);var P=n.generateECBytes(b,T[0]);v.push(new qV(b,P)),d=Math.max(d,C),p=Math.max(p,P.length),f+=E[0]}if(r!==f)throw new Et("Data bytes does not match offset");for(var D=new gn,y=0;y<d;++y)try{for(var F=(o=void 0,$E(v)),j=F.next();!j.done;j=F.next()){var W=j.value,b=W.getDataBytes();y<b.length&&D.appendBits(b[y],8)}}catch(M){o={error:M}}finally{try{j&&!j.done&&(s=F.return)&&s.call(F)}finally{if(o)throw o.error}}for(var y=0;y<p;++y)try{for(var R=(u=void 0,$E(v)),I=R.next();!I.done;I=R.next()){var W=I.value,P=W.getErrorCorrectionBytes();y<P.length&&D.appendBits(P[y],8)}}catch(M){u={error:M}}finally{try{I&&!I.done&&(c=R.return)&&c.call(R)}finally{if(u)throw u.error}}if(t!==D.getSizeInBytes())throw new Et("Interleaving error: "+t+" and "+D.getSizeInBytes()+" differ.");return D},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),o=0;o<r;o++)i[o]=e[o]&255;new jS(er.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),o=0;o<t;o++)s[o]=i[r+o];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var o=r.getCharacterCountBits(t);if(e>=1<<o)throw new Et(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},n.appendBytes=function(e,t,r,i){switch(t){case At.NUMERIC:n.appendNumericBytes(e,r);break;case At.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case At.BYTE:n.append8BitBytes(e,r,i);break;case At.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Et("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),u=n.getDigit(e.charAt(i+2));t.appendBits(o*100+s*10+u,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(o*10+s,7),i+=2}else t.appendBits(o,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new Et;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new Et;t.appendBits(o*45+s,11),i+=2}else t.appendBits(o,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=Or.encode(e,r)}catch(c){throw new Et(c)}for(var o=0,s=i.length;o!==s;o++){var u=i[o];t.appendBits(u,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=Or.encode(e,tn.SJIS)}catch(p){throw new Et(p)}for(var i=r.length,o=0;o<i;o+=2){var s=r[o]&255,u=r[o+1]&255,c=s<<8&4294967295|u,f=-1;if(c>=33088&&c<=40956?f=c-33088:c>=57408&&c<=60351&&(f=c-49472),f===-1)throw new Et("Invalid byte sequence");var d=(f>>8)*192+(f&255);t.appendBits(d,13)}},n.appendECI=function(e,t){t.appendBits(At.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=tn.UTF8.getName(),n})();var XV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){XV(e,n);function e(t,r,i,o,s,u,c,f){var d=n.call(this,u,c)||this;if(d.yuvData=t,d.dataWidth=r,d.dataHeight=i,d.left=o,d.top=s,o+u>r||s+c>i)throw new Oe("Crop rectangle does not fit within image data.");return f&&d.reverseHorizontal(u,c),d}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Oe("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return yt.arraycopy(this.yuvData,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return yt.arraycopy(this.yuvData,s,o,0,i),o;for(var u=0;u<r;u++){var c=u*t;yt.arraycopy(this.yuvData,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),o=this.yuvData,s=this.top*this.dataWidth+this.left,u=0;u<r;u++){for(var c=u*t,f=0;f<t;f++){var d=o[s+f*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+f]=4278190080|d*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<r;o++,s+=this.dataWidth)for(var u=s+t/2,c=s,f=s+t-1;c<u;c++,f--){var d=i[c];i[c]=i[f],i[f]=d}},e.prototype.invert=function(){return new Vv(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(fp);var YV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){YV(e,n);function e(t,r,i,o,s,u,c){var f=n.call(this,r,i)||this;if(f.dataWidth=o,f.dataHeight=s,f.left=u,f.top=c,t.BYTES_PER_ELEMENT===4){for(var d=r*i,p=new Uint8ClampedArray(d),v=0;v<d;v++){var y=t[v],E=y>>16&255,T=y>>7&510,C=y&255;p[v]=(E+T+C)/4&255}f.luminances=p}else f.luminances=t;if(o===void 0&&(f.dataWidth=r),s===void 0&&(f.dataHeight=i),u===void 0&&(f.left=0),c===void 0&&(f.top=0),f.left+r>f.dataWidth||f.top+i>f.dataHeight)throw new Oe("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Oe("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return yt.arraycopy(this.luminances,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return yt.arraycopy(this.luminances,s,o,0,i),o;for(var u=0;u<r;u++){var c=u*t;yt.arraycopy(this.luminances,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new Vv(this)},e})(fp);var QV=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ZV=(function(n){QV(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(tn),JV=(function(){function n(){}return n.ISO_8859_1=tn.ISO8859_1,n})(),Qg,eB=301,tB=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=eB);return{LOG:n,ALOG:e}};Qg=tB([],[]),Qg.LOG;Qg.ALOG;var KE;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(KE||(KE={}));var qE=129,zS=230,nB=231,rB=235,iB=236,oB=237,sB=238,aB=239,uB=240,O1=254,lB=254,XE="[)>05",YE="[)>06",QE="",ht=0,xn=1,Hn=2,Jt=3,fn=4,Nn=5,cB=(function(){function n(){}return n.prototype.getEncodingMode=function(){return ht},n.prototype.encode=function(e){var t=Kr.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=Kr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Nn:e.writeCodeword(nB),e.signalEncoderChange(Nn);return;case xn:e.writeCodeword(zS),e.signalEncoderChange(xn);return;case Jt:e.writeCodeword(sB),e.signalEncoderChange(Jt);break;case Hn:e.writeCodeword(aB),e.signalEncoderChange(Hn);break;case fn:e.writeCodeword(uB),e.signalEncoderChange(fn);break;default:throw new Error("Illegal mode: "+i)}else Kr.isExtendedASCII(r)?(e.writeCodeword(rB),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(Kr.isDigit(e)&&Kr.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n})(),fB=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Nn},n.prototype.encode=function(e){var t=new Ge;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=Kr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(ht);break}}var o=t.length()-1,s=1,u=e.getCodewordCount()+o+s;e.updateSymbolInfo(u);var c=e.getSymbolInfo().getDataCapacity()-u>0;if(e.hasMoreCharacters()||c)if(o<=249)t.setCharAt(0,Je.getCharAt(o));else if(o<=1555)t.setCharAt(0,Je.getCharAt(Math.floor(o/250)+249)),t.insert(1,Je.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var f=0,r=t.length();f<r;f++)e.writeCodeword(this.randomize255State(t.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n})(),Hv=(function(){function n(){}return n.prototype.getEncodingMode=function(){return xn},n.prototype.encodeMaximal=function(e){for(var t=new Ge,r=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,o=t.length())}if(o!==t.length()){var u=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+u+1);e.updateSymbolInfo(c);var f=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(t.length()%3);(d===2&&f!==2||d===1&&(r>3||f!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(zS),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new Ge;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),o=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var u=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new Ge;for(t.length()%3===2&&u!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||u!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var f=t.length();if(f%3===0){var d=Kr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(ht);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var o=t.length(),s=t.toString().substring(0,o-i);t.setLengthToZero(),t.append(s),e.pos--;var u=e.getCurrentChar();return i=this.encodeChar(u,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,o=e.getCodewordCount()+r;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(O1)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(O1),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(O1)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(ht)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,o=new Ge;return o.append(r),o.append(i),o.toString()},n})(),hB=(function(){function n(){}return n.prototype.getEncodingMode=function(){return fn},n.prototype.encode=function(e){for(var t=new Ge;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var o=t.toString().substring(4);t.setLengthToZero(),t.append(o);var s=Kr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(ht);break}}}t.append(Je.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,u=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),f=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+u.length))}f?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(u)}finally{e.signalEncoderChange(ht)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(Je.getCharAt(e-64)):Kr.illegalCharacter(Je.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,o=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,u=(r<<18)+(i<<12)+(o<<6)+s,c=u>>16&255,f=u>>8&255,d=u&255,p=new Ge;return p.append(c),t>=2&&p.append(f),t>=3&&p.append(d),p.toString()},n})(),dB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ut=(function(){function n(e,t,r,i,o,s,u,c){u===void 0&&(u=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=u,this.rsBlockError=c}return n.lookup=function(e,t,r,i,o){var s,u;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var c=pB(mB),f=c.next();!f.done;f=c.next()){var d=f.value;if(!(t===1&&d.rectangular)&&!(t===2&&!d.rectangular)&&!(r!=null&&(d.getSymbolWidth()<r.getWidth()||d.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&e<=d.dataCapacity)return d}}catch(p){s={error:p}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n})(),gB=(function(n){dB(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(ut),mB=[new ut(!1,3,5,8,8,1),new ut(!1,5,7,10,10,1),new ut(!0,5,7,16,6,1),new ut(!1,8,10,12,12,1),new ut(!0,10,11,14,6,2),new ut(!1,12,12,14,14,1),new ut(!0,16,14,24,10,1),new ut(!1,18,14,16,16,1),new ut(!1,22,18,18,18,1),new ut(!0,22,18,16,10,2),new ut(!1,30,20,20,20,1),new ut(!0,32,24,16,14,2),new ut(!1,36,24,22,22,1),new ut(!1,44,28,24,24,1),new ut(!0,49,28,22,14,2),new ut(!1,62,36,14,14,4),new ut(!1,86,42,16,16,4),new ut(!1,114,48,18,18,4),new ut(!1,144,56,20,20,4),new ut(!1,174,68,22,22,4),new ut(!1,204,84,24,24,4,102,42),new ut(!1,280,112,14,14,16,140,56),new ut(!1,368,144,16,16,16,92,36),new ut(!1,456,192,18,18,16,114,48),new ut(!1,576,224,20,20,16,144,56),new ut(!1,696,272,22,22,16,174,68),new ut(!1,816,336,24,24,16,136,56),new ut(!1,1050,408,18,18,36,175,68),new ut(!1,1304,496,20,20,36,163,62),new gB],vB=(function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(u){return u.charCodeAt(0)}),r=new Ge,i=0,o=t.length;i<o;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new Ge,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ut.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n})(),yB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_B=(function(n){yB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Jt},e.prototype.encode=function(t){for(var r=new Ge;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var o=r.length();if(o%3===0){this.writeNextTriplet(t,r);var s=Kr.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(ht);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):Kr.illegalCharacter(Je.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),o=r.length();t.pos-=o,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(lB),t.getNewEncoding()<0&&t.signalEncoderChange(ht)},e})(Hv),wB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xB=(function(n){wB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Hn},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e})(Hv),Kr=(function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=qE+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,o){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new Hv,u=[new cB,s,new xB,new _B,new hB,new fB],c=new vB(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(XE)&&e.endsWith(QE)?(c.writeCodeword(iB),c.setSkipAtEnd(2),c.pos+=XE.length):e.startsWith(YE)&&e.endsWith(QE)&&(c.writeCodeword(oB),c.setSkipAtEnd(2),c.pos+=YE.length);var f=ht;for(o&&(s.encodeMaximal(c),f=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)u[f].encode(c),c.getNewEncoding()>=0&&(f=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();d<p&&f!==ht&&f!==Nn&&f!==fn&&c.writeCodeword("þ");var v=c.getCodewords();for(v.length()<p&&v.append(qE);v.length()<p;)v.append(this.randomize253State(v.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===Jt&&i===Jt){for(var o=Math.min(t+3,e.length),s=t;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return ht}else if(r===fn&&i===fn){for(var o=Math.min(t+4,e.length),s=t;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return ht}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===ht?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var o=0,s=new Uint8Array(6),u=[];;){if(t+o===e.length){nn.fill(s,0),nn.fill(u,0);var c=this.findMinimums(i,u,$e.MAX_VALUE,s),f=this.getMinimumCount(s);if(u[ht]===c)return ht;if(f===1){if(s[Nn]>0)return Nn;if(s[fn]>0)return fn;if(s[Hn]>0)return Hn;if(s[Jt]>0)return Jt}return xn}var d=e.charCodeAt(t+o);if(o++,this.isDigit(d)?i[ht]+=.5:this.isExtendedASCII(d)?(i[ht]=Math.ceil(i[ht]),i[ht]+=2):(i[ht]=Math.ceil(i[ht]),i[ht]++),this.isNativeC40(d)?i[xn]+=2/3:this.isExtendedASCII(d)?i[xn]+=8/3:i[xn]+=4/3,this.isNativeText(d)?i[Hn]+=2/3:this.isExtendedASCII(d)?i[Hn]+=8/3:i[Hn]+=4/3,this.isNativeX12(d)?i[Jt]+=2/3:this.isExtendedASCII(d)?i[Jt]+=13/3:i[Jt]+=10/3,this.isNativeEDIFACT(d)?i[fn]+=3/4:this.isExtendedASCII(d)?i[fn]+=17/4:i[fn]+=13/4,this.isSpecialB256(d)?i[Nn]+=4:i[Nn]++,o>=4){if(nn.fill(s,0),nn.fill(u,0),this.findMinimums(i,u,$e.MAX_VALUE,s),u[ht]<this.min(u[Nn],u[xn],u[Hn],u[Jt],u[fn]))return ht;if(u[Nn]<u[ht]||u[Nn]+1<this.min(u[xn],u[Hn],u[Jt],u[fn]))return Nn;if(u[fn]+1<this.min(u[Nn],u[xn],u[Hn],u[Jt],u[ht]))return fn;if(u[Hn]+1<this.min(u[Nn],u[xn],u[fn],u[Jt],u[ht]))return Hn;if(u[Jt]+1<this.min(u[Nn],u[xn],u[fn],u[Hn],u[ht]))return Jt;if(u[xn]+1<this.min(u[ht],u[Nn],u[fn],u[Hn])){if(u[xn]<u[Jt])return xn;if(u[xn]===u[Jt]){for(var p=t+o+1;p<e.length;){var v=e.charCodeAt(p);if(this.isX12TermSep(v))return Jt;if(!this.isNativeX12(v))break;p++}return xn}}}}},n.min=function(e,t,r,i,o){var s=Math.min(e,Math.min(t,Math.min(r,i)));return o===void 0?s:Math.min(s,o)},n.findMinimums=function(e,t,r,i){for(var o=0;o<6;o++){var s=t[o]=Math.ceil(e[o]);r>s&&(r=s,nn.fill(i,0)),r===s&&(i[o]=i[o]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=$e.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n})(),N1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZE=(function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return Or.encode(e,this.charset)!=null}catch{return!1}},n})(),EB=(function(){function n(e,t,r){var i,o,s,u,c,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(O){return new ZE(ZV.forName(O))}),this.encoders=[];var d=[];d.push(new ZE(JV.ISO_8859_1));for(var p=t!=null&&t.name.startsWith("UTF"),v=0;v<e.length;v++){var y=!1;try{for(var E=(i=void 0,N1(d)),T=E.next();!T.done;T=E.next()){var C=T.value,b=e.charAt(v),P=b.charCodeAt(0);if(P===r||C.canEncode(b)){y=!0;break}}}catch(O){i={error:O}}finally{try{T&&!T.done&&(o=E.return)&&o.call(E)}finally{if(i)throw i.error}}if(!y)try{for(var D=(s=void 0,N1(this.ENCODERS)),F=D.next();!F.done;F=D.next()){var C=F.value;if(C.canEncode(e.charAt(v))){d.push(C),y=!0;break}}}catch(O){s={error:O}}finally{try{F&&!F.done&&(u=D.return)&&u.call(D)}finally{if(s)throw s.error}}y||(p=!0)}if(d.length===1&&!p)this.encoders=[d[0]];else{this.encoders=[];var j=0;try{for(var W=N1(d),R=W.next();!R.done;R=W.next()){var C=R.value;this.encoders[j++]=C}}catch(O){c={error:O}}finally{try{R&&!R.done&&(f=W.return)&&f.call(W)}finally{if(c)throw c.error}}}var I=-1;if(t!=null){for(var v=0;v<this.encoders.length;v++)if(this.encoders[v]!=null&&t.name===this.encoders[v].name){I=v;break}}this.priorityEncoderIndex=I}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Or.encode(Je.getCharAt(e),this.encoders[t].name)},n})(),AB=3,TB=(function(){function n(e,t,r){this.fnc1=r;var i=new EB(e,t,r);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new Ge,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,o,s){var u=e.charAt(i).charCodeAt(0),c=0,f=t.length();t.getPriorityEncoderIndex()>=0&&(u===s||t.canEncode(u,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),f=c+1);for(var d=c;d<f;d++)(u===s||t.canEncode(u,d))&&this.addEdge(r,i+1,new JE(u,t,d,o,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,o=new JE[i+1][t.length()];this.addEdges(e,t,o,0,null,r);for(var s=1;s<=i;s++){for(var u=0;u<t.length();u++)o[s][u]!=null&&s<i&&this.addEdges(e,t,o,s,o[s][u],r);for(var u=0;u<t.length();u++)o[s-1][u]=null}for(var c=-1,f=$e.MAX_VALUE,u=0;u<t.length();u++)if(o[i][u]!=null){var d=o[i][u];d.cachedTotalSize<f&&(f=d.cachedTotalSize,c=u)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],v=o[i][c];v!=null;){if(v.isFNC1())p.unshift(1e3);else for(var y=t.encode(v.c,v.encoderIndex),s=y.length-1;s>=0;s--)p.unshift(y[s]&255);var E=v.previous===null?0:v.previous.encoderIndex;E!==v.encoderIndex&&p.unshift(256+t.getECIValue(v.encoderIndex)),v=v.previous}for(var T=[],s=0;s<T.length;s++)T[s]=p[s];return T},n})(),JE=(function(){function n(e,t,r,i,o){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,u=i===null?0:i.encoderIndex;u!==r&&(s+=AB),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n})(),CB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();var eA;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(eA||(eA={}));(function(n){CB(e,n);function e(t,r,i,o,s){var u=n.call(this,t,r,i)||this;return u.shape=o,u.macroId=s,u}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(TB);var IB=(function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n})(),tA=(function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n})(),SB=(function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n})(),RB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Gv=(function(n){RB(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.value=r,o.bitCount=i,o}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+$e.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(SB),PB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bB=(function(n){PB(e,n);function e(t,r,i){var o=n.call(this,t,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(Gv);function DB(n,e,t){return new bB(n,e,t)}function Jl(n,e,t){return new Gv(n,e,t)}var OB=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],rs=0,Bd=1,br=2,HS=3,xi=4,NB=new Gv(null,0,0),k1=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],kB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function MB(n){var e,t;try{for(var r=kB(n),i=r.next();!i.done;i=r.next()){var o=i.value;nn.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[rs][xi]=0,n[Bd][xi]=0,n[Bd][rs]=28,n[HS][xi]=0,n[br][xi]=0,n[br][rs]=15,n}var GS=MB(nn.createInt32Array(6,6)),LB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FB=(function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var o=k1[this.mode][e];i=Jl(i,o&65535,o>>16),r+=o>>16}var s=e===br?4:5;return i=Jl(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===br?4:5;return r=Jl(r,GS[this.mode][e],i),r=Jl(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===xi||this.mode===br){var o=k1[r][rs];t=Jl(t,o&65535,o>>16),i+=o>>16,r=rs}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,u=new n(t,r,this.binaryShiftByteCount+1,i+s);return u.binaryShiftByteCount===2078&&(u=u.endBinaryShift(e+1)),u},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=DB(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(k1[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var s=new gn;try{for(var u=LB(i),c=u.next();!c.done;c=u.next()){var f=c.value;f.appendTo(s,e)}}catch(d){t={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return Je.format("%s bits=%d bytes=%d",OB[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(NB,rs,0,0),n})();function VB(n){var e=Je.getCharCode(" "),t=Je.getCharCode("."),r=Je.getCharCode(",");n[rs][e]=1;for(var i=Je.getCharCode("Z"),o=Je.getCharCode("A"),s=o;s<=i;s++)n[rs][s]=s-o+2;n[Bd][e]=1;for(var u=Je.getCharCode("z"),c=Je.getCharCode("a"),s=c;s<=u;s++)n[Bd][s]=s-c+2;n[br][e]=1;for(var f=Je.getCharCode("9"),d=Je.getCharCode("0"),s=d;s<=f;s++)n[br][s]=s-d+2;n[br][r]=12,n[br][t]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],v=0;v<p.length;v++)n[HS][Je.getCharCode(p[v])]=v;for(var y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],v=0;v<y.length;v++)Je.getCharCode(y[v])>0&&(n[xi][Je.getCharCode(y[v])]=v);return n}var M1=VB(nn.createInt32Array(5,256)),Wh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BB=(function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=Je.getCharCode(" "),t=Je.getCharCode(`
`),r=tA.singletonList(FB.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Je.getCharCode("\r"):o=s===t?2:0;break;case Je.getCharCode("."):o=s===e?3:0;break;case Je.getCharCode(","):o=s===e?4:0;break;case Je.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(r=n.updateStateListForPair(r,i,o),i++):r=this.updateStateListForChar(r,i)}var u=tA.min(r,function(c,f){return c.getBitCount()-f.getBitCount()});return u.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,o=[];try{for(var s=Wh(e),u=s.next();!u.done;u=s.next()){var c=u.value;this.updateStateForChar(c,t,o)}}catch(f){r={error:f}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(o)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,o=M1[e.getMode()][i]>0,s=null,u=0;u<=xi;u++){var c=M1[u][i];if(c>0){if(s==null&&(s=e.endBinaryShift(t)),!o||u===e.getMode()||u===br){var f=s.latchAndAppend(u,c);r.push(f)}if(!o&&GS[e.getMode()][u]>=0){var d=s.shiftAndAppend(u,c);r.push(d)}}}if(e.getBinaryShiftByteCount()>0||M1[e.getMode()][i]===0){var p=e.addBinaryShiftChar(t);r.push(p)}},n.updateStateListForPair=function(e,t,r){var i,o,s=[];try{for(var u=Wh(e),c=u.next();!c.done;c=u.next()){var f=c.value;this.updateStateForPair(f,t,r,s)}}catch(d){i={error:d}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var o=e.endBinaryShift(t);if(i.push(o.latchAndAppend(xi,r)),e.getMode()!==xi&&i.push(o.shiftAndAppend(xi,r)),r===3||r===4){var s=o.latchAndAppend(br,16-r).latchAndAppend(br,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var u=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(u)}},n.simplifyStates=function(e){var t,r,i,o,s=[];try{for(var u=Wh(e),c=u.next();!c.done;c=u.next()){var f=c.value,d=!0,p=function(C){if(C.isBetterThanOrEqualTo(f))return d=!1,"break";f.isBetterThanOrEqualTo(C)&&(s=s.filter(function(b){return b!==C}))};try{for(var v=(i=void 0,Wh(s)),y=v.next();!y.done;y=v.next()){var E=y.value,T=p(E);if(T==="break")break}}catch(C){i={error:C}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}d&&s.push(f)}}catch(C){t={error:C}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return s},n})(),UB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new BB(e).encode(),o=$e.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+o,u,c,f,d,p;if(r!==n.DEFAULT_AZTEC_LAYERS){if(u=r<0,c=Math.abs(r),c>(u?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Oe(Je.format("Illegal value %s for layers",r));f=n.totalBitsInLayer(c,u),d=n.WORD_SIZE[c];var v=f-f%d;if(p=n.stuffBits(i,d),p.getSize()+o>v)throw new Oe("Data to large for user specified layer");if(u&&p.getSize()>d*64)throw new Oe("Data to large for user specified layer")}else{d=0,p=null;for(var y=0;;y++){if(y>n.MAX_NB_BITS)throw new Oe("Data too large for an Aztec code");if(u=y<=3,c=u?y+1:y,f=n.totalBitsInLayer(c,u),!(s>f)){(p==null||d!==n.WORD_SIZE[c])&&(d=n.WORD_SIZE[c],p=n.stuffBits(i,d));var v=f-f%d;if(!(u&&p.getSize()>d*64)&&p.getSize()+o<=v)break}}}var E=n.generateCheckWords(p,f,d),T=p.getSize()/d,C=n.generateModeMessage(u,c,T),b=(u?11:14)+c*4,P=new Int32Array(b),D;if(u){D=b;for(var y=0;y<P.length;y++)P[y]=y}else{D=b+1+2*$e.truncDivision($e.truncDivision(b,2)-1,15);for(var F=$e.truncDivision(b,2),j=$e.truncDivision(D,2),y=0;y<F;y++){var W=y+$e.truncDivision(y,15);P[F-y-1]=j-W-1,P[F+y]=j+W+1}}for(var R=new bi(D),y=0,I=0;y<c;y++){for(var O=(c-y)*4+(u?9:12),M=0;M<O;M++)for(var B=M*2,z=0;z<2;z++)E.get(I+B+z)&&R.set(P[y*2+z],P[y*2+M]),E.get(I+O*2+B+z)&&R.set(P[y*2+M],P[b-1-y*2-z]),E.get(I+O*4+B+z)&&R.set(P[b-1-y*2-z],P[b-1-y*2-M]),E.get(I+O*6+B+z)&&R.set(P[b-1-y*2-M],P[y*2+z]);I+=O*8}if(n.drawModeMessage(R,u,D,C),u)n.drawBullsEye(R,$e.truncDivision(D,2),5);else{n.drawBullsEye(R,$e.truncDivision(D,2),7);for(var y=0,M=0;y<$e.truncDivision(b,2)-1;y+=15,M+=16)for(var z=$e.truncDivision(D,2)&1;z<D;z+=2)R.set($e.truncDivision(D,2)-M,z),R.set($e.truncDivision(D,2)+M,z),R.set(z,$e.truncDivision(D,2)-M),R.set(z,$e.truncDivision(D,2)+M)}var L=new IB;return L.setCompact(u),L.setSize(D),L.setLayers(c),L.setCodeWords(T),L.setMatrix(R),L},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var o=t-i;o<=t+i;o++)e.set(o,t-i),e.set(o,t+i),e.set(t-i,o),e.set(t+i,o);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new gn;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var o=$e.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var u=o-3+s;i.get(s)&&e.set(u,o-5),i.get(s+7)&&e.set(o+5,u),i.get(20-s)&&e.set(u,o+5),i.get(27-s)&&e.set(o-5,u)}else for(var s=0;s<10;s++){var u=o-5+s+$e.truncDivision(s,5);i.get(s)&&e.set(u,o-7),i.get(s+10)&&e.set(o+7,u),i.get(29-s)&&e.set(u,o+7),i.get(39-s)&&e.set(o-7,u)}},n.generateCheckWords=function(e,t,r){var i,o,s=e.getSize()/r,u=new jS(n.getGF(r)),c=$e.truncDivision(t,r),f=n.bitsToWords(e,r,c);u.encode(f,c-s);var d=t%r,p=new gn;p.appendBits(0,d);try{for(var v=UB(Array.from(f)),y=v.next();!y.done;y=v.next()){var E=y.value;p.appendBits(E,r)}}catch(T){i={error:T}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}return p},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),o,s;for(o=0,s=e.getSize()/t;o<s;o++){for(var u=0,c=0;c<t;c++)u|=e.get(o*t+c)?1<<t-c-1:0;i[o]=u}return i},n.getGF=function(e){switch(e){case 4:return er.AZTEC_PARAM;case 6:return er.AZTEC_DATA_6;case 8:return er.AZTEC_DATA_8;case 10:return er.AZTEC_DATA_10;case 12:return er.AZTEC_DATA_12;default:throw new Oe("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new gn,i=e.getSize(),o=(1<<t)-2,s=0;s<i;s+=t){for(var u=0,c=0;c<t;c++)(s+c>=i||e.get(s+c))&&(u|=1<<t-1-c);(u&o)===o?(r.appendBits(u&o,t),s--):(u&o)===0?(r.appendBits(u|1,t),s--):r.appendBits(u,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var jB={audio:!1,video:{facingMode:"environment"}},zB=300,HB=function(n){var e=n===void 0?{}:n,t=e.timeBetweenDecodingAttempts,r=t===void 0?zB:t,i=e.hints;return U.useMemo(function(){var o=new zV(i);return o.timeBetweenDecodingAttempts=r,o},[i,r])},nA=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(d){try{f(r.next(d))}catch(p){s(p)}}function c(d){try{f(r.throw(d))}catch(p){s(p)}}function f(d){d.done?o(d.value):i(d.value).then(u,c)}f((r=r.apply(n,e||[])).next())})},rA=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(d){return c([f,d])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},GB=function(n){var e=n.resetStream,t=U.useState(!1),r=t[0],i=t[1],o=U.useState(null),s=o[0],u=o[1],c=U.useRef(null),f=U.useRef(e),d=U.useCallback(function(y){c.current=y,u(typeof y.getCapabilities=="function"?y.getCapabilities().torch!==void 0:!1)},[]),p=U.useCallback(function(){return nA(void 0,void 0,void 0,function(){return rA(this,function(y){switch(y.label){case 0:return!c.current||!s?[2]:[4,c.current.applyConstraints({advanced:[{torch:!0}]})];case 1:return y.sent(),i(!0),[2]}})})},[s]),v=U.useCallback(function(){return nA(void 0,void 0,void 0,function(){return rA(this,function(y){switch(y.label){case 0:return!c.current||!s?[2]:(c.current=null,u(null),i(!1),[4,f.current()]);case 1:return y.sent(),[2]}})})},[s]);return U.useEffect(function(){f.current=e},[e]),{init:d,isOn:r,isAvailable:s,on:p,off:v}},WB=function(n,e){return JSON.stringify(n)===JSON.stringify(e)},iA=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(d){try{f(r.next(d))}catch(p){s(p)}}function c(d){try{f(r.throw(d))}catch(p){s(p)}}function f(d){d.done?o(d.value):i(d.value).then(u,c)}f((r=r.apply(n,e||[])).next())})},oA=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(d){return c([f,d])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},$B=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},KB=function(n){n===void 0&&(n={});var e=n.paused,t=e===void 0?!1:e,r=n.hints,i=n.timeBetweenDecodingAttempts,o=n.onDecodeResult,s=o===void 0?function(){}:o,u=n.onDecodeError,c=u===void 0?function(){}:u,f=n.onError,d=f===void 0?function(){}:f,p="deviceId"in n?n.deviceId:void 0,v=U.useState("constraints"in n?n.constraints:void 0),y=v[0],E=v[1],T=U.useRef(s),C=U.useRef(c),b=U.useRef(d),P=U.useRef(null),D=HB({hints:r,timeBetweenDecodingAttempts:i}),F=GB({resetStream:function(){return iA(void 0,void 0,void 0,function(){return oA(this,function(M){switch(M.label){case 0:return O(),[4,I()];case 1:return M.sent(),[2]}})})}}),j=F.init,W=$B(F,["init"]),R=U.useCallback(function(M,B){M&&T.current(M),B&&C.current(B)},[]),I=U.useCallback(function(){return iA(void 0,void 0,void 0,function(){var M,B,z;return oA(this,function(L){switch(L.label){case 0:if(!P.current)return[2];if(t)return[2];L.label=1;case 1:return L.trys.push([1,6,,7]),p?[4,D.decodeFromVideoDevice(p,P.current,R)]:[3,3];case 2:return L.sent(),[3,5];case 3:return[4,D.decodeFromConstraints(y??jB,P.current,R)];case 4:L.sent(),L.label=5;case 5:return[3,7];case 6:return M=L.sent(),b.current(M),[2];case 7:return P.current?(B=P.current.srcObject,z=B.getVideoTracks()[0],z&&j(z),[2]):[2]}})})},[D,p,y,t,R,j]),O=U.useCallback(function(){D.reset()},[D]);return U.useEffect(function(){T.current=s},[s]),U.useEffect(function(){C.current=c},[c]),U.useEffect(function(){b.current=d},[d]),U.useEffect(function(){var M=WB(y,n.constraints);M||E(n.constraints)},[y,n]),U.useEffect(function(){return I(),function(){O()}},[I,O]),{ref:P,torch:W}};const qB=({user:n})=>{const e=n?.uid,{toast:t}=Lv(),[r,i]=U.useState(0),[o,s]=U.useState(!1),[u,c]=U.useState(""),[f,d]=U.useState(!1),[p,v]=U.useState([]),[y,E]=U.useState(null),[T,C]=U.useState(!1);U.useEffect(()=>{if(!e)return;const D=Z7(e,F=>i(Number(F?.balance||0)));return()=>D&&D()},[e]),U.useEffect(()=>{if(!e)return;const D=J7(e,F=>v(F));return()=>D&&D()},[e]);const b=async D=>{const F=(D??u).trim();if(F){C(!0);try{const j=await eL(F),W=new Date,R=j.expiresAt?j.expiresAt<W:!1;E({...j,expired:R})}catch(j){t({title:"Código inválido",description:j?.message||"No se pudo validar el código",variant:"destructive"})}finally{C(!1)}}},{ref:P}=KB({onDecodeResult(D){d(!1);const F=D.getText();b(F)},paused:!f});return G.jsxs("div",{className:"rounded-2xl glass-effect p-6 w-full",children:[G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsx("h2",{className:"text-2xl font-bold",children:"Mis puntos"}),G.jsx("div",{className:"text-3xl font-black text-boreal-aqua",children:r})]}),G.jsxs("div",{className:"mt-6 grid gap-4 md:grid-cols-2",children:[G.jsxs("div",{className:"space-y-3",children:[G.jsx("label",{className:"text-sm text-gray-300",children:"Canjear con código"}),G.jsxs("div",{className:"flex gap-2",children:[G.jsx(bS,{placeholder:"Ingresa tu código",value:u,onChange:D=>c(D.target.value),className:"bg-white/5 border-white/20 text-white"}),G.jsxs(wi,{onClick:()=>b(),disabled:T||!u.trim(),children:[T?G.jsx(zc,{className:"w-4 h-4 animate-spin"}):G.jsx(_E,{className:"w-4 h-4"}),G.jsx("span",{className:"ml-2",children:"Verificar"})]})]})]}),G.jsxs("div",{className:"space-y-3",children:[G.jsx("label",{className:"text-sm text-gray-300",children:"Canjear escaneando QR"}),G.jsx("div",{className:"relative rounded-xl overflow-hidden border border-white/10 min-h-[220px] flex items-center justify-center",children:f?G.jsx("video",{ref:P,className:"w-full h-full object-cover"}):G.jsxs("div",{className:"p-8 text-center text-gray-300",children:[G.jsx(V7,{className:"w-10 h-10 mx-auto mb-3 text-boreal-aqua"}),G.jsx("p",{children:"Activa la cámara para escanear un código QR"}),G.jsx(wi,{variant:"outline",className:"mt-3 border-white/30 text-white hover:bg-white/10",onClick:()=>d(!0),children:"Usar cámara"})]})}),f&&G.jsx(wi,{variant:"ghost",className:"text-gray-300",onClick:()=>d(!1),children:"Detener cámara"})]})]}),G.jsxs("div",{className:"mt-8",children:[G.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Historial de canjes"}),p?.length?G.jsx("ul",{className:"divide-y divide-white/10 rounded-xl border border-white/10 overflow-hidden",children:p.map(D=>{const F=D.redeemedAt?.toDate?D.redeemedAt.toDate():D.redeemedAt instanceof Date?D.redeemedAt:null;return G.jsxs("li",{className:"flex items-center justify-between px-4 py-3 bg-white/5",children:[G.jsxs("div",{children:[G.jsxs("div",{className:"text-sm text-gray-300",children:["Código: ",G.jsx("span",{className:"font-mono text-white",children:D.code})]}),G.jsx("div",{className:"text-xs text-gray-400",children:F?F.toLocaleString():"—"})]}),G.jsxs("div",{className:"text-boreal-aqua font-bold",children:["+",D.amount]})]},D.id)})}):G.jsx("p",{className:"text-sm text-gray-400",children:"Aún no tienes canjes."})]}),y&&G.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[G.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>E(null)}),G.jsxs("div",{className:"relative z-10 glass-effect rounded-2xl p-6 w-[min(92vw,420px)]",children:[G.jsx("h4",{className:"text-xl font-semibold mb-1",children:"Confirmar canje"}),G.jsxs("p",{className:"text-sm text-gray-300 mb-4",children:["Vas a canjear el código ",G.jsx("span",{className:"font-mono",children:y.id}),"."]}),G.jsxs("div",{className:"space-y-2 text-sm",children:[G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-400",children:"Monto"}),G.jsxs("span",{className:"font-medium",children:[y.amount," puntos"]})]}),G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-400",children:"Estado"}),G.jsx("span",{className:"font-medium",children:y.used?"Usado":y.active===!1?"Inactivo":"Disponible"})]}),y.expiresAt&&G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-400",children:"Expira"}),G.jsx("span",{className:"font-medium",children:y.expiresAt.toLocaleString()})]}),y.expired&&G.jsx("div",{className:"text-red-400",children:"Este código ya expiró."})]}),G.jsxs("div",{className:"mt-5 flex gap-2 justify-end",children:[G.jsx(wi,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:()=>E(null),children:"Cancelar"}),G.jsxs(wi,{onClick:async()=>{s(!0);try{const D=await tL(e,y.id);t({title:"Canje exitoso",description:`Se añadieron ${D.amount} puntos a tu saldo.`}),c(""),E(null)}catch(D){t({title:"No se pudo canjear",description:D?.message||"Error desconocido",variant:"destructive"})}finally{s(!1)}},disabled:o||y.used||y.active===!1||y.expired,children:[o?G.jsx(zc,{className:"w-4 h-4 animate-spin"}):G.jsx(_E,{className:"w-4 h-4"}),G.jsx("span",{className:"ml-2",children:"Confirmar canje"})]})]})]})]})]})},XB=({cert:n})=>{const e=o=>{if(!o)return"Fecha desconocida";try{return(o.toDate?o.toDate():new Date(o)).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}catch{return"Fecha inválida"}},t=()=>{n?.idValidacion&&window.open(`https://borealabs.org/validacion?id=${n.idValidacion}`,"_blank")},r=()=>Array.isArray(n?.urlPdf)&&n.urlPdf.length>0?n.urlPdf[0]?.downloadURL||n.urlPdf[0]?.url||null:n?.urlPdf?.downloadURL?n.urlPdf.downloadURL:n?.downloadURL?n.downloadURL:null,i=()=>{const o=r();o&&window.open(o,"_blank")};return G.jsxs(Ru.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"rounded-2xl p-6 glass-effect flex flex-col justify-between transition-all duration-300 hover:border-boreal-aqua/50",children:[G.jsxs("div",{children:[G.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[G.jsx(Fg,{className:"w-8 h-8 text-boreal-aqua"}),G.jsx("h3",{className:"text-xl font-bold text-boreal-aqua truncate",children:n.nombreEvento||"Evento Desconocido"})]}),G.jsx("p",{className:"text-lg text-white mb-1",children:n.nombreUsuario||"Usuario Desconocido"}),G.jsxs("p",{className:"text-sm text-gray-300 mb-4",children:["Emitido: ",e(n.fechaEmision)]}),G.jsxs("p",{className:"text-xs text-gray-400 font-mono break-all",children:["ID: ",n.idValidacion||n.id]})]}),G.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[G.jsxs(wi,{className:"w-full bg-gradient-to-r from-boreal-aqua to-boreal-blue text-boreal-dark font-bold hover:opacity-90",onClick:t,children:[G.jsx(Fg,{className:"w-4 h-4 mr-2"}),"Validar"]}),G.jsxs(wi,{variant:"outline",className:"w-full border-white/30 text-white hover:bg-white/10",onClick:i,disabled:!r(),children:[G.jsx(k7,{className:"w-4 h-4 mr-2"}),"Descargar PDF"]})]})]})},YB=({user:n})=>{const[e,t]=U.useState([]),[r,i]=U.useState(!0),[o,s]=U.useState("certs");U.useEffect(()=>{if(!n||!Yr)return;i(!0);const c=xv(Yr,"certificados"),f=[];n.email&&(f.push(Og(c,uE("userEmail","==",n.email))),f.push(Og(c,uE("correoUsuario","==",n.email))));const d=new Map;let p=0;const v=f.map(y=>kv(y,E=>{E.forEach(T=>{d.set(T.id,{id:T.id,...T.data()})}),p+=1,t(Array.from(d.values())),p>=1&&i(!1)},E=>{console.error("Error al obtener certificados:",E),p+=1,p>=1&&i(!1)}));return()=>v.forEach(y=>y&&y())},[n,Yr]);const u=n.displayName||n.email.split("@")[0];return G.jsxs(Ru.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"max-w-7xl w-full mx-auto p-4 md:p-8",children:[G.jsx(im,{children:G.jsx("title",{children:"Boreal Wallet"})}),G.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:G.jsxs("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-boreal-aqua to-boreal-blue",children:["Hola, ",u]})}),G.jsx("p",{className:"text-lg text-gray-300 mb-6",children:"Aquí están tus certificados y puntos de Boreal Labs."}),G.jsxs("div",{className:"mb-8 inline-flex rounded-lg border border-white/10 p-1 bg-white/5",children:[G.jsx("button",{className:`px-4 py-2 rounded-md text-sm font-medium ${o==="certs"?"bg-boreal-aqua text-boreal-dark":"text-white hover:bg-white/10"}`,onClick:()=>s("certs"),children:"Certificados"}),G.jsx("button",{className:`px-4 py-2 rounded-md text-sm font-medium ${o==="points"?"bg-boreal-aqua text-boreal-dark":"text-white hover:bg-white/10"}`,onClick:()=>s("points"),children:"Mis puntos"})]}),o==="certs"&&r&&G.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400",children:[G.jsx(zc,{className:"w-12 h-12 mb-4 animate-spin"}),G.jsx("p",{children:"Buscando tus certificados..."})]}),o==="certs"&&!r&&e.length===0&&G.jsxs("div",{className:"flex flex-col items-center justify-center h-64 rounded-2xl glass-effect p-8",children:[G.jsx(U7,{className:"w-16 h-16 text-boreal-purple mb-4"}),G.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No se encontraron certificados"}),G.jsxs("p",{className:"text-gray-300 text-center max-w-md",children:["No pudimos encontrar certificados asociados a la cuenta ",G.jsx("span",{className:"font-medium text-white",children:n.email}),"."]})]}),o==="certs"&&!r&&e.length>0&&G.jsx(cT,{children:G.jsx(Ru.div,{layout:!0,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(c=>G.jsx(XB,{cert:c},c.id))})}),o==="points"&&G.jsx("div",{className:"mt-4",children:G.jsx(qB,{user:n})})]})};var Wv=lA();const QB=Bu(Wv);function dr(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function WS(n,e=[]){let t=[];function r(o,s){const u=U.createContext(s),c=t.length;t=[...t,s];const f=p=>{const{scope:v,children:y,...E}=p,T=v?.[n]?.[c]||u,C=U.useMemo(()=>E,Object.values(E));return G.jsx(T.Provider,{value:C,children:y})};f.displayName=o+"Provider";function d(p,v){const y=v?.[n]?.[c]||u,E=U.useContext(y);if(E)return E;if(s!==void 0)return s;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[f,d]}const i=()=>{const o=t.map(s=>U.createContext(s));return function(u){const c=u?.[n]||o;return U.useMemo(()=>({[`__scope${n}`]:{...u,[n]:c}}),[u,c])}};return i.scopeName=n,[r,ZB(i,...e)]}function ZB(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((u,{useScope:c,scopeName:f})=>{const p=c(o)[`__scope${f}`];return{...u,...p}},{});return U.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return t.scopeName=e.scopeName,t}function JB(n){const e=n+"CollectionProvider",[t,r]=WS(e),[i,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),s=T=>{const{scope:C,children:b}=T,P=Tn.useRef(null),D=Tn.useRef(new Map).current;return G.jsx(i,{scope:C,itemMap:D,collectionRef:P,children:b})};s.displayName=e;const u=n+"CollectionSlot",c=Fd(u),f=Tn.forwardRef((T,C)=>{const{scope:b,children:P}=T,D=o(u,b),F=la(C,D.collectionRef);return G.jsx(c,{ref:F,children:P})});f.displayName=u;const d=n+"CollectionItemSlot",p="data-radix-collection-item",v=Fd(d),y=Tn.forwardRef((T,C)=>{const{scope:b,children:P,...D}=T,F=Tn.useRef(null),j=la(C,F),W=o(d,b);return Tn.useEffect(()=>(W.itemMap.set(F,{ref:F,...D}),()=>void W.itemMap.delete(F))),G.jsx(v,{[p]:"",ref:j,children:P})});y.displayName=d;function E(T){const C=o(n+"CollectionConsumer",T);return Tn.useCallback(()=>{const P=C.collectionRef.current;if(!P)return[];const D=Array.from(P.querySelectorAll(`[${p}]`));return Array.from(C.itemMap.values()).sort((W,R)=>D.indexOf(W.ref.current)-D.indexOf(R.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:s,Slot:f,ItemSlot:y},E,r]}var eU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Di=eU.reduce((n,e)=>{const t=Fd(`Primitive.${e}`),r=U.forwardRef((i,o)=>{const{asChild:s,...u}=i,c=s?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),G.jsx(c,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function $S(n,e){n&&Wv.flushSync(()=>n.dispatchEvent(e))}function ca(n){const e=U.useRef(n);return U.useEffect(()=>{e.current=n}),U.useMemo(()=>(...t)=>e.current?.(...t),[])}function tU(n,e=globalThis?.document){const t=ca(n);U.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var nU="DismissableLayer",Zg="dismissableLayer.update",rU="dismissableLayer.pointerDownOutside",iU="dismissableLayer.focusOutside",sA,KS=U.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),qS=U.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:u,...c}=n,f=U.useContext(KS),[d,p]=U.useState(null),v=d?.ownerDocument??globalThis?.document,[,y]=U.useState({}),E=la(e,R=>p(R)),T=Array.from(f.layers),[C]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),b=T.indexOf(C),P=d?T.indexOf(d):-1,D=f.layersWithOutsidePointerEventsDisabled.size>0,F=P>=b,j=sU(R=>{const I=R.target,O=[...f.branches].some(M=>M.contains(I));!F||O||(i?.(R),s?.(R),R.defaultPrevented||u?.())},v),W=aU(R=>{const I=R.target;[...f.branches].some(M=>M.contains(I))||(o?.(R),s?.(R),R.defaultPrevented||u?.())},v);return tU(R=>{P===f.layers.size-1&&(r?.(R),!R.defaultPrevented&&u&&(R.preventDefault(),u()))},v),U.useEffect(()=>{if(d)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(sA=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(d)),f.layers.add(d),aA(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=sA)}},[d,v,t,f]),U.useEffect(()=>()=>{d&&(f.layers.delete(d),f.layersWithOutsidePointerEventsDisabled.delete(d),aA())},[d,f]),U.useEffect(()=>{const R=()=>y({});return document.addEventListener(Zg,R),()=>document.removeEventListener(Zg,R)},[]),G.jsx(Di.div,{...c,ref:E,style:{pointerEvents:D?F?"auto":"none":void 0,...n.style},onFocusCapture:dr(n.onFocusCapture,W.onFocusCapture),onBlurCapture:dr(n.onBlurCapture,W.onBlurCapture),onPointerDownCapture:dr(n.onPointerDownCapture,j.onPointerDownCapture)})});qS.displayName=nU;var oU="DismissableLayerBranch",XS=U.forwardRef((n,e)=>{const t=U.useContext(KS),r=U.useRef(null),i=la(e,r);return U.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),G.jsx(Di.div,{...n,ref:i})});XS.displayName=oU;function sU(n,e=globalThis?.document){const t=ca(n),r=U.useRef(!1),i=U.useRef(()=>{});return U.useEffect(()=>{const o=u=>{if(u.target&&!r.current){let c=function(){YS(rU,t,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function aU(n,e=globalThis?.document){const t=ca(n),r=U.useRef(!1);return U.useEffect(()=>{const i=o=>{o.target&&!r.current&&YS(iU,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function aA(){const n=new CustomEvent(Zg);document.dispatchEvent(n)}function YS(n,e,t,{discrete:r}){const i=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?$S(i,o):i.dispatchEvent(o)}var uU=qS,lU=XS,Hc=globalThis?.document?U.useLayoutEffect:()=>{},cU="Portal",QS=U.forwardRef((n,e)=>{const{container:t,...r}=n,[i,o]=U.useState(!1);Hc(()=>o(!0),[]);const s=t||i&&globalThis?.document?.body;return s?QB.createPortal(G.jsx(Di.div,{...r,ref:e}),s):null});QS.displayName=cU;function fU(n,e){return U.useReducer((t,r)=>e[t][r]??t,n)}var ZS=n=>{const{present:e,children:t}=n,r=hU(e),i=typeof t=="function"?t({present:r.isPresent}):U.Children.only(t),o=la(r.ref,dU(i));return typeof t=="function"||r.isPresent?U.cloneElement(i,{ref:o}):null};ZS.displayName="Presence";function hU(n){const[e,t]=U.useState(),r=U.useRef(null),i=U.useRef(n),o=U.useRef("none"),s=n?"mounted":"unmounted",[u,c]=fU(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return U.useEffect(()=>{const f=$h(r.current);o.current=u==="mounted"?f:"none"},[u]),Hc(()=>{const f=r.current,d=i.current;if(d!==n){const v=o.current,y=$h(f);n?c("MOUNT"):y==="none"||f?.display==="none"?c("UNMOUNT"):c(d&&v!==y?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,c]),Hc(()=>{if(e){let f;const d=e.ownerDocument.defaultView??window,p=y=>{const T=$h(r.current).includes(CSS.escape(y.animationName));if(y.target===e&&T&&(c("ANIMATION_END"),!i.current)){const C=e.style.animationFillMode;e.style.animationFillMode="forwards",f=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=C)})}},v=y=>{y.target===e&&(o.current=$h(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{d.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:U.useCallback(f=>{r.current=f?getComputedStyle(f):null,t(f)},[])}}function $h(n){return n?.animationName||"none"}function dU(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var pU=N4[" useInsertionEffect ".trim().toString()]||Hc;function gU({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,o,s]=mU({defaultProp:e,onChange:t}),u=n!==void 0,c=u?n:i;{const d=U.useRef(n!==void 0);U.useEffect(()=>{const p=d.current;p!==u&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=u},[u,r])}const f=U.useCallback(d=>{if(u){const p=vU(d)?d(n):d;p!==n&&s.current?.(p)}else o(d)},[u,n,o,s]);return[c,f]}function mU({defaultProp:n,onChange:e}){const[t,r]=U.useState(n),i=U.useRef(t),o=U.useRef(e);return pU(()=>{o.current=e},[e]),U.useEffect(()=>{i.current!==t&&(o.current?.(t),i.current=t)},[t,i]),[t,r,o]}function vU(n){return typeof n=="function"}var yU=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),_U="VisuallyHidden",$v=U.forwardRef((n,e)=>G.jsx(Di.span,{...n,ref:e,style:{...yU,...n.style}}));$v.displayName=_U;var Kv="ToastProvider",[qv,wU,xU]=JB("Toast"),[JS]=WS("Toast",[xU]),[EU,pp]=JS(Kv),e3=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:s}=n,[u,c]=U.useState(null),[f,d]=U.useState(0),p=U.useRef(!1),v=U.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Kv}\`. Expected non-empty \`string\`.`),G.jsx(qv.Provider,{scope:e,children:G.jsx(EU,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:f,viewport:u,onViewportChange:c,onToastAdd:U.useCallback(()=>d(y=>y+1),[]),onToastRemove:U.useCallback(()=>d(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:v,children:s})})};e3.displayName=Kv;var t3="ToastViewport",AU=["F8"],Jg="toast.viewportPause",em="toast.viewportResume",n3=U.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=AU,label:i="Notifications ({hotkey})",...o}=n,s=pp(t3,t),u=wU(t),c=U.useRef(null),f=U.useRef(null),d=U.useRef(null),p=U.useRef(null),v=la(e,p,s.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=s.toastCount>0;U.useEffect(()=>{const C=b=>{r.length!==0&&r.every(D=>b[D]||b.code===D)&&p.current?.focus()};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[r]),U.useEffect(()=>{const C=c.current,b=p.current;if(E&&C&&b){const P=()=>{if(!s.isClosePausedRef.current){const W=new CustomEvent(Jg);b.dispatchEvent(W),s.isClosePausedRef.current=!0}},D=()=>{if(s.isClosePausedRef.current){const W=new CustomEvent(em);b.dispatchEvent(W),s.isClosePausedRef.current=!1}},F=W=>{!C.contains(W.relatedTarget)&&D()},j=()=>{C.contains(document.activeElement)||D()};return C.addEventListener("focusin",P),C.addEventListener("focusout",F),C.addEventListener("pointermove",P),C.addEventListener("pointerleave",j),window.addEventListener("blur",P),window.addEventListener("focus",D),()=>{C.removeEventListener("focusin",P),C.removeEventListener("focusout",F),C.removeEventListener("pointermove",P),C.removeEventListener("pointerleave",j),window.removeEventListener("blur",P),window.removeEventListener("focus",D)}}},[E,s.isClosePausedRef]);const T=U.useCallback(({tabbingDirection:C})=>{const P=u().map(D=>{const F=D.ref.current,j=[F,...LU(F)];return C==="forwards"?j:j.reverse()});return(C==="forwards"?P.reverse():P).flat()},[u]);return U.useEffect(()=>{const C=p.current;if(C){const b=P=>{const D=P.altKey||P.ctrlKey||P.metaKey;if(P.key==="Tab"&&!D){const j=document.activeElement,W=P.shiftKey;if(P.target===C&&W){f.current?.focus();return}const O=T({tabbingDirection:W?"backwards":"forwards"}),M=O.findIndex(B=>B===j);L1(O.slice(M+1))?P.preventDefault():W?f.current?.focus():d.current?.focus()}};return C.addEventListener("keydown",b),()=>C.removeEventListener("keydown",b)}},[u,T]),G.jsxs(lU,{ref:c,role:"region","aria-label":i.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&G.jsx(tm,{ref:f,onFocusFromOutsideViewport:()=>{const C=T({tabbingDirection:"forwards"});L1(C)}}),G.jsx(qv.Slot,{scope:t,children:G.jsx(Di.ol,{tabIndex:-1,...o,ref:v})}),E&&G.jsx(tm,{ref:d,onFocusFromOutsideViewport:()=>{const C=T({tabbingDirection:"backwards"});L1(C)}})]})});n3.displayName=t3;var r3="ToastFocusProxy",tm=U.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,o=pp(r3,t);return G.jsx($v,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:s=>{const u=s.relatedTarget;!o.viewport?.contains(u)&&r()}})});tm.displayName=r3;var cf="Toast",TU="toast.swipeStart",CU="toast.swipeMove",IU="toast.swipeCancel",SU="toast.swipeEnd",i3=U.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:o,...s}=n,[u,c]=gU({prop:r,defaultProp:i??!0,onChange:o,caller:cf});return G.jsx(ZS,{present:t||u,children:G.jsx(bU,{open:u,...s,ref:e,onClose:()=>c(!1),onPause:ca(n.onPause),onResume:ca(n.onResume),onSwipeStart:dr(n.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:dr(n.onSwipeMove,f=>{const{x:d,y:p}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:dr(n.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:dr(n.onSwipeEnd,f=>{const{x:d,y:p}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),c(!1)})})})});i3.displayName=cf;var[RU,PU]=JS(cf,{onClose(){}}),bU=U.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:o,onClose:s,onEscapeKeyDown:u,onPause:c,onResume:f,onSwipeStart:d,onSwipeMove:p,onSwipeCancel:v,onSwipeEnd:y,...E}=n,T=pp(cf,t),[C,b]=U.useState(null),P=la(e,fe=>b(fe)),D=U.useRef(null),F=U.useRef(null),j=i||T.duration,W=U.useRef(0),R=U.useRef(j),I=U.useRef(0),{onToastAdd:O,onToastRemove:M}=T,B=ca(()=>{C?.contains(document.activeElement)&&T.viewport?.focus(),s()}),z=U.useCallback(fe=>{!fe||fe===1/0||(window.clearTimeout(I.current),W.current=new Date().getTime(),I.current=window.setTimeout(B,fe))},[B]);U.useEffect(()=>{const fe=T.viewport;if(fe){const Le=()=>{z(R.current),f?.()},je=()=>{const Te=new Date().getTime()-W.current;R.current=R.current-Te,window.clearTimeout(I.current),c?.()};return fe.addEventListener(Jg,je),fe.addEventListener(em,Le),()=>{fe.removeEventListener(Jg,je),fe.removeEventListener(em,Le)}}},[T.viewport,j,c,f,z]),U.useEffect(()=>{o&&!T.isClosePausedRef.current&&z(j)},[o,j,T.isClosePausedRef,z]),U.useEffect(()=>(O(),()=>M()),[O,M]);const L=U.useMemo(()=>C?f3(C):null,[C]);return T.viewport?G.jsxs(G.Fragment,{children:[L&&G.jsx(DU,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:L}),G.jsx(RU,{scope:t,onClose:B,children:Wv.createPortal(G.jsx(qv.ItemSlot,{scope:t,children:G.jsx(uU,{asChild:!0,onEscapeKeyDown:dr(u,()=>{T.isFocusedToastEscapeKeyDownRef.current||B(),T.isFocusedToastEscapeKeyDownRef.current=!1}),children:G.jsx(Di.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":T.swipeDirection,...E,ref:P,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:dr(n.onKeyDown,fe=>{fe.key==="Escape"&&(u?.(fe.nativeEvent),fe.nativeEvent.defaultPrevented||(T.isFocusedToastEscapeKeyDownRef.current=!0,B()))}),onPointerDown:dr(n.onPointerDown,fe=>{fe.button===0&&(D.current={x:fe.clientX,y:fe.clientY})}),onPointerMove:dr(n.onPointerMove,fe=>{if(!D.current)return;const Le=fe.clientX-D.current.x,je=fe.clientY-D.current.y,Te=!!F.current,Z=["left","right"].includes(T.swipeDirection),pe=["left","up"].includes(T.swipeDirection)?Math.min:Math.max,he=Z?pe(0,Le):0,K=Z?0:pe(0,je),re=fe.pointerType==="touch"?10:2,xe={x:he,y:K},Ie={originalEvent:fe,delta:xe};Te?(F.current=xe,Kh(CU,p,Ie,{discrete:!1})):uA(xe,T.swipeDirection,re)?(F.current=xe,Kh(TU,d,Ie,{discrete:!1}),fe.target.setPointerCapture(fe.pointerId)):(Math.abs(Le)>re||Math.abs(je)>re)&&(D.current=null)}),onPointerUp:dr(n.onPointerUp,fe=>{const Le=F.current,je=fe.target;if(je.hasPointerCapture(fe.pointerId)&&je.releasePointerCapture(fe.pointerId),F.current=null,D.current=null,Le){const Te=fe.currentTarget,Z={originalEvent:fe,delta:Le};uA(Le,T.swipeDirection,T.swipeThreshold)?Kh(SU,y,Z,{discrete:!0}):Kh(IU,v,Z,{discrete:!0}),Te.addEventListener("click",pe=>pe.preventDefault(),{once:!0})}})})})}),T.viewport)})]}):null}),DU=n=>{const{__scopeToast:e,children:t,...r}=n,i=pp(cf,e),[o,s]=U.useState(!1),[u,c]=U.useState(!1);return kU(()=>s(!0)),U.useEffect(()=>{const f=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(f)},[]),u?null:G.jsx(QS,{asChild:!0,children:G.jsx($v,{...r,children:o&&G.jsxs(G.Fragment,{children:[i.label," ",t]})})})},OU="ToastTitle",o3=U.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return G.jsx(Di.div,{...r,ref:e})});o3.displayName=OU;var NU="ToastDescription",s3=U.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return G.jsx(Di.div,{...r,ref:e})});s3.displayName=NU;var a3="ToastAction",u3=U.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?G.jsx(c3,{altText:t,asChild:!0,children:G.jsx(Xv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${a3}\`. Expected non-empty \`string\`.`),null)});u3.displayName=a3;var l3="ToastClose",Xv=U.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=PU(l3,t);return G.jsx(c3,{asChild:!0,children:G.jsx(Di.button,{type:"button",...r,ref:e,onClick:dr(n.onClick,i.onClose)})})});Xv.displayName=l3;var c3=U.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return G.jsx(Di.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function f3(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),MU(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const s=r.dataset.radixToastAnnounceAlt;s&&e.push(s)}else e.push(...f3(r))}}),e}function Kh(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,o=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?$S(i,o):i.dispatchEvent(o)}var uA=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),o=r>i;return e==="left"||e==="right"?o&&r>t:!o&&i>t};function kU(n=()=>{}){const e=ca(n);Hc(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function MU(n){return n.nodeType===n.ELEMENT_NODE}function LU(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function L1(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var FU=e3,h3=n3,d3=i3,p3=o3,g3=s3,m3=u3,v3=Xv;const VU=FU,y3=U.forwardRef(({className:n,...e},t)=>G.jsx(h3,{ref:t,className:ps("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));y3.displayName=h3.displayName;const BU=yS("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),_3=U.forwardRef(({className:n,variant:e,...t},r)=>G.jsx(d3,{ref:r,className:ps(BU({variant:e}),n),...t}));_3.displayName=d3.displayName;const UU=U.forwardRef(({className:n,...e},t)=>G.jsx(m3,{ref:t,className:ps("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));UU.displayName=m3.displayName;const w3=U.forwardRef(({className:n,...e},t)=>G.jsx(v3,{ref:t,className:ps("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:G.jsx(z7,{className:"h-4 w-4"})}));w3.displayName=v3.displayName;const x3=U.forwardRef(({className:n,...e},t)=>G.jsx(p3,{ref:t,className:ps("text-sm font-semibold",n),...e}));x3.displayName=p3.displayName;const E3=U.forwardRef(({className:n,...e},t)=>G.jsx(g3,{ref:t,className:ps("text-sm opacity-90",n),...e}));E3.displayName=g3.displayName;function jU(){const{toasts:n}=Lv();return G.jsxs(VU,{children:[n.map(function({id:e,title:t,description:r,action:i,...o}){return G.jsxs(_3,{...o,children:[G.jsxs("div",{className:"grid gap-1",children:[t&&G.jsx(x3,{children:t}),r&&G.jsx(E3,{children:r})]}),i,G.jsx(w3,{})]},e)}),G.jsx(y3,{})]})}function zU(){const[n,e]=U.useState(null),[t,r]=U.useState(!1);return U.useEffect(()=>{if(!gu||!ra){r(!0);return}try{const i=gN(ra,o=>{e(o),r(!0)});return()=>i()}catch(i){console.error("No se pudo suscribir a onAuthStateChanged:",i),r(!0)}},[]),G.jsx(mA,{children:G.jsxs("div",{className:"bg-boreal-dark text-white min-h-screen flex flex-col",style:{fontFamily:"'Montserrat', sans-serif"},children:[G.jsxs(im,{children:[G.jsx("title",{children:"Boreal Wallet"}),G.jsx("style",{children:`
            :root {
              --boreal-dark: #010b1d;
              --boreal-aqua: #69e6af;
              --boreal-purple: #be58f0;
              --boreal-blue: #3162ed;
            }
          `})]}),G.jsx(H7,{user:n}),G.jsx("main",{className:"flex-grow flex flex-col items-center w-full",children:G.jsxs(cT,{mode:"wait",children:[!gu&&G.jsx(Ru.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-grow flex items-center justify-center p-6",children:G.jsxs("div",{className:"max-w-lg text-center space-y-3",children:[G.jsx("h2",{className:"text-xl font-bold",children:"Configura Firebase"}),G.jsxs("p",{className:"text-white/80",children:["Faltan variables de entorno. Crea un archivo ",G.jsx("code",{children:".env"})," en la raíz con las claves",G.jsx("code",{children:" VITE_FIREBASE_API_KEY, VITE_FIREBASE_AUTH_DOMAIN, VITE_FIREBASE_PROJECT_ID, VITE_FIREBASE_STORAGE_BUCKET, VITE_FIREBASE_MESSAGING_SENDER_ID, VITE_FIREBASE_APP_ID"}),"."]}),G.jsx("p",{className:"text-white/60",children:"Tras guardarlo, reinicia el servidor de desarrollo."})]})},"config-warning"),!t&&G.jsx(Ru.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-grow flex items-center justify-center",children:G.jsx(zc,{className:"w-12 h-12 text-boreal-aqua animate-spin"})},"loader"),t&&gu&&!n&&G.jsx(Q7,{},"login"),t&&gu&&n&&G.jsx(YB,{user:n},"wallet")]})}),G.jsx(G7,{}),G.jsx(jU,{})]})})}B4.createRoot(document.getElementById("root")).render(G.jsx(Tn.StrictMode,{children:G.jsx(zU,{})}));
